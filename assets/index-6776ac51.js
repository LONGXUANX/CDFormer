var zZ=Object.defineProperty;var UZ=(n,e,t)=>e in n?zZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var HZ=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var kt=(n,e,t)=>(UZ(n,typeof e!="symbol"?e+"":e,t),t);var WJe=HZ((Ba,Fa)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function AD(n,e){const t=Object.create(null),i=n.split(",");for(let r=0;r<i.length;r++)t[i[r]]=!0;return e?r=>!!t[r.toLowerCase()]:r=>!!t[r]}const Vi={},Ym=[],Vn=()=>{},VZ=()=>!1,$Z=/^on[^a-z]/,BC=n=>$Z.test(n),ED=n=>n.startsWith("onUpdate:"),gr=Object.assign,ID=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},GZ=Object.prototype.hasOwnProperty,Cn=(n,e)=>GZ.call(n,e),nt=Array.isArray,jm=n=>eb(n)==="[object Map]",FC=n=>eb(n)==="[object Set]",Ad=n=>eb(n)==="[object Date]",Tt=n=>typeof n=="function",xt=n=>typeof n=="string",By=n=>typeof n=="symbol",Yt=n=>n!==null&&typeof n=="object",Fy=n=>Yt(n)&&Tt(n.then)&&Tt(n.catch),w6=Object.prototype.toString,eb=n=>w6.call(n),WZ=n=>eb(n).slice(8,-1),zy=n=>eb(n)==="[object Object]",RD=n=>xt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,n1=AD(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),zC=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},KZ=/-(\w)/g,Wa=zC(n=>n.replace(KZ,(e,t)=>t?t.toUpperCase():"")),qZ=/\B([A-Z])/g,jd=zC(n=>n.replace(qZ,"-$1").toLowerCase()),tb=zC(n=>n.charAt(0).toUpperCase()+n.slice(1)),Y0=zC(n=>n?`on${tb(n)}`:""),Uy=(n,e)=>!Object.is(n,e),i1=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},tx=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},D2=n=>{const e=parseFloat(n);return isNaN(e)?n:e},XZ=n=>{const e=xt(n)?Number(n):NaN;return isNaN(e)?n:e};let JO;const L2=()=>JO||(JO=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ct(n){if(nt(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],r=xt(i)?ZZ(i):Ct(i);if(r)for(const s in r)e[s]=r[s]}return e}else{if(xt(n))return n;if(Yt(n))return n}}const YZ=/;(?![^(]*\))/g,jZ=/:([^]+)/,QZ=/\/\*[^]*?\*\//g;function ZZ(n){const e={};return n.replace(QZ,"").split(YZ).forEach(t=>{if(t){const i=t.split(jZ);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function $(n){let e="";if(xt(n))e=n;else if(nt(n))for(let t=0;t<n.length;t++){const i=$(n[t]);i&&(e+=i+" ")}else if(Yt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function nl(n){if(!n)return null;let{class:e,style:t}=n;return e&&!xt(e)&&(n.class=$(e)),t&&(n.style=Ct(t)),n}const JZ="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",eJ=AD(JZ);function x6(n){return!!n||n===""}function tJ(n,e){if(n.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<n.length;i++)t=gv(n[i],e[i]);return t}function gv(n,e){if(n===e)return!0;let t=Ad(n),i=Ad(e);if(t||i)return t&&i?n.getTime()===e.getTime():!1;if(t=By(n),i=By(e),t||i)return n===e;if(t=nt(n),i=nt(e),t||i)return t&&i?tJ(n,e):!1;if(t=Yt(n),i=Yt(e),t||i){if(!t||!i)return!1;const r=Object.keys(n).length,s=Object.keys(e).length;if(r!==s)return!1;for(const a in n){const o=n.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!gv(n[a],e[a]))return!1}}return String(n)===String(e)}function C6(n,e){return n.findIndex(t=>gv(t,e))}const rt=n=>xt(n)?n:n==null?"":nt(n)||Yt(n)&&(n.toString===w6||!Tt(n.toString))?JSON.stringify(n,M6,2):String(n),M6=(n,e)=>e&&e.__v_isRef?M6(n,e.value):jm(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,r])=>(t[`${i} =>`]=r,t),{})}:FC(e)?{[`Set(${e.size})`]:[...e.values()]}:Yt(e)&&!nt(e)&&!zy(e)?String(e):e;let Da;class T6{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Da,!e&&Da&&(this.index=(Da.scopes||(Da.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=Da;try{return Da=this,e()}finally{Da=t}}}on(){Da=this}off(){Da=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function nJ(n){return new T6(n)}function iJ(n,e=Da){e&&e.active&&e.effects.push(n)}function A6(){return Da}function E6(n){Da&&Da.cleanups.push(n)}const PD=n=>{const e=new Set(n);return e.w=0,e.n=0,e},I6=n=>(n.w&Ed)>0,R6=n=>(n.n&Ed)>0,rJ=({deps:n})=>{if(n.length)for(let e=0;e<n.length;e++)n[e].w|=Ed},sJ=n=>{const{deps:e}=n;if(e.length){let t=0;for(let i=0;i<e.length;i++){const r=e[i];I6(r)&&!R6(r)?r.delete(n):e[t++]=r,r.w&=~Ed,r.n&=~Ed}e.length=t}},nx=new WeakMap;let O0=0,Ed=1;const k2=30;let el;const Sh=Symbol(""),O2=Symbol("");class DD{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,iJ(this,i)}run(){if(!this.active)return this.fn();let e=el,t=hd;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=el,el=this,hd=!0,Ed=1<<++O0,O0<=k2?rJ(this):eN(this),this.fn()}finally{O0<=k2&&sJ(this),Ed=1<<--O0,el=this.parent,hd=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){el===this?this.deferStop=!0:this.active&&(eN(this),this.onStop&&this.onStop(),this.active=!1)}}function eN(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}let hd=!0;const P6=[];function sg(){P6.push(hd),hd=!1}function ag(){const n=P6.pop();hd=n===void 0?!0:n}function Sa(n,e,t){if(hd&&el){let i=nx.get(n);i||nx.set(n,i=new Map);let r=i.get(t);r||i.set(t,r=PD()),D6(r)}}function D6(n,e){let t=!1;O0<=k2?R6(n)||(n.n|=Ed,t=!I6(n)):t=!n.has(el),t&&(n.add(el),el.deps.push(n))}function jc(n,e,t,i,r,s){const a=nx.get(n);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(t==="length"&&nt(n)){const l=Number(i);a.forEach((c,u)=>{(u==="length"||u>=l)&&o.push(c)})}else switch(t!==void 0&&o.push(a.get(t)),e){case"add":nt(n)?RD(t)&&o.push(a.get("length")):(o.push(a.get(Sh)),jm(n)&&o.push(a.get(O2)));break;case"delete":nt(n)||(o.push(a.get(Sh)),jm(n)&&o.push(a.get(O2)));break;case"set":jm(n)&&o.push(a.get(Sh));break}if(o.length===1)o[0]&&N2(o[0]);else{const l=[];for(const c of o)c&&l.push(...c);N2(PD(l))}}function N2(n,e){const t=nt(n)?n:[...n];for(const i of t)i.computed&&tN(i);for(const i of t)i.computed||tN(i)}function tN(n,e){(n!==el||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}function aJ(n,e){var t;return(t=nx.get(n))==null?void 0:t.get(e)}const oJ=AD("__proto__,__v_isRef,__isVue"),L6=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(By)),lJ=LD(),cJ=LD(!1,!0),uJ=LD(!0),nN=dJ();function dJ(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const i=Jn(this);for(let s=0,a=this.length;s<a;s++)Sa(i,"get",s+"");const r=i[e](...t);return r===-1||r===!1?i[e](...t.map(Jn)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){sg();const i=Jn(this)[e].apply(this,t);return ag(),i}}),n}function fJ(n){const e=Jn(this);return Sa(e,"has",n),e.hasOwnProperty(n)}function LD(n=!1,e=!1){return function(i,r,s){if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&s===(n?e?EJ:F6:e?B6:N6).get(i))return i;const a=nt(i);if(!n){if(a&&Cn(nN,r))return Reflect.get(nN,r,s);if(r==="hasOwnProperty")return fJ}const o=Reflect.get(i,r,s);return(By(r)?L6.has(r):oJ(r))||(n||Sa(i,"get",r),e)?o:fi(o)?a&&RD(r)?o:o.value:Yt(o)?n?og(o):Nn(o):o}}const hJ=k6(),pJ=k6(!0);function k6(n=!1){return function(t,i,r,s){let a=t[i];if(yv(a)&&fi(a)&&!fi(r))return!1;if(!n&&(!ix(r)&&!yv(r)&&(a=Jn(a),r=Jn(r)),!nt(t)&&fi(a)&&!fi(r)))return a.value=r,!0;const o=nt(t)&&RD(i)?Number(i)<t.length:Cn(t,i),l=Reflect.set(t,i,r,s);return t===Jn(s)&&(o?Uy(r,a)&&jc(t,"set",i,r):jc(t,"add",i,r)),l}}function mJ(n,e){const t=Cn(n,e);n[e];const i=Reflect.deleteProperty(n,e);return i&&t&&jc(n,"delete",e,void 0),i}function vJ(n,e){const t=Reflect.has(n,e);return(!By(e)||!L6.has(e))&&Sa(n,"has",e),t}function gJ(n){return Sa(n,"iterate",nt(n)?"length":Sh),Reflect.ownKeys(n)}const O6={get:lJ,set:hJ,deleteProperty:mJ,has:vJ,ownKeys:gJ},yJ={get:uJ,set(n,e){return!0},deleteProperty(n,e){return!0}},_J=gr({},O6,{get:cJ,set:pJ}),kD=n=>n,UC=n=>Reflect.getPrototypeOf(n);function Db(n,e,t=!1,i=!1){n=n.__v_raw;const r=Jn(n),s=Jn(e);t||(e!==s&&Sa(r,"get",e),Sa(r,"get",s));const{has:a}=UC(r),o=i?kD:t?BD:Hy;if(a.call(r,e))return o(n.get(e));if(a.call(r,s))return o(n.get(s));n!==r&&n.get(e)}function Lb(n,e=!1){const t=this.__v_raw,i=Jn(t),r=Jn(n);return e||(n!==r&&Sa(i,"has",n),Sa(i,"has",r)),n===r?t.has(n):t.has(n)||t.has(r)}function kb(n,e=!1){return n=n.__v_raw,!e&&Sa(Jn(n),"iterate",Sh),Reflect.get(n,"size",n)}function iN(n){n=Jn(n);const e=Jn(this);return UC(e).has.call(e,n)||(e.add(n),jc(e,"add",n,n)),this}function rN(n,e){e=Jn(e);const t=Jn(this),{has:i,get:r}=UC(t);let s=i.call(t,n);s||(n=Jn(n),s=i.call(t,n));const a=r.call(t,n);return t.set(n,e),s?Uy(e,a)&&jc(t,"set",n,e):jc(t,"add",n,e),this}function sN(n){const e=Jn(this),{has:t,get:i}=UC(e);let r=t.call(e,n);r||(n=Jn(n),r=t.call(e,n)),i&&i.call(e,n);const s=e.delete(n);return r&&jc(e,"delete",n,void 0),s}function aN(){const n=Jn(this),e=n.size!==0,t=n.clear();return e&&jc(n,"clear",void 0,void 0),t}function Ob(n,e){return function(i,r){const s=this,a=s.__v_raw,o=Jn(a),l=e?kD:n?BD:Hy;return!n&&Sa(o,"iterate",Sh),a.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function Nb(n,e,t){return function(...i){const r=this.__v_raw,s=Jn(r),a=jm(s),o=n==="entries"||n===Symbol.iterator&&a,l=n==="keys"&&a,c=r[n](...i),u=t?kD:e?BD:Hy;return!e&&Sa(s,"iterate",l?O2:Sh),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:o?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function Su(n){return function(...e){return n==="delete"?!1:this}}function bJ(){const n={get(s){return Db(this,s)},get size(){return kb(this)},has:Lb,add:iN,set:rN,delete:sN,clear:aN,forEach:Ob(!1,!1)},e={get(s){return Db(this,s,!1,!0)},get size(){return kb(this)},has:Lb,add:iN,set:rN,delete:sN,clear:aN,forEach:Ob(!1,!0)},t={get(s){return Db(this,s,!0)},get size(){return kb(this,!0)},has(s){return Lb.call(this,s,!0)},add:Su("add"),set:Su("set"),delete:Su("delete"),clear:Su("clear"),forEach:Ob(!0,!1)},i={get(s){return Db(this,s,!0,!0)},get size(){return kb(this,!0)},has(s){return Lb.call(this,s,!0)},add:Su("add"),set:Su("set"),delete:Su("delete"),clear:Su("clear"),forEach:Ob(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Nb(s,!1,!1),t[s]=Nb(s,!0,!1),e[s]=Nb(s,!1,!0),i[s]=Nb(s,!0,!0)}),[n,t,e,i]}const[SJ,wJ,xJ,CJ]=bJ();function OD(n,e){const t=e?n?CJ:xJ:n?wJ:SJ;return(i,r,s)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?i:Reflect.get(Cn(t,r)&&r in i?t:i,r,s)}const MJ={get:OD(!1,!1)},TJ={get:OD(!1,!0)},AJ={get:OD(!0,!1)},N6=new WeakMap,B6=new WeakMap,F6=new WeakMap,EJ=new WeakMap;function IJ(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function RJ(n){return n.__v_skip||!Object.isExtensible(n)?0:IJ(WZ(n))}function Nn(n){return yv(n)?n:ND(n,!1,O6,MJ,N6)}function z6(n){return ND(n,!1,_J,TJ,B6)}function og(n){return ND(n,!0,yJ,AJ,F6)}function ND(n,e,t,i,r){if(!Yt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=r.get(n);if(s)return s;const a=RJ(n);if(a===0)return n;const o=new Proxy(n,a===2?i:t);return r.set(n,o),o}function Qm(n){return yv(n)?Qm(n.__v_raw):!!(n&&n.__v_isReactive)}function yv(n){return!!(n&&n.__v_isReadonly)}function ix(n){return!!(n&&n.__v_isShallow)}function U6(n){return Qm(n)||yv(n)}function Jn(n){const e=n&&n.__v_raw;return e?Jn(e):n}function Wc(n){return tx(n,"__v_skip",!0),n}const Hy=n=>Yt(n)?Nn(n):n,BD=n=>Yt(n)?og(n):n;function FD(n){hd&&el&&(n=Jn(n),D6(n.dep||(n.dep=PD())))}function zD(n,e){n=Jn(n);const t=n.dep;t&&N2(t)}function fi(n){return!!(n&&n.__v_isRef===!0)}function X(n){return H6(n,!1)}function Yn(n){return H6(n,!0)}function H6(n,e){return fi(n)?n:new PJ(n,e)}class PJ{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Jn(e),this._value=t?e:Hy(e)}get value(){return FD(this),this._value}set value(e){const t=this.__v_isShallow||ix(e)||yv(e);e=t?e:Jn(e),Uy(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:Hy(e),zD(this))}}function b(n){return fi(n)?n.value:n}const DJ={get:(n,e,t)=>b(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const r=n[e];return fi(r)&&!fi(t)?(r.value=t,!0):Reflect.set(n,e,t,i)}};function V6(n){return Qm(n)?n:new Proxy(n,DJ)}class LJ{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:i}=e(()=>FD(this),()=>zD(this));this._get=t,this._set=i}get value(){return this._get()}set value(e){this._set(e)}}function kJ(n){return new LJ(n)}function Mr(n){const e=nt(n)?new Array(n.length):{};for(const t in n)e[t]=$6(n,t);return e}class OJ{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return aJ(Jn(this._object),this._key)}}class NJ{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function zn(n,e,t){return fi(n)?n:Tt(n)?new NJ(n):Yt(n)&&arguments.length>1?$6(n,e,t):X(n)}function $6(n,e,t){const i=n[e];return fi(i)?i:new OJ(n,e,t)}class BJ{constructor(e,t,i,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new DD(e,()=>{this._dirty||(this._dirty=!0,zD(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=Jn(this);return FD(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function FJ(n,e,t=!1){let i,r;const s=Tt(n);return s?(i=n,r=Vn):(i=n.get,r=n.set),new BJ(i,r,s||!r,t)}function zJ(n,...e){}function pd(n,e,t,i){let r;try{r=i?n(...i):n()}catch(s){HC(s,e,t)}return r}function Co(n,e,t,i){if(Tt(n)){const s=pd(n,e,t,i);return s&&Fy(s)&&s.catch(a=>{HC(a,e,t)}),s}const r=[];for(let s=0;s<n.length;s++)r.push(Co(n[s],e,t,i));return r}function HC(n,e,t,i=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const a=e.proxy,o=t;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](n,a,o)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){pd(l,null,10,[n,a,o]);return}}UJ(n,t,r,i)}function UJ(n,e,t,i=!0){console.error(n)}let Vy=!1,B2=!1;const Ts=[];let Pl=0;const Zm=[];let Pc=null,qf=0;const G6=Promise.resolve();let UD=null;function Mt(n){const e=UD||G6;return n?e.then(this?n.bind(this):n):e}function HJ(n){let e=Pl+1,t=Ts.length;for(;e<t;){const i=e+t>>>1;$y(Ts[i])<n?e=i+1:t=i}return e}function HD(n){(!Ts.length||!Ts.includes(n,Vy&&n.allowRecurse?Pl+1:Pl))&&(n.id==null?Ts.push(n):Ts.splice(HJ(n.id),0,n),W6())}function W6(){!Vy&&!B2&&(B2=!0,UD=G6.then(q6))}function VJ(n){const e=Ts.indexOf(n);e>Pl&&Ts.splice(e,1)}function $J(n){nt(n)?Zm.push(...n):(!Pc||!Pc.includes(n,n.allowRecurse?qf+1:qf))&&Zm.push(n),W6()}function oN(n,e=Vy?Pl+1:0){for(;e<Ts.length;e++){const t=Ts[e];t&&t.pre&&(Ts.splice(e,1),e--,t())}}function K6(n){if(Zm.length){const e=[...new Set(Zm)];if(Zm.length=0,Pc){Pc.push(...e);return}for(Pc=e,Pc.sort((t,i)=>$y(t)-$y(i)),qf=0;qf<Pc.length;qf++)Pc[qf]();Pc=null,qf=0}}const $y=n=>n.id==null?1/0:n.id,GJ=(n,e)=>{const t=$y(n)-$y(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function q6(n){B2=!1,Vy=!0,Ts.sort(GJ);const e=Vn;try{for(Pl=0;Pl<Ts.length;Pl++){const t=Ts[Pl];t&&t.active!==!1&&pd(t,null,14)}}finally{Pl=0,Ts.length=0,K6(),Vy=!1,UD=null,(Ts.length||Zm.length)&&q6()}}function WJ(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||Vi;let r=t;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in i){const u=`${a==="modelValue"?"model":a}Modifiers`,{number:d,trim:f}=i[u]||Vi;f&&(r=t.map(h=>xt(h)?h.trim():h)),d&&(r=t.map(D2))}let o,l=i[o=Y0(e)]||i[o=Y0(Wa(e))];!l&&s&&(l=i[o=Y0(jd(e))]),l&&Co(l,n,6,r);const c=i[o+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[o])return;n.emitted[o]=!0,Co(c,n,6,r)}}function X6(n,e,t=!1){const i=e.emitsCache,r=i.get(n);if(r!==void 0)return r;const s=n.emits;let a={},o=!1;if(!Tt(n)){const l=c=>{const u=X6(c,e,!0);u&&(o=!0,gr(a,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!o?(Yt(n)&&i.set(n,null),null):(nt(s)?s.forEach(l=>a[l]=null):gr(a,s),Yt(n)&&i.set(n,a),a)}function VC(n,e){return!n||!BC(e)?!1:(e=e.slice(2).replace(/Once$/,""),Cn(n,e[0].toLowerCase()+e.slice(1))||Cn(n,jd(e))||Cn(n,e))}let ss=null,$C=null;function rx(n){const e=ss;return ss=n,$C=n&&n.type.__scopeId||null,e}function VD(n){$C=n}function $D(){$C=null}function ge(n,e=ss,t){if(!e||n._n)return n;const i=(...r)=>{i._d&&bN(-1);const s=rx(e);let a;try{a=n(...r)}finally{rx(s),i._d&&bN(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function tT(n){const{type:e,vnode:t,proxy:i,withProxy:r,props:s,propsOptions:[a],slots:o,attrs:l,emit:c,render:u,renderCache:d,data:f,setupState:h,ctx:p,inheritAttrs:m}=n;let v,g;const _=rx(n);try{if(t.shapeFlag&4){const S=r||i;v=El(u.call(S,S,d,s,h,f,p)),g=l}else{const S=e;v=El(S.length>1?S(s,{attrs:l,slots:o,emit:c}):S(s,null)),g=e.props?l:KJ(l)}}catch(S){J0.length=0,HC(S,n,1),v=oe(Ds)}let y=v;if(g&&m!==!1){const S=Object.keys(g),{shapeFlag:w}=y;S.length&&w&7&&(a&&S.some(ED)&&(g=qJ(g,a)),y=Qc(y,g))}return t.dirs&&(y=Qc(y),y.dirs=y.dirs?y.dirs.concat(t.dirs):t.dirs),t.transition&&(y.transition=t.transition),v=y,rx(_),v}const KJ=n=>{let e;for(const t in n)(t==="class"||t==="style"||BC(t))&&((e||(e={}))[t]=n[t]);return e},qJ=(n,e)=>{const t={};for(const i in n)(!ED(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function XJ(n,e,t){const{props:i,children:r,component:s}=n,{props:a,children:o,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?lN(i,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(a[f]!==i[f]&&!VC(c,f))return!0}}}else return(r||o)&&(!o||!o.$stable)?!0:i===a?!1:i?a?lN(i,a,c):!0:!!a;return!1}function lN(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==n[s]&&!VC(t,s))return!0}return!1}function YJ({vnode:n,parent:e},t){for(;e&&e.subTree===n;)(n=e.vnode).el=t,e=e.parent}const jJ=n=>n.__isSuspense;function QJ(n,e){e&&e.pendingBranch?nt(n)?e.effects.push(...n):e.effects.push(n):$J(n)}function zr(n,e){return GD(n,null,e)}const Bb={};function We(n,e,t){return GD(n,e,t)}function GD(n,e,{immediate:t,deep:i,flush:r,onTrack:s,onTrigger:a}=Vi){var o;const l=A6()===((o=Xr)==null?void 0:o.scope)?Xr:null;let c,u=!1,d=!1;if(fi(n)?(c=()=>n.value,u=ix(n)):Qm(n)?(c=()=>n,i=!0):nt(n)?(d=!0,u=n.some(S=>Qm(S)||ix(S)),c=()=>n.map(S=>{if(fi(S))return S.value;if(Qm(S))return sh(S);if(Tt(S))return pd(S,l,2)})):Tt(n)?e?c=()=>pd(n,l,2):c=()=>{if(!(l&&l.isUnmounted))return f&&f(),Co(n,l,3,[h])}:c=Vn,e&&i){const S=c;c=()=>sh(S())}let f,h=S=>{f=_.onStop=()=>{pd(S,l,4)}},p;if(qy)if(h=Vn,e?t&&Co(e,l,3,[c(),d?[]:void 0,h]):c(),r==="sync"){const S=zee();p=S.__watcherHandles||(S.__watcherHandles=[])}else return Vn;let m=d?new Array(n.length).fill(Bb):Bb;const v=()=>{if(_.active)if(e){const S=_.run();(i||u||(d?S.some((w,x)=>Uy(w,m[x])):Uy(S,m)))&&(f&&f(),Co(e,l,3,[S,m===Bb?void 0:d&&m[0]===Bb?[]:m,h]),m=S)}else _.run()};v.allowRecurse=!!e;let g;r==="sync"?g=v:r==="post"?g=()=>ca(v,l&&l.suspense):(v.pre=!0,l&&(v.id=l.uid),g=()=>HD(v));const _=new DD(c,g);e?t?v():m=_.run():r==="post"?ca(_.run.bind(_),l&&l.suspense):_.run();const y=()=>{_.stop(),l&&l.scope&&ID(l.scope.effects,_)};return p&&p.push(y),y}function ZJ(n,e,t){const i=this.proxy,r=xt(n)?n.includes(".")?Y6(i,n):()=>i[n]:n.bind(i,i);let s;Tt(e)?s=e:(s=e.handler,t=e);const a=Xr;_v(this);const o=GD(r,s.bind(i),t);return a?_v(a):wh(),o}function Y6(n,e){const t=e.split(".");return()=>{let i=n;for(let r=0;r<t.length&&i;r++)i=i[t[r]];return i}}function sh(n,e){if(!Yt(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),fi(n))sh(n.value,e);else if(nt(n))for(let t=0;t<n.length;t++)sh(n[t],e);else if(FC(n)||jm(n))n.forEach(t=>{sh(t,e)});else if(zy(n))for(const t in n)sh(n[t],e);return n}function Wt(n,e){const t=ss;if(t===null)return n;const i=YC(t)||t.proxy,r=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[a,o,l,c=Vi]=e[s];a&&(Tt(a)&&(a={mounted:a,updated:a}),a.deep&&sh(o),r.push({dir:a,instance:i,value:o,oldValue:void 0,arg:l,modifiers:c}))}return n}function af(n,e,t,i){const r=n.dirs,s=e&&e.dirs;for(let a=0;a<r.length;a++){const o=r[a];s&&(o.oldValue=s[a].value);let l=o.dir[i];l&&(sg(),Co(l,t,8,[n.el,o,n,e]),ag())}}function j6(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ht(()=>{n.isMounted=!0}),Un(()=>{n.isUnmounting=!0}),n}const ja=[Function,Array],Q6={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ja,onEnter:ja,onAfterEnter:ja,onEnterCancelled:ja,onBeforeLeave:ja,onLeave:ja,onAfterLeave:ja,onLeaveCancelled:ja,onBeforeAppear:ja,onAppear:ja,onAfterAppear:ja,onAppearCancelled:ja},JJ={name:"BaseTransition",props:Q6,setup(n,{slots:e}){const t=jt(),i=j6();let r;return()=>{const s=e.default&&WD(e.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){for(const m of s)if(m.type!==Ds){a=m;break}}const o=Jn(n),{mode:l}=o;if(i.isLeaving)return nT(a);const c=cN(a);if(!c)return nT(a);const u=Gy(c,o,i,t);Wy(c,u);const d=t.subTree,f=d&&cN(d);let h=!1;const{getTransitionKey:p}=c.type;if(p){const m=p();r===void 0?r=m:m!==r&&(r=m,h=!0)}if(f&&f.type!==Ds&&(!Xf(c,f)||h)){const m=Gy(f,o,i,t);if(Wy(f,m),l==="out-in")return i.isLeaving=!0,m.afterLeave=()=>{i.isLeaving=!1,t.update.active!==!1&&t.update()},nT(a);l==="in-out"&&c.type!==Ds&&(m.delayLeave=(v,g,_)=>{const y=Z6(i,f);y[String(f.key)]=f,v._leaveCb=()=>{g(),v._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=_})}return a}}},eee=JJ;function Z6(n,e){const{leavingVNodes:t}=n;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function Gy(n,e,t,i){const{appear:r,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:f,onAfterLeave:h,onLeaveCancelled:p,onBeforeAppear:m,onAppear:v,onAfterAppear:g,onAppearCancelled:_}=e,y=String(n.key),S=Z6(t,n),w=(C,M)=>{C&&Co(C,i,9,M)},x=(C,M)=>{const A=M[1];w(C,M),nt(C)?C.every(E=>E.length<=1)&&A():C.length<=1&&A()},T={mode:s,persisted:a,beforeEnter(C){let M=o;if(!t.isMounted)if(r)M=m||o;else return;C._leaveCb&&C._leaveCb(!0);const A=S[y];A&&Xf(n,A)&&A.el._leaveCb&&A.el._leaveCb(),w(M,[C])},enter(C){let M=l,A=c,E=u;if(!t.isMounted)if(r)M=v||l,A=g||c,E=_||u;else return;let I=!1;const P=C._enterCb=D=>{I||(I=!0,D?w(E,[C]):w(A,[C]),T.delayedLeave&&T.delayedLeave(),C._enterCb=void 0)};M?x(M,[C,P]):P()},leave(C,M){const A=String(n.key);if(C._enterCb&&C._enterCb(!0),t.isUnmounting)return M();w(d,[C]);let E=!1;const I=C._leaveCb=P=>{E||(E=!0,M(),P?w(p,[C]):w(h,[C]),C._leaveCb=void 0,S[A]===n&&delete S[A])};S[A]=n,f?x(f,[C,I]):I()},clone(C){return Gy(C,e,t,i)}};return T}function nT(n){if(GC(n))return n=Qc(n),n.children=null,n}function cN(n){return GC(n)?n.children?n.children[0]:void 0:n}function Wy(n,e){n.shapeFlag&6&&n.component?Wy(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function WD(n,e=!1,t){let i=[],r=0;for(let s=0;s<n.length;s++){let a=n[s];const o=t==null?a.key:String(t)+String(a.key!=null?a.key:s);a.type===bt?(a.patchFlag&128&&r++,i=i.concat(WD(a.children,e,o))):(e||a.type!==Ds)&&i.push(o!=null?Qc(a,{key:o}):a)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function ve(n,e){return Tt(n)?(()=>gr({name:n.name},e,{setup:n}))():n}const j0=n=>!!n.type.__asyncLoader,GC=n=>n.type.__isKeepAlive;function KD(n,e){e8(n,"a",e)}function J6(n,e){e8(n,"da",e)}function e8(n,e,t=Xr){const i=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(WC(e,i,t),t){let r=t.parent;for(;r&&r.parent;)GC(r.parent.vnode)&&tee(i,e,t,r),r=r.parent}}function tee(n,e,t,i){const r=WC(e,n,i,!0);Qd(()=>{ID(i[e],r)},t)}function WC(n,e,t=Xr,i=!1){if(t){const r=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...a)=>{if(t.isUnmounted)return;sg(),_v(t);const o=Co(e,t,n,a);return wh(),ag(),o});return i?r.unshift(s):r.push(s),s}}const lu=n=>(e,t=Xr)=>(!qy||n==="sp")&&WC(n,(...i)=>e(...i),t),KC=lu("bm"),Ht=lu("m"),qD=lu("bu"),Bo=lu("u"),Un=lu("bum"),Qd=lu("um"),nee=lu("sp"),iee=lu("rtg"),ree=lu("rtc");function see(n,e=Xr){WC("ec",n,e)}const XD="components",aee="directives";function yt(n,e){return YD(XD,n,!0,e)||n}const t8=Symbol.for("v-ndc");function en(n){return xt(n)?YD(XD,n,!1)||n:n||t8}function qC(n){return YD(aee,n)}function YD(n,e,t=!0,i=!1){const r=ss||Xr;if(r){const s=r.type;if(n===XD){const o=Nee(s,!1);if(o&&(o===e||o===Wa(e)||o===tb(Wa(e))))return s}const a=uN(r[n]||s[n],e)||uN(r.appContext[n],e);return!a&&i?s:a}}function uN(n,e){return n&&(n[e]||n[Wa(e)]||n[tb(Wa(e))])}function sn(n,e,t,i){let r;const s=t&&t[i];if(nt(n)||xt(n)){r=new Array(n.length);for(let a=0,o=n.length;a<o;a++)r[a]=e(n[a],a,void 0,s&&s[a])}else if(typeof n=="number"){r=new Array(n);for(let a=0;a<n;a++)r[a]=e(a+1,a,void 0,s&&s[a])}else if(Yt(n))if(n[Symbol.iterator])r=Array.from(n,(a,o)=>e(a,o,void 0,s&&s[o]));else{const a=Object.keys(n);r=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const c=a[o];r[o]=e(n[c],c,o,s&&s[o])}}else r=[];return t&&(t[i]=r),r}function Ro(n,e){for(let t=0;t<e.length;t++){const i=e[t];if(nt(i))for(let r=0;r<i.length;r++)n[i[r].name]=i[r].fn;else i&&(n[i.name]=i.key?(...r)=>{const s=i.fn(...r);return s&&(s.key=i.key),s}:i.fn)}return n}function Ne(n,e,t={},i,r){if(ss.isCE||ss.parent&&j0(ss.parent)&&ss.parent.isCE)return e!=="default"&&(t.name=e),oe("slot",t,i&&i());let s=n[e];s&&s._c&&(s._d=!1),F();const a=s&&n8(s(t)),o=He(bt,{key:t.key||a&&a.key||`_${e}`},a||(i?i():[]),a&&n._===1?64:-2);return!r&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function n8(n){return n.some(e=>Pi(e)?!(e.type===Ds||e.type===bt&&!n8(e.children)):!0)?n:null}function oee(n,e){const t={};for(const i in n)t[e&&/[A-Z]/.test(i)?`on:${i}`:Y0(i)]=n[i];return t}const F2=n=>n?p8(n)?YC(n)||n.proxy:F2(n.parent):null,Q0=gr(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>F2(n.parent),$root:n=>F2(n.root),$emit:n=>n.emit,$options:n=>jD(n),$forceUpdate:n=>n.f||(n.f=()=>HD(n.update)),$nextTick:n=>n.n||(n.n=Mt.bind(n.proxy)),$watch:n=>ZJ.bind(n)}),iT=(n,e)=>n!==Vi&&!n.__isScriptSetup&&Cn(n,e),lee={get({_:n},e){const{ctx:t,setupState:i,data:r,props:s,accessCache:a,type:o,appContext:l}=n;let c;if(e[0]!=="$"){const h=a[e];if(h!==void 0)switch(h){case 1:return i[e];case 2:return r[e];case 4:return t[e];case 3:return s[e]}else{if(iT(i,e))return a[e]=1,i[e];if(r!==Vi&&Cn(r,e))return a[e]=2,r[e];if((c=n.propsOptions[0])&&Cn(c,e))return a[e]=3,s[e];if(t!==Vi&&Cn(t,e))return a[e]=4,t[e];z2&&(a[e]=0)}}const u=Q0[e];let d,f;if(u)return e==="$attrs"&&Sa(n,"get",e),u(n);if((d=o.__cssModules)&&(d=d[e]))return d;if(t!==Vi&&Cn(t,e))return a[e]=4,t[e];if(f=l.config.globalProperties,Cn(f,e))return f[e]},set({_:n},e,t){const{data:i,setupState:r,ctx:s}=n;return iT(r,e)?(r[e]=t,!0):i!==Vi&&Cn(i,e)?(i[e]=t,!0):Cn(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:r,propsOptions:s}},a){let o;return!!t[a]||n!==Vi&&Cn(n,a)||iT(e,a)||(o=s[0])&&Cn(o,a)||Cn(i,a)||Cn(Q0,a)||Cn(r.config.globalProperties,a)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Cn(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function ur(){return i8().slots}function Zd(){return i8().attrs}function i8(){const n=jt();return n.setupContext||(n.setupContext=v8(n))}function dN(n){return nt(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let z2=!0;function cee(n){const e=jD(n),t=n.proxy,i=n.ctx;z2=!1,e.beforeCreate&&fN(e.beforeCreate,n,"bc");const{data:r,computed:s,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:m,deactivated:v,beforeDestroy:g,beforeUnmount:_,destroyed:y,unmounted:S,render:w,renderTracked:x,renderTriggered:T,errorCaptured:C,serverPrefetch:M,expose:A,inheritAttrs:E,components:I,directives:P,filters:D}=e;if(c&&uee(c,i,null),a)for(const B in a){const k=a[B];Tt(k)&&(i[B]=k.bind(t))}if(r){const B=r.call(t,t);Yt(B)&&(n.data=Nn(B))}if(z2=!0,s)for(const B in s){const k=s[B],O=Tt(k)?k.bind(t,t):Tt(k.get)?k.get.bind(t,t):Vn,U=!Tt(k)&&Tt(k.set)?k.set.bind(t):Vn,G=N({get:O,set:U});Object.defineProperty(i,B,{enumerable:!0,configurable:!0,get:()=>G.value,set:q=>G.value=q})}if(o)for(const B in o)r8(o[B],i,t,B);if(l){const B=Tt(l)?l.call(t):l;Reflect.ownKeys(B).forEach(k=>{un(k,B[k])})}u&&fN(u,n,"c");function R(B,k){nt(k)?k.forEach(O=>B(O.bind(t))):k&&B(k.bind(t))}if(R(KC,d),R(Ht,f),R(qD,h),R(Bo,p),R(KD,m),R(J6,v),R(see,C),R(ree,x),R(iee,T),R(Un,_),R(Qd,S),R(nee,M),nt(A))if(A.length){const B=n.exposed||(n.exposed={});A.forEach(k=>{Object.defineProperty(B,k,{get:()=>t[k],set:O=>t[k]=O})})}else n.exposed||(n.exposed={});w&&n.render===Vn&&(n.render=w),E!=null&&(n.inheritAttrs=E),I&&(n.components=I),P&&(n.directives=P)}function uee(n,e,t=Vn){nt(n)&&(n=U2(n));for(const i in n){const r=n[i];let s;Yt(r)?"default"in r?s=mt(r.from||i,r.default,!0):s=mt(r.from||i):s=mt(r),fi(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[i]=s}}function fN(n,e,t){Co(nt(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function r8(n,e,t,i){const r=i.includes(".")?Y6(t,i):()=>t[i];if(xt(n)){const s=e[n];Tt(s)&&We(r,s)}else if(Tt(n))We(r,n.bind(t));else if(Yt(n))if(nt(n))n.forEach(s=>r8(s,e,t,i));else{const s=Tt(n.handler)?n.handler.bind(t):e[n.handler];Tt(s)&&We(r,s,n)}}function jD(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:a}}=n.appContext,o=s.get(e);let l;return o?l=o:!r.length&&!t&&!i?l=e:(l={},r.length&&r.forEach(c=>sx(l,c,a,!0)),sx(l,e,a)),Yt(e)&&s.set(e,l),l}function sx(n,e,t,i=!1){const{mixins:r,extends:s}=e;s&&sx(n,s,t,!0),r&&r.forEach(a=>sx(n,a,t,!0));for(const a in e)if(!(i&&a==="expose")){const o=dee[a]||t&&t[a];n[a]=o?o(n[a],e[a]):e[a]}return n}const dee={data:hN,props:pN,emits:pN,methods:N0,computed:N0,beforeCreate:Us,created:Us,beforeMount:Us,mounted:Us,beforeUpdate:Us,updated:Us,beforeDestroy:Us,beforeUnmount:Us,destroyed:Us,unmounted:Us,activated:Us,deactivated:Us,errorCaptured:Us,serverPrefetch:Us,components:N0,directives:N0,watch:hee,provide:hN,inject:fee};function hN(n,e){return e?n?function(){return gr(Tt(n)?n.call(this,this):n,Tt(e)?e.call(this,this):e)}:e:n}function fee(n,e){return N0(U2(n),U2(e))}function U2(n){if(nt(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Us(n,e){return n?[...new Set([].concat(n,e))]:e}function N0(n,e){return n?gr(Object.create(null),n,e):e}function pN(n,e){return n?nt(n)&&nt(e)?[...new Set([...n,...e])]:gr(Object.create(null),dN(n),dN(e??{})):e}function hee(n,e){if(!n)return e;if(!e)return n;const t=gr(Object.create(null),n);for(const i in e)t[i]=Us(n[i],e[i]);return t}function s8(){return{app:null,config:{isNativeTag:VZ,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pee=0;function mee(n,e){return function(i,r=null){Tt(i)||(i=gr({},i)),r!=null&&!Yt(r)&&(r=null);const s=s8(),a=new Set;let o=!1;const l=s.app={_uid:pee++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:Uee,get config(){return s.config},set config(c){},use(c,...u){return a.has(c)||(c&&Tt(c.install)?(a.add(c),c.install(l,...u)):Tt(c)&&(a.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,d){if(!o){const f=oe(i,r);return f.appContext=s,u&&e?e(f,c):n(f,c,d),o=!0,l._container=c,c.__vue_app__=l,YC(f.component)||f.component.proxy}},unmount(){o&&(n(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){ax=l;try{return c()}finally{ax=null}}};return l}}let ax=null;function un(n,e){if(Xr){let t=Xr.provides;const i=Xr.parent&&Xr.parent.provides;i===t&&(t=Xr.provides=Object.create(i)),t[n]=e}}function mt(n,e,t=!1){const i=Xr||ss;if(i||ax){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:ax._context.provides;if(r&&n in r)return r[n];if(arguments.length>1)return t&&Tt(e)?e.call(i&&i.proxy):e}}function vee(n,e,t,i=!1){const r={},s={};tx(s,XC,1),n.propsDefaults=Object.create(null),a8(n,e,r,s);for(const a in n.propsOptions[0])a in r||(r[a]=void 0);t?n.props=i?r:z6(r):n.type.props?n.props=r:n.props=s,n.attrs=s}function gee(n,e,t,i){const{props:r,attrs:s,vnode:{patchFlag:a}}=n,o=Jn(r),[l]=n.propsOptions;let c=!1;if((i||a>0)&&!(a&16)){if(a&8){const u=n.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(VC(n.emitsOptions,f))continue;const h=e[f];if(l)if(Cn(s,f))h!==s[f]&&(s[f]=h,c=!0);else{const p=Wa(f);r[p]=H2(l,o,p,h,n,!1)}else h!==s[f]&&(s[f]=h,c=!0)}}}else{a8(n,e,r,s)&&(c=!0);let u;for(const d in o)(!e||!Cn(e,d)&&((u=jd(d))===d||!Cn(e,u)))&&(l?t&&(t[d]!==void 0||t[u]!==void 0)&&(r[d]=H2(l,o,d,void 0,n,!0)):delete r[d]);if(s!==o)for(const d in s)(!e||!Cn(e,d))&&(delete s[d],c=!0)}c&&jc(n,"set","$attrs")}function a8(n,e,t,i){const[r,s]=n.propsOptions;let a=!1,o;if(e)for(let l in e){if(n1(l))continue;const c=e[l];let u;r&&Cn(r,u=Wa(l))?!s||!s.includes(u)?t[u]=c:(o||(o={}))[u]=c:VC(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,a=!0)}if(s){const l=Jn(t),c=o||Vi;for(let u=0;u<s.length;u++){const d=s[u];t[d]=H2(r,l,d,c[d],n,!Cn(c,d))}}return a}function H2(n,e,t,i,r,s){const a=n[t];if(a!=null){const o=Cn(a,"default");if(o&&i===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Tt(l)){const{propsDefaults:c}=r;t in c?i=c[t]:(_v(r),i=c[t]=l.call(null,e),wh())}else i=l}a[0]&&(s&&!o?i=!1:a[1]&&(i===""||i===jd(t))&&(i=!0))}return i}function o8(n,e,t=!1){const i=e.propsCache,r=i.get(n);if(r)return r;const s=n.props,a={},o=[];let l=!1;if(!Tt(n)){const u=d=>{l=!0;const[f,h]=o8(d,e,!0);gr(a,f),h&&o.push(...h)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!s&&!l)return Yt(n)&&i.set(n,Ym),Ym;if(nt(s))for(let u=0;u<s.length;u++){const d=Wa(s[u]);mN(d)&&(a[d]=Vi)}else if(s)for(const u in s){const d=Wa(u);if(mN(d)){const f=s[u],h=a[d]=nt(f)||Tt(f)?{type:f}:gr({},f);if(h){const p=yN(Boolean,h.type),m=yN(String,h.type);h[0]=p>-1,h[1]=m<0||p<m,(p>-1||Cn(h,"default"))&&o.push(d)}}}const c=[a,o];return Yt(n)&&i.set(n,c),c}function mN(n){return n[0]!=="$"}function vN(n){const e=n&&n.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:n===null?"null":""}function gN(n,e){return vN(n)===vN(e)}function yN(n,e){return nt(e)?e.findIndex(t=>gN(t,n)):Tt(e)&&gN(e,n)?0:-1}const l8=n=>n[0]==="_"||n==="$stable",QD=n=>nt(n)?n.map(El):[El(n)],yee=(n,e,t)=>{if(e._n)return e;const i=ge((...r)=>QD(e(...r)),t);return i._c=!1,i},c8=(n,e,t)=>{const i=n._ctx;for(const r in n){if(l8(r))continue;const s=n[r];if(Tt(s))e[r]=yee(r,s,i);else if(s!=null){const a=QD(s);e[r]=()=>a}}},u8=(n,e)=>{const t=QD(e);n.slots.default=()=>t},_ee=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=Jn(e),tx(e,"_",t)):c8(e,n.slots={})}else n.slots={},e&&u8(n,e);tx(n.slots,XC,1)},bee=(n,e,t)=>{const{vnode:i,slots:r}=n;let s=!0,a=Vi;if(i.shapeFlag&32){const o=e._;o?t&&o===1?s=!1:(gr(r,e),!t&&o===1&&delete r._):(s=!e.$stable,c8(e,r)),a=e}else e&&(u8(n,e),a={default:1});if(s)for(const o in r)!l8(o)&&!(o in a)&&delete r[o]};function V2(n,e,t,i,r=!1){if(nt(n)){n.forEach((f,h)=>V2(f,e&&(nt(e)?e[h]:e),t,i,r));return}if(j0(i)&&!r)return;const s=i.shapeFlag&4?YC(i.component)||i.component.proxy:i.el,a=r?null:s,{i:o,r:l}=n,c=e&&e.r,u=o.refs===Vi?o.refs={}:o.refs,d=o.setupState;if(c!=null&&c!==l&&(xt(c)?(u[c]=null,Cn(d,c)&&(d[c]=null)):fi(c)&&(c.value=null)),Tt(l))pd(l,o,12,[a,u]);else{const f=xt(l),h=fi(l);if(f||h){const p=()=>{if(n.f){const m=f?Cn(d,l)?d[l]:u[l]:l.value;r?nt(m)&&ID(m,s):nt(m)?m.includes(s)||m.push(s):f?(u[l]=[s],Cn(d,l)&&(d[l]=u[l])):(l.value=[s],n.k&&(u[n.k]=l.value))}else f?(u[l]=a,Cn(d,l)&&(d[l]=a)):h&&(l.value=a,n.k&&(u[n.k]=a))};a?(p.id=-1,ca(p,t)):p()}}}const ca=QJ;function See(n){return wee(n)}function wee(n,e){const t=L2();t.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=Vn,insertStaticContent:p}=n,m=(H,Q,j,Pe=null,we=null,De=null,Me=!1,Ae=null,Fe=!!Q.dynamicChildren)=>{if(H===Q)return;H&&!Xf(H,Q)&&(Pe=ee(H),q(H,we,De,!0),H=null),Q.patchFlag===-2&&(Fe=!1,Q.dynamicChildren=null);const{type:ne,ref:z,shapeFlag:K}=Q;switch(ne){case lg:v(H,Q,j,Pe);break;case Ds:g(H,Q,j,Pe);break;case rT:H==null&&_(Q,j,Pe,Me);break;case bt:I(H,Q,j,Pe,we,De,Me,Ae,Fe);break;default:K&1?w(H,Q,j,Pe,we,De,Me,Ae,Fe):K&6?P(H,Q,j,Pe,we,De,Me,Ae,Fe):(K&64||K&128)&&ne.process(H,Q,j,Pe,we,De,Me,Ae,Fe,ye)}z!=null&&we&&V2(z,H&&H.ref,De,Q||H,!Q)},v=(H,Q,j,Pe)=>{if(H==null)i(Q.el=o(Q.children),j,Pe);else{const we=Q.el=H.el;Q.children!==H.children&&c(we,Q.children)}},g=(H,Q,j,Pe)=>{H==null?i(Q.el=l(Q.children||""),j,Pe):Q.el=H.el},_=(H,Q,j,Pe)=>{[H.el,H.anchor]=p(H.children,Q,j,Pe,H.el,H.anchor)},y=({el:H,anchor:Q},j,Pe)=>{let we;for(;H&&H!==Q;)we=f(H),i(H,j,Pe),H=we;i(Q,j,Pe)},S=({el:H,anchor:Q})=>{let j;for(;H&&H!==Q;)j=f(H),r(H),H=j;r(Q)},w=(H,Q,j,Pe,we,De,Me,Ae,Fe)=>{Me=Me||Q.type==="svg",H==null?x(Q,j,Pe,we,De,Me,Ae,Fe):M(H,Q,we,De,Me,Ae,Fe)},x=(H,Q,j,Pe,we,De,Me,Ae)=>{let Fe,ne;const{type:z,props:K,shapeFlag:ae,transition:xe,dirs:Le}=H;if(Fe=H.el=a(H.type,De,K&&K.is,K),ae&8?u(Fe,H.children):ae&16&&C(H.children,Fe,null,Pe,we,De&&z!=="foreignObject",Me,Ae),Le&&af(H,null,Pe,"created"),T(Fe,H,H.scopeId,Me,Pe),K){for(const je in K)je!=="value"&&!n1(je)&&s(Fe,je,null,K[je],De,H.children,Pe,we,Z);"value"in K&&s(Fe,"value",null,K.value),(ne=K.onVnodeBeforeMount)&&Sl(ne,Pe,H)}Le&&af(H,null,Pe,"beforeMount");const Xe=(!we||we&&!we.pendingBranch)&&xe&&!xe.persisted;Xe&&xe.beforeEnter(Fe),i(Fe,Q,j),((ne=K&&K.onVnodeMounted)||Xe||Le)&&ca(()=>{ne&&Sl(ne,Pe,H),Xe&&xe.enter(Fe),Le&&af(H,null,Pe,"mounted")},we)},T=(H,Q,j,Pe,we)=>{if(j&&h(H,j),Pe)for(let De=0;De<Pe.length;De++)h(H,Pe[De]);if(we){let De=we.subTree;if(Q===De){const Me=we.vnode;T(H,Me,Me.scopeId,Me.slotScopeIds,we.parent)}}},C=(H,Q,j,Pe,we,De,Me,Ae,Fe=0)=>{for(let ne=Fe;ne<H.length;ne++){const z=H[ne]=Ae?ed(H[ne]):El(H[ne]);m(null,z,Q,j,Pe,we,De,Me,Ae)}},M=(H,Q,j,Pe,we,De,Me)=>{const Ae=Q.el=H.el;let{patchFlag:Fe,dynamicChildren:ne,dirs:z}=Q;Fe|=H.patchFlag&16;const K=H.props||Vi,ae=Q.props||Vi;let xe;j&&of(j,!1),(xe=ae.onVnodeBeforeUpdate)&&Sl(xe,j,Q,H),z&&af(Q,H,j,"beforeUpdate"),j&&of(j,!0);const Le=we&&Q.type!=="foreignObject";if(ne?A(H.dynamicChildren,ne,Ae,j,Pe,Le,De):Me||k(H,Q,Ae,null,j,Pe,Le,De,!1),Fe>0){if(Fe&16)E(Ae,Q,K,ae,j,Pe,we);else if(Fe&2&&K.class!==ae.class&&s(Ae,"class",null,ae.class,we),Fe&4&&s(Ae,"style",K.style,ae.style,we),Fe&8){const Xe=Q.dynamicProps;for(let je=0;je<Xe.length;je++){const he=Xe[je],Ye=K[he],Ke=ae[he];(Ke!==Ye||he==="value")&&s(Ae,he,Ye,Ke,we,H.children,j,Pe,Z)}}Fe&1&&H.children!==Q.children&&u(Ae,Q.children)}else!Me&&ne==null&&E(Ae,Q,K,ae,j,Pe,we);((xe=ae.onVnodeUpdated)||z)&&ca(()=>{xe&&Sl(xe,j,Q,H),z&&af(Q,H,j,"updated")},Pe)},A=(H,Q,j,Pe,we,De,Me)=>{for(let Ae=0;Ae<Q.length;Ae++){const Fe=H[Ae],ne=Q[Ae],z=Fe.el&&(Fe.type===bt||!Xf(Fe,ne)||Fe.shapeFlag&70)?d(Fe.el):j;m(Fe,ne,z,null,Pe,we,De,Me,!0)}},E=(H,Q,j,Pe,we,De,Me)=>{if(j!==Pe){if(j!==Vi)for(const Ae in j)!n1(Ae)&&!(Ae in Pe)&&s(H,Ae,j[Ae],null,Me,Q.children,we,De,Z);for(const Ae in Pe){if(n1(Ae))continue;const Fe=Pe[Ae],ne=j[Ae];Fe!==ne&&Ae!=="value"&&s(H,Ae,ne,Fe,Me,Q.children,we,De,Z)}"value"in Pe&&s(H,"value",j.value,Pe.value)}},I=(H,Q,j,Pe,we,De,Me,Ae,Fe)=>{const ne=Q.el=H?H.el:o(""),z=Q.anchor=H?H.anchor:o("");let{patchFlag:K,dynamicChildren:ae,slotScopeIds:xe}=Q;xe&&(Ae=Ae?Ae.concat(xe):xe),H==null?(i(ne,j,Pe),i(z,j,Pe),C(Q.children,j,z,we,De,Me,Ae,Fe)):K>0&&K&64&&ae&&H.dynamicChildren?(A(H.dynamicChildren,ae,j,we,De,Me,Ae),(Q.key!=null||we&&Q===we.subTree)&&ZD(H,Q,!0)):k(H,Q,j,z,we,De,Me,Ae,Fe)},P=(H,Q,j,Pe,we,De,Me,Ae,Fe)=>{Q.slotScopeIds=Ae,H==null?Q.shapeFlag&512?we.ctx.activate(Q,j,Pe,Me,Fe):D(Q,j,Pe,we,De,Me,Fe):L(H,Q,Fe)},D=(H,Q,j,Pe,we,De,Me)=>{const Ae=H.component=Dee(H,Pe,we);if(GC(H)&&(Ae.ctx.renderer=ye),Lee(Ae),Ae.asyncDep){if(we&&we.registerDep(Ae,R),!H.el){const Fe=Ae.subTree=oe(Ds);g(null,Fe,Q,j)}return}R(Ae,H,Q,j,we,De,Me)},L=(H,Q,j)=>{const Pe=Q.component=H.component;if(XJ(H,Q,j))if(Pe.asyncDep&&!Pe.asyncResolved){B(Pe,Q,j);return}else Pe.next=Q,VJ(Pe.update),Pe.update();else Q.el=H.el,Pe.vnode=Q},R=(H,Q,j,Pe,we,De,Me)=>{const Ae=()=>{if(H.isMounted){let{next:z,bu:K,u:ae,parent:xe,vnode:Le}=H,Xe=z,je;of(H,!1),z?(z.el=Le.el,B(H,z,Me)):z=Le,K&&i1(K),(je=z.props&&z.props.onVnodeBeforeUpdate)&&Sl(je,xe,z,Le),of(H,!0);const he=tT(H),Ye=H.subTree;H.subTree=he,m(Ye,he,d(Ye.el),ee(Ye),H,we,De),z.el=he.el,Xe===null&&YJ(H,he.el),ae&&ca(ae,we),(je=z.props&&z.props.onVnodeUpdated)&&ca(()=>Sl(je,xe,z,Le),we)}else{let z;const{el:K,props:ae}=Q,{bm:xe,m:Le,parent:Xe}=H,je=j0(Q);if(of(H,!1),xe&&i1(xe),!je&&(z=ae&&ae.onVnodeBeforeMount)&&Sl(z,Xe,Q),of(H,!0),K&&Ee){const he=()=>{H.subTree=tT(H),Ee(K,H.subTree,H,we,null)};je?Q.type.__asyncLoader().then(()=>!H.isUnmounted&&he()):he()}else{const he=H.subTree=tT(H);m(null,he,j,Pe,H,we,De),Q.el=he.el}if(Le&&ca(Le,we),!je&&(z=ae&&ae.onVnodeMounted)){const he=Q;ca(()=>Sl(z,Xe,he),we)}(Q.shapeFlag&256||Xe&&j0(Xe.vnode)&&Xe.vnode.shapeFlag&256)&&H.a&&ca(H.a,we),H.isMounted=!0,Q=j=Pe=null}},Fe=H.effect=new DD(Ae,()=>HD(ne),H.scope),ne=H.update=()=>Fe.run();ne.id=H.uid,of(H,!0),ne()},B=(H,Q,j)=>{Q.component=H;const Pe=H.vnode.props;H.vnode=Q,H.next=null,gee(H,Q.props,Pe,j),bee(H,Q.children,j),sg(),oN(),ag()},k=(H,Q,j,Pe,we,De,Me,Ae,Fe=!1)=>{const ne=H&&H.children,z=H?H.shapeFlag:0,K=Q.children,{patchFlag:ae,shapeFlag:xe}=Q;if(ae>0){if(ae&128){U(ne,K,j,Pe,we,De,Me,Ae,Fe);return}else if(ae&256){O(ne,K,j,Pe,we,De,Me,Ae,Fe);return}}xe&8?(z&16&&Z(ne,we,De),K!==ne&&u(j,K)):z&16?xe&16?U(ne,K,j,Pe,we,De,Me,Ae,Fe):Z(ne,we,De,!0):(z&8&&u(j,""),xe&16&&C(K,j,Pe,we,De,Me,Ae,Fe))},O=(H,Q,j,Pe,we,De,Me,Ae,Fe)=>{H=H||Ym,Q=Q||Ym;const ne=H.length,z=Q.length,K=Math.min(ne,z);let ae;for(ae=0;ae<K;ae++){const xe=Q[ae]=Fe?ed(Q[ae]):El(Q[ae]);m(H[ae],xe,j,null,we,De,Me,Ae,Fe)}ne>z?Z(H,we,De,!0,!1,K):C(Q,j,Pe,we,De,Me,Ae,Fe,K)},U=(H,Q,j,Pe,we,De,Me,Ae,Fe)=>{let ne=0;const z=Q.length;let K=H.length-1,ae=z-1;for(;ne<=K&&ne<=ae;){const xe=H[ne],Le=Q[ne]=Fe?ed(Q[ne]):El(Q[ne]);if(Xf(xe,Le))m(xe,Le,j,null,we,De,Me,Ae,Fe);else break;ne++}for(;ne<=K&&ne<=ae;){const xe=H[K],Le=Q[ae]=Fe?ed(Q[ae]):El(Q[ae]);if(Xf(xe,Le))m(xe,Le,j,null,we,De,Me,Ae,Fe);else break;K--,ae--}if(ne>K){if(ne<=ae){const xe=ae+1,Le=xe<z?Q[xe].el:Pe;for(;ne<=ae;)m(null,Q[ne]=Fe?ed(Q[ne]):El(Q[ne]),j,Le,we,De,Me,Ae,Fe),ne++}}else if(ne>ae)for(;ne<=K;)q(H[ne],we,De,!0),ne++;else{const xe=ne,Le=ne,Xe=new Map;for(ne=Le;ne<=ae;ne++){const pe=Q[ne]=Fe?ed(Q[ne]):El(Q[ne]);pe.key!=null&&Xe.set(pe.key,ne)}let je,he=0;const Ye=ae-Le+1;let Ke=!1,V=0;const re=new Array(Ye);for(ne=0;ne<Ye;ne++)re[ne]=0;for(ne=xe;ne<=K;ne++){const pe=H[ne];if(he>=Ye){q(pe,we,De,!0);continue}let se;if(pe.key!=null)se=Xe.get(pe.key);else for(je=Le;je<=ae;je++)if(re[je-Le]===0&&Xf(pe,Q[je])){se=je;break}se===void 0?q(pe,we,De,!0):(re[se-Le]=ne+1,se>=V?V=se:Ke=!0,m(pe,Q[se],j,null,we,De,Me,Ae,Fe),he++)}const te=Ke?xee(re):Ym;for(je=te.length-1,ne=Ye-1;ne>=0;ne--){const pe=Le+ne,se=Q[pe],de=pe+1<z?Q[pe+1].el:Pe;re[ne]===0?m(null,se,j,de,we,De,Me,Ae,Fe):Ke&&(je<0||ne!==te[je]?G(se,j,de,2):je--)}}},G=(H,Q,j,Pe,we=null)=>{const{el:De,type:Me,transition:Ae,children:Fe,shapeFlag:ne}=H;if(ne&6){G(H.component.subTree,Q,j,Pe);return}if(ne&128){H.suspense.move(Q,j,Pe);return}if(ne&64){Me.move(H,Q,j,ye);return}if(Me===bt){i(De,Q,j);for(let K=0;K<Fe.length;K++)G(Fe[K],Q,j,Pe);i(H.anchor,Q,j);return}if(Me===rT){y(H,Q,j);return}if(Pe!==2&&ne&1&&Ae)if(Pe===0)Ae.beforeEnter(De),i(De,Q,j),ca(()=>Ae.enter(De),we);else{const{leave:K,delayLeave:ae,afterLeave:xe}=Ae,Le=()=>i(De,Q,j),Xe=()=>{K(De,()=>{Le(),xe&&xe()})};ae?ae(De,Le,Xe):Xe()}else i(De,Q,j)},q=(H,Q,j,Pe=!1,we=!1)=>{const{type:De,props:Me,ref:Ae,children:Fe,dynamicChildren:ne,shapeFlag:z,patchFlag:K,dirs:ae}=H;if(Ae!=null&&V2(Ae,null,j,H,!0),z&256){Q.ctx.deactivate(H);return}const xe=z&1&&ae,Le=!j0(H);let Xe;if(Le&&(Xe=Me&&Me.onVnodeBeforeUnmount)&&Sl(Xe,Q,H),z&6)J(H.component,j,Pe);else{if(z&128){H.suspense.unmount(j,Pe);return}xe&&af(H,null,Q,"beforeUnmount"),z&64?H.type.remove(H,Q,j,we,ye,Pe):ne&&(De!==bt||K>0&&K&64)?Z(ne,Q,j,!1,!0):(De===bt&&K&384||!we&&z&16)&&Z(Fe,Q,j),Pe&&W(H)}(Le&&(Xe=Me&&Me.onVnodeUnmounted)||xe)&&ca(()=>{Xe&&Sl(Xe,Q,H),xe&&af(H,null,Q,"unmounted")},j)},W=H=>{const{type:Q,el:j,anchor:Pe,transition:we}=H;if(Q===bt){Y(j,Pe);return}if(Q===rT){S(H);return}const De=()=>{r(j),we&&!we.persisted&&we.afterLeave&&we.afterLeave()};if(H.shapeFlag&1&&we&&!we.persisted){const{leave:Me,delayLeave:Ae}=we,Fe=()=>Me(j,De);Ae?Ae(H.el,De,Fe):Fe()}else De()},Y=(H,Q)=>{let j;for(;H!==Q;)j=f(H),r(H),H=j;r(Q)},J=(H,Q,j)=>{const{bum:Pe,scope:we,update:De,subTree:Me,um:Ae}=H;Pe&&i1(Pe),we.stop(),De&&(De.active=!1,q(Me,H,Q,j)),Ae&&ca(Ae,Q),ca(()=>{H.isUnmounted=!0},Q),Q&&Q.pendingBranch&&!Q.isUnmounted&&H.asyncDep&&!H.asyncResolved&&H.suspenseId===Q.pendingId&&(Q.deps--,Q.deps===0&&Q.resolve())},Z=(H,Q,j,Pe=!1,we=!1,De=0)=>{for(let Me=De;Me<H.length;Me++)q(H[Me],Q,j,Pe,we)},ee=H=>H.shapeFlag&6?ee(H.component.subTree):H.shapeFlag&128?H.suspense.next():f(H.anchor||H.el),me=(H,Q,j)=>{H==null?Q._vnode&&q(Q._vnode,null,null,!0):m(Q._vnode||null,H,Q,null,null,null,j),oN(),K6(),Q._vnode=H},ye={p:m,um:q,m:G,r:W,mt:D,mc:C,pc:k,pbc:A,n:ee,o:n};let Te,Ee;return e&&([Te,Ee]=e(ye)),{render:me,hydrate:Te,createApp:mee(me,Te)}}function of({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function ZD(n,e,t=!1){const i=n.children,r=e.children;if(nt(i)&&nt(r))for(let s=0;s<i.length;s++){const a=i[s];let o=r[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=r[s]=ed(r[s]),o.el=a.el),t||ZD(a,o)),o.type===lg&&(o.el=a.el)}}function xee(n){const e=n.slice(),t=[0];let i,r,s,a,o;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(r=t[t.length-1],n[r]<c){e[i]=r,t.push(i);continue}for(s=0,a=t.length-1;s<a;)o=s+a>>1,n[t[o]]<c?s=o+1:a=o;c<n[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,a=t[s-1];s-- >0;)t[s]=a,a=e[a];return t}const Cee=n=>n.__isTeleport,Z0=n=>n&&(n.disabled||n.disabled===""),_N=n=>typeof SVGElement<"u"&&n instanceof SVGElement,$2=(n,e)=>{const t=n&&n.to;return xt(t)?e?e(t):null:t},Mee={__isTeleport:!0,process(n,e,t,i,r,s,a,o,l,c){const{mc:u,pc:d,pbc:f,o:{insert:h,querySelector:p,createText:m,createComment:v}}=c,g=Z0(e.props);let{shapeFlag:_,children:y,dynamicChildren:S}=e;if(n==null){const w=e.el=m(""),x=e.anchor=m("");h(w,t,i),h(x,t,i);const T=e.target=$2(e.props,p),C=e.targetAnchor=m("");T&&(h(C,T),a=a||_N(T));const M=(A,E)=>{_&16&&u(y,A,E,r,s,a,o,l)};g?M(t,x):T&&M(T,C)}else{e.el=n.el;const w=e.anchor=n.anchor,x=e.target=n.target,T=e.targetAnchor=n.targetAnchor,C=Z0(n.props),M=C?t:x,A=C?w:T;if(a=a||_N(x),S?(f(n.dynamicChildren,S,M,r,s,a,o),ZD(n,e,!0)):l||d(n,e,M,A,r,s,a,o,!1),g)C||Fb(e,t,w,c,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const E=e.target=$2(e.props,p);E&&Fb(e,E,null,c,0)}else C&&Fb(e,x,T,c,1)}d8(e)},remove(n,e,t,i,{um:r,o:{remove:s}},a){const{shapeFlag:o,children:l,anchor:c,targetAnchor:u,target:d,props:f}=n;if(d&&s(u),(a||!Z0(f))&&(s(c),o&16))for(let h=0;h<l.length;h++){const p=l[h];r(p,e,t,!0,!!p.dynamicChildren)}},move:Fb,hydrate:Tee};function Fb(n,e,t,{o:{insert:i},m:r},s=2){s===0&&i(n.targetAnchor,e,t);const{el:a,anchor:o,shapeFlag:l,children:c,props:u}=n,d=s===2;if(d&&i(a,e,t),(!d||Z0(u))&&l&16)for(let f=0;f<c.length;f++)r(c[f],e,t,2);d&&i(o,e,t)}function Tee(n,e,t,i,r,s,{o:{nextSibling:a,parentNode:o,querySelector:l}},c){const u=e.target=$2(e.props,l);if(u){const d=u._lpa||u.firstChild;if(e.shapeFlag&16)if(Z0(e.props))e.anchor=c(a(n),e,o(n),t,i,r,s),e.targetAnchor=d;else{e.anchor=a(n);let f=d;for(;f;)if(f=a(f),f&&f.nodeType===8&&f.data==="teleport anchor"){e.targetAnchor=f,u._lpa=e.targetAnchor&&a(e.targetAnchor);break}c(d,e,u,t,i,r,s)}d8(e)}return e.anchor&&a(e.anchor)}const Aee=Mee;function d8(n){const e=n.ctx;if(e&&e.ut){let t=n.children[0].el;for(;t!==n.targetAnchor;)t.nodeType===1&&t.setAttribute("data-v-owner",e.uid),t=t.nextSibling;e.ut()}}const bt=Symbol.for("v-fgt"),lg=Symbol.for("v-txt"),Ds=Symbol.for("v-cmt"),rT=Symbol.for("v-stc"),J0=[];let il=null;function F(n=!1){J0.push(il=n?null:[])}function Eee(){J0.pop(),il=J0[J0.length-1]||null}let Ky=1;function bN(n){Ky+=n}function f8(n){return n.dynamicChildren=Ky>0?il||Ym:null,Eee(),Ky>0&&il&&il.push(n),n}function ie(n,e,t,i,r,s){return f8(le(n,e,t,i,r,s,!0))}function He(n,e,t,i,r){return f8(oe(n,e,t,i,r,!0))}function Pi(n){return n?n.__v_isVNode===!0:!1}function Xf(n,e){return n.type===e.type&&n.key===e.key}const XC="__vInternal",h8=({key:n})=>n??null,r1=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?xt(n)||fi(n)||Tt(n)?{i:ss,r:n,k:e,f:!!t}:n:null);function le(n,e=null,t=null,i=0,r=null,s=n===bt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&h8(e),ref:e&&r1(e),scopeId:$C,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ss};return o?(JD(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=xt(t)?8:16),Ky>0&&!a&&il&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&il.push(l),l}const oe=Iee;function Iee(n,e=null,t=null,i=0,r=null,s=!1){if((!n||n===t8)&&(n=Ds),Pi(n)){const o=Qc(n,e,!0);return t&&JD(o,t),Ky>0&&!s&&il&&(o.shapeFlag&6?il[il.indexOf(n)]=o:il.push(o)),o.patchFlag|=-2,o}if(Bee(n)&&(n=n.__vccOpts),e){e=Id(e);let{class:o,style:l}=e;o&&!xt(o)&&(e.class=$(o)),Yt(l)&&(U6(l)&&!nt(l)&&(l=gr({},l)),e.style=Ct(l))}const a=xt(n)?1:jJ(n)?128:Cee(n)?64:Yt(n)?4:Tt(n)?2:0;return le(n,e,t,i,r,a,s,!0)}function Id(n){return n?U6(n)||XC in n?gr({},n):n:null}function Qc(n,e,t=!1){const{props:i,ref:r,patchFlag:s,children:a}=n,o=e?rn(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:o,key:o&&h8(o),ref:e&&e.ref?t&&r?nt(r)?r.concat(r1(e)):[r,r1(e)]:r1(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==bt?s===-1?16:s|16:s,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Qc(n.ssContent),ssFallback:n.ssFallback&&Qc(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function Xt(n=" ",e=0){return oe(lg,null,n,e)}function Be(n="",e=!1){return e?(F(),He(Ds,null,n)):oe(Ds,null,n)}function El(n){return n==null||typeof n=="boolean"?oe(Ds):nt(n)?oe(bt,null,n.slice()):typeof n=="object"?ed(n):oe(lg,null,String(n))}function ed(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Qc(n)}function JD(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(nt(e))t=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),JD(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!(XC in e)?e._ctx=ss:r===3&&ss&&(ss.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Tt(e)?(e={default:e,_ctx:ss},t=32):(e=String(e),i&64?(t=16,e=[Xt(e)]):t=8);n.children=e,n.shapeFlag|=t}function rn(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=$([e.class,i.class]));else if(r==="style")e.style=Ct([e.style,i.style]);else if(BC(r)){const s=e[r],a=i[r];a&&s!==a&&!(nt(s)&&s.includes(a))&&(e[r]=s?[].concat(s,a):a)}else r!==""&&(e[r]=i[r])}return e}function Sl(n,e,t,i=null){Co(n,e,7,[t,i])}const Ree=s8();let Pee=0;function Dee(n,e,t){const i=n.type,r=(e?e.appContext:n.appContext)||Ree,s={uid:Pee++,vnode:n,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new T6(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:o8(i,r),emitsOptions:X6(i,r),emit:null,emitted:null,propsDefaults:Vi,inheritAttrs:i.inheritAttrs,ctx:Vi,data:Vi,props:Vi,attrs:Vi,slots:Vi,refs:Vi,setupState:Vi,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=WJ.bind(null,s),n.ce&&n.ce(s),s}let Xr=null;const jt=()=>Xr||ss;let eL,pp,SN="__VUE_INSTANCE_SETTERS__";(pp=L2()[SN])||(pp=L2()[SN]=[]),pp.push(n=>Xr=n),eL=n=>{pp.length>1?pp.forEach(e=>e(n)):pp[0](n)};const _v=n=>{eL(n),n.scope.on()},wh=()=>{Xr&&Xr.scope.off(),eL(null)};function p8(n){return n.vnode.shapeFlag&4}let qy=!1;function Lee(n,e=!1){qy=e;const{props:t,children:i}=n.vnode,r=p8(n);vee(n,t,r,e),_ee(n,i);const s=r?kee(n,e):void 0;return qy=!1,s}function kee(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=Wc(new Proxy(n.ctx,lee));const{setup:i}=t;if(i){const r=n.setupContext=i.length>1?v8(n):null;_v(n),sg();const s=pd(i,n,0,[n.props,r]);if(ag(),wh(),Fy(s)){if(s.then(wh,wh),e)return s.then(a=>{wN(n,a,e)}).catch(a=>{HC(a,n,0)});n.asyncDep=s}else wN(n,s,e)}else m8(n,e)}function wN(n,e,t){Tt(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Yt(e)&&(n.setupState=V6(e)),m8(n,t)}let xN;function m8(n,e,t){const i=n.type;if(!n.render){if(!e&&xN&&!i.render){const r=i.template||jD(n).template;if(r){const{isCustomElement:s,compilerOptions:a}=n.appContext.config,{delimiters:o,compilerOptions:l}=i,c=gr(gr({isCustomElement:s,delimiters:o},a),l);i.render=xN(r,c)}}n.render=i.render||Vn}_v(n),sg(),cee(n),ag(),wh()}function Oee(n){return n.attrsProxy||(n.attrsProxy=new Proxy(n.attrs,{get(e,t){return Sa(n,"get","$attrs"),e[t]}}))}function v8(n){const e=t=>{n.exposed=t||{}};return{get attrs(){return Oee(n)},slots:n.slots,emit:n.emit,expose:e}}function YC(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(V6(Wc(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Q0)return Q0[t](n)},has(e,t){return t in e||t in Q0}}))}function Nee(n,e=!0){return Tt(n)?n.displayName||n.name:n.name||e&&n.__name}function Bee(n){return Tt(n)&&"__vccOpts"in n}const N=(n,e)=>FJ(n,e,qy);function wt(n,e,t){const i=arguments.length;return i===2?Yt(e)&&!nt(e)?Pi(e)?oe(n,null,[e]):oe(n,e):oe(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&Pi(t)&&(t=[t]),oe(n,e,t))}const Fee=Symbol.for("v-scx"),zee=()=>mt(Fee),Uee="3.3.4",Hee="http://www.w3.org/2000/svg",Yf=typeof document<"u"?document:null,CN=Yf&&Yf.createElement("template"),Vee={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const r=e?Yf.createElementNS(Hee,n):Yf.createElement(n,t?{is:t}:void 0);return n==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:n=>Yf.createTextNode(n),createComment:n=>Yf.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Yf.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,r,s){const a=t?t.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===s||!(r=r.nextSibling)););else{CN.innerHTML=i?`<svg>${n}</svg>`:n;const o=CN.content;if(i){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function $ee(n,e,t){const i=n._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}function Gee(n,e,t){const i=n.style,r=xt(t);if(t&&!r){if(e&&!xt(e))for(const s in e)t[s]==null&&G2(i,s,"");for(const s in t)G2(i,s,t[s])}else{const s=i.display;r?e!==t&&(i.cssText=t):e&&n.removeAttribute("style"),"_vod"in n&&(i.display=s)}}const MN=/\s*!important$/;function G2(n,e,t){if(nt(t))t.forEach(i=>G2(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=Wee(n,e);MN.test(t)?n.setProperty(jd(i),t.replace(MN,""),"important"):n[i]=t}}const TN=["Webkit","Moz","ms"],sT={};function Wee(n,e){const t=sT[e];if(t)return t;let i=Wa(e);if(i!=="filter"&&i in n)return sT[e]=i;i=tb(i);for(let r=0;r<TN.length;r++){const s=TN[r]+i;if(s in n)return sT[e]=s}return e}const AN="http://www.w3.org/1999/xlink";function Kee(n,e,t,i,r){if(i&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(AN,e.slice(6,e.length)):n.setAttributeNS(AN,e,t);else{const s=eJ(e);t==null||s&&!x6(t)?n.removeAttribute(e):n.setAttribute(e,s?"":t)}}function qee(n,e,t,i,r,s,a){if(e==="innerHTML"||e==="textContent"){i&&a(i,r,s),n[e]=t??"";return}const o=n.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){n._value=t;const c=o==="OPTION"?n.getAttribute("value"):n.value,u=t??"";c!==u&&(n.value=u),t==null&&n.removeAttribute(e);return}let l=!1;if(t===""||t==null){const c=typeof n[e];c==="boolean"?t=x6(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{n[e]=t}catch{}l&&n.removeAttribute(e)}function id(n,e,t,i){n.addEventListener(e,t,i)}function Xee(n,e,t,i){n.removeEventListener(e,t,i)}function Yee(n,e,t,i,r=null){const s=n._vei||(n._vei={}),a=s[e];if(i&&a)a.value=i;else{const[o,l]=jee(e);if(i){const c=s[e]=Jee(i,r);id(n,o,c,l)}else a&&(Xee(n,o,a,l),s[e]=void 0)}}const EN=/(?:Once|Passive|Capture)$/;function jee(n){let e;if(EN.test(n)){e={};let i;for(;i=n.match(EN);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):jd(n.slice(2)),e]}let aT=0;const Qee=Promise.resolve(),Zee=()=>aT||(Qee.then(()=>aT=0),aT=Date.now());function Jee(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Co(ete(i,t.value),e,5,[i])};return t.value=n,t.attached=Zee(),t}function ete(n,e){if(nt(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const IN=/^on[a-z]/,tte=(n,e,t,i,r=!1,s,a,o,l)=>{e==="class"?$ee(n,i,r):e==="style"?Gee(n,t,i):BC(e)?ED(e)||Yee(n,e,t,i,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):nte(n,e,i,r))?qee(n,e,i,s,a,o,l):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),Kee(n,e,i,r))};function nte(n,e,t,i){return i?!!(e==="innerHTML"||e==="textContent"||e in n&&IN.test(e)&&Tt(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA"||IN.test(e)&&xt(t)?!1:e in n}const wu="transition",Wg="animation",yr=(n,{slots:e})=>wt(eee,y8(n),e);yr.displayName="Transition";const g8={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ite=yr.props=gr({},Q6,g8),lf=(n,e=[])=>{nt(n)?n.forEach(t=>t(...e)):n&&n(...e)},RN=n=>n?nt(n)?n.some(e=>e.length>1):n.length>1:!1;function y8(n){const e={};for(const I in n)I in g8||(e[I]=n[I]);if(n.css===!1)return e;const{name:t="v",type:i,duration:r,enterFromClass:s=`${t}-enter-from`,enterActiveClass:a=`${t}-enter-active`,enterToClass:o=`${t}-enter-to`,appearFromClass:l=s,appearActiveClass:c=a,appearToClass:u=o,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:f=`${t}-leave-active`,leaveToClass:h=`${t}-leave-to`}=n,p=rte(r),m=p&&p[0],v=p&&p[1],{onBeforeEnter:g,onEnter:_,onEnterCancelled:y,onLeave:S,onLeaveCancelled:w,onBeforeAppear:x=g,onAppear:T=_,onAppearCancelled:C=y}=e,M=(I,P,D)=>{Xu(I,P?u:o),Xu(I,P?c:a),D&&D()},A=(I,P)=>{I._isLeaving=!1,Xu(I,d),Xu(I,h),Xu(I,f),P&&P()},E=I=>(P,D)=>{const L=I?T:_,R=()=>M(P,I,D);lf(L,[P,R]),PN(()=>{Xu(P,I?l:s),Ec(P,I?u:o),RN(L)||DN(P,i,m,R)})};return gr(e,{onBeforeEnter(I){lf(g,[I]),Ec(I,s),Ec(I,a)},onBeforeAppear(I){lf(x,[I]),Ec(I,l),Ec(I,c)},onEnter:E(!1),onAppear:E(!0),onLeave(I,P){I._isLeaving=!0;const D=()=>A(I,P);Ec(I,d),b8(),Ec(I,f),PN(()=>{I._isLeaving&&(Xu(I,d),Ec(I,h),RN(S)||DN(I,i,v,D))}),lf(S,[I,D])},onEnterCancelled(I){M(I,!1),lf(y,[I])},onAppearCancelled(I){M(I,!0),lf(C,[I])},onLeaveCancelled(I){A(I),lf(w,[I])}})}function rte(n){if(n==null)return null;if(Yt(n))return[oT(n.enter),oT(n.leave)];{const e=oT(n);return[e,e]}}function oT(n){return XZ(n)}function Ec(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n._vtc||(n._vtc=new Set)).add(e)}function Xu(n,e){e.split(/\s+/).forEach(i=>i&&n.classList.remove(i));const{_vtc:t}=n;t&&(t.delete(e),t.size||(n._vtc=void 0))}function PN(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let ste=0;function DN(n,e,t,i){const r=n._endId=++ste,s=()=>{r===n._endId&&i()};if(t)return setTimeout(s,t);const{type:a,timeout:o,propCount:l}=_8(n,e);if(!a)return i();const c=a+"end";let u=0;const d=()=>{n.removeEventListener(c,f),s()},f=h=>{h.target===n&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},o+1),n.addEventListener(c,f)}function _8(n,e){const t=window.getComputedStyle(n),i=p=>(t[p]||"").split(", "),r=i(`${wu}Delay`),s=i(`${wu}Duration`),a=LN(r,s),o=i(`${Wg}Delay`),l=i(`${Wg}Duration`),c=LN(o,l);let u=null,d=0,f=0;e===wu?a>0&&(u=wu,d=a,f=s.length):e===Wg?c>0&&(u=Wg,d=c,f=l.length):(d=Math.max(a,c),u=d>0?a>c?wu:Wg:null,f=u?u===wu?s.length:l.length:0);const h=u===wu&&/\b(transform|all)(,|$)/.test(i(`${wu}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:h}}function LN(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,i)=>kN(t)+kN(n[i])))}function kN(n){return Number(n.slice(0,-1).replace(",","."))*1e3}function b8(){return document.body.offsetHeight}const S8=new WeakMap,w8=new WeakMap,x8={name:"TransitionGroup",props:gr({},ite,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=jt(),i=j6();let r,s;return Bo(()=>{if(!r.length)return;const a=n.moveClass||`${n.name||"v"}-move`;if(!ute(r[0].el,t.vnode.el,a))return;r.forEach(ote),r.forEach(lte);const o=r.filter(cte);b8(),o.forEach(l=>{const c=l.el,u=c.style;Ec(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const d=c._moveCb=f=>{f&&f.target!==c||(!f||/transform$/.test(f.propertyName))&&(c.removeEventListener("transitionend",d),c._moveCb=null,Xu(c,a))};c.addEventListener("transitionend",d)})}),()=>{const a=Jn(n),o=y8(a);let l=a.tag||bt;r=s,s=e.default?WD(e.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null&&Wy(u,Gy(u,o,i,t))}if(r)for(let c=0;c<r.length;c++){const u=r[c];Wy(u,Gy(u,o,i,t)),S8.set(u,u.el.getBoundingClientRect())}return oe(l,null,s)}}},ate=n=>delete n.mode;x8.props;const C8=x8;function ote(n){const e=n.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function lte(n){w8.set(n,n.el.getBoundingClientRect())}function cte(n){const e=S8.get(n),t=w8.get(n),i=e.left-t.left,r=e.top-t.top;if(i||r){const s=n.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${r}px)`,s.transitionDuration="0s",n}}function ute(n,e,t){const i=n.cloneNode();n._vtc&&n._vtc.forEach(a=>{a.split(/\s+/).forEach(o=>o&&i.classList.remove(o))}),t.split(/\s+/).forEach(a=>a&&i.classList.add(a)),i.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(i);const{hasTransform:s}=_8(i);return r.removeChild(i),s}const bv=n=>{const e=n.props["onUpdate:modelValue"]||!1;return nt(e)?t=>i1(e,t):e};function dte(n){n.target.composing=!0}function ON(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const jC={created(n,{modifiers:{lazy:e,trim:t,number:i}},r){n._assign=bv(r);const s=i||r.props&&r.props.type==="number";id(n,e?"change":"input",a=>{if(a.target.composing)return;let o=n.value;t&&(o=o.trim()),s&&(o=D2(o)),n._assign(o)}),t&&id(n,"change",()=>{n.value=n.value.trim()}),e||(id(n,"compositionstart",dte),id(n,"compositionend",ON),id(n,"change",ON))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,modifiers:{lazy:t,trim:i,number:r}},s){if(n._assign=bv(s),n.composing||document.activeElement===n&&n.type!=="range"&&(t||i&&n.value.trim()===e||(r||n.type==="number")&&D2(n.value)===e))return;const a=e??"";n.value!==a&&(n.value=a)}},ox={deep:!0,created(n,e,t){n._assign=bv(t),id(n,"change",()=>{const i=n._modelValue,r=T8(n),s=n.checked,a=n._assign;if(nt(i)){const o=C6(i,r),l=o!==-1;if(s&&!l)a(i.concat(r));else if(!s&&l){const c=[...i];c.splice(o,1),a(c)}}else if(FC(i)){const o=new Set(i);s?o.add(r):o.delete(r),a(o)}else a(A8(n,s))})},mounted:NN,beforeUpdate(n,e,t){n._assign=bv(t),NN(n,e,t)}};function NN(n,{value:e,oldValue:t},i){n._modelValue=e,nt(e)?n.checked=C6(e,i.props.value)>-1:FC(e)?n.checked=e.has(i.props.value):e!==t&&(n.checked=gv(e,A8(n,!0)))}const M8={created(n,{value:e},t){n.checked=gv(e,t.props.value),n._assign=bv(t),id(n,"change",()=>{n._assign(T8(n))})},beforeUpdate(n,{value:e,oldValue:t},i){n._assign=bv(i),e!==t&&(n.checked=gv(e,i.props.value))}};function T8(n){return"_value"in n?n._value:n.value}function A8(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const fte=["ctrl","shift","alt","meta"],hte={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>fte.some(t=>n[`${t}Key`]&&!e.includes(t))},Pt=(n,e)=>(t,...i)=>{for(let r=0;r<e.length;r++){const s=hte[e[r]];if(s&&s(t,e))return}return n(t,...i)},pte={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ri=(n,e)=>t=>{if(!("key"in t))return;const i=jd(t.key);if(e.some(r=>r===i||pte[r]===i))return n(t)},Dn={beforeMount(n,{value:e},{transition:t}){n._vod=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Kg(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(n),Kg(n,!0),i.enter(n)):i.leave(n,()=>{Kg(n,!1)}):Kg(n,e))},beforeUnmount(n,{value:e}){Kg(n,e)}};function Kg(n,e){n.style.display=e?n._vod:"none"}const mte=gr({patchProp:tte},Vee);let BN;function E8(){return BN||(BN=See(mte))}const Rd=(...n)=>{E8().render(...n)},I8=(...n)=>{const e=E8().createApp(...n),{mount:t}=e;return e.mount=i=>{const r=vte(i);if(!r)return;const s=e._component;!Tt(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const a=t(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},e};function vte(n){return xt(n)?document.querySelector(n):n}const gte="2.9.1",FN=Symbol("INSTALLED_KEY"),R8=Symbol(),ey="el",yte="is-",cf=(n,e,t,i,r)=>{let s=`${n}-${e}`;return t&&(s+=`-${t}`),i&&(s+=`__${i}`),r&&(s+=`--${r}`),s},P8=Symbol("namespaceContextKey"),tL=n=>{const e=n||(jt()?mt(P8,X(ey)):X(ey));return N(()=>b(e)||ey)},Ze=(n,e)=>{const t=tL(e);return{namespace:t,b:(m="")=>cf(t.value,n,m,"",""),e:m=>m?cf(t.value,n,"",m,""):"",m:m=>m?cf(t.value,n,"","",m):"",be:(m,v)=>m&&v?cf(t.value,n,m,v,""):"",em:(m,v)=>m&&v?cf(t.value,n,"",m,v):"",bm:(m,v)=>m&&v?cf(t.value,n,m,"",v):"",bem:(m,v,g)=>m&&v&&g?cf(t.value,n,m,v,g):"",is:(m,...v)=>{const g=v.length>=1?v[0]:!0;return m&&g?`${yte}${m}`:""},cssVar:m=>{const v={};for(const g in m)m[g]&&(v[`--${t.value}-${g}`]=m[g]);return v},cssVarName:m=>`--${t.value}-${m}`,cssVarBlock:m=>{const v={};for(const g in m)m[g]&&(v[`--${t.value}-${n}-${g}`]=m[g]);return v},cssVarBlockName:m=>`--${t.value}-${n}-${m}`}};var _te=typeof global=="object"&&global&&global.Object===Object&&global;const D8=_te;var bte=typeof self=="object"&&self&&self.Object===Object&&self,Ste=D8||bte||Function("return this")();const hl=Ste;var wte=hl.Symbol;const Po=wte;var L8=Object.prototype,xte=L8.hasOwnProperty,Cte=L8.toString,qg=Po?Po.toStringTag:void 0;function Mte(n){var e=xte.call(n,qg),t=n[qg];try{n[qg]=void 0;var i=!0}catch{}var r=Cte.call(n);return i&&(e?n[qg]=t:delete n[qg]),r}var Tte=Object.prototype,Ate=Tte.toString;function Ete(n){return Ate.call(n)}var Ite="[object Null]",Rte="[object Undefined]",zN=Po?Po.toStringTag:void 0;function tp(n){return n==null?n===void 0?Rte:Ite:zN&&zN in Object(n)?Mte(n):Ete(n)}function Kl(n){return n!=null&&typeof n=="object"}var Pte="[object Symbol]";function QC(n){return typeof n=="symbol"||Kl(n)&&tp(n)==Pte}function nL(n,e){for(var t=-1,i=n==null?0:n.length,r=Array(i);++t<i;)r[t]=e(n[t],t,n);return r}var Dte=Array.isArray;const Js=Dte;var Lte=1/0,UN=Po?Po.prototype:void 0,HN=UN?UN.toString:void 0;function k8(n){if(typeof n=="string")return n;if(Js(n))return nL(n,k8)+"";if(QC(n))return HN?HN.call(n):"";var e=n+"";return e=="0"&&1/n==-Lte?"-0":e}var kte=/\s/;function Ote(n){for(var e=n.length;e--&&kte.test(n.charAt(e)););return e}var Nte=/^\s+/;function Bte(n){return n&&n.slice(0,Ote(n)+1).replace(Nte,"")}function ea(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var VN=0/0,Fte=/^[-+]0x[0-9a-f]+$/i,zte=/^0b[01]+$/i,Ute=/^0o[0-7]+$/i,Hte=parseInt;function W2(n){if(typeof n=="number")return n;if(QC(n))return VN;if(ea(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=ea(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Bte(n);var t=zte.test(n);return t||Ute.test(n)?Hte(n.slice(2),t?2:8):Fte.test(n)?VN:+n}var $N=1/0,Vte=17976931348623157e292;function $te(n){if(!n)return n===0?n:0;if(n=W2(n),n===$N||n===-$N){var e=n<0?-1:1;return e*Vte}return n===n?n:0}function Gte(n){var e=$te(n),t=e%1;return e===e?t?e-t:e:0}function iL(n){return n}var Wte="[object AsyncFunction]",Kte="[object Function]",qte="[object GeneratorFunction]",Xte="[object Proxy]";function rL(n){if(!ea(n))return!1;var e=tp(n);return e==Kte||e==qte||e==Wte||e==Xte}var Yte=hl["__core-js_shared__"];const lT=Yte;var GN=function(){var n=/[^.]+$/.exec(lT&&lT.keys&&lT.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function jte(n){return!!GN&&GN in n}var Qte=Function.prototype,Zte=Qte.toString;function np(n){if(n!=null){try{return Zte.call(n)}catch{}try{return n+""}catch{}}return""}var Jte=/[\\^$.*+?()[\]{}|]/g,ene=/^\[object .+?Constructor\]$/,tne=Function.prototype,nne=Object.prototype,ine=tne.toString,rne=nne.hasOwnProperty,sne=RegExp("^"+ine.call(rne).replace(Jte,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ane(n){if(!ea(n)||jte(n))return!1;var e=rL(n)?sne:ene;return e.test(np(n))}function one(n,e){return n==null?void 0:n[e]}function ip(n,e){var t=one(n,e);return ane(t)?t:void 0}var lne=ip(hl,"WeakMap");const K2=lne;var WN=Object.create,cne=function(){function n(){}return function(e){if(!ea(e))return{};if(WN)return WN(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const une=cne;function dne(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function fne(){}function O8(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var hne=800,pne=16,mne=Date.now;function vne(n){var e=0,t=0;return function(){var i=mne(),r=pne-(i-t);if(t=i,r>0){if(++e>=hne)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function gne(n){return function(){return n}}var yne=function(){try{var n=ip(Object,"defineProperty");return n({},"",{}),n}catch{}}();const lx=yne;var _ne=lx?function(n,e){return lx(n,"toString",{configurable:!0,enumerable:!1,value:gne(e),writable:!0})}:iL;const bne=_ne;var Sne=vne(bne);const N8=Sne;function wne(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}function B8(n,e,t,i){for(var r=n.length,s=t+(i?1:-1);i?s--:++s<r;)if(e(n[s],s,n))return s;return-1}function xne(n){return n!==n}function Cne(n,e,t){for(var i=t-1,r=n.length;++i<r;)if(n[i]===e)return i;return-1}function Mne(n,e,t){return e===e?Cne(n,e,t):B8(n,xne,t)}function Tne(n,e){var t=n==null?0:n.length;return!!t&&Mne(n,e,0)>-1}var Ane=9007199254740991,Ene=/^(?:0|[1-9]\d*)$/;function ZC(n,e){var t=typeof n;return e=e??Ane,!!e&&(t=="number"||t!="symbol"&&Ene.test(n))&&n>-1&&n%1==0&&n<e}function sL(n,e,t){e=="__proto__"&&lx?lx(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function nb(n,e){return n===e||n!==n&&e!==e}var Ine=Object.prototype,Rne=Ine.hasOwnProperty;function aL(n,e,t){var i=n[e];(!(Rne.call(n,e)&&nb(i,t))||t===void 0&&!(e in n))&&sL(n,e,t)}function cg(n,e,t,i){var r=!t;t||(t={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=i?i(t[o],n[o],o,t,n):void 0;l===void 0&&(l=n[o]),r?sL(t,o,l):aL(t,o,l)}return t}var KN=Math.max;function F8(n,e,t){return e=KN(e===void 0?n.length-1:e,0),function(){for(var i=arguments,r=-1,s=KN(i.length-e,0),a=Array(s);++r<s;)a[r]=i[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=i[r];return o[e]=t(a),dne(n,this,o)}}function z8(n,e){return N8(F8(n,e,iL),n+"")}var Pne=9007199254740991;function oL(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Pne}function ug(n){return n!=null&&oL(n.length)&&!rL(n)}function Dne(n,e,t){if(!ea(t))return!1;var i=typeof e;return(i=="number"?ug(t)&&ZC(e,t.length):i=="string"&&e in t)?nb(t[e],n):!1}function Lne(n){return z8(function(e,t){var i=-1,r=t.length,s=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,a&&Dne(t[0],t[1],a)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var o=t[i];o&&n(e,o,i,s)}return e})}var kne=Object.prototype;function lL(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||kne;return n===t}function One(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var Nne="[object Arguments]";function qN(n){return Kl(n)&&tp(n)==Nne}var U8=Object.prototype,Bne=U8.hasOwnProperty,Fne=U8.propertyIsEnumerable,zne=qN(function(){return arguments}())?qN:function(n){return Kl(n)&&Bne.call(n,"callee")&&!Fne.call(n,"callee")};const Xy=zne;function Une(){return!1}var H8=typeof Ba=="object"&&Ba&&!Ba.nodeType&&Ba,XN=H8&&typeof Fa=="object"&&Fa&&!Fa.nodeType&&Fa,Hne=XN&&XN.exports===H8,YN=Hne?hl.Buffer:void 0,Vne=YN?YN.isBuffer:void 0,$ne=Vne||Une;const Yy=$ne;var Gne="[object Arguments]",Wne="[object Array]",Kne="[object Boolean]",qne="[object Date]",Xne="[object Error]",Yne="[object Function]",jne="[object Map]",Qne="[object Number]",Zne="[object Object]",Jne="[object RegExp]",eie="[object Set]",tie="[object String]",nie="[object WeakMap]",iie="[object ArrayBuffer]",rie="[object DataView]",sie="[object Float32Array]",aie="[object Float64Array]",oie="[object Int8Array]",lie="[object Int16Array]",cie="[object Int32Array]",uie="[object Uint8Array]",die="[object Uint8ClampedArray]",fie="[object Uint16Array]",hie="[object Uint32Array]",Hi={};Hi[sie]=Hi[aie]=Hi[oie]=Hi[lie]=Hi[cie]=Hi[uie]=Hi[die]=Hi[fie]=Hi[hie]=!0;Hi[Gne]=Hi[Wne]=Hi[iie]=Hi[Kne]=Hi[rie]=Hi[qne]=Hi[Xne]=Hi[Yne]=Hi[jne]=Hi[Qne]=Hi[Zne]=Hi[Jne]=Hi[eie]=Hi[tie]=Hi[nie]=!1;function pie(n){return Kl(n)&&oL(n.length)&&!!Hi[tp(n)]}function cL(n){return function(e){return n(e)}}var V8=typeof Ba=="object"&&Ba&&!Ba.nodeType&&Ba,ty=V8&&typeof Fa=="object"&&Fa&&!Fa.nodeType&&Fa,mie=ty&&ty.exports===V8,cT=mie&&D8.process,vie=function(){try{var n=ty&&ty.require&&ty.require("util").types;return n||cT&&cT.binding&&cT.binding("util")}catch{}}();const Sv=vie;var jN=Sv&&Sv.isTypedArray,gie=jN?cL(jN):pie;const uL=gie;var yie=Object.prototype,_ie=yie.hasOwnProperty;function $8(n,e){var t=Js(n),i=!t&&Xy(n),r=!t&&!i&&Yy(n),s=!t&&!i&&!r&&uL(n),a=t||i||r||s,o=a?One(n.length,String):[],l=o.length;for(var c in n)(e||_ie.call(n,c))&&!(a&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ZC(c,l)))&&o.push(c);return o}function G8(n,e){return function(t){return n(e(t))}}var bie=G8(Object.keys,Object);const Sie=bie;var wie=Object.prototype,xie=wie.hasOwnProperty;function Cie(n){if(!lL(n))return Sie(n);var e=[];for(var t in Object(n))xie.call(n,t)&&t!="constructor"&&e.push(t);return e}function ib(n){return ug(n)?$8(n):Cie(n)}function Mie(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var Tie=Object.prototype,Aie=Tie.hasOwnProperty;function Eie(n){if(!ea(n))return Mie(n);var e=lL(n),t=[];for(var i in n)i=="constructor"&&(e||!Aie.call(n,i))||t.push(i);return t}function rb(n){return ug(n)?$8(n,!0):Eie(n)}var Iie=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rie=/^\w*$/;function dL(n,e){if(Js(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||QC(n)?!0:Rie.test(n)||!Iie.test(n)||e!=null&&n in Object(e)}var Pie=ip(Object,"create");const jy=Pie;function Die(){this.__data__=jy?jy(null):{},this.size=0}function Lie(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var kie="__lodash_hash_undefined__",Oie=Object.prototype,Nie=Oie.hasOwnProperty;function Bie(n){var e=this.__data__;if(jy){var t=e[n];return t===kie?void 0:t}return Nie.call(e,n)?e[n]:void 0}var Fie=Object.prototype,zie=Fie.hasOwnProperty;function Uie(n){var e=this.__data__;return jy?e[n]!==void 0:zie.call(e,n)}var Hie="__lodash_hash_undefined__";function Vie(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=jy&&e===void 0?Hie:e,this}function Oh(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Oh.prototype.clear=Die;Oh.prototype.delete=Lie;Oh.prototype.get=Bie;Oh.prototype.has=Uie;Oh.prototype.set=Vie;function $ie(){this.__data__=[],this.size=0}function JC(n,e){for(var t=n.length;t--;)if(nb(n[t][0],e))return t;return-1}var Gie=Array.prototype,Wie=Gie.splice;function Kie(n){var e=this.__data__,t=JC(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():Wie.call(e,t,1),--this.size,!0}function qie(n){var e=this.__data__,t=JC(e,n);return t<0?void 0:e[t][1]}function Xie(n){return JC(this.__data__,n)>-1}function Yie(n,e){var t=this.__data__,i=JC(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function cu(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}cu.prototype.clear=$ie;cu.prototype.delete=Kie;cu.prototype.get=qie;cu.prototype.has=Xie;cu.prototype.set=Yie;var jie=ip(hl,"Map");const Qy=jie;function Qie(){this.size=0,this.__data__={hash:new Oh,map:new(Qy||cu),string:new Oh}}function Zie(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function eM(n,e){var t=n.__data__;return Zie(e)?t[typeof e=="string"?"string":"hash"]:t.map}function Jie(n){var e=eM(this,n).delete(n);return this.size-=e?1:0,e}function ere(n){return eM(this,n).get(n)}function tre(n){return eM(this,n).has(n)}function nre(n,e){var t=eM(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function uu(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}uu.prototype.clear=Qie;uu.prototype.delete=Jie;uu.prototype.get=ere;uu.prototype.has=tre;uu.prototype.set=nre;var ire="Expected a function";function tM(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(ire);var t=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=t.cache;if(s.has(r))return s.get(r);var a=n.apply(this,i);return t.cache=s.set(r,a)||s,a};return t.cache=new(tM.Cache||uu),t}tM.Cache=uu;var rre=500;function sre(n){var e=tM(n,function(i){return t.size===rre&&t.clear(),i}),t=e.cache;return e}var are=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ore=/\\(\\)?/g,lre=sre(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(are,function(t,i,r,s){e.push(r?s.replace(ore,"$1"):i||t)}),e});const cre=lre;function ure(n){return n==null?"":k8(n)}function dg(n,e){return Js(n)?n:dL(n,e)?[n]:cre(ure(n))}var dre=1/0;function fg(n){if(typeof n=="string"||QC(n))return n;var e=n+"";return e=="0"&&1/n==-dre?"-0":e}function nM(n,e){e=dg(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[fg(e[t++])];return t&&t==i?n:void 0}function Yi(n,e,t){var i=n==null?void 0:nM(n,e);return i===void 0?t:i}function fL(n,e){for(var t=-1,i=e.length,r=n.length;++t<i;)n[r+t]=e[t];return n}var QN=Po?Po.isConcatSpreadable:void 0;function fre(n){return Js(n)||Xy(n)||!!(QN&&n&&n[QN])}function sb(n,e,t,i,r){var s=-1,a=n.length;for(t||(t=fre),r||(r=[]);++s<a;){var o=n[s];e>0&&t(o)?e>1?sb(o,e-1,t,i,r):fL(r,o):i||(r[r.length]=o)}return r}function W8(n){var e=n==null?0:n.length;return e?sb(n,1):[]}function K8(n){return N8(F8(n,void 0,W8),n+"")}var hre=G8(Object.getPrototypeOf,Object);const hL=hre;var pre="[object Object]",mre=Function.prototype,vre=Object.prototype,q8=mre.toString,gre=vre.hasOwnProperty,yre=q8.call(Object);function X8(n){if(!Kl(n)||tp(n)!=pre)return!1;var e=hL(n);if(e===null)return!0;var t=gre.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&q8.call(t)==yre}function _re(n,e,t){var i=-1,r=n.length;e<0&&(e=-e>r?0:r+e),t=t>r?r:t,t<0&&(t+=r),r=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=n[i+e];return s}function As(){if(!arguments.length)return[];var n=arguments[0];return Js(n)?n:[n]}function bre(){this.__data__=new cu,this.size=0}function Sre(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function wre(n){return this.__data__.get(n)}function xre(n){return this.__data__.has(n)}var Cre=200;function Mre(n,e){var t=this.__data__;if(t instanceof cu){var i=t.__data__;if(!Qy||i.length<Cre-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new uu(i)}return t.set(n,e),this.size=t.size,this}function cl(n){var e=this.__data__=new cu(n);this.size=e.size}cl.prototype.clear=bre;cl.prototype.delete=Sre;cl.prototype.get=wre;cl.prototype.has=xre;cl.prototype.set=Mre;function Tre(n,e){return n&&cg(e,ib(e),n)}function Are(n,e){return n&&cg(e,rb(e),n)}var Y8=typeof Ba=="object"&&Ba&&!Ba.nodeType&&Ba,ZN=Y8&&typeof Fa=="object"&&Fa&&!Fa.nodeType&&Fa,Ere=ZN&&ZN.exports===Y8,JN=Ere?hl.Buffer:void 0,eB=JN?JN.allocUnsafe:void 0;function j8(n,e){if(e)return n.slice();var t=n.length,i=eB?eB(t):new n.constructor(t);return n.copy(i),i}function Ire(n,e){for(var t=-1,i=n==null?0:n.length,r=0,s=[];++t<i;){var a=n[t];e(a,t,n)&&(s[r++]=a)}return s}function Q8(){return[]}var Rre=Object.prototype,Pre=Rre.propertyIsEnumerable,tB=Object.getOwnPropertySymbols,Dre=tB?function(n){return n==null?[]:(n=Object(n),Ire(tB(n),function(e){return Pre.call(n,e)}))}:Q8;const pL=Dre;function Lre(n,e){return cg(n,pL(n),e)}var kre=Object.getOwnPropertySymbols,Ore=kre?function(n){for(var e=[];n;)fL(e,pL(n)),n=hL(n);return e}:Q8;const Z8=Ore;function Nre(n,e){return cg(n,Z8(n),e)}function J8(n,e,t){var i=e(n);return Js(n)?i:fL(i,t(n))}function q2(n){return J8(n,ib,pL)}function eG(n){return J8(n,rb,Z8)}var Bre=ip(hl,"DataView");const X2=Bre;var Fre=ip(hl,"Promise");const Y2=Fre;var zre=ip(hl,"Set");const Jm=zre;var nB="[object Map]",Ure="[object Object]",iB="[object Promise]",rB="[object Set]",sB="[object WeakMap]",aB="[object DataView]",Hre=np(X2),Vre=np(Qy),$re=np(Y2),Gre=np(Jm),Wre=np(K2),Hf=tp;(X2&&Hf(new X2(new ArrayBuffer(1)))!=aB||Qy&&Hf(new Qy)!=nB||Y2&&Hf(Y2.resolve())!=iB||Jm&&Hf(new Jm)!=rB||K2&&Hf(new K2)!=sB)&&(Hf=function(n){var e=tp(n),t=e==Ure?n.constructor:void 0,i=t?np(t):"";if(i)switch(i){case Hre:return aB;case Vre:return nB;case $re:return iB;case Gre:return rB;case Wre:return sB}return e});const Zy=Hf;var Kre=Object.prototype,qre=Kre.hasOwnProperty;function Xre(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&qre.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var Yre=hl.Uint8Array;const cx=Yre;function mL(n){var e=new n.constructor(n.byteLength);return new cx(e).set(new cx(n)),e}function jre(n,e){var t=e?mL(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var Qre=/\w*$/;function Zre(n){var e=new n.constructor(n.source,Qre.exec(n));return e.lastIndex=n.lastIndex,e}var oB=Po?Po.prototype:void 0,lB=oB?oB.valueOf:void 0;function Jre(n){return lB?Object(lB.call(n)):{}}function tG(n,e){var t=e?mL(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var ese="[object Boolean]",tse="[object Date]",nse="[object Map]",ise="[object Number]",rse="[object RegExp]",sse="[object Set]",ase="[object String]",ose="[object Symbol]",lse="[object ArrayBuffer]",cse="[object DataView]",use="[object Float32Array]",dse="[object Float64Array]",fse="[object Int8Array]",hse="[object Int16Array]",pse="[object Int32Array]",mse="[object Uint8Array]",vse="[object Uint8ClampedArray]",gse="[object Uint16Array]",yse="[object Uint32Array]";function _se(n,e,t){var i=n.constructor;switch(e){case lse:return mL(n);case ese:case tse:return new i(+n);case cse:return jre(n,t);case use:case dse:case fse:case hse:case pse:case mse:case vse:case gse:case yse:return tG(n,t);case nse:return new i;case ise:case ase:return new i(n);case rse:return Zre(n);case sse:return new i;case ose:return Jre(n)}}function nG(n){return typeof n.constructor=="function"&&!lL(n)?une(hL(n)):{}}var bse="[object Map]";function Sse(n){return Kl(n)&&Zy(n)==bse}var cB=Sv&&Sv.isMap,wse=cB?cL(cB):Sse;const xse=wse;var Cse="[object Set]";function Mse(n){return Kl(n)&&Zy(n)==Cse}var uB=Sv&&Sv.isSet,Tse=uB?cL(uB):Mse;const Ase=Tse;var Ese=1,Ise=2,Rse=4,iG="[object Arguments]",Pse="[object Array]",Dse="[object Boolean]",Lse="[object Date]",kse="[object Error]",rG="[object Function]",Ose="[object GeneratorFunction]",Nse="[object Map]",Bse="[object Number]",sG="[object Object]",Fse="[object RegExp]",zse="[object Set]",Use="[object String]",Hse="[object Symbol]",Vse="[object WeakMap]",$se="[object ArrayBuffer]",Gse="[object DataView]",Wse="[object Float32Array]",Kse="[object Float64Array]",qse="[object Int8Array]",Xse="[object Int16Array]",Yse="[object Int32Array]",jse="[object Uint8Array]",Qse="[object Uint8ClampedArray]",Zse="[object Uint16Array]",Jse="[object Uint32Array]",Fi={};Fi[iG]=Fi[Pse]=Fi[$se]=Fi[Gse]=Fi[Dse]=Fi[Lse]=Fi[Wse]=Fi[Kse]=Fi[qse]=Fi[Xse]=Fi[Yse]=Fi[Nse]=Fi[Bse]=Fi[sG]=Fi[Fse]=Fi[zse]=Fi[Use]=Fi[Hse]=Fi[jse]=Fi[Qse]=Fi[Zse]=Fi[Jse]=!0;Fi[kse]=Fi[rG]=Fi[Vse]=!1;function ev(n,e,t,i,r,s){var a,o=e&Ese,l=e&Ise,c=e&Rse;if(t&&(a=r?t(n,i,r,s):t(n)),a!==void 0)return a;if(!ea(n))return n;var u=Js(n);if(u){if(a=Xre(n),!o)return O8(n,a)}else{var d=Zy(n),f=d==rG||d==Ose;if(Yy(n))return j8(n,o);if(d==sG||d==iG||f&&!r){if(a=l||f?{}:nG(n),!o)return l?Nre(n,Are(a,n)):Lre(n,Tre(a,n))}else{if(!Fi[d])return r?n:{};a=_se(n,d,o)}}s||(s=new cl);var h=s.get(n);if(h)return h;s.set(n,a),Ase(n)?n.forEach(function(v){a.add(ev(v,e,t,v,n,s))}):xse(n)&&n.forEach(function(v,g){a.set(g,ev(v,e,t,g,n,s))});var p=c?l?eG:q2:l?rb:ib,m=u?void 0:p(n);return wne(m||n,function(v,g){m&&(g=v,v=n[g]),aL(a,g,ev(v,e,t,g,n,s))}),a}var eae=4;function dB(n){return ev(n,eae)}var tae=1,nae=4;function ux(n){return ev(n,tae|nae)}var iae="__lodash_hash_undefined__";function rae(n){return this.__data__.set(n,iae),this}function sae(n){return this.__data__.has(n)}function Jy(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new uu;++e<t;)this.add(n[e])}Jy.prototype.add=Jy.prototype.push=rae;Jy.prototype.has=sae;function aae(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}function aG(n,e){return n.has(e)}var oae=1,lae=2;function oG(n,e,t,i,r,s){var a=t&oae,o=n.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(n),u=s.get(e);if(c&&u)return c==e&&u==n;var d=-1,f=!0,h=t&lae?new Jy:void 0;for(s.set(n,e),s.set(e,n);++d<o;){var p=n[d],m=e[d];if(i)var v=a?i(m,p,d,e,n,s):i(p,m,d,n,e,s);if(v!==void 0){if(v)continue;f=!1;break}if(h){if(!aae(e,function(g,_){if(!aG(h,_)&&(p===g||r(p,g,t,i,s)))return h.push(_)})){f=!1;break}}else if(!(p===m||r(p,m,t,i,s))){f=!1;break}}return s.delete(n),s.delete(e),f}function cae(n){var e=-1,t=Array(n.size);return n.forEach(function(i,r){t[++e]=[r,i]}),t}function vL(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var uae=1,dae=2,fae="[object Boolean]",hae="[object Date]",pae="[object Error]",mae="[object Map]",vae="[object Number]",gae="[object RegExp]",yae="[object Set]",_ae="[object String]",bae="[object Symbol]",Sae="[object ArrayBuffer]",wae="[object DataView]",fB=Po?Po.prototype:void 0,uT=fB?fB.valueOf:void 0;function xae(n,e,t,i,r,s,a){switch(t){case wae:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case Sae:return!(n.byteLength!=e.byteLength||!s(new cx(n),new cx(e)));case fae:case hae:case vae:return nb(+n,+e);case pae:return n.name==e.name&&n.message==e.message;case gae:case _ae:return n==e+"";case mae:var o=cae;case yae:var l=i&uae;if(o||(o=vL),n.size!=e.size&&!l)return!1;var c=a.get(n);if(c)return c==e;i|=dae,a.set(n,e);var u=oG(o(n),o(e),i,r,s,a);return a.delete(n),u;case bae:if(uT)return uT.call(n)==uT.call(e)}return!1}var Cae=1,Mae=Object.prototype,Tae=Mae.hasOwnProperty;function Aae(n,e,t,i,r,s){var a=t&Cae,o=q2(n),l=o.length,c=q2(e),u=c.length;if(l!=u&&!a)return!1;for(var d=l;d--;){var f=o[d];if(!(a?f in e:Tae.call(e,f)))return!1}var h=s.get(n),p=s.get(e);if(h&&p)return h==e&&p==n;var m=!0;s.set(n,e),s.set(e,n);for(var v=a;++d<l;){f=o[d];var g=n[f],_=e[f];if(i)var y=a?i(_,g,f,e,n,s):i(g,_,f,n,e,s);if(!(y===void 0?g===_||r(g,_,t,i,s):y)){m=!1;break}v||(v=f=="constructor")}if(m&&!v){var S=n.constructor,w=e.constructor;S!=w&&"constructor"in n&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof w=="function"&&w instanceof w)&&(m=!1)}return s.delete(n),s.delete(e),m}var Eae=1,hB="[object Arguments]",pB="[object Array]",zb="[object Object]",Iae=Object.prototype,mB=Iae.hasOwnProperty;function Rae(n,e,t,i,r,s){var a=Js(n),o=Js(e),l=a?pB:Zy(n),c=o?pB:Zy(e);l=l==hB?zb:l,c=c==hB?zb:c;var u=l==zb,d=c==zb,f=l==c;if(f&&Yy(n)){if(!Yy(e))return!1;a=!0,u=!1}if(f&&!u)return s||(s=new cl),a||uL(n)?oG(n,e,t,i,r,s):xae(n,e,l,t,i,r,s);if(!(t&Eae)){var h=u&&mB.call(n,"__wrapped__"),p=d&&mB.call(e,"__wrapped__");if(h||p){var m=h?n.value():n,v=p?e.value():e;return s||(s=new cl),r(m,v,t,i,s)}}return f?(s||(s=new cl),Aae(n,e,t,i,r,s)):!1}function iM(n,e,t,i,r){return n===e?!0:n==null||e==null||!Kl(n)&&!Kl(e)?n!==n&&e!==e:Rae(n,e,t,i,iM,r)}var Pae=1,Dae=2;function Lae(n,e,t,i){var r=t.length,s=r,a=!i;if(n==null)return!s;for(n=Object(n);r--;){var o=t[r];if(a&&o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++r<s;){o=t[r];var l=o[0],c=n[l],u=o[1];if(a&&o[2]){if(c===void 0&&!(l in n))return!1}else{var d=new cl;if(i)var f=i(c,u,l,n,e,d);if(!(f===void 0?iM(u,c,Pae|Dae,i,d):f))return!1}}return!0}function lG(n){return n===n&&!ea(n)}function kae(n){for(var e=ib(n),t=e.length;t--;){var i=e[t],r=n[i];e[t]=[i,r,lG(r)]}return e}function cG(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function Oae(n){var e=kae(n);return e.length==1&&e[0][2]?cG(e[0][0],e[0][1]):function(t){return t===n||Lae(t,n,e)}}function Nae(n,e){return n!=null&&e in Object(n)}function Bae(n,e,t){e=dg(e,n);for(var i=-1,r=e.length,s=!1;++i<r;){var a=fg(e[i]);if(!(s=n!=null&&t(n,a)))break;n=n[a]}return s||++i!=r?s:(r=n==null?0:n.length,!!r&&oL(r)&&ZC(a,r)&&(Js(n)||Xy(n)))}function uG(n,e){return n!=null&&Bae(n,e,Nae)}var Fae=1,zae=2;function Uae(n,e){return dL(n)&&lG(e)?cG(fg(n),e):function(t){var i=Yi(t,n);return i===void 0&&i===e?uG(t,n):iM(e,i,Fae|zae)}}function Hae(n){return function(e){return e==null?void 0:e[n]}}function Vae(n){return function(e){return nM(e,n)}}function $ae(n){return dL(n)?Hae(fg(n)):Vae(n)}function dG(n){return typeof n=="function"?n:n==null?iL:typeof n=="object"?Js(n)?Uae(n[0],n[1]):Oae(n):$ae(n)}function Gae(n){return function(e,t,i){for(var r=-1,s=Object(e),a=i(e),o=a.length;o--;){var l=a[n?o:++r];if(t(s[l],l,s)===!1)break}return e}}var Wae=Gae();const fG=Wae;function Kae(n,e){return n&&fG(n,e,ib)}function qae(n,e){return function(t,i){if(t==null)return t;if(!ug(t))return n(t,i);for(var r=t.length,s=e?r:-1,a=Object(t);(e?s--:++s<r)&&i(a[s],s,a)!==!1;);return t}}var Xae=qae(Kae);const Yae=Xae;var jae=function(){return hl.Date.now()};const dT=jae;var Qae="Expected a function",Zae=Math.max,Jae=Math.min;function wa(n,e,t){var i,r,s,a,o,l,c=0,u=!1,d=!1,f=!0;if(typeof n!="function")throw new TypeError(Qae);e=W2(e)||0,ea(t)&&(u=!!t.leading,d="maxWait"in t,s=d?Zae(W2(t.maxWait)||0,e):s,f="trailing"in t?!!t.trailing:f);function h(x){var T=i,C=r;return i=r=void 0,c=x,a=n.apply(C,T),a}function p(x){return c=x,o=setTimeout(g,e),u?h(x):a}function m(x){var T=x-l,C=x-c,M=e-T;return d?Jae(M,s-C):M}function v(x){var T=x-l,C=x-c;return l===void 0||T>=e||T<0||d&&C>=s}function g(){var x=dT();if(v(x))return _(x);o=setTimeout(g,m(x))}function _(x){return o=void 0,f&&i?h(x):(i=r=void 0,a)}function y(){o!==void 0&&clearTimeout(o),c=0,i=l=r=o=void 0}function S(){return o===void 0?a:_(dT())}function w(){var x=dT(),T=v(x);if(i=arguments,r=this,l=x,T){if(o===void 0)return p(l);if(d)return clearTimeout(o),o=setTimeout(g,e),h(l)}return o===void 0&&(o=setTimeout(g,e)),a}return w.cancel=y,w.flush=S,w}function j2(n,e,t){(t!==void 0&&!nb(n[e],t)||t===void 0&&!(e in n))&&sL(n,e,t)}function hG(n){return Kl(n)&&ug(n)}function Q2(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function eoe(n){return cg(n,rb(n))}function toe(n,e,t,i,r,s,a){var o=Q2(n,t),l=Q2(e,t),c=a.get(l);if(c){j2(n,t,c);return}var u=s?s(o,l,t+"",n,e,a):void 0,d=u===void 0;if(d){var f=Js(l),h=!f&&Yy(l),p=!f&&!h&&uL(l);u=l,f||h||p?Js(o)?u=o:hG(o)?u=O8(o):h?(d=!1,u=j8(l,!0)):p?(d=!1,u=tG(l,!0)):u=[]:X8(l)||Xy(l)?(u=o,Xy(o)?u=eoe(o):(!ea(o)||rL(o))&&(u=nG(l))):d=!1}d&&(a.set(l,u),r(u,l,i,s,a),a.delete(l)),j2(n,t,u)}function pG(n,e,t,i,r){n!==e&&fG(e,function(s,a){if(r||(r=new cl),ea(s))toe(n,e,a,t,pG,i,r);else{var o=i?i(Q2(n,a),s,a+"",n,e,r):void 0;o===void 0&&(o=s),j2(n,a,o)}},rb)}function noe(n,e,t){for(var i=-1,r=n==null?0:n.length;++i<r;)if(t(e,n[i]))return!0;return!1}function ioe(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var roe=Math.max,soe=Math.min;function mG(n,e,t){var i=n==null?0:n.length;if(!i)return-1;var r=i-1;return t!==void 0&&(r=Gte(t),r=t<0?roe(i+r,0):soe(r,i-1)),B8(n,dG(e),r,!0)}function aoe(n,e){var t=-1,i=ug(n)?Array(n.length):[];return Yae(n,function(r,s,a){i[++t]=e(r,s,a)}),i}function ooe(n,e){var t=Js(n)?nL:aoe;return t(n,dG(e))}function loe(n,e){return sb(ooe(n,e),1)}var coe=1/0;function uoe(n){var e=n==null?0:n.length;return e?sb(n,coe):[]}function e_(n){for(var e=-1,t=n==null?0:n.length,i={};++e<t;){var r=n[e];i[r[0]]=r[1]}return i}function doe(n,e){return e.length<2?n:nM(n,_re(e,0,-1))}function jr(n,e){return iM(n,e)}function xr(n){return n==null}function vG(n){return n===void 0}var foe=Lne(function(n,e,t){pG(n,e,t)});const gG=foe;function hoe(n,e){return e=dg(e,n),n=doe(n,e),n==null||delete n[fg(ioe(e))]}function poe(n){return X8(n)?void 0:n}var moe=1,voe=2,goe=4,yoe=K8(function(n,e){var t={};if(n==null)return t;var i=!1;e=nL(e,function(s){return s=dg(s,n),i||(i=s.length>1),s}),cg(n,eG(n),t),i&&(t=ev(t,moe|voe|goe,poe));for(var r=e.length;r--;)hoe(t,e[r]);return t});const _oe=yoe;function yG(n,e,t,i){if(!ea(n))return n;e=dg(e,n);for(var r=-1,s=e.length,a=s-1,o=n;o!=null&&++r<s;){var l=fg(e[r]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(r!=a){var u=o[l];c=i?i(u,l,o):void 0,c===void 0&&(c=ea(u)?u:ZC(e[r+1])?[]:{})}aL(o,l,c),o=o[l]}return n}function boe(n,e,t){for(var i=-1,r=e.length,s={};++i<r;){var a=e[i],o=nM(n,a);t(o,a)&&yG(s,dg(a,n),o)}return s}function Soe(n,e){return boe(n,e,function(t,i){return uG(n,i)})}var woe=K8(function(n,e){return n==null?{}:Soe(n,e)});const rl=woe;function xoe(n,e,t){return n==null?n:yG(n,e,t)}var Coe="Expected a function";function xh(n,e,t){var i=!0,r=!0;if(typeof n!="function")throw new TypeError(Coe);return ea(t)&&(i="leading"in t?!!t.leading:i,r="trailing"in t?!!t.trailing:r),wa(n,e,{leading:i,maxWait:e,trailing:r})}var Moe=1/0,Toe=Jm&&1/vL(new Jm([,-0]))[1]==Moe?function(n){return new Jm(n)}:fne;const Aoe=Toe;var Eoe=200;function Ioe(n,e,t){var i=-1,r=Tne,s=n.length,a=!0,o=[],l=o;if(t)a=!1,r=noe;else if(s>=Eoe){var c=e?null:Aoe(n);if(c)return vL(c);a=!1,r=aG,l=new Jy}else l=e?[]:o;e:for(;++i<s;){var u=n[i],d=e?e(u):u;if(u=t||u!==0?u:0,a&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;e&&l.push(d),o.push(u)}else r(l,d,t)||(l!==o&&l.push(d),o.push(u))}return o}var Roe=z8(function(n){return Ioe(sb(n,1,hG,!0))});const fT=Roe,Wn=n=>n===void 0,ai=n=>typeof n=="boolean",At=n=>typeof n=="number",ka=n=>!n&&n!==0||nt(n)&&n.length===0||Yt(n)&&!Object.keys(n).length,za=n=>typeof Element>"u"?!1:n instanceof Element,Nh=n=>xr(n),Poe=n=>xt(n)?!Number.isNaN(Number(n)):!1,rM=n=>n===window;var Doe=Object.defineProperty,Loe=Object.defineProperties,koe=Object.getOwnPropertyDescriptors,vB=Object.getOwnPropertySymbols,Ooe=Object.prototype.hasOwnProperty,Noe=Object.prototype.propertyIsEnumerable,gB=(n,e,t)=>e in n?Doe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Boe=(n,e)=>{for(var t in e||(e={}))Ooe.call(e,t)&&gB(n,t,e[t]);if(vB)for(var t of vB(e))Noe.call(e,t)&&gB(n,t,e[t]);return n},Foe=(n,e)=>Loe(n,koe(e));function Z2(n,e){var t;const i=Yn();return zr(()=>{i.value=n()},Foe(Boe({},e),{flush:(t=e==null?void 0:e.flush)!=null?t:"sync"})),og(i)}var yB;const wn=typeof window<"u",zoe=n=>typeof n<"u",J2=n=>typeof n=="function",Uoe=n=>typeof n=="string",wv=()=>{},eI=wn&&((yB=window==null?void 0:window.navigator)==null?void 0:yB.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Pd(n){return typeof n=="function"?n():b(n)}function _G(n,e){function t(...i){return new Promise((r,s)=>{Promise.resolve(n(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(r).catch(s)})}return t}function Hoe(n,e={}){let t,i,r=wv;const s=o=>{clearTimeout(o),r(),r=wv};return o=>{const l=Pd(n),c=Pd(e.maxWait);return t&&s(t),l<=0||c!==void 0&&c<=0?(i&&(s(i),i=null),Promise.resolve(o())):new Promise((u,d)=>{r=e.rejectOnCancel?d:u,c&&!i&&(i=setTimeout(()=>{t&&s(t),i=null,u(o())},c)),t=setTimeout(()=>{i&&s(i),i=null,u(o())},l)})}}function Voe(n,e=!0,t=!0,i=!1){let r=0,s,a=!0,o=wv,l;const c=()=>{s&&(clearTimeout(s),s=void 0,o(),o=wv)};return d=>{const f=Pd(n),h=Date.now()-r,p=()=>l=d();return c(),f<=0?(r=Date.now(),p()):(h>f&&(t||!a)?(r=Date.now(),p()):e&&(l=new Promise((m,v)=>{o=i?v:m,s=setTimeout(()=>{r=Date.now(),a=!0,m(p()),c()},Math.max(0,f-h))})),!t&&!s&&(s=setTimeout(()=>a=!0,f)),a=!1,l)}}function $oe(n){return n}function Goe(n,e){let t,i,r;const s=X(!0),a=()=>{s.value=!0,r()};We(n,a,{flush:"sync"});const o=J2(e)?e:e.get,l=J2(e)?void 0:e.set,c=kJ((u,d)=>(i=u,r=d,{get(){return s.value&&(t=o(),s.value=!1),i(),t},set(f){l==null||l(f)}}));return Object.isExtensible(c)&&(c.trigger=a),c}function ab(n){return A6()?(E6(n),!0):!1}function Woe(n,e=200,t={}){return _G(Hoe(e,t),n)}function Koe(n,e=200,t={}){const i=X(n.value),r=Woe(()=>{i.value=n.value},e,t);return We(n,()=>r()),i}function bG(n,e=200,t=!1,i=!0,r=!1){return _G(Voe(e,t,i,r),n)}function gL(n,e=!0){jt()?Ht(n):e?n():Mt(n)}function Bh(n,e,t={}){const{immediate:i=!0}=t,r=X(!1);let s=null;function a(){s&&(clearTimeout(s),s=null)}function o(){r.value=!1,a()}function l(...c){a(),r.value=!0,s=setTimeout(()=>{r.value=!1,s=null,n(...c)},Pd(e))}return i&&(r.value=!0,wn&&l()),ab(o),{isPending:og(r),start:l,stop:o}}function Xs(n){var e;const t=Pd(n);return(e=t==null?void 0:t.$el)!=null?e:t}const Jd=wn?window:void 0,qoe=wn?window.document:void 0;function Kn(...n){let e,t,i,r;if(Uoe(n[0])||Array.isArray(n[0])?([t,i,r]=n,e=Jd):[e,t,i,r]=n,!e)return wv;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const s=[],a=()=>{s.forEach(u=>u()),s.length=0},o=(u,d,f,h)=>(u.addEventListener(d,f,h),()=>u.removeEventListener(d,f,h)),l=We(()=>[Xs(e),Pd(r)],([u,d])=>{a(),u&&s.push(...t.flatMap(f=>i.map(h=>o(u,f,h,d))))},{immediate:!0,flush:"post"}),c=()=>{l(),a()};return ab(c),c}let _B=!1;function yL(n,e,t={}){const{window:i=Jd,ignore:r=[],capture:s=!0,detectIframe:a=!1}=t;if(!i)return;eI&&!_B&&(_B=!0,Array.from(i.document.body.children).forEach(f=>f.addEventListener("click",wv)));let o=!0;const l=f=>r.some(h=>{if(typeof h=="string")return Array.from(i.document.querySelectorAll(h)).some(p=>p===f.target||f.composedPath().includes(p));{const p=Xs(h);return p&&(f.target===p||f.composedPath().includes(p))}}),u=[Kn(i,"click",f=>{const h=Xs(n);if(!(!h||h===f.target||f.composedPath().includes(h))){if(f.detail===0&&(o=!l(f)),!o){o=!0;return}e(f)}},{passive:!0,capture:s}),Kn(i,"pointerdown",f=>{const h=Xs(n);h&&(o=!f.composedPath().includes(h)&&!l(f))},{passive:!0}),a&&Kn(i,"blur",f=>{var h;const p=Xs(n);((h=i.document.activeElement)==null?void 0:h.tagName)==="IFRAME"&&!(p!=null&&p.contains(i.document.activeElement))&&e(f)})].filter(Boolean);return()=>u.forEach(f=>f())}function Xoe(n={}){var e;const{window:t=Jd}=n,i=(e=n.document)!=null?e:t==null?void 0:t.document,r=Goe(()=>null,()=>i==null?void 0:i.activeElement);return t&&(Kn(t,"blur",s=>{s.relatedTarget===null&&r.trigger()},!0),Kn(t,"focus",r.trigger,!0)),r}function SG(n,e=!1){const t=X(),i=()=>t.value=!!n();return i(),gL(i,e),t}function Yoe(n){return JSON.parse(JSON.stringify(n))}const bB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},SB="__vueuse_ssr_handlers__";bB[SB]=bB[SB]||{};function joe(n,e,{window:t=Jd,initialValue:i=""}={}){const r=X(i),s=N(()=>{var a;return Xs(e)||((a=t==null?void 0:t.document)==null?void 0:a.documentElement)});return We([s,()=>Pd(n)],([a,o])=>{var l;if(a&&t){const c=(l=t.getComputedStyle(a).getPropertyValue(o))==null?void 0:l.trim();r.value=c||i}},{immediate:!0}),We(r,a=>{var o;(o=s.value)!=null&&o.style&&s.value.style.setProperty(Pd(n),a)}),r}function Qoe({document:n=qoe}={}){if(!n)return X("visible");const e=X(n.visibilityState);return Kn(n,"visibilitychange",()=>{e.value=n.visibilityState}),e}var wB=Object.getOwnPropertySymbols,Zoe=Object.prototype.hasOwnProperty,Joe=Object.prototype.propertyIsEnumerable,ele=(n,e)=>{var t={};for(var i in n)Zoe.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&wB)for(var i of wB(n))e.indexOf(i)<0&&Joe.call(n,i)&&(t[i]=n[i]);return t};function Ti(n,e,t={}){const i=t,{window:r=Jd}=i,s=ele(i,["window"]);let a;const o=SG(()=>r&&"ResizeObserver"in r),l=()=>{a&&(a.disconnect(),a=void 0)},c=We(()=>Xs(n),d=>{l(),o.value&&r&&d&&(a=new ResizeObserver(e),a.observe(d,s))},{immediate:!0,flush:"post"}),u=()=>{l(),c()};return ab(u),{isSupported:o,stop:u}}function xB(n,e={}){const{reset:t=!0,windowResize:i=!0,windowScroll:r=!0,immediate:s=!0}=e,a=X(0),o=X(0),l=X(0),c=X(0),u=X(0),d=X(0),f=X(0),h=X(0);function p(){const m=Xs(n);if(!m){t&&(a.value=0,o.value=0,l.value=0,c.value=0,u.value=0,d.value=0,f.value=0,h.value=0);return}const v=m.getBoundingClientRect();a.value=v.height,o.value=v.bottom,l.value=v.left,c.value=v.right,u.value=v.top,d.value=v.width,f.value=v.x,h.value=v.y}return Ti(n,p),We(()=>Xs(n),m=>!m&&p()),r&&Kn("scroll",p,{capture:!0,passive:!0}),i&&Kn("resize",p,{passive:!0}),gL(()=>{s&&p()}),{height:a,bottom:o,left:l,right:c,top:u,width:d,x:f,y:h,update:p}}var CB=Object.getOwnPropertySymbols,tle=Object.prototype.hasOwnProperty,nle=Object.prototype.propertyIsEnumerable,ile=(n,e)=>{var t={};for(var i in n)tle.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&CB)for(var i of CB(n))e.indexOf(i)<0&&nle.call(n,i)&&(t[i]=n[i]);return t};function wG(n,e,t={}){const i=t,{window:r=Jd}=i,s=ile(i,["window"]);let a;const o=SG(()=>r&&"MutationObserver"in r),l=()=>{a&&(a.disconnect(),a=void 0)},c=We(()=>Xs(n),d=>{l(),o.value&&r&&d&&(a=new MutationObserver(e),a.observe(d,s))},{immediate:!0}),u=()=>{l(),c()};return ab(u),{isSupported:o,stop:u}}var MB;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(MB||(MB={}));var rle=Object.defineProperty,TB=Object.getOwnPropertySymbols,sle=Object.prototype.hasOwnProperty,ale=Object.prototype.propertyIsEnumerable,AB=(n,e,t)=>e in n?rle(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ole=(n,e)=>{for(var t in e||(e={}))sle.call(e,t)&&AB(n,t,e[t]);if(TB)for(var t of TB(e))ale.call(e,t)&&AB(n,t,e[t]);return n};const lle={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};ole({linear:$oe},lle);function xG(n,e,t,i={}){var r,s,a;const{clone:o=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:d}=i,f=jt(),h=t||(f==null?void 0:f.emit)||((r=f==null?void 0:f.$emit)==null?void 0:r.bind(f))||((a=(s=f==null?void 0:f.proxy)==null?void 0:s.$emit)==null?void 0:a.bind(f==null?void 0:f.proxy));let p=c;e||(e="modelValue"),p=c||p||`update:${e.toString()}`;const m=g=>o?J2(o)?o(g):Yoe(g):g,v=()=>zoe(n[e])?m(n[e]):d;if(l){const g=v(),_=X(g);return We(()=>n[e],y=>_.value=m(y)),We(_,y=>{(y!==n[e]||u)&&h(p,y)},{deep:u}),_}else return N({get(){return v()},set(g){h(p,g)}})}function cle({window:n=Jd}={}){if(!n)return X(!1);const e=X(n.document.hasFocus());return Kn(n,"blur",()=>{e.value=!1}),Kn(n,"focus",()=>{e.value=!0}),e}function ule(n={}){const{window:e=Jd,initialWidth:t=1/0,initialHeight:i=1/0,listenOrientation:r=!0,includeScrollbar:s=!0}=n,a=X(t),o=X(i),l=()=>{e&&(s?(a.value=e.innerWidth,o.value=e.innerHeight):(a.value=e.document.documentElement.clientWidth,o.value=e.document.documentElement.clientHeight))};return l(),gL(l),Kn("resize",l,{passive:!0}),r&&Kn("orientationchange",l,{passive:!0}),{width:a,height:o}}class dle extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function _r(n,e){throw new dle(`[${n}] ${e}`)}const EB={current:0},IB=X(0),CG=2e3,RB=Symbol("elZIndexContextKey"),MG=Symbol("zIndexContextKey"),hg=n=>{const e=jt()?mt(RB,EB):EB,t=n||(jt()?mt(MG,void 0):void 0),i=N(()=>{const a=b(t);return At(a)?a:CG}),r=N(()=>i.value+IB.value),s=()=>(e.current++,IB.value=e.current,r.value);return!wn&&mt(RB),{initialZIndex:i,currentZIndex:r,nextZIndex:s}};var fle={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const hle=n=>(e,t)=>ple(e,t,b(n)),ple=(n,e,t)=>Yi(t,n,n).replace(/\{(\w+)\}/g,(i,r)=>{var s;return`${(s=e==null?void 0:e[r])!=null?s:`{${r}}`}`}),mle=n=>{const e=N(()=>b(n).name),t=fi(n)?n:X(n);return{lang:e,locale:t,t:hle(n)}},TG=Symbol("localeContextKey"),xn=n=>{const e=n||mt(TG,X());return mle(N(()=>e.value||fle))},AG="__epPropKey",Re=n=>n,vle=n=>Yt(n)&&!!n[AG],pl=(n,e)=>{if(!Yt(n)||vle(n))return n;const{values:t,required:i,default:r,type:s,validator:a}=n,l={type:s,required:!!i,validator:t||a?c=>{let u=!1,d=[];if(t&&(d=Array.from(t),Cn(n,"default")&&d.push(r),u||(u=d.includes(c))),a&&(u||(u=a(c))),!u&&d.length>0){const f=[...new Set(d)].map(h=>JSON.stringify(h)).join(", ");zJ(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${f}], got value ${JSON.stringify(c)}.`)}return u}:void 0,[AG]:!0};return Cn(n,"default")&&(l.default=r),l},at=n=>e_(Object.entries(n).map(([e,t])=>[e,pl(t,e)])),nc=["","default","small","large"],cr=pl({type:String,values:nc,required:!1}),EG=Symbol("size"),IG=()=>{const n=mt(EG,{});return N(()=>b(n.size)||"")},RG=Symbol("emptyValuesContextKey"),gle=["",void 0,null],yle=void 0,pg=at({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:n=>Tt(n)?!n():!n}}),sM=(n,e)=>{const t=jt()?mt(RG,X({})):X({}),i=N(()=>n.emptyValues||t.value.emptyValues||gle),r=N(()=>Tt(n.valueOnClear)?n.valueOnClear():n.valueOnClear!==void 0?n.valueOnClear:Tt(t.value.valueOnClear)?t.value.valueOnClear():t.value.valueOnClear!==void 0?t.value.valueOnClear:e!==void 0?e:yle),s=a=>i.value.includes(a);return i.value.includes(r.value),{emptyValues:i,valueOnClear:r,isEmptyValue:s}},xv=n=>Object.keys(n),PG=n=>Object.entries(n),s1=(n,e,t)=>({get value(){return Yi(n,e,t)},set value(i){xoe(n,e,i)}}),dx=X();function aM(n,e=void 0){const t=jt()?mt(R8,dx):dx;return n?N(()=>{var i,r;return(r=(i=t.value)==null?void 0:i[n])!=null?r:e}):t}function oM(n,e){const t=aM(),i=Ze(n,N(()=>{var o;return((o=t.value)==null?void 0:o.namespace)||ey})),r=xn(N(()=>{var o;return(o=t.value)==null?void 0:o.locale})),s=hg(N(()=>{var o;return((o=t.value)==null?void 0:o.zIndex)||CG})),a=N(()=>{var o;return b(e)||((o=t.value)==null?void 0:o.size)||""});return _L(N(()=>b(t)||{})),{ns:i,locale:r,zIndex:s,size:a}}const _L=(n,e,t=!1)=>{var i;const r=!!jt(),s=r?aM():void 0,a=(i=e==null?void 0:e.provide)!=null?i:r?un:void 0;if(!a)return;const o=N(()=>{const l=b(n);return s!=null&&s.value?_le(s.value,l):l});return a(R8,o),a(TG,N(()=>o.value.locale)),a(P8,N(()=>o.value.namespace)),a(MG,N(()=>o.value.zIndex)),a(EG,{size:N(()=>o.value.size||"")}),a(RG,N(()=>({emptyValues:o.value.emptyValues,valueOnClear:o.value.valueOnClear}))),(t||!dx.value)&&(dx.value=o.value),o},_le=(n,e)=>{const t=[...new Set([...xv(n),...xv(e)])],i={};for(const r of t)i[r]=e[r]!==void 0?e[r]:n[r];return i},ble=(n=[])=>({version:gte,install:(t,i)=>{t[FN]||(t[FN]=!0,n.forEach(r=>t.use(r)),i&&_L(i,t,!0))}}),Kt="update:modelValue",jn="change",ls="input",Sle=at({zIndex:{type:Re([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),wle={scroll:({scrollTop:n,fixed:e})=>At(n)&&ai(e),[jn]:n=>ai(n)};var ot=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t};function xle(n,e,t,i){const r=t-e;return n/=i/2,n<1?r/2*n*n*n+e:r/2*((n-=2)*n*n+2)+e}const Dd=n=>wn?window.requestAnimationFrame(n):setTimeout(n,16),Fh=n=>wn?window.cancelAnimationFrame(n):clearTimeout(n),DG=(n="")=>n.split(" ").filter(e=>!!e.trim()),fa=(n,e)=>{if(!n||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return n.classList.contains(e)},_o=(n,e)=>{!n||!e.trim()||n.classList.add(...DG(e))},Ls=(n,e)=>{!n||!e.trim()||n.classList.remove(...DG(e))},Fc=(n,e)=>{var t;if(!wn||!n||!e)return"";let i=Wa(e);i==="float"&&(i="cssFloat");try{const r=n.style[i];if(r)return r;const s=(t=document.defaultView)==null?void 0:t.getComputedStyle(n,"");return s?s[i]:""}catch{return n.style[i]}},LG=(n,e,t)=>{if(!(!n||!e))if(Yt(e))PG(e).forEach(([i,r])=>LG(n,i,r));else{const i=Wa(e);n.style[i]=t}};function Ui(n,e="px"){if(!n)return"";if(At(n)||Poe(n))return`${n}${e}`;if(xt(n))return n}const Cle=(n,e)=>{if(!wn)return!1;const t={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],i=Fc(n,t);return["scroll","auto","overlay"].some(r=>i.includes(r))},bL=(n,e)=>{if(!wn)return;let t=n;for(;t;){if([window,document,document.documentElement].includes(t))return window;if(Cle(t,e))return t;t=t.parentNode}return t};let Ub;const kG=n=>{var e;if(!wn)return 0;if(Ub!==void 0)return Ub;const t=document.createElement("div");t.className=`${n}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const i=t.offsetWidth;t.style.overflow="scroll";const r=document.createElement("div");r.style.width="100%",t.appendChild(r);const s=r.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),Ub=i-s,Ub};function SL(n,e){if(!wn)return;if(!e){n.scrollTop=0;return}const t=[];let i=e.offsetParent;for(;i!==null&&n!==i&&n.contains(i);)t.push(i),i=i.offsetParent;const r=e.offsetTop+t.reduce((l,c)=>l+c.offsetTop,0),s=r+e.offsetHeight,a=n.scrollTop,o=a+n.clientHeight;r<a?n.scrollTop=r:s>o&&(n.scrollTop=s-n.clientHeight)}function Mle(n,e,t,i,r){const s=Date.now();let a;const o=()=>{const c=Date.now()-s,u=xle(c>i?i:c,e,t,i);rM(n)?n.scrollTo(window.pageXOffset,u):n.scrollTop=u,c<i?a=Dd(o):Tt(r)&&r()};return o(),()=>{a&&Fh(a)}}const PB=(n,e)=>rM(e)?n.ownerDocument.documentElement:e,DB=n=>rM(n)?window.scrollY:n.scrollTop,OG="ElAffix",Tle=ve({name:OG}),Ale=ve({...Tle,props:Sle,emits:wle,setup(n,{expose:e,emit:t}){const i=n,r=Ze("affix"),s=Yn(),a=Yn(),o=Yn(),{height:l}=ule(),{height:c,width:u,top:d,bottom:f,update:h}=xB(a,{windowScroll:!1}),p=xB(s),m=X(!1),v=X(0),g=X(0),_=N(()=>({height:m.value?`${c.value}px`:"",width:m.value?`${u.value}px`:""})),y=N(()=>{if(!m.value)return{};const x=i.offset?Ui(i.offset):0;return{height:`${c.value}px`,width:`${u.value}px`,top:i.position==="top"?x:"",bottom:i.position==="bottom"?x:"",transform:g.value?`translateY(${g.value}px)`:"",zIndex:i.zIndex}}),S=()=>{if(!o.value)return;v.value=o.value instanceof Window?document.documentElement.scrollTop:o.value.scrollTop||0;const{position:x,target:T,offset:C}=i,M=C+c.value;if(x==="top")if(T){const A=p.bottom.value-M;m.value=C>d.value&&p.bottom.value>0,g.value=A<0?A:0}else m.value=C>d.value;else if(T){const A=l.value-p.top.value-M;m.value=l.value-C<f.value&&l.value>p.top.value,g.value=A<0?-A:0}else m.value=l.value-C<f.value},w=()=>{h(),t("scroll",{scrollTop:v.value,fixed:m.value})};return We(m,x=>t("change",x)),Ht(()=>{var x;i.target?(s.value=(x=document.querySelector(i.target))!=null?x:void 0,s.value||_r(OG,`Target does not exist: ${i.target}`)):s.value=document.documentElement,o.value=bL(a.value,!0),h()}),Kn(o,"scroll",w),zr(S),e({update:S,updateRoot:h}),(x,T)=>(F(),ie("div",{ref_key:"root",ref:a,class:$(b(r).b()),style:Ct(b(_))},[le("div",{class:$({[b(r).m("fixed")]:m.value}),style:Ct(b(y))},[Ne(x.$slots,"default")],6)],6))}});var Ele=ot(Ale,[["__file","affix.vue"]]);const Ft=(n,e)=>{if(n.install=t=>{for(const i of[n,...Object.values(e??{})])t.component(i.name,i)},e)for(const[t,i]of Object.entries(e))n[t]=i;return n},NG=(n,e)=>(n.install=t=>{n._context=t._context,t.config.globalProperties[e]=n},n),Ile=(n,e)=>(n.install=t=>{t.directive(e,n)},n),ki=n=>(n.install=Vn,n),Rle=Ft(Ele),Ple=at({size:{type:Re([Number,String])},color:{type:String}}),Dle=ve({name:"ElIcon",inheritAttrs:!1}),Lle=ve({...Dle,props:Ple,setup(n){const e=n,t=Ze("icon"),i=N(()=>{const{size:r,color:s}=e;return!r&&!s?{}:{fontSize:Wn(r)?void 0:Ui(r),"--color":s}});return(r,s)=>(F(),ie("i",rn({class:b(t).b(),style:b(i)},r.$attrs),[Ne(r.$slots,"default")],16))}});var kle=ot(Lle,[["__file","icon.vue"]]);const _t=Ft(kle);/*! Element Plus Icons Vue v2.3.1 */var Ole=ve({name:"ArrowDown",__name:"arrow-down",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),du=Ole,Nle=ve({name:"ArrowLeft",__name:"arrow-left",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"})]))}}),Ld=Nle,Ble=ve({name:"ArrowRight",__name:"arrow-right",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),js=Ble,Fle=ve({name:"ArrowUp",__name:"arrow-up",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),wL=Fle,zle=ve({name:"Back",__name:"back",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64"}),le("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312z"})]))}}),Ule=zle,Hle=ve({name:"Calendar",__name:"calendar",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"})]))}}),Vle=Hle,$le=ve({name:"CaretRight",__name:"caret-right",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"})]))}}),BG=$le,Gle=ve({name:"CaretTop",__name:"caret-top",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"})]))}}),Wle=Gle,Kle=ve({name:"Check",__name:"check",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),ob=Kle,qle=ve({name:"CircleCheckFilled",__name:"circle-check-filled",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),Xle=qle,Yle=ve({name:"CircleCheck",__name:"circle-check",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),le("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),xL=Yle,jle=ve({name:"CircleCloseFilled",__name:"circle-close-filled",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),CL=jle,Qle=ve({name:"CircleClose",__name:"circle-close",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),le("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),fu=Qle,Zle=ve({name:"Clock",__name:"clock",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),le("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"}),le("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"})]))}}),FG=Zle,Jle=ve({name:"Close",__name:"close",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),fl=Jle,ece=ve({name:"DArrowLeft",__name:"d-arrow-left",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"})]))}}),kd=ece,tce=ve({name:"DArrowRight",__name:"d-arrow-right",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"})]))}}),Od=tce,nce=ve({name:"DataAnalysis",__name:"data-analysis",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"m665.216 768 110.848 192h-73.856L591.36 768H433.024L322.176 960H248.32l110.848-192H160a32 32 0 0 1-32-32V192H64a32 32 0 0 1 0-64h896a32 32 0 1 1 0 64h-64v544a32 32 0 0 1-32 32zM832 192H192v512h640zM352 448a32 32 0 0 1 32 32v64a32 32 0 0 1-64 0v-64a32 32 0 0 1 32-32m160-64a32 32 0 0 1 32 32v128a32 32 0 0 1-64 0V416a32 32 0 0 1 32-32m160-64a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V352a32 32 0 0 1 32-32"})]))}}),ice=nce,rce=ve({name:"Delete",__name:"delete",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),sce=rce,ace=ve({name:"Document",__name:"document",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),tI=ace,oce=ve({name:"Files",__name:"files",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M128 384v448h768V384zm-32-64h832a32 32 0 0 1 32 32v512a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V352a32 32 0 0 1 32-32m64-128h704v64H160zm96-128h512v64H256z"})]))}}),lce=oce,cce=ve({name:"FullScreen",__name:"full-screen",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),uce=cce,dce=ve({name:"Hide",__name:"hide",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),le("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),fce=dce,hce=ve({name:"InfoFilled",__name:"info-filled",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),ML=hce,pce=ve({name:"Loading",__name:"loading",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),ql=pce,mce=ve({name:"MagicStick",__name:"magic-stick",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M512 64h64v192h-64zm0 576h64v192h-64zM160 480v-64h192v64zm576 0v-64h192v64zM249.856 199.04l45.248-45.184L430.848 289.6 385.6 334.848 249.856 199.104zM657.152 606.4l45.248-45.248 135.744 135.744-45.248 45.248zM114.048 923.2 68.8 877.952l316.8-316.8 45.248 45.248zM702.4 334.848 657.152 289.6l135.744-135.744 45.248 45.248z"})]))}}),vce=mce,gce=ve({name:"Minus",__name:"minus",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),yce=gce,_ce=ve({name:"MoreFilled",__name:"more-filled",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),LB=_ce,bce=ve({name:"More",__name:"more",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),Sce=bce,wce=ve({name:"PictureFilled",__name:"picture-filled",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112M256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384"})]))}}),xce=wce,Cce=ve({name:"Picture",__name:"picture",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M160 160v704h704V160zm-32-64h768a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32"}),le("path",{fill:"currentColor",d:"M384 288q64 0 64 64t-64 64q-64 0-64-64t64-64M185.408 876.992l-50.816-38.912L350.72 556.032a96 96 0 0 1 134.592-17.856l1.856 1.472 122.88 99.136a32 32 0 0 0 44.992-4.864l216-269.888 49.92 39.936-215.808 269.824-.256.32a96 96 0 0 1-135.04 14.464l-122.88-99.072-.64-.512a32 32 0 0 0-44.8 5.952z"})]))}}),Mce=Cce,Tce=ve({name:"Plus",__name:"plus",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),zG=Tce,Ace=ve({name:"QuestionFilled",__name:"question-filled",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"})]))}}),Ece=Ace,Ice=ve({name:"RefreshLeft",__name:"refresh-left",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),Rce=Ice,Pce=ve({name:"RefreshRight",__name:"refresh-right",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})]))}}),Dce=Pce,Lce=ve({name:"ScaleToOriginal",__name:"scale-to-original",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118M512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412M512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512"})]))}}),kce=Lce,Oce=ve({name:"Search",__name:"search",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),Nce=Oce,Bce=ve({name:"SortDown",__name:"sort-down",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0"})]))}}),Fce=Bce,zce=ve({name:"SortUp",__name:"sort-up",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248"})]))}}),Uce=zce,Hce=ve({name:"StarFilled",__name:"star-filled",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"})]))}}),Hb=Hce,Vce=ve({name:"Star",__name:"star",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),$ce=Vce,Gce=ve({name:"SuccessFilled",__name:"success-filled",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),TL=Gce,Wce=ve({name:"View",__name:"view",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),Kce=Wce,qce=ve({name:"WarningFilled",__name:"warning-filled",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),lM=qce,Xce=ve({name:"ZoomIn",__name:"zoom-in",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),UG=Xce,Yce=ve({name:"ZoomOut",__name:"zoom-out",setup(n){return(e,t)=>(F(),ie("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[le("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),jce=Yce;const Zn=Re([String,Object,Function]),AL={Close:fl},EL={Close:fl,SuccessFilled:TL,InfoFilled:ML,WarningFilled:lM,CircleCloseFilled:CL},Nd={success:TL,warning:lM,error:CL,info:ML},cM={validating:ql,success:xL,error:fu},Qce=["light","dark"],Zce=at({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:xv(Nd),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:Qce,default:"light"}}),Jce={close:n=>n instanceof MouseEvent},eue=ve({name:"ElAlert"}),tue=ve({...eue,props:Zce,emits:Jce,setup(n,{emit:e}){const t=n,{Close:i}=EL,r=ur(),s=Ze("alert"),a=X(!0),o=N(()=>Nd[t.type]),l=N(()=>!!(t.description||r.default)),c=u=>{a.value=!1,e("close",u)};return(u,d)=>(F(),He(yr,{name:b(s).b("fade"),persisted:""},{default:ge(()=>[Wt(le("div",{class:$([b(s).b(),b(s).m(u.type),b(s).is("center",u.center),b(s).is(u.effect)]),role:"alert"},[u.showIcon&&b(o)?(F(),He(b(_t),{key:0,class:$([b(s).e("icon"),{[b(s).is("big")]:b(l)}])},{default:ge(()=>[(F(),He(en(b(o))))]),_:1},8,["class"])):Be("v-if",!0),le("div",{class:$(b(s).e("content"))},[u.title||u.$slots.title?(F(),ie("span",{key:0,class:$([b(s).e("title"),{"with-description":b(l)}])},[Ne(u.$slots,"title",{},()=>[Xt(rt(u.title),1)])],2)):Be("v-if",!0),b(l)?(F(),ie("p",{key:1,class:$(b(s).e("description"))},[Ne(u.$slots,"default",{},()=>[Xt(rt(u.description),1)])],2)):Be("v-if",!0),u.closable?(F(),ie(bt,{key:2},[u.closeText?(F(),ie("div",{key:0,class:$([b(s).e("close-btn"),b(s).is("customed")]),onClick:c},rt(u.closeText),3)):(F(),He(b(_t),{key:1,class:$(b(s).e("close-btn")),onClick:c},{default:ge(()=>[oe(b(i))]),_:1},8,["class"]))],64)):Be("v-if",!0)],2)],2),[[Dn,a.value]])]),_:3},8,["name"]))}});var nue=ot(tue,[["__file","alert.vue"]]);const iue=Ft(nue),uM=()=>wn&&/firefox/i.test(window.navigator.userAgent);let Uo;const rue=`
  height:0 !important;
  visibility:hidden !important;
  ${uM()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,sue=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function aue(n){const e=window.getComputedStyle(n),t=e.getPropertyValue("box-sizing"),i=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),r=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:sue.map(a=>`${a}:${e.getPropertyValue(a)}`).join(";"),paddingSize:i,borderSize:r,boxSizing:t}}function kB(n,e=1,t){var i;Uo||(Uo=document.createElement("textarea"),document.body.appendChild(Uo));const{paddingSize:r,borderSize:s,boxSizing:a,contextStyle:o}=aue(n);Uo.setAttribute("style",`${o};${rue}`),Uo.value=n.value||n.placeholder||"";let l=Uo.scrollHeight;const c={};a==="border-box"?l=l+s:a==="content-box"&&(l=l-r),Uo.value="";const u=Uo.scrollHeight-r;if(At(e)){let d=u*e;a==="border-box"&&(d=d+r+s),l=Math.max(d,l),c.minHeight=`${d}px`}if(At(t)){let d=u*t;a==="border-box"&&(d=d+r+s),l=Math.min(d,l)}return c.height=`${l}px`,(i=Uo.parentNode)==null||i.removeChild(Uo),Uo=void 0,c}const Li=n=>n,oue=at({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),Zr=n=>rl(oue,n),IL=at({id:{type:String,default:void 0},size:cr,disabled:Boolean,modelValue:{type:Re([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Re([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Zn},prefixIcon:{type:Zn},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Re([Object,Array,String]),default:()=>Li({})},autofocus:Boolean,rows:{type:Number,default:2},...Zr(["ariaLabel"])}),lue={[Kt]:n=>xt(n),input:n=>xt(n),change:n=>xt(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,mouseleave:n=>n instanceof MouseEvent,mouseenter:n=>n instanceof MouseEvent,keydown:n=>n instanceof Event,compositionstart:n=>n instanceof CompositionEvent,compositionupdate:n=>n instanceof CompositionEvent,compositionend:n=>n instanceof CompositionEvent},cue=["class","style"],uue=/^on[A-Z]/,lb=(n={})=>{const{excludeListeners:e=!1,excludeKeys:t}=n,i=N(()=>((t==null?void 0:t.value)||[]).concat(cue)),r=jt();return N(r?()=>{var s;return e_(Object.entries((s=r.proxy)==null?void 0:s.$attrs).filter(([a])=>!i.value.includes(a)&&!(e&&uue.test(a))))}:()=>({}))},rp=Symbol("formContextKey"),Xl=Symbol("formItemContextKey"),OB={prefix:Math.floor(Math.random()*1e4),current:0},due=Symbol("elIdInjection"),RL=()=>jt()?mt(due,OB):OB,Qr=n=>{const e=RL(),t=tL();return Z2(()=>b(n)||`${t.value}-id-${e.prefix}-${e.current++}`)},fs=()=>{const n=mt(rp,void 0),e=mt(Xl,void 0);return{form:n,formItem:e}},Fo=(n,{formItemContext:e,disableIdGeneration:t,disableIdManagement:i})=>{t||(t=X(!1)),i||(i=X(!1));const r=X();let s;const a=N(()=>{var o;return!!(!(n.label||n.ariaLabel)&&e&&e.inputIds&&((o=e.inputIds)==null?void 0:o.length)<=1)});return Ht(()=>{s=We([zn(n,"id"),t],([o,l])=>{const c=o??(l?void 0:Qr().value);c!==r.value&&(e!=null&&e.removeInputId&&(r.value&&e.removeInputId(r.value),!(i!=null&&i.value)&&!l&&c&&e.addInputId(c)),r.value=c)},{immediate:!0})}),Qd(()=>{s&&s(),e!=null&&e.removeInputId&&r.value&&e.removeInputId(r.value)}),{isLabeledByFormItem:a,inputId:r}},HG=n=>{const e=jt();return N(()=>{var t,i;return(i=(t=e==null?void 0:e.proxy)==null?void 0:t.$props)==null?void 0:i[n]})},tr=(n,e={})=>{const t=X(void 0),i=e.prop?t:HG("size"),r=e.global?t:IG(),s=e.form?{size:void 0}:mt(rp,void 0),a=e.formItem?{size:void 0}:mt(Xl,void 0);return N(()=>i.value||b(n)||(a==null?void 0:a.size)||(s==null?void 0:s.size)||r.value||"")},hs=n=>{const e=HG("disabled"),t=mt(rp,void 0);return N(()=>e.value||b(n)||(t==null?void 0:t.disabled)||!1)};function ef(n,{beforeFocus:e,afterFocus:t,beforeBlur:i,afterBlur:r}={}){const s=jt(),{emit:a}=s,o=Yn(),l=X(!1),c=f=>{Tt(e)&&e(f)||l.value||(l.value=!0,a("focus",f),t==null||t())},u=f=>{var h;Tt(i)&&i(f)||f.relatedTarget&&((h=o.value)!=null&&h.contains(f.relatedTarget))||(l.value=!1,a("blur",f),r==null||r())},d=()=>{var f,h;(f=o.value)!=null&&f.contains(document.activeElement)&&o.value!==document.activeElement||(h=n.value)==null||h.focus()};return We(o,f=>{f&&f.setAttribute("tabindex","-1")}),Kn(o,"focus",c,!0),Kn(o,"blur",u,!0),Kn(o,"click",d,!0),{isFocused:l,wrapperRef:o,handleFocus:c,handleBlur:u}}const fue=n=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(n);function cb({afterComposition:n,emit:e}){const t=X(!1),i=o=>{e==null||e("compositionstart",o),t.value=!0},r=o=>{var l;e==null||e("compositionupdate",o);const c=(l=o.target)==null?void 0:l.value,u=c[c.length-1]||"";t.value=!fue(u)},s=o=>{e==null||e("compositionend",o),t.value&&(t.value=!1,Mt(()=>n(o)))};return{isComposing:t,handleComposition:o=>{o.type==="compositionend"?s(o):r(o)},handleCompositionStart:i,handleCompositionUpdate:r,handleCompositionEnd:s}}function hue(n){let e;function t(){if(n.value==null)return;const{selectionStart:r,selectionEnd:s,value:a}=n.value;if(r==null||s==null)return;const o=a.slice(0,Math.max(0,r)),l=a.slice(Math.max(0,s));e={selectionStart:r,selectionEnd:s,value:a,beforeTxt:o,afterTxt:l}}function i(){if(n.value==null||e==null)return;const{value:r}=n.value,{beforeTxt:s,afterTxt:a,selectionStart:o}=e;if(s==null||a==null||o==null)return;let l=r.length;if(r.endsWith(a))l=r.length-a.length;else if(r.startsWith(s))l=s.length;else{const c=s[o-1],u=r.indexOf(c,o-1);u!==-1&&(l=u+1)}n.value.setSelectionRange(l,l)}return[t,i]}const pue=ve({name:"ElInput",inheritAttrs:!1}),mue=ve({...pue,props:IL,emits:lue,setup(n,{expose:e,emit:t}){const i=n,r=Zd(),s=lb(),a=ur(),o=N(()=>[i.type==="textarea"?m.b():p.b(),p.m(f.value),p.is("disabled",h.value),p.is("exceed",q.value),{[p.b("group")]:a.prepend||a.append,[p.m("prefix")]:a.prefix||i.prefixIcon,[p.m("suffix")]:a.suffix||i.suffixIcon||i.clearable||i.showPassword,[p.bm("suffix","password-clear")]:k.value&&O.value,[p.b("hidden")]:i.type==="hidden"},r.class]),l=N(()=>[p.e("wrapper"),p.is("focus",C.value)]),{form:c,formItem:u}=fs(),{inputId:d}=Fo(i,{formItemContext:u}),f=tr(),h=hs(),p=Ze("input"),m=Ze("textarea"),v=Yn(),g=Yn(),_=X(!1),y=X(!1),S=X(),w=Yn(i.inputStyle),x=N(()=>v.value||g.value),{wrapperRef:T,isFocused:C,handleFocus:M,handleBlur:A}=ef(x,{beforeFocus(){return h.value},afterBlur(){var ae;i.validateEvent&&((ae=u==null?void 0:u.validate)==null||ae.call(u,"blur").catch(xe=>void 0))}}),E=N(()=>{var ae;return(ae=c==null?void 0:c.statusIcon)!=null?ae:!1}),I=N(()=>(u==null?void 0:u.validateState)||""),P=N(()=>I.value&&cM[I.value]),D=N(()=>y.value?Kce:fce),L=N(()=>[r.style]),R=N(()=>[i.inputStyle,w.value,{resize:i.resize}]),B=N(()=>xr(i.modelValue)?"":String(i.modelValue)),k=N(()=>i.clearable&&!h.value&&!i.readonly&&!!B.value&&(C.value||_.value)),O=N(()=>i.showPassword&&!h.value&&!!B.value&&(!!B.value||C.value)),U=N(()=>i.showWordLimit&&!!i.maxlength&&(i.type==="text"||i.type==="textarea")&&!h.value&&!i.readonly&&!i.showPassword),G=N(()=>B.value.length),q=N(()=>!!U.value&&G.value>Number(i.maxlength)),W=N(()=>!!a.suffix||!!i.suffixIcon||k.value||i.showPassword||U.value||!!I.value&&E.value),[Y,J]=hue(v);Ti(g,ae=>{if(me(),!U.value||i.resize!=="both")return;const xe=ae[0],{width:Le}=xe.contentRect;S.value={right:`calc(100% - ${Le+15+6}px)`}});const Z=()=>{const{type:ae,autosize:xe}=i;if(!(!wn||ae!=="textarea"||!g.value))if(xe){const Le=Yt(xe)?xe.minRows:void 0,Xe=Yt(xe)?xe.maxRows:void 0,je=kB(g.value,Le,Xe);w.value={overflowY:"hidden",...je},Mt(()=>{g.value.offsetHeight,w.value=je})}else w.value={minHeight:kB(g.value).minHeight}},me=(ae=>{let xe=!1;return()=>{var Le;if(xe||!i.autosize)return;((Le=g.value)==null?void 0:Le.offsetParent)===null||(ae(),xe=!0)}})(Z),ye=()=>{const ae=x.value,xe=i.formatter?i.formatter(B.value):B.value;!ae||ae.value===xe||(ae.value=xe)},Te=async ae=>{Y();let{value:xe}=ae.target;if(i.formatter&&(xe=i.parser?i.parser(xe):xe),!H.value){if(xe===B.value){ye();return}t(Kt,xe),t("input",xe),await Mt(),ye(),J()}},Ee=ae=>{t("change",ae.target.value)},{isComposing:H,handleCompositionStart:Q,handleCompositionUpdate:j,handleCompositionEnd:Pe}=cb({emit:t,afterComposition:Te}),we=()=>{Y(),y.value=!y.value,setTimeout(J)},De=()=>{var ae;return(ae=x.value)==null?void 0:ae.focus()},Me=()=>{var ae;return(ae=x.value)==null?void 0:ae.blur()},Ae=ae=>{_.value=!1,t("mouseleave",ae)},Fe=ae=>{_.value=!0,t("mouseenter",ae)},ne=ae=>{t("keydown",ae)},z=()=>{var ae;(ae=x.value)==null||ae.select()},K=()=>{t(Kt,""),t("change",""),t("clear"),t("input","")};return We(()=>i.modelValue,()=>{var ae;Mt(()=>Z()),i.validateEvent&&((ae=u==null?void 0:u.validate)==null||ae.call(u,"change").catch(xe=>void 0))}),We(B,()=>ye()),We(()=>i.type,async()=>{await Mt(),ye(),Z()}),Ht(()=>{!i.formatter&&i.parser,ye(),Mt(Z)}),e({input:v,textarea:g,ref:x,textareaStyle:R,autosize:zn(i,"autosize"),isComposing:H,focus:De,blur:Me,select:z,clear:K,resizeTextarea:Z}),(ae,xe)=>(F(),ie("div",{class:$([b(o),{[b(p).bm("group","append")]:ae.$slots.append,[b(p).bm("group","prepend")]:ae.$slots.prepend}]),style:Ct(b(L)),onMouseenter:Fe,onMouseleave:Ae},[Be(" input "),ae.type!=="textarea"?(F(),ie(bt,{key:0},[Be(" prepend slot "),ae.$slots.prepend?(F(),ie("div",{key:0,class:$(b(p).be("group","prepend"))},[Ne(ae.$slots,"prepend")],2)):Be("v-if",!0),le("div",{ref_key:"wrapperRef",ref:T,class:$(b(l))},[Be(" prefix slot "),ae.$slots.prefix||ae.prefixIcon?(F(),ie("span",{key:0,class:$(b(p).e("prefix"))},[le("span",{class:$(b(p).e("prefix-inner"))},[Ne(ae.$slots,"prefix"),ae.prefixIcon?(F(),He(b(_t),{key:0,class:$(b(p).e("icon"))},{default:ge(()=>[(F(),He(en(ae.prefixIcon)))]),_:1},8,["class"])):Be("v-if",!0)],2)],2)):Be("v-if",!0),le("input",rn({id:b(d),ref_key:"input",ref:v,class:b(p).e("inner")},b(s),{minlength:ae.minlength,maxlength:ae.maxlength,type:ae.showPassword?y.value?"text":"password":ae.type,disabled:b(h),readonly:ae.readonly,autocomplete:ae.autocomplete,tabindex:ae.tabindex,"aria-label":ae.ariaLabel,placeholder:ae.placeholder,style:ae.inputStyle,form:ae.form,autofocus:ae.autofocus,role:ae.containerRole,onCompositionstart:b(Q),onCompositionupdate:b(j),onCompositionend:b(Pe),onInput:Te,onChange:Ee,onKeydown:ne}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),Be(" suffix slot "),b(W)?(F(),ie("span",{key:1,class:$(b(p).e("suffix"))},[le("span",{class:$(b(p).e("suffix-inner"))},[!b(k)||!b(O)||!b(U)?(F(),ie(bt,{key:0},[Ne(ae.$slots,"suffix"),ae.suffixIcon?(F(),He(b(_t),{key:0,class:$(b(p).e("icon"))},{default:ge(()=>[(F(),He(en(ae.suffixIcon)))]),_:1},8,["class"])):Be("v-if",!0)],64)):Be("v-if",!0),b(k)?(F(),He(b(_t),{key:1,class:$([b(p).e("icon"),b(p).e("clear")]),onMousedown:Pt(b(Vn),["prevent"]),onClick:K},{default:ge(()=>[oe(b(fu))]),_:1},8,["class","onMousedown"])):Be("v-if",!0),b(O)?(F(),He(b(_t),{key:2,class:$([b(p).e("icon"),b(p).e("password")]),onClick:we},{default:ge(()=>[(F(),He(en(b(D))))]),_:1},8,["class"])):Be("v-if",!0),b(U)?(F(),ie("span",{key:3,class:$(b(p).e("count"))},[le("span",{class:$(b(p).e("count-inner"))},rt(b(G))+" / "+rt(ae.maxlength),3)],2)):Be("v-if",!0),b(I)&&b(P)&&b(E)?(F(),He(b(_t),{key:4,class:$([b(p).e("icon"),b(p).e("validateIcon"),b(p).is("loading",b(I)==="validating")])},{default:ge(()=>[(F(),He(en(b(P))))]),_:1},8,["class"])):Be("v-if",!0)],2)],2)):Be("v-if",!0)],2),Be(" append slot "),ae.$slots.append?(F(),ie("div",{key:1,class:$(b(p).be("group","append"))},[Ne(ae.$slots,"append")],2)):Be("v-if",!0)],64)):(F(),ie(bt,{key:1},[Be(" textarea "),le("textarea",rn({id:b(d),ref_key:"textarea",ref:g,class:[b(m).e("inner"),b(p).is("focus",b(C))]},b(s),{minlength:ae.minlength,maxlength:ae.maxlength,tabindex:ae.tabindex,disabled:b(h),readonly:ae.readonly,autocomplete:ae.autocomplete,style:b(R),"aria-label":ae.ariaLabel,placeholder:ae.placeholder,form:ae.form,autofocus:ae.autofocus,rows:ae.rows,role:ae.containerRole,onCompositionstart:b(Q),onCompositionupdate:b(j),onCompositionend:b(Pe),onInput:Te,onFocus:b(M),onBlur:b(A),onChange:Ee,onKeydown:ne}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),b(U)?(F(),ie("span",{key:0,style:Ct(S.value),class:$(b(p).e("count"))},rt(b(G))+" / "+rt(ae.maxlength),7)):Be("v-if",!0)],64))],38))}});var vue=ot(mue,[["__file","input.vue"]]);const Rs=Ft(vue),mp=4,VG={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},gue=({move:n,size:e,bar:t})=>({[t.size]:e,transform:`translate${t.axis}(${n}%)`}),PL=Symbol("scrollbarContextKey"),yue=at({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),_ue="Thumb",bue=ve({__name:"thumb",props:yue,setup(n){const e=n,t=mt(PL),i=Ze("scrollbar");t||_r(_ue,"can not inject scrollbar context");const r=X(),s=X(),a=X({}),o=X(!1);let l=!1,c=!1,u=wn?document.onselectstart:null;const d=N(()=>VG[e.vertical?"vertical":"horizontal"]),f=N(()=>gue({size:e.size,move:e.move,bar:d.value})),h=N(()=>r.value[d.value.offset]**2/t.wrapElement[d.value.scrollSize]/e.ratio/s.value[d.value.offset]),p=x=>{var T;if(x.stopPropagation(),x.ctrlKey||[1,2].includes(x.button))return;(T=window.getSelection())==null||T.removeAllRanges(),v(x);const C=x.currentTarget;C&&(a.value[d.value.axis]=C[d.value.offset]-(x[d.value.client]-C.getBoundingClientRect()[d.value.direction]))},m=x=>{if(!s.value||!r.value||!t.wrapElement)return;const T=Math.abs(x.target.getBoundingClientRect()[d.value.direction]-x[d.value.client]),C=s.value[d.value.offset]/2,M=(T-C)*100*h.value/r.value[d.value.offset];t.wrapElement[d.value.scroll]=M*t.wrapElement[d.value.scrollSize]/100},v=x=>{x.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",g),document.addEventListener("mouseup",_),u=document.onselectstart,document.onselectstart=()=>!1},g=x=>{if(!r.value||!s.value||l===!1)return;const T=a.value[d.value.axis];if(!T)return;const C=(r.value.getBoundingClientRect()[d.value.direction]-x[d.value.client])*-1,M=s.value[d.value.offset]-T,A=(C-M)*100*h.value/r.value[d.value.offset];t.wrapElement[d.value.scroll]=A*t.wrapElement[d.value.scrollSize]/100},_=()=>{l=!1,a.value[d.value.axis]=0,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",_),w(),c&&(o.value=!1)},y=()=>{c=!1,o.value=!!e.size},S=()=>{c=!0,o.value=l};Un(()=>{w(),document.removeEventListener("mouseup",_)});const w=()=>{document.onselectstart!==u&&(document.onselectstart=u)};return Kn(zn(t,"scrollbarElement"),"mousemove",y),Kn(zn(t,"scrollbarElement"),"mouseleave",S),(x,T)=>(F(),He(yr,{name:b(i).b("fade"),persisted:""},{default:ge(()=>[Wt(le("div",{ref_key:"instance",ref:r,class:$([b(i).e("bar"),b(i).is(b(d).key)]),onMousedown:m},[le("div",{ref_key:"thumb",ref:s,class:$(b(i).e("thumb")),style:Ct(b(f)),onMousedown:p},null,38)],34),[[Dn,x.always||o.value]])]),_:1},8,["name"]))}});var NB=ot(bue,[["__file","thumb.vue"]]);const Sue=at({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),wue=ve({__name:"bar",props:Sue,setup(n,{expose:e}){const t=n,i=mt(PL),r=X(0),s=X(0),a=X(""),o=X(""),l=X(1),c=X(1);return e({handleScroll:f=>{if(f){const h=f.offsetHeight-mp,p=f.offsetWidth-mp;s.value=f.scrollTop*100/h*l.value,r.value=f.scrollLeft*100/p*c.value}},update:()=>{const f=i==null?void 0:i.wrapElement;if(!f)return;const h=f.offsetHeight-mp,p=f.offsetWidth-mp,m=h**2/f.scrollHeight,v=p**2/f.scrollWidth,g=Math.max(m,t.minSize),_=Math.max(v,t.minSize);l.value=m/(h-m)/(g/(h-g)),c.value=v/(p-v)/(_/(p-_)),o.value=g+mp<h?`${g}px`:"",a.value=_+mp<p?`${_}px`:""}}),(f,h)=>(F(),ie(bt,null,[oe(NB,{move:r.value,ratio:c.value,size:a.value,always:f.always},null,8,["move","ratio","size","always"]),oe(NB,{move:s.value,ratio:l.value,size:o.value,vertical:"",always:f.always},null,8,["move","ratio","size","always"])],64))}});var xue=ot(wue,[["__file","bar.vue"]]);const Cue=at({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Re([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...Zr(["ariaLabel","ariaOrientation"])}),Mue={scroll:({scrollTop:n,scrollLeft:e})=>[n,e].every(At)},Tue="ElScrollbar",Aue=ve({name:Tue}),Eue=ve({...Aue,props:Cue,emits:Mue,setup(n,{expose:e,emit:t}){const i=n,r=Ze("scrollbar");let s,a,o=0,l=0;const c=X(),u=X(),d=X(),f=X(),h=N(()=>{const w={};return i.height&&(w.height=Ui(i.height)),i.maxHeight&&(w.maxHeight=Ui(i.maxHeight)),[i.wrapStyle,w]}),p=N(()=>[i.wrapClass,r.e("wrap"),{[r.em("wrap","hidden-default")]:!i.native}]),m=N(()=>[r.e("view"),i.viewClass]),v=()=>{var w;u.value&&((w=f.value)==null||w.handleScroll(u.value),o=u.value.scrollTop,l=u.value.scrollLeft,t("scroll",{scrollTop:u.value.scrollTop,scrollLeft:u.value.scrollLeft}))};function g(w,x){Yt(w)?u.value.scrollTo(w):At(w)&&At(x)&&u.value.scrollTo(w,x)}const _=w=>{At(w)&&(u.value.scrollTop=w)},y=w=>{At(w)&&(u.value.scrollLeft=w)},S=()=>{var w;(w=f.value)==null||w.update()};return We(()=>i.noresize,w=>{w?(s==null||s(),a==null||a()):({stop:s}=Ti(d,S),a=Kn("resize",S))},{immediate:!0}),We(()=>[i.maxHeight,i.height],()=>{i.native||Mt(()=>{var w;S(),u.value&&((w=f.value)==null||w.handleScroll(u.value))})}),un(PL,Nn({scrollbarElement:c,wrapElement:u})),KD(()=>{u.value&&(u.value.scrollTop=o,u.value.scrollLeft=l)}),Ht(()=>{i.native||Mt(()=>{S()})}),Bo(()=>S()),e({wrapRef:u,update:S,scrollTo:g,setScrollTop:_,setScrollLeft:y,handleScroll:v}),(w,x)=>(F(),ie("div",{ref_key:"scrollbarRef",ref:c,class:$(b(r).b())},[le("div",{ref_key:"wrapRef",ref:u,class:$(b(p)),style:Ct(b(h)),tabindex:w.tabindex,onScroll:v},[(F(),He(en(w.tag),{id:w.id,ref_key:"resizeRef",ref:d,class:$(b(m)),style:Ct(w.viewStyle),role:w.role,"aria-label":w.ariaLabel,"aria-orientation":w.ariaOrientation},{default:ge(()=>[Ne(w.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),w.native?Be("v-if",!0):(F(),He(xue,{key:0,ref_key:"barRef",ref:f,always:w.always,"min-size":w.minSize},null,8,["always","min-size"]))],2))}});var Iue=ot(Eue,[["__file","scrollbar.vue"]]);const ic=Ft(Iue),DL=Symbol("popper"),$G=Symbol("popperContent"),Rue=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],GG=at({role:{type:String,values:Rue,default:"tooltip"}}),Pue=ve({name:"ElPopper",inheritAttrs:!1}),Due=ve({...Pue,props:GG,setup(n,{expose:e}){const t=n,i=X(),r=X(),s=X(),a=X(),o=N(()=>t.role),l={triggerRef:i,popperInstanceRef:r,contentRef:s,referenceRef:a,role:o};return e(l),un(DL,l),(c,u)=>Ne(c.$slots,"default")}});var Lue=ot(Due,[["__file","popper.vue"]]);const WG=at({arrowOffset:{type:Number,default:5}}),kue=ve({name:"ElPopperArrow",inheritAttrs:!1}),Oue=ve({...kue,props:WG,setup(n,{expose:e}){const t=n,i=Ze("popper"),{arrowOffset:r,arrowRef:s,arrowStyle:a}=mt($G,void 0);return We(()=>t.arrowOffset,o=>{r.value=o}),Un(()=>{s.value=void 0}),e({arrowRef:s}),(o,l)=>(F(),ie("span",{ref_key:"arrowRef",ref:s,class:$(b(i).e("arrow")),style:Ct(b(a)),"data-popper-arrow":""},null,6))}});var Nue=ot(Oue,[["__file","arrow.vue"]]);const KG=at({virtualRef:{type:Re(Object)},virtualTriggering:Boolean,onMouseenter:{type:Re(Function)},onMouseleave:{type:Re(Function)},onClick:{type:Re(Function)},onKeydown:{type:Re(Function)},onFocus:{type:Re(Function)},onBlur:{type:Re(Function)},onContextmenu:{type:Re(Function)},id:String,open:Boolean}),qG=Symbol("elForwardRef"),Bue=n=>{un(qG,{setForwardRef:t=>{n.value=t}})},Fue=n=>({mounted(e){n(e)},updated(e){n(e)},unmounted(){n(null)}}),zue='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',Uue=n=>getComputedStyle(n).position==="fixed"?!1:n.offsetParent!==null,BB=n=>Array.from(n.querySelectorAll(zue)).filter(e=>nI(e)&&Uue(e)),nI=n=>{if(n.tabIndex>0||n.tabIndex===0&&n.getAttribute("tabIndex")!==null)return!0;if(n.tabIndex<0||n.hasAttribute("disabled")||n.getAttribute("aria-disabled")==="true")return!1;switch(n.nodeName){case"A":return!!n.href&&n.rel!=="ignore";case"INPUT":return!(n.type==="hidden"||n.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},a1=function(n,e,...t){let i;e.includes("mouse")||e.includes("click")?i="MouseEvents":e.includes("key")?i="KeyboardEvent":i="HTMLEvents";const r=document.createEvent(i);return r.initEvent(e,...t),n.dispatchEvent(r),n},XG=n=>!n.getAttribute("aria-owns"),YG=(n,e,t)=>{const{parentNode:i}=n;if(!i)return null;const r=i.querySelectorAll(t),s=Array.prototype.indexOf.call(r,n);return r[s+e]||null},o1=n=>{n&&(n.focus(),!XG(n)&&n.click())},Hue="ElOnlyChild",jG=ve({name:Hue,setup(n,{slots:e,attrs:t}){var i;const r=mt(qG),s=Fue((i=r==null?void 0:r.setForwardRef)!=null?i:Vn);return()=>{var a;const o=(a=e.default)==null?void 0:a.call(e,t);if(!o||o.length>1)return null;const l=QG(o);return l?Wt(Qc(l,t),[[s]]):null}}});function QG(n){if(!n)return null;const e=n;for(const t of e){if(Yt(t))switch(t.type){case Ds:continue;case lg:case"svg":return FB(t);case bt:return QG(t.children);default:return t}return FB(t)}return null}function FB(n){const e=Ze("only-child");return oe("span",{class:e.e("content")},[n])}const Vue=ve({name:"ElPopperTrigger",inheritAttrs:!1}),$ue=ve({...Vue,props:KG,setup(n,{expose:e}){const t=n,{role:i,triggerRef:r}=mt(DL,void 0);Bue(r);const s=N(()=>o.value?t.id:void 0),a=N(()=>{if(i&&i.value==="tooltip")return t.open&&t.id?t.id:void 0}),o=N(()=>{if(i&&i.value!=="tooltip")return i.value}),l=N(()=>o.value?`${t.open}`:void 0);let c;const u=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return Ht(()=>{We(()=>t.virtualRef,d=>{d&&(r.value=Xs(d))},{immediate:!0}),We(r,(d,f)=>{c==null||c(),c=void 0,za(d)&&(u.forEach(h=>{var p;const m=t[h];m&&(d.addEventListener(h.slice(2).toLowerCase(),m),(p=f==null?void 0:f.removeEventListener)==null||p.call(f,h.slice(2).toLowerCase(),m))}),nI(d)&&(c=We([s,a,o,l],h=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((p,m)=>{xr(h[m])?d.removeAttribute(p):d.setAttribute(p,h[m])})},{immediate:!0}))),za(f)&&nI(f)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(h=>f.removeAttribute(h))},{immediate:!0})}),Un(()=>{if(c==null||c(),c=void 0,r.value&&za(r.value)){const d=r.value;u.forEach(f=>{const h=t[f];h&&d.removeEventListener(f.slice(2).toLowerCase(),h)}),r.value=void 0}}),e({triggerRef:r}),(d,f)=>d.virtualTriggering?Be("v-if",!0):(F(),He(b(jG),rn({key:0},d.$attrs,{"aria-controls":b(s),"aria-describedby":b(a),"aria-expanded":b(l),"aria-haspopup":b(o)}),{default:ge(()=>[Ne(d.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var Gue=ot($ue,[["__file","trigger.vue"]]);const hT="focus-trap.focus-after-trapped",pT="focus-trap.focus-after-released",Wue="focus-trap.focusout-prevented",zB={cancelable:!0,bubbles:!1},Kue={cancelable:!0,bubbles:!1},UB="focusAfterTrapped",HB="focusAfterReleased",LL=Symbol("elFocusTrap"),kL=X(),dM=X(0),OL=X(0);let Vb=0;const ZG=n=>{const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0||i===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e},VB=(n,e)=>{for(const t of n)if(!que(t,e))return t},que=(n,e)=>{if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1},Xue=n=>{const e=ZG(n),t=VB(e,n),i=VB(e.reverse(),n);return[t,i]},Yue=n=>n instanceof HTMLInputElement&&"select"in n,Yu=(n,e)=>{if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),OL.value=window.performance.now(),n!==t&&Yue(n)&&e&&n.select()}};function $B(n,e){const t=[...n],i=n.indexOf(e);return i!==-1&&t.splice(i,1),t}const jue=()=>{let n=[];return{push:i=>{const r=n[0];r&&i!==r&&r.pause(),n=$B(n,i),n.unshift(i)},remove:i=>{var r,s;n=$B(n,i),(s=(r=n[0])==null?void 0:r.resume)==null||s.call(r)}}},Que=(n,e=!1)=>{const t=document.activeElement;for(const i of n)if(Yu(i,e),document.activeElement!==t)return},GB=jue(),Zue=()=>dM.value>OL.value,$b=()=>{kL.value="pointer",dM.value=window.performance.now()},WB=()=>{kL.value="keyboard",dM.value=window.performance.now()},Jue=()=>(Ht(()=>{Vb===0&&(document.addEventListener("mousedown",$b),document.addEventListener("touchstart",$b),document.addEventListener("keydown",WB)),Vb++}),Un(()=>{Vb--,Vb<=0&&(document.removeEventListener("mousedown",$b),document.removeEventListener("touchstart",$b),document.removeEventListener("keydown",WB))}),{focusReason:kL,lastUserFocusTimestamp:dM,lastAutomatedFocusTimestamp:OL}),Gb=n=>new CustomEvent(Wue,{...Kue,detail:n}),ut={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"};let Sm=[];const KB=n=>{n.code===ut.esc&&Sm.forEach(e=>e(n))},ede=n=>{Ht(()=>{Sm.length===0&&document.addEventListener("keydown",KB),wn&&Sm.push(n)}),Un(()=>{Sm=Sm.filter(e=>e!==n),Sm.length===0&&wn&&document.removeEventListener("keydown",KB)})},tde=ve({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[UB,HB,"focusin","focusout","focusout-prevented","release-requested"],setup(n,{emit:e}){const t=X();let i,r;const{focusReason:s}=Jue();ede(p=>{n.trapped&&!a.paused&&e("release-requested",p)});const a={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},o=p=>{if(!n.loop&&!n.trapped||a.paused)return;const{code:m,altKey:v,ctrlKey:g,metaKey:_,currentTarget:y,shiftKey:S}=p,{loop:w}=n,x=m===ut.tab&&!v&&!g&&!_,T=document.activeElement;if(x&&T){const C=y,[M,A]=Xue(C);if(M&&A){if(!S&&T===A){const I=Gb({focusReason:s.value});e("focusout-prevented",I),I.defaultPrevented||(p.preventDefault(),w&&Yu(M,!0))}else if(S&&[M,C].includes(T)){const I=Gb({focusReason:s.value});e("focusout-prevented",I),I.defaultPrevented||(p.preventDefault(),w&&Yu(A,!0))}}else if(T===C){const I=Gb({focusReason:s.value});e("focusout-prevented",I),I.defaultPrevented||p.preventDefault()}}};un(LL,{focusTrapRef:t,onKeydown:o}),We(()=>n.focusTrapEl,p=>{p&&(t.value=p)},{immediate:!0}),We([t],([p],[m])=>{p&&(p.addEventListener("keydown",o),p.addEventListener("focusin",u),p.addEventListener("focusout",d)),m&&(m.removeEventListener("keydown",o),m.removeEventListener("focusin",u),m.removeEventListener("focusout",d))});const l=p=>{e(UB,p)},c=p=>e(HB,p),u=p=>{const m=b(t);if(!m)return;const v=p.target,g=p.relatedTarget,_=v&&m.contains(v);n.trapped||g&&m.contains(g)||(i=g),_&&e("focusin",p),!a.paused&&n.trapped&&(_?r=v:Yu(r,!0))},d=p=>{const m=b(t);if(!(a.paused||!m))if(n.trapped){const v=p.relatedTarget;!xr(v)&&!m.contains(v)&&setTimeout(()=>{if(!a.paused&&n.trapped){const g=Gb({focusReason:s.value});e("focusout-prevented",g),g.defaultPrevented||Yu(r,!0)}},0)}else{const v=p.target;v&&m.contains(v)||e("focusout",p)}};async function f(){await Mt();const p=b(t);if(p){GB.push(a);const m=p.contains(document.activeElement)?i:document.activeElement;if(i=m,!p.contains(m)){const g=new Event(hT,zB);p.addEventListener(hT,l),p.dispatchEvent(g),g.defaultPrevented||Mt(()=>{let _=n.focusStartEl;xt(_)||(Yu(_),document.activeElement!==_&&(_="first")),_==="first"&&Que(ZG(p),!0),(document.activeElement===m||_==="container")&&Yu(p)})}}}function h(){const p=b(t);if(p){p.removeEventListener(hT,l);const m=new CustomEvent(pT,{...zB,detail:{focusReason:s.value}});p.addEventListener(pT,c),p.dispatchEvent(m),!m.defaultPrevented&&(s.value=="keyboard"||!Zue()||p.contains(document.activeElement))&&Yu(i??document.body),p.removeEventListener(pT,c),GB.remove(a)}}return Ht(()=>{n.trapped&&f(),We(()=>n.trapped,p=>{p?f():h()})}),Un(()=>{n.trapped&&h(),t.value&&(t.value.removeEventListener("keydown",o),t.value.removeEventListener("focusin",u),t.value.removeEventListener("focusout",d),t.value=void 0)}),{onKeydown:o}}});function nde(n,e,t,i,r,s){return Ne(n.$slots,"default",{handleKeydown:n.onKeydown})}var mg=ot(tde,[["render",nde],["__file","focus-trap.vue"]]),ma="top",Do="bottom",Lo="right",va="left",NL="auto",ub=[ma,Do,Lo,va],Cv="start",t_="end",ide="clippingParents",JG="viewport",Xg="popper",rde="reference",qB=ub.reduce(function(n,e){return n.concat([e+"-"+Cv,e+"-"+t_])},[]),hu=[].concat(ub,[NL]).reduce(function(n,e){return n.concat([e,e+"-"+Cv,e+"-"+t_])},[]),sde="beforeRead",ade="read",ode="afterRead",lde="beforeMain",cde="main",ude="afterMain",dde="beforeWrite",fde="write",hde="afterWrite",pde=[sde,ade,ode,lde,cde,ude,dde,fde,hde];function Yl(n){return n?(n.nodeName||"").toLowerCase():null}function ml(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Mv(n){var e=ml(n).Element;return n instanceof e||n instanceof Element}function Mo(n){var e=ml(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function BL(n){if(typeof ShadowRoot>"u")return!1;var e=ml(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function mde(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},r=e.attributes[t]||{},s=e.elements[t];!Mo(s)||!Yl(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(a){var o=r[a];o===!1?s.removeAttribute(a):s.setAttribute(a,o===!0?"":o)}))})}function vde(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},a=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),o=a.reduce(function(l,c){return l[c]="",l},{});!Mo(r)||!Yl(r)||(Object.assign(r.style,o),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}var eW={name:"applyStyles",enabled:!0,phase:"write",fn:mde,effect:vde,requires:["computeStyles"]};function Vl(n){return n.split("-")[0]}var Ch=Math.max,fx=Math.min,Tv=Math.round;function Av(n,e){e===void 0&&(e=!1);var t=n.getBoundingClientRect(),i=1,r=1;if(Mo(n)&&e){var s=n.offsetHeight,a=n.offsetWidth;a>0&&(i=Tv(t.width)/a||1),s>0&&(r=Tv(t.height)/s||1)}return{width:t.width/i,height:t.height/r,top:t.top/r,right:t.right/i,bottom:t.bottom/r,left:t.left/i,x:t.left/i,y:t.top/r}}function FL(n){var e=Av(n),t=n.offsetWidth,i=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:i}}function tW(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&BL(t)){var i=e;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Zc(n){return ml(n).getComputedStyle(n)}function gde(n){return["table","td","th"].indexOf(Yl(n))>=0}function tf(n){return((Mv(n)?n.ownerDocument:n.document)||window.document).documentElement}function fM(n){return Yl(n)==="html"?n:n.assignedSlot||n.parentNode||(BL(n)?n.host:null)||tf(n)}function XB(n){return!Mo(n)||Zc(n).position==="fixed"?null:n.offsetParent}function yde(n){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&Mo(n)){var i=Zc(n);if(i.position==="fixed")return null}var r=fM(n);for(BL(r)&&(r=r.host);Mo(r)&&["html","body"].indexOf(Yl(r))<0;){var s=Zc(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function db(n){for(var e=ml(n),t=XB(n);t&&gde(t)&&Zc(t).position==="static";)t=XB(t);return t&&(Yl(t)==="html"||Yl(t)==="body"&&Zc(t).position==="static")?e:t||yde(n)||e}function zL(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function ny(n,e,t){return Ch(n,fx(e,t))}function _de(n,e,t){var i=ny(n,e,t);return i>t?t:i}function nW(){return{top:0,right:0,bottom:0,left:0}}function iW(n){return Object.assign({},nW(),n)}function rW(n,e){return e.reduce(function(t,i){return t[i]=n,t},{})}var bde=function(n,e){return n=typeof n=="function"?n(Object.assign({},e.rects,{placement:e.placement})):n,iW(typeof n!="number"?n:rW(n,ub))};function Sde(n){var e,t=n.state,i=n.name,r=n.options,s=t.elements.arrow,a=t.modifiersData.popperOffsets,o=Vl(t.placement),l=zL(o),c=[va,Lo].indexOf(o)>=0,u=c?"height":"width";if(!(!s||!a)){var d=bde(r.padding,t),f=FL(s),h=l==="y"?ma:va,p=l==="y"?Do:Lo,m=t.rects.reference[u]+t.rects.reference[l]-a[l]-t.rects.popper[u],v=a[l]-t.rects.reference[l],g=db(s),_=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0,y=m/2-v/2,S=d[h],w=_-f[u]-d[p],x=_/2-f[u]/2+y,T=ny(S,x,w),C=l;t.modifiersData[i]=(e={},e[C]=T,e.centerOffset=T-x,e)}}function wde(n){var e=n.state,t=n.options,i=t.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||!tW(e.elements.popper,r)||(e.elements.arrow=r))}var xde={name:"arrow",enabled:!0,phase:"main",fn:Sde,effect:wde,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ev(n){return n.split("-")[1]}var Cde={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Mde(n){var e=n.x,t=n.y,i=window,r=i.devicePixelRatio||1;return{x:Tv(e*r)/r||0,y:Tv(t*r)/r||0}}function YB(n){var e,t=n.popper,i=n.popperRect,r=n.placement,s=n.variation,a=n.offsets,o=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,d=n.isFixed,f=a.x,h=f===void 0?0:f,p=a.y,m=p===void 0?0:p,v=typeof u=="function"?u({x:h,y:m}):{x:h,y:m};h=v.x,m=v.y;var g=a.hasOwnProperty("x"),_=a.hasOwnProperty("y"),y=va,S=ma,w=window;if(c){var x=db(t),T="clientHeight",C="clientWidth";if(x===ml(t)&&(x=tf(t),Zc(x).position!=="static"&&o==="absolute"&&(T="scrollHeight",C="scrollWidth")),x=x,r===ma||(r===va||r===Lo)&&s===t_){S=Do;var M=d&&x===w&&w.visualViewport?w.visualViewport.height:x[T];m-=M-i.height,m*=l?1:-1}if(r===va||(r===ma||r===Do)&&s===t_){y=Lo;var A=d&&x===w&&w.visualViewport?w.visualViewport.width:x[C];h-=A-i.width,h*=l?1:-1}}var E=Object.assign({position:o},c&&Cde),I=u===!0?Mde({x:h,y:m}):{x:h,y:m};if(h=I.x,m=I.y,l){var P;return Object.assign({},E,(P={},P[S]=_?"0":"",P[y]=g?"0":"",P.transform=(w.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",P))}return Object.assign({},E,(e={},e[S]=_?m+"px":"",e[y]=g?h+"px":"",e.transform="",e))}function Tde(n){var e=n.state,t=n.options,i=t.gpuAcceleration,r=i===void 0?!0:i,s=t.adaptive,a=s===void 0?!0:s,o=t.roundOffsets,l=o===void 0?!0:o,c={placement:Vl(e.placement),variation:Ev(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,YB(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,YB(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var sW={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Tde,data:{}},Wb={passive:!0};function Ade(n){var e=n.state,t=n.instance,i=n.options,r=i.scroll,s=r===void 0?!0:r,a=i.resize,o=a===void 0?!0:a,l=ml(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",t.update,Wb)}),o&&l.addEventListener("resize",t.update,Wb),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",t.update,Wb)}),o&&l.removeEventListener("resize",t.update,Wb)}}var aW={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ade,data:{}},Ede={left:"right",right:"left",bottom:"top",top:"bottom"};function l1(n){return n.replace(/left|right|bottom|top/g,function(e){return Ede[e]})}var Ide={start:"end",end:"start"};function jB(n){return n.replace(/start|end/g,function(e){return Ide[e]})}function UL(n){var e=ml(n),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function HL(n){return Av(tf(n)).left+UL(n).scrollLeft}function Rde(n){var e=ml(n),t=tf(n),i=e.visualViewport,r=t.clientWidth,s=t.clientHeight,a=0,o=0;return i&&(r=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=i.offsetLeft,o=i.offsetTop)),{width:r,height:s,x:a+HL(n),y:o}}function Pde(n){var e,t=tf(n),i=UL(n),r=(e=n.ownerDocument)==null?void 0:e.body,s=Ch(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=Ch(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-i.scrollLeft+HL(n),l=-i.scrollTop;return Zc(r||t).direction==="rtl"&&(o+=Ch(t.clientWidth,r?r.clientWidth:0)-s),{width:s,height:a,x:o,y:l}}function VL(n){var e=Zc(n),t=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+r+i)}function oW(n){return["html","body","#document"].indexOf(Yl(n))>=0?n.ownerDocument.body:Mo(n)&&VL(n)?n:oW(fM(n))}function iy(n,e){var t;e===void 0&&(e=[]);var i=oW(n),r=i===((t=n.ownerDocument)==null?void 0:t.body),s=ml(i),a=r?[s].concat(s.visualViewport||[],VL(i)?i:[]):i,o=e.concat(a);return r?o:o.concat(iy(fM(a)))}function iI(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function Dde(n){var e=Av(n);return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function QB(n,e){return e===JG?iI(Rde(n)):Mv(e)?Dde(e):iI(Pde(tf(n)))}function Lde(n){var e=iy(fM(n)),t=["absolute","fixed"].indexOf(Zc(n).position)>=0,i=t&&Mo(n)?db(n):n;return Mv(i)?e.filter(function(r){return Mv(r)&&tW(r,i)&&Yl(r)!=="body"}):[]}function kde(n,e,t){var i=e==="clippingParents"?Lde(n):[].concat(e),r=[].concat(i,[t]),s=r[0],a=r.reduce(function(o,l){var c=QB(n,l);return o.top=Ch(c.top,o.top),o.right=fx(c.right,o.right),o.bottom=fx(c.bottom,o.bottom),o.left=Ch(c.left,o.left),o},QB(n,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function lW(n){var e=n.reference,t=n.element,i=n.placement,r=i?Vl(i):null,s=i?Ev(i):null,a=e.x+e.width/2-t.width/2,o=e.y+e.height/2-t.height/2,l;switch(r){case ma:l={x:a,y:e.y-t.height};break;case Do:l={x:a,y:e.y+e.height};break;case Lo:l={x:e.x+e.width,y:o};break;case va:l={x:e.x-t.width,y:o};break;default:l={x:e.x,y:e.y}}var c=r?zL(r):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Cv:l[c]=l[c]-(e[u]/2-t[u]/2);break;case t_:l[c]=l[c]+(e[u]/2-t[u]/2);break}}return l}function n_(n,e){e===void 0&&(e={});var t=e,i=t.placement,r=i===void 0?n.placement:i,s=t.boundary,a=s===void 0?ide:s,o=t.rootBoundary,l=o===void 0?JG:o,c=t.elementContext,u=c===void 0?Xg:c,d=t.altBoundary,f=d===void 0?!1:d,h=t.padding,p=h===void 0?0:h,m=iW(typeof p!="number"?p:rW(p,ub)),v=u===Xg?rde:Xg,g=n.rects.popper,_=n.elements[f?v:u],y=kde(Mv(_)?_:_.contextElement||tf(n.elements.popper),a,l),S=Av(n.elements.reference),w=lW({reference:S,element:g,strategy:"absolute",placement:r}),x=iI(Object.assign({},g,w)),T=u===Xg?x:S,C={top:y.top-T.top+m.top,bottom:T.bottom-y.bottom+m.bottom,left:y.left-T.left+m.left,right:T.right-y.right+m.right},M=n.modifiersData.offset;if(u===Xg&&M){var A=M[r];Object.keys(C).forEach(function(E){var I=[Lo,Do].indexOf(E)>=0?1:-1,P=[ma,Do].indexOf(E)>=0?"y":"x";C[E]+=A[P]*I})}return C}function Ode(n,e){e===void 0&&(e={});var t=e,i=t.placement,r=t.boundary,s=t.rootBoundary,a=t.padding,o=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?hu:l,u=Ev(i),d=u?o?qB:qB.filter(function(p){return Ev(p)===u}):ub,f=d.filter(function(p){return c.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,m){return p[m]=n_(n,{placement:m,boundary:r,rootBoundary:s,padding:a})[Vl(m)],p},{});return Object.keys(h).sort(function(p,m){return h[p]-h[m]})}function Nde(n){if(Vl(n)===NL)return[];var e=l1(n);return[jB(n),e,jB(e)]}function Bde(n){var e=n.state,t=n.options,i=n.name;if(!e.modifiersData[i]._skip){for(var r=t.mainAxis,s=r===void 0?!0:r,a=t.altAxis,o=a===void 0?!0:a,l=t.fallbackPlacements,c=t.padding,u=t.boundary,d=t.rootBoundary,f=t.altBoundary,h=t.flipVariations,p=h===void 0?!0:h,m=t.allowedAutoPlacements,v=e.options.placement,g=Vl(v),_=g===v,y=l||(_||!p?[l1(v)]:Nde(v)),S=[v].concat(y).reduce(function(Y,J){return Y.concat(Vl(J)===NL?Ode(e,{placement:J,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):J)},[]),w=e.rects.reference,x=e.rects.popper,T=new Map,C=!0,M=S[0],A=0;A<S.length;A++){var E=S[A],I=Vl(E),P=Ev(E)===Cv,D=[ma,Do].indexOf(I)>=0,L=D?"width":"height",R=n_(e,{placement:E,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),B=D?P?Lo:va:P?Do:ma;w[L]>x[L]&&(B=l1(B));var k=l1(B),O=[];if(s&&O.push(R[I]<=0),o&&O.push(R[B]<=0,R[k]<=0),O.every(function(Y){return Y})){M=E,C=!1;break}T.set(E,O)}if(C)for(var U=p?3:1,G=function(Y){var J=S.find(function(Z){var ee=T.get(Z);if(ee)return ee.slice(0,Y).every(function(me){return me})});if(J)return M=J,"break"},q=U;q>0;q--){var W=G(q);if(W==="break")break}e.placement!==M&&(e.modifiersData[i]._skip=!0,e.placement=M,e.reset=!0)}}var Fde={name:"flip",enabled:!0,phase:"main",fn:Bde,requiresIfExists:["offset"],data:{_skip:!1}};function ZB(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function JB(n){return[ma,Lo,Do,va].some(function(e){return n[e]>=0})}function zde(n){var e=n.state,t=n.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,a=n_(e,{elementContext:"reference"}),o=n_(e,{altBoundary:!0}),l=ZB(a,i),c=ZB(o,r,s),u=JB(l),d=JB(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var Ude={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:zde};function Hde(n,e,t){var i=Vl(n),r=[va,ma].indexOf(i)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,a=s[0],o=s[1];return a=a||0,o=(o||0)*r,[va,Lo].indexOf(i)>=0?{x:o,y:a}:{x:a,y:o}}function Vde(n){var e=n.state,t=n.options,i=n.name,r=t.offset,s=r===void 0?[0,0]:r,a=hu.reduce(function(u,d){return u[d]=Hde(d,e.rects,s),u},{}),o=a[e.placement],l=o.x,c=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=a}var $de={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Vde};function Gde(n){var e=n.state,t=n.name;e.modifiersData[t]=lW({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var cW={name:"popperOffsets",enabled:!0,phase:"read",fn:Gde,data:{}};function Wde(n){return n==="x"?"y":"x"}function Kde(n){var e=n.state,t=n.options,i=n.name,r=t.mainAxis,s=r===void 0?!0:r,a=t.altAxis,o=a===void 0?!1:a,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,d=t.padding,f=t.tether,h=f===void 0?!0:f,p=t.tetherOffset,m=p===void 0?0:p,v=n_(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),g=Vl(e.placement),_=Ev(e.placement),y=!_,S=zL(g),w=Wde(S),x=e.modifiersData.popperOffsets,T=e.rects.reference,C=e.rects.popper,M=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,A=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),E=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(x){if(s){var P,D=S==="y"?ma:va,L=S==="y"?Do:Lo,R=S==="y"?"height":"width",B=x[S],k=B+v[D],O=B-v[L],U=h?-C[R]/2:0,G=_===Cv?T[R]:C[R],q=_===Cv?-C[R]:-T[R],W=e.elements.arrow,Y=h&&W?FL(W):{width:0,height:0},J=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:nW(),Z=J[D],ee=J[L],me=ny(0,T[R],Y[R]),ye=y?T[R]/2-U-me-Z-A.mainAxis:G-me-Z-A.mainAxis,Te=y?-T[R]/2+U+me+ee+A.mainAxis:q+me+ee+A.mainAxis,Ee=e.elements.arrow&&db(e.elements.arrow),H=Ee?S==="y"?Ee.clientTop||0:Ee.clientLeft||0:0,Q=(P=E==null?void 0:E[S])!=null?P:0,j=B+ye-Q-H,Pe=B+Te-Q,we=ny(h?fx(k,j):k,B,h?Ch(O,Pe):O);x[S]=we,I[S]=we-B}if(o){var De,Me=S==="x"?ma:va,Ae=S==="x"?Do:Lo,Fe=x[w],ne=w==="y"?"height":"width",z=Fe+v[Me],K=Fe-v[Ae],ae=[ma,va].indexOf(g)!==-1,xe=(De=E==null?void 0:E[w])!=null?De:0,Le=ae?z:Fe-T[ne]-C[ne]-xe+A.altAxis,Xe=ae?Fe+T[ne]+C[ne]-xe-A.altAxis:K,je=h&&ae?_de(Le,Fe,Xe):ny(h?Le:z,Fe,h?Xe:K);x[w]=je,I[w]=je-Fe}e.modifiersData[i]=I}}var qde={name:"preventOverflow",enabled:!0,phase:"main",fn:Kde,requiresIfExists:["offset"]};function Xde(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function Yde(n){return n===ml(n)||!Mo(n)?UL(n):Xde(n)}function jde(n){var e=n.getBoundingClientRect(),t=Tv(e.width)/n.offsetWidth||1,i=Tv(e.height)/n.offsetHeight||1;return t!==1||i!==1}function Qde(n,e,t){t===void 0&&(t=!1);var i=Mo(e),r=Mo(e)&&jde(e),s=tf(e),a=Av(n,r),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((Yl(e)!=="body"||VL(s))&&(o=Yde(e)),Mo(e)?(l=Av(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=HL(s))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function Zde(n){var e=new Map,t=new Set,i=[];n.forEach(function(s){e.set(s.name,s)});function r(s){t.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(o){if(!t.has(o)){var l=e.get(o);l&&r(l)}}),i.push(s)}return n.forEach(function(s){t.has(s.name)||r(s)}),i}function Jde(n){var e=Zde(n);return pde.reduce(function(t,i){return t.concat(e.filter(function(r){return r.phase===i}))},[])}function efe(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function tfe(n){var e=n.reduce(function(t,i){var r=t[i.name];return t[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var eF={placement:"bottom",modifiers:[],strategy:"absolute"};function tF(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function $L(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,i=t===void 0?[]:t,r=e.defaultOptions,s=r===void 0?eF:r;return function(a,o,l){l===void 0&&(l=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},eF,s),modifiersData:{},elements:{reference:a,popper:o},attributes:{},styles:{}},u=[],d=!1,f={state:c,setOptions:function(m){var v=typeof m=="function"?m(c.options):m;p(),c.options=Object.assign({},s,c.options,v),c.scrollParents={reference:Mv(a)?iy(a):a.contextElement?iy(a.contextElement):[],popper:iy(o)};var g=Jde(tfe([].concat(i,c.options.modifiers)));return c.orderedModifiers=g.filter(function(_){return _.enabled}),h(),f.update()},forceUpdate:function(){if(!d){var m=c.elements,v=m.reference,g=m.popper;if(tF(v,g)){c.rects={reference:Qde(v,db(g),c.options.strategy==="fixed"),popper:FL(g)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(C){return c.modifiersData[C.name]=Object.assign({},C.data)});for(var _=0;_<c.orderedModifiers.length;_++){if(c.reset===!0){c.reset=!1,_=-1;continue}var y=c.orderedModifiers[_],S=y.fn,w=y.options,x=w===void 0?{}:w,T=y.name;typeof S=="function"&&(c=S({state:c,options:x,name:T,instance:f})||c)}}}},update:efe(function(){return new Promise(function(m){f.forceUpdate(),m(c)})}),destroy:function(){p(),d=!0}};if(!tF(a,o))return f;f.setOptions(l).then(function(m){!d&&l.onFirstUpdate&&l.onFirstUpdate(m)});function h(){c.orderedModifiers.forEach(function(m){var v=m.name,g=m.options,_=g===void 0?{}:g,y=m.effect;if(typeof y=="function"){var S=y({state:c,name:v,instance:f,options:_}),w=function(){};u.push(S||w)}})}function p(){u.forEach(function(m){return m()}),u=[]}return f}}$L();var nfe=[aW,cW,sW,eW];$L({defaultModifiers:nfe});var ife=[aW,cW,sW,eW,$de,Fde,qde,xde,Ude],rfe=$L({defaultModifiers:ife});const sfe=["fixed","absolute"],afe=at({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Re(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:hu,default:"bottom"},popperOptions:{type:Re(Object),default:()=>({})},strategy:{type:String,values:sfe,default:"absolute"}}),uW=at({...afe,id:String,style:{type:Re([String,Array,Object])},className:{type:Re([String,Array,Object])},effect:{type:Re(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:Re([String,Array,Object])},popperStyle:{type:Re([String,Array,Object])},referenceEl:{type:Re(Object)},triggerTargetEl:{type:Re(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...Zr(["ariaLabel"])}),ofe={mouseenter:n=>n instanceof MouseEvent,mouseleave:n=>n instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},lfe=(n,e)=>{const t=X(!1),i=X();return{focusStartRef:i,trapped:t,onFocusAfterReleased:c=>{var u;((u=c.detail)==null?void 0:u.focusReason)!=="pointer"&&(i.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:c=>{n.visible&&!t.value&&(c.target&&(i.value=c.target),t.value=!0)},onFocusoutPrevented:c=>{n.trapping||(c.detail.focusReason==="pointer"&&c.preventDefault(),t.value=!1)},onReleaseRequested:()=>{t.value=!1,e("close")}}},cfe=(n,e=[])=>{const{placement:t,strategy:i,popperOptions:r}=n,s={placement:t,strategy:i,...r,modifiers:[...dfe(n),...e]};return ffe(s,r==null?void 0:r.modifiers),s},ufe=n=>{if(wn)return Xs(n)};function dfe(n){const{offset:e,gpuAcceleration:t,fallbackPlacements:i}=n;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:i}},{name:"computeStyles",options:{gpuAcceleration:t}}]}function ffe(n,e){e&&(n.modifiers=[...n.modifiers,...e??[]])}const hfe=(n,e,t={})=>{const i={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const c=pfe(l);Object.assign(a.value,c)},requires:["computeStyles"]},r=N(()=>{const{onFirstUpdate:l,placement:c,strategy:u,modifiers:d}=b(t);return{onFirstUpdate:l,placement:c||"bottom",strategy:u||"absolute",modifiers:[...d||[],i,{name:"applyStyles",enabled:!1}]}}),s=Yn(),a=X({styles:{popper:{position:b(r).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),o=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return We(r,l=>{const c=b(s);c&&c.setOptions(l)},{deep:!0}),We([n,e],([l,c])=>{o(),!(!l||!c)&&(s.value=rfe(l,c,b(r)))}),Un(()=>{o()}),{state:N(()=>{var l;return{...((l=b(s))==null?void 0:l.state)||{}}}),styles:N(()=>b(a).styles),attributes:N(()=>b(a).attributes),update:()=>{var l;return(l=b(s))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=b(s))==null?void 0:l.forceUpdate()},instanceRef:N(()=>b(s))}};function pfe(n){const e=Object.keys(n.elements),t=e_(e.map(r=>[r,n.styles[r]||{}])),i=e_(e.map(r=>[r,n.attributes[r]]));return{styles:t,attributes:i}}const mfe=0,vfe=n=>{const{popperInstanceRef:e,contentRef:t,triggerRef:i,role:r}=mt(DL,void 0),s=X(),a=X(),o=N(()=>({name:"eventListeners",enabled:!!n.visible})),l=N(()=>{var g;const _=b(s),y=(g=b(a))!=null?g:mfe;return{name:"arrow",enabled:!vG(_),options:{element:_,padding:y}}}),c=N(()=>({onFirstUpdate:()=>{p()},...cfe(n,[b(l),b(o)])})),u=N(()=>ufe(n.referenceEl)||b(i)),{attributes:d,state:f,styles:h,update:p,forceUpdate:m,instanceRef:v}=hfe(u,t,c);return We(v,g=>e.value=g),Ht(()=>{We(()=>{var g;return(g=b(u))==null?void 0:g.getBoundingClientRect()},()=>{p()})}),{attributes:d,arrowRef:s,contentRef:t,instanceRef:v,state:f,styles:h,role:r,forceUpdate:m,update:p}},gfe=(n,{attributes:e,styles:t,role:i})=>{const{nextZIndex:r}=hg(),s=Ze("popper"),a=N(()=>b(e).popper),o=X(At(n.zIndex)?n.zIndex:r()),l=N(()=>[s.b(),s.is("pure",n.pure),s.is(n.effect),n.popperClass]),c=N(()=>[{zIndex:b(o)},b(t).popper,n.popperStyle||{}]),u=N(()=>i.value==="dialog"?"false":void 0),d=N(()=>b(t).arrow||{});return{ariaModal:u,arrowStyle:d,contentAttrs:a,contentClass:l,contentStyle:c,contentZIndex:o,updateZIndex:()=>{o.value=At(n.zIndex)?n.zIndex:r()}}},yfe=ve({name:"ElPopperContent"}),_fe=ve({...yfe,props:uW,emits:ofe,setup(n,{expose:e,emit:t}){const i=n,{focusStartRef:r,trapped:s,onFocusAfterReleased:a,onFocusAfterTrapped:o,onFocusInTrap:l,onFocusoutPrevented:c,onReleaseRequested:u}=lfe(i,t),{attributes:d,arrowRef:f,contentRef:h,styles:p,instanceRef:m,role:v,update:g}=vfe(i),{ariaModal:_,arrowStyle:y,contentAttrs:S,contentClass:w,contentStyle:x,updateZIndex:T}=gfe(i,{styles:p,attributes:d,role:v}),C=mt(Xl,void 0),M=X();un($G,{arrowStyle:y,arrowRef:f,arrowOffset:M}),C&&un(Xl,{...C,addInputId:Vn,removeInputId:Vn});let A;const E=(P=!0)=>{g(),P&&T()},I=()=>{E(!1),i.visible&&i.focusOnShow?s.value=!0:i.visible===!1&&(s.value=!1)};return Ht(()=>{We(()=>i.triggerTargetEl,(P,D)=>{A==null||A(),A=void 0;const L=b(P||h.value),R=b(D||h.value);za(L)&&(A=We([v,()=>i.ariaLabel,_,()=>i.id],B=>{["role","aria-label","aria-modal","id"].forEach((k,O)=>{xr(B[O])?L.removeAttribute(k):L.setAttribute(k,B[O])})},{immediate:!0})),R!==L&&za(R)&&["role","aria-label","aria-modal","id"].forEach(B=>{R.removeAttribute(B)})},{immediate:!0}),We(()=>i.visible,I,{immediate:!0})}),Un(()=>{A==null||A(),A=void 0}),e({popperContentRef:h,popperInstanceRef:m,updatePopper:E,contentStyle:x}),(P,D)=>(F(),ie("div",rn({ref_key:"contentRef",ref:h},b(S),{style:b(x),class:b(w),tabindex:"-1",onMouseenter:L=>P.$emit("mouseenter",L),onMouseleave:L=>P.$emit("mouseleave",L)}),[oe(b(mg),{trapped:b(s),"trap-on-focus-in":!0,"focus-trap-el":b(h),"focus-start-el":b(r),onFocusAfterTrapped:b(o),onFocusAfterReleased:b(a),onFocusin:b(l),onFocusoutPrevented:b(c),onReleaseRequested:b(u)},{default:ge(()=>[Ne(P.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var bfe=ot(_fe,[["__file","content.vue"]]);const dW=Ft(Lue),hM=Symbol("elTooltip");function nF(){let n;const e=(i,r)=>{t(),n=window.setTimeout(i,r)},t=()=>window.clearTimeout(n);return ab(()=>t()),{registerTimeout:e,cancelTimeout:t}}const Sfe=at({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),wfe=({showAfter:n,hideAfter:e,autoClose:t,open:i,close:r})=>{const{registerTimeout:s}=nF(),{registerTimeout:a,cancelTimeout:o}=nF();return{onOpen:u=>{s(()=>{i(u);const d=b(t);At(d)&&d>0&&a(()=>{r(u)},d)},b(n))},onClose:u=>{o(),s(()=>{r(u)},b(e))}}},Rr=at({...Sfe,...uW,appendTo:{type:Re([String,Object])},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:Re(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...Zr(["ariaLabel"])}),i_=at({...KG,disabled:Boolean,trigger:{type:Re([String,Array]),default:"hover"},triggerKeys:{type:Re(Array),default:()=>[ut.enter,ut.numpadEnter,ut.space]}}),xfe=pl({type:Re(Boolean),default:null}),Cfe=pl({type:Re(Function)}),fW=n=>{const e=`update:${n}`,t=`onUpdate:${n}`,i=[e],r={[n]:xfe,[t]:Cfe};return{useModelToggle:({indicator:a,toggleReason:o,shouldHideWhenRouteChanges:l,shouldProceed:c,onShow:u,onHide:d})=>{const f=jt(),{emit:h}=f,p=f.props,m=N(()=>Tt(p[t])),v=N(()=>p[n]===null),g=T=>{a.value!==!0&&(a.value=!0,o&&(o.value=T),Tt(u)&&u(T))},_=T=>{a.value!==!1&&(a.value=!1,o&&(o.value=T),Tt(d)&&d(T))},y=T=>{if(p.disabled===!0||Tt(c)&&!c())return;const C=m.value&&wn;C&&h(e,!0),(v.value||!C)&&g(T)},S=T=>{if(p.disabled===!0||!wn)return;const C=m.value&&wn;C&&h(e,!1),(v.value||!C)&&_(T)},w=T=>{ai(T)&&(p.disabled&&T?m.value&&h(e,!1):a.value!==T&&(T?g():_()))},x=()=>{a.value?S():y()};return We(()=>p[n],w),l&&f.appContext.config.globalProperties.$route!==void 0&&We(()=>({...f.proxy.$route}),()=>{l.value&&a.value&&S()}),Ht(()=>{w(p[n])}),{hide:S,show:y,toggle:x,hasUpdateHandler:m}},useModelToggleProps:r,useModelToggleEmits:i}};fW("modelValue");const{useModelToggleProps:Mfe,useModelToggleEmits:Tfe,useModelToggle:Afe}=fW("visible"),Efe=at({...GG,...Mfe,...Rr,...i_,...WG,showArrow:{type:Boolean,default:!0}}),Ife=[...Tfe,"before-show","before-hide","show","hide","open","close"],Rfe=(n,e)=>nt(n)?n.includes(e):n===e,vp=(n,e,t)=>i=>{Rfe(b(n),e)&&t(i)},zi=(n,e,{checkForDefaultPrevented:t=!0}={})=>r=>{const s=n==null?void 0:n(r);if(t===!1||!s)return e==null?void 0:e(r)},iF=n=>e=>e.pointerType==="mouse"?n(e):void 0,Pfe=ve({name:"ElTooltipTrigger"}),Dfe=ve({...Pfe,props:i_,setup(n,{expose:e}){const t=n,i=Ze("tooltip"),{controlled:r,id:s,open:a,onOpen:o,onClose:l,onToggle:c}=mt(hM,void 0),u=X(null),d=()=>{if(b(r)||t.disabled)return!0},f=zn(t,"trigger"),h=zi(d,vp(f,"hover",o)),p=zi(d,vp(f,"hover",l)),m=zi(d,vp(f,"click",S=>{S.button===0&&c(S)})),v=zi(d,vp(f,"focus",o)),g=zi(d,vp(f,"focus",l)),_=zi(d,vp(f,"contextmenu",S=>{S.preventDefault(),c(S)})),y=zi(d,S=>{const{code:w}=S;t.triggerKeys.includes(w)&&(S.preventDefault(),c(S))});return e({triggerRef:u}),(S,w)=>(F(),He(b(Gue),{id:b(s),"virtual-ref":S.virtualRef,open:b(a),"virtual-triggering":S.virtualTriggering,class:$(b(i).e("trigger")),onBlur:b(g),onClick:b(m),onContextmenu:b(_),onFocus:b(v),onMouseenter:b(h),onMouseleave:b(p),onKeydown:b(y)},{default:ge(()=>[Ne(S.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var Lfe=ot(Dfe,[["__file","trigger.vue"]]);const kfe=at({to:{type:Re([String,Object]),required:!0},disabled:Boolean}),Ofe=ve({__name:"teleport",props:kfe,setup(n){return(e,t)=>e.disabled?Ne(e.$slots,"default",{key:0}):(F(),He(Aee,{key:1,to:e.to},[Ne(e.$slots,"default")],8,["to"]))}});var Nfe=ot(Ofe,[["__file","teleport.vue"]]);const vg=Ft(Nfe),hW=()=>{const n=tL(),e=RL(),t=N(()=>`${n.value}-popper-container-${e.prefix}`),i=N(()=>`#${t.value}`);return{id:t,selector:i}},Bfe=n=>{const e=document.createElement("div");return e.id=n,document.body.appendChild(e),e},Ffe=()=>{const{id:n,selector:e}=hW();return KC(()=>{wn&&(document.body.querySelector(e.value)||Bfe(n.value))}),{id:n,selector:e}},zfe=ve({name:"ElTooltipContent",inheritAttrs:!1}),Ufe=ve({...zfe,props:Rr,setup(n,{expose:e}){const t=n,{selector:i}=hW(),r=Ze("tooltip"),s=X();let a;const{controlled:o,id:l,open:c,trigger:u,onClose:d,onOpen:f,onShow:h,onHide:p,onBeforeShow:m,onBeforeHide:v}=mt(hM,void 0),g=N(()=>t.transition||`${r.namespace.value}-fade-in-linear`),_=N(()=>t.persistent);Un(()=>{a==null||a()});const y=N(()=>b(_)?!0:b(c)),S=N(()=>t.disabled?!1:b(c)),w=N(()=>t.appendTo||i.value),x=N(()=>{var R;return(R=t.style)!=null?R:{}}),T=X(!0),C=()=>{p(),T.value=!0},M=()=>{if(b(o))return!0},A=zi(M,()=>{t.enterable&&b(u)==="hover"&&f()}),E=zi(M,()=>{b(u)==="hover"&&d()}),I=()=>{var R,B;(B=(R=s.value)==null?void 0:R.updatePopper)==null||B.call(R),m==null||m()},P=()=>{v==null||v()},D=()=>{h(),a=yL(N(()=>{var R;return(R=s.value)==null?void 0:R.popperContentRef}),()=>{if(b(o))return;b(u)!=="hover"&&d()})},L=()=>{t.virtualTriggering||d()};return We(()=>b(c),R=>{R?T.value=!1:a==null||a()},{flush:"post"}),We(()=>t.content,()=>{var R,B;(B=(R=s.value)==null?void 0:R.updatePopper)==null||B.call(R)}),e({contentRef:s}),(R,B)=>(F(),He(b(vg),{disabled:!R.teleported,to:b(w)},{default:ge(()=>[oe(yr,{name:b(g),onAfterLeave:C,onBeforeEnter:I,onAfterEnter:D,onBeforeLeave:P},{default:ge(()=>[b(y)?Wt((F(),He(b(bfe),rn({key:0,id:b(l),ref_key:"contentRef",ref:s},R.$attrs,{"aria-label":R.ariaLabel,"aria-hidden":T.value,"boundaries-padding":R.boundariesPadding,"fallback-placements":R.fallbackPlacements,"gpu-acceleration":R.gpuAcceleration,offset:R.offset,placement:R.placement,"popper-options":R.popperOptions,strategy:R.strategy,effect:R.effect,enterable:R.enterable,pure:R.pure,"popper-class":R.popperClass,"popper-style":[R.popperStyle,b(x)],"reference-el":R.referenceEl,"trigger-target-el":R.triggerTargetEl,visible:b(S),"z-index":R.zIndex,onMouseenter:b(A),onMouseleave:b(E),onBlur:L,onClose:b(d)}),{default:ge(()=>[Ne(R.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[Dn,b(S)]]):Be("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var Hfe=ot(Ufe,[["__file","content.vue"]]);const Vfe=ve({name:"ElTooltip"}),$fe=ve({...Vfe,props:Efe,emits:Ife,setup(n,{expose:e,emit:t}){const i=n;Ffe();const r=Qr(),s=X(),a=X(),o=()=>{var g;const _=b(s);_&&((g=_.popperInstanceRef)==null||g.update())},l=X(!1),c=X(),{show:u,hide:d,hasUpdateHandler:f}=Afe({indicator:l,toggleReason:c}),{onOpen:h,onClose:p}=wfe({showAfter:zn(i,"showAfter"),hideAfter:zn(i,"hideAfter"),autoClose:zn(i,"autoClose"),open:u,close:d}),m=N(()=>ai(i.visible)&&!f.value);un(hM,{controlled:m,id:r,open:og(l),trigger:zn(i,"trigger"),onOpen:g=>{h(g)},onClose:g=>{p(g)},onToggle:g=>{b(l)?p(g):h(g)},onShow:()=>{t("show",c.value)},onHide:()=>{t("hide",c.value)},onBeforeShow:()=>{t("before-show",c.value)},onBeforeHide:()=>{t("before-hide",c.value)},updatePopper:o}),We(()=>i.disabled,g=>{g&&l.value&&(l.value=!1)});const v=g=>{var _,y;const S=(y=(_=a.value)==null?void 0:_.contentRef)==null?void 0:y.popperContentRef,w=(g==null?void 0:g.relatedTarget)||document.activeElement;return S&&S.contains(w)};return J6(()=>l.value&&d()),e({popperRef:s,contentRef:a,isFocusInsideContent:v,updatePopper:o,onOpen:h,onClose:p,hide:d}),(g,_)=>(F(),He(b(dW),{ref_key:"popperRef",ref:s,role:g.role},{default:ge(()=>[oe(Lfe,{disabled:g.disabled,trigger:g.trigger,"trigger-keys":g.triggerKeys,"virtual-ref":g.virtualRef,"virtual-triggering":g.virtualTriggering},{default:ge(()=>[g.$slots.default?Ne(g.$slots,"default",{key:0}):Be("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),oe(Hfe,{ref_key:"contentRef",ref:a,"aria-label":g.ariaLabel,"boundaries-padding":g.boundariesPadding,content:g.content,disabled:g.disabled,effect:g.effect,enterable:g.enterable,"fallback-placements":g.fallbackPlacements,"hide-after":g.hideAfter,"gpu-acceleration":g.gpuAcceleration,offset:g.offset,persistent:g.persistent,"popper-class":g.popperClass,"popper-style":g.popperStyle,placement:g.placement,"popper-options":g.popperOptions,pure:g.pure,"raw-content":g.rawContent,"reference-el":g.referenceEl,"trigger-target-el":g.triggerTargetEl,"show-after":g.showAfter,strategy:g.strategy,teleported:g.teleported,transition:g.transition,"virtual-triggering":g.virtualTriggering,"z-index":g.zIndex,"append-to":g.appendTo},{default:ge(()=>[Ne(g.$slots,"content",{},()=>[g.rawContent?(F(),ie("span",{key:0,innerHTML:g.content},null,8,["innerHTML"])):(F(),ie("span",{key:1},rt(g.content),1))]),g.showArrow?(F(),He(b(Nue),{key:0,"arrow-offset":g.arrowOffset},null,8,["arrow-offset"])):Be("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Gfe=ot($fe,[["__file","tooltip.vue"]]);const us=Ft(Gfe),Wfe=at({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:Re(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:Re([Function,Array]),default:Vn},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},teleported:Rr.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String,...Zr(["ariaLabel"])}),Kfe={[Kt]:n=>xt(n),[ls]:n=>xt(n),[jn]:n=>xt(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,select:n=>Yt(n)},pW="ElAutocomplete",qfe=ve({name:pW,inheritAttrs:!1}),Xfe=ve({...qfe,props:Wfe,emits:Kfe,setup(n,{expose:e,emit:t}){const i=n,r=lb(),s=Zd(),a=hs(),o=Ze("autocomplete"),l=X(),c=X(),u=X(),d=X();let f=!1,h=!1;const p=X([]),m=X(-1),v=X(""),g=X(!1),_=X(!1),y=X(!1),S=Qr(),w=N(()=>s.style),x=N(()=>(p.value.length>0||y.value)&&g.value),T=N(()=>!i.hideLoading&&y.value),C=N(()=>l.value?Array.from(l.value.$el.querySelectorAll("input")):[]),M=()=>{x.value&&(v.value=`${l.value.$el.offsetWidth}px`)},A=()=>{m.value=-1},E=async ee=>{if(_.value)return;const me=ye=>{y.value=!1,!_.value&&(nt(ye)?(p.value=ye,m.value=i.highlightFirstItem?0:-1):_r(pW,"autocomplete suggestions must be an array"))};if(y.value=!0,nt(i.fetchSuggestions))me(i.fetchSuggestions);else{const ye=await i.fetchSuggestions(ee,me);nt(ye)&&me(ye)}},I=wa(E,i.debounce),P=ee=>{const me=!!ee;if(t(ls,ee),t(Kt,ee),_.value=!1,g.value||(g.value=me),!i.triggerOnFocus&&!ee){_.value=!0,p.value=[];return}I(ee)},D=ee=>{var me;a.value||(((me=ee.target)==null?void 0:me.tagName)!=="INPUT"||C.value.includes(document.activeElement))&&(g.value=!0)},L=ee=>{t(jn,ee)},R=ee=>{h?h=!1:(g.value=!0,t("focus",ee),i.triggerOnFocus&&!f&&I(String(i.modelValue)))},B=ee=>{setTimeout(()=>{var me;if((me=u.value)!=null&&me.isFocusInsideContent()){h=!0;return}g.value&&G(),t("blur",ee)})},k=()=>{g.value=!1,t(Kt,""),t("clear")},O=async()=>{x.value&&m.value>=0&&m.value<p.value.length?Y(p.value[m.value]):i.selectWhenUnmatched&&(t("select",{value:i.modelValue}),p.value=[],m.value=-1)},U=ee=>{x.value&&(ee.preventDefault(),ee.stopPropagation(),G())},G=()=>{g.value=!1},q=()=>{var ee;(ee=l.value)==null||ee.focus()},W=()=>{var ee;(ee=l.value)==null||ee.blur()},Y=async ee=>{t(ls,ee[i.valueKey]),t(Kt,ee[i.valueKey]),t("select",ee),p.value=[],m.value=-1},J=ee=>{if(!x.value||y.value)return;if(ee<0){m.value=-1;return}ee>=p.value.length&&(ee=p.value.length-1);const me=c.value.querySelector(`.${o.be("suggestion","wrap")}`),Te=me.querySelectorAll(`.${o.be("suggestion","list")} li`)[ee],Ee=me.scrollTop,{offsetTop:H,scrollHeight:Q}=Te;H+Q>Ee+me.clientHeight&&(me.scrollTop+=Q),H<Ee&&(me.scrollTop-=Q),m.value=ee,l.value.ref.setAttribute("aria-activedescendant",`${S.value}-item-${m.value}`)},Z=yL(d,()=>{x.value&&G()});return Un(()=>{Z==null||Z()}),Ht(()=>{l.value.ref.setAttribute("role","textbox"),l.value.ref.setAttribute("aria-autocomplete","list"),l.value.ref.setAttribute("aria-controls","id"),l.value.ref.setAttribute("aria-activedescendant",`${S.value}-item-${m.value}`),f=l.value.ref.hasAttribute("readonly")}),e({highlightedIndex:m,activated:g,loading:y,inputRef:l,popperRef:u,suggestions:p,handleSelect:Y,handleKeyEnter:O,focus:q,blur:W,close:G,highlight:J,getData:E}),(ee,me)=>(F(),He(b(us),{ref_key:"popperRef",ref:u,visible:b(x),placement:ee.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[b(o).e("popper"),ee.popperClass],teleported:ee.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${b(o).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:M,onHide:A},{content:ge(()=>[le("div",{ref_key:"regionRef",ref:c,class:$([b(o).b("suggestion"),b(o).is("loading",b(T))]),style:Ct({[ee.fitInputWidth?"width":"minWidth"]:v.value,outline:"none"}),role:"region"},[oe(b(ic),{id:b(S),tag:"ul","wrap-class":b(o).be("suggestion","wrap"),"view-class":b(o).be("suggestion","list"),role:"listbox"},{default:ge(()=>[b(T)?(F(),ie("li",{key:0},[Ne(ee.$slots,"loading",{},()=>[oe(b(_t),{class:$(b(o).is("loading"))},{default:ge(()=>[oe(b(ql))]),_:1},8,["class"])])])):(F(!0),ie(bt,{key:1},sn(p.value,(ye,Te)=>(F(),ie("li",{id:`${b(S)}-item-${Te}`,key:Te,class:$({highlighted:m.value===Te}),role:"option","aria-selected":m.value===Te,onClick:Ee=>Y(ye)},[Ne(ee.$slots,"default",{item:ye},()=>[Xt(rt(ye[ee.valueKey]),1)])],10,["id","aria-selected","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:ge(()=>[le("div",{ref_key:"listboxRef",ref:d,class:$([b(o).b(),ee.$attrs.class]),style:Ct(b(w)),role:"combobox","aria-haspopup":"listbox","aria-expanded":b(x),"aria-owns":b(S)},[oe(b(Rs),rn({ref_key:"inputRef",ref:l},b(r),{clearable:ee.clearable,disabled:b(a),name:ee.name,"model-value":ee.modelValue,"aria-label":ee.ariaLabel,onInput:P,onChange:L,onFocus:R,onBlur:B,onClear:k,onKeydown:[ri(Pt(ye=>J(m.value-1),["prevent"]),["up"]),ri(Pt(ye=>J(m.value+1),["prevent"]),["down"]),ri(O,["enter"]),ri(G,["tab"]),ri(U,["esc"])],onMousedown:D}),Ro({_:2},[ee.$slots.prepend?{name:"prepend",fn:ge(()=>[Ne(ee.$slots,"prepend")])}:void 0,ee.$slots.append?{name:"append",fn:ge(()=>[Ne(ee.$slots,"append")])}:void 0,ee.$slots.prefix?{name:"prefix",fn:ge(()=>[Ne(ee.$slots,"prefix")])}:void 0,ee.$slots.suffix?{name:"suffix",fn:ge(()=>[Ne(ee.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","aria-label","onKeydown"])],14,["aria-expanded","aria-owns"])]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var Yfe=ot(Xfe,[["__file","autocomplete.vue"]]);const jfe=Ft(Yfe),Qfe=at({size:{type:[Number,String],values:nc,default:"",validator:n=>At(n)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:Zn},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:Re(String),default:"cover"}}),Zfe={error:n=>n instanceof Event},Jfe=ve({name:"ElAvatar"}),ehe=ve({...Jfe,props:Qfe,emits:Zfe,setup(n,{emit:e}){const t=n,i=Ze("avatar"),r=X(!1),s=N(()=>{const{size:c,icon:u,shape:d}=t,f=[i.b()];return xt(c)&&f.push(i.m(c)),u&&f.push(i.m("icon")),d&&f.push(i.m(d)),f}),a=N(()=>{const{size:c}=t;return At(c)?i.cssVarBlock({size:Ui(c)||""}):void 0}),o=N(()=>({objectFit:t.fit}));We(()=>t.src,()=>r.value=!1);function l(c){r.value=!0,e("error",c)}return(c,u)=>(F(),ie("span",{class:$(b(s)),style:Ct(b(a))},[(c.src||c.srcSet)&&!r.value?(F(),ie("img",{key:0,src:c.src,alt:c.alt,srcset:c.srcSet,style:Ct(b(o)),onError:l},null,44,["src","alt","srcset"])):c.icon?(F(),He(b(_t),{key:1},{default:ge(()=>[(F(),He(en(c.icon)))]),_:1})):Ne(c.$slots,"default",{key:2})],6))}});var the=ot(ehe,[["__file","avatar.vue"]]);const nhe=Ft(the),ihe={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},rhe={click:n=>n instanceof MouseEvent},she=(n,e,t)=>{const i=Yn(),r=Yn(),s=X(!1),a=()=>{i.value&&(s.value=i.value.scrollTop>=n.visibilityHeight)},o=c=>{var u;(u=i.value)==null||u.scrollTo({top:0,behavior:"smooth"}),e("click",c)},l=bG(a,300,!0);return Kn(r,"scroll",l),Ht(()=>{var c;r.value=document,i.value=document.documentElement,n.target&&(i.value=(c=document.querySelector(n.target))!=null?c:void 0,i.value||_r(t,`target does not exist: ${n.target}`),r.value=i.value),a()}),{visible:s,handleClick:o}},mW="ElBacktop",ahe=ve({name:mW}),ohe=ve({...ahe,props:ihe,emits:rhe,setup(n,{emit:e}){const t=n,i=Ze("backtop"),{handleClick:r,visible:s}=she(t,e,mW),a=N(()=>({right:`${t.right}px`,bottom:`${t.bottom}px`}));return(o,l)=>(F(),He(yr,{name:`${b(i).namespace.value}-fade-in`},{default:ge(()=>[b(s)?(F(),ie("div",{key:0,style:Ct(b(a)),class:$(b(i).b()),onClick:Pt(b(r),["stop"])},[Ne(o.$slots,"default",{},()=>[oe(b(_t),{class:$(b(i).e("icon"))},{default:ge(()=>[oe(b(Wle))]),_:1},8,["class"])])],14,["onClick"])):Be("v-if",!0)]),_:3},8,["name"]))}});var lhe=ot(ohe,[["__file","backtop.vue"]]);const che=Ft(lhe),uhe=at({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:Re([String,Object,Array])},offset:{type:Re(Array),default:[0,0]},badgeClass:{type:String}}),dhe=ve({name:"ElBadge"}),fhe=ve({...dhe,props:uhe,setup(n,{expose:e}){const t=n,i=Ze("badge"),r=N(()=>t.isDot?"":At(t.value)&&At(t.max)?t.max<t.value?`${t.max}+`:`${t.value}`:`${t.value}`),s=N(()=>{var a,o,l,c,u;return[{backgroundColor:t.color,marginRight:Ui(-((o=(a=t.offset)==null?void 0:a[0])!=null?o:0)),marginTop:Ui((c=(l=t.offset)==null?void 0:l[1])!=null?c:0)},(u=t.badgeStyle)!=null?u:{}]});return e({content:r}),(a,o)=>(F(),ie("div",{class:$(b(i).b())},[Ne(a.$slots,"default"),oe(yr,{name:`${b(i).namespace.value}-zoom-in-center`,persisted:""},{default:ge(()=>[Wt(le("sup",{class:$([b(i).e("content"),b(i).em("content",a.type),b(i).is("fixed",!!a.$slots.default),b(i).is("dot",a.isDot),b(i).is("hide-zero",!a.showZero&&t.value===0),a.badgeClass]),style:Ct(b(s))},[Ne(a.$slots,"content",{value:b(r)},()=>[Xt(rt(b(r)),1)])],6),[[Dn,!a.hidden&&(b(r)||a.isDot||a.$slots.content)]])]),_:3},8,["name"])],2))}});var hhe=ot(fhe,[["__file","badge.vue"]]);const vW=Ft(hhe),gW=Symbol("breadcrumbKey"),phe=at({separator:{type:String,default:"/"},separatorIcon:{type:Zn}}),mhe=ve({name:"ElBreadcrumb"}),vhe=ve({...mhe,props:phe,setup(n){const e=n,{t}=xn(),i=Ze("breadcrumb"),r=X();return un(gW,e),Ht(()=>{const s=r.value.querySelectorAll(`.${i.e("item")}`);s.length&&s[s.length-1].setAttribute("aria-current","page")}),(s,a)=>(F(),ie("div",{ref_key:"breadcrumb",ref:r,class:$(b(i).b()),"aria-label":b(t)("el.breadcrumb.label"),role:"navigation"},[Ne(s.$slots,"default")],10,["aria-label"]))}});var ghe=ot(vhe,[["__file","breadcrumb.vue"]]);const yhe=at({to:{type:Re([String,Object]),default:""},replace:Boolean}),_he=ve({name:"ElBreadcrumbItem"}),bhe=ve({..._he,props:yhe,setup(n){const e=n,t=jt(),i=mt(gW,void 0),r=Ze("breadcrumb"),s=t.appContext.config.globalProperties.$router,a=X(),o=()=>{!e.to||!s||(e.replace?s.replace(e.to):s.push(e.to))};return(l,c)=>{var u,d;return F(),ie("span",{class:$(b(r).e("item"))},[le("span",{ref_key:"link",ref:a,class:$([b(r).e("inner"),b(r).is("link",!!l.to)]),role:"link",onClick:o},[Ne(l.$slots,"default")],2),(u=b(i))!=null&&u.separatorIcon?(F(),He(b(_t),{key:0,class:$(b(r).e("separator"))},{default:ge(()=>[(F(),He(en(b(i).separatorIcon)))]),_:1},8,["class"])):(F(),ie("span",{key:1,class:$(b(r).e("separator")),role:"presentation"},rt((d=b(i))==null?void 0:d.separator),3))],2)}}});var yW=ot(bhe,[["__file","breadcrumb-item.vue"]]);const She=Ft(ghe,{BreadcrumbItem:yW}),whe=ki(yW),_W=Symbol("buttonGroupContextKey"),md=({from:n,replacement:e,scope:t,version:i,ref:r,type:s="API"},a)=>{We(()=>b(a),o=>{},{immediate:!0})},xhe=(n,e)=>{md({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},N(()=>n.type==="text"));const t=mt(_W,void 0),i=aM("button"),{form:r}=fs(),s=tr(N(()=>t==null?void 0:t.size)),a=hs(),o=X(),l=ur(),c=N(()=>n.type||(t==null?void 0:t.type)||""),u=N(()=>{var p,m,v;return(v=(m=n.autoInsertSpace)!=null?m:(p=i.value)==null?void 0:p.autoInsertSpace)!=null?v:!1}),d=N(()=>n.tag==="button"?{ariaDisabled:a.value||n.loading,disabled:a.value||n.loading,autofocus:n.autofocus,type:n.nativeType}:{}),f=N(()=>{var p;const m=(p=l.default)==null?void 0:p.call(l);if(u.value&&(m==null?void 0:m.length)===1){const v=m[0];if((v==null?void 0:v.type)===lg){const g=v.children;return/^\p{Unified_Ideograph}{2}$/u.test(g.trim())}}return!1});return{_disabled:a,_size:s,_type:c,_ref:o,_props:d,shouldAddSpace:f,handleClick:p=>{if(a.value||n.loading){p.stopPropagation();return}n.nativeType==="reset"&&(r==null||r.resetFields()),e("click",p)}}},rI=["default","primary","success","warning","info","danger","text",""],Che=["button","submit","reset"],sI=at({size:cr,disabled:Boolean,type:{type:String,values:rI,default:""},icon:{type:Zn},nativeType:{type:String,values:Che,default:"button"},loading:Boolean,loadingIcon:{type:Zn,default:()=>ql},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:Re([String,Object]),default:"button"}}),Mhe={click:n=>n instanceof MouseEvent};function cs(n,e){The(n)&&(n="100%");var t=Ahe(n);return n=e===360?n:Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(String(n*e),10)/100),Math.abs(n-e)<1e-6?1:(e===360?n=(n<0?n%e+e:n%e)/parseFloat(String(e)):n=n%e/parseFloat(String(e)),n)}function Kb(n){return Math.min(1,Math.max(0,n))}function The(n){return typeof n=="string"&&n.indexOf(".")!==-1&&parseFloat(n)===1}function Ahe(n){return typeof n=="string"&&n.indexOf("%")!==-1}function bW(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function qb(n){return n<=1?"".concat(Number(n)*100,"%"):n}function ah(n){return n.length===1?"0"+n:String(n)}function Ehe(n,e,t){return{r:cs(n,255)*255,g:cs(e,255)*255,b:cs(t,255)*255}}function rF(n,e,t){n=cs(n,255),e=cs(e,255),t=cs(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),s=0,a=0,o=(i+r)/2;if(i===r)a=0,s=0;else{var l=i-r;switch(a=o>.5?l/(2-i-r):l/(i+r),i){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:a,l:o}}function mT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*(6*t):t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Ihe(n,e,t){var i,r,s;if(n=cs(n,360),e=cs(e,100),t=cs(t,100),e===0)r=t,s=t,i=t;else{var a=t<.5?t*(1+e):t+e-t*e,o=2*t-a;i=mT(o,a,n+1/3),r=mT(o,a,n),s=mT(o,a,n-1/3)}return{r:i*255,g:r*255,b:s*255}}function sF(n,e,t){n=cs(n,255),e=cs(e,255),t=cs(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),s=0,a=i,o=i-r,l=i===0?0:o/i;if(i===r)s=0;else{switch(i){case n:s=(e-t)/o+(e<t?6:0);break;case e:s=(t-n)/o+2;break;case t:s=(n-e)/o+4;break}s/=6}return{h:s,s:l,v:a}}function Rhe(n,e,t){n=cs(n,360)*6,e=cs(e,100),t=cs(t,100);var i=Math.floor(n),r=n-i,s=t*(1-e),a=t*(1-r*e),o=t*(1-(1-r)*e),l=i%6,c=[t,a,s,s,o,t][l],u=[o,t,t,a,s,s][l],d=[s,s,o,t,t,a][l];return{r:c*255,g:u*255,b:d*255}}function aF(n,e,t,i){var r=[ah(Math.round(n).toString(16)),ah(Math.round(e).toString(16)),ah(Math.round(t).toString(16))];return i&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function Phe(n,e,t,i,r){var s=[ah(Math.round(n).toString(16)),ah(Math.round(e).toString(16)),ah(Math.round(t).toString(16)),ah(Dhe(i))];return r&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function Dhe(n){return Math.round(parseFloat(n)*255).toString(16)}function oF(n){return Ra(n)/255}function Ra(n){return parseInt(n,16)}function Lhe(n){return{r:n>>16,g:(n&65280)>>8,b:n&255}}var aI={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function khe(n){var e={r:0,g:0,b:0},t=1,i=null,r=null,s=null,a=!1,o=!1;return typeof n=="string"&&(n=Bhe(n)),typeof n=="object"&&(hc(n.r)&&hc(n.g)&&hc(n.b)?(e=Ehe(n.r,n.g,n.b),a=!0,o=String(n.r).substr(-1)==="%"?"prgb":"rgb"):hc(n.h)&&hc(n.s)&&hc(n.v)?(i=qb(n.s),r=qb(n.v),e=Rhe(n.h,i,r),a=!0,o="hsv"):hc(n.h)&&hc(n.s)&&hc(n.l)&&(i=qb(n.s),s=qb(n.l),e=Ihe(n.h,i,s),a=!0,o="hsl"),Object.prototype.hasOwnProperty.call(n,"a")&&(t=n.a)),t=bW(t),{ok:a,format:n.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var Ohe="[-\\+]?\\d+%?",Nhe="[-\\+]?\\d*\\.\\d+%?",sd="(?:".concat(Nhe,")|(?:").concat(Ohe,")"),vT="[\\s|\\(]+(".concat(sd,")[,|\\s]+(").concat(sd,")[,|\\s]+(").concat(sd,")\\s*\\)?"),gT="[\\s|\\(]+(".concat(sd,")[,|\\s]+(").concat(sd,")[,|\\s]+(").concat(sd,")[,|\\s]+(").concat(sd,")\\s*\\)?"),Yo={CSS_UNIT:new RegExp(sd),rgb:new RegExp("rgb"+vT),rgba:new RegExp("rgba"+gT),hsl:new RegExp("hsl"+vT),hsla:new RegExp("hsla"+gT),hsv:new RegExp("hsv"+vT),hsva:new RegExp("hsva"+gT),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Bhe(n){if(n=n.trim().toLowerCase(),n.length===0)return!1;var e=!1;if(aI[n])n=aI[n],e=!0;else if(n==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=Yo.rgb.exec(n);return t?{r:t[1],g:t[2],b:t[3]}:(t=Yo.rgba.exec(n),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Yo.hsl.exec(n),t?{h:t[1],s:t[2],l:t[3]}:(t=Yo.hsla.exec(n),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Yo.hsv.exec(n),t?{h:t[1],s:t[2],v:t[3]}:(t=Yo.hsva.exec(n),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Yo.hex8.exec(n),t?{r:Ra(t[1]),g:Ra(t[2]),b:Ra(t[3]),a:oF(t[4]),format:e?"name":"hex8"}:(t=Yo.hex6.exec(n),t?{r:Ra(t[1]),g:Ra(t[2]),b:Ra(t[3]),format:e?"name":"hex"}:(t=Yo.hex4.exec(n),t?{r:Ra(t[1]+t[1]),g:Ra(t[2]+t[2]),b:Ra(t[3]+t[3]),a:oF(t[4]+t[4]),format:e?"name":"hex8"}:(t=Yo.hex3.exec(n),t?{r:Ra(t[1]+t[1]),g:Ra(t[2]+t[2]),b:Ra(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function hc(n){return!!Yo.CSS_UNIT.exec(String(n))}var SW=function(){function n(e,t){e===void 0&&(e=""),t===void 0&&(t={});var i;if(e instanceof n)return e;typeof e=="number"&&(e=Lhe(e)),this.originalInput=e;var r=khe(e);this.originalInput=e,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=t.format)!==null&&i!==void 0?i:r.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}return n.prototype.isDark=function(){return this.getBrightness()<128},n.prototype.isLight=function(){return!this.isDark()},n.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},n.prototype.getLuminance=function(){var e=this.toRgb(),t,i,r,s=e.r/255,a=e.g/255,o=e.b/255;return s<=.03928?t=s/12.92:t=Math.pow((s+.055)/1.055,2.4),a<=.03928?i=a/12.92:i=Math.pow((a+.055)/1.055,2.4),o<=.03928?r=o/12.92:r=Math.pow((o+.055)/1.055,2.4),.2126*t+.7152*i+.0722*r},n.prototype.getAlpha=function(){return this.a},n.prototype.setAlpha=function(e){return this.a=bW(e),this.roundA=Math.round(100*this.a)/100,this},n.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},n.prototype.toHsv=function(){var e=sF(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},n.prototype.toHsvString=function(){var e=sF(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},n.prototype.toHsl=function(){var e=rF(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},n.prototype.toHslString=function(){var e=rF(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},n.prototype.toHex=function(e){return e===void 0&&(e=!1),aF(this.r,this.g,this.b,e)},n.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},n.prototype.toHex8=function(e){return e===void 0&&(e=!1),Phe(this.r,this.g,this.b,this.a,e)},n.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},n.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},n.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},n.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(i,")"):"rgba(".concat(e,", ").concat(t,", ").concat(i,", ").concat(this.roundA,")")},n.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(cs(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},n.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(cs(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},n.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+aF(this.r,this.g,this.b,!1),t=0,i=Object.entries(aI);t<i.length;t++){var r=i[t],s=r[0],a=r[1];if(e===a)return s}return!1},n.prototype.toString=function(e){var t=!!e;e=e??this.format;var i=!1,r=this.a<1&&this.a>=0,s=!t&&r&&(e.startsWith("hex")||e==="name");return s?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},n.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},n.prototype.clone=function(){return new n(this.toString())},n.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=Kb(t.l),new n(t)},n.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new n(t)},n.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=Kb(t.l),new n(t)},n.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},n.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},n.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=Kb(t.s),new n(t)},n.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=Kb(t.s),new n(t)},n.prototype.greyscale=function(){return this.desaturate(100)},n.prototype.spin=function(e){var t=this.toHsl(),i=(t.h+e)%360;return t.h=i<0?360+i:i,new n(t)},n.prototype.mix=function(e,t){t===void 0&&(t=50);var i=this.toRgb(),r=new n(e).toRgb(),s=t/100,a={r:(r.r-i.r)*s+i.r,g:(r.g-i.g)*s+i.g,b:(r.b-i.b)*s+i.b,a:(r.a-i.a)*s+i.a};return new n(a)},n.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var i=this.toHsl(),r=360/t,s=[this];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,s.push(new n(i));return s},n.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new n(e)},n.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),i=t.h,r=t.s,s=t.v,a=[],o=1/e;e--;)a.push(new n({h:i,s:r,v:s})),s=(s+o)%1;return a},n.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new n({h:(t+72)%360,s:e.s,l:e.l}),new n({h:(t+216)%360,s:e.s,l:e.l})]},n.prototype.onBackground=function(e){var t=this.toRgb(),i=new n(e).toRgb(),r=t.a+i.a*(1-t.a);return new n({r:(t.r*t.a+i.r*i.a*(1-t.a))/r,g:(t.g*t.a+i.g*i.a*(1-t.a))/r,b:(t.b*t.a+i.b*i.a*(1-t.a))/r,a:r})},n.prototype.triad=function(){return this.polyad(3)},n.prototype.tetrad=function(){return this.polyad(4)},n.prototype.polyad=function(e){for(var t=this.toHsl(),i=t.h,r=[this],s=360/e,a=1;a<e;a++)r.push(new n({h:(i+a*s)%360,s:t.s,l:t.l}));return r},n.prototype.equals=function(e){return this.toRgbString()===new n(e).toRgbString()},n}();function xu(n,e=20){return n.mix("#141414",e).toString()}function Fhe(n){const e=hs(),t=Ze("button");return N(()=>{let i={},r=n.color;if(r){const s=r.match(/var\((.*?)\)/);s&&(r=window.getComputedStyle(window.document.documentElement).getPropertyValue(s[1]));const a=new SW(r),o=n.dark?a.tint(20).toString():xu(a,20);if(n.plain)i=t.cssVarBlock({"bg-color":n.dark?xu(a,90):a.tint(90).toString(),"text-color":r,"border-color":n.dark?xu(a,50):a.tint(50).toString(),"hover-text-color":`var(${t.cssVarName("color-white")})`,"hover-bg-color":r,"hover-border-color":r,"active-bg-color":o,"active-text-color":`var(${t.cssVarName("color-white")})`,"active-border-color":o}),e.value&&(i[t.cssVarBlockName("disabled-bg-color")]=n.dark?xu(a,90):a.tint(90).toString(),i[t.cssVarBlockName("disabled-text-color")]=n.dark?xu(a,50):a.tint(50).toString(),i[t.cssVarBlockName("disabled-border-color")]=n.dark?xu(a,80):a.tint(80).toString());else{const l=n.dark?xu(a,30):a.tint(30).toString(),c=a.isDark()?`var(${t.cssVarName("color-white")})`:`var(${t.cssVarName("color-black")})`;if(i=t.cssVarBlock({"bg-color":r,"text-color":c,"border-color":r,"hover-bg-color":l,"hover-text-color":c,"hover-border-color":l,"active-bg-color":o,"active-border-color":o}),e.value){const u=n.dark?xu(a,50):a.tint(50).toString();i[t.cssVarBlockName("disabled-bg-color")]=u,i[t.cssVarBlockName("disabled-text-color")]=n.dark?"rgba(255, 255, 255, 0.5)":`var(${t.cssVarName("color-white")})`,i[t.cssVarBlockName("disabled-border-color")]=u}}}return i})}const zhe=ve({name:"ElButton"}),Uhe=ve({...zhe,props:sI,emits:Mhe,setup(n,{expose:e,emit:t}){const i=n,r=Fhe(i),s=Ze("button"),{_ref:a,_size:o,_type:l,_disabled:c,_props:u,shouldAddSpace:d,handleClick:f}=xhe(i,t),h=N(()=>[s.b(),s.m(l.value),s.m(o.value),s.is("disabled",c.value),s.is("loading",i.loading),s.is("plain",i.plain),s.is("round",i.round),s.is("circle",i.circle),s.is("text",i.text),s.is("link",i.link),s.is("has-bg",i.bg)]);return e({ref:a,size:o,type:l,disabled:c,shouldAddSpace:d}),(p,m)=>(F(),He(en(p.tag),rn({ref_key:"_ref",ref:a},b(u),{class:b(h),style:b(r),onClick:b(f)}),{default:ge(()=>[p.loading?(F(),ie(bt,{key:0},[p.$slots.loading?Ne(p.$slots,"loading",{key:0}):(F(),He(b(_t),{key:1,class:$(b(s).is("loading"))},{default:ge(()=>[(F(),He(en(p.loadingIcon)))]),_:1},8,["class"]))],64)):p.icon||p.$slots.icon?(F(),He(b(_t),{key:1},{default:ge(()=>[p.icon?(F(),He(en(p.icon),{key:0})):Ne(p.$slots,"icon",{key:1})]),_:3})):Be("v-if",!0),p.$slots.default?(F(),ie("span",{key:2,class:$({[b(s).em("text","expand")]:b(d)})},[Ne(p.$slots,"default")],2)):Be("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Hhe=ot(Uhe,[["__file","button.vue"]]);const Vhe={size:sI.size,type:sI.type},$he=ve({name:"ElButtonGroup"}),Ghe=ve({...$he,props:Vhe,setup(n){const e=n;un(_W,Nn({size:zn(e,"size"),type:zn(e,"type")}));const t=Ze("button");return(i,r)=>(F(),ie("div",{class:$(b(t).b("group"))},[Ne(i.$slots,"default")],2))}});var wW=ot(Ghe,[["__file","button-group.vue"]]);const Ur=Ft(Hhe,{ButtonGroup:wW}),xW=ki(wW);var pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var CW={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(pu,function(){var t=1e3,i=6e4,r=36e5,s="millisecond",a="second",o="minute",l="hour",c="day",u="week",d="month",f="quarter",h="year",p="date",m="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(D){var L=["th","st","nd","rd"],R=D%100;return"["+D+(L[(R-20)%10]||L[R]||L[0])+"]"}},y=function(D,L,R){var B=String(D);return!B||B.length>=L?D:""+Array(L+1-B.length).join(R)+D},S={s:y,z:function(D){var L=-D.utcOffset(),R=Math.abs(L),B=Math.floor(R/60),k=R%60;return(L<=0?"+":"-")+y(B,2,"0")+":"+y(k,2,"0")},m:function D(L,R){if(L.date()<R.date())return-D(R,L);var B=12*(R.year()-L.year())+(R.month()-L.month()),k=L.clone().add(B,d),O=R-k<0,U=L.clone().add(B+(O?-1:1),d);return+(-(B+(R-k)/(O?k-U:U-k))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:d,y:h,w:u,d:c,D:p,h:l,m:o,s:a,ms:s,Q:f}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},w="en",x={};x[w]=_;var T="$isDayjsObject",C=function(D){return D instanceof I||!(!D||!D[T])},M=function D(L,R,B){var k;if(!L)return w;if(typeof L=="string"){var O=L.toLowerCase();x[O]&&(k=O),R&&(x[O]=R,k=O);var U=L.split("-");if(!k&&U.length>1)return D(U[0])}else{var G=L.name;x[G]=L,k=G}return!B&&k&&(w=k),k||!B&&w},A=function(D,L){if(C(D))return D.clone();var R=typeof L=="object"?L:{};return R.date=D,R.args=arguments,new I(R)},E=S;E.l=M,E.i=C,E.w=function(D,L){return A(D,{locale:L.$L,utc:L.$u,x:L.$x,$offset:L.$offset})};var I=function(){function D(R){this.$L=M(R.locale,null,!0),this.parse(R),this.$x=this.$x||R.x||{},this[T]=!0}var L=D.prototype;return L.parse=function(R){this.$d=function(B){var k=B.date,O=B.utc;if(k===null)return new Date(NaN);if(E.u(k))return new Date;if(k instanceof Date)return new Date(k);if(typeof k=="string"&&!/Z$/i.test(k)){var U=k.match(v);if(U){var G=U[2]-1||0,q=(U[7]||"0").substring(0,3);return O?new Date(Date.UTC(U[1],G,U[3]||1,U[4]||0,U[5]||0,U[6]||0,q)):new Date(U[1],G,U[3]||1,U[4]||0,U[5]||0,U[6]||0,q)}}return new Date(k)}(R),this.init()},L.init=function(){var R=this.$d;this.$y=R.getFullYear(),this.$M=R.getMonth(),this.$D=R.getDate(),this.$W=R.getDay(),this.$H=R.getHours(),this.$m=R.getMinutes(),this.$s=R.getSeconds(),this.$ms=R.getMilliseconds()},L.$utils=function(){return E},L.isValid=function(){return this.$d.toString()!==m},L.isSame=function(R,B){var k=A(R);return this.startOf(B)<=k&&k<=this.endOf(B)},L.isAfter=function(R,B){return A(R)<this.startOf(B)},L.isBefore=function(R,B){return this.endOf(B)<A(R)},L.$g=function(R,B,k){return E.u(R)?this[B]:this.set(k,R)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(R,B){var k=this,O=!!E.u(B)||B,U=E.p(R),G=function(ye,Te){var Ee=E.w(k.$u?Date.UTC(k.$y,Te,ye):new Date(k.$y,Te,ye),k);return O?Ee:Ee.endOf(c)},q=function(ye,Te){return E.w(k.toDate()[ye].apply(k.toDate("s"),(O?[0,0,0,0]:[23,59,59,999]).slice(Te)),k)},W=this.$W,Y=this.$M,J=this.$D,Z="set"+(this.$u?"UTC":"");switch(U){case h:return O?G(1,0):G(31,11);case d:return O?G(1,Y):G(0,Y+1);case u:var ee=this.$locale().weekStart||0,me=(W<ee?W+7:W)-ee;return G(O?J-me:J+(6-me),Y);case c:case p:return q(Z+"Hours",0);case l:return q(Z+"Minutes",1);case o:return q(Z+"Seconds",2);case a:return q(Z+"Milliseconds",3);default:return this.clone()}},L.endOf=function(R){return this.startOf(R,!1)},L.$set=function(R,B){var k,O=E.p(R),U="set"+(this.$u?"UTC":""),G=(k={},k[c]=U+"Date",k[p]=U+"Date",k[d]=U+"Month",k[h]=U+"FullYear",k[l]=U+"Hours",k[o]=U+"Minutes",k[a]=U+"Seconds",k[s]=U+"Milliseconds",k)[O],q=O===c?this.$D+(B-this.$W):B;if(O===d||O===h){var W=this.clone().set(p,1);W.$d[G](q),W.init(),this.$d=W.set(p,Math.min(this.$D,W.daysInMonth())).$d}else G&&this.$d[G](q);return this.init(),this},L.set=function(R,B){return this.clone().$set(R,B)},L.get=function(R){return this[E.p(R)]()},L.add=function(R,B){var k,O=this;R=Number(R);var U=E.p(B),G=function(Y){var J=A(O);return E.w(J.date(J.date()+Math.round(Y*R)),O)};if(U===d)return this.set(d,this.$M+R);if(U===h)return this.set(h,this.$y+R);if(U===c)return G(1);if(U===u)return G(7);var q=(k={},k[o]=i,k[l]=r,k[a]=t,k)[U]||1,W=this.$d.getTime()+R*q;return E.w(W,this)},L.subtract=function(R,B){return this.add(-1*R,B)},L.format=function(R){var B=this,k=this.$locale();if(!this.isValid())return k.invalidDate||m;var O=R||"YYYY-MM-DDTHH:mm:ssZ",U=E.z(this),G=this.$H,q=this.$m,W=this.$M,Y=k.weekdays,J=k.months,Z=k.meridiem,ee=function(Te,Ee,H,Q){return Te&&(Te[Ee]||Te(B,O))||H[Ee].slice(0,Q)},me=function(Te){return E.s(G%12||12,Te,"0")},ye=Z||function(Te,Ee,H){var Q=Te<12?"AM":"PM";return H?Q.toLowerCase():Q};return O.replace(g,function(Te,Ee){return Ee||function(H){switch(H){case"YY":return String(B.$y).slice(-2);case"YYYY":return E.s(B.$y,4,"0");case"M":return W+1;case"MM":return E.s(W+1,2,"0");case"MMM":return ee(k.monthsShort,W,J,3);case"MMMM":return ee(J,W);case"D":return B.$D;case"DD":return E.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return ee(k.weekdaysMin,B.$W,Y,2);case"ddd":return ee(k.weekdaysShort,B.$W,Y,3);case"dddd":return Y[B.$W];case"H":return String(G);case"HH":return E.s(G,2,"0");case"h":return me(1);case"hh":return me(2);case"a":return ye(G,q,!0);case"A":return ye(G,q,!1);case"m":return String(q);case"mm":return E.s(q,2,"0");case"s":return String(B.$s);case"ss":return E.s(B.$s,2,"0");case"SSS":return E.s(B.$ms,3,"0");case"Z":return U}return null}(Te)||U.replace(":","")})},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(R,B,k){var O,U=this,G=E.p(B),q=A(R),W=(q.utcOffset()-this.utcOffset())*i,Y=this-q,J=function(){return E.m(U,q)};switch(G){case h:O=J()/12;break;case d:O=J();break;case f:O=J()/3;break;case u:O=(Y-W)/6048e5;break;case c:O=(Y-W)/864e5;break;case l:O=Y/r;break;case o:O=Y/i;break;case a:O=Y/t;break;default:O=Y}return k?O:E.a(O)},L.daysInMonth=function(){return this.endOf(d).$D},L.$locale=function(){return x[this.$L]},L.locale=function(R,B){if(!R)return this.$L;var k=this.clone(),O=M(R,B,!0);return O&&(k.$L=O),k},L.clone=function(){return E.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},D}(),P=I.prototype;return A.prototype=P,[["$ms",s],["$s",a],["$m",o],["$H",l],["$W",c],["$M",d],["$y",h],["$D",p]].forEach(function(D){P[D[1]]=function(L){return this.$g(L,D[0],D[1])}}),A.extend=function(D,L){return D.$i||(D(L,I,A),D.$i=!0),A},A.locale=M,A.isDayjs=C,A.unix=function(D){return A(1e3*D)},A.en=x[w],A.Ls=x,A.p={},A})})(CW);var Whe=CW.exports;const Ot=mu(Whe),yT=(n,e)=>[n>0?n-1:void 0,n,n<e?n+1:void 0],vd=n=>Array.from(Array.from({length:n}).keys()),MW=n=>n.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),TW=n=>n.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),lF=function(n,e){const t=Ad(n),i=Ad(e);return t&&i?n.getTime()===e.getTime():!t&&!i?n===e:!1},cF=function(n,e){const t=nt(n),i=nt(e);return t&&i?n.length!==e.length?!1:n.every((r,s)=>lF(r,e[s])):!t&&!i?lF(n,e):!1},uF=function(n,e,t){const i=ka(e)||e==="x"?Ot(n).locale(t):Ot(n,e).locale(t);return i.isValid()?i:void 0},dF=function(n,e,t){return ka(e)?n:e==="x"?+n:Ot(n).locale(t).format(e)},_T=(n,e)=>{var t;const i=[],r=e==null?void 0:e();for(let s=0;s<n;s++)i.push((t=r==null?void 0:r.includes(s))!=null?t:!1);return i},Xb=n=>nt(n)?n.map(e=>e.toDate()):n.toDate(),Khe=(n,e)=>{const t=n.subtract(1,"month").endOf("month").date();return vd(e).map((i,r)=>t-(e-r-1))},qhe=n=>{const e=n.daysInMonth();return vd(e).map((t,i)=>i+1)},Xhe=n=>vd(n.length/7).map(e=>{const t=e*7;return n.slice(t,t+7)}),Yhe=at({selectedDay:{type:Re(Object)},range:{type:Re(Array)},date:{type:Re(Object),required:!0},hideHeader:{type:Boolean}}),jhe={pick:n=>Yt(n)};var AW={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(pu,function(){return function(t,i,r){var s=i.prototype,a=function(d){return d&&(d.indexOf?d:d.s)},o=function(d,f,h,p,m){var v=d.name?d:d.$locale(),g=a(v[f]),_=a(v[h]),y=g||_.map(function(w){return w.slice(0,p)});if(!m)return y;var S=v.weekStart;return y.map(function(w,x){return y[(x+(S||0))%7]})},l=function(){return r.Ls[r.locale()]},c=function(d,f){return d.formats[f]||function(h){return h.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(p,m,v){return m||v.slice(1)})}(d.formats[f.toUpperCase()])},u=function(){var d=this;return{months:function(f){return f?f.format("MMMM"):o(d,"months")},monthsShort:function(f){return f?f.format("MMM"):o(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):o(d,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):o(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):o(d,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return c(d.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};s.localeData=function(){return u.bind(this)()},r.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return r.weekdays()},weekdaysShort:function(){return r.weekdaysShort()},weekdaysMin:function(){return r.weekdaysMin()},months:function(){return r.months()},monthsShort:function(){return r.monthsShort()},longDateFormat:function(f){return c(d,f)},meridiem:d.meridiem,ordinal:d.ordinal}},r.months=function(){return o(l(),"months")},r.monthsShort=function(){return o(l(),"monthsShort","months",3)},r.weekdays=function(d){return o(l(),"weekdays",null,null,d)},r.weekdaysShort=function(d){return o(l(),"weekdaysShort","weekdays",3,d)},r.weekdaysMin=function(d){return o(l(),"weekdaysMin","weekdays",2,d)}}})})(AW);var Qhe=AW.exports;const EW=mu(Qhe),Zhe=["year","years","month","months","date","dates","week","datetime","datetimerange","daterange","monthrange","yearrange"],bT=["sun","mon","tue","wed","thu","fri","sat"],Jhe=(n,e)=>{Ot.extend(EW);const t=Ot.localeData().firstDayOfWeek(),{t:i,lang:r}=xn(),s=Ot().locale(r.value),a=N(()=>!!n.range&&!!n.range.length),o=N(()=>{let f=[];if(a.value){const[h,p]=n.range,m=vd(p.date()-h.date()+1).map(_=>({text:h.date()+_,type:"current"}));let v=m.length%7;v=v===0?0:7-v;const g=vd(v).map((_,y)=>({text:y+1,type:"next"}));f=m.concat(g)}else{const h=n.date.startOf("month").day(),p=Khe(n.date,(h-t+7)%7).map(_=>({text:_,type:"prev"})),m=qhe(n.date).map(_=>({text:_,type:"current"}));f=[...p,...m];const v=7-(f.length%7||7),g=vd(v).map((_,y)=>({text:y+1,type:"next"}));f=f.concat(g)}return Xhe(f)}),l=N(()=>{const f=t;return f===0?bT.map(h=>i(`el.datepicker.weeks.${h}`)):bT.slice(f).concat(bT.slice(0,f)).map(h=>i(`el.datepicker.weeks.${h}`))}),c=(f,h)=>{switch(h){case"prev":return n.date.startOf("month").subtract(1,"month").date(f);case"next":return n.date.startOf("month").add(1,"month").date(f);case"current":return n.date.date(f)}};return{now:s,isInRange:a,rows:o,weekDays:l,getFormattedDate:c,handlePickDay:({text:f,type:h})=>{const p=c(f,h);e("pick",p)},getSlotData:({text:f,type:h})=>{const p=c(f,h);return{isSelected:p.isSame(n.selectedDay),type:`${h}-month`,day:p.format("YYYY-MM-DD"),date:p.toDate()}}}},epe=ve({name:"DateTable"}),tpe=ve({...epe,props:Yhe,emits:jhe,setup(n,{expose:e,emit:t}){const i=n,{isInRange:r,now:s,rows:a,weekDays:o,getFormattedDate:l,handlePickDay:c,getSlotData:u}=Jhe(i,t),d=Ze("calendar-table"),f=Ze("calendar-day"),h=({text:p,type:m})=>{const v=[m];if(m==="current"){const g=l(p,m);g.isSame(i.selectedDay,"day")&&v.push(f.is("selected")),g.isSame(s,"day")&&v.push(f.is("today"))}return v};return e({getFormattedDate:l}),(p,m)=>(F(),ie("table",{class:$([b(d).b(),b(d).is("range",b(r))]),cellspacing:"0",cellpadding:"0"},[p.hideHeader?Be("v-if",!0):(F(),ie("thead",{key:0},[le("tr",null,[(F(!0),ie(bt,null,sn(b(o),v=>(F(),ie("th",{key:v,scope:"col"},rt(v),1))),128))])])),le("tbody",null,[(F(!0),ie(bt,null,sn(b(a),(v,g)=>(F(),ie("tr",{key:g,class:$({[b(d).e("row")]:!0,[b(d).em("row","hide-border")]:g===0&&p.hideHeader})},[(F(!0),ie(bt,null,sn(v,(_,y)=>(F(),ie("td",{key:y,class:$(h(_)),onClick:S=>b(c)(_)},[le("div",{class:$(b(f).b())},[Ne(p.$slots,"date-cell",{data:b(u)(_)},()=>[le("span",null,rt(_.text),1)])],2)],10,["onClick"]))),128))],2))),128))])],2))}});var fF=ot(tpe,[["__file","date-table.vue"]]);const npe=(n,e)=>{const t=n.endOf("month"),i=e.startOf("month"),s=t.isSame(i,"week")?i.add(1,"week"):i;return[[n,t],[s.startOf("week"),e]]},ipe=(n,e)=>{const t=n.endOf("month"),i=n.add(1,"month").startOf("month"),r=t.isSame(i,"week")?i.add(1,"week"):i,s=r.endOf("month"),a=e.startOf("month"),o=s.isSame(a,"week")?a.add(1,"week"):a;return[[n,t],[r.startOf("week"),s],[o.startOf("week"),e]]},rpe=(n,e,t)=>{const{lang:i}=xn(),r=X(),s=Ot().locale(i.value),a=N({get(){return n.modelValue?l.value:r.value},set(v){if(!v)return;r.value=v;const g=v.toDate();e(ls,g),e(Kt,g)}}),o=N(()=>{if(!n.range||!nt(n.range)||n.range.length!==2||n.range.some(y=>!Ad(y)))return[];const v=n.range.map(y=>Ot(y).locale(i.value)),[g,_]=v;return g.isAfter(_)?[]:g.isSame(_,"month")?h(g,_):g.add(1,"month").month()!==_.month()?[]:h(g,_)}),l=N(()=>n.modelValue?Ot(n.modelValue).locale(i.value):a.value||(o.value.length?o.value[0][0]:s)),c=N(()=>l.value.subtract(1,"month").date(1)),u=N(()=>l.value.add(1,"month").date(1)),d=N(()=>l.value.subtract(1,"year").date(1)),f=N(()=>l.value.add(1,"year").date(1)),h=(v,g)=>{const _=v.startOf("week"),y=g.endOf("week"),S=_.get("month"),w=y.get("month");return S===w?[[_,y]]:(S+1)%12===w?npe(_,y):S+2===w||(S+1)%11===w?ipe(_,y):[]},p=v=>{a.value=v};return{calculateValidatedDateRange:h,date:l,realSelectedDay:a,pickDay:p,selectDate:v=>{const _={"prev-month":c.value,"next-month":u.value,"prev-year":d.value,"next-year":f.value,today:s}[v];_.isSame(l.value,"day")||p(_)},validatedRange:o}},spe=n=>nt(n)&&n.length===2&&n.every(e=>Ad(e)),ape=at({modelValue:{type:Date},range:{type:Re(Array),validator:spe}}),ope={[Kt]:n=>Ad(n),[ls]:n=>Ad(n)},lpe="ElCalendar",cpe=ve({name:lpe}),upe=ve({...cpe,props:ape,emits:ope,setup(n,{expose:e,emit:t}){const i=n,r=Ze("calendar"),{calculateValidatedDateRange:s,date:a,pickDay:o,realSelectedDay:l,selectDate:c,validatedRange:u}=rpe(i,t),{t:d}=xn(),f=N(()=>{const h=`el.datepicker.month${a.value.format("M")}`;return`${a.value.year()} ${d("el.datepicker.year")} ${d(h)}`});return e({selectedDay:l,pickDay:o,selectDate:c,calculateValidatedDateRange:s}),(h,p)=>(F(),ie("div",{class:$(b(r).b())},[le("div",{class:$(b(r).e("header"))},[Ne(h.$slots,"header",{date:b(f)},()=>[le("div",{class:$(b(r).e("title"))},rt(b(f)),3),b(u).length===0?(F(),ie("div",{key:0,class:$(b(r).e("button-group"))},[oe(b(xW),null,{default:ge(()=>[oe(b(Ur),{size:"small",onClick:m=>b(c)("prev-month")},{default:ge(()=>[Xt(rt(b(d)("el.datepicker.prevMonth")),1)]),_:1},8,["onClick"]),oe(b(Ur),{size:"small",onClick:m=>b(c)("today")},{default:ge(()=>[Xt(rt(b(d)("el.datepicker.today")),1)]),_:1},8,["onClick"]),oe(b(Ur),{size:"small",onClick:m=>b(c)("next-month")},{default:ge(()=>[Xt(rt(b(d)("el.datepicker.nextMonth")),1)]),_:1},8,["onClick"])]),_:1})],2)):Be("v-if",!0)])],2),b(u).length===0?(F(),ie("div",{key:0,class:$(b(r).e("body"))},[oe(fF,{date:b(a),"selected-day":b(l),onPick:b(o)},Ro({_:2},[h.$slots["date-cell"]?{name:"date-cell",fn:ge(m=>[Ne(h.$slots,"date-cell",nl(Id(m)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(F(),ie("div",{key:1,class:$(b(r).e("body"))},[(F(!0),ie(bt,null,sn(b(u),(m,v)=>(F(),He(fF,{key:v,date:m[0],"selected-day":b(l),range:m,"hide-header":v!==0,onPick:b(o)},Ro({_:2},[h.$slots["date-cell"]?{name:"date-cell",fn:ge(g=>[Ne(h.$slots,"date-cell",nl(Id(g)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var dpe=ot(upe,[["__file","calendar.vue"]]);const fpe=Ft(dpe),hpe=at({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:Re([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),ppe=ve({name:"ElCard"}),mpe=ve({...ppe,props:hpe,setup(n){const e=Ze("card");return(t,i)=>(F(),ie("div",{class:$([b(e).b(),b(e).is(`${t.shadow}-shadow`)])},[t.$slots.header||t.header?(F(),ie("div",{key:0,class:$(b(e).e("header"))},[Ne(t.$slots,"header",{},()=>[Xt(rt(t.header),1)])],2)):Be("v-if",!0),le("div",{class:$([b(e).e("body"),t.bodyClass]),style:Ct(t.bodyStyle)},[Ne(t.$slots,"default")],6),t.$slots.footer||t.footer?(F(),ie("div",{key:1,class:$(b(e).e("footer"))},[Ne(t.$slots,"footer",{},()=>[Xt(rt(t.footer),1)])],2)):Be("v-if",!0)],2))}});var vpe=ot(mpe,[["__file","card.vue"]]);const gpe=Ft(vpe),ype=at({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),_pe={change:(n,e)=>[n,e].every(At)},IW=Symbol("carouselContextKey"),oI="ElCarouselItem";var oo=(n=>(n[n.TEXT=1]="TEXT",n[n.CLASS=2]="CLASS",n[n.STYLE=4]="STYLE",n[n.PROPS=8]="PROPS",n[n.FULL_PROPS=16]="FULL_PROPS",n[n.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",n[n.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",n[n.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",n[n.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",n[n.NEED_PATCH=512]="NEED_PATCH",n[n.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",n[n.HOISTED=-1]="HOISTED",n[n.BAIL=-2]="BAIL",n))(oo||{});function lI(n){return Pi(n)&&n.type===bt}function bpe(n){return Pi(n)&&n.type===Ds}function Spe(n){return Pi(n)&&!lI(n)&&!bpe(n)}const wpe=n=>{if(!Pi(n))return{};const e=n.props||{},t=(Pi(n.type)?n.type.props:void 0)||{},i={};return Object.keys(t).forEach(r=>{Cn(t[r],"default")&&(i[r]=t[r].default)}),Object.keys(e).forEach(r=>{i[Wa(r)]=e[r]}),i},xpe=n=>{if(!nt(n)||n.length>1)throw new Error("expect to receive a single Vue element child");return n[0]},gd=n=>{const e=nt(n)?n:[n],t=[];return e.forEach(i=>{var r;nt(i)?t.push(...gd(i)):Pi(i)&&((r=i.component)!=null&&r.subTree)?t.push(i,...gd(i.component.subTree)):Pi(i)&&nt(i.children)?t.push(...gd(i.children)):t.push(i)}),t},Cpe=(n,e,t)=>gd(n.subTree).filter(s=>{var a;return Pi(s)&&((a=s.type)==null?void 0:a.name)===e&&!!s.component}).map(s=>s.component.uid).map(s=>t[s]).filter(s=>!!s),GL=(n,e)=>{const t={},i=Yn([]);return{children:i,addChild:a=>{t[a.uid]=a,i.value=Cpe(n,e,t)},removeChild:a=>{delete t[a],i.value=i.value.filter(o=>o.uid!==a)}}},hF=300,Mpe=(n,e,t)=>{const{children:i,addChild:r,removeChild:s}=GL(jt(),oI),a=ur(),o=X(-1),l=X(null),c=X(!1),u=X(),d=X(0),f=X(!0),h=X(!0),p=X(!1),m=N(()=>n.arrow!=="never"&&!b(_)),v=N(()=>i.value.some(Z=>Z.props.label.toString().length>0)),g=N(()=>n.type==="card"),_=N(()=>n.direction==="vertical"),y=N(()=>n.height!=="auto"?{height:n.height}:{height:`${d.value}px`,overflow:"hidden"}),S=xh(Z=>{A(Z)},hF,{trailing:!0}),w=xh(Z=>{O(Z)},hF),x=Z=>f.value?o.value<=1?Z<=1:Z>1:!0;function T(){l.value&&(clearInterval(l.value),l.value=null)}function C(){n.interval<=0||!n.autoplay||l.value||(l.value=setInterval(()=>M(),n.interval))}const M=()=>{h.value||(p.value=!0),h.value=!1,o.value<i.value.length-1?o.value=o.value+1:n.loop?o.value=0:p.value=!1};function A(Z){if(h.value||(p.value=!0),h.value=!1,xt(Z)){const ye=i.value.filter(Te=>Te.props.name===Z);ye.length>0&&(Z=i.value.indexOf(ye[0]))}if(Z=Number(Z),Number.isNaN(Z)||Z!==Math.floor(Z))return;const ee=i.value.length,me=o.value;Z<0?o.value=n.loop?ee-1:0:Z>=ee?o.value=n.loop?0:ee-1:o.value=Z,me===o.value&&E(me),q()}function E(Z){i.value.forEach((ee,me)=>{ee.translateItem(me,o.value,Z)})}function I(Z,ee){var me,ye,Te,Ee;const H=b(i),Q=H.length;if(Q===0||!Z.states.inStage)return!1;const j=ee+1,Pe=ee-1,we=Q-1,De=H[we].states.active,Me=H[0].states.active,Ae=(ye=(me=H[j])==null?void 0:me.states)==null?void 0:ye.active,Fe=(Ee=(Te=H[Pe])==null?void 0:Te.states)==null?void 0:Ee.active;return ee===we&&Me||Ae?"left":ee===0&&De||Fe?"right":!1}function P(){c.value=!0,n.pauseOnHover&&T()}function D(){c.value=!1,C()}function L(){p.value=!1}function R(Z){b(_)||i.value.forEach((ee,me)=>{Z===I(ee,me)&&(ee.states.hover=!0)})}function B(){b(_)||i.value.forEach(Z=>{Z.states.hover=!1})}function k(Z){Z!==o.value&&(h.value||(p.value=!0)),o.value=Z}function O(Z){n.trigger==="hover"&&Z!==o.value&&(o.value=Z,h.value||(p.value=!0))}function U(){A(o.value-1)}function G(){A(o.value+1)}function q(){T(),n.pauseOnHover||C()}function W(Z){n.height==="auto"&&(d.value=Z)}function Y(){var Z;const ee=(Z=a.default)==null?void 0:Z.call(a);if(!ee)return null;const ye=gd(ee).filter(Te=>Pi(Te)&&Te.type.name===oI);return(ye==null?void 0:ye.length)===2&&n.loop&&!g.value?(f.value=!0,ye):(f.value=!1,null)}We(()=>o.value,(Z,ee)=>{E(ee),f.value&&(Z=Z%2,ee=ee%2),ee>-1&&e("change",Z,ee)}),We(()=>n.autoplay,Z=>{Z?C():T()}),We(()=>n.loop,()=>{A(o.value)}),We(()=>n.interval,()=>{q()});const J=Yn();return Ht(()=>{We(()=>i.value,()=>{i.value.length>0&&A(n.initialIndex)},{immediate:!0}),J.value=Ti(u.value,()=>{E()}),C()}),Un(()=>{T(),u.value&&J.value&&J.value.stop()}),un(IW,{root:u,isCardType:g,isVertical:_,items:i,loop:n.loop,cardScale:n.cardScale,addItem:r,removeItem:s,setActiveItem:A,setContainerHeight:W}),{root:u,activeIndex:o,arrowDisplay:m,hasLabel:v,hover:c,isCardType:g,isTransitioning:p,items:i,isVertical:_,containerStyle:y,isItemsTwoLength:f,handleButtonEnter:R,handleTransitionEnd:L,handleButtonLeave:B,handleIndicatorClick:k,handleMouseEnter:P,handleMouseLeave:D,setActiveItem:A,prev:U,next:G,PlaceholderItem:Y,isTwoLengthShow:x,throttledArrowClick:S,throttledIndicatorHover:w}},Tpe="ElCarousel",Ape=ve({name:Tpe}),Epe=ve({...Ape,props:ype,emits:_pe,setup(n,{expose:e,emit:t}){const i=n,{root:r,activeIndex:s,arrowDisplay:a,hasLabel:o,hover:l,isCardType:c,items:u,isVertical:d,containerStyle:f,handleButtonEnter:h,handleButtonLeave:p,isTransitioning:m,handleIndicatorClick:v,handleMouseEnter:g,handleMouseLeave:_,handleTransitionEnd:y,setActiveItem:S,prev:w,next:x,PlaceholderItem:T,isTwoLengthShow:C,throttledArrowClick:M,throttledIndicatorHover:A}=Mpe(i,t),E=Ze("carousel"),{t:I}=xn(),P=N(()=>{const R=[E.b(),E.m(i.direction)];return b(c)&&R.push(E.m("card")),R}),D=N(()=>{const R=[E.e("container")];return i.motionBlur&&b(m)&&u.value.length>1&&R.push(b(d)?`${E.namespace.value}-transitioning-vertical`:`${E.namespace.value}-transitioning`),R}),L=N(()=>{const R=[E.e("indicators"),E.em("indicators",i.direction)];return b(o)&&R.push(E.em("indicators","labels")),i.indicatorPosition==="outside"&&R.push(E.em("indicators","outside")),b(d)&&R.push(E.em("indicators","right")),R});return e({activeIndex:s,setActiveItem:S,prev:w,next:x}),(R,B)=>(F(),ie("div",{ref_key:"root",ref:r,class:$(b(P)),onMouseenter:Pt(b(g),["stop"]),onMouseleave:Pt(b(_),["stop"])},[b(a)?(F(),He(yr,{key:0,name:"carousel-arrow-left",persisted:""},{default:ge(()=>[Wt(le("button",{type:"button",class:$([b(E).e("arrow"),b(E).em("arrow","left")]),"aria-label":b(I)("el.carousel.leftArrow"),onMouseenter:k=>b(h)("left"),onMouseleave:b(p),onClick:Pt(k=>b(M)(b(s)-1),["stop"])},[oe(b(_t),null,{default:ge(()=>[oe(b(Ld))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Dn,(R.arrow==="always"||b(l))&&(i.loop||b(s)>0)]])]),_:1})):Be("v-if",!0),b(a)?(F(),He(yr,{key:1,name:"carousel-arrow-right",persisted:""},{default:ge(()=>[Wt(le("button",{type:"button",class:$([b(E).e("arrow"),b(E).em("arrow","right")]),"aria-label":b(I)("el.carousel.rightArrow"),onMouseenter:k=>b(h)("right"),onMouseleave:b(p),onClick:Pt(k=>b(M)(b(s)+1),["stop"])},[oe(b(_t),null,{default:ge(()=>[oe(b(js))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Dn,(R.arrow==="always"||b(l))&&(i.loop||b(s)<b(u).length-1)]])]),_:1})):Be("v-if",!0),le("div",{class:$(b(D)),style:Ct(b(f)),onTransitionend:b(y)},[oe(b(T)),Ne(R.$slots,"default")],46,["onTransitionend"]),R.indicatorPosition!=="none"?(F(),ie("ul",{key:2,class:$(b(L))},[(F(!0),ie(bt,null,sn(b(u),(k,O)=>Wt((F(),ie("li",{key:O,class:$([b(E).e("indicator"),b(E).em("indicator",R.direction),b(E).is("active",O===b(s))]),onMouseenter:U=>b(A)(O),onClick:Pt(U=>b(v)(O),["stop"])},[le("button",{class:$(b(E).e("button")),"aria-label":b(I)("el.carousel.indicator",{index:O+1})},[b(o)?(F(),ie("span",{key:0},rt(k.props.label),1)):Be("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[Dn,b(C)(O)]])),128))],2)):Be("v-if",!0),i.motionBlur?(F(),ie("svg",{key:3,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[le("defs",null,[le("filter",{id:"elCarouselHorizontal"},[le("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),le("filter",{id:"elCarouselVertical"},[le("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):Be("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var Ipe=ot(Epe,[["__file","carousel.vue"]]);const Rpe=at({name:{type:String,default:""},label:{type:[String,Number],default:""}}),Ppe=n=>{const e=mt(IW),t=jt(),i=X(),r=X(!1),s=X(0),a=X(1),o=X(!1),l=X(!1),c=X(!1),u=X(!1),{isCardType:d,isVertical:f,cardScale:h}=e;function p(y,S,w){const x=w-1,T=S-1,C=S+1,M=w/2;return S===0&&y===x?-1:S===x&&y===0?w:y<T&&S-y>=M?w+1:y>C&&y-S>=M?-2:y}function m(y,S){var w,x;const T=b(f)?((w=e.root.value)==null?void 0:w.offsetHeight)||0:((x=e.root.value)==null?void 0:x.offsetWidth)||0;return c.value?T*((2-h)*(y-S)+1)/4:y<S?-(1+h)*T/4:(3+h)*T/4}function v(y,S,w){const x=e.root.value;return x?((w?x.offsetHeight:x.offsetWidth)||0)*(y-S):0}const g=(y,S,w)=>{var x;const T=b(d),C=(x=e.items.value.length)!=null?x:Number.NaN,M=y===S;!T&&!Wn(w)&&(u.value=M||y===w),!M&&C>2&&e.loop&&(y=p(y,S,C));const A=b(f);o.value=M,T?(c.value=Math.round(Math.abs(y-S))<=1,s.value=m(y,S),a.value=b(o)?1:h):s.value=v(y,S,A),l.value=!0,M&&i.value&&e.setContainerHeight(i.value.offsetHeight)};function _(){if(e&&b(d)){const y=e.items.value.findIndex(({uid:S})=>S===t.uid);e.setActiveItem(y)}}return Ht(()=>{e.addItem({props:n,states:Nn({hover:r,translate:s,scale:a,active:o,ready:l,inStage:c,animating:u}),uid:t.uid,translateItem:g})}),Qd(()=>{e.removeItem(t.uid)}),{carouselItemRef:i,active:o,animating:u,hover:r,inStage:c,isVertical:f,translate:s,isCardType:d,scale:a,ready:l,handleItemClick:_}},Dpe=ve({name:oI}),Lpe=ve({...Dpe,props:Rpe,setup(n){const e=n,t=Ze("carousel"),{carouselItemRef:i,active:r,animating:s,hover:a,inStage:o,isVertical:l,translate:c,isCardType:u,scale:d,ready:f,handleItemClick:h}=Ppe(e),p=N(()=>[t.e("item"),t.is("active",r.value),t.is("in-stage",o.value),t.is("hover",a.value),t.is("animating",s.value),{[t.em("item","card")]:u.value,[t.em("item","card-vertical")]:u.value&&l.value}]),m=N(()=>{const g=`${`translate${b(l)?"Y":"X"}`}(${b(c)}px)`,_=`scale(${b(d)})`;return{transform:[g,_].join(" ")}});return(v,g)=>Wt((F(),ie("div",{ref_key:"carouselItemRef",ref:i,class:$(b(p)),style:Ct(b(m)),onClick:b(h)},[b(u)?Wt((F(),ie("div",{key:0,class:$(b(t).e("mask"))},null,2)),[[Dn,!b(r)]]):Be("v-if",!0),Ne(v.$slots,"default")],14,["onClick"])),[[Dn,b(f)]])}});var RW=ot(Lpe,[["__file","carousel-item.vue"]]);const kpe=Ft(Ipe,{CarouselItem:RW}),Ope=ki(RW),PW={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},border:Boolean,size:cr,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...Zr(["ariaControls"])},DW={[Kt]:n=>xt(n)||At(n)||ai(n),change:n=>xt(n)||At(n)||ai(n)},gg=Symbol("checkboxGroupContextKey"),Npe=({model:n,isChecked:e})=>{const t=mt(gg,void 0),i=N(()=>{var s,a;const o=(s=t==null?void 0:t.max)==null?void 0:s.value,l=(a=t==null?void 0:t.min)==null?void 0:a.value;return!Wn(o)&&n.value.length>=o&&!e.value||!Wn(l)&&n.value.length<=l&&e.value});return{isDisabled:hs(N(()=>(t==null?void 0:t.disabled.value)||i.value)),isLimitDisabled:i}},Bpe=(n,{model:e,isLimitExceeded:t,hasOwnLabel:i,isDisabled:r,isLabeledByFormItem:s})=>{const a=mt(gg,void 0),{formItem:o}=fs(),{emit:l}=jt();function c(p){var m,v,g,_;return[!0,n.trueValue,n.trueLabel].includes(p)?(v=(m=n.trueValue)!=null?m:n.trueLabel)!=null?v:!0:(_=(g=n.falseValue)!=null?g:n.falseLabel)!=null?_:!1}function u(p,m){l("change",c(p),m)}function d(p){if(t.value)return;const m=p.target;l("change",c(m.checked),p)}async function f(p){t.value||!i.value&&!r.value&&s.value&&(p.composedPath().some(g=>g.tagName==="LABEL")||(e.value=c([!1,n.falseValue,n.falseLabel].includes(e.value)),await Mt(),u(e.value,p)))}const h=N(()=>(a==null?void 0:a.validateEvent)||n.validateEvent);return We(()=>n.modelValue,()=>{h.value&&(o==null||o.validate("change").catch(p=>void 0))}),{handleChange:d,onClickRoot:f}},Fpe=n=>{const e=X(!1),{emit:t}=jt(),i=mt(gg,void 0),r=N(()=>Wn(i)===!1),s=X(!1),a=N({get(){var o,l;return r.value?(o=i==null?void 0:i.modelValue)==null?void 0:o.value:(l=n.modelValue)!=null?l:e.value},set(o){var l,c;r.value&&nt(o)?(s.value=((l=i==null?void 0:i.max)==null?void 0:l.value)!==void 0&&o.length>(i==null?void 0:i.max.value)&&o.length>a.value.length,s.value===!1&&((c=i==null?void 0:i.changeEvent)==null||c.call(i,o))):(t(Kt,o),e.value=o)}});return{model:a,isGroup:r,isLimitExceeded:s}},zpe=(n,e,{model:t})=>{const i=mt(gg,void 0),r=X(!1),s=N(()=>Nh(n.value)?n.label:n.value),a=N(()=>{const u=t.value;return ai(u)?u:nt(u)?Yt(s.value)?u.map(Jn).some(d=>jr(d,s.value)):u.map(Jn).includes(s.value):u!=null?u===n.trueValue||u===n.trueLabel:!!u}),o=tr(N(()=>{var u;return(u=i==null?void 0:i.size)==null?void 0:u.value}),{prop:!0}),l=tr(N(()=>{var u;return(u=i==null?void 0:i.size)==null?void 0:u.value})),c=N(()=>!!e.default||!Nh(s.value));return{checkboxButtonSize:o,isChecked:a,isFocused:r,checkboxSize:l,hasOwnLabel:c,actualValue:s}},LW=(n,e)=>{const{formItem:t}=fs(),{model:i,isGroup:r,isLimitExceeded:s}=Fpe(n),{isFocused:a,isChecked:o,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,actualValue:d}=zpe(n,e,{model:i}),{isDisabled:f}=Npe({model:i,isChecked:o}),{inputId:h,isLabeledByFormItem:p}=Fo(n,{formItemContext:t,disableIdGeneration:u,disableIdManagement:r}),{handleChange:m,onClickRoot:v}=Bpe(n,{model:i,isLimitExceeded:s,hasOwnLabel:u,isDisabled:f,isLabeledByFormItem:p});return(()=>{function _(){var y,S;nt(i.value)&&!i.value.includes(d.value)?i.value.push(d.value):i.value=(S=(y=n.trueValue)!=null?y:n.trueLabel)!=null?S:!0}n.checked&&_()})(),md({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},N(()=>r.value&&Nh(n.value))),md({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},N(()=>!!n.trueLabel)),md({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},N(()=>!!n.falseLabel)),{inputId:h,isLabeledByFormItem:p,isChecked:o,isDisabled:f,isFocused:a,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,model:i,actualValue:d,handleChange:m,onClickRoot:v}},Upe=ve({name:"ElCheckbox"}),Hpe=ve({...Upe,props:PW,emits:DW,setup(n){const e=n,t=ur(),{inputId:i,isLabeledByFormItem:r,isChecked:s,isDisabled:a,isFocused:o,checkboxSize:l,hasOwnLabel:c,model:u,actualValue:d,handleChange:f,onClickRoot:h}=LW(e,t),p=Ze("checkbox"),m=N(()=>[p.b(),p.m(l.value),p.is("disabled",a.value),p.is("bordered",e.border),p.is("checked",s.value)]),v=N(()=>[p.e("input"),p.is("disabled",a.value),p.is("checked",s.value),p.is("indeterminate",e.indeterminate),p.is("focus",o.value)]);return(g,_)=>(F(),He(en(!b(c)&&b(r)?"span":"label"),{class:$(b(m)),"aria-controls":g.indeterminate?g.ariaControls:null,onClick:b(h)},{default:ge(()=>{var y,S,w,x;return[le("span",{class:$(b(v))},[g.trueValue||g.falseValue||g.trueLabel||g.falseLabel?Wt((F(),ie("input",{key:0,id:b(i),"onUpdate:modelValue":T=>fi(u)?u.value=T:null,class:$(b(p).e("original")),type:"checkbox",indeterminate:g.indeterminate,name:g.name,tabindex:g.tabindex,disabled:b(a),"true-value":(S=(y=g.trueValue)!=null?y:g.trueLabel)!=null?S:!0,"false-value":(x=(w=g.falseValue)!=null?w:g.falseLabel)!=null?x:!1,onChange:b(f),onFocus:T=>o.value=!0,onBlur:T=>o.value=!1,onClick:Pt(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[ox,b(u)]]):Wt((F(),ie("input",{key:1,id:b(i),"onUpdate:modelValue":T=>fi(u)?u.value=T:null,class:$(b(p).e("original")),type:"checkbox",indeterminate:g.indeterminate,disabled:b(a),value:b(d),name:g.name,tabindex:g.tabindex,onChange:b(f),onFocus:T=>o.value=!0,onBlur:T=>o.value=!1,onClick:Pt(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","disabled","value","name","tabindex","onChange","onFocus","onBlur","onClick"])),[[ox,b(u)]]),le("span",{class:$(b(p).e("inner"))},null,2)],2),b(c)?(F(),ie("span",{key:0,class:$(b(p).e("label"))},[Ne(g.$slots,"default"),g.$slots.default?Be("v-if",!0):(F(),ie(bt,{key:0},[Xt(rt(g.label),1)],64))],2)):Be("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var Vpe=ot(Hpe,[["__file","checkbox.vue"]]);const $pe=ve({name:"ElCheckboxButton"}),Gpe=ve({...$pe,props:PW,emits:DW,setup(n){const e=n,t=ur(),{isFocused:i,isChecked:r,isDisabled:s,checkboxButtonSize:a,model:o,actualValue:l,handleChange:c}=LW(e,t),u=mt(gg,void 0),d=Ze("checkbox"),f=N(()=>{var p,m,v,g;const _=(m=(p=u==null?void 0:u.fill)==null?void 0:p.value)!=null?m:"";return{backgroundColor:_,borderColor:_,color:(g=(v=u==null?void 0:u.textColor)==null?void 0:v.value)!=null?g:"",boxShadow:_?`-1px 0 0 0 ${_}`:void 0}}),h=N(()=>[d.b("button"),d.bm("button",a.value),d.is("disabled",s.value),d.is("checked",r.value),d.is("focus",i.value)]);return(p,m)=>{var v,g,_,y;return F(),ie("label",{class:$(b(h))},[p.trueValue||p.falseValue||p.trueLabel||p.falseLabel?Wt((F(),ie("input",{key:0,"onUpdate:modelValue":S=>fi(o)?o.value=S:null,class:$(b(d).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:b(s),"true-value":(g=(v=p.trueValue)!=null?v:p.trueLabel)!=null?g:!0,"false-value":(y=(_=p.falseValue)!=null?_:p.falseLabel)!=null?y:!1,onChange:b(c),onFocus:S=>i.value=!0,onBlur:S=>i.value=!1,onClick:Pt(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[ox,b(o)]]):Wt((F(),ie("input",{key:1,"onUpdate:modelValue":S=>fi(o)?o.value=S:null,class:$(b(d).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:b(s),value:b(l),onChange:b(c),onFocus:S=>i.value=!0,onBlur:S=>i.value=!1,onClick:Pt(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","value","onChange","onFocus","onBlur","onClick"])),[[ox,b(o)]]),p.$slots.default||p.label?(F(),ie("span",{key:2,class:$(b(d).be("button","inner")),style:Ct(b(r)?b(f):void 0)},[Ne(p.$slots,"default",{},()=>[Xt(rt(p.label),1)])],6)):Be("v-if",!0)],2)}}});var kW=ot(Gpe,[["__file","checkbox-button.vue"]]);const Wpe=at({modelValue:{type:Re(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:cr,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...Zr(["ariaLabel"])}),Kpe={[Kt]:n=>nt(n),change:n=>nt(n)},qpe=ve({name:"ElCheckboxGroup"}),Xpe=ve({...qpe,props:Wpe,emits:Kpe,setup(n,{emit:e}){const t=n,i=Ze("checkbox"),{formItem:r}=fs(),{inputId:s,isLabeledByFormItem:a}=Fo(t,{formItemContext:r}),o=async c=>{e(Kt,c),await Mt(),e("change",c)},l=N({get(){return t.modelValue},set(c){o(c)}});return un(gg,{...rl(Mr(t),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:o}),We(()=>t.modelValue,()=>{t.validateEvent&&(r==null||r.validate("change").catch(c=>void 0))}),(c,u)=>{var d;return F(),He(en(c.tag),{id:b(s),class:$(b(i).b("group")),role:"group","aria-label":b(a)?void 0:c.ariaLabel||"checkbox-group","aria-labelledby":b(a)?(d=b(r))==null?void 0:d.labelId:void 0},{default:ge(()=>[Ne(c.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var OW=ot(Xpe,[["__file","checkbox-group.vue"]]);const ko=Ft(Vpe,{CheckboxButton:kW,CheckboxGroup:OW}),Ype=ki(kW),NW=ki(OW),BW=at({modelValue:{type:[String,Number,Boolean],default:void 0},size:cr,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),jpe=at({...BW,border:Boolean}),FW={[Kt]:n=>xt(n)||At(n)||ai(n),[jn]:n=>xt(n)||At(n)||ai(n)},zW=Symbol("radioGroupKey"),UW=(n,e)=>{const t=X(),i=mt(zW,void 0),r=N(()=>!!i),s=N(()=>Nh(n.value)?n.label:n.value),a=N({get(){return r.value?i.modelValue:n.modelValue},set(d){r.value?i.changeEvent(d):e&&e(Kt,d),t.value.checked=n.modelValue===s.value}}),o=tr(N(()=>i==null?void 0:i.size)),l=hs(N(()=>i==null?void 0:i.disabled)),c=X(!1),u=N(()=>l.value||r.value&&a.value!==s.value?-1:0);return md({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},N(()=>r.value&&Nh(n.value))),{radioRef:t,isGroup:r,radioGroup:i,focus:c,size:o,disabled:l,tabIndex:u,modelValue:a,actualValue:s}},Qpe=ve({name:"ElRadio"}),Zpe=ve({...Qpe,props:jpe,emits:FW,setup(n,{emit:e}){const t=n,i=Ze("radio"),{radioRef:r,radioGroup:s,focus:a,size:o,disabled:l,modelValue:c,actualValue:u}=UW(t,e);function d(){Mt(()=>e("change",c.value))}return(f,h)=>{var p;return F(),ie("label",{class:$([b(i).b(),b(i).is("disabled",b(l)),b(i).is("focus",b(a)),b(i).is("bordered",f.border),b(i).is("checked",b(c)===b(u)),b(i).m(b(o))])},[le("span",{class:$([b(i).e("input"),b(i).is("disabled",b(l)),b(i).is("checked",b(c)===b(u))])},[Wt(le("input",{ref_key:"radioRef",ref:r,"onUpdate:modelValue":m=>fi(c)?c.value=m:null,class:$(b(i).e("original")),value:b(u),name:f.name||((p=b(s))==null?void 0:p.name),disabled:b(l),checked:b(c)===b(u),type:"radio",onFocus:m=>a.value=!0,onBlur:m=>a.value=!1,onChange:d,onClick:Pt(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[M8,b(c)]]),le("span",{class:$(b(i).e("inner"))},null,2)],2),le("span",{class:$(b(i).e("label")),onKeydown:Pt(()=>{},["stop"])},[Ne(f.$slots,"default",{},()=>[Xt(rt(f.label),1)])],42,["onKeydown"])],2)}}});var Jpe=ot(Zpe,[["__file","radio.vue"]]);const eme=at({...BW}),tme=ve({name:"ElRadioButton"}),nme=ve({...tme,props:eme,setup(n){const e=n,t=Ze("radio"),{radioRef:i,focus:r,size:s,disabled:a,modelValue:o,radioGroup:l,actualValue:c}=UW(e),u=N(()=>({backgroundColor:(l==null?void 0:l.fill)||"",borderColor:(l==null?void 0:l.fill)||"",boxShadow:l!=null&&l.fill?`-1px 0 0 0 ${l.fill}`:"",color:(l==null?void 0:l.textColor)||""}));return(d,f)=>{var h;return F(),ie("label",{class:$([b(t).b("button"),b(t).is("active",b(o)===b(c)),b(t).is("disabled",b(a)),b(t).is("focus",b(r)),b(t).bm("button",b(s))])},[Wt(le("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":p=>fi(o)?o.value=p:null,class:$(b(t).be("button","original-radio")),value:b(c),type:"radio",name:d.name||((h=b(l))==null?void 0:h.name),disabled:b(a),onFocus:p=>r.value=!0,onBlur:p=>r.value=!1,onClick:Pt(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[M8,b(o)]]),le("span",{class:$(b(t).be("button","inner")),style:Ct(b(o)===b(c)?b(u):{}),onKeydown:Pt(()=>{},["stop"])},[Ne(d.$slots,"default",{},()=>[Xt(rt(d.label),1)])],46,["onKeydown"])],2)}}});var HW=ot(nme,[["__file","radio-button.vue"]]);const ime=at({id:{type:String,default:void 0},size:cr,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...Zr(["ariaLabel"])}),rme=FW,sme=ve({name:"ElRadioGroup"}),ame=ve({...sme,props:ime,emits:rme,setup(n,{emit:e}){const t=n,i=Ze("radio"),r=Qr(),s=X(),{formItem:a}=fs(),{inputId:o,isLabeledByFormItem:l}=Fo(t,{formItemContext:a}),c=d=>{e(Kt,d),Mt(()=>e("change",d))};Ht(()=>{const d=s.value.querySelectorAll("[type=radio]"),f=d[0];!Array.from(d).some(h=>h.checked)&&f&&(f.tabIndex=0)});const u=N(()=>t.name||r.value);return un(zW,Nn({...Mr(t),changeEvent:c,name:u})),We(()=>t.modelValue,()=>{t.validateEvent&&(a==null||a.validate("change").catch(d=>void 0))}),(d,f)=>(F(),ie("div",{id:b(o),ref_key:"radioGroupRef",ref:s,class:$(b(i).b("group")),role:"radiogroup","aria-label":b(l)?void 0:d.ariaLabel||"radio-group","aria-labelledby":b(l)?b(a).labelId:void 0},[Ne(d.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var VW=ot(ame,[["__file","radio-group.vue"]]);const $W=Ft(Jpe,{RadioButton:HW,RadioGroup:VW}),ome=ki(VW),lme=ki(HW);var cme=ve({name:"NodeContent",setup(){return{ns:Ze("cascader-node")}},render(){const{ns:n}=this,{node:e,panel:t}=this.$parent,{data:i,label:r}=e,{renderLabelFn:s}=t;return wt("span",{class:n.e("label")},s?s({node:e,data:i}):r)}});const WL=Symbol(),ume=ve({name:"ElCascaderNode",components:{ElCheckbox:ko,ElRadio:$W,NodeContent:cme,ElIcon:_t,Check:ob,Loading:ql,ArrowRight:js},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(n,{emit:e}){const t=mt(WL),i=Ze("cascader-node"),r=N(()=>t.isHoverMenu),s=N(()=>t.config.multiple),a=N(()=>t.config.checkStrictly),o=N(()=>{var x;return(x=t.checkedNodes[0])==null?void 0:x.uid}),l=N(()=>n.node.isDisabled),c=N(()=>n.node.isLeaf),u=N(()=>a.value&&!c.value||!l.value),d=N(()=>h(t.expandingNode)),f=N(()=>a.value&&t.checkedNodes.some(h)),h=x=>{var T;const{level:C,uid:M}=n.node;return((T=x==null?void 0:x.pathNodes[C-1])==null?void 0:T.uid)===M},p=()=>{d.value||t.expandNode(n.node)},m=x=>{const{node:T}=n;x!==T.checked&&t.handleCheckChange(T,x)},v=()=>{t.lazyLoad(n.node,()=>{c.value||p()})},g=x=>{r.value&&(_(),!c.value&&e("expand",x))},_=()=>{const{node:x}=n;!u.value||x.loading||(x.loaded?p():v())},y=()=>{r.value&&!c.value||(c.value&&!l.value&&!a.value&&!s.value?w(!0):_())},S=x=>{a.value?(m(x),n.node.loaded&&p()):w(x)},w=x=>{n.node.loaded?(m(x),!a.value&&p()):v()};return{panel:t,isHoverMenu:r,multiple:s,checkStrictly:a,checkedNodeId:o,isDisabled:l,isLeaf:c,expandable:u,inExpandingPath:d,inCheckedPath:f,ns:i,handleHoverExpand:g,handleExpand:_,handleClick:y,handleCheck:w,handleSelectCheck:S}}});function dme(n,e,t,i,r,s){const a=yt("el-checkbox"),o=yt("el-radio"),l=yt("check"),c=yt("el-icon"),u=yt("node-content"),d=yt("loading"),f=yt("arrow-right");return F(),ie("li",{id:`${n.menuId}-${n.node.uid}`,role:"menuitem","aria-haspopup":!n.isLeaf,"aria-owns":n.isLeaf?null:n.menuId,"aria-expanded":n.inExpandingPath,tabindex:n.expandable?-1:void 0,class:$([n.ns.b(),n.ns.is("selectable",n.checkStrictly),n.ns.is("active",n.node.checked),n.ns.is("disabled",!n.expandable),n.inExpandingPath&&"in-active-path",n.inCheckedPath&&"in-checked-path"]),onMouseenter:n.handleHoverExpand,onFocus:n.handleHoverExpand,onClick:n.handleClick},[Be(" prefix "),n.multiple?(F(),He(a,{key:0,"model-value":n.node.checked,indeterminate:n.node.indeterminate,disabled:n.isDisabled,onClick:Pt(()=>{},["stop"]),"onUpdate:modelValue":n.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):n.checkStrictly?(F(),He(o,{key:1,"model-value":n.checkedNodeId,label:n.node.uid,disabled:n.isDisabled,"onUpdate:modelValue":n.handleSelectCheck,onClick:Pt(()=>{},["stop"])},{default:ge(()=>[Be(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),le("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):n.isLeaf&&n.node.checked?(F(),He(c,{key:2,class:$(n.ns.e("prefix"))},{default:ge(()=>[oe(l)]),_:1},8,["class"])):Be("v-if",!0),Be(" content "),oe(u),Be(" postfix "),n.isLeaf?Be("v-if",!0):(F(),ie(bt,{key:3},[n.node.loading?(F(),He(c,{key:0,class:$([n.ns.is("loading"),n.ns.e("postfix")])},{default:ge(()=>[oe(d)]),_:1},8,["class"])):(F(),He(c,{key:1,class:$(["arrow-right",n.ns.e("postfix")])},{default:ge(()=>[oe(f)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var fme=ot(ume,[["render",dme],["__file","node.vue"]]);const hme=ve({name:"ElCascaderMenu",components:{Loading:ql,ElIcon:_t,ElScrollbar:ic,ElCascaderNode:fme},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(n){const e=jt(),t=Ze("cascader-menu"),{t:i}=xn(),r=Qr();let s=null,a=null;const o=mt(WL),l=X(null),c=N(()=>!n.nodes.length),u=N(()=>!o.initialLoaded),d=N(()=>`${r.value}-${n.index}`),f=v=>{s=v.target},h=v=>{if(!(!o.isHoverMenu||!s||!l.value))if(s.contains(v.target)){p();const g=e.vnode.el,{left:_}=g.getBoundingClientRect(),{offsetWidth:y,offsetHeight:S}=g,w=v.clientX-_,x=s.offsetTop,T=x+s.offsetHeight;l.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${w} ${x} L${y} 0 V${x} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${w} ${T} L${y} ${S} V${T} Z" />
        `}else a||(a=window.setTimeout(m,o.config.hoverThreshold))},p=()=>{a&&(clearTimeout(a),a=null)},m=()=>{l.value&&(l.value.innerHTML="",p())};return{ns:t,panel:o,hoverZone:l,isEmpty:c,isLoading:u,menuId:d,t:i,handleExpand:f,handleMouseMove:h,clearHoverZone:m}}});function pme(n,e,t,i,r,s){const a=yt("el-cascader-node"),o=yt("loading"),l=yt("el-icon"),c=yt("el-scrollbar");return F(),He(c,{key:n.menuId,tag:"ul",role:"menu",class:$(n.ns.b()),"wrap-class":n.ns.e("wrap"),"view-class":[n.ns.e("list"),n.ns.is("empty",n.isEmpty)],onMousemove:n.handleMouseMove,onMouseleave:n.clearHoverZone},{default:ge(()=>{var u;return[(F(!0),ie(bt,null,sn(n.nodes,d=>(F(),He(a,{key:d.uid,node:d,"menu-id":n.menuId,onExpand:n.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),n.isLoading?(F(),ie("div",{key:0,class:$(n.ns.e("empty-text"))},[oe(l,{size:"14",class:$(n.ns.is("loading"))},{default:ge(()=>[oe(o)]),_:1},8,["class"]),Xt(" "+rt(n.t("el.cascader.loading")),1)],2)):n.isEmpty?(F(),ie("div",{key:1,class:$(n.ns.e("empty-text"))},[Ne(n.$slots,"empty",{},()=>[Xt(rt(n.t("el.cascader.noData")),1)])],2)):(u=n.panel)!=null&&u.isHoverMenu?(F(),ie("svg",{key:2,ref:"hoverZone",class:$(n.ns.e("hover-zone"))},null,2)):Be("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var mme=ot(hme,[["render",pme],["__file","menu.vue"]]);const KL=(n="")=>n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),Dl=n=>tb(n);let vme=0;const gme=n=>{const e=[n];let{parent:t}=n;for(;t;)e.unshift(t),t=t.parent;return e};let cI=class uI{constructor(e,t,i,r=!1){this.data=e,this.config=t,this.parent=i,this.root=r,this.uid=vme++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:s,label:a,children:o}=t,l=e[o],c=gme(this);this.level=r?0:i?i.level+1:1,this.value=e[s],this.label=e[a],this.pathNodes=c,this.pathValues=c.map(u=>u.value),this.pathLabels=c.map(u=>u.label),this.childrenData=l,this.children=(l||[]).map(u=>new uI(u,t,this)),this.loaded=!t.lazy||this.isLeaf||!ka(l)}get isDisabled(){const{data:e,parent:t,config:i}=this,{disabled:r,checkStrictly:s}=i;return(Tt(r)?r(e,this):!!e[r])||!s&&(t==null?void 0:t.isDisabled)}get isLeaf(){const{data:e,config:t,childrenData:i,loaded:r}=this,{lazy:s,leaf:a}=t,o=Tt(a)?a(e,this):e[a];return Wn(o)?s&&!r?!1:!(nt(i)&&i.length):!!o}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:t,children:i}=this,r=new uI(e,this.config,this);return nt(t)?t.push(e):this.childrenData=[e],i.push(r),r}calcText(e,t){const i=e?this.pathLabels.join(t):this.label;return this.text=i,i}broadcast(e,...t){const i=`onParent${Dl(e)}`;this.children.forEach(r=>{r&&(r.broadcast(e,...t),r[i]&&r[i](...t))})}emit(e,...t){const{parent:i}=this,r=`onChild${Dl(e)}`;i&&(i[r]&&i[r](...t),i.emit(e,...t))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,t=e.filter(r=>!r.isDisabled),i=t.length?t.every(r=>r.checked):!1;this.setCheckState(i)}setCheckState(e){const t=this.children.length,i=this.children.reduce((r,s)=>{const a=s.checked?1:s.indeterminate?.5:0;return r+a},0);this.checked=this.loaded&&this.children.filter(r=>!r.isDisabled).every(r=>r.loaded&&r.checked)&&e,this.indeterminate=this.loaded&&i!==t&&i>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:t,multiple:i}=this.config;t||!i?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}};const dI=(n,e)=>n.reduce((t,i)=>(i.isLeaf?t.push(i):(!e&&t.push(i),t=t.concat(dI(i.children,e))),t),[]);class pF{constructor(e,t){this.config=t;const i=(e||[]).map(r=>new cI(r,this.config));this.nodes=i,this.allNodes=dI(i,!1),this.leafNodes=dI(i,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,t){const i=t?t.appendChild(e):new cI(e,this.config);t||this.nodes.push(i),this.allNodes.push(i),i.isLeaf&&this.leafNodes.push(i)}appendNodes(e,t){e.forEach(i=>this.appendNode(i,t))}getNodeByValue(e,t=!1){return!e&&e!==0?null:this.getFlattedNodes(t).find(r=>jr(r.value,e)||jr(r.pathValues,e))||null}getSameNode(e){return e&&this.getFlattedNodes(!1).find(({value:i,level:r})=>jr(e.value,i)&&e.level===r)||null}}const GW=at({modelValue:{type:Re([Number,String,Array])},options:{type:Re(Array),default:()=>[]},props:{type:Re(Object),default:()=>({})}}),yme={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Vn,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},_me=n=>N(()=>({...yme,...n.props})),mF=n=>{if(!n)return 0;const e=n.id.split("-");return Number(e[e.length-2])},bme=n=>{if(!n)return;const e=n.querySelector("input");e?e.click():XG(n)&&n.click()},Sme=(n,e)=>{const t=e.slice(0),i=t.map(s=>s.uid),r=n.reduce((s,a)=>{const o=i.indexOf(a.uid);return o>-1&&(s.push(a),t.splice(o,1),i.splice(o,1)),s},[]);return r.push(...t),r},vF=n=>[...new Set(n)],Ks=n=>!n&&n!==0?[]:nt(n)?n:[n],wme=ve({name:"ElCascaderPanel",components:{ElCascaderMenu:mme},props:{...GW,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Kt,jn,"close","expand-change"],setup(n,{emit:e,slots:t}){let i=!1;const r=Ze("cascader"),s=_me(n);let a=null;const o=X(!0),l=X([]),c=X(null),u=X([]),d=X(null),f=X([]),h=N(()=>s.value.expandTrigger==="hover"),p=N(()=>n.renderLabel||t.default),m=()=>{const{options:I}=n,P=s.value;i=!1,a=new pF(I,P),u.value=[a.getNodes()],P.lazy&&ka(n.options)?(o.value=!1,v(void 0,D=>{D&&(a=new pF(D,P),u.value=[a.getNodes()]),o.value=!0,C(!1,!0)})):C(!1,!0)},v=(I,P)=>{const D=s.value;I=I||new cI({},D,void 0,!0),I.loading=!0;const L=R=>{const B=I,k=B.root?null:B;R&&(a==null||a.appendNodes(R,k)),B.loading=!1,B.loaded=!0,B.childrenData=B.childrenData||[],P&&P(R)};D.lazyLoad(I,L)},g=(I,P)=>{var D;const{level:L}=I,R=u.value.slice(0,L);let B;I.isLeaf?B=I.pathNodes[L-2]:(B=I,R.push(I.children)),((D=d.value)==null?void 0:D.uid)!==(B==null?void 0:B.uid)&&(d.value=I,u.value=R,!P&&e("expand-change",(I==null?void 0:I.pathValues)||[]))},_=(I,P,D=!0)=>{const{checkStrictly:L,multiple:R}=s.value,B=f.value[0];i=!0,!R&&(B==null||B.doCheck(!1)),I.doCheck(P),T(),D&&!R&&!L&&e("close"),!D&&!R&&!L&&y(I)},y=I=>{I&&(I=I.parent,y(I),I&&g(I))},S=I=>a==null?void 0:a.getFlattedNodes(I),w=I=>{var P;return(P=S(I))==null?void 0:P.filter(D=>D.checked!==!1)},x=()=>{f.value.forEach(I=>I.doCheck(!1)),T(),u.value=u.value.slice(0,1),d.value=null,e("expand-change",[])},T=()=>{var I;const{checkStrictly:P,multiple:D}=s.value,L=f.value,R=w(!P),B=Sme(L,R),k=B.map(O=>O.valueByOption);f.value=B,c.value=D?k:(I=k[0])!=null?I:null},C=(I=!1,P=!1)=>{const{modelValue:D}=n,{lazy:L,multiple:R,checkStrictly:B}=s.value,k=!B;if(!(!o.value||i||!P&&jr(D,c.value)))if(L&&!I){const U=vF(uoe(Ks(D))).map(G=>a==null?void 0:a.getNodeByValue(G)).filter(G=>!!G&&!G.loaded&&!G.loading);U.length?U.forEach(G=>{v(G,()=>C(!1,P))}):C(!0,P)}else{const O=R?Ks(D):[D],U=vF(O.map(G=>a==null?void 0:a.getNodeByValue(G,k)));M(U,P),c.value=ux(D)}},M=(I,P=!0)=>{const{checkStrictly:D}=s.value,L=f.value,R=I.filter(O=>!!O&&(D||O.isLeaf)),B=a==null?void 0:a.getSameNode(d.value),k=P&&B||R[0];k?k.pathNodes.forEach(O=>g(O,!0)):d.value=null,L.forEach(O=>O.doCheck(!1)),Nn(R).forEach(O=>O.doCheck(!0)),f.value=R,Mt(A)},A=()=>{wn&&l.value.forEach(I=>{const P=I==null?void 0:I.$el;if(P){const D=P.querySelector(`.${r.namespace.value}-scrollbar__wrap`),L=P.querySelector(`.${r.b("node")}.${r.is("active")}`)||P.querySelector(`.${r.b("node")}.in-active-path`);SL(D,L)}})},E=I=>{const P=I.target,{code:D}=I;switch(D){case ut.up:case ut.down:{I.preventDefault();const L=D===ut.up?-1:1;o1(YG(P,L,`.${r.b("node")}[tabindex="-1"]`));break}case ut.left:{I.preventDefault();const L=l.value[mF(P)-1],R=L==null?void 0:L.$el.querySelector(`.${r.b("node")}[aria-expanded="true"]`);o1(R);break}case ut.right:{I.preventDefault();const L=l.value[mF(P)+1],R=L==null?void 0:L.$el.querySelector(`.${r.b("node")}[tabindex="-1"]`);o1(R);break}case ut.enter:case ut.numpadEnter:bme(P);break}};return un(WL,Nn({config:s,expandingNode:d,checkedNodes:f,isHoverMenu:h,initialLoaded:o,renderLabelFn:p,lazyLoad:v,expandNode:g,handleCheckChange:_})),We([s,()=>n.options],m,{deep:!0,immediate:!0}),We(()=>n.modelValue,()=>{i=!1,C()},{deep:!0}),We(()=>c.value,I=>{jr(I,n.modelValue)||(e(Kt,I),e(jn,I))}),qD(()=>l.value=[]),Ht(()=>!ka(n.modelValue)&&C()),{ns:r,menuList:l,menus:u,checkedNodes:f,handleKeyDown:E,handleCheckChange:_,getFlattedNodes:S,getCheckedNodes:w,clearCheckedNodes:x,calculateCheckedValue:T,scrollToExpandingNode:A}}});function xme(n,e,t,i,r,s){const a=yt("el-cascader-menu");return F(),ie("div",{class:$([n.ns.b("panel"),n.ns.is("bordered",n.border)]),onKeydown:n.handleKeyDown},[(F(!0),ie(bt,null,sn(n.menus,(o,l)=>(F(),He(a,{key:l,ref_for:!0,ref:c=>n.menuList[l]=c,index:l,nodes:[...o]},{empty:ge(()=>[Ne(n.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var Cme=ot(wme,[["render",xme],["__file","index.vue"]]);const WW=Ft(Cme),Jc=at({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:nc},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),Mme={close:n=>n instanceof MouseEvent,click:n=>n instanceof MouseEvent},Tme=ve({name:"ElTag"}),Ame=ve({...Tme,props:Jc,emits:Mme,setup(n,{emit:e}){const t=n,i=tr(),r=Ze("tag"),s=N(()=>{const{type:c,hit:u,effect:d,closable:f,round:h}=t;return[r.b(),r.is("closable",f),r.m(c||"primary"),r.m(i.value),r.m(d),r.is("hit",u),r.is("round",h)]}),a=c=>{e("close",c)},o=c=>{e("click",c)},l=c=>{var u,d,f;(f=(d=(u=c==null?void 0:c.component)==null?void 0:u.subTree)==null?void 0:d.component)!=null&&f.bum&&(c.component.subTree.component.bum=null)};return(c,u)=>c.disableTransitions?(F(),ie("span",{key:0,class:$(b(s)),style:Ct({backgroundColor:c.color}),onClick:o},[le("span",{class:$(b(r).e("content"))},[Ne(c.$slots,"default")],2),c.closable?(F(),He(b(_t),{key:0,class:$(b(r).e("close")),onClick:Pt(a,["stop"])},{default:ge(()=>[oe(b(fl))]),_:1},8,["class","onClick"])):Be("v-if",!0)],6)):(F(),He(yr,{key:1,name:`${b(r).namespace.value}-zoom-in-center`,appear:"",onVnodeMounted:l},{default:ge(()=>[le("span",{class:$(b(s)),style:Ct({backgroundColor:c.color}),onClick:o},[le("span",{class:$(b(r).e("content"))},[Ne(c.$slots,"default")],2),c.closable?(F(),He(b(_t),{key:0,class:$(b(r).e("close")),onClick:Pt(a,["stop"])},{default:ge(()=>[oe(b(fl))]),_:1},8,["class","onClick"])):Be("v-if",!0)],6)]),_:3},8,["name"]))}});var Eme=ot(Ame,[["__file","tag.vue"]]);const Iv=Ft(Eme),Ime=at({...GW,size:cr,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Re(Function),default:(n,e)=>n.text.includes(e)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Re(Function),default:()=>!0},placement:{type:Re(String),values:hu,default:"bottom-start"},fallbackPlacements:{type:Re(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:Rr.teleported,tagType:{...Jc.type,default:"info"},tagEffect:{...Jc.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...pg}),Rme={[Kt]:n=>!0,[jn]:n=>!0,focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,visibleChange:n=>ai(n),expandChange:n=>!!n,removeTag:n=>!!n},ju=new Map;if(wn){let n;document.addEventListener("mousedown",e=>n=e),document.addEventListener("mouseup",e=>{if(n){for(const t of ju.values())for(const{documentHandler:i}of t)i(e,n);n=void 0}})}function gF(n,e){let t=[];return nt(e.arg)?t=e.arg:za(e.arg)&&t.push(e.arg),function(i,r){const s=e.instance.popperRef,a=i.target,o=r==null?void 0:r.target,l=!e||!e.instance,c=!a||!o,u=n.contains(a)||n.contains(o),d=n===a,f=t.length&&t.some(p=>p==null?void 0:p.contains(a))||t.length&&t.includes(o),h=s&&(s.contains(a)||s.contains(o));l||c||u||d||f||h||e.value(i,r)}}const eu={beforeMount(n,e){ju.has(n)||ju.set(n,[]),ju.get(n).push({documentHandler:gF(n,e),bindingFn:e.value})},updated(n,e){ju.has(n)||ju.set(n,[]);const t=ju.get(n),i=t.findIndex(s=>s.bindingFn===e.oldValue),r={documentHandler:gF(n,e),bindingFn:e.value};i>=0?t.splice(i,1,r):t.push(r)},unmounted(n){ju.delete(n)}},Pme="ElCascader",Dme=ve({name:Pme}),Lme=ve({...Dme,props:Ime,emits:Rme,setup(n,{expose:e,emit:t}){const i=n,r={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:te})=>{const{modifiersData:pe,placement:se}=te;["right","left","bottom","top"].includes(se)||(pe.arrow.x=35)},requires:["arrow"]}]},s=Zd();let a=0,o=0;const l=Ze("cascader"),c=Ze("input"),{t:u}=xn(),{form:d,formItem:f}=fs(),{valueOnClear:h}=sM(i),{isComposing:p,handleComposition:m}=cb({afterComposition(te){var pe;const se=(pe=te.target)==null?void 0:pe.value;V(se)}}),v=X(null),g=X(null),_=X(null),y=X(null),S=X(null),w=X(!1),x=X(!1),T=X(!1),C=X(!1),M=X(""),A=X(""),E=X([]),I=X([]),P=X([]),D=N(()=>s.style),L=N(()=>i.disabled||(d==null?void 0:d.disabled)),R=N(()=>i.placeholder||u("el.cascader.placeholder")),B=N(()=>A.value||E.value.length>0||p.value?"":R.value),k=tr(),O=N(()=>k.value==="small"?"small":"default"),U=N(()=>!!i.props.multiple),G=N(()=>!i.filterable||U.value),q=N(()=>U.value?A.value:M.value),W=N(()=>{var te;return((te=y.value)==null?void 0:te.checkedNodes)||[]}),Y=N(()=>!i.clearable||L.value||T.value||!x.value?!1:!!W.value.length),J=N(()=>{const{showAllLevels:te,separator:pe}=i,se=W.value;return se.length?U.value?"":se[0].calcText(te,pe):""}),Z=N(()=>(f==null?void 0:f.validateState)||""),ee=N({get(){return ux(i.modelValue)},set(te){const pe=te??h.value;t(Kt,pe),t(jn,pe),i.validateEvent&&(f==null||f.validate("change").catch(se=>void 0))}}),me=N(()=>[l.b(),l.m(k.value),l.is("disabled",L.value),s.class]),ye=N(()=>[c.e("icon"),"icon-arrow-down",l.is("reverse",w.value)]),Te=N(()=>l.is("focus",w.value||C.value)),Ee=N(()=>{var te,pe;return(pe=(te=v.value)==null?void 0:te.popperRef)==null?void 0:pe.contentRef}),H=te=>{var pe,se,de;L.value||(te=te??!w.value,te!==w.value&&(w.value=te,(se=(pe=g.value)==null?void 0:pe.input)==null||se.setAttribute("aria-expanded",`${te}`),te?(Q(),Mt((de=y.value)==null?void 0:de.scrollToExpandingNode)):i.filterable&&xe(),t("visibleChange",te)))},Q=()=>{Mt(()=>{var te;(te=v.value)==null||te.updatePopper()})},j=()=>{T.value=!1},Pe=te=>{const{showAllLevels:pe,separator:se}=i;return{node:te,key:te.uid,text:te.calcText(pe,se),hitState:!1,closable:!L.value&&!te.isDisabled,isCollapseTag:!1}},we=te=>{var pe;const se=te.node;se.doCheck(!1),(pe=y.value)==null||pe.calculateCheckedValue(),t("removeTag",se.valueByOption)},De=()=>{if(!U.value)return;const te=W.value,pe=[],se=[];if(te.forEach(de=>se.push(Pe(de))),I.value=se,te.length){te.slice(0,i.maxCollapseTags).forEach(fe=>pe.push(Pe(fe)));const de=te.slice(i.maxCollapseTags),qe=de.length;qe&&(i.collapseTags?pe.push({key:-1,text:`+ ${qe}`,closable:!1,isCollapseTag:!0}):de.forEach(fe=>pe.push(Pe(fe))))}E.value=pe},Me=()=>{var te,pe;const{filterMethod:se,showAllLevels:de,separator:qe}=i,fe=(pe=(te=y.value)==null?void 0:te.getFlattedNodes(!i.props.checkStrictly))==null?void 0:pe.filter(Je=>Je.isDisabled?!1:(Je.calcText(de,qe),se(Je,q.value)));U.value&&(E.value.forEach(Je=>{Je.hitState=!1}),I.value.forEach(Je=>{Je.hitState=!1})),T.value=!0,P.value=fe,Q()},Ae=()=>{var te;let pe;T.value&&S.value?pe=S.value.$el.querySelector(`.${l.e("suggestion-item")}`):pe=(te=y.value)==null?void 0:te.$el.querySelector(`.${l.b("node")}[tabindex="-1"]`),pe&&(pe.focus(),!T.value&&pe.click())},Fe=()=>{var te,pe;const se=(te=g.value)==null?void 0:te.input,de=_.value,qe=(pe=S.value)==null?void 0:pe.$el;if(!(!wn||!se)){if(qe){const fe=qe.querySelector(`.${l.e("suggestion-list")}`);fe.style.minWidth=`${se.offsetWidth}px`}if(de){const{offsetHeight:fe}=de,Je=E.value.length>0?`${Math.max(fe,a)-2}px`:`${a}px`;se.style.height=Je,Q()}}},ne=te=>{var pe;return(pe=y.value)==null?void 0:pe.getCheckedNodes(te)},z=te=>{Q(),t("expandChange",te)},K=te=>{if(!p.value)switch(te.code){case ut.enter:case ut.numpadEnter:H();break;case ut.down:H(!0),Mt(Ae),te.preventDefault();break;case ut.esc:w.value===!0&&(te.preventDefault(),te.stopPropagation(),H(!1));break;case ut.tab:H(!1);break}},ae=()=>{var te;(te=y.value)==null||te.clearCheckedNodes(),!w.value&&i.filterable&&xe(),H(!1),t("clear")},xe=()=>{const{value:te}=J;M.value=te,A.value=te},Le=te=>{var pe,se;const{checked:de}=te;U.value?(pe=y.value)==null||pe.handleCheckChange(te,!de,!1):(!de&&((se=y.value)==null||se.handleCheckChange(te,!0,!1)),H(!1))},Xe=te=>{const pe=te.target,{code:se}=te;switch(se){case ut.up:case ut.down:{const de=se===ut.up?-1:1;o1(YG(pe,de,`.${l.e("suggestion-item")}[tabindex="-1"]`));break}case ut.enter:case ut.numpadEnter:pe.click();break}},je=()=>{const te=E.value,pe=te[te.length-1];o=A.value?0:o+1,!(!pe||!o||i.collapseTags&&te.length>1)&&(pe.hitState?we(pe):pe.hitState=!0)},he=te=>{const pe=te.target,se=l.e("search-input");pe.className===se&&(C.value=!0),t("focus",te)},Ye=te=>{C.value=!1,t("blur",te)},Ke=wa(()=>{const{value:te}=q;if(!te)return;const pe=i.beforeFilter(te);Fy(pe)?pe.then(Me).catch(()=>{}):pe!==!1?Me():j()},i.debounce),V=(te,pe)=>{!w.value&&H(!0),!(pe!=null&&pe.isComposing)&&(te?Ke():j())},re=te=>Number.parseFloat(joe(c.cssVarName("input-height"),te).value)-2;return We(T,Q),We([W,L,()=>i.collapseTags],De),We(E,()=>{Mt(()=>Fe())}),We(k,async()=>{await Mt();const te=g.value.input;a=re(te)||a,Fe()}),We(J,xe,{immediate:!0}),Ht(()=>{const te=g.value.input,pe=re(te);a=te.offsetHeight||pe,Ti(te,Fe)}),e({getCheckedNodes:ne,cascaderPanelRef:y,togglePopperVisible:H,contentRef:Ee,presentText:J}),(te,pe)=>(F(),He(b(us),{ref_key:"tooltipRef",ref:v,visible:w.value,teleported:te.teleported,"popper-class":[b(l).e("dropdown"),te.popperClass],"popper-options":r,"fallback-placements":te.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:te.placement,transition:`${b(l).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:te.persistent,onHide:j},{default:ge(()=>[Wt((F(),ie("div",{class:$(b(me)),style:Ct(b(D)),onClick:()=>H(b(G)?void 0:!0),onKeydown:K,onMouseenter:se=>x.value=!0,onMouseleave:se=>x.value=!1},[oe(b(Rs),{ref_key:"input",ref:g,modelValue:M.value,"onUpdate:modelValue":se=>M.value=se,placeholder:b(B),readonly:b(G),disabled:b(L),"validate-event":!1,size:b(k),class:$(b(Te)),tabindex:b(U)&&te.filterable&&!b(L)?-1:void 0,onCompositionstart:b(m),onCompositionupdate:b(m),onCompositionend:b(m),onFocus:he,onBlur:Ye,onInput:V},{suffix:ge(()=>[b(Y)?(F(),He(b(_t),{key:"clear",class:$([b(c).e("icon"),"icon-circle-close"]),onClick:Pt(ae,["stop"])},{default:ge(()=>[oe(b(fu))]),_:1},8,["class","onClick"])):(F(),He(b(_t),{key:"arrow-down",class:$(b(ye)),onClick:Pt(se=>H(),["stop"])},{default:ge(()=>[oe(b(du))]),_:1},8,["class","onClick"]))]),_:1},8,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),b(U)?(F(),ie("div",{key:0,ref_key:"tagWrapper",ref:_,class:$([b(l).e("tags"),b(l).is("validate",!!b(Z))])},[(F(!0),ie(bt,null,sn(E.value,se=>(F(),He(b(Iv),{key:se.key,type:te.tagType,size:b(O),effect:te.tagEffect,hit:se.hitState,closable:se.closable,"disable-transitions":"",onClose:de=>we(se)},{default:ge(()=>[se.isCollapseTag===!1?(F(),ie("span",{key:0},rt(se.text),1)):(F(),He(b(us),{key:1,disabled:w.value||!te.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:ge(()=>[le("span",null,rt(se.text),1)]),content:ge(()=>[le("div",{class:$(b(l).e("collapse-tags"))},[(F(!0),ie(bt,null,sn(I.value.slice(te.maxCollapseTags),(de,qe)=>(F(),ie("div",{key:qe,class:$(b(l).e("collapse-tag"))},[(F(),He(b(Iv),{key:de.key,class:"in-tooltip",type:te.tagType,size:b(O),effect:te.tagEffect,hit:de.hitState,closable:de.closable,"disable-transitions":"",onClose:fe=>we(de)},{default:ge(()=>[le("span",null,rt(de.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),te.filterable&&!b(L)?Wt((F(),ie("input",{key:0,"onUpdate:modelValue":se=>A.value=se,type:"text",class:$(b(l).e("search-input")),placeholder:b(J)?"":b(R),onInput:se=>V(A.value,se),onClick:Pt(se=>H(!0),["stop"]),onKeydown:ri(je,["delete"]),onCompositionstart:b(m),onCompositionupdate:b(m),onCompositionend:b(m),onFocus:he,onBlur:Ye},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[jC,A.value]]):Be("v-if",!0)],2)):Be("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[b(eu),()=>H(!1),b(Ee)]])]),content:ge(()=>[Wt(oe(b(WW),{ref_key:"cascaderPanelRef",ref:y,modelValue:b(ee),"onUpdate:modelValue":se=>fi(ee)?ee.value=se:null,options:te.options,props:i.props,border:!1,"render-label":te.$slots.default,onExpandChange:z,onClose:se=>te.$nextTick(()=>H(!1))},{empty:ge(()=>[Ne(te.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Dn,!T.value]]),te.filterable?Wt((F(),He(b(ic),{key:0,ref_key:"suggestionPanel",ref:S,tag:"ul",class:$(b(l).e("suggestion-panel")),"view-class":b(l).e("suggestion-list"),onKeydown:Xe},{default:ge(()=>[P.value.length?(F(!0),ie(bt,{key:0},sn(P.value,se=>(F(),ie("li",{key:se.uid,class:$([b(l).e("suggestion-item"),b(l).is("checked",se.checked)]),tabindex:-1,onClick:de=>Le(se)},[le("span",null,rt(se.text),1),se.checked?(F(),He(b(_t),{key:0},{default:ge(()=>[oe(b(ob))]),_:1})):Be("v-if",!0)],10,["onClick"]))),128)):Ne(te.$slots,"empty",{key:1},()=>[le("li",{class:$(b(l).e("empty-text"))},rt(b(u)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Dn,T.value]]):Be("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var kme=ot(Lme,[["__file","cascader.vue"]]);const Ome=Ft(kme),Nme=at({checked:Boolean,disabled:Boolean,type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"}}),Bme={"update:checked":n=>ai(n),[jn]:n=>ai(n)},Fme=ve({name:"ElCheckTag"}),zme=ve({...Fme,props:Nme,emits:Bme,setup(n,{emit:e}){const t=n,i=Ze("check-tag"),r=N(()=>t.disabled),s=N(()=>[i.b(),i.is("checked",t.checked),i.is("disabled",r.value),i.m(t.type||"primary")]),a=()=>{if(r.value)return;const o=!t.checked;e(jn,o),e("update:checked",o)};return(o,l)=>(F(),ie("span",{class:$(b(s)),onClick:a},[Ne(o.$slots,"default")],2))}});var Ume=ot(zme,[["__file","check-tag.vue"]]);const Hme=Ft(Ume),Vme=at({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:Re([Number,Object]),default:()=>Li({})},sm:{type:Re([Number,Object]),default:()=>Li({})},md:{type:Re([Number,Object]),default:()=>Li({})},lg:{type:Re([Number,Object]),default:()=>Li({})},xl:{type:Re([Number,Object]),default:()=>Li({})}}),KW=Symbol("rowContextKey"),$me=ve({name:"ElCol"}),Gme=ve({...$me,props:Vme,setup(n){const e=n,{gutter:t}=mt(KW,{gutter:N(()=>0)}),i=Ze("col"),r=N(()=>{const a={};return t.value&&(a.paddingLeft=a.paddingRight=`${t.value/2}px`),a}),s=N(()=>{const a=[];return["span","offset","pull","push"].forEach(c=>{const u=e[c];At(u)&&(c==="span"?a.push(i.b(`${e[c]}`)):u>0&&a.push(i.b(`${c}-${e[c]}`)))}),["xs","sm","md","lg","xl"].forEach(c=>{At(e[c])?a.push(i.b(`${c}-${e[c]}`)):Yt(e[c])&&Object.entries(e[c]).forEach(([u,d])=>{a.push(u!=="span"?i.b(`${c}-${u}-${d}`):i.b(`${c}-${d}`))})}),t.value&&a.push(i.is("guttered")),[i.b(),a]});return(a,o)=>(F(),He(en(a.tag),{class:$(b(s)),style:Ct(b(r))},{default:ge(()=>[Ne(a.$slots,"default")]),_:3},8,["class","style"]))}});var Wme=ot(Gme,[["__file","col.vue"]]);const Kme=Ft(Wme),yF=n=>At(n)||xt(n)||nt(n),qme=at({accordion:Boolean,modelValue:{type:Re([Array,String,Number]),default:()=>Li([])}}),Xme={[Kt]:yF,[jn]:yF},qW=Symbol("collapseContextKey"),Yme=(n,e)=>{const t=X(As(n.modelValue)),i=s=>{t.value=s;const a=n.accordion?t.value[0]:t.value;e(Kt,a),e(jn,a)},r=s=>{if(n.accordion)i([t.value[0]===s?"":s]);else{const a=[...t.value],o=a.indexOf(s);o>-1?a.splice(o,1):a.push(s),i(a)}};return We(()=>n.modelValue,()=>t.value=As(n.modelValue),{deep:!0}),un(qW,{activeNames:t,handleItemClick:r}),{activeNames:t,setActiveNames:i}},jme=()=>{const n=Ze("collapse");return{rootKls:N(()=>n.b())}},Qme=ve({name:"ElCollapse"}),Zme=ve({...Qme,props:qme,emits:Xme,setup(n,{expose:e,emit:t}){const i=n,{activeNames:r,setActiveNames:s}=Yme(i,t),{rootKls:a}=jme();return e({activeNames:r,setActiveNames:s}),(o,l)=>(F(),ie("div",{class:$(b(a))},[Ne(o.$slots,"default")],2))}});var Jme=ot(Zme,[["__file","collapse.vue"]]);const eve=ve({name:"ElCollapseTransition"}),tve=ve({...eve,setup(n){const e=Ze("collapse-transition"),t=r=>{r.style.maxHeight="",r.style.overflow=r.dataset.oldOverflow,r.style.paddingTop=r.dataset.oldPaddingTop,r.style.paddingBottom=r.dataset.oldPaddingBottom},i={beforeEnter(r){r.dataset||(r.dataset={}),r.dataset.oldPaddingTop=r.style.paddingTop,r.dataset.oldPaddingBottom=r.style.paddingBottom,r.style.height&&(r.dataset.elExistsHeight=r.style.height),r.style.maxHeight=0,r.style.paddingTop=0,r.style.paddingBottom=0},enter(r){requestAnimationFrame(()=>{r.dataset.oldOverflow=r.style.overflow,r.dataset.elExistsHeight?r.style.maxHeight=r.dataset.elExistsHeight:r.scrollHeight!==0?r.style.maxHeight=`${r.scrollHeight}px`:r.style.maxHeight=0,r.style.paddingTop=r.dataset.oldPaddingTop,r.style.paddingBottom=r.dataset.oldPaddingBottom,r.style.overflow="hidden"})},afterEnter(r){r.style.maxHeight="",r.style.overflow=r.dataset.oldOverflow},enterCancelled(r){t(r)},beforeLeave(r){r.dataset||(r.dataset={}),r.dataset.oldPaddingTop=r.style.paddingTop,r.dataset.oldPaddingBottom=r.style.paddingBottom,r.dataset.oldOverflow=r.style.overflow,r.style.maxHeight=`${r.scrollHeight}px`,r.style.overflow="hidden"},leave(r){r.scrollHeight!==0&&(r.style.maxHeight=0,r.style.paddingTop=0,r.style.paddingBottom=0)},afterLeave(r){t(r)},leaveCancelled(r){t(r)}};return(r,s)=>(F(),He(yr,rn({name:b(e).b()},oee(i)),{default:ge(()=>[Ne(r.$slots,"default")]),_:3},16,["name"]))}});var nve=ot(tve,[["__file","collapse-transition.vue"]]);const pM=Ft(nve),ive=at({title:{type:String,default:""},name:{type:Re([String,Number]),default:void 0},icon:{type:Zn,default:js},disabled:Boolean}),rve=n=>{const e=mt(qW),{namespace:t}=Ze("collapse"),i=X(!1),r=X(!1),s=RL(),a=N(()=>s.current++),o=N(()=>{var f;return(f=n.name)!=null?f:`${t.value}-id-${s.prefix}-${b(a)}`}),l=N(()=>e==null?void 0:e.activeNames.value.includes(b(o)));return{focusing:i,id:a,isActive:l,handleFocus:()=>{setTimeout(()=>{r.value?r.value=!1:i.value=!0},50)},handleHeaderClick:()=>{n.disabled||(e==null||e.handleItemClick(b(o)),i.value=!1,r.value=!0)},handleEnterClick:()=>{e==null||e.handleItemClick(b(o))}}},sve=(n,{focusing:e,isActive:t,id:i})=>{const r=Ze("collapse"),s=N(()=>[r.b("item"),r.is("active",b(t)),r.is("disabled",n.disabled)]),a=N(()=>[r.be("item","header"),r.is("active",b(t)),{focusing:b(e)&&!n.disabled}]),o=N(()=>[r.be("item","arrow"),r.is("active",b(t))]),l=N(()=>r.be("item","wrap")),c=N(()=>r.be("item","content")),u=N(()=>r.b(`content-${b(i)}`)),d=N(()=>r.b(`head-${b(i)}`));return{arrowKls:o,headKls:a,rootKls:s,itemWrapperKls:l,itemContentKls:c,scopedContentId:u,scopedHeadId:d}},ave=ve({name:"ElCollapseItem"}),ove=ve({...ave,props:ive,setup(n,{expose:e}){const t=n,{focusing:i,id:r,isActive:s,handleFocus:a,handleHeaderClick:o,handleEnterClick:l}=rve(t),{arrowKls:c,headKls:u,rootKls:d,itemWrapperKls:f,itemContentKls:h,scopedContentId:p,scopedHeadId:m}=sve(t,{focusing:i,isActive:s,id:r});return e({isActive:s}),(v,g)=>(F(),ie("div",{class:$(b(d))},[le("button",{id:b(m),class:$(b(u)),"aria-expanded":b(s),"aria-controls":b(p),"aria-describedby":b(p),tabindex:v.disabled?-1:0,type:"button",onClick:b(o),onKeydown:ri(Pt(b(l),["stop","prevent"]),["space","enter"]),onFocus:b(a),onBlur:_=>i.value=!1},[Ne(v.$slots,"title",{},()=>[Xt(rt(v.title),1)]),Ne(v.$slots,"icon",{isActive:b(s)},()=>[oe(b(_t),{class:$(b(c))},{default:ge(()=>[(F(),He(en(v.icon)))]),_:1},8,["class"])])],42,["id","aria-expanded","aria-controls","aria-describedby","tabindex","onClick","onKeydown","onFocus","onBlur"]),oe(b(pM),null,{default:ge(()=>[Wt(le("div",{id:b(p),role:"region",class:$(b(f)),"aria-hidden":!b(s),"aria-labelledby":b(m)},[le("div",{class:$(b(h))},[Ne(v.$slots,"default")],2)],10,["id","aria-hidden","aria-labelledby"]),[[Dn,b(s)]])]),_:3})],2))}});var XW=ot(ove,[["__file","collapse-item.vue"]]);const lve=Ft(Jme,{CollapseItem:XW}),cve=ki(XW),uve=at({color:{type:Re(Object),required:!0},vertical:{type:Boolean,default:!1}});let ST=!1;function r_(n,e){if(!wn)return;const t=function(s){var a;(a=e.drag)==null||a.call(e,s)},i=function(s){var a;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",i),document.onselectstart=null,document.ondragstart=null,ST=!1,(a=e.end)==null||a.call(e,s)},r=function(s){var a;ST||(s.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",t),document.addEventListener("mouseup",i),document.addEventListener("touchmove",t),document.addEventListener("touchend",i),ST=!0,(a=e.start)==null||a.call(e,s))};n.addEventListener("mousedown",r),n.addEventListener("touchstart",r,{passive:!1})}const dve=(n,e)=>{if(!wn||!n||!e)return!1;const t=n.getBoundingClientRect();let i;return e instanceof Element?i=e.getBoundingClientRect():i={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},t.top<i.bottom&&t.bottom>i.top&&t.right>i.left&&t.left<i.right},_F=n=>{let e=0,t=n;for(;t;)e+=t.offsetTop,t=t.offsetParent;return e},fI=(n,e)=>Math.abs(_F(n)-_F(e)),qL=n=>{let e,t;return n.type==="touchend"?(t=n.changedTouches[0].clientY,e=n.changedTouches[0].clientX):n.type.startsWith("touch")?(t=n.touches[0].clientY,e=n.touches[0].clientX):(t=n.clientY,e=n.clientX),{clientX:e,clientY:t}},fve=n=>{const e=jt(),{t}=xn(),i=Yn(),r=Yn(),s=N(()=>n.color.get("alpha")),a=N(()=>t("el.colorpicker.alphaLabel"));function o(d){var f;d.target!==i.value&&l(d),(f=i.value)==null||f.focus()}function l(d){if(!r.value||!i.value)return;const h=e.vnode.el.getBoundingClientRect(),{clientX:p,clientY:m}=qL(d);if(n.vertical){let v=m-h.top;v=Math.max(i.value.offsetHeight/2,v),v=Math.min(v,h.height-i.value.offsetHeight/2),n.color.set("alpha",Math.round((v-i.value.offsetHeight/2)/(h.height-i.value.offsetHeight)*100))}else{let v=p-h.left;v=Math.max(i.value.offsetWidth/2,v),v=Math.min(v,h.width-i.value.offsetWidth/2),n.color.set("alpha",Math.round((v-i.value.offsetWidth/2)/(h.width-i.value.offsetWidth)*100))}}function c(d){const{code:f,shiftKey:h}=d,p=h?10:1;switch(f){case ut.left:case ut.down:d.preventDefault(),d.stopPropagation(),u(-p);break;case ut.right:case ut.up:d.preventDefault(),d.stopPropagation(),u(p);break}}function u(d){let f=s.value+d;f=f<0?0:f>100?100:f,n.color.set("alpha",f)}return{thumb:i,bar:r,alpha:s,alphaLabel:a,handleDrag:l,handleClick:o,handleKeydown:c}},hve=(n,{bar:e,thumb:t,handleDrag:i})=>{const r=jt(),s=Ze("color-alpha-slider"),a=X(0),o=X(0),l=X();function c(){if(!t.value||n.vertical)return 0;const _=r.vnode.el,y=n.color.get("alpha");return _?Math.round(y*(_.offsetWidth-t.value.offsetWidth/2)/100):0}function u(){if(!t.value)return 0;const _=r.vnode.el;if(!n.vertical)return 0;const y=n.color.get("alpha");return _?Math.round(y*(_.offsetHeight-t.value.offsetHeight/2)/100):0}function d(){if(n.color&&n.color.value){const{r:_,g:y,b:S}=n.color.toRgb();return`linear-gradient(to right, rgba(${_}, ${y}, ${S}, 0) 0%, rgba(${_}, ${y}, ${S}, 1) 100%)`}return""}function f(){a.value=c(),o.value=u(),l.value=d()}Ht(()=>{if(!e.value||!t.value)return;const _={drag:y=>{i(y)},end:y=>{i(y)}};r_(e.value,_),r_(t.value,_),f()}),We(()=>n.color.get("alpha"),()=>f()),We(()=>n.color.value,()=>f());const h=N(()=>[s.b(),s.is("vertical",n.vertical)]),p=N(()=>s.e("bar")),m=N(()=>s.e("thumb")),v=N(()=>({background:l.value})),g=N(()=>({left:Ui(a.value),top:Ui(o.value)}));return{rootKls:h,barKls:p,barStyle:v,thumbKls:m,thumbStyle:g,update:f}},pve="ElColorAlphaSlider",mve=ve({name:pve}),vve=ve({...mve,props:uve,setup(n,{expose:e}){const t=n,{alpha:i,alphaLabel:r,bar:s,thumb:a,handleDrag:o,handleClick:l,handleKeydown:c}=fve(t),{rootKls:u,barKls:d,barStyle:f,thumbKls:h,thumbStyle:p,update:m}=hve(t,{bar:s,thumb:a,handleDrag:o});return e({update:m,bar:s,thumb:a}),(v,g)=>(F(),ie("div",{class:$(b(u))},[le("div",{ref_key:"bar",ref:s,class:$(b(d)),style:Ct(b(f)),onClick:b(l)},null,14,["onClick"]),le("div",{ref_key:"thumb",ref:a,class:$(b(h)),style:Ct(b(p)),"aria-label":b(r),"aria-valuenow":b(i),"aria-orientation":v.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:b(c)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var gve=ot(vve,[["__file","alpha-slider.vue"]]);const yve=ve({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(n){const e=Ze("color-hue-slider"),t=jt(),i=X(),r=X(),s=X(0),a=X(0),o=N(()=>n.color.get("hue"));We(()=>o.value,()=>{f()});function l(h){h.target!==i.value&&c(h)}function c(h){if(!r.value||!i.value)return;const m=t.vnode.el.getBoundingClientRect(),{clientX:v,clientY:g}=qL(h);let _;if(n.vertical){let y=g-m.top;y=Math.min(y,m.height-i.value.offsetHeight/2),y=Math.max(i.value.offsetHeight/2,y),_=Math.round((y-i.value.offsetHeight/2)/(m.height-i.value.offsetHeight)*360)}else{let y=v-m.left;y=Math.min(y,m.width-i.value.offsetWidth/2),y=Math.max(i.value.offsetWidth/2,y),_=Math.round((y-i.value.offsetWidth/2)/(m.width-i.value.offsetWidth)*360)}n.color.set("hue",_)}function u(){if(!i.value)return 0;const h=t.vnode.el;if(n.vertical)return 0;const p=n.color.get("hue");return h?Math.round(p*(h.offsetWidth-i.value.offsetWidth/2)/360):0}function d(){if(!i.value)return 0;const h=t.vnode.el;if(!n.vertical)return 0;const p=n.color.get("hue");return h?Math.round(p*(h.offsetHeight-i.value.offsetHeight/2)/360):0}function f(){s.value=u(),a.value=d()}return Ht(()=>{if(!r.value||!i.value)return;const h={drag:p=>{c(p)},end:p=>{c(p)}};r_(r.value,h),r_(i.value,h),f()}),{bar:r,thumb:i,thumbLeft:s,thumbTop:a,hueValue:o,handleClick:l,update:f,ns:e}}});function _ve(n,e,t,i,r,s){return F(),ie("div",{class:$([n.ns.b(),n.ns.is("vertical",n.vertical)])},[le("div",{ref:"bar",class:$(n.ns.e("bar")),onClick:n.handleClick},null,10,["onClick"]),le("div",{ref:"thumb",class:$(n.ns.e("thumb")),style:Ct({left:n.thumbLeft+"px",top:n.thumbTop+"px"})},null,6)],2)}var bve=ot(yve,[["render",_ve],["__file","hue-slider.vue"]]);const Sve=at({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:cr,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:Rr.teleported,predefine:{type:Re(Array)},validateEvent:{type:Boolean,default:!0},...Zr(["ariaLabel"])}),wve={[Kt]:n=>xt(n)||xr(n),[jn]:n=>xt(n)||xr(n),activeChange:n=>xt(n)||xr(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent},YW=Symbol("colorPickerContextKey"),bF=function(n,e,t){return[n,e*t/((n=(2-e)*t)<1?n:2-n)||0,n/2]},xve=function(n){return xt(n)&&n.includes(".")&&Number.parseFloat(n)===1},Cve=function(n){return xt(n)&&n.includes("%")},tv=function(n,e){xve(n)&&(n="100%");const t=Cve(n);return n=Math.min(e,Math.max(0,Number.parseFloat(`${n}`))),t&&(n=Number.parseInt(`${n*e}`,10)/100),Math.abs(n-e)<1e-6?1:n%e/Number.parseFloat(e)},SF={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},c1=n=>{n=Math.min(Math.round(n),255);const e=Math.floor(n/16),t=n%16;return`${SF[e]||e}${SF[t]||t}`},wF=function({r:n,g:e,b:t}){return Number.isNaN(+n)||Number.isNaN(+e)||Number.isNaN(+t)?"":`#${c1(n)}${c1(e)}${c1(t)}`},wT={A:10,B:11,C:12,D:13,E:14,F:15},uf=function(n){return n.length===2?(wT[n[0].toUpperCase()]||+n[0])*16+(wT[n[1].toUpperCase()]||+n[1]):wT[n[1].toUpperCase()]||+n[1]},Mve=function(n,e,t){e=e/100,t=t/100;let i=e;const r=Math.max(t,.01);t*=2,e*=t<=1?t:2-t,i*=r<=1?r:2-r;const s=(t+e)/2,a=t===0?2*i/(r+i):2*e/(t+e);return{h:n,s:a*100,v:s*100}},xF=(n,e,t)=>{n=tv(n,255),e=tv(e,255),t=tv(t,255);const i=Math.max(n,e,t),r=Math.min(n,e,t);let s;const a=i,o=i-r,l=i===0?0:o/i;if(i===r)s=0;else{switch(i){case n:{s=(e-t)/o+(e<t?6:0);break}case e:{s=(t-n)/o+2;break}case t:{s=(n-e)/o+4;break}}s/=6}return{h:s*360,s:l*100,v:a*100}},Yg=function(n,e,t){n=tv(n,360)*6,e=tv(e,100),t=tv(t,100);const i=Math.floor(n),r=n-i,s=t*(1-e),a=t*(1-r*e),o=t*(1-(1-r)*e),l=i%6,c=[t,a,s,s,o,t][l],u=[o,t,t,a,s,s][l],d=[s,s,o,t,t,a][l];return{r:Math.round(c*255),g:Math.round(u*255),b:Math.round(d*255)}};let ry=class{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const t in e)Cn(e,t)&&(this[t]=e[t]);e.value?this.fromString(e.value):this.doOnChange()}set(e,t){if(arguments.length===1&&typeof e=="object"){for(const i in e)Cn(e,i)&&this.set(i,e[i]);return}this[`_${e}`]=t,this.doOnChange()}get(e){return e==="alpha"?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return Yg(this._hue,this._saturation,this._value)}fromString(e){if(!e){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const t=(i,r,s)=>{this._hue=Math.max(0,Math.min(360,i)),this._saturation=Math.max(0,Math.min(100,r)),this._value=Math.max(0,Math.min(100,s)),this.doOnChange()};if(e.includes("hsl")){const i=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));if(i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3){const{h:r,s,v:a}=Mve(i[0],i[1],i[2]);t(r,s,a)}}else if(e.includes("hsv")){const i=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3&&t(i[0],i[1],i[2])}else if(e.includes("rgb")){const i=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));if(i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3){const{h:r,s,v:a}=xF(i[0],i[1],i[2]);t(r,s,a)}}else if(e.includes("#")){const i=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(i))return;let r,s,a;i.length===3?(r=uf(i[0]+i[0]),s=uf(i[1]+i[1]),a=uf(i[2]+i[2])):(i.length===6||i.length===8)&&(r=uf(i.slice(0,2)),s=uf(i.slice(2,4)),a=uf(i.slice(4,6))),i.length===8?this._alpha=uf(i.slice(6))/255*100:(i.length===3||i.length===6)&&(this._alpha=100);const{h:o,s:l,v:c}=xF(r,s,a);t(o,l,c)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:t,_value:i,_alpha:r,format:s}=this;if(this.enableAlpha)switch(s){case"hsl":{const a=bF(e,t/100,i/100);this.value=`hsla(${e}, ${Math.round(a[1]*100)}%, ${Math.round(a[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${e}, ${Math.round(t)}%, ${Math.round(i)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${wF(Yg(e,t,i))}${c1(r*255/100)}`;break}default:{const{r:a,g:o,b:l}=Yg(e,t,i);this.value=`rgba(${a}, ${o}, ${l}, ${this.get("alpha")/100})`}}else switch(s){case"hsl":{const a=bF(e,t/100,i/100);this.value=`hsl(${e}, ${Math.round(a[1]*100)}%, ${Math.round(a[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${e}, ${Math.round(t)}%, ${Math.round(i)}%)`;break}case"rgb":{const{r:a,g:o,b:l}=Yg(e,t,i);this.value=`rgb(${a}, ${o}, ${l})`;break}default:this.value=wF(Yg(e,t,i))}}};const Tve=ve({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(n){const e=Ze("color-predefine"),{currentColor:t}=mt(YW),i=X(s(n.colors,n.color));We(()=>t.value,a=>{const o=new ry;o.fromString(a),i.value.forEach(l=>{l.selected=o.compare(l)})}),zr(()=>{i.value=s(n.colors,n.color)});function r(a){n.color.fromString(n.colors[a])}function s(a,o){return a.map(l=>{const c=new ry;return c.enableAlpha=n.enableAlpha,c.format="rgba",c.fromString(l),c.selected=c.value===o.value,c})}return{rgbaColors:i,handleSelect:r,ns:e}}});function Ave(n,e,t,i,r,s){return F(),ie("div",{class:$(n.ns.b())},[le("div",{class:$(n.ns.e("colors"))},[(F(!0),ie(bt,null,sn(n.rgbaColors,(a,o)=>(F(),ie("div",{key:n.colors[o],class:$([n.ns.e("color-selector"),n.ns.is("alpha",a._alpha<100),{selected:a.selected}]),onClick:l=>n.handleSelect(o)},[le("div",{style:Ct({backgroundColor:a.value})},null,4)],10,["onClick"]))),128))],2)],2)}var Eve=ot(Tve,[["render",Ave],["__file","predefine.vue"]]);const Ive=ve({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(n){const e=Ze("color-svpanel"),t=jt(),i=X(0),r=X(0),s=X("hsl(0, 100%, 50%)"),a=N(()=>{const c=n.color.get("hue"),u=n.color.get("value");return{hue:c,value:u}});function o(){const c=n.color.get("saturation"),u=n.color.get("value"),d=t.vnode.el,{clientWidth:f,clientHeight:h}=d;r.value=c*f/100,i.value=(100-u)*h/100,s.value=`hsl(${n.color.get("hue")}, 100%, 50%)`}function l(c){const d=t.vnode.el.getBoundingClientRect(),{clientX:f,clientY:h}=qL(c);let p=f-d.left,m=h-d.top;p=Math.max(0,p),p=Math.min(p,d.width),m=Math.max(0,m),m=Math.min(m,d.height),r.value=p,i.value=m,n.color.set({saturation:p/d.width*100,value:100-m/d.height*100})}return We(()=>a.value,()=>{o()}),Ht(()=>{r_(t.vnode.el,{drag:c=>{l(c)},end:c=>{l(c)}}),o()}),{cursorTop:i,cursorLeft:r,background:s,colorValue:a,handleDrag:l,update:o,ns:e}}});function Rve(n,e,t,i,r,s){return F(),ie("div",{class:$(n.ns.b()),style:Ct({backgroundColor:n.background})},[le("div",{class:$(n.ns.e("white"))},null,2),le("div",{class:$(n.ns.e("black"))},null,2),le("div",{class:$(n.ns.e("cursor")),style:Ct({top:n.cursorTop+"px",left:n.cursorLeft+"px"})},[le("div")],6)],6)}var Pve=ot(Ive,[["render",Rve],["__file","sv-panel.vue"]]);const Dve=ve({name:"ElColorPicker"}),Lve=ve({...Dve,props:Sve,emits:wve,setup(n,{expose:e,emit:t}){const i=n,{t:r}=xn(),s=Ze("color"),{formItem:a}=fs(),o=tr(),l=hs(),{inputId:c,isLabeledByFormItem:u}=Fo(i,{formItemContext:a}),d=X(),f=X(),h=X(),p=X(),m=X(),v=X(),{isFocused:g,handleFocus:_,handleBlur:y}=ef(m,{beforeFocus(){return l.value},beforeBlur(ye){var Te;return(Te=p.value)==null?void 0:Te.isFocusInsideContent(ye)},afterBlur(){L(!1),O()}});let S=!0;const w=Nn(new ry({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue})),x=X(!1),T=X(!1),C=X(""),M=N(()=>!i.modelValue&&!T.value?"transparent":D(w,i.showAlpha)),A=N(()=>!i.modelValue&&!T.value?"":w.value),E=N(()=>u.value?void 0:i.ariaLabel||r("el.colorpicker.defaultLabel")),I=N(()=>u.value?a==null?void 0:a.labelId:void 0),P=N(()=>[s.b("picker"),s.is("disabled",l.value),s.bm("picker",o.value),s.is("focused",g.value)]);function D(ye,Te){if(!(ye instanceof ry))throw new TypeError("color should be instance of _color Class");const{r:Ee,g:H,b:Q}=ye.toRgb();return Te?`rgba(${Ee}, ${H}, ${Q}, ${ye.get("alpha")/100})`:`rgb(${Ee}, ${H}, ${Q})`}function L(ye){x.value=ye}const R=wa(L,100,{leading:!0});function B(){l.value||L(!0)}function k(){R(!1),O()}function O(){Mt(()=>{i.modelValue?w.fromString(i.modelValue):(w.value="",Mt(()=>{T.value=!1}))})}function U(){l.value||R(!x.value)}function G(){w.fromString(C.value)}function q(){const ye=w.value;t(Kt,ye),t("change",ye),i.validateEvent&&(a==null||a.validate("change").catch(Te=>void 0)),R(!1),Mt(()=>{const Te=new ry({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue});w.compare(Te)||O()})}function W(){R(!1),t(Kt,null),t("change",null),i.modelValue!==null&&i.validateEvent&&(a==null||a.validate("change").catch(ye=>void 0)),O()}function Y(){x.value&&(k(),g.value&&ee())}function J(ye){ye.preventDefault(),ye.stopPropagation(),L(!1),O()}function Z(ye){switch(ye.code){case ut.enter:case ut.numpadEnter:case ut.space:ye.preventDefault(),ye.stopPropagation(),B(),v.value.focus();break;case ut.esc:J(ye);break}}function ee(){m.value.focus()}function me(){m.value.blur()}return Ht(()=>{i.modelValue&&(C.value=A.value)}),We(()=>i.modelValue,ye=>{ye?ye&&ye!==w.value&&(S=!1,w.fromString(ye)):T.value=!1}),We(()=>[i.colorFormat,i.showAlpha],()=>{w.enableAlpha=i.showAlpha,w.format=i.colorFormat||w.format,w.doOnChange(),t(Kt,w.value)}),We(()=>A.value,ye=>{C.value=ye,S&&t("activeChange",ye),S=!0}),We(()=>w.value,()=>{!i.modelValue&&!T.value&&(T.value=!0)}),We(()=>x.value,()=>{Mt(()=>{var ye,Te,Ee;(ye=d.value)==null||ye.update(),(Te=f.value)==null||Te.update(),(Ee=h.value)==null||Ee.update()})}),un(YW,{currentColor:A}),e({color:w,show:B,hide:k,focus:ee,blur:me}),(ye,Te)=>(F(),He(b(us),{ref_key:"popper",ref:p,visible:x.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[b(s).be("picker","panel"),b(s).b("dropdown"),ye.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:ye.teleported,transition:`${b(s).namespace.value}-zoom-in-top`,persistent:"",onHide:Ee=>L(!1)},{content:ge(()=>[Wt((F(),ie("div",{onKeydown:ri(J,["esc"])},[le("div",{class:$(b(s).be("dropdown","main-wrapper"))},[oe(bve,{ref_key:"hue",ref:d,class:"hue-slider",color:b(w),vertical:""},null,8,["color"]),oe(Pve,{ref_key:"sv",ref:f,color:b(w)},null,8,["color"])],2),ye.showAlpha?(F(),He(gve,{key:0,ref_key:"alpha",ref:h,color:b(w)},null,8,["color"])):Be("v-if",!0),ye.predefine?(F(),He(Eve,{key:1,ref:"predefine","enable-alpha":ye.showAlpha,color:b(w),colors:ye.predefine},null,8,["enable-alpha","color","colors"])):Be("v-if",!0),le("div",{class:$(b(s).be("dropdown","btns"))},[le("span",{class:$(b(s).be("dropdown","value"))},[oe(b(Rs),{ref_key:"inputRef",ref:v,modelValue:C.value,"onUpdate:modelValue":Ee=>C.value=Ee,"validate-event":!1,size:"small",onKeyup:ri(G,["enter"]),onBlur:G},null,8,["modelValue","onUpdate:modelValue","onKeyup"])],2),oe(b(Ur),{class:$(b(s).be("dropdown","link-btn")),text:"",size:"small",onClick:W},{default:ge(()=>[Xt(rt(b(r)("el.colorpicker.clear")),1)]),_:1},8,["class"]),oe(b(Ur),{plain:"",size:"small",class:$(b(s).be("dropdown","btn")),onClick:q},{default:ge(()=>[Xt(rt(b(r)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[b(eu),Y]])]),default:ge(()=>[le("div",rn({id:b(c),ref_key:"triggerRef",ref:m},ye.$attrs,{class:b(P),role:"button","aria-label":b(E),"aria-labelledby":b(I),"aria-description":b(r)("el.colorpicker.description",{color:ye.modelValue||""}),"aria-disabled":b(l),tabindex:b(l)?-1:ye.tabindex,onKeydown:Z,onFocus:b(_),onBlur:b(y)}),[b(l)?(F(),ie("div",{key:0,class:$(b(s).be("picker","mask"))},null,2)):Be("v-if",!0),le("div",{class:$(b(s).be("picker","trigger")),onClick:U},[le("span",{class:$([b(s).be("picker","color"),b(s).is("alpha",ye.showAlpha)])},[le("span",{class:$(b(s).be("picker","color-inner")),style:Ct({backgroundColor:b(M)})},[Wt(oe(b(_t),{class:$([b(s).be("picker","icon"),b(s).is("icon-arrow-down")])},{default:ge(()=>[oe(b(du))]),_:1},8,["class"]),[[Dn,ye.modelValue||T.value]]),Wt(oe(b(_t),{class:$([b(s).be("picker","empty"),b(s).is("icon-close")])},{default:ge(()=>[oe(b(fl))]),_:1},8,["class"]),[[Dn,!ye.modelValue&&!T.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}});var kve=ot(Lve,[["__file","color-picker.vue"]]);const Ove=Ft(kve),Nve=at({a11y:{type:Boolean,default:!0},locale:{type:Re(Object)},size:cr,button:{type:Re(Object)},experimentalFeatures:{type:Re(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:Re(Object)},zIndex:Number,namespace:{type:String,default:"el"},...pg}),Jo={},Bve=ve({name:"ElConfigProvider",props:Nve,setup(n,{slots:e}){We(()=>n.message,i=>{Object.assign(Jo,i??{})},{immediate:!0,deep:!0});const t=_L(n);return()=>Ne(e,"default",{config:t==null?void 0:t.value})}}),Fve=Ft(Bve),zve=ve({name:"ElContainer"}),Uve=ve({...zve,props:{direction:{type:String}},setup(n){const e=n,t=ur(),i=Ze("container"),r=N(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:t&&t.default?t.default().some(a=>{const o=a.type.name;return o==="ElHeader"||o==="ElFooter"}):!1);return(s,a)=>(F(),ie("section",{class:$([b(i).b(),b(i).is("vertical",b(r))])},[Ne(s.$slots,"default")],2))}});var Hve=ot(Uve,[["__file","container.vue"]]);const Vve=ve({name:"ElAside"}),$ve=ve({...Vve,props:{width:{type:String,default:null}},setup(n){const e=n,t=Ze("aside"),i=N(()=>e.width?t.cssVarBlock({width:e.width}):{});return(r,s)=>(F(),ie("aside",{class:$(b(t).b()),style:Ct(b(i))},[Ne(r.$slots,"default")],6))}});var jW=ot($ve,[["__file","aside.vue"]]);const Gve=ve({name:"ElFooter"}),Wve=ve({...Gve,props:{height:{type:String,default:null}},setup(n){const e=n,t=Ze("footer"),i=N(()=>e.height?t.cssVarBlock({height:e.height}):{});return(r,s)=>(F(),ie("footer",{class:$(b(t).b()),style:Ct(b(i))},[Ne(r.$slots,"default")],6))}});var QW=ot(Wve,[["__file","footer.vue"]]);const Kve=ve({name:"ElHeader"}),qve=ve({...Kve,props:{height:{type:String,default:null}},setup(n){const e=n,t=Ze("header"),i=N(()=>e.height?t.cssVarBlock({height:e.height}):{});return(r,s)=>(F(),ie("header",{class:$(b(t).b()),style:Ct(b(i))},[Ne(r.$slots,"default")],6))}});var ZW=ot(qve,[["__file","header.vue"]]);const Xve=ve({name:"ElMain"}),Yve=ve({...Xve,setup(n){const e=Ze("main");return(t,i)=>(F(),ie("main",{class:$(b(e).b())},[Ne(t.$slots,"default")],2))}});var JW=ot(Yve,[["__file","main.vue"]]);const jve=Ft(Hve,{Aside:jW,Footer:QW,Header:ZW,Main:JW}),Qve=ki(jW),Zve=ki(QW),Jve=ki(ZW),ege=ki(JW);var e9={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(pu,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d/,s=/\d\d/,a=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,l={},c=function(v){return(v=+v)+(v>68?1900:2e3)},u=function(v){return function(g){this[v]=+g}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var _=g.match(/([+-]|\d\d)/g),y=60*_[1]+(+_[2]||0);return y===0?0:_[0]==="+"?-y:y}(v)}],f=function(v){var g=l[v];return g&&(g.indexOf?g:g.s.concat(g.f))},h=function(v,g){var _,y=l.meridiem;if(y){for(var S=1;S<=24;S+=1)if(v.indexOf(y(S,0,g))>-1){_=S>12;break}}else _=v===(g?"pm":"PM");return _},p={A:[o,function(v){this.afternoon=h(v,!1)}],a:[o,function(v){this.afternoon=h(v,!0)}],Q:[r,function(v){this.month=3*(v-1)+1}],S:[r,function(v){this.milliseconds=100*+v}],SS:[s,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[a,u("seconds")],ss:[a,u("seconds")],m:[a,u("minutes")],mm:[a,u("minutes")],H:[a,u("hours")],h:[a,u("hours")],HH:[a,u("hours")],hh:[a,u("hours")],D:[a,u("day")],DD:[s,u("day")],Do:[o,function(v){var g=l.ordinal,_=v.match(/\d+/);if(this.day=_[0],g)for(var y=1;y<=31;y+=1)g(y).replace(/\[|\]/g,"")===v&&(this.day=y)}],w:[a,u("week")],ww:[s,u("week")],M:[a,u("month")],MM:[s,u("month")],MMM:[o,function(v){var g=f("months"),_=(f("monthsShort")||g.map(function(y){return y.slice(0,3)})).indexOf(v)+1;if(_<1)throw new Error;this.month=_%12||_}],MMMM:[o,function(v){var g=f("months").indexOf(v)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,u("year")],YY:[s,function(v){this.year=c(v)}],YYYY:[/\d{4}/,u("year")],Z:d,ZZ:d};function m(v){var g,_;g=v,_=l&&l.formats;for(var y=(v=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(A,E,I){var P=I&&I.toUpperCase();return E||_[I]||t[I]||_[P].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(D,L,R){return L||R.slice(1)})})).match(i),S=y.length,w=0;w<S;w+=1){var x=y[w],T=p[x],C=T&&T[0],M=T&&T[1];y[w]=M?{regex:C,parser:M}:x.replace(/^\[|\]$/g,"")}return function(A){for(var E={},I=0,P=0;I<S;I+=1){var D=y[I];if(typeof D=="string")P+=D.length;else{var L=D.regex,R=D.parser,B=A.slice(P),k=L.exec(B)[0];R.call(E,k),A=A.replace(k,"")}}return function(O){var U=O.afternoon;if(U!==void 0){var G=O.hours;U?G<12&&(O.hours+=12):G===12&&(O.hours=0),delete O.afternoon}}(E),E}}return function(v,g,_){_.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(c=v.parseTwoDigitYear);var y=g.prototype,S=y.parse;y.parse=function(w){var x=w.date,T=w.utc,C=w.args;this.$u=T;var M=C[1];if(typeof M=="string"){var A=C[2]===!0,E=C[3]===!0,I=A||E,P=C[2];E&&(P=C[2]),l=this.$locale(),!A&&P&&(l=_.Ls[P]),this.$d=function(B,k,O,U){try{if(["x","X"].indexOf(k)>-1)return new Date((k==="X"?1e3:1)*B);var G=m(k)(B),q=G.year,W=G.month,Y=G.day,J=G.hours,Z=G.minutes,ee=G.seconds,me=G.milliseconds,ye=G.zone,Te=G.week,Ee=new Date,H=Y||(q||W?1:Ee.getDate()),Q=q||Ee.getFullYear(),j=0;q&&!W||(j=W>0?W-1:Ee.getMonth());var Pe,we=J||0,De=Z||0,Me=ee||0,Ae=me||0;return ye?new Date(Date.UTC(Q,j,H,we,De,Me,Ae+60*ye.offset*1e3)):O?new Date(Date.UTC(Q,j,H,we,De,Me,Ae)):(Pe=new Date(Q,j,H,we,De,Me,Ae),Te&&(Pe=U(Pe).week(Te).toDate()),Pe)}catch{return new Date("")}}(x,M,T,_),this.init(),P&&P!==!0&&(this.$L=this.locale(P).$L),I&&x!=this.format(M)&&(this.$d=new Date("")),l={}}else if(M instanceof Array)for(var D=M.length,L=1;L<=D;L+=1){C[1]=M[L-1];var R=_.apply(this,C);if(R.isValid()){this.$d=R.$d,this.$L=R.$L,this.init();break}L===D&&(this.$d=new Date(""))}else S.call(this,w)}}})})(e9);var tge=e9.exports;const XL=mu(tge);var t9={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(pu,function(){return function(t,i){var r=i.prototype,s=r.format;r.format=function(a){var o=this,l=this.$locale();if(!this.isValid())return s.bind(this)(a);var c=this.$utils(),u=(a||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((o.$M+1)/3);case"Do":return l.ordinal(o.$D);case"gggg":return o.weekYear();case"GGGG":return o.isoWeekYear();case"wo":return l.ordinal(o.week(),"W");case"w":case"ww":return c.s(o.week(),d==="w"?1:2,"0");case"W":case"WW":return c.s(o.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return c.s(String(o.$H===0?24:o.$H),d==="k"?1:2,"0");case"X":return Math.floor(o.$d.getTime()/1e3);case"x":return o.$d.getTime();case"z":return"["+o.offsetName()+"]";case"zzz":return"["+o.offsetName("long")+"]";default:return d}});return s.bind(this)(u)}}})})(t9);var nge=t9.exports;const ige=mu(nge);var n9={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(pu,function(){var t="week",i="year";return function(r,s,a){var o=s.prototype;o.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var c=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var u=a(this).startOf(i).add(1,i).date(c),d=a(this).endOf(t);if(u.isBefore(d))return 1}var f=a(this).startOf(i).date(c).startOf(t).subtract(1,"millisecond"),h=this.diff(f,t,!0);return h<0?a(this).startOf("week").week():Math.ceil(h)},o.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(n9);var rge=n9.exports;const sge=mu(rge);var i9={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(pu,function(){return function(t,i){i.prototype.weekYear=function(){var r=this.month(),s=this.week(),a=this.year();return s===1&&r===11?a+1:r===0&&s>=52?a-1:a}}})})(i9);var age=i9.exports;const oge=mu(age);var r9={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(pu,function(){return function(t,i,r){i.prototype.dayOfYear=function(s){var a=Math.round((r(this).startOf("day")-r(this).startOf("year"))/864e5)+1;return s==null?a:this.add(s-a,"day")}}})})(r9);var lge=r9.exports;const cge=mu(lge);var s9={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(pu,function(){return function(t,i){i.prototype.isSameOrAfter=function(r,s){return this.isSame(r,s)||this.isAfter(r,s)}}})})(s9);var uge=s9.exports;const dge=mu(uge);var a9={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(pu,function(){return function(t,i){i.prototype.isSameOrBefore=function(r,s){return this.isSame(r,s)||this.isBefore(r,s)}}})})(a9);var fge=a9.exports;const hge=mu(fge),CF=["hours","minutes","seconds"],hI="HH:mm:ss",wm="YYYY-MM-DD",pge={date:wm,dates:wm,week:"gggg[w]ww",year:"YYYY",years:"YYYY",month:"YYYY-MM",months:"YYYY-MM",datetime:`${wm} ${hI}`,monthrange:"YYYY-MM",yearrange:"YYYY",daterange:wm,datetimerange:`${wm} ${hI}`},o9=at({disabledHours:{type:Re(Function)},disabledMinutes:{type:Re(Function)},disabledSeconds:{type:Re(Function)}}),l9=at({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),YL=at({id:{type:Re([Array,String])},name:{type:Re([Array,String])},popperClass:{type:String,default:""},format:String,valueFormat:String,dateFormat:String,timeFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:Re([String,Object]),default:fu},editable:{type:Boolean,default:!0},prefixIcon:{type:Re([String,Object]),default:""},size:cr,readonly:Boolean,disabled:Boolean,placeholder:{type:String,default:""},popperOptions:{type:Re(Object),default:()=>({})},modelValue:{type:Re([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:Re([Date,Array])},defaultTime:{type:Re([Date,Array])},isRange:Boolean,...o9,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:Boolean,tabindex:{type:Re([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean,placement:{type:Re(String),values:hu,default:"bottom"},fallbackPlacements:{type:Re(Array),default:["bottom","top","right","left"]},...pg,...Zr(["ariaLabel"]),showNow:{type:Boolean,default:!0}}),mge=at({id:{type:Re(Array)},name:{type:Re(Array)},modelValue:{type:Re([Array,String])},startPlaceholder:String,endPlaceholder:String}),vge=ve({name:"PickerRangeTrigger",inheritAttrs:!1}),gge=ve({...vge,props:mge,emits:["mouseenter","mouseleave","click","touchstart","focus","blur","startInput","endInput","startChange","endChange"],setup(n,{expose:e,emit:t}){const i=lb(),r=Ze("date"),s=Ze("range"),a=X(),o=X(),{wrapperRef:l,isFocused:c}=ef(a),u=S=>{t("click",S)},d=S=>{t("mouseenter",S)},f=S=>{t("mouseleave",S)},h=S=>{t("mouseenter",S)},p=S=>{t("startInput",S)},m=S=>{t("endInput",S)},v=S=>{t("startChange",S)},g=S=>{t("endChange",S)};return e({focus:()=>{var S;(S=a.value)==null||S.focus()},blur:()=>{var S,w;(S=a.value)==null||S.blur(),(w=o.value)==null||w.blur()}}),(S,w)=>(F(),ie("div",{ref_key:"wrapperRef",ref:l,class:$([b(r).is("active",b(c)),S.$attrs.class]),style:Ct(S.$attrs.style),onClick:u,onMouseenter:d,onMouseleave:f,onTouchstartPassive:h},[Ne(S.$slots,"prefix"),le("input",rn(b(i),{id:S.id&&S.id[0],ref_key:"inputRef",ref:a,name:S.name&&S.name[0],placeholder:S.startPlaceholder,value:S.modelValue&&S.modelValue[0],class:b(s).b("input"),onInput:p,onChange:v}),null,16,["id","name","placeholder","value"]),Ne(S.$slots,"range-separator"),le("input",rn(b(i),{id:S.id&&S.id[1],ref_key:"endInputRef",ref:o,name:S.name&&S.name[1],placeholder:S.endPlaceholder,value:S.modelValue&&S.modelValue[1],class:b(s).b("input"),onInput:m,onChange:g}),null,16,["id","name","placeholder","value"]),Ne(S.$slots,"suffix")],38))}});var yge=ot(gge,[["__file","picker-range-trigger.vue"]]);const _ge=ve({name:"Picker"}),bge=ve({..._ge,props:YL,emits:["update:modelValue","change","focus","blur","clear","calendar-change","panel-change","visible-change","keydown"],setup(n,{expose:e,emit:t}){const i=n,r=Zd(),{lang:s}=xn(),a=Ze("date"),o=Ze("input"),l=Ze("range"),{form:c,formItem:u}=fs(),d=mt("ElPopperOptions",{}),{valueOnClear:f}=sM(i,null),h=X(),p=X(),m=X(!1),v=X(!1),g=X(null);let _=!1;const{isFocused:y,handleFocus:S,handleBlur:w}=ef(p,{beforeFocus(){return i.readonly||O.value},afterFocus(){m.value=!0},beforeBlur(se){var de;return!_&&((de=h.value)==null?void 0:de.isFocusInsideContent(se))},afterBlur(){Fe(),m.value=!1,_=!1,i.validateEvent&&(u==null||u.validate("blur").catch(se=>void 0))}}),x=N(()=>[a.b("editor"),a.bm("editor",i.type),o.e("wrapper"),a.is("disabled",O.value),a.is("active",m.value),l.b("editor"),we?l.bm("editor",we.value):"",r.class]),T=N(()=>[o.e("icon"),l.e("close-icon"),me.value?"":l.e("close-icon--hidden")]);We(m,se=>{se?Mt(()=>{se&&(g.value=i.modelValue)}):(Ae.value=null,Mt(()=>{C(i.modelValue)}))});const C=(se,de)=>{(de||!cF(se,g.value))&&(t("change",se),i.validateEvent&&(u==null||u.validate("change").catch(qe=>void 0)))},M=se=>{if(!cF(i.modelValue,se)){let de;nt(se)?de=se.map(qe=>dF(qe,i.valueFormat,s.value)):se&&(de=dF(se,i.valueFormat,s.value)),t("update:modelValue",se&&de,s.value)}},A=se=>{t("keydown",se)},E=N(()=>p.value?Array.from(p.value.$el.querySelectorAll("input")):[]),I=(se,de,qe)=>{const fe=E.value;fe.length&&(!qe||qe==="min"?(fe[0].setSelectionRange(se,de),fe[0].focus()):qe==="max"&&(fe[1].setSelectionRange(se,de),fe[1].focus()))},P=(se="",de=!1)=>{m.value=de;let qe;nt(se)?qe=se.map(fe=>fe.toDate()):qe=se&&se.toDate(),Ae.value=null,M(qe)},D=()=>{v.value=!0},L=()=>{t("visible-change",!0)},R=()=>{v.value=!1,m.value=!1,t("visible-change",!1)},B=()=>{m.value=!0},k=()=>{m.value=!1},O=N(()=>i.disabled||(c==null?void 0:c.disabled)),U=N(()=>{let se;if(Te.value?Ye.value.getDefaultValue&&(se=Ye.value.getDefaultValue()):nt(i.modelValue)?se=i.modelValue.map(de=>uF(de,i.valueFormat,s.value)):se=uF(i.modelValue,i.valueFormat,s.value),Ye.value.getRangeAvailableTime){const de=Ye.value.getRangeAvailableTime(se);jr(de,se)||(se=de,Te.value||M(Xb(se)))}return nt(se)&&se.some(de=>!de)&&(se=[]),se}),G=N(()=>{if(!Ye.value.panelReady)return"";const se=z(U.value);return nt(Ae.value)?[Ae.value[0]||se&&se[0]||"",Ae.value[1]||se&&se[1]||""]:Ae.value!==null?Ae.value:!W.value&&Te.value||!m.value&&Te.value?"":se?Y.value||J.value||Z.value?se.join(", "):se:""}),q=N(()=>i.type.includes("time")),W=N(()=>i.type.startsWith("time")),Y=N(()=>i.type==="dates"),J=N(()=>i.type==="months"),Z=N(()=>i.type==="years"),ee=N(()=>i.prefixIcon||(q.value?FG:Vle)),me=X(!1),ye=se=>{i.readonly||O.value||(me.value&&(se.stopPropagation(),Ye.value.handleClear?Ye.value.handleClear():M(f.value),C(f.value,!0),me.value=!1,R()),t("clear"))},Te=N(()=>{const{modelValue:se}=i;return!se||nt(se)&&!se.filter(Boolean).length}),Ee=async se=>{var de;i.readonly||O.value||(((de=se.target)==null?void 0:de.tagName)!=="INPUT"||y.value)&&(m.value=!0)},H=()=>{i.readonly||O.value||!Te.value&&i.clearable&&(me.value=!0)},Q=()=>{me.value=!1},j=se=>{var de;i.readonly||O.value||(((de=se.touches[0].target)==null?void 0:de.tagName)!=="INPUT"||y.value)&&(m.value=!0)},Pe=N(()=>i.type.includes("range")),we=tr(),De=N(()=>{var se,de;return(de=(se=b(h))==null?void 0:se.popperRef)==null?void 0:de.contentRef}),Me=yL(p,se=>{const de=b(De),qe=Xs(p);de&&(se.target===de||se.composedPath().includes(de))||se.target===qe||qe&&se.composedPath().includes(qe)||(m.value=!1)});Un(()=>{Me==null||Me()});const Ae=X(null),Fe=()=>{if(Ae.value){const se=ne(G.value);se&&K(se)&&(M(Xb(se)),Ae.value=null)}Ae.value===""&&(M(f.value),C(f.value),Ae.value=null)},ne=se=>se?Ye.value.parseUserInput(se):null,z=se=>se?Ye.value.formatToString(se):null,K=se=>Ye.value.isValidValue(se),ae=async se=>{if(i.readonly||O.value)return;const{code:de}=se;if(A(se),de===ut.esc){m.value===!0&&(m.value=!1,se.preventDefault(),se.stopPropagation());return}if(de===ut.down&&(Ye.value.handleFocusPicker&&(se.preventDefault(),se.stopPropagation()),m.value===!1&&(m.value=!0,await Mt()),Ye.value.handleFocusPicker)){Ye.value.handleFocusPicker();return}if(de===ut.tab){_=!0;return}if(de===ut.enter||de===ut.numpadEnter){(Ae.value===null||Ae.value===""||K(ne(G.value)))&&(Fe(),m.value=!1),se.stopPropagation();return}if(Ae.value){se.stopPropagation();return}Ye.value.handleKeydownInput&&Ye.value.handleKeydownInput(se)},xe=se=>{Ae.value=se,m.value||(m.value=!0)},Le=se=>{const de=se.target;Ae.value?Ae.value=[de.value,Ae.value[1]]:Ae.value=[de.value,null]},Xe=se=>{const de=se.target;Ae.value?Ae.value=[Ae.value[0],de.value]:Ae.value=[null,de.value]},je=()=>{var se;const de=Ae.value,qe=ne(de&&de[0]),fe=b(U);if(qe&&qe.isValid()){Ae.value=[z(qe),((se=G.value)==null?void 0:se[1])||null];const Je=[qe,fe&&(fe[1]||null)];K(Je)&&(M(Xb(Je)),Ae.value=null)}},he=()=>{var se;const de=b(Ae),qe=ne(de&&de[1]),fe=b(U);if(qe&&qe.isValid()){Ae.value=[((se=b(G))==null?void 0:se[0])||null,z(qe)];const Je=[fe&&fe[0],qe];K(Je)&&(M(Xb(Je)),Ae.value=null)}},Ye=X({}),Ke=se=>{Ye.value[se[0]]=se[1],Ye.value.panelReady=!0},V=se=>{t("calendar-change",se)},re=(se,de,qe)=>{t("panel-change",se,de,qe)},te=()=>{var se;(se=p.value)==null||se.focus()},pe=()=>{var se;(se=p.value)==null||se.blur()};return un("EP_PICKER_BASE",{props:i}),e({focus:te,blur:pe,handleOpen:B,handleClose:k,onPick:P}),(se,de)=>(F(),He(b(us),rn({ref_key:"refPopper",ref:h,visible:m.value,effect:"light",pure:"",trigger:"click"},se.$attrs,{role:"dialog",teleported:"",transition:`${b(a).namespace.value}-zoom-in-top`,"popper-class":[`${b(a).namespace.value}-picker__popper`,se.popperClass],"popper-options":b(d),"fallback-placements":se.fallbackPlacements,"gpu-acceleration":!1,placement:se.placement,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:D,onShow:L,onHide:R}),{default:ge(()=>[b(Pe)?(F(),He(yge,{key:1,id:se.id,ref_key:"inputRef",ref:p,"model-value":b(G),name:se.name,disabled:b(O),readonly:!se.editable||se.readonly,"start-placeholder":se.startPlaceholder,"end-placeholder":se.endPlaceholder,class:$(b(x)),style:Ct(se.$attrs.style),"aria-label":se.ariaLabel,tabindex:se.tabindex,autocomplete:"off",role:"combobox",onClick:Ee,onFocus:b(S),onBlur:b(w),onStartInput:Le,onStartChange:je,onEndInput:Xe,onEndChange:he,onMousedown:Ee,onMouseenter:H,onMouseleave:Q,onTouchstartPassive:j,onKeydown:ae},{prefix:ge(()=>[b(ee)?(F(),He(b(_t),{key:0,class:$([b(o).e("icon"),b(l).e("icon")])},{default:ge(()=>[(F(),He(en(b(ee))))]),_:1},8,["class"])):Be("v-if",!0)]),"range-separator":ge(()=>[Ne(se.$slots,"range-separator",{},()=>[le("span",{class:$(b(l).b("separator"))},rt(se.rangeSeparator),3)])]),suffix:ge(()=>[se.clearIcon?(F(),He(b(_t),{key:0,class:$(b(T)),onMousedown:Pt(b(Vn),["prevent"]),onClick:ye},{default:ge(()=>[(F(),He(en(se.clearIcon)))]),_:1},8,["class","onMousedown"])):Be("v-if",!0)]),_:3},8,["id","model-value","name","disabled","readonly","start-placeholder","end-placeholder","class","style","aria-label","tabindex","onFocus","onBlur"])):(F(),He(b(Rs),{key:0,id:se.id,ref_key:"inputRef",ref:p,"container-role":"combobox","model-value":b(G),name:se.name,size:b(we),disabled:b(O),placeholder:se.placeholder,class:$([b(a).b("editor"),b(a).bm("editor",se.type),se.$attrs.class]),style:Ct(se.$attrs.style),readonly:!se.editable||se.readonly||b(Y)||b(J)||b(Z)||se.type==="week","aria-label":se.ariaLabel,tabindex:se.tabindex,"validate-event":!1,onInput:xe,onFocus:b(S),onBlur:b(w),onKeydown:ae,onChange:Fe,onMousedown:Ee,onMouseenter:H,onMouseleave:Q,onTouchstartPassive:j,onClick:Pt(()=>{},["stop"])},{prefix:ge(()=>[b(ee)?(F(),He(b(_t),{key:0,class:$(b(o).e("icon")),onMousedown:Pt(Ee,["prevent"]),onTouchstartPassive:j},{default:ge(()=>[(F(),He(en(b(ee))))]),_:1},8,["class","onMousedown"])):Be("v-if",!0)]),suffix:ge(()=>[me.value&&se.clearIcon?(F(),He(b(_t),{key:0,class:$(`${b(o).e("icon")} clear-icon`),onMousedown:Pt(b(Vn),["prevent"]),onClick:ye},{default:ge(()=>[(F(),He(en(se.clearIcon)))]),_:1},8,["class","onMousedown"])):Be("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","aria-label","tabindex","onFocus","onBlur","onClick"]))]),content:ge(()=>[Ne(se.$slots,"default",{visible:m.value,actualVisible:v.value,parsedValue:b(U),format:se.format,dateFormat:se.dateFormat,timeFormat:se.timeFormat,unlinkPanels:se.unlinkPanels,type:se.type,defaultValue:se.defaultValue,showNow:se.showNow,onPick:P,onSelectRange:I,onSetPickerOption:Ke,onCalendarChange:V,onPanelChange:re,onMousedown:Pt(()=>{},["stop"])})]),_:3},16,["visible","transition","popper-class","popper-options","fallback-placements","placement"]))}});var c9=ot(bge,[["__file","picker.vue"]]);const Sge=at({...l9,datetimeRole:String,parsedValue:{type:Re(Object)}}),u9=({getAvailableHours:n,getAvailableMinutes:e,getAvailableSeconds:t})=>{const i=(a,o,l,c)=>{const u={hour:n,minute:e,second:t};let d=a;return["hour","minute","second"].forEach(f=>{if(u[f]){let h;const p=u[f];switch(f){case"minute":{h=p(d.hour(),o,c);break}case"second":{h=p(d.hour(),d.minute(),o,c);break}default:{h=p(o,c);break}}if(h!=null&&h.length&&!h.includes(d[f]())){const m=l?0:h.length-1;d=d[f](h[m])}}}),d},r={};return{timePickerOptions:r,getAvailableTime:i,onSetOption:([a,o])=>{r[a]=o}}},xT=n=>{const e=(i,r)=>i||r,t=i=>i!==!0;return n.map(e).filter(t)},d9=(n,e,t)=>({getHoursList:(a,o)=>_T(24,n&&(()=>n==null?void 0:n(a,o))),getMinutesList:(a,o,l)=>_T(60,e&&(()=>e==null?void 0:e(a,o,l))),getSecondsList:(a,o,l,c)=>_T(60,t&&(()=>t==null?void 0:t(a,o,l,c)))}),f9=(n,e,t)=>{const{getHoursList:i,getMinutesList:r,getSecondsList:s}=d9(n,e,t);return{getAvailableHours:(c,u)=>xT(i(c,u)),getAvailableMinutes:(c,u,d)=>xT(r(c,u,d)),getAvailableSeconds:(c,u,d,f)=>xT(s(c,u,d,f))}},h9=n=>{const e=X(n.parsedValue);return We(()=>n.visible,t=>{t||(e.value=n.parsedValue)}),e},wge=at({role:{type:String,required:!0},spinnerDate:{type:Re(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:Re(String),default:""},...o9}),xge=100,Cge=600,hx={beforeMount(n,e){const t=e.value,{interval:i=xge,delay:r=Cge}=Tt(t)?{}:t;let s,a;const o=()=>Tt(t)?t():t.handler(),l=()=>{a&&(clearTimeout(a),a=void 0),s&&(clearInterval(s),s=void 0)};n.addEventListener("mousedown",c=>{c.button===0&&(l(),o(),document.addEventListener("mouseup",()=>l(),{once:!0}),a=setTimeout(()=>{s=setInterval(()=>{o()},i)},r))})}},Mge=ve({__name:"basic-time-spinner",props:wge,emits:["change","select-range","set-option"],setup(n,{emit:e}){const t=n,i=mt("EP_PICKER_BASE"),{isRange:r}=i.props,s=Ze("time"),{getHoursList:a,getMinutesList:o,getSecondsList:l}=d9(t.disabledHours,t.disabledMinutes,t.disabledSeconds);let c=!1;const u=X(),d=X(),f=X(),h=X(),p={hours:d,minutes:f,seconds:h},m=N(()=>t.showSeconds?CF:CF.slice(0,2)),v=N(()=>{const{spinnerDate:G}=t,q=G.hour(),W=G.minute(),Y=G.second();return{hours:q,minutes:W,seconds:Y}}),g=N(()=>{const{hours:G,minutes:q}=b(v),{role:W,spinnerDate:Y}=t,J=r?void 0:Y;return{hours:a(W,J),minutes:o(G,W,J),seconds:l(G,q,W,J)}}),_=N(()=>{const{hours:G,minutes:q,seconds:W}=b(v);return{hours:yT(G,23),minutes:yT(q,59),seconds:yT(W,59)}}),y=wa(G=>{c=!1,x(G)},200),S=G=>{if(!!!t.amPmMode)return"";const W=t.amPmMode==="A";let Y=G<12?" am":" pm";return W&&(Y=Y.toUpperCase()),Y},w=G=>{let q;switch(G){case"hours":q=[0,2];break;case"minutes":q=[3,5];break;case"seconds":q=[6,8];break}const[W,Y]=q;e("select-range",W,Y),u.value=G},x=G=>{M(G,b(v)[G])},T=()=>{x("hours"),x("minutes"),x("seconds")},C=G=>G.querySelector(`.${s.namespace.value}-scrollbar__wrap`),M=(G,q)=>{if(t.arrowControl)return;const W=b(p[G]);W&&W.$el&&(C(W.$el).scrollTop=Math.max(0,q*A(G)))},A=G=>{const q=b(p[G]),W=q==null?void 0:q.$el.querySelector("li");return W&&Number.parseFloat(Fc(W,"height"))||0},E=()=>{P(1)},I=()=>{P(-1)},P=G=>{u.value||w("hours");const q=u.value,W=b(v)[q],Y=u.value==="hours"?24:60,J=D(q,W,G,Y);L(q,J),M(q,J),Mt(()=>w(q))},D=(G,q,W,Y)=>{let J=(q+W+Y)%Y;const Z=b(g)[G];for(;Z[J]&&J!==q;)J=(J+W+Y)%Y;return J},L=(G,q)=>{if(b(g)[G][q])return;const{hours:J,minutes:Z,seconds:ee}=b(v);let me;switch(G){case"hours":me=t.spinnerDate.hour(q).minute(Z).second(ee);break;case"minutes":me=t.spinnerDate.hour(J).minute(q).second(ee);break;case"seconds":me=t.spinnerDate.hour(J).minute(Z).second(q);break}e("change",me)},R=(G,{value:q,disabled:W})=>{W||(L(G,q),w(G),M(G,q))},B=G=>{const q=b(p[G]);if(!q)return;c=!0,y(G);const W=Math.min(Math.round((C(q.$el).scrollTop-(k(G)*.5-10)/A(G)+3)/A(G)),G==="hours"?23:59);L(G,W)},k=G=>b(p[G]).$el.offsetHeight,O=()=>{const G=q=>{const W=b(p[q]);W&&W.$el&&(C(W.$el).onscroll=()=>{B(q)})};G("hours"),G("minutes"),G("seconds")};Ht(()=>{Mt(()=>{!t.arrowControl&&O(),T(),t.role==="start"&&w("hours")})});const U=(G,q)=>{p[q].value=G??void 0};return e("set-option",[`${t.role}_scrollDown`,P]),e("set-option",[`${t.role}_emitSelectRange`,w]),We(()=>t.spinnerDate,()=>{c||T()}),(G,q)=>(F(),ie("div",{class:$([b(s).b("spinner"),{"has-seconds":G.showSeconds}])},[G.arrowControl?Be("v-if",!0):(F(!0),ie(bt,{key:0},sn(b(m),W=>(F(),He(b(ic),{key:W,ref_for:!0,ref:Y=>U(Y,W),class:$(b(s).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":b(s).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:Y=>w(W),onMousemove:Y=>x(W)},{default:ge(()=>[(F(!0),ie(bt,null,sn(b(g)[W],(Y,J)=>(F(),ie("li",{key:J,class:$([b(s).be("spinner","item"),b(s).is("active",J===b(v)[W]),b(s).is("disabled",Y)]),onClick:Z=>R(W,{value:J,disabled:Y})},[W==="hours"?(F(),ie(bt,{key:0},[Xt(rt(("0"+(G.amPmMode?J%12||12:J)).slice(-2))+rt(S(J)),1)],64)):(F(),ie(bt,{key:1},[Xt(rt(("0"+J).slice(-2)),1)],64))],10,["onClick"]))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),G.arrowControl?(F(!0),ie(bt,{key:1},sn(b(m),W=>(F(),ie("div",{key:W,class:$([b(s).be("spinner","wrapper"),b(s).is("arrow")]),onMouseenter:Y=>w(W)},[Wt((F(),He(b(_t),{class:$(["arrow-up",b(s).be("spinner","arrow")])},{default:ge(()=>[oe(b(wL))]),_:1},8,["class"])),[[b(hx),I]]),Wt((F(),He(b(_t),{class:$(["arrow-down",b(s).be("spinner","arrow")])},{default:ge(()=>[oe(b(du))]),_:1},8,["class"])),[[b(hx),E]]),le("ul",{class:$(b(s).be("spinner","list"))},[(F(!0),ie(bt,null,sn(b(_)[W],(Y,J)=>(F(),ie("li",{key:J,class:$([b(s).be("spinner","item"),b(s).is("active",Y===b(v)[W]),b(s).is("disabled",b(g)[W][Y])])},[b(At)(Y)?(F(),ie(bt,{key:0},[W==="hours"?(F(),ie(bt,{key:0},[Xt(rt(("0"+(G.amPmMode?Y%12||12:Y)).slice(-2))+rt(S(Y)),1)],64)):(F(),ie(bt,{key:1},[Xt(rt(("0"+Y).slice(-2)),1)],64))],64)):Be("v-if",!0)],2))),128))],2)],42,["onMouseenter"]))),128)):Be("v-if",!0)],2))}});var pI=ot(Mge,[["__file","basic-time-spinner.vue"]]);const Tge=ve({__name:"panel-time-pick",props:Sge,emits:["pick","select-range","set-picker-option"],setup(n,{emit:e}){const t=n,i=mt("EP_PICKER_BASE"),{arrowControl:r,disabledHours:s,disabledMinutes:a,disabledSeconds:o,defaultValue:l}=i.props,{getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}=f9(s,a,o),f=Ze("time"),{t:h,lang:p}=xn(),m=X([0,2]),v=h9(t),g=N(()=>Wn(t.actualVisible)?`${f.namespace.value}-zoom-in-top`:""),_=N(()=>t.format.includes("ss")),y=N(()=>t.format.includes("A")?"A":t.format.includes("a")?"a":""),S=k=>{const O=Ot(k).locale(p.value),U=D(O);return O.isSame(U)},w=()=>{e("pick",v.value,!1)},x=(k=!1,O=!1)=>{O||e("pick",t.parsedValue,k)},T=k=>{if(!t.visible)return;const O=D(k).millisecond(0);e("pick",O,!0)},C=(k,O)=>{e("select-range",k,O),m.value=[k,O]},M=k=>{const O=[0,3].concat(_.value?[6]:[]),U=["hours","minutes"].concat(_.value?["seconds"]:[]),q=(O.indexOf(m.value[0])+k+O.length)%O.length;E.start_emitSelectRange(U[q])},A=k=>{const O=k.code,{left:U,right:G,up:q,down:W}=ut;if([U,G].includes(O)){M(O===U?-1:1),k.preventDefault();return}if([q,W].includes(O)){const Y=O===q?-1:1;E.start_scrollDown(Y),k.preventDefault();return}},{timePickerOptions:E,onSetOption:I,getAvailableTime:P}=u9({getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}),D=k=>P(k,t.datetimeRole||"",!0),L=k=>k?Ot(k,t.format).locale(p.value):null,R=k=>k?k.format(t.format):null,B=()=>Ot(l).locale(p.value);return e("set-picker-option",["isValidValue",S]),e("set-picker-option",["formatToString",R]),e("set-picker-option",["parseUserInput",L]),e("set-picker-option",["handleKeydownInput",A]),e("set-picker-option",["getRangeAvailableTime",D]),e("set-picker-option",["getDefaultValue",B]),(k,O)=>(F(),He(yr,{name:b(g)},{default:ge(()=>[k.actualVisible||k.visible?(F(),ie("div",{key:0,class:$(b(f).b("panel"))},[le("div",{class:$([b(f).be("panel","content"),{"has-seconds":b(_)}])},[oe(pI,{ref:"spinner",role:k.datetimeRole||"start","arrow-control":b(r),"show-seconds":b(_),"am-pm-mode":b(y),"spinner-date":k.parsedValue,"disabled-hours":b(s),"disabled-minutes":b(a),"disabled-seconds":b(o),onChange:T,onSetOption:b(I),onSelectRange:C},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),le("div",{class:$(b(f).be("panel","footer"))},[le("button",{type:"button",class:$([b(f).be("panel","btn"),"cancel"]),onClick:w},rt(b(h)("el.datepicker.cancel")),3),le("button",{type:"button",class:$([b(f).be("panel","btn"),"confirm"]),onClick:U=>x()},rt(b(h)("el.datepicker.confirm")),11,["onClick"])],2)],2)):Be("v-if",!0)]),_:1},8,["name"]))}});var px=ot(Tge,[["__file","panel-time-pick.vue"]]);const Age=at({...l9,parsedValue:{type:Re(Array)}}),Ege=ve({__name:"panel-time-range",props:Age,emits:["pick","select-range","set-picker-option"],setup(n,{emit:e}){const t=n,i=(Ee,H)=>{const Q=[];for(let j=Ee;j<=H;j++)Q.push(j);return Q},{t:r,lang:s}=xn(),a=Ze("time"),o=Ze("picker"),l=mt("EP_PICKER_BASE"),{arrowControl:c,disabledHours:u,disabledMinutes:d,disabledSeconds:f,defaultValue:h}=l.props,p=N(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",c),S.value?"has-seconds":""]),m=N(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",c),S.value?"has-seconds":""]),v=N(()=>t.parsedValue[0]),g=N(()=>t.parsedValue[1]),_=h9(t),y=()=>{e("pick",_.value,!1)},S=N(()=>t.format.includes("ss")),w=N(()=>t.format.includes("A")?"A":t.format.includes("a")?"a":""),x=(Ee=!1)=>{e("pick",[v.value,g.value],Ee)},T=Ee=>{A(Ee.millisecond(0),g.value)},C=Ee=>{A(v.value,Ee.millisecond(0))},M=Ee=>{const H=Ee.map(j=>Ot(j).locale(s.value)),Q=G(H);return H[0].isSame(Q[0])&&H[1].isSame(Q[1])},A=(Ee,H)=>{t.visible&&e("pick",[Ee,H],!0)},E=N(()=>v.value>g.value),I=X([0,2]),P=(Ee,H)=>{e("select-range",Ee,H,"min"),I.value=[Ee,H]},D=N(()=>S.value?11:8),L=(Ee,H)=>{e("select-range",Ee,H,"max");const Q=b(D);I.value=[Ee+Q,H+Q]},R=Ee=>{const H=S.value?[0,3,6,11,14,17]:[0,3,8,11],Q=["hours","minutes"].concat(S.value?["seconds"]:[]),Pe=(H.indexOf(I.value[0])+Ee+H.length)%H.length,we=H.length/2;Pe<we?J.start_emitSelectRange(Q[Pe]):J.end_emitSelectRange(Q[Pe-we])},B=Ee=>{const H=Ee.code,{left:Q,right:j,up:Pe,down:we}=ut;if([Q,j].includes(H)){R(H===Q?-1:1),Ee.preventDefault();return}if([Pe,we].includes(H)){const De=H===Pe?-1:1,Me=I.value[0]<D.value?"start":"end";J[`${Me}_scrollDown`](De),Ee.preventDefault();return}},k=(Ee,H)=>{const Q=u?u(Ee):[],j=Ee==="start",we=(H||(j?g.value:v.value)).hour(),De=j?i(we+1,23):i(0,we-1);return fT(Q,De)},O=(Ee,H,Q)=>{const j=d?d(Ee,H):[],Pe=H==="start",we=Q||(Pe?g.value:v.value),De=we.hour();if(Ee!==De)return j;const Me=we.minute(),Ae=Pe?i(Me+1,59):i(0,Me-1);return fT(j,Ae)},U=(Ee,H,Q,j)=>{const Pe=f?f(Ee,H,Q):[],we=Q==="start",De=j||(we?g.value:v.value),Me=De.hour(),Ae=De.minute();if(Ee!==Me||H!==Ae)return Pe;const Fe=De.second(),ne=we?i(Fe+1,59):i(0,Fe-1);return fT(Pe,ne)},G=([Ee,H])=>[Z(Ee,"start",!0,H),Z(H,"end",!1,Ee)],{getAvailableHours:q,getAvailableMinutes:W,getAvailableSeconds:Y}=f9(k,O,U),{timePickerOptions:J,getAvailableTime:Z,onSetOption:ee}=u9({getAvailableHours:q,getAvailableMinutes:W,getAvailableSeconds:Y}),me=Ee=>Ee?nt(Ee)?Ee.map(H=>Ot(H,t.format).locale(s.value)):Ot(Ee,t.format).locale(s.value):null,ye=Ee=>Ee?nt(Ee)?Ee.map(H=>H.format(t.format)):Ee.format(t.format):null,Te=()=>{if(nt(h))return h.map(H=>Ot(H).locale(s.value));const Ee=Ot(h).locale(s.value);return[Ee,Ee.add(60,"m")]};return e("set-picker-option",["formatToString",ye]),e("set-picker-option",["parseUserInput",me]),e("set-picker-option",["isValidValue",M]),e("set-picker-option",["handleKeydownInput",B]),e("set-picker-option",["getDefaultValue",Te]),e("set-picker-option",["getRangeAvailableTime",G]),(Ee,H)=>Ee.actualVisible?(F(),ie("div",{key:0,class:$([b(a).b("range-picker"),b(o).b("panel")])},[le("div",{class:$(b(a).be("range-picker","content"))},[le("div",{class:$(b(a).be("range-picker","cell"))},[le("div",{class:$(b(a).be("range-picker","header"))},rt(b(r)("el.datepicker.startTime")),3),le("div",{class:$(b(p))},[oe(pI,{ref:"minSpinner",role:"start","show-seconds":b(S),"am-pm-mode":b(w),"arrow-control":b(c),"spinner-date":b(v),"disabled-hours":k,"disabled-minutes":O,"disabled-seconds":U,onChange:T,onSetOption:b(ee),onSelectRange:P},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),le("div",{class:$(b(a).be("range-picker","cell"))},[le("div",{class:$(b(a).be("range-picker","header"))},rt(b(r)("el.datepicker.endTime")),3),le("div",{class:$(b(m))},[oe(pI,{ref:"maxSpinner",role:"end","show-seconds":b(S),"am-pm-mode":b(w),"arrow-control":b(c),"spinner-date":b(g),"disabled-hours":k,"disabled-minutes":O,"disabled-seconds":U,onChange:C,onSetOption:b(ee),onSelectRange:L},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),le("div",{class:$(b(a).be("panel","footer"))},[le("button",{type:"button",class:$([b(a).be("panel","btn"),"cancel"]),onClick:Q=>y()},rt(b(r)("el.datepicker.cancel")),11,["onClick"]),le("button",{type:"button",class:$([b(a).be("panel","btn"),"confirm"]),disabled:b(E),onClick:Q=>x()},rt(b(r)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):Be("v-if",!0)}});var Ige=ot(Ege,[["__file","panel-time-range.vue"]]);Ot.extend(XL);var Rge=ve({name:"ElTimePicker",install:null,props:{...YL,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,e){const t=X(),[i,r]=n.isRange?["timerange",Ige]:["time",px],s=a=>e.emit("update:modelValue",a);return un("ElPopperOptions",n.popperOptions),e.expose({focus:()=>{var a;(a=t.value)==null||a.focus()},blur:()=>{var a;(a=t.value)==null||a.blur()},handleOpen:()=>{var a;(a=t.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=t.value)==null||a.handleClose()}}),()=>{var a;const o=(a=n.format)!=null?a:hI;return oe(c9,rn(n,{ref:t,type:i,format:o,"onUpdate:modelValue":s}),{default:l=>oe(r,l,null)})}}});const Pge=Ft(Rge),mM=Symbol(),Dge=at({...YL,type:{type:Re(String),default:"date"}}),Lge=["date","dates","year","years","month","months","week","range"],jL=at({disabledDate:{type:Re(Function)},date:{type:Re(Object),required:!0},minDate:{type:Re(Object)},maxDate:{type:Re(Object)},parsedValue:{type:Re([Object,Array])},rangeState:{type:Re(Object),default:()=>({endDate:null,selecting:!1})}}),p9=at({type:{type:Re(String),required:!0,values:Zhe},dateFormat:String,timeFormat:String,showNow:{type:Boolean,default:!0}}),QL=at({unlinkPanels:Boolean,parsedValue:{type:Re(Array)}}),ZL=n=>({type:String,values:Lge,default:n}),kge=at({...p9,parsedValue:{type:Re([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),Rv=n=>{if(!nt(n))return!1;const[e,t]=n;return Ot.isDayjs(e)&&Ot.isDayjs(t)&&e.isSameOrBefore(t)},JL=(n,{lang:e,unit:t,unlinkPanels:i})=>{let r;if(nt(n)){let[s,a]=n.map(o=>Ot(o).locale(e));return i||(a=s.add(1,t)),[s,a]}else n?r=Ot(n):r=Ot();return r=r.locale(e),[r,r.add(1,t)]},Oge=(n,e,{columnIndexOffset:t,startDate:i,nextEndDate:r,now:s,unit:a,relativeDateGetter:o,setCellMetadata:l,setRowMetadata:c})=>{for(let u=0;u<n.row;u++){const d=e[u];for(let f=0;f<n.column;f++){let h=d[f+t];h||(h={row:u,column:f,type:"normal",inRange:!1,start:!1,end:!1});const p=u*n.column+f,m=o(p);h.dayjs=m,h.date=m.toDate(),h.timestamp=m.valueOf(),h.type="normal",h.inRange=!!(i&&m.isSameOrAfter(i,a)&&r&&m.isSameOrBefore(r,a))||!!(i&&m.isSameOrBefore(i,a)&&r&&m.isSameOrAfter(r,a)),i!=null&&i.isSameOrAfter(r)?(h.start=!!r&&m.isSame(r,a),h.end=i&&m.isSame(i,a)):(h.start=!!i&&m.isSame(i,a),h.end=!!r&&m.isSame(r,a)),m.isSame(s,a)&&(h.type="today"),l==null||l(h,{rowIndex:u,columnIndex:f}),d[f+t]=h}c==null||c(d)}},mx=(n,e,t)=>{const i=Ot().locale(t).startOf("month").month(e).year(n),r=i.daysInMonth();return vd(r).map(s=>i.add(s,"day").toDate())},s_=(n,e,t,i)=>{const r=Ot().year(n).month(e).startOf("month"),s=mx(n,e,t).find(a=>!(i!=null&&i(a)));return s?Ot(s).locale(t):r.locale(t)},mI=(n,e,t)=>{const i=n.year();if(!(t!=null&&t(n.toDate())))return n.locale(e);const r=n.month();if(!mx(i,r,e).every(t))return s_(i,r,e,t);for(let s=0;s<12;s++)if(!mx(i,s,e).every(t))return s_(i,s,e,t);return n},Nge=at({...jL,cellClassName:{type:Re(Function)},showWeekNumber:Boolean,selectionMode:ZL("date")}),Bge=["changerange","pick","select"],vI=(n="")=>["normal","today"].includes(n),Fge=(n,e)=>{const{lang:t}=xn(),i=X(),r=X(),s=X(),a=X(),o=X([[],[],[],[],[],[]]);let l=!1;const c=n.date.$locale().weekStart||7,u=n.date.locale("en").localeData().weekdaysShort().map(O=>O.toLowerCase()),d=N(()=>c>3?7-c:-c),f=N(()=>{const O=n.date.startOf("month");return O.subtract(O.day()||7,"day")}),h=N(()=>u.concat(u).slice(c,c+7)),p=N(()=>W8(b(S)).some(O=>O.isCurrent)),m=N(()=>{const O=n.date.startOf("month"),U=O.day()||7,G=O.daysInMonth(),q=O.subtract(1,"month").daysInMonth();return{startOfMonthDay:U,dateCountOfMonth:G,dateCountOfLastMonth:q}}),v=N(()=>n.selectionMode==="dates"?Ks(n.parsedValue):[]),g=(O,{count:U,rowIndex:G,columnIndex:q})=>{const{startOfMonthDay:W,dateCountOfMonth:Y,dateCountOfLastMonth:J}=b(m),Z=b(d);if(G>=0&&G<=1){const ee=W+Z<0?7+W+Z:W+Z;if(q+G*7>=ee)return O.text=U,!0;O.text=J-(ee-q%7)+1+G*7,O.type="prev-month"}else return U<=Y?O.text=U:(O.text=U-Y,O.type="next-month"),!0;return!1},_=(O,{columnIndex:U,rowIndex:G},q)=>{const{disabledDate:W,cellClassName:Y}=n,J=b(v),Z=g(O,{count:q,rowIndex:G,columnIndex:U}),ee=O.dayjs.toDate();return O.selected=J.find(me=>me.isSame(O.dayjs,"day")),O.isSelected=!!O.selected,O.isCurrent=x(O),O.disabled=W==null?void 0:W(ee),O.customClass=Y==null?void 0:Y(ee),Z},y=O=>{if(n.selectionMode==="week"){const[U,G]=n.showWeekNumber?[1,7]:[0,6],q=k(O[U+1]);O[U].inRange=q,O[U].start=q,O[G].inRange=q,O[G].end=q}},S=N(()=>{const{minDate:O,maxDate:U,rangeState:G,showWeekNumber:q}=n,W=b(d),Y=b(o),J="day";let Z=1;if(q)for(let ee=0;ee<6;ee++)Y[ee][0]||(Y[ee][0]={type:"week",text:b(f).add(ee*7+1,J).week()});return Oge({row:6,column:7},Y,{startDate:O,columnIndexOffset:q?1:0,nextEndDate:G.endDate||U||G.selecting&&O||null,now:Ot().locale(b(t)).startOf(J),unit:J,relativeDateGetter:ee=>b(f).add(ee-W,J),setCellMetadata:(...ee)=>{_(...ee,Z)&&(Z+=1)},setRowMetadata:y}),Y});We(()=>n.date,async()=>{var O;(O=b(i))!=null&&O.contains(document.activeElement)&&(await Mt(),await w())});const w=async()=>{var O;return(O=b(r))==null?void 0:O.focus()},x=O=>n.selectionMode==="date"&&vI(O.type)&&T(O,n.parsedValue),T=(O,U)=>U?Ot(U).locale(b(t)).isSame(n.date.date(Number(O.text)),"day"):!1,C=(O,U)=>{const G=O*7+(U-(n.showWeekNumber?1:0))-b(d);return b(f).add(G,"day")},M=O=>{var U;if(!n.rangeState.selecting)return;let G=O.target;if(G.tagName==="SPAN"&&(G=(U=G.parentNode)==null?void 0:U.parentNode),G.tagName==="DIV"&&(G=G.parentNode),G.tagName!=="TD")return;const q=G.parentNode.rowIndex-1,W=G.cellIndex;b(S)[q][W].disabled||(q!==b(s)||W!==b(a))&&(s.value=q,a.value=W,e("changerange",{selecting:!0,endDate:C(q,W)}))},A=O=>!b(p)&&(O==null?void 0:O.text)===1&&O.type==="normal"||O.isCurrent,E=O=>{l||b(p)||n.selectionMode!=="date"||B(O,!0)},I=O=>{O.target.closest("td")&&(l=!0)},P=O=>{O.target.closest("td")&&(l=!1)},D=O=>{!n.rangeState.selecting||!n.minDate?(e("pick",{minDate:O,maxDate:null}),e("select",!0)):(O>=n.minDate?e("pick",{minDate:n.minDate,maxDate:O}):e("pick",{minDate:O,maxDate:n.minDate}),e("select",!1))},L=O=>{const U=O.week(),G=`${O.year()}w${U}`;e("pick",{year:O.year(),week:U,value:G,date:O.startOf("week")})},R=(O,U)=>{const G=U?Ks(n.parsedValue).filter(q=>(q==null?void 0:q.valueOf())!==O.valueOf()):Ks(n.parsedValue).concat([O]);e("pick",G)},B=(O,U=!1)=>{const G=O.target.closest("td");if(!G)return;const q=G.parentNode.rowIndex-1,W=G.cellIndex,Y=b(S)[q][W];if(Y.disabled||Y.type==="week")return;const J=C(q,W);switch(n.selectionMode){case"range":{D(J);break}case"date":{e("pick",J,U);break}case"week":{L(J);break}case"dates":{R(J,!!Y.selected);break}}},k=O=>{if(n.selectionMode!=="week")return!1;let U=n.date.startOf("day");if(O.type==="prev-month"&&(U=U.subtract(1,"month")),O.type==="next-month"&&(U=U.add(1,"month")),U=U.date(Number.parseInt(O.text,10)),n.parsedValue&&!nt(n.parsedValue)){const G=(n.parsedValue.day()-c+7)%7-1;return n.parsedValue.subtract(G,"day").isSame(U,"day")}return!1};return{WEEKS:h,rows:S,tbodyRef:i,currentCellRef:r,focus:w,isCurrent:x,isWeekActive:k,isSelectedCell:A,handlePickDate:B,handleMouseUp:P,handleMouseDown:I,handleMouseMove:M,handleFocus:E}},zge=(n,{isCurrent:e,isWeekActive:t})=>{const i=Ze("date-table"),{t:r}=xn(),s=N(()=>[i.b(),{"is-week-mode":n.selectionMode==="week"}]),a=N(()=>r("el.datepicker.dateTablePrompt")),o=N(()=>r("el.datepicker.week"));return{tableKls:s,tableLabel:a,weekLabel:o,getCellClasses:u=>{const d=[];return vI(u.type)&&!u.disabled?(d.push("available"),u.type==="today"&&d.push("today")):d.push(u.type),e(u)&&d.push("current"),u.inRange&&(vI(u.type)||n.selectionMode==="week")&&(d.push("in-range"),u.start&&d.push("start-date"),u.end&&d.push("end-date")),u.disabled&&d.push("disabled"),u.selected&&d.push("selected"),u.customClass&&d.push(u.customClass),d.join(" ")},getRowKls:u=>[i.e("row"),{current:t(u)}],t:r}},Uge=at({cell:{type:Re(Object)}});var e3=ve({name:"ElDatePickerCell",props:Uge,setup(n){const e=Ze("date-table-cell"),{slots:t}=mt(mM);return()=>{const{cell:i}=n;return Ne(t,"default",{...i},()=>{var r;return[oe("div",{class:e.b()},[oe("span",{class:e.e("text")},[(r=i==null?void 0:i.renderText)!=null?r:i==null?void 0:i.text])])]})}}});const Hge=ve({__name:"basic-date-table",props:Nge,emits:Bge,setup(n,{expose:e,emit:t}){const i=n,{WEEKS:r,rows:s,tbodyRef:a,currentCellRef:o,focus:l,isCurrent:c,isWeekActive:u,isSelectedCell:d,handlePickDate:f,handleMouseUp:h,handleMouseDown:p,handleMouseMove:m,handleFocus:v}=Fge(i,t),{tableLabel:g,tableKls:_,weekLabel:y,getCellClasses:S,getRowKls:w,t:x}=zge(i,{isCurrent:c,isWeekActive:u});return e({focus:l}),(T,C)=>(F(),ie("table",{"aria-label":b(g),class:$(b(_)),cellspacing:"0",cellpadding:"0",role:"grid",onClick:b(f),onMousemove:b(m),onMousedown:Pt(b(p),["prevent"]),onMouseup:b(h)},[le("tbody",{ref_key:"tbodyRef",ref:a},[le("tr",null,[T.showWeekNumber?(F(),ie("th",{key:0,scope:"col"},rt(b(y)),1)):Be("v-if",!0),(F(!0),ie(bt,null,sn(b(r),(M,A)=>(F(),ie("th",{key:A,"aria-label":b(x)("el.datepicker.weeksFull."+M),scope:"col"},rt(b(x)("el.datepicker.weeks."+M)),9,["aria-label"]))),128))]),(F(!0),ie(bt,null,sn(b(s),(M,A)=>(F(),ie("tr",{key:A,class:$(b(w)(M[1]))},[(F(!0),ie(bt,null,sn(M,(E,I)=>(F(),ie("td",{key:`${A}.${I}`,ref_for:!0,ref:P=>b(d)(E)&&(o.value=P),class:$(b(S)(E)),"aria-current":E.isCurrent?"date":void 0,"aria-selected":E.isCurrent,tabindex:b(d)(E)?0:-1,onFocus:b(v)},[oe(b(e3),{cell:E},null,8,["cell"])],42,["aria-current","aria-selected","tabindex","onFocus"]))),128))],2))),128))],512)],42,["aria-label","onClick","onMousemove","onMousedown","onMouseup"]))}});var gI=ot(Hge,[["__file","basic-date-table.vue"]]);const Vge=at({...jL,selectionMode:ZL("month")}),$ge=ve({__name:"basic-month-table",props:Vge,emits:["changerange","pick","select"],setup(n,{expose:e,emit:t}){const i=n,r=Ze("month-table"),{t:s,lang:a}=xn(),o=X(),l=X(),c=X(i.date.locale("en").localeData().monthsShort().map(y=>y.toLowerCase())),u=X([[],[],[]]),d=X(),f=X(),h=N(()=>{var y,S;const w=u.value,x=Ot().locale(a.value).startOf("month");for(let T=0;T<3;T++){const C=w[T];for(let M=0;M<4;M++){const A=C[M]||(C[M]={row:T,column:M,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});A.type="normal";const E=T*4+M,I=i.date.startOf("year").month(E),P=i.rangeState.endDate||i.maxDate||i.rangeState.selecting&&i.minDate||null;A.inRange=!!(i.minDate&&I.isSameOrAfter(i.minDate,"month")&&P&&I.isSameOrBefore(P,"month"))||!!(i.minDate&&I.isSameOrBefore(i.minDate,"month")&&P&&I.isSameOrAfter(P,"month")),(y=i.minDate)!=null&&y.isSameOrAfter(P)?(A.start=!!(P&&I.isSame(P,"month")),A.end=i.minDate&&I.isSame(i.minDate,"month")):(A.start=!!(i.minDate&&I.isSame(i.minDate,"month")),A.end=!!(P&&I.isSame(P,"month"))),x.isSame(I)&&(A.type="today"),A.text=E,A.disabled=((S=i.disabledDate)==null?void 0:S.call(i,I.toDate()))||!1}}return w}),p=()=>{var y;(y=l.value)==null||y.focus()},m=y=>{const S={},w=i.date.year(),x=new Date,T=y.text;return S.disabled=i.disabledDate?mx(w,T,a.value).every(i.disabledDate):!1,S.current=Ks(i.parsedValue).findIndex(C=>Ot.isDayjs(C)&&C.year()===w&&C.month()===T)>=0,S.today=x.getFullYear()===w&&x.getMonth()===T,y.inRange&&(S["in-range"]=!0,y.start&&(S["start-date"]=!0),y.end&&(S["end-date"]=!0)),S},v=y=>{const S=i.date.year(),w=y.text;return Ks(i.date).findIndex(x=>x.year()===S&&x.month()===w)>=0},g=y=>{var S;if(!i.rangeState.selecting)return;let w=y.target;if(w.tagName==="SPAN"&&(w=(S=w.parentNode)==null?void 0:S.parentNode),w.tagName==="DIV"&&(w=w.parentNode),w.tagName!=="TD")return;const x=w.parentNode.rowIndex,T=w.cellIndex;h.value[x][T].disabled||(x!==d.value||T!==f.value)&&(d.value=x,f.value=T,t("changerange",{selecting:!0,endDate:i.date.startOf("year").month(x*4+T)}))},_=y=>{var S;const w=(S=y.target)==null?void 0:S.closest("td");if((w==null?void 0:w.tagName)!=="TD"||fa(w,"disabled"))return;const x=w.cellIndex,C=w.parentNode.rowIndex*4+x,M=i.date.startOf("year").month(C);if(i.selectionMode==="months"){if(y.type==="keydown"){t("pick",Ks(i.parsedValue),!1);return}const A=s_(i.date.year(),C,a.value,i.disabledDate),E=fa(w,"current")?Ks(i.parsedValue).filter(I=>(I==null?void 0:I.month())!==A.month()):Ks(i.parsedValue).concat([Ot(A)]);t("pick",E)}else i.selectionMode==="range"?i.rangeState.selecting?(i.minDate&&M>=i.minDate?t("pick",{minDate:i.minDate,maxDate:M}):t("pick",{minDate:M,maxDate:i.minDate}),t("select",!1)):(t("pick",{minDate:M,maxDate:null}),t("select",!0)):t("pick",C)};return We(()=>i.date,async()=>{var y,S;(y=o.value)!=null&&y.contains(document.activeElement)&&(await Mt(),(S=l.value)==null||S.focus())}),e({focus:p}),(y,S)=>(F(),ie("table",{role:"grid","aria-label":b(s)("el.datepicker.monthTablePrompt"),class:$(b(r).b()),onClick:_,onMousemove:g},[le("tbody",{ref_key:"tbodyRef",ref:o},[(F(!0),ie(bt,null,sn(b(h),(w,x)=>(F(),ie("tr",{key:x},[(F(!0),ie(bt,null,sn(w,(T,C)=>(F(),ie("td",{key:C,ref_for:!0,ref:M=>v(T)&&(l.value=M),class:$(m(T)),"aria-selected":`${v(T)}`,"aria-label":b(s)(`el.datepicker.month${+T.text+1}`),tabindex:v(T)?0:-1,onKeydown:[ri(Pt(_,["prevent","stop"]),["space"]),ri(Pt(_,["prevent","stop"]),["enter"])]},[oe(b(e3),{cell:{...T,renderText:b(s)("el.datepicker.months."+c.value[T.text])}},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var yI=ot($ge,[["__file","basic-month-table.vue"]]);const Gge=at({...jL,selectionMode:ZL("year")}),Wge=ve({__name:"basic-year-table",props:Gge,emits:["changerange","pick","select"],setup(n,{expose:e,emit:t}){const i=n,r=(S,w)=>{const x=Ot(String(S)).locale(w).startOf("year"),C=x.endOf("year").dayOfYear();return vd(C).map(M=>x.add(M,"day").toDate())},s=Ze("year-table"),{t:a,lang:o}=xn(),l=X(),c=X(),u=N(()=>Math.floor(i.date.year()/10)*10),d=X([[],[],[]]),f=X(),h=X(),p=N(()=>{var S;const w=d.value,x=Ot().locale(o.value).startOf("year");for(let T=0;T<3;T++){const C=w[T];for(let M=0;M<4&&!(T*4+M>=10);M++){let A=C[M];A||(A={row:T,column:M,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1}),A.type="normal";const E=T*4+M+u.value,I=Ot().year(E),P=i.rangeState.endDate||i.maxDate||i.rangeState.selecting&&i.minDate||null;A.inRange=!!(i.minDate&&I.isSameOrAfter(i.minDate,"year")&&P&&I.isSameOrBefore(P,"year"))||!!(i.minDate&&I.isSameOrBefore(i.minDate,"year")&&P&&I.isSameOrAfter(P,"year")),(S=i.minDate)!=null&&S.isSameOrAfter(P)?(A.start=!!(P&&I.isSame(P,"year")),A.end=!!(i.minDate&&I.isSame(i.minDate,"year"))):(A.start=!!(i.minDate&&I.isSame(i.minDate,"year")),A.end=!!(P&&I.isSame(P,"year"))),x.isSame(I)&&(A.type="today"),A.text=E;const L=I.toDate();A.disabled=i.disabledDate&&i.disabledDate(L)||!1,C[M]=A}}return w}),m=()=>{var S;(S=c.value)==null||S.focus()},v=S=>{const w={},x=Ot().locale(o.value),T=S.text;return w.disabled=i.disabledDate?r(T,o.value).every(i.disabledDate):!1,w.today=x.year()===T,w.current=Ks(i.parsedValue).findIndex(C=>C.year()===T)>=0,S.inRange&&(w["in-range"]=!0,S.start&&(w["start-date"]=!0),S.end&&(w["end-date"]=!0)),w},g=S=>{const w=S.text;return Ks(i.date).findIndex(x=>x.year()===w)>=0},_=S=>{var w;const x=(w=S.target)==null?void 0:w.closest("td");if(!x||!x.textContent||fa(x,"disabled"))return;const T=x.cellIndex,M=x.parentNode.rowIndex*4+T+u.value,A=Ot().year(M);if(i.selectionMode==="range")i.rangeState.selecting?(i.minDate&&A>=i.minDate?t("pick",{minDate:i.minDate,maxDate:A}):t("pick",{minDate:A,maxDate:i.minDate}),t("select",!1)):(t("pick",{minDate:A,maxDate:null}),t("select",!0));else if(i.selectionMode==="years"){if(S.type==="keydown"){t("pick",Ks(i.parsedValue),!1);return}const E=mI(A.startOf("year"),o.value,i.disabledDate),I=fa(x,"current")?Ks(i.parsedValue).filter(P=>(P==null?void 0:P.year())!==M):Ks(i.parsedValue).concat([E]);t("pick",I)}else t("pick",M)},y=S=>{var w;if(!i.rangeState.selecting)return;const x=(w=S.target)==null?void 0:w.closest("td");if(!x)return;const T=x.parentNode.rowIndex,C=x.cellIndex;p.value[T][C].disabled||(T!==f.value||C!==h.value)&&(f.value=T,h.value=C,t("changerange",{selecting:!0,endDate:Ot().year(u.value).add(T*4+C,"year")}))};return We(()=>i.date,async()=>{var S,w;(S=l.value)!=null&&S.contains(document.activeElement)&&(await Mt(),(w=c.value)==null||w.focus())}),e({focus:m}),(S,w)=>(F(),ie("table",{role:"grid","aria-label":b(a)("el.datepicker.yearTablePrompt"),class:$(b(s).b()),onClick:_,onMousemove:y},[le("tbody",{ref_key:"tbodyRef",ref:l},[(F(!0),ie(bt,null,sn(b(p),(x,T)=>(F(),ie("tr",{key:T},[(F(!0),ie(bt,null,sn(x,(C,M)=>(F(),ie("td",{key:`${T}_${M}`,ref_for:!0,ref:A=>g(C)&&(c.value=A),class:$(["available",v(C)]),"aria-selected":g(C),"aria-label":String(C.text),tabindex:g(C)?0:-1,onKeydown:[ri(Pt(_,["prevent","stop"]),["space"]),ri(Pt(_,["prevent","stop"]),["enter"])]},[oe(b(e3),{cell:C},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var _I=ot(Wge,[["__file","basic-year-table.vue"]]);const Kge=ve({__name:"panel-date-pick",props:kge,emits:["pick","set-picker-option","panel-change"],setup(n,{emit:e}){const t=n,i=(V,re,te)=>!0,r=Ze("picker-panel"),s=Ze("date-picker"),a=Zd(),o=ur(),{t:l,lang:c}=xn(),u=mt("EP_PICKER_BASE"),d=mt(hM),{shortcuts:f,disabledDate:h,cellClassName:p,defaultTime:m}=u.props,v=zn(u.props,"defaultValue"),g=X(),_=X(Ot().locale(c.value)),y=X(!1);let S=!1;const w=N(()=>Ot(m).locale(c.value)),x=N(()=>_.value.month()),T=N(()=>_.value.year()),C=X([]),M=X(null),A=X(null),E=V=>C.value.length>0?i(V,C.value,t.format||"HH:mm:ss"):!0,I=V=>m&&!Pe.value&&!y.value&&!S?w.value.year(V.year()).month(V.month()).date(V.date()):ee.value?V.millisecond(0):V.startOf("day"),P=(V,...re)=>{if(!V)e("pick",V,...re);else if(nt(V)){const te=V.map(I);e("pick",te,...re)}else e("pick",I(V),...re);M.value=null,A.value=null,y.value=!1,S=!1},D=async(V,re)=>{if(U.value==="date"){V=V;let te=t.parsedValue?t.parsedValue.year(V.year()).month(V.month()).date(V.date()):V;E(te)||(te=C.value[0][0].year(V.year()).month(V.month()).date(V.date())),_.value=te,P(te,ee.value||re),t.type==="datetime"&&(await Mt(),je())}else U.value==="week"?P(V.date):U.value==="dates"&&P(V,!0)},L=V=>{const re=V?"add":"subtract";_.value=_.value[re](1,"month"),Ke("month")},R=V=>{const re=_.value,te=V?"add":"subtract";_.value=B.value==="year"?re[te](10,"year"):re[te](1,"year"),Ke("year")},B=X("date"),k=N(()=>{const V=l("el.datepicker.year");if(B.value==="year"){const re=Math.floor(T.value/10)*10;return V?`${re} ${V} - ${re+9} ${V}`:`${re} - ${re+9}`}return`${T.value} ${V}`}),O=V=>{const re=Tt(V.value)?V.value():V.value;if(re){S=!0,P(Ot(re).locale(c.value));return}V.onClick&&V.onClick({attrs:a,slots:o,emit:e})},U=N(()=>{const{type:V}=t;return["week","month","months","year","years","dates"].includes(V)?V:"date"}),G=N(()=>U.value==="dates"||U.value==="months"||U.value==="years"),q=N(()=>U.value==="date"?B.value:U.value),W=N(()=>!!f.length),Y=async(V,re)=>{U.value==="month"?(_.value=s_(_.value.year(),V,c.value,h),P(_.value,!1)):U.value==="months"?P(V,re??!0):(_.value=s_(_.value.year(),V,c.value,h),B.value="date",["month","year","date","week"].includes(U.value)&&(P(_.value,!0),await Mt(),je())),Ke("month")},J=async(V,re)=>{if(U.value==="year"){const te=_.value.startOf("year").year(V);_.value=mI(te,c.value,h),P(_.value,!1)}else if(U.value==="years")P(V,re??!0);else{const te=_.value.year(V);_.value=mI(te,c.value,h),B.value="month",["month","year","date","week"].includes(U.value)&&(P(_.value,!0),await Mt(),je())}Ke("year")},Z=async V=>{B.value=V,await Mt(),je()},ee=N(()=>t.type==="datetime"||t.type==="datetimerange"),me=N(()=>{const V=ee.value||U.value==="dates",re=U.value==="years",te=U.value==="months",pe=B.value==="date",se=B.value==="year",de=B.value==="month";return V&&pe||re&&se||te&&de}),ye=N(()=>h?t.parsedValue?nt(t.parsedValue)?h(t.parsedValue[0].toDate()):h(t.parsedValue.toDate()):!0:!1),Te=()=>{if(G.value)P(t.parsedValue);else{let V=t.parsedValue;if(!V){const re=Ot(m).locale(c.value),te=Xe();V=re.year(te.year()).month(te.month()).date(te.date())}_.value=V,P(V)}},Ee=N(()=>h?h(Ot().locale(c.value).toDate()):!1),H=()=>{const re=Ot().locale(c.value).toDate();y.value=!0,(!h||!h(re))&&E(re)&&(_.value=Ot().locale(c.value),P(_.value))},Q=N(()=>t.timeFormat||TW(t.format)),j=N(()=>t.dateFormat||MW(t.format)),Pe=N(()=>{if(A.value)return A.value;if(!(!t.parsedValue&&!v.value))return(t.parsedValue||_.value).format(Q.value)}),we=N(()=>{if(M.value)return M.value;if(!(!t.parsedValue&&!v.value))return(t.parsedValue||_.value).format(j.value)}),De=X(!1),Me=()=>{De.value=!0},Ae=()=>{De.value=!1},Fe=V=>({hour:V.hour(),minute:V.minute(),second:V.second(),year:V.year(),month:V.month(),date:V.date()}),ne=(V,re,te)=>{const{hour:pe,minute:se,second:de}=Fe(V),qe=t.parsedValue?t.parsedValue.hour(pe).minute(se).second(de):V;_.value=qe,P(_.value,!0),te||(De.value=re)},z=V=>{const re=Ot(V,Q.value).locale(c.value);if(re.isValid()&&E(re)){const{year:te,month:pe,date:se}=Fe(_.value);_.value=re.year(te).month(pe).date(se),A.value=null,De.value=!1,P(_.value,!0)}},K=V=>{const re=Ot(V,j.value).locale(c.value);if(re.isValid()){if(h&&h(re.toDate()))return;const{hour:te,minute:pe,second:se}=Fe(_.value);_.value=re.hour(te).minute(pe).second(se),M.value=null,P(_.value,!0)}},ae=V=>Ot.isDayjs(V)&&V.isValid()&&(h?!h(V.toDate()):!0),xe=V=>nt(V)?V.map(re=>re.format(t.format)):V.format(t.format),Le=V=>Ot(V,t.format).locale(c.value),Xe=()=>{const V=Ot(v.value).locale(c.value);if(!v.value){const re=w.value;return Ot().hour(re.hour()).minute(re.minute()).second(re.second()).locale(c.value)}return V},je=async()=>{var V;["week","month","year","date"].includes(U.value)&&((V=g.value)==null||V.focus(),U.value==="week"&&Ye(ut.down))},he=V=>{const{code:re}=V;[ut.up,ut.down,ut.left,ut.right,ut.home,ut.end,ut.pageUp,ut.pageDown].includes(re)&&(Ye(re),V.stopPropagation(),V.preventDefault()),[ut.enter,ut.space,ut.numpadEnter].includes(re)&&M.value===null&&A.value===null&&(V.preventDefault(),P(_.value,!1))},Ye=V=>{var re;const{up:te,down:pe,left:se,right:de,home:qe,end:fe,pageUp:Je,pageDown:$e}=ut,et={year:{[te]:-4,[pe]:4,[se]:-1,[de]:1,offset:(st,Rt)=>st.setFullYear(st.getFullYear()+Rt)},month:{[te]:-4,[pe]:4,[se]:-1,[de]:1,offset:(st,Rt)=>st.setMonth(st.getMonth()+Rt)},week:{[te]:-1,[pe]:1,[se]:-1,[de]:1,offset:(st,Rt)=>st.setDate(st.getDate()+Rt*7)},date:{[te]:-7,[pe]:7,[se]:-1,[de]:1,[qe]:st=>-st.getDay(),[fe]:st=>-st.getDay()+6,[Je]:st=>-new Date(st.getFullYear(),st.getMonth(),0).getDate(),[$e]:st=>new Date(st.getFullYear(),st.getMonth()+1,0).getDate(),offset:(st,Rt)=>st.setDate(st.getDate()+Rt)}},ht=_.value.toDate();for(;Math.abs(_.value.diff(ht,"year",!0))<1;){const st=et[q.value];if(!st)return;if(st.offset(ht,Tt(st[V])?st[V](ht):(re=st[V])!=null?re:0),h&&h(ht))break;const Rt=Ot(ht).locale(c.value);_.value=Rt,e("pick",Rt,!0);break}},Ke=V=>{e("panel-change",_.value.toDate(),V,B.value)};return We(()=>U.value,V=>{if(["month","year"].includes(V)){B.value=V;return}else if(V==="years"){B.value="year";return}else if(V==="months"){B.value="month";return}B.value="date"},{immediate:!0}),We(()=>B.value,()=>{d==null||d.updatePopper()}),We(()=>v.value,V=>{V&&(_.value=Xe())},{immediate:!0}),We(()=>t.parsedValue,V=>{if(V){if(G.value||nt(V))return;_.value=V}else _.value=Xe()},{immediate:!0}),e("set-picker-option",["isValidValue",ae]),e("set-picker-option",["formatToString",xe]),e("set-picker-option",["parseUserInput",Le]),e("set-picker-option",["handleFocusPicker",je]),(V,re)=>(F(),ie("div",{class:$([b(r).b(),b(s).b(),{"has-sidebar":V.$slots.sidebar||b(W),"has-time":b(ee)}])},[le("div",{class:$(b(r).e("body-wrapper"))},[Ne(V.$slots,"sidebar",{class:$(b(r).e("sidebar"))}),b(W)?(F(),ie("div",{key:0,class:$(b(r).e("sidebar"))},[(F(!0),ie(bt,null,sn(b(f),(te,pe)=>(F(),ie("button",{key:pe,type:"button",class:$(b(r).e("shortcut")),onClick:se=>O(te)},rt(te.text),11,["onClick"]))),128))],2)):Be("v-if",!0),le("div",{class:$(b(r).e("body"))},[b(ee)?(F(),ie("div",{key:0,class:$(b(s).e("time-header"))},[le("span",{class:$(b(s).e("editor-wrap"))},[oe(b(Rs),{placeholder:b(l)("el.datepicker.selectDate"),"model-value":b(we),size:"small","validate-event":!1,onInput:te=>M.value=te,onChange:K},null,8,["placeholder","model-value","onInput"])],2),Wt((F(),ie("span",{class:$(b(s).e("editor-wrap"))},[oe(b(Rs),{placeholder:b(l)("el.datepicker.selectTime"),"model-value":b(Pe),size:"small","validate-event":!1,onFocus:Me,onInput:te=>A.value=te,onChange:z},null,8,["placeholder","model-value","onInput"]),oe(b(px),{visible:De.value,format:b(Q),"parsed-value":_.value,onPick:ne},null,8,["visible","format","parsed-value"])],2)),[[b(eu),Ae]])],2)):Be("v-if",!0),Wt(le("div",{class:$([b(s).e("header"),(B.value==="year"||B.value==="month")&&b(s).e("header--bordered")])},[le("span",{class:$(b(s).e("prev-btn"))},[le("button",{type:"button","aria-label":b(l)("el.datepicker.prevYear"),class:$(["d-arrow-left",b(r).e("icon-btn")]),onClick:te=>R(!1)},[Ne(V.$slots,"prev-year",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(kd))]),_:1})])],10,["aria-label","onClick"]),Wt(le("button",{type:"button","aria-label":b(l)("el.datepicker.prevMonth"),class:$([b(r).e("icon-btn"),"arrow-left"]),onClick:te=>L(!1)},[Ne(V.$slots,"prev-month",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(Ld))]),_:1})])],10,["aria-label","onClick"]),[[Dn,B.value==="date"]])],2),le("span",{role:"button",class:$(b(s).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:ri(te=>Z("year"),["enter"]),onClick:te=>Z("year")},rt(b(k)),43,["onKeydown","onClick"]),Wt(le("span",{role:"button","aria-live":"polite",tabindex:"0",class:$([b(s).e("header-label"),{active:B.value==="month"}]),onKeydown:ri(te=>Z("month"),["enter"]),onClick:te=>Z("month")},rt(b(l)(`el.datepicker.month${b(x)+1}`)),43,["onKeydown","onClick"]),[[Dn,B.value==="date"]]),le("span",{class:$(b(s).e("next-btn"))},[Wt(le("button",{type:"button","aria-label":b(l)("el.datepicker.nextMonth"),class:$([b(r).e("icon-btn"),"arrow-right"]),onClick:te=>L(!0)},[Ne(V.$slots,"next-month",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(js))]),_:1})])],10,["aria-label","onClick"]),[[Dn,B.value==="date"]]),le("button",{type:"button","aria-label":b(l)("el.datepicker.nextYear"),class:$([b(r).e("icon-btn"),"d-arrow-right"]),onClick:te=>R(!0)},[Ne(V.$slots,"next-year",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(Od))]),_:1})])],10,["aria-label","onClick"])],2)],2),[[Dn,B.value!=="time"]]),le("div",{class:$(b(r).e("content")),onKeydown:he},[B.value==="date"?(F(),He(gI,{key:0,ref_key:"currentViewRef",ref:g,"selection-mode":b(U),date:_.value,"parsed-value":V.parsedValue,"disabled-date":b(h),"cell-class-name":b(p),onPick:D},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):Be("v-if",!0),B.value==="year"?(F(),He(_I,{key:1,ref_key:"currentViewRef",ref:g,"selection-mode":b(U),date:_.value,"disabled-date":b(h),"parsed-value":V.parsedValue,onPick:J},null,8,["selection-mode","date","disabled-date","parsed-value"])):Be("v-if",!0),B.value==="month"?(F(),He(yI,{key:2,ref_key:"currentViewRef",ref:g,"selection-mode":b(U),date:_.value,"parsed-value":V.parsedValue,"disabled-date":b(h),onPick:Y},null,8,["selection-mode","date","parsed-value","disabled-date"])):Be("v-if",!0)],34)],2)],2),Wt(le("div",{class:$(b(r).e("footer"))},[Wt(oe(b(Ur),{text:"",size:"small",class:$(b(r).e("link-btn")),disabled:b(Ee),onClick:H},{default:ge(()=>[Xt(rt(b(l)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[Dn,!b(G)&&V.showNow]]),oe(b(Ur),{plain:"",size:"small",class:$(b(r).e("link-btn")),disabled:b(ye),onClick:Te},{default:ge(()=>[Xt(rt(b(l)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[Dn,b(me)]])],2))}});var qge=ot(Kge,[["__file","panel-date-pick.vue"]]);const Xge=at({...p9,...QL,visible:Boolean}),m9=n=>{const{emit:e}=jt(),t=Zd(),i=ur();return s=>{const a=Tt(s.value)?s.value():s.value;if(a){e("pick",[Ot(a[0]).locale(n.value),Ot(a[1]).locale(n.value)]);return}s.onClick&&s.onClick({attrs:t,slots:i,emit:e})}},v9=(n,{defaultValue:e,leftDate:t,rightDate:i,unit:r,onParsedValueChanged:s})=>{const{emit:a}=jt(),{pickerNs:o}=mt(mM),l=Ze("date-range-picker"),{t:c,lang:u}=xn(),d=m9(u),f=X(),h=X(),p=X({endDate:null,selecting:!1}),m=S=>{p.value=S},v=(S=!1)=>{const w=b(f),x=b(h);Rv([w,x])&&a("pick",[w,x],S)},g=S=>{p.value.selecting=S,S||(p.value.endDate=null)},_=S=>{if(nt(S)&&S.length===2){const[w,x]=S;f.value=w,t.value=w,h.value=x,s(b(f),b(h))}else y()},y=()=>{const[S,w]=JL(b(e),{lang:b(u),unit:r,unlinkPanels:n.unlinkPanels});f.value=void 0,h.value=void 0,t.value=S,i.value=w};return We(e,S=>{S&&y()},{immediate:!0}),We(()=>n.parsedValue,_,{immediate:!0}),{minDate:f,maxDate:h,rangeState:p,lang:u,ppNs:o,drpNs:l,handleChangeRange:m,handleRangeConfirm:v,handleShortcutClick:d,onSelect:g,onReset:_,t:c}},Yb="month",Yge=ve({__name:"panel-date-range",props:Xge,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(n,{emit:e}){const t=n,i=mt("EP_PICKER_BASE"),{disabledDate:r,cellClassName:s,defaultTime:a,clearable:o}=i.props,l=zn(i.props,"format"),c=zn(i.props,"shortcuts"),u=zn(i.props,"defaultValue"),{lang:d}=xn(),f=X(Ot().locale(d.value)),h=X(Ot().locale(d.value).add(1,Yb)),{minDate:p,maxDate:m,rangeState:v,ppNs:g,drpNs:_,handleChangeRange:y,handleRangeConfirm:S,handleShortcutClick:w,onSelect:x,onReset:T,t:C}=v9(t,{defaultValue:u,leftDate:f,rightDate:h,unit:Yb,onParsedValueChanged:re});We(()=>t.visible,te=>{!te&&v.value.selecting&&(T(t.parsedValue),x(!1))});const M=X({min:null,max:null}),A=X({min:null,max:null}),E=N(()=>`${f.value.year()} ${C("el.datepicker.year")} ${C(`el.datepicker.month${f.value.month()+1}`)}`),I=N(()=>`${h.value.year()} ${C("el.datepicker.year")} ${C(`el.datepicker.month${h.value.month()+1}`)}`),P=N(()=>f.value.year()),D=N(()=>f.value.month()),L=N(()=>h.value.year()),R=N(()=>h.value.month()),B=N(()=>!!c.value.length),k=N(()=>M.value.min!==null?M.value.min:p.value?p.value.format(W.value):""),O=N(()=>M.value.max!==null?M.value.max:m.value||p.value?(m.value||p.value).format(W.value):""),U=N(()=>A.value.min!==null?A.value.min:p.value?p.value.format(q.value):""),G=N(()=>A.value.max!==null?A.value.max:m.value||p.value?(m.value||p.value).format(q.value):""),q=N(()=>t.timeFormat||TW(l.value)),W=N(()=>t.dateFormat||MW(l.value)),Y=te=>Rv(te)&&(r?!r(te[0].toDate())&&!r(te[1].toDate()):!0),J=()=>{f.value=f.value.subtract(1,"year"),t.unlinkPanels||(h.value=f.value.add(1,"month")),Q("year")},Z=()=>{f.value=f.value.subtract(1,"month"),t.unlinkPanels||(h.value=f.value.add(1,"month")),Q("month")},ee=()=>{t.unlinkPanels?h.value=h.value.add(1,"year"):(f.value=f.value.add(1,"year"),h.value=f.value.add(1,"month")),Q("year")},me=()=>{t.unlinkPanels?h.value=h.value.add(1,"month"):(f.value=f.value.add(1,"month"),h.value=f.value.add(1,"month")),Q("month")},ye=()=>{f.value=f.value.add(1,"year"),Q("year")},Te=()=>{f.value=f.value.add(1,"month"),Q("month")},Ee=()=>{h.value=h.value.subtract(1,"year"),Q("year")},H=()=>{h.value=h.value.subtract(1,"month"),Q("month")},Q=te=>{e("panel-change",[f.value.toDate(),h.value.toDate()],te)},j=N(()=>{const te=(D.value+1)%12,pe=D.value+1>=12?1:0;return t.unlinkPanels&&new Date(P.value+pe,te)<new Date(L.value,R.value)}),Pe=N(()=>t.unlinkPanels&&L.value*12+R.value-(P.value*12+D.value+1)>=12),we=N(()=>!(p.value&&m.value&&!v.value.selecting&&Rv([p.value,m.value]))),De=N(()=>t.type==="datetime"||t.type==="datetimerange"),Me=(te,pe)=>{if(te)return a?Ot(a[pe]||a).locale(d.value).year(te.year()).month(te.month()).date(te.date()):te},Ae=(te,pe=!0)=>{const se=te.minDate,de=te.maxDate,qe=Me(se,0),fe=Me(de,1);m.value===fe&&p.value===qe||(e("calendar-change",[se.toDate(),de&&de.toDate()]),m.value=fe,p.value=qe,!(!pe||De.value)&&S())},Fe=X(!1),ne=X(!1),z=()=>{Fe.value=!1},K=()=>{ne.value=!1},ae=(te,pe)=>{M.value[pe]=te;const se=Ot(te,W.value).locale(d.value);if(se.isValid()){if(r&&r(se.toDate()))return;pe==="min"?(f.value=se,p.value=(p.value||f.value).year(se.year()).month(se.month()).date(se.date()),!t.unlinkPanels&&(!m.value||m.value.isBefore(p.value))&&(h.value=se.add(1,"month"),m.value=p.value.add(1,"month"))):(h.value=se,m.value=(m.value||h.value).year(se.year()).month(se.month()).date(se.date()),!t.unlinkPanels&&(!p.value||p.value.isAfter(m.value))&&(f.value=se.subtract(1,"month"),p.value=m.value.subtract(1,"month")))}},xe=(te,pe)=>{M.value[pe]=null},Le=(te,pe)=>{A.value[pe]=te;const se=Ot(te,q.value).locale(d.value);se.isValid()&&(pe==="min"?(Fe.value=!0,p.value=(p.value||f.value).hour(se.hour()).minute(se.minute()).second(se.second())):(ne.value=!0,m.value=(m.value||h.value).hour(se.hour()).minute(se.minute()).second(se.second()),h.value=m.value))},Xe=(te,pe)=>{A.value[pe]=null,pe==="min"?(f.value=p.value,Fe.value=!1,(!m.value||m.value.isBefore(p.value))&&(m.value=p.value)):(h.value=m.value,ne.value=!1,m.value&&m.value.isBefore(p.value)&&(p.value=m.value))},je=(te,pe,se)=>{A.value.min||(te&&(f.value=te,p.value=(p.value||f.value).hour(te.hour()).minute(te.minute()).second(te.second())),se||(Fe.value=pe),(!m.value||m.value.isBefore(p.value))&&(m.value=p.value,h.value=te))},he=(te,pe,se)=>{A.value.max||(te&&(h.value=te,m.value=(m.value||h.value).hour(te.hour()).minute(te.minute()).second(te.second())),se||(ne.value=pe),m.value&&m.value.isBefore(p.value)&&(p.value=m.value))},Ye=()=>{f.value=JL(b(u),{lang:b(d),unit:"month",unlinkPanels:t.unlinkPanels})[0],h.value=f.value.add(1,"month"),m.value=void 0,p.value=void 0,e("pick",null)},Ke=te=>nt(te)?te.map(pe=>pe.format(l.value)):te.format(l.value),V=te=>nt(te)?te.map(pe=>Ot(pe,l.value).locale(d.value)):Ot(te,l.value).locale(d.value);function re(te,pe){if(t.unlinkPanels&&pe){const se=(te==null?void 0:te.year())||0,de=(te==null?void 0:te.month())||0,qe=pe.year(),fe=pe.month();h.value=se===qe&&de===fe?pe.add(1,Yb):pe}else h.value=f.value.add(1,Yb),pe&&(h.value=h.value.hour(pe.hour()).minute(pe.minute()).second(pe.second()))}return e("set-picker-option",["isValidValue",Y]),e("set-picker-option",["parseUserInput",V]),e("set-picker-option",["formatToString",Ke]),e("set-picker-option",["handleClear",Ye]),(te,pe)=>(F(),ie("div",{class:$([b(g).b(),b(_).b(),{"has-sidebar":te.$slots.sidebar||b(B),"has-time":b(De)}])},[le("div",{class:$(b(g).e("body-wrapper"))},[Ne(te.$slots,"sidebar",{class:$(b(g).e("sidebar"))}),b(B)?(F(),ie("div",{key:0,class:$(b(g).e("sidebar"))},[(F(!0),ie(bt,null,sn(b(c),(se,de)=>(F(),ie("button",{key:de,type:"button",class:$(b(g).e("shortcut")),onClick:qe=>b(w)(se)},rt(se.text),11,["onClick"]))),128))],2)):Be("v-if",!0),le("div",{class:$(b(g).e("body"))},[b(De)?(F(),ie("div",{key:0,class:$(b(_).e("time-header"))},[le("span",{class:$(b(_).e("editors-wrap"))},[le("span",{class:$(b(_).e("time-picker-wrap"))},[oe(b(Rs),{size:"small",disabled:b(v).selecting,placeholder:b(C)("el.datepicker.startDate"),class:$(b(_).e("editor")),"model-value":b(k),"validate-event":!1,onInput:se=>ae(se,"min"),onChange:se=>xe(se,"min")},null,8,["disabled","placeholder","class","model-value","onInput","onChange"])],2),Wt((F(),ie("span",{class:$(b(_).e("time-picker-wrap"))},[oe(b(Rs),{size:"small",class:$(b(_).e("editor")),disabled:b(v).selecting,placeholder:b(C)("el.datepicker.startTime"),"model-value":b(U),"validate-event":!1,onFocus:se=>Fe.value=!0,onInput:se=>Le(se,"min"),onChange:se=>Xe(se,"min")},null,8,["class","disabled","placeholder","model-value","onFocus","onInput","onChange"]),oe(b(px),{visible:Fe.value,format:b(q),"datetime-role":"start","parsed-value":f.value,onPick:je},null,8,["visible","format","parsed-value"])],2)),[[b(eu),z]])],2),le("span",null,[oe(b(_t),null,{default:ge(()=>[oe(b(js))]),_:1})]),le("span",{class:$([b(_).e("editors-wrap"),"is-right"])},[le("span",{class:$(b(_).e("time-picker-wrap"))},[oe(b(Rs),{size:"small",class:$(b(_).e("editor")),disabled:b(v).selecting,placeholder:b(C)("el.datepicker.endDate"),"model-value":b(O),readonly:!b(p),"validate-event":!1,onInput:se=>ae(se,"max"),onChange:se=>xe(se,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onInput","onChange"])],2),Wt((F(),ie("span",{class:$(b(_).e("time-picker-wrap"))},[oe(b(Rs),{size:"small",class:$(b(_).e("editor")),disabled:b(v).selecting,placeholder:b(C)("el.datepicker.endTime"),"model-value":b(G),readonly:!b(p),"validate-event":!1,onFocus:se=>b(p)&&(ne.value=!0),onInput:se=>Le(se,"max"),onChange:se=>Xe(se,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onFocus","onInput","onChange"]),oe(b(px),{"datetime-role":"end",visible:ne.value,format:b(q),"parsed-value":h.value,onPick:he},null,8,["visible","format","parsed-value"])],2)),[[b(eu),K]])],2)],2)):Be("v-if",!0),le("div",{class:$([[b(g).e("content"),b(_).e("content")],"is-left"])},[le("div",{class:$(b(_).e("header"))},[le("button",{type:"button",class:$([b(g).e("icon-btn"),"d-arrow-left"]),"aria-label":b(C)("el.datepicker.prevYear"),onClick:J},[Ne(te.$slots,"prev-year",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(kd))]),_:1})])],10,["aria-label"]),le("button",{type:"button",class:$([b(g).e("icon-btn"),"arrow-left"]),"aria-label":b(C)("el.datepicker.prevMonth"),onClick:Z},[Ne(te.$slots,"prev-month",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(Ld))]),_:1})])],10,["aria-label"]),te.unlinkPanels?(F(),ie("button",{key:0,type:"button",disabled:!b(Pe),class:$([[b(g).e("icon-btn"),{"is-disabled":!b(Pe)}],"d-arrow-right"]),"aria-label":b(C)("el.datepicker.nextYear"),onClick:ye},[Ne(te.$slots,"next-year",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(Od))]),_:1})])],10,["disabled","aria-label"])):Be("v-if",!0),te.unlinkPanels?(F(),ie("button",{key:1,type:"button",disabled:!b(j),class:$([[b(g).e("icon-btn"),{"is-disabled":!b(j)}],"arrow-right"]),"aria-label":b(C)("el.datepicker.nextMonth"),onClick:Te},[Ne(te.$slots,"next-month",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(js))]),_:1})])],10,["disabled","aria-label"])):Be("v-if",!0),le("div",null,rt(b(E)),1)],2),oe(gI,{"selection-mode":"range",date:f.value,"min-date":b(p),"max-date":b(m),"range-state":b(v),"disabled-date":b(r),"cell-class-name":b(s),onChangerange:b(y),onPick:Ae,onSelect:b(x)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),le("div",{class:$([[b(g).e("content"),b(_).e("content")],"is-right"])},[le("div",{class:$(b(_).e("header"))},[te.unlinkPanels?(F(),ie("button",{key:0,type:"button",disabled:!b(Pe),class:$([[b(g).e("icon-btn"),{"is-disabled":!b(Pe)}],"d-arrow-left"]),"aria-label":b(C)("el.datepicker.prevYear"),onClick:Ee},[Ne(te.$slots,"prev-year",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(kd))]),_:1})])],10,["disabled","aria-label"])):Be("v-if",!0),te.unlinkPanels?(F(),ie("button",{key:1,type:"button",disabled:!b(j),class:$([[b(g).e("icon-btn"),{"is-disabled":!b(j)}],"arrow-left"]),"aria-label":b(C)("el.datepicker.prevMonth"),onClick:H},[Ne(te.$slots,"prev-month",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(Ld))]),_:1})])],10,["disabled","aria-label"])):Be("v-if",!0),le("button",{type:"button","aria-label":b(C)("el.datepicker.nextYear"),class:$([b(g).e("icon-btn"),"d-arrow-right"]),onClick:ee},[Ne(te.$slots,"next-year",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(Od))]),_:1})])],10,["aria-label"]),le("button",{type:"button",class:$([b(g).e("icon-btn"),"arrow-right"]),"aria-label":b(C)("el.datepicker.nextMonth"),onClick:me},[Ne(te.$slots,"next-month",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(js))]),_:1})])],10,["aria-label"]),le("div",null,rt(b(I)),1)],2),oe(gI,{"selection-mode":"range",date:h.value,"min-date":b(p),"max-date":b(m),"range-state":b(v),"disabled-date":b(r),"cell-class-name":b(s),onChangerange:b(y),onPick:Ae,onSelect:b(x)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),b(De)?(F(),ie("div",{key:0,class:$(b(g).e("footer"))},[b(o)?(F(),He(b(Ur),{key:0,text:"",size:"small",class:$(b(g).e("link-btn")),onClick:Ye},{default:ge(()=>[Xt(rt(b(C)("el.datepicker.clear")),1)]),_:1},8,["class"])):Be("v-if",!0),oe(b(Ur),{plain:"",size:"small",class:$(b(g).e("link-btn")),disabled:b(we),onClick:se=>b(S)(!1)},{default:ge(()=>[Xt(rt(b(C)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled","onClick"])],2)):Be("v-if",!0)],2))}});var jge=ot(Yge,[["__file","panel-date-range.vue"]]);const Qge=at({...QL}),Zge=["pick","set-picker-option","calendar-change"],Jge=({unlinkPanels:n,leftDate:e,rightDate:t})=>{const{t:i}=xn(),r=()=>{e.value=e.value.subtract(1,"year"),n.value||(t.value=t.value.subtract(1,"year"))},s=()=>{n.value||(e.value=e.value.add(1,"year")),t.value=t.value.add(1,"year")},a=()=>{e.value=e.value.add(1,"year")},o=()=>{t.value=t.value.subtract(1,"year")},l=N(()=>`${e.value.year()} ${i("el.datepicker.year")}`),c=N(()=>`${t.value.year()} ${i("el.datepicker.year")}`),u=N(()=>e.value.year()),d=N(()=>t.value.year()===e.value.year()?e.value.year()+1:t.value.year());return{leftPrevYear:r,rightNextYear:s,leftNextYear:a,rightPrevYear:o,leftLabel:l,rightLabel:c,leftYear:u,rightYear:d}},jb="year",e0e=ve({name:"DatePickerMonthRange"}),t0e=ve({...e0e,props:Qge,emits:Zge,setup(n,{emit:e}){const t=n,{lang:i}=xn(),r=mt("EP_PICKER_BASE"),{shortcuts:s,disabledDate:a}=r.props,o=zn(r.props,"format"),l=zn(r.props,"defaultValue"),c=X(Ot().locale(i.value)),u=X(Ot().locale(i.value).add(1,jb)),{minDate:d,maxDate:f,rangeState:h,ppNs:p,drpNs:m,handleChangeRange:v,handleRangeConfirm:g,handleShortcutClick:_,onSelect:y}=v9(t,{defaultValue:l,leftDate:c,rightDate:u,unit:jb,onParsedValueChanged:k}),S=N(()=>!!s.length),{leftPrevYear:w,rightNextYear:x,leftNextYear:T,rightPrevYear:C,leftLabel:M,rightLabel:A,leftYear:E,rightYear:I}=Jge({unlinkPanels:zn(t,"unlinkPanels"),leftDate:c,rightDate:u}),P=N(()=>t.unlinkPanels&&I.value>E.value+1),D=(O,U=!0)=>{const G=O.minDate,q=O.maxDate;f.value===q&&d.value===G||(e("calendar-change",[G.toDate(),q&&q.toDate()]),f.value=q,d.value=G,U&&g())},L=()=>{c.value=JL(b(l),{lang:b(i),unit:"year",unlinkPanels:t.unlinkPanels})[0],u.value=c.value.add(1,"year"),e("pick",null)},R=O=>nt(O)?O.map(U=>U.format(o.value)):O.format(o.value),B=O=>nt(O)?O.map(U=>Ot(U,o.value).locale(i.value)):Ot(O,o.value).locale(i.value);function k(O,U){if(t.unlinkPanels&&U){const G=(O==null?void 0:O.year())||0,q=U.year();u.value=G===q?U.add(1,jb):U}else u.value=c.value.add(1,jb)}return e("set-picker-option",["isValidValue",Rv]),e("set-picker-option",["formatToString",R]),e("set-picker-option",["parseUserInput",B]),e("set-picker-option",["handleClear",L]),(O,U)=>(F(),ie("div",{class:$([b(p).b(),b(m).b(),{"has-sidebar":!!O.$slots.sidebar||b(S)}])},[le("div",{class:$(b(p).e("body-wrapper"))},[Ne(O.$slots,"sidebar",{class:$(b(p).e("sidebar"))}),b(S)?(F(),ie("div",{key:0,class:$(b(p).e("sidebar"))},[(F(!0),ie(bt,null,sn(b(s),(G,q)=>(F(),ie("button",{key:q,type:"button",class:$(b(p).e("shortcut")),onClick:W=>b(_)(G)},rt(G.text),11,["onClick"]))),128))],2)):Be("v-if",!0),le("div",{class:$(b(p).e("body"))},[le("div",{class:$([[b(p).e("content"),b(m).e("content")],"is-left"])},[le("div",{class:$(b(m).e("header"))},[le("button",{type:"button",class:$([b(p).e("icon-btn"),"d-arrow-left"]),onClick:b(w)},[Ne(O.$slots,"prev-year",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(kd))]),_:1})])],10,["onClick"]),O.unlinkPanels?(F(),ie("button",{key:0,type:"button",disabled:!b(P),class:$([[b(p).e("icon-btn"),{[b(p).is("disabled")]:!b(P)}],"d-arrow-right"]),onClick:b(T)},[Ne(O.$slots,"next-year",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(Od))]),_:1})])],10,["disabled","onClick"])):Be("v-if",!0),le("div",null,rt(b(M)),1)],2),oe(yI,{"selection-mode":"range",date:c.value,"min-date":b(d),"max-date":b(f),"range-state":b(h),"disabled-date":b(a),onChangerange:b(v),onPick:D,onSelect:b(y)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),le("div",{class:$([[b(p).e("content"),b(m).e("content")],"is-right"])},[le("div",{class:$(b(m).e("header"))},[O.unlinkPanels?(F(),ie("button",{key:0,type:"button",disabled:!b(P),class:$([[b(p).e("icon-btn"),{"is-disabled":!b(P)}],"d-arrow-left"]),onClick:b(C)},[Ne(O.$slots,"prev-year",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(kd))]),_:1})])],10,["disabled","onClick"])):Be("v-if",!0),le("button",{type:"button",class:$([b(p).e("icon-btn"),"d-arrow-right"]),onClick:b(x)},[Ne(O.$slots,"next-year",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(Od))]),_:1})])],10,["onClick"]),le("div",null,rt(b(A)),1)],2),oe(yI,{"selection-mode":"range",date:u.value,"min-date":b(d),"max-date":b(f),"range-state":b(h),"disabled-date":b(a),onChangerange:b(v),onPick:D,onSelect:b(y)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var n0e=ot(t0e,[["__file","panel-month-range.vue"]]);const i0e=at({...QL}),r0e=["pick","set-picker-option","calendar-change"],s0e=({unlinkPanels:n,leftDate:e,rightDate:t})=>{const i=()=>{e.value=e.value.subtract(10,"year"),n.value||(t.value=t.value.subtract(10,"year"))},r=()=>{n.value||(e.value=e.value.add(10,"year")),t.value=t.value.add(10,"year")},s=()=>{e.value=e.value.add(10,"year")},a=()=>{t.value=t.value.subtract(10,"year")},o=N(()=>{const d=Math.floor(e.value.year()/10)*10;return`${d}-${d+9}`}),l=N(()=>{const d=Math.floor(t.value.year()/10)*10;return`${d}-${d+9}`}),c=N(()=>Math.floor(e.value.year()/10)*10+9),u=N(()=>Math.floor(t.value.year()/10)*10);return{leftPrevYear:i,rightNextYear:r,leftNextYear:s,rightPrevYear:a,leftLabel:o,rightLabel:l,leftYear:c,rightYear:u}},MF="year",a0e=ve({name:"DatePickerYearRange"}),o0e=ve({...a0e,props:i0e,emits:r0e,setup(n,{emit:e}){const t=n,{lang:i}=xn(),r=X(Ot().locale(i.value)),s=X(r.value.add(10,"year")),{pickerNs:a}=mt(mM),o=Ze("date-range-picker"),l=N(()=>!!D.length),c=N(()=>[a.b(),o.b(),{"has-sidebar":!!ur().sidebar||l.value}]),u=N(()=>({content:[a.e("content"),o.e("content"),"is-left"],arrowLeftBtn:[a.e("icon-btn"),"d-arrow-left"],arrowRightBtn:[a.e("icon-btn"),{[a.is("disabled")]:!w.value},"d-arrow-right"]})),d=N(()=>({content:[a.e("content"),o.e("content"),"is-right"],arrowLeftBtn:[a.e("icon-btn"),{"is-disabled":!w.value},"d-arrow-left"],arrowRightBtn:[a.e("icon-btn"),"d-arrow-right"]})),f=m9(i),{leftPrevYear:h,rightNextYear:p,leftNextYear:m,rightPrevYear:v,leftLabel:g,rightLabel:_,leftYear:y,rightYear:S}=s0e({unlinkPanels:zn(t,"unlinkPanels"),leftDate:r,rightDate:s}),w=N(()=>t.unlinkPanels&&S.value>y.value+1),x=X(),T=X(),C=X({endDate:null,selecting:!1}),M=W=>{C.value=W},A=(W,Y=!0)=>{const J=W.minDate,Z=W.maxDate;T.value===Z&&x.value===J||(e("calendar-change",[J.toDate(),Z&&Z.toDate()]),T.value=Z,x.value=J,Y&&E())},E=(W=!1)=>{Rv([x.value,T.value])&&e("pick",[x.value,T.value],W)},I=W=>{C.value.selecting=W,W||(C.value.endDate=null)},P=mt("EP_PICKER_BASE"),{shortcuts:D,disabledDate:L}=P.props,R=zn(P.props,"format"),B=zn(P.props,"defaultValue"),k=()=>{let W;if(nt(B.value)){const Y=Ot(B.value[0]);let J=Ot(B.value[1]);return t.unlinkPanels||(J=Y.add(10,MF)),[Y,J]}else B.value?W=Ot(B.value):W=Ot();return W=W.locale(i.value),[W,W.add(10,MF)]};We(()=>B.value,W=>{if(W){const Y=k();r.value=Y[0],s.value=Y[1]}},{immediate:!0}),We(()=>t.parsedValue,W=>{if(W&&W.length===2)if(x.value=W[0],T.value=W[1],r.value=x.value,t.unlinkPanels&&T.value){const Y=x.value.year(),J=T.value.year();s.value=Y===J?T.value.add(10,"year"):T.value}else s.value=r.value.add(10,"year");else{const Y=k();x.value=void 0,T.value=void 0,r.value=Y[0],s.value=Y[1]}},{immediate:!0});const O=W=>nt(W)?W.map(Y=>Ot(Y,R.value).locale(i.value)):Ot(W,R.value).locale(i.value),U=W=>nt(W)?W.map(Y=>Y.format(R.value)):W.format(R.value),G=W=>Rv(W)&&(L?!L(W[0].toDate())&&!L(W[1].toDate()):!0),q=()=>{const W=k();r.value=W[0],s.value=W[1],T.value=void 0,x.value=void 0,e("pick",null)};return e("set-picker-option",["isValidValue",G]),e("set-picker-option",["parseUserInput",O]),e("set-picker-option",["formatToString",U]),e("set-picker-option",["handleClear",q]),(W,Y)=>(F(),ie("div",{class:$(b(c))},[le("div",{class:$(b(a).e("body-wrapper"))},[Ne(W.$slots,"sidebar",{class:$(b(a).e("sidebar"))}),b(l)?(F(),ie("div",{key:0,class:$(b(a).e("sidebar"))},[(F(!0),ie(bt,null,sn(b(D),(J,Z)=>(F(),ie("button",{key:Z,type:"button",class:$(b(a).e("shortcut")),onClick:ee=>b(f)(J)},rt(J.text),11,["onClick"]))),128))],2)):Be("v-if",!0),le("div",{class:$(b(a).e("body"))},[le("div",{class:$(b(u).content)},[le("div",{class:$(b(o).e("header"))},[le("button",{type:"button",class:$(b(u).arrowLeftBtn),onClick:b(h)},[Ne(W.$slots,"prev-year",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(kd))]),_:1})])],10,["onClick"]),W.unlinkPanels?(F(),ie("button",{key:0,type:"button",disabled:!b(w),class:$(b(u).arrowRightBtn),onClick:b(m)},[Ne(W.$slots,"next-year",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(Od))]),_:1})])],10,["disabled","onClick"])):Be("v-if",!0),le("div",null,rt(b(g)),1)],2),oe(_I,{"selection-mode":"range",date:r.value,"min-date":x.value,"max-date":T.value,"range-state":C.value,"disabled-date":b(L),onChangerange:M,onPick:A,onSelect:I},null,8,["date","min-date","max-date","range-state","disabled-date"])],2),le("div",{class:$(b(d).content)},[le("div",{class:$(b(o).e("header"))},[W.unlinkPanels?(F(),ie("button",{key:0,type:"button",disabled:!b(w),class:$(b(d).arrowLeftBtn),onClick:b(v)},[Ne(W.$slots,"prev-year",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(kd))]),_:1})])],10,["disabled","onClick"])):Be("v-if",!0),le("button",{type:"button",class:$(b(d).arrowRightBtn),onClick:b(p)},[Ne(W.$slots,"next-year",{},()=>[oe(b(_t),null,{default:ge(()=>[oe(b(Od))]),_:1})])],10,["onClick"]),le("div",null,rt(b(_)),1)],2),oe(_I,{"selection-mode":"range",date:s.value,"min-date":x.value,"max-date":T.value,"range-state":C.value,"disabled-date":b(L),onChangerange:M,onPick:A,onSelect:I},null,8,["date","min-date","max-date","range-state","disabled-date"])],2)],2)],2)],2))}});var l0e=ot(o0e,[["__file","panel-year-range.vue"]]);const c0e=function(n){switch(n){case"daterange":case"datetimerange":return jge;case"monthrange":return n0e;case"yearrange":return l0e;default:return qge}};Ot.extend(EW);Ot.extend(ige);Ot.extend(XL);Ot.extend(sge);Ot.extend(oge);Ot.extend(cge);Ot.extend(dge);Ot.extend(hge);var u0e=ve({name:"ElDatePicker",install:null,props:Dge,emits:["update:modelValue"],setup(n,{expose:e,emit:t,slots:i}){const r=Ze("picker-panel");un("ElPopperOptions",Nn(zn(n,"popperOptions"))),un(mM,{slots:i,pickerNs:r});const s=X();e({focus:()=>{var l;(l=s.value)==null||l.focus()},blur:()=>{var l;(l=s.value)==null||l.blur()},handleOpen:()=>{var l;(l=s.value)==null||l.handleOpen()},handleClose:()=>{var l;(l=s.value)==null||l.handleClose()}});const o=l=>{t("update:modelValue",l)};return()=>{var l;const c=(l=n.format)!=null?l:pge[n.type]||wm,u=c0e(n.type);return oe(c9,rn(n,{format:c,type:n.type,ref:s,"onUpdate:modelValue":o}),{default:d=>oe(u,d,{"prev-month":i["prev-month"],"next-month":i["next-month"],"prev-year":i["prev-year"],"next-year":i["next-year"]}),"range-separator":i["range-separator"]})}}});const d0e=Ft(u0e),t3=Symbol("elDescriptions");var jg=ve({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:mt(t3,{})}},render(){var n;const e=wpe(this.cell),t=(((n=this.cell)==null?void 0:n.dirs)||[]).map(g=>{const{dir:_,arg:y,modifiers:S,value:w}=g;return[_,w,y,S]}),{border:i,direction:r}=this.descriptions,s=r==="vertical",a=()=>{var g,_,y;return((y=(_=(g=this.cell)==null?void 0:g.children)==null?void 0:_.label)==null?void 0:y.call(_))||e.label},o=()=>{var g,_,y;return(y=(_=(g=this.cell)==null?void 0:g.children)==null?void 0:_.default)==null?void 0:y.call(_)},l=e.span,c=e.rowspan,u=e.align?`is-${e.align}`:"",d=e.labelAlign?`is-${e.labelAlign}`:u,f=e.className,h=e.labelClassName,p=this.type==="label"&&(e.labelWidth||this.descriptions.labelWidth)||e.width,m={width:Ui(p),minWidth:Ui(e.minWidth)},v=Ze("descriptions");switch(this.type){case"label":return Wt(wt(this.tag,{style:m,class:[v.e("cell"),v.e("label"),v.is("bordered-label",i),v.is("vertical-label",s),d,h],colSpan:s?l:1,rowspan:s?1:c},a()),t);case"content":return Wt(wt(this.tag,{style:m,class:[v.e("cell"),v.e("content"),v.is("bordered-content",i),v.is("vertical-content",s),u,f],colSpan:s?l:l*2-1,rowspan:s?c*2-1:c},o()),t);default:{const g=a();return Wt(wt("td",{style:m,class:[v.e("cell"),u],colSpan:l,rowspan:c},[xr(g)?void 0:wt("span",{class:[v.e("label"),h]},g),wt("span",{class:[v.e("content"),f]},o())]),t)}}}});const f0e=at({row:{type:Re(Array),default:()=>[]}}),h0e=ve({name:"ElDescriptionsRow"}),p0e=ve({...h0e,props:f0e,setup(n){const e=mt(t3,{});return(t,i)=>b(e).direction==="vertical"?(F(),ie(bt,{key:0},[le("tr",null,[(F(!0),ie(bt,null,sn(t.row,(r,s)=>(F(),He(b(jg),{key:`tr1-${s}`,cell:r,tag:"th",type:"label"},null,8,["cell"]))),128))]),le("tr",null,[(F(!0),ie(bt,null,sn(t.row,(r,s)=>(F(),He(b(jg),{key:`tr2-${s}`,cell:r,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(F(),ie("tr",{key:1},[(F(!0),ie(bt,null,sn(t.row,(r,s)=>(F(),ie(bt,{key:`tr3-${s}`},[b(e).border?(F(),ie(bt,{key:0},[oe(b(jg),{cell:r,tag:"td",type:"label"},null,8,["cell"]),oe(b(jg),{cell:r,tag:"td",type:"content"},null,8,["cell"])],64)):(F(),He(b(jg),{key:1,cell:r,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var m0e=ot(p0e,[["__file","descriptions-row.vue"]]);const v0e=at({border:Boolean,column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:cr,title:{type:String,default:""},extra:{type:String,default:""},labelWidth:{type:[String,Number],default:""}}),g0e=ve({name:"ElDescriptions"}),y0e=ve({...g0e,props:v0e,setup(n){const e=n,t=Ze("descriptions"),i=tr(),r=ur();un(t3,e);const s=N(()=>[t.b(),t.m(i.value)]),a=(l,c,u,d=!1)=>(l.props||(l.props={}),c>u&&(l.props.span=u),d&&(l.props.span=c),l),o=()=>{if(!r.default)return[];const l=gd(r.default()).filter(p=>{var m;return((m=p==null?void 0:p.type)==null?void 0:m.name)==="ElDescriptionsItem"}),c=[];let u=[],d=e.column,f=0;const h=[];return l.forEach((p,m)=>{var v,g,_;const y=((v=p.props)==null?void 0:v.span)||1,S=((g=p.props)==null?void 0:g.rowspan)||1,w=c.length;if(h[w]||(h[w]=0),S>1)for(let x=1;x<S;x++)h[_=w+x]||(h[_]=0),h[w+x]++,f++;if(h[w]>0&&(d-=h[w],h[w]=0),m<l.length-1&&(f+=y>d?d:y),m===l.length-1){const x=e.column-f%e.column;u.push(a(p,x,d,!0)),c.push(u);return}y<d?(d-=y,u.push(p)):(u.push(a(p,y,d)),c.push(u),d=e.column,u=[])}),c};return(l,c)=>(F(),ie("div",{class:$(b(s))},[l.title||l.extra||l.$slots.title||l.$slots.extra?(F(),ie("div",{key:0,class:$(b(t).e("header"))},[le("div",{class:$(b(t).e("title"))},[Ne(l.$slots,"title",{},()=>[Xt(rt(l.title),1)])],2),le("div",{class:$(b(t).e("extra"))},[Ne(l.$slots,"extra",{},()=>[Xt(rt(l.extra),1)])],2)],2)):Be("v-if",!0),le("div",{class:$(b(t).e("body"))},[le("table",{class:$([b(t).e("table"),b(t).is("bordered",l.border)])},[le("tbody",null,[(F(!0),ie(bt,null,sn(o(),(u,d)=>(F(),He(m0e,{key:d,row:u},null,8,["row"]))),128))])],2)],2)],2))}});var _0e=ot(y0e,[["__file","description.vue"]]);const b0e=at({label:{type:String,default:""},span:{type:Number,default:1},rowspan:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},labelWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}),g9=ve({name:"ElDescriptionsItem",props:b0e}),S0e=Ft(_0e,{DescriptionsItem:g9}),w0e=ki(g9),n3=n=>{if(!n)return{onClick:Vn,onMousedown:Vn,onMouseup:Vn};let e=!1,t=!1;return{onClick:a=>{e&&t&&n(a),e=t=!1},onMousedown:a=>{e=a.target===a.currentTarget},onMouseup:a=>{t=a.target===a.currentTarget}}},x0e=at({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:Re([String,Array,Object])},zIndex:{type:Re([String,Number])}}),C0e={click:n=>n instanceof MouseEvent},M0e="overlay";var T0e=ve({name:"ElOverlay",props:x0e,emits:C0e,setup(n,{slots:e,emit:t}){const i=Ze(M0e),r=l=>{t("click",l)},{onClick:s,onMousedown:a,onMouseup:o}=n3(n.customMaskEvent?void 0:r);return()=>n.mask?oe("div",{class:[i.b(),n.overlayClass],style:{zIndex:n.zIndex},onClick:s,onMousedown:a,onMouseup:o},[Ne(e,"default")],oo.STYLE|oo.CLASS|oo.PROPS,["onClick","onMouseup","onMousedown"]):wt("div",{class:n.overlayClass,style:{zIndex:n.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Ne(e,"default")])}});const i3=T0e,y9=Symbol("dialogInjectionKey"),_9=at({center:Boolean,alignCenter:Boolean,closeIcon:{type:Zn},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),A0e={close:()=>!0},b9=(n,e,t,i)=>{let r={offsetX:0,offsetY:0};const s=c=>{const u=c.clientX,d=c.clientY,{offsetX:f,offsetY:h}=r,p=n.value.getBoundingClientRect(),m=p.left,v=p.top,g=p.width,_=p.height,y=document.documentElement.clientWidth,S=document.documentElement.clientHeight,w=-m+f,x=-v+h,T=y-m-g+f,C=S-v-_+h,M=E=>{let I=f+E.clientX-u,P=h+E.clientY-d;i!=null&&i.value||(I=Math.min(Math.max(I,w),T),P=Math.min(Math.max(P,x),C)),r={offsetX:I,offsetY:P},n.value&&(n.value.style.transform=`translate(${Ui(I)}, ${Ui(P)})`)},A=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",A)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",A)},a=()=>{e.value&&n.value&&e.value.addEventListener("mousedown",s)},o=()=>{e.value&&n.value&&e.value.removeEventListener("mousedown",s)},l=()=>{r={offsetX:0,offsetY:0},n.value&&(n.value.style.transform="none")};return Ht(()=>{zr(()=>{t.value?a():o()})}),Un(()=>{o()}),{resetPosition:l}},vM=(...n)=>e=>{n.forEach(t=>{Tt(t)?t(e):t.value=e})},E0e=ve({name:"ElDialogContent"}),I0e=ve({...E0e,props:_9,emits:A0e,setup(n,{expose:e}){const t=n,{t:i}=xn(),{Close:r}=AL,{dialogRef:s,headerRef:a,bodyId:o,ns:l,style:c}=mt(y9),{focusTrapRef:u}=mt(LL),d=N(()=>[l.b(),l.is("fullscreen",t.fullscreen),l.is("draggable",t.draggable),l.is("align-center",t.alignCenter),{[l.m("center")]:t.center}]),f=vM(u,s),h=N(()=>t.draggable),p=N(()=>t.overflow),{resetPosition:m}=b9(s,a,h,p);return e({resetPosition:m}),(v,g)=>(F(),ie("div",{ref:b(f),class:$(b(d)),style:Ct(b(c)),tabindex:"-1"},[le("header",{ref_key:"headerRef",ref:a,class:$([b(l).e("header"),{"show-close":v.showClose}])},[Ne(v.$slots,"header",{},()=>[le("span",{role:"heading","aria-level":v.ariaLevel,class:$(b(l).e("title"))},rt(v.title),11,["aria-level"])]),v.showClose?(F(),ie("button",{key:0,"aria-label":b(i)("el.dialog.close"),class:$(b(l).e("headerbtn")),type:"button",onClick:_=>v.$emit("close")},[oe(b(_t),{class:$(b(l).e("close"))},{default:ge(()=>[(F(),He(en(v.closeIcon||b(r))))]),_:1},8,["class"])],10,["aria-label","onClick"])):Be("v-if",!0)],2),le("div",{id:b(o),class:$(b(l).e("body"))},[Ne(v.$slots,"default")],10,["id"]),v.$slots.footer?(F(),ie("footer",{key:0,class:$(b(l).e("footer"))},[Ne(v.$slots,"footer")],2)):Be("v-if",!0)],6))}});var R0e=ot(I0e,[["__file","dialog-content.vue"]]);const S9=at({..._9,appendToBody:Boolean,appendTo:{type:Re([String,Object]),default:"body"},beforeClose:{type:Re(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),w9={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Kt]:n=>ai(n),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},r3=(n,e={})=>{fi(n)||_r("[useLockscreen]","You need to pass a ref param to this function");const t=e.ns||Ze("popup"),i=N(()=>t.bm("parent","hidden"));if(!wn||fa(document.body,i.value))return;let r=0,s=!1,a="0";const o=()=>{setTimeout(()=>{typeof document>"u"||(Ls(document==null?void 0:document.body,i.value),s&&document&&(document.body.style.width=a))},200)};We(n,l=>{if(!l){o();return}s=!fa(document.body,i.value),s&&(a=document.body.style.width),r=kG(t.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,u=Fc(document.body,"overflowY");r>0&&(c||u==="scroll")&&s&&(document.body.style.width=`calc(100% - ${r}px)`),_o(document.body,i.value)}),E6(()=>o())},x9=(n,e)=>{var t;const r=jt().emit,{nextZIndex:s}=hg();let a="";const o=Qr(),l=Qr(),c=X(!1),u=X(!1),d=X(!1),f=X((t=n.zIndex)!=null?t:s());let h,p;const m=aM("namespace",ey),v=N(()=>{const L={},R=`--${m.value}-dialog`;return n.fullscreen||(n.top&&(L[`${R}-margin-top`]=n.top),n.width&&(L[`${R}-width`]=Ui(n.width))),L}),g=N(()=>n.alignCenter?{display:"flex"}:{});function _(){r("opened")}function y(){r("closed"),r(Kt,!1),n.destroyOnClose&&(d.value=!1)}function S(){r("close")}function w(){p==null||p(),h==null||h(),n.openDelay&&n.openDelay>0?{stop:h}=Bh(()=>M(),n.openDelay):M()}function x(){h==null||h(),p==null||p(),n.closeDelay&&n.closeDelay>0?{stop:p}=Bh(()=>A(),n.closeDelay):A()}function T(){function L(R){R||(u.value=!0,c.value=!1)}n.beforeClose?n.beforeClose(L):x()}function C(){n.closeOnClickModal&&T()}function M(){wn&&(c.value=!0)}function A(){c.value=!1}function E(){r("openAutoFocus")}function I(){r("closeAutoFocus")}function P(L){var R;((R=L.detail)==null?void 0:R.focusReason)==="pointer"&&L.preventDefault()}n.lockScroll&&r3(c);function D(){n.closeOnPressEscape&&T()}return We(()=>n.modelValue,L=>{L?(u.value=!1,w(),d.value=!0,f.value=vG(n.zIndex)?s():f.value++,Mt(()=>{r("open"),e.value&&(e.value.scrollTop=0)})):c.value&&x()}),We(()=>n.fullscreen,L=>{e.value&&(L?(a=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=a)}),Ht(()=>{n.modelValue&&(c.value=!0,d.value=!0,w())}),{afterEnter:_,afterLeave:y,beforeLeave:S,handleClose:T,onModalClick:C,close:x,doClose:A,onOpenAutoFocus:E,onCloseAutoFocus:I,onCloseRequested:D,onFocusoutPrevented:P,titleId:o,bodyId:l,closed:u,style:v,overlayDialogStyle:g,rendered:d,visible:c,zIndex:f}},P0e=ve({name:"ElDialog",inheritAttrs:!1}),D0e=ve({...P0e,props:S9,emits:w9,setup(n,{expose:e}){const t=n,i=ur();md({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},N(()=>!!i.title));const r=Ze("dialog"),s=X(),a=X(),o=X(),{visible:l,titleId:c,bodyId:u,style:d,overlayDialogStyle:f,rendered:h,zIndex:p,afterEnter:m,afterLeave:v,beforeLeave:g,handleClose:_,onModalClick:y,onOpenAutoFocus:S,onCloseAutoFocus:w,onCloseRequested:x,onFocusoutPrevented:T}=x9(t,s);un(y9,{dialogRef:s,headerRef:a,bodyId:u,ns:r,rendered:h,style:d});const C=n3(y),M=N(()=>t.draggable&&!t.fullscreen);return e({visible:l,dialogContentRef:o,resetPosition:()=>{var E;(E=o.value)==null||E.resetPosition()}}),(E,I)=>(F(),He(b(vg),{to:E.appendTo,disabled:E.appendTo!=="body"?!1:!E.appendToBody},{default:ge(()=>[oe(yr,{name:"dialog-fade",onAfterEnter:b(m),onAfterLeave:b(v),onBeforeLeave:b(g),persisted:""},{default:ge(()=>[Wt(oe(b(i3),{"custom-mask-event":"",mask:E.modal,"overlay-class":E.modalClass,"z-index":b(p)},{default:ge(()=>[le("div",{role:"dialog","aria-modal":"true","aria-label":E.title||void 0,"aria-labelledby":E.title?void 0:b(c),"aria-describedby":b(u),class:$(`${b(r).namespace.value}-overlay-dialog`),style:Ct(b(f)),onClick:b(C).onClick,onMousedown:b(C).onMousedown,onMouseup:b(C).onMouseup},[oe(b(mg),{loop:"",trapped:b(l),"focus-start-el":"container",onFocusAfterTrapped:b(S),onFocusAfterReleased:b(w),onFocusoutPrevented:b(T),onReleaseRequested:b(x)},{default:ge(()=>[b(h)?(F(),He(R0e,rn({key:0,ref_key:"dialogContentRef",ref:o},E.$attrs,{center:E.center,"align-center":E.alignCenter,"close-icon":E.closeIcon,draggable:b(M),overflow:E.overflow,fullscreen:E.fullscreen,"show-close":E.showClose,title:E.title,"aria-level":E.headerAriaLevel,onClose:b(_)}),Ro({header:ge(()=>[E.$slots.title?Ne(E.$slots,"title",{key:1}):Ne(E.$slots,"header",{key:0,close:b(_),titleId:b(c),titleClass:b(r).e("title")})]),default:ge(()=>[Ne(E.$slots,"default")]),_:2},[E.$slots.footer?{name:"footer",fn:ge(()=>[Ne(E.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):Be("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[Dn,b(l)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var L0e=ot(D0e,[["__file","dialog.vue"]]);const k0e=Ft(L0e),O0e=at({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Re(String),default:"solid"}}),N0e=ve({name:"ElDivider"}),B0e=ve({...N0e,props:O0e,setup(n){const e=n,t=Ze("divider"),i=N(()=>t.cssVar({"border-style":e.borderStyle}));return(r,s)=>(F(),ie("div",{class:$([b(t).b(),b(t).m(r.direction)]),style:Ct(b(i)),role:"separator"},[r.$slots.default&&r.direction!=="vertical"?(F(),ie("div",{key:0,class:$([b(t).e("text"),b(t).is(r.contentPosition)])},[Ne(r.$slots,"default")],2)):Be("v-if",!0)],6))}});var F0e=ot(B0e,[["__file","divider.vue"]]);const C9=Ft(F0e),z0e=at({...S9,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),U0e=w9,H0e=ve({name:"ElDrawer",inheritAttrs:!1}),V0e=ve({...H0e,props:z0e,emits:U0e,setup(n,{expose:e}){const t=n,i=ur();md({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},N(()=>!!i.title));const r=X(),s=X(),a=Ze("drawer"),{t:o}=xn(),{afterEnter:l,afterLeave:c,beforeLeave:u,visible:d,rendered:f,titleId:h,bodyId:p,zIndex:m,onModalClick:v,onOpenAutoFocus:g,onCloseAutoFocus:_,onFocusoutPrevented:y,onCloseRequested:S,handleClose:w}=x9(t,r),x=N(()=>t.direction==="rtl"||t.direction==="ltr"),T=N(()=>Ui(t.size));return e({handleClose:w,afterEnter:l,afterLeave:c}),(C,M)=>(F(),He(b(vg),{to:C.appendTo,disabled:C.appendTo!=="body"?!1:!C.appendToBody},{default:ge(()=>[oe(yr,{name:b(a).b("fade"),onAfterEnter:b(l),onAfterLeave:b(c),onBeforeLeave:b(u),persisted:""},{default:ge(()=>[Wt(oe(b(i3),{mask:C.modal,"overlay-class":C.modalClass,"z-index":b(m),onClick:b(v)},{default:ge(()=>[oe(b(mg),{loop:"",trapped:b(d),"focus-trap-el":r.value,"focus-start-el":s.value,onFocusAfterTrapped:b(g),onFocusAfterReleased:b(_),onFocusoutPrevented:b(y),onReleaseRequested:b(S)},{default:ge(()=>[le("div",rn({ref_key:"drawerRef",ref:r,"aria-modal":"true","aria-label":C.title||void 0,"aria-labelledby":C.title?void 0:b(h),"aria-describedby":b(p)},C.$attrs,{class:[b(a).b(),C.direction,b(d)&&"open"],style:b(x)?"width: "+b(T):"height: "+b(T),role:"dialog",onClick:Pt(()=>{},["stop"])}),[le("span",{ref_key:"focusStartRef",ref:s,class:$(b(a).e("sr-focus")),tabindex:"-1"},null,2),C.withHeader?(F(),ie("header",{key:0,class:$(b(a).e("header"))},[C.$slots.title?Ne(C.$slots,"title",{key:1},()=>[Be(" DEPRECATED SLOT ")]):Ne(C.$slots,"header",{key:0,close:b(w),titleId:b(h),titleClass:b(a).e("title")},()=>[C.$slots.title?Be("v-if",!0):(F(),ie("span",{key:0,id:b(h),role:"heading","aria-level":C.headerAriaLevel,class:$(b(a).e("title"))},rt(C.title),11,["id","aria-level"]))]),C.showClose?(F(),ie("button",{key:2,"aria-label":b(o)("el.drawer.close"),class:$(b(a).e("close-btn")),type:"button",onClick:b(w)},[oe(b(_t),{class:$(b(a).e("close"))},{default:ge(()=>[oe(b(fl))]),_:1},8,["class"])],10,["aria-label","onClick"])):Be("v-if",!0)],2)):Be("v-if",!0),b(f)?(F(),ie("div",{key:1,id:b(p),class:$(b(a).e("body"))},[Ne(C.$slots,"default")],10,["id"])):Be("v-if",!0),C.$slots.footer?(F(),ie("div",{key:2,class:$(b(a).e("footer"))},[Ne(C.$slots,"footer")],2)):Be("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Dn,b(d)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var $0e=ot(V0e,[["__file","drawer.vue"]]);const G0e=Ft($0e),W0e=ve({inheritAttrs:!1});function K0e(n,e,t,i,r,s){return Ne(n.$slots,"default")}var q0e=ot(W0e,[["render",K0e],["__file","collection.vue"]]);const X0e=ve({name:"ElCollectionItem",inheritAttrs:!1});function Y0e(n,e,t,i,r,s){return Ne(n.$slots,"default")}var j0e=ot(X0e,[["render",Y0e],["__file","collection-item.vue"]]);const M9="data-el-collection-item",T9=n=>{const e=`El${n}Collection`,t=`${e}Item`,i=Symbol(e),r=Symbol(t),s={...q0e,name:e,setup(){const o=X(null),l=new Map;un(i,{itemMap:l,getItems:()=>{const u=b(o);if(!u)return[];const d=Array.from(u.querySelectorAll(`[${M9}]`));return[...l.values()].sort((h,p)=>d.indexOf(h.ref)-d.indexOf(p.ref))},collectionRef:o})}},a={...j0e,name:t,setup(o,{attrs:l}){const c=X(null),u=mt(i,void 0);un(r,{collectionItemRef:c}),Ht(()=>{const d=b(c);d&&u.itemMap.set(d,{ref:d,...l})}),Un(()=>{const d=b(c);u.itemMap.delete(d)})}};return{COLLECTION_INJECTION_KEY:i,COLLECTION_ITEM_INJECTION_KEY:r,ElCollection:s,ElCollectionItem:a}},Q0e=at({style:{type:Re([String,Array,Object])},currentTabId:{type:Re(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Re(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Z0e,ElCollectionItem:J0e,COLLECTION_INJECTION_KEY:s3,COLLECTION_ITEM_INJECTION_KEY:eye}=T9("RovingFocusGroup"),a3=Symbol("elRovingFocusGroup"),A9=Symbol("elRovingFocusGroupItem"),tye={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},nye=(n,e)=>{if(e!=="rtl")return n;switch(n){case ut.right:return ut.left;case ut.left:return ut.right;default:return n}},iye=(n,e,t)=>{const i=nye(n.code,t);if(!(e==="vertical"&&[ut.left,ut.right].includes(i))&&!(e==="horizontal"&&[ut.up,ut.down].includes(i)))return tye[i]},rye=(n,e)=>n.map((t,i)=>n[(i+e)%n.length]),o3=n=>{const{activeElement:e}=document;for(const t of n)if(t===e||(t.focus(),e!==document.activeElement))return},TF="currentTabIdChange",AF="rovingFocusGroup.entryFocus",sye={bubbles:!1,cancelable:!0},aye=ve({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Q0e,emits:[TF,"entryFocus"],setup(n,{emit:e}){var t;const i=X((t=n.currentTabId||n.defaultCurrentTabId)!=null?t:null),r=X(!1),s=X(!1),a=X(null),{getItems:o}=mt(s3,void 0),l=N(()=>[{outline:"none"},n.style]),c=m=>{e(TF,m)},u=()=>{r.value=!0},d=zi(m=>{var v;(v=n.onMousedown)==null||v.call(n,m)},()=>{s.value=!0}),f=zi(m=>{var v;(v=n.onFocus)==null||v.call(n,m)},m=>{const v=!b(s),{target:g,currentTarget:_}=m;if(g===_&&v&&!b(r)){const y=new Event(AF,sye);if(_==null||_.dispatchEvent(y),!y.defaultPrevented){const S=o().filter(M=>M.focusable),w=S.find(M=>M.active),x=S.find(M=>M.id===b(i)),C=[w,x,...S].filter(Boolean).map(M=>M.ref);o3(C)}}s.value=!1}),h=zi(m=>{var v;(v=n.onBlur)==null||v.call(n,m)},()=>{r.value=!1}),p=(...m)=>{e("entryFocus",...m)};un(a3,{currentTabbedId:og(i),loop:zn(n,"loop"),tabIndex:N(()=>b(r)?-1:0),rovingFocusGroupRef:a,rovingFocusGroupRootStyle:l,orientation:zn(n,"orientation"),dir:zn(n,"dir"),onItemFocus:c,onItemShiftTab:u,onBlur:h,onFocus:f,onMousedown:d}),We(()=>n.currentTabId,m=>{i.value=m??null}),Kn(a,AF,p)}});function oye(n,e,t,i,r,s){return Ne(n.$slots,"default")}var lye=ot(aye,[["render",oye],["__file","roving-focus-group-impl.vue"]]);const cye=ve({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Z0e,ElRovingFocusGroupImpl:lye}});function uye(n,e,t,i,r,s){const a=yt("el-roving-focus-group-impl"),o=yt("el-focus-group-collection");return F(),He(o,null,{default:ge(()=>[oe(a,nl(Id(n.$attrs)),{default:ge(()=>[Ne(n.$slots,"default")]),_:3},16)]),_:3})}var dye=ot(cye,[["render",uye],["__file","roving-focus-group.vue"]]);const u1=at({trigger:i_.trigger,triggerKeys:{type:Re(Array),default:()=>[ut.enter,ut.numpadEnter,ut.space,ut.down]},effect:{...Rr.effect,default:"light"},type:{type:Re(String)},placement:{type:Re(String),default:"bottom"},popperOptions:{type:Re(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Re([Number,String]),default:0},maxHeight:{type:Re([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,default:"menu"},buttonProps:{type:Re(Object)},teleported:Rr.teleported}),E9=at({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Zn}}),fye=at({onKeydown:{type:Re(Function)}}),hye=[ut.down,ut.pageDown,ut.home],I9=[ut.up,ut.pageUp,ut.end],pye=[...hye,...I9],{ElCollection:mye,ElCollectionItem:vye,COLLECTION_INJECTION_KEY:gye,COLLECTION_ITEM_INJECTION_KEY:yye}=T9("Dropdown"),gM=Symbol("elDropdown"),{ButtonGroup:_ye}=Ur,bye=ve({name:"ElDropdown",components:{ElButton:Ur,ElButtonGroup:_ye,ElScrollbar:ic,ElDropdownCollection:mye,ElTooltip:us,ElRovingFocusGroup:dye,ElOnlyChild:jG,ElIcon:_t,ArrowDown:du},props:u1,emits:["visible-change","click","command"],setup(n,{emit:e}){const t=jt(),i=Ze("dropdown"),{t:r}=xn(),s=X(),a=X(),o=X(null),l=X(null),c=X(null),u=X(null),d=X(!1),f=N(()=>({maxHeight:Ui(n.maxHeight)})),h=N(()=>[i.m(S.value)]),p=N(()=>As(n.trigger)),m=Qr().value,v=N(()=>n.id||m);We([s,p],([R,B],[k])=>{var O,U,G;(O=k==null?void 0:k.$el)!=null&&O.removeEventListener&&k.$el.removeEventListener("pointerenter",x),(U=R==null?void 0:R.$el)!=null&&U.removeEventListener&&R.$el.removeEventListener("pointerenter",x),(G=R==null?void 0:R.$el)!=null&&G.addEventListener&&B.includes("hover")&&R.$el.addEventListener("pointerenter",x)},{immediate:!0}),Un(()=>{var R,B;(B=(R=s.value)==null?void 0:R.$el)!=null&&B.removeEventListener&&s.value.$el.removeEventListener("pointerenter",x)});function g(){_()}function _(){var R;(R=o.value)==null||R.onClose()}function y(){var R;(R=o.value)==null||R.onOpen()}const S=tr();function w(...R){e("command",...R)}function x(){var R,B;(B=(R=s.value)==null?void 0:R.$el)==null||B.focus()}function T(){}function C(){const R=b(l);p.value.includes("hover")&&(R==null||R.focus()),u.value=null}function M(R){u.value=R}function A(R){d.value||(R.preventDefault(),R.stopImmediatePropagation())}function E(){e("visible-change",!0)}function I(R){(R==null?void 0:R.type)==="keydown"&&l.value.focus()}function P(){e("visible-change",!1)}return un(gM,{contentRef:l,role:N(()=>n.role),triggerId:v,isUsingKeyboard:d,onItemEnter:T,onItemLeave:C}),un("elDropdown",{instance:t,dropdownSize:S,handleClick:g,commandHandler:w,trigger:zn(n,"trigger"),hideOnClick:zn(n,"hideOnClick")}),{t:r,ns:i,scrollbar:c,wrapStyle:f,dropdownTriggerKls:h,dropdownSize:S,triggerId:v,currentTabId:u,handleCurrentTabIdChange:M,handlerMainButtonClick:R=>{e("click",R)},handleEntryFocus:A,handleClose:_,handleOpen:y,handleBeforeShowTooltip:E,handleShowTooltip:I,handleBeforeHideTooltip:P,onFocusAfterTrapped:R=>{var B,k;R.preventDefault(),(k=(B=l.value)==null?void 0:B.focus)==null||k.call(B,{preventScroll:!0})},popperRef:o,contentRef:l,triggeringElementRef:s,referenceElementRef:a}}});function Sye(n,e,t,i,r,s){var a;const o=yt("el-dropdown-collection"),l=yt("el-roving-focus-group"),c=yt("el-scrollbar"),u=yt("el-only-child"),d=yt("el-tooltip"),f=yt("el-button"),h=yt("arrow-down"),p=yt("el-icon"),m=yt("el-button-group");return F(),ie("div",{class:$([n.ns.b(),n.ns.is("disabled",n.disabled)])},[oe(d,{ref:"popperRef",role:n.role,effect:n.effect,"fallback-placements":["bottom","top"],"popper-options":n.popperOptions,"gpu-acceleration":!1,"hide-after":n.trigger==="hover"?n.hideTimeout:0,"manual-mode":!0,placement:n.placement,"popper-class":[n.ns.e("popper"),n.popperClass],"reference-element":(a=n.referenceElementRef)==null?void 0:a.$el,trigger:n.trigger,"trigger-keys":n.triggerKeys,"trigger-target-el":n.contentRef,"show-after":n.trigger==="hover"?n.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":n.triggeringElementRef,"virtual-triggering":n.splitButton,disabled:n.disabled,transition:`${n.ns.namespace.value}-zoom-in-top`,teleported:n.teleported,pure:"",persistent:"",onBeforeShow:n.handleBeforeShowTooltip,onShow:n.handleShowTooltip,onBeforeHide:n.handleBeforeHideTooltip},Ro({content:ge(()=>[oe(c,{ref:"scrollbar","wrap-style":n.wrapStyle,tag:"div","view-class":n.ns.e("list")},{default:ge(()=>[oe(l,{loop:n.loop,"current-tab-id":n.currentTabId,orientation:"horizontal",onCurrentTabIdChange:n.handleCurrentTabIdChange,onEntryFocus:n.handleEntryFocus},{default:ge(()=>[oe(o,null,{default:ge(()=>[Ne(n.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[n.splitButton?void 0:{name:"default",fn:ge(()=>[oe(u,{id:n.triggerId,ref:"triggeringElementRef",role:"button",tabindex:n.tabindex},{default:ge(()=>[Ne(n.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),n.splitButton?(F(),He(m,{key:0},{default:ge(()=>[oe(f,rn({ref:"referenceElementRef"},n.buttonProps,{size:n.dropdownSize,type:n.type,disabled:n.disabled,tabindex:n.tabindex,onClick:n.handlerMainButtonClick}),{default:ge(()=>[Ne(n.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),oe(f,rn({id:n.triggerId,ref:"triggeringElementRef"},n.buttonProps,{role:"button",size:n.dropdownSize,type:n.type,class:n.ns.e("caret-button"),disabled:n.disabled,tabindex:n.tabindex,"aria-label":n.t("el.dropdown.toggleDropdown")}),{default:ge(()=>[oe(p,{class:$(n.ns.e("icon"))},{default:ge(()=>[oe(h)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):Be("v-if",!0)],2)}var wye=ot(bye,[["render",Sye],["__file","dropdown.vue"]]);const xye=ve({components:{ElRovingFocusCollectionItem:J0e},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(n,{emit:e}){const{currentTabbedId:t,loop:i,onItemFocus:r,onItemShiftTab:s}=mt(a3,void 0),{getItems:a}=mt(s3,void 0),o=Qr(),l=X(null),c=zi(h=>{e("mousedown",h)},h=>{n.focusable?r(b(o)):h.preventDefault()}),u=zi(h=>{e("focus",h)},()=>{r(b(o))}),d=zi(h=>{e("keydown",h)},h=>{const{code:p,shiftKey:m,target:v,currentTarget:g}=h;if(p===ut.tab&&m){s();return}if(v!==g)return;const _=iye(h);if(_){h.preventDefault();let S=a().filter(w=>w.focusable).map(w=>w.ref);switch(_){case"last":{S.reverse();break}case"prev":case"next":{_==="prev"&&S.reverse();const w=S.indexOf(g);S=i.value?rye(S,w+1):S.slice(w+1);break}}Mt(()=>{o3(S)})}}),f=N(()=>t.value===b(o));return un(A9,{rovingFocusGroupItemRef:l,tabIndex:N(()=>b(f)?0:-1),handleMousedown:c,handleFocus:u,handleKeydown:d}),{id:o,handleKeydown:d,handleFocus:u,handleMousedown:c}}});function Cye(n,e,t,i,r,s){const a=yt("el-roving-focus-collection-item");return F(),He(a,{id:n.id,focusable:n.focusable,active:n.active},{default:ge(()=>[Ne(n.$slots,"default")]),_:3},8,["id","focusable","active"])}var Mye=ot(xye,[["render",Cye],["__file","roving-focus-item.vue"]]);const Tye=ve({name:"DropdownItemImpl",components:{ElIcon:_t},props:E9,emits:["pointermove","pointerleave","click","clickimpl"],setup(n,{emit:e}){const t=Ze("dropdown"),{role:i}=mt(gM,void 0),{collectionItemRef:r}=mt(yye,void 0),{collectionItemRef:s}=mt(eye,void 0),{rovingFocusGroupItemRef:a,tabIndex:o,handleFocus:l,handleKeydown:c,handleMousedown:u}=mt(A9,void 0),d=vM(r,s,a),f=N(()=>i.value==="menu"?"menuitem":i.value==="navigation"?"link":"button"),h=zi(p=>{if([ut.enter,ut.numpadEnter,ut.space].includes(p.code))return p.preventDefault(),p.stopImmediatePropagation(),e("clickimpl",p),!0},c);return{ns:t,itemRef:d,dataset:{[M9]:""},role:f,tabIndex:o,handleFocus:l,handleKeydown:h,handleMousedown:u}}});function Aye(n,e,t,i,r,s){const a=yt("el-icon");return F(),ie(bt,null,[n.divided?(F(),ie("li",{key:0,role:"separator",class:$(n.ns.bem("menu","item","divided"))},null,2)):Be("v-if",!0),le("li",rn({ref:n.itemRef},{...n.dataset,...n.$attrs},{"aria-disabled":n.disabled,class:[n.ns.be("menu","item"),n.ns.is("disabled",n.disabled)],tabindex:n.tabIndex,role:n.role,onClick:o=>n.$emit("clickimpl",o),onFocus:n.handleFocus,onKeydown:Pt(n.handleKeydown,["self"]),onMousedown:n.handleMousedown,onPointermove:o=>n.$emit("pointermove",o),onPointerleave:o=>n.$emit("pointerleave",o)}),[n.icon?(F(),He(a,{key:0},{default:ge(()=>[(F(),He(en(n.icon)))]),_:1})):Be("v-if",!0),Ne(n.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var Eye=ot(Tye,[["render",Aye],["__file","dropdown-item-impl.vue"]]);const R9=()=>{const n=mt("elDropdown",{}),e=N(()=>n==null?void 0:n.dropdownSize);return{elDropdown:n,_elDropdownSize:e}},Iye=ve({name:"ElDropdownItem",components:{ElDropdownCollectionItem:vye,ElRovingFocusItem:Mye,ElDropdownItemImpl:Eye},inheritAttrs:!1,props:E9,emits:["pointermove","pointerleave","click"],setup(n,{emit:e,attrs:t}){const{elDropdown:i}=R9(),r=jt(),s=X(null),a=N(()=>{var h,p;return(p=(h=b(s))==null?void 0:h.textContent)!=null?p:""}),{onItemEnter:o,onItemLeave:l}=mt(gM,void 0),c=zi(h=>(e("pointermove",h),h.defaultPrevented),iF(h=>{if(n.disabled){l(h);return}const p=h.currentTarget;p===document.activeElement||p.contains(document.activeElement)||(o(h),h.defaultPrevented||p==null||p.focus())})),u=zi(h=>(e("pointerleave",h),h.defaultPrevented),iF(l)),d=zi(h=>{if(!n.disabled)return e("click",h),h.type!=="keydown"&&h.defaultPrevented},h=>{var p,m,v;if(n.disabled){h.stopImmediatePropagation();return}(p=i==null?void 0:i.hideOnClick)!=null&&p.value&&((m=i.handleClick)==null||m.call(i)),(v=i.commandHandler)==null||v.call(i,n.command,r,h)}),f=N(()=>({...n,...t}));return{handleClick:d,handlePointerMove:c,handlePointerLeave:u,textContent:a,propsAndAttrs:f}}});function Rye(n,e,t,i,r,s){var a;const o=yt("el-dropdown-item-impl"),l=yt("el-roving-focus-item"),c=yt("el-dropdown-collection-item");return F(),He(c,{disabled:n.disabled,"text-value":(a=n.textValue)!=null?a:n.textContent},{default:ge(()=>[oe(l,{focusable:!n.disabled},{default:ge(()=>[oe(o,rn(n.propsAndAttrs,{onPointerleave:n.handlePointerLeave,onPointermove:n.handlePointerMove,onClickimpl:n.handleClick}),{default:ge(()=>[Ne(n.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var P9=ot(Iye,[["render",Rye],["__file","dropdown-item.vue"]]);const Pye=ve({name:"ElDropdownMenu",props:fye,setup(n){const e=Ze("dropdown"),{_elDropdownSize:t}=R9(),i=t.value,{focusTrapRef:r,onKeydown:s}=mt(LL,void 0),{contentRef:a,role:o,triggerId:l}=mt(gM,void 0),{collectionRef:c,getItems:u}=mt(gye,void 0),{rovingFocusGroupRef:d,rovingFocusGroupRootStyle:f,tabIndex:h,onBlur:p,onFocus:m,onMousedown:v}=mt(a3,void 0),{collectionRef:g}=mt(s3,void 0),_=N(()=>[e.b("menu"),e.bm("menu",i==null?void 0:i.value)]),y=vM(a,c,r,d,g),S=zi(x=>{var T;(T=n.onKeydown)==null||T.call(n,x)},x=>{const{currentTarget:T,code:C,target:M}=x;if(T.contains(M),ut.tab===C&&x.stopImmediatePropagation(),x.preventDefault(),M!==b(a)||!pye.includes(C))return;const E=u().filter(I=>!I.disabled).map(I=>I.ref);I9.includes(C)&&E.reverse(),o3(E)});return{size:i,rovingFocusGroupRootStyle:f,tabIndex:h,dropdownKls:_,role:o,triggerId:l,dropdownListWrapperRef:y,handleKeydown:x=>{S(x),s(x)},onBlur:p,onFocus:m,onMousedown:v}}});function Dye(n,e,t,i,r,s){return F(),ie("ul",{ref:n.dropdownListWrapperRef,class:$(n.dropdownKls),style:Ct(n.rovingFocusGroupRootStyle),tabindex:-1,role:n.role,"aria-labelledby":n.triggerId,onBlur:n.onBlur,onFocus:n.onFocus,onKeydown:Pt(n.handleKeydown,["self"]),onMousedown:Pt(n.onMousedown,["self"])},[Ne(n.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var D9=ot(Pye,[["render",Dye],["__file","dropdown-menu.vue"]]);const Lye=Ft(wye,{DropdownItem:P9,DropdownMenu:D9}),kye=ki(P9),Oye=ki(D9),Nye=ve({name:"ImgEmpty"}),Bye=ve({...Nye,setup(n){const e=Ze("empty"),t=Qr();return(i,r)=>(F(),ie("svg",{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[le("defs",null,[le("linearGradient",{id:`linearGradient-1-${b(t)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[le("stop",{"stop-color":`var(${b(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),le("stop",{"stop-color":`var(${b(e).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),le("linearGradient",{id:`linearGradient-2-${b(t)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[le("stop",{"stop-color":`var(${b(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),le("stop",{"stop-color":`var(${b(e).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),le("rect",{id:`path-3-${b(t)}`,x:"0",y:"0",width:"17",height:"36"},null,8,["id"])]),le("g",{id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[le("g",{id:"B-type",transform:"translate(-1268.000000, -535.000000)"},[le("g",{id:"Group-2",transform:"translate(1268.000000, 535.000000)"},[le("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${b(e).cssVarBlockName("fill-color-3")})`},null,8,["fill"]),le("polygon",{id:"Rectangle-Copy-14",fill:`var(${b(e).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,["fill"]),le("g",{id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},[le("polygon",{id:"Rectangle-Copy-10",fill:`var(${b(e).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,["fill"]),le("polygon",{id:"Rectangle-Copy-11",fill:`var(${b(e).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,["fill"]),le("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${b(t)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,["fill"]),le("polygon",{id:"Rectangle-Copy-13",fill:`var(${b(e).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,["fill"])]),le("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${b(t)})`,x:"13",y:"45",width:"40",height:"36"},null,8,["fill"]),le("g",{id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},[le("use",{id:"Mask",fill:`var(${b(e).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${b(t)}`},null,8,["fill","xlink:href"]),le("polygon",{id:"Rectangle-Copy",fill:`var(${b(e).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${b(t)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,["fill","mask"])]),le("polygon",{id:"Rectangle-Copy-18",fill:`var(${b(e).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,["fill"])])])])]))}});var Fye=ot(Bye,[["__file","img-empty.vue"]]);const zye=at({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),Uye=ve({name:"ElEmpty"}),Hye=ve({...Uye,props:zye,setup(n){const e=n,{t}=xn(),i=Ze("empty"),r=N(()=>e.description||t("el.table.emptyText")),s=N(()=>({width:Ui(e.imageSize)}));return(a,o)=>(F(),ie("div",{class:$(b(i).b())},[le("div",{class:$(b(i).e("image")),style:Ct(b(s))},[a.image?(F(),ie("img",{key:0,src:a.image,ondragstart:"return false"},null,8,["src"])):Ne(a.$slots,"image",{key:1},()=>[oe(Fye)])],6),le("div",{class:$(b(i).e("description"))},[a.$slots.description?Ne(a.$slots,"description",{key:0}):(F(),ie("p",{key:1},rt(b(r)),1))],2),a.$slots.default?(F(),ie("div",{key:0,class:$(b(i).e("bottom"))},[Ne(a.$slots,"default")],2)):Be("v-if",!0)],2))}});var Vye=ot(Hye,[["__file","empty.vue"]]);const L9=Ft(Vye),$ye=at({size:{type:String,values:nc},disabled:Boolean}),Gye=at({...$ye,model:Object,rules:{type:Re(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),Wye={validate:(n,e,t)=>(nt(n)||xt(n))&&ai(e)&&xt(t)};function Kye(){const n=X([]),e=N(()=>{if(!n.value.length)return"0";const s=Math.max(...n.value);return s?`${s}px`:""});function t(s){const a=n.value.indexOf(s);return a===-1&&e.value,a}function i(s,a){if(s&&a){const o=t(a);n.value.splice(o,1,s)}else s&&n.value.push(s)}function r(s){const a=t(s);a>-1&&n.value.splice(a,1)}return{autoLabelWidth:e,registerLabelWidth:i,deregisterLabelWidth:r}}const Qb=(n,e)=>{const t=As(e);return t.length>0?n.filter(i=>i.prop&&t.includes(i.prop)):n},qye="ElForm",Xye=ve({name:qye}),Yye=ve({...Xye,props:Gye,emits:Wye,setup(n,{expose:e,emit:t}){const i=n,r=[],s=tr(),a=Ze("form"),o=N(()=>{const{labelPosition:y,inline:S}=i;return[a.b(),a.m(s.value||"default"),{[a.m(`label-${y}`)]:y,[a.m("inline")]:S}]}),l=y=>r.find(S=>S.prop===y),c=y=>{r.push(y)},u=y=>{y.prop&&r.splice(r.indexOf(y),1)},d=(y=[])=>{i.model&&Qb(r,y).forEach(S=>S.resetField())},f=(y=[])=>{Qb(r,y).forEach(S=>S.clearValidate())},h=N(()=>!!i.model),p=y=>{if(r.length===0)return[];const S=Qb(r,y);return S.length?S:[]},m=async y=>g(void 0,y),v=async(y=[])=>{if(!h.value)return!1;const S=p(y);if(S.length===0)return!0;let w={};for(const x of S)try{await x.validate("")}catch(T){w={...w,...T}}return Object.keys(w).length===0?!0:Promise.reject(w)},g=async(y=[],S)=>{const w=!Tt(S);try{const x=await v(y);return x===!0&&await(S==null?void 0:S(x)),x}catch(x){if(x instanceof Error)throw x;const T=x;return i.scrollToError&&_(Object.keys(T)[0]),await(S==null?void 0:S(!1,T)),w&&Promise.reject(T)}},_=y=>{var S;const w=Qb(r,y)[0];w&&((S=w.$el)==null||S.scrollIntoView(i.scrollIntoViewOptions))};return We(()=>i.rules,()=>{i.validateOnRuleChange&&m().catch(y=>void 0)},{deep:!0}),un(rp,Nn({...Mr(i),emit:t,resetFields:d,clearValidate:f,validateField:g,getField:l,addField:c,removeField:u,...Kye()})),e({validate:m,validateField:g,resetFields:d,clearValidate:f,scrollToField:_,fields:r}),(y,S)=>(F(),ie("form",{class:$(b(o))},[Ne(y.$slots,"default")],2))}});var jye=ot(Yye,[["__file","form.vue"]]);function oh(){return oh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},oh.apply(this,arguments)}function Qye(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,a_(n,e)}function bI(n){return bI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bI(n)}function a_(n,e){return a_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},a_(n,e)}function Zye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d1(n,e,t){return Zye()?d1=Reflect.construct.bind():d1=function(r,s,a){var o=[null];o.push.apply(o,s);var l=Function.bind.apply(r,o),c=new l;return a&&a_(c,a.prototype),c},d1.apply(null,arguments)}function Jye(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function SI(n){var e=typeof Map=="function"?new Map:void 0;return SI=function(i){if(i===null||!Jye(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return d1(i,arguments,bI(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),a_(r,i)},SI(n)}var e_e=/%[sdj%]/g,t_e=function(){};typeof process<"u"&&process.env;function wI(n){if(!n||!n.length)return null;var e={};return n.forEach(function(t){var i=t.field;e[i]=e[i]||[],e[i].push(t)}),e}function Na(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=0,s=t.length;if(typeof n=="function")return n.apply(null,t);if(typeof n=="string"){var a=n.replace(e_e,function(o){if(o==="%%")return"%";if(r>=s)return o;switch(o){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch{return"[Circular]"}break;default:return o}});return a}return n}function n_e(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function Hr(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||n_e(e)&&typeof n=="string"&&!n)}function i_e(n,e,t){var i=[],r=0,s=n.length;function a(o){i.push.apply(i,o||[]),r++,r===s&&t(i)}n.forEach(function(o){e(o,a)})}function EF(n,e,t){var i=0,r=n.length;function s(a){if(a&&a.length){t(a);return}var o=i;i=i+1,o<r?e(n[o],s):t([])}s([])}function r_e(n){var e=[];return Object.keys(n).forEach(function(t){e.push.apply(e,n[t]||[])}),e}var IF=function(n){Qye(e,n);function e(t,i){var r;return r=n.call(this,"Async Validation Error")||this,r.errors=t,r.fields=i,r}return e}(SI(Error));function s_e(n,e,t,i,r){if(e.first){var s=new Promise(function(f,h){var p=function(g){return i(g),g.length?h(new IF(g,wI(g))):f(r)},m=r_e(n);EF(m,t,p)});return s.catch(function(f){return f}),s}var a=e.firstFields===!0?Object.keys(n):e.firstFields||[],o=Object.keys(n),l=o.length,c=0,u=[],d=new Promise(function(f,h){var p=function(v){if(u.push.apply(u,v),c++,c===l)return i(u),u.length?h(new IF(u,wI(u))):f(r)};o.length||(i(u),f(r)),o.forEach(function(m){var v=n[m];a.indexOf(m)!==-1?EF(v,t,p):i_e(v,t,p)})});return d.catch(function(f){return f}),d}function a_e(n){return!!(n&&n.message!==void 0)}function o_e(n,e){for(var t=n,i=0;i<e.length;i++){if(t==null)return t;t=t[e[i]]}return t}function RF(n,e){return function(t){var i;return n.fullFields?i=o_e(e,n.fullFields):i=e[t.field||n.fullField],a_e(t)?(t.field=t.field||n.fullField,t.fieldValue=i,t):{message:typeof t=="function"?t():t,fieldValue:i,field:t.field||n.fullField}}}function PF(n,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];typeof i=="object"&&typeof n[t]=="object"?n[t]=oh({},n[t],i):n[t]=i}}return n}var k9=function(e,t,i,r,s,a){e.required&&(!i.hasOwnProperty(e.field)||Hr(t,a||e.type))&&r.push(Na(s.messages.required,e.fullField))},l_e=function(e,t,i,r,s){(/^\s+$/.test(t)||t==="")&&r.push(Na(s.messages.whitespace,e.fullField))},Zb,c_e=function(){if(Zb)return Zb;var n="[a-fA-F\\d:]",e=function(S){return S&&S.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",r=(`
(?:
(?:`+i+":){7}(?:"+i+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+i+":){6}(?:"+t+"|:"+i+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+i+":){5}(?::"+t+"|(?::"+i+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+i+":){4}(?:(?::"+i+"){0,1}:"+t+"|(?::"+i+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+i+":){3}(?:(?::"+i+"){0,2}:"+t+"|(?::"+i+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+i+":){2}(?:(?::"+i+"){0,3}:"+t+"|(?::"+i+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+i+":){1}(?:(?::"+i+"){0,4}:"+t+"|(?::"+i+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+i+"){0,5}:"+t+"|(?::"+i+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+t+"$)|(?:^"+r+"$)"),a=new RegExp("^"+t+"$"),o=new RegExp("^"+r+"$"),l=function(S){return S&&S.exact?s:new RegExp("(?:"+e(S)+t+e(S)+")|(?:"+e(S)+r+e(S)+")","g")};l.v4=function(y){return y&&y.exact?a:new RegExp(""+e(y)+t+e(y),"g")},l.v6=function(y){return y&&y.exact?o:new RegExp(""+e(y)+r+e(y),"g")};var c="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,f=l.v6().source,h="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",p="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",m="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",g='(?:[/?#][^\\s"]*)?',_="(?:"+c+"|www\\.)"+u+"(?:localhost|"+d+"|"+f+"|"+h+p+m+")"+v+g;return Zb=new RegExp("(?:^"+_+"$)","i"),Zb},DF={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},B0={integer:function(e){return B0.number(e)&&parseInt(e,10)===e},float:function(e){return B0.number(e)&&!B0.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!B0.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(DF.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(c_e())},hex:function(e){return typeof e=="string"&&!!e.match(DF.hex)}},u_e=function(e,t,i,r,s){if(e.required&&t===void 0){k9(e,t,i,r,s);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=e.type;a.indexOf(o)>-1?B0[o](t)||r.push(Na(s.messages.types[o],e.fullField,e.type)):o&&typeof t!==e.type&&r.push(Na(s.messages.types[o],e.fullField,e.type))},d_e=function(e,t,i,r,s){var a=typeof e.len=="number",o=typeof e.min=="number",l=typeof e.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=t,d=null,f=typeof t=="number",h=typeof t=="string",p=Array.isArray(t);if(f?d="number":h?d="string":p&&(d="array"),!d)return!1;p&&(u=t.length),h&&(u=t.replace(c,"_").length),a?u!==e.len&&r.push(Na(s.messages[d].len,e.fullField,e.len)):o&&!l&&u<e.min?r.push(Na(s.messages[d].min,e.fullField,e.min)):l&&!o&&u>e.max?r.push(Na(s.messages[d].max,e.fullField,e.max)):o&&l&&(u<e.min||u>e.max)&&r.push(Na(s.messages[d].range,e.fullField,e.min,e.max))},gp="enum",f_e=function(e,t,i,r,s){e[gp]=Array.isArray(e[gp])?e[gp]:[],e[gp].indexOf(t)===-1&&r.push(Na(s.messages[gp],e.fullField,e[gp].join(", ")))},h_e=function(e,t,i,r,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(Na(s.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var a=new RegExp(e.pattern);a.test(t)||r.push(Na(s.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},oi={required:k9,whitespace:l_e,type:u_e,range:d_e,enum:f_e,pattern:h_e},p_e=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Hr(t,"string")&&!e.required)return i();oi.required(e,t,r,a,s,"string"),Hr(t,"string")||(oi.type(e,t,r,a,s),oi.range(e,t,r,a,s),oi.pattern(e,t,r,a,s),e.whitespace===!0&&oi.whitespace(e,t,r,a,s))}i(a)},m_e=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Hr(t)&&!e.required)return i();oi.required(e,t,r,a,s),t!==void 0&&oi.type(e,t,r,a,s)}i(a)},v_e=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(t===""&&(t=void 0),Hr(t)&&!e.required)return i();oi.required(e,t,r,a,s),t!==void 0&&(oi.type(e,t,r,a,s),oi.range(e,t,r,a,s))}i(a)},g_e=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Hr(t)&&!e.required)return i();oi.required(e,t,r,a,s),t!==void 0&&oi.type(e,t,r,a,s)}i(a)},y_e=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Hr(t)&&!e.required)return i();oi.required(e,t,r,a,s),Hr(t)||oi.type(e,t,r,a,s)}i(a)},__e=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Hr(t)&&!e.required)return i();oi.required(e,t,r,a,s),t!==void 0&&(oi.type(e,t,r,a,s),oi.range(e,t,r,a,s))}i(a)},b_e=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Hr(t)&&!e.required)return i();oi.required(e,t,r,a,s),t!==void 0&&(oi.type(e,t,r,a,s),oi.range(e,t,r,a,s))}i(a)},S_e=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(t==null&&!e.required)return i();oi.required(e,t,r,a,s,"array"),t!=null&&(oi.type(e,t,r,a,s),oi.range(e,t,r,a,s))}i(a)},w_e=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Hr(t)&&!e.required)return i();oi.required(e,t,r,a,s),t!==void 0&&oi.type(e,t,r,a,s)}i(a)},x_e="enum",C_e=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Hr(t)&&!e.required)return i();oi.required(e,t,r,a,s),t!==void 0&&oi[x_e](e,t,r,a,s)}i(a)},M_e=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Hr(t,"string")&&!e.required)return i();oi.required(e,t,r,a,s),Hr(t,"string")||oi.pattern(e,t,r,a,s)}i(a)},T_e=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Hr(t,"date")&&!e.required)return i();if(oi.required(e,t,r,a,s),!Hr(t,"date")){var l;t instanceof Date?l=t:l=new Date(t),oi.type(e,l,r,a,s),l&&oi.range(e,l.getTime(),r,a,s)}}i(a)},A_e=function(e,t,i,r,s){var a=[],o=Array.isArray(t)?"array":typeof t;oi.required(e,t,r,a,s,o),i(a)},CT=function(e,t,i,r,s){var a=e.type,o=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(Hr(t,a)&&!e.required)return i();oi.required(e,t,r,o,s,a),Hr(t,a)||oi.type(e,t,r,o,s)}i(o)},E_e=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(Hr(t)&&!e.required)return i();oi.required(e,t,r,a,s)}i(a)},sy={string:p_e,method:m_e,number:v_e,boolean:g_e,regexp:y_e,integer:__e,float:b_e,array:S_e,object:w_e,enum:C_e,pattern:M_e,date:T_e,url:CT,hex:CT,email:CT,required:A_e,any:E_e};function xI(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var CI=xI(),fb=function(){function n(t){this.rules=null,this._messages=CI,this.define(t)}var e=n.prototype;return e.define=function(i){var r=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(typeof i!="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(s){var a=i[s];r.rules[s]=Array.isArray(a)?a:[a]})},e.messages=function(i){return i&&(this._messages=PF(xI(),i)),this._messages},e.validate=function(i,r,s){var a=this;r===void 0&&(r={}),s===void 0&&(s=function(){});var o=i,l=r,c=s;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,o),Promise.resolve(o);function u(m){var v=[],g={};function _(S){if(Array.isArray(S)){var w;v=(w=v).concat.apply(w,S)}else v.push(S)}for(var y=0;y<m.length;y++)_(m[y]);v.length?(g=wI(v),c(v,g)):c(null,o)}if(l.messages){var d=this.messages();d===CI&&(d=xI()),PF(d,l.messages),l.messages=d}else l.messages=this.messages();var f={},h=l.keys||Object.keys(this.rules);h.forEach(function(m){var v=a.rules[m],g=o[m];v.forEach(function(_){var y=_;typeof y.transform=="function"&&(o===i&&(o=oh({},o)),g=o[m]=y.transform(g)),typeof y=="function"?y={validator:y}:y=oh({},y),y.validator=a.getValidationMethod(y),y.validator&&(y.field=m,y.fullField=y.fullField||m,y.type=a.getType(y),f[m]=f[m]||[],f[m].push({rule:y,value:g,source:o,field:m}))})});var p={};return s_e(f,l,function(m,v){var g=m.rule,_=(g.type==="object"||g.type==="array")&&(typeof g.fields=="object"||typeof g.defaultField=="object");_=_&&(g.required||!g.required&&m.value),g.field=m.field;function y(x,T){return oh({},T,{fullField:g.fullField+"."+x,fullFields:g.fullFields?[].concat(g.fullFields,[x]):[x]})}function S(x){x===void 0&&(x=[]);var T=Array.isArray(x)?x:[x];!l.suppressWarning&&T.length&&n.warning("async-validator:",T),T.length&&g.message!==void 0&&(T=[].concat(g.message));var C=T.map(RF(g,o));if(l.first&&C.length)return p[g.field]=1,v(C);if(!_)v(C);else{if(g.required&&!m.value)return g.message!==void 0?C=[].concat(g.message).map(RF(g,o)):l.error&&(C=[l.error(g,Na(l.messages.required,g.field))]),v(C);var M={};g.defaultField&&Object.keys(m.value).map(function(I){M[I]=g.defaultField}),M=oh({},M,m.rule.fields);var A={};Object.keys(M).forEach(function(I){var P=M[I],D=Array.isArray(P)?P:[P];A[I]=D.map(y.bind(null,I))});var E=new n(A);E.messages(l.messages),m.rule.options&&(m.rule.options.messages=l.messages,m.rule.options.error=l.error),E.validate(m.value,m.rule.options||l,function(I){var P=[];C&&C.length&&P.push.apply(P,C),I&&I.length&&P.push.apply(P,I),v(P.length?P:null)})}}var w;if(g.asyncValidator)w=g.asyncValidator(g,m.value,S,m.source,l);else if(g.validator){try{w=g.validator(g,m.value,S,m.source,l)}catch(x){console.error==null||console.error(x),l.suppressValidatorError||setTimeout(function(){throw x},0),S(x.message)}w===!0?S():w===!1?S(typeof g.message=="function"?g.message(g.fullField||g.field):g.message||(g.fullField||g.field)+" fails"):w instanceof Array?S(w):w instanceof Error&&S(w.message)}w&&w.then&&w.then(function(){return S()},function(x){return S(x)})},function(m){u(m)},o)},e.getType=function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!sy.hasOwnProperty(i.type))throw new Error(Na("Unknown rule type %s",i.type));return i.type||"string"},e.getValidationMethod=function(i){if(typeof i.validator=="function")return i.validator;var r=Object.keys(i),s=r.indexOf("message");return s!==-1&&r.splice(s,1),r.length===1&&r[0]==="required"?sy.required:sy[this.getType(i)]||void 0},n}();fb.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");sy[e]=t};fb.warning=t_e;fb.messages=CI;fb.validators=sy;const I_e=["","error","validating","success"],R_e=at({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:Re([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Re([Object,Array])},error:String,validateStatus:{type:String,values:I_e},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:nc}}),LF="ElLabelWrap";var P_e=ve({name:LF,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(n,{slots:e}){const t=mt(rp,void 0),i=mt(Xl);i||_r(LF,"usage: <el-form-item><label-wrap /></el-form-item>");const r=Ze("form"),s=X(),a=X(0),o=()=>{var u;if((u=s.value)!=null&&u.firstElementChild){const d=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},l=(u="update")=>{Mt(()=>{e.default&&n.isAutoWidth&&(u==="update"?a.value=o():u==="remove"&&(t==null||t.deregisterLabelWidth(a.value)))})},c=()=>l("update");return Ht(()=>{c()}),Un(()=>{l("remove")}),Bo(()=>c()),We(a,(u,d)=>{n.updateAll&&(t==null||t.registerLabelWidth(u,d))}),Ti(N(()=>{var u,d;return(d=(u=s.value)==null?void 0:u.firstElementChild)!=null?d:null}),c),()=>{var u,d;if(!e)return null;const{isAutoWidth:f}=n;if(f){const h=t==null?void 0:t.autoLabelWidth,p=i==null?void 0:i.hasLabel,m={};if(p&&h&&h!=="auto"){const v=Math.max(0,Number.parseInt(h,10)-a.value),_=(i.labelPosition||t.labelPosition)==="left"?"marginRight":"marginLeft";v&&(m[_]=`${v}px`)}return oe("div",{ref:s,class:[r.be("item","label-wrap")],style:m},[(u=e.default)==null?void 0:u.call(e)])}else return oe(bt,{ref:s},[(d=e.default)==null?void 0:d.call(e)])}}});const D_e=ve({name:"ElFormItem"}),L_e=ve({...D_e,props:R_e,setup(n,{expose:e}){const t=n,i=ur(),r=mt(rp,void 0),s=mt(Xl,void 0),a=tr(void 0,{formItem:!1}),o=Ze("form-item"),l=Qr().value,c=X([]),u=X(""),d=Koe(u,100),f=X(""),h=X();let p,m=!1;const v=N(()=>t.labelPosition||(r==null?void 0:r.labelPosition)),g=N(()=>{if(v.value==="top")return{};const me=Ui(t.labelWidth||(r==null?void 0:r.labelWidth)||"");return me?{width:me}:{}}),_=N(()=>{if(v.value==="top"||r!=null&&r.inline)return{};if(!t.label&&!t.labelWidth&&A)return{};const me=Ui(t.labelWidth||(r==null?void 0:r.labelWidth)||"");return!t.label&&!i.label?{marginLeft:me}:{}}),y=N(()=>[o.b(),o.m(a.value),o.is("error",u.value==="error"),o.is("validating",u.value==="validating"),o.is("success",u.value==="success"),o.is("required",L.value||t.required),o.is("no-asterisk",r==null?void 0:r.hideRequiredAsterisk),(r==null?void 0:r.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[o.m("feedback")]:r==null?void 0:r.statusIcon,[o.m(`label-${v.value}`)]:v.value}]),S=N(()=>ai(t.inlineMessage)?t.inlineMessage:(r==null?void 0:r.inlineMessage)||!1),w=N(()=>[o.e("error"),{[o.em("error","inline")]:S.value}]),x=N(()=>t.prop?xt(t.prop)?t.prop:t.prop.join("."):""),T=N(()=>!!(t.label||i.label)),C=N(()=>t.for||(c.value.length===1?c.value[0]:void 0)),M=N(()=>!C.value&&T.value),A=!!s,E=N(()=>{const me=r==null?void 0:r.model;if(!(!me||!t.prop))return s1(me,t.prop).value}),I=N(()=>{const{required:me}=t,ye=[];t.rules&&ye.push(...As(t.rules));const Te=r==null?void 0:r.rules;if(Te&&t.prop){const Ee=s1(Te,t.prop).value;Ee&&ye.push(...As(Ee))}if(me!==void 0){const Ee=ye.map((H,Q)=>[H,Q]).filter(([H])=>Object.keys(H).includes("required"));if(Ee.length>0)for(const[H,Q]of Ee)H.required!==me&&(ye[Q]={...H,required:me});else ye.push({required:me})}return ye}),P=N(()=>I.value.length>0),D=me=>I.value.filter(Te=>!Te.trigger||!me?!0:nt(Te.trigger)?Te.trigger.includes(me):Te.trigger===me).map(({trigger:Te,...Ee})=>Ee),L=N(()=>I.value.some(me=>me.required)),R=N(()=>{var me;return d.value==="error"&&t.showMessage&&((me=r==null?void 0:r.showMessage)!=null?me:!0)}),B=N(()=>`${t.label||""}${(r==null?void 0:r.labelSuffix)||""}`),k=me=>{u.value=me},O=me=>{var ye,Te;const{errors:Ee,fields:H}=me;(!Ee||!H)&&console.error(me),k("error"),f.value=Ee?(Te=(ye=Ee==null?void 0:Ee[0])==null?void 0:ye.message)!=null?Te:`${t.prop} is required`:"",r==null||r.emit("validate",t.prop,!1,f.value)},U=()=>{k("success"),r==null||r.emit("validate",t.prop,!0,"")},G=async me=>{const ye=x.value;return new fb({[ye]:me}).validate({[ye]:E.value},{firstFields:!0}).then(()=>(U(),!0)).catch(Ee=>(O(Ee),Promise.reject(Ee)))},q=async(me,ye)=>{if(m||!t.prop)return!1;const Te=Tt(ye);if(!P.value)return ye==null||ye(!1),!1;const Ee=D(me);return Ee.length===0?(ye==null||ye(!0),!0):(k("validating"),G(Ee).then(()=>(ye==null||ye(!0),!0)).catch(H=>{const{fields:Q}=H;return ye==null||ye(!1,Q),Te?!1:Promise.reject(Q)}))},W=()=>{k(""),f.value="",m=!1},Y=async()=>{const me=r==null?void 0:r.model;if(!me||!t.prop)return;const ye=s1(me,t.prop);m=!0,ye.value=dB(p),await Mt(),W(),m=!1},J=me=>{c.value.includes(me)||c.value.push(me)},Z=me=>{c.value=c.value.filter(ye=>ye!==me)};We(()=>t.error,me=>{f.value=me||"",k(me?"error":"")},{immediate:!0}),We(()=>t.validateStatus,me=>k(me||""));const ee=Nn({...Mr(t),$el:h,size:a,validateState:u,labelId:l,inputIds:c,isGroup:M,hasLabel:T,fieldValue:E,addInputId:J,removeInputId:Z,resetField:Y,clearValidate:W,validate:q});return un(Xl,ee),Ht(()=>{t.prop&&(r==null||r.addField(ee),p=dB(E.value))}),Un(()=>{r==null||r.removeField(ee)}),e({size:a,validateMessage:f,validateState:u,validate:q,clearValidate:W,resetField:Y}),(me,ye)=>{var Te;return F(),ie("div",{ref_key:"formItemRef",ref:h,class:$(b(y)),role:b(M)?"group":void 0,"aria-labelledby":b(M)?b(l):void 0},[oe(b(P_e),{"is-auto-width":b(g).width==="auto","update-all":((Te=b(r))==null?void 0:Te.labelWidth)==="auto"},{default:ge(()=>[b(T)?(F(),He(en(b(C)?"label":"div"),{key:0,id:b(l),for:b(C),class:$(b(o).e("label")),style:Ct(b(g))},{default:ge(()=>[Ne(me.$slots,"label",{label:b(B)},()=>[Xt(rt(b(B)),1)])]),_:3},8,["id","for","class","style"])):Be("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),le("div",{class:$(b(o).e("content")),style:Ct(b(_))},[Ne(me.$slots,"default"),oe(C8,{name:`${b(o).namespace.value}-zoom-in-top`},{default:ge(()=>[b(R)?Ne(me.$slots,"error",{key:0,error:f.value},()=>[le("div",{class:$(b(w))},rt(f.value),3)]):Be("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var O9=ot(L_e,[["__file","form-item.vue"]]);const k_e=Ft(jye,{FormItem:O9}),O_e=ki(O9),N_e=at({urlList:{type:Re(Array),default:()=>Li([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:Re(String)}}),B_e={close:()=>!0,switch:n=>At(n),rotate:n=>At(n)},F_e=ve({name:"ElImageViewer"}),z_e=ve({...F_e,props:N_e,emits:B_e,setup(n,{expose:e,emit:t}){var i;const r=n,s={CONTAIN:{name:"contain",icon:Wc(uce)},ORIGINAL:{name:"original",icon:Wc(kce)}},{t:a}=xn(),o=Ze("image-viewer"),{nextZIndex:l}=hg(),c=X(),u=X([]),d=nJ(),f=X(!0),h=X(r.initialIndex),p=Yn(s.CONTAIN),m=X({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),v=X((i=r.zIndex)!=null?i:l()),g=N(()=>{const{urlList:q}=r;return q.length<=1}),_=N(()=>h.value===0),y=N(()=>h.value===r.urlList.length-1),S=N(()=>r.urlList[h.value]),w=N(()=>[o.e("btn"),o.e("prev"),o.is("disabled",!r.infinite&&_.value)]),x=N(()=>[o.e("btn"),o.e("next"),o.is("disabled",!r.infinite&&y.value)]),T=N(()=>{const{scale:q,deg:W,offsetX:Y,offsetY:J,enableTransition:Z}=m.value;let ee=Y/q,me=J/q;const ye=W*Math.PI/180,Te=Math.cos(ye),Ee=Math.sin(ye);ee=ee*Te+me*Ee,me=me*Te-Y/q*Ee;const H={transform:`scale(${q}) rotate(${W}deg) translate(${ee}px, ${me}px)`,transition:Z?"transform .3s":""};return p.value.name===s.CONTAIN.name&&(H.maxWidth=H.maxHeight="100%"),H});function C(){A(),t("close")}function M(){const q=xh(Y=>{switch(Y.code){case ut.esc:r.closeOnPressEscape&&C();break;case ut.space:L();break;case ut.left:B();break;case ut.up:O("zoomIn");break;case ut.right:k();break;case ut.down:O("zoomOut");break}}),W=xh(Y=>{const J=Y.deltaY||Y.deltaX;O(J<0?"zoomIn":"zoomOut",{zoomRate:r.zoomRate,enableTransition:!1})});d.run(()=>{Kn(document,"keydown",q),Kn(document,"wheel",W)})}function A(){d.stop()}function E(){f.value=!1}function I(q){f.value=!1,q.target.alt=a("el.image.error")}function P(q){if(f.value||q.button!==0||!c.value)return;m.value.enableTransition=!1;const{offsetX:W,offsetY:Y}=m.value,J=q.pageX,Z=q.pageY,ee=xh(ye=>{m.value={...m.value,offsetX:W+ye.pageX-J,offsetY:Y+ye.pageY-Z}}),me=Kn(document,"mousemove",ee);Kn(document,"mouseup",()=>{me()}),q.preventDefault()}function D(){m.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function L(){if(f.value)return;const q=xv(s),W=Object.values(s),Y=p.value.name,Z=(W.findIndex(ee=>ee.name===Y)+1)%q.length;p.value=s[q[Z]],D()}function R(q){const W=r.urlList.length;h.value=(q+W)%W}function B(){_.value&&!r.infinite||R(h.value-1)}function k(){y.value&&!r.infinite||R(h.value+1)}function O(q,W={}){if(f.value)return;const{minScale:Y,maxScale:J}=r,{zoomRate:Z,rotateDeg:ee,enableTransition:me}={zoomRate:r.zoomRate,rotateDeg:90,enableTransition:!0,...W};switch(q){case"zoomOut":m.value.scale>Y&&(m.value.scale=Number.parseFloat((m.value.scale/Z).toFixed(3)));break;case"zoomIn":m.value.scale<J&&(m.value.scale=Number.parseFloat((m.value.scale*Z).toFixed(3)));break;case"clockwise":m.value.deg+=ee,t("rotate",m.value.deg);break;case"anticlockwise":m.value.deg-=ee,t("rotate",m.value.deg);break}m.value.enableTransition=me}function U(q){var W;((W=q.detail)==null?void 0:W.focusReason)==="pointer"&&q.preventDefault()}function G(){r.closeOnPressEscape&&C()}return We(S,()=>{Mt(()=>{const q=u.value[0];q!=null&&q.complete||(f.value=!0)})}),We(h,q=>{D(),t("switch",q)}),Ht(()=>{M()}),e({setActiveItem:R}),(q,W)=>(F(),He(b(vg),{to:"body",disabled:!q.teleported},{default:ge(()=>[oe(yr,{name:"viewer-fade",appear:""},{default:ge(()=>[le("div",{ref_key:"wrapper",ref:c,tabindex:-1,class:$(b(o).e("wrapper")),style:Ct({zIndex:v.value})},[oe(b(mg),{loop:"",trapped:"","focus-trap-el":c.value,"focus-start-el":"container",onFocusoutPrevented:U,onReleaseRequested:G},{default:ge(()=>[le("div",{class:$(b(o).e("mask")),onClick:Pt(Y=>q.hideOnClickModal&&C(),["self"])},null,10,["onClick"]),Be(" CLOSE "),le("span",{class:$([b(o).e("btn"),b(o).e("close")]),onClick:C},[oe(b(_t),null,{default:ge(()=>[oe(b(fl))]),_:1})],2),Be(" ARROW "),b(g)?Be("v-if",!0):(F(),ie(bt,{key:0},[le("span",{class:$(b(w)),onClick:B},[oe(b(_t),null,{default:ge(()=>[oe(b(Ld))]),_:1})],2),le("span",{class:$(b(x)),onClick:k},[oe(b(_t),null,{default:ge(()=>[oe(b(js))]),_:1})],2)],64)),Be(" ACTIONS "),le("div",{class:$([b(o).e("btn"),b(o).e("actions")])},[le("div",{class:$(b(o).e("actions__inner"))},[oe(b(_t),{onClick:Y=>O("zoomOut")},{default:ge(()=>[oe(b(jce))]),_:1},8,["onClick"]),oe(b(_t),{onClick:Y=>O("zoomIn")},{default:ge(()=>[oe(b(UG))]),_:1},8,["onClick"]),le("i",{class:$(b(o).e("actions__divider"))},null,2),oe(b(_t),{onClick:L},{default:ge(()=>[(F(),He(en(b(p).icon)))]),_:1}),le("i",{class:$(b(o).e("actions__divider"))},null,2),oe(b(_t),{onClick:Y=>O("anticlockwise")},{default:ge(()=>[oe(b(Rce))]),_:1},8,["onClick"]),oe(b(_t),{onClick:Y=>O("clockwise")},{default:ge(()=>[oe(b(Dce))]),_:1},8,["onClick"])],2)],2),Be(" CANVAS "),le("div",{class:$(b(o).e("canvas"))},[(F(!0),ie(bt,null,sn(q.urlList,(Y,J)=>Wt((F(),ie("img",{ref_for:!0,ref:Z=>u.value[J]=Z,key:Y,src:Y,style:Ct(b(T)),class:$(b(o).e("img")),crossorigin:q.crossorigin,onLoad:E,onError:I,onMousedown:P},null,46,["src","crossorigin"])),[[Dn,J===h.value]])),128))],2),Ne(q.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var U_e=ot(z_e,[["__file","image-viewer.vue"]]);const N9=Ft(U_e),H_e=at({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:Re([String,Object])},previewSrcList:{type:Re(Array),default:()=>Li([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:Re(String)}}),V_e={load:n=>n instanceof Event,error:n=>n instanceof Event,switch:n=>At(n),close:()=>!0,show:()=>!0},$_e=ve({name:"ElImage",inheritAttrs:!1}),G_e=ve({...$_e,props:H_e,emits:V_e,setup(n,{emit:e}){const t=n;let i="";const{t:r}=xn(),s=Ze("image"),a=Zd(),o=N(()=>e_(Object.entries(a).filter(([k])=>/^(data-|on[A-Z])/i.test(k)||["id","style"].includes(k)))),l=lb({excludeListeners:!0,excludeKeys:N(()=>Object.keys(o.value))}),c=X(),u=X(!1),d=X(!0),f=X(!1),h=X(),p=X(),m=wn&&"loading"in HTMLImageElement.prototype;let v,g;const _=N(()=>[s.e("inner"),S.value&&s.e("preview"),d.value&&s.is("loading")]),y=N(()=>{const{fit:k}=t;return wn&&k?{objectFit:k}:{}}),S=N(()=>{const{previewSrcList:k}=t;return nt(k)&&k.length>0}),w=N(()=>{const{previewSrcList:k,initialIndex:O}=t;let U=O;return O>k.length-1&&(U=0),U}),x=N(()=>t.loading==="eager"?!1:!m&&t.loading==="lazy"||t.lazy),T=()=>{wn&&(d.value=!0,u.value=!1,c.value=t.src)};function C(k){d.value=!1,u.value=!1,e("load",k)}function M(k){d.value=!1,u.value=!0,e("error",k)}function A(){dve(h.value,p.value)&&(T(),P())}const E=bG(A,200,!0);async function I(){var k;if(!wn)return;await Mt();const{scrollContainer:O}=t;za(O)?p.value=O:xt(O)&&O!==""?p.value=(k=document.querySelector(O))!=null?k:void 0:h.value&&(p.value=bL(h.value)),p.value&&(v=Kn(p,"scroll",E),setTimeout(()=>A(),100))}function P(){!wn||!p.value||!E||(v==null||v(),p.value=void 0)}function D(k){if(k.ctrlKey){if(k.deltaY<0)return k.preventDefault(),!1;if(k.deltaY>0)return k.preventDefault(),!1}}function L(){S.value&&(g=Kn("wheel",D,{passive:!1}),i=document.body.style.overflow,document.body.style.overflow="hidden",f.value=!0,e("show"))}function R(){g==null||g(),document.body.style.overflow=i,f.value=!1,e("close")}function B(k){e("switch",k)}return We(()=>t.src,()=>{x.value?(d.value=!0,u.value=!1,P(),I()):T()}),Ht(()=>{x.value?I():T()}),(k,O)=>(F(),ie("div",rn({ref_key:"container",ref:h},b(o),{class:[b(s).b(),k.$attrs.class]}),[u.value?Ne(k.$slots,"error",{key:0},()=>[le("div",{class:$(b(s).e("error"))},rt(b(r)("el.image.error")),3)]):(F(),ie(bt,{key:1},[c.value!==void 0?(F(),ie("img",rn({key:0},b(l),{src:c.value,loading:k.loading,style:b(y),class:b(_),crossorigin:k.crossorigin,onClick:L,onLoad:C,onError:M}),null,16,["src","loading","crossorigin"])):Be("v-if",!0),d.value?(F(),ie("div",{key:1,class:$(b(s).e("wrapper"))},[Ne(k.$slots,"placeholder",{},()=>[le("div",{class:$(b(s).e("placeholder"))},null,2)])],2)):Be("v-if",!0)],64)),b(S)?(F(),ie(bt,{key:2},[f.value?(F(),He(b(N9),{key:0,"z-index":k.zIndex,"initial-index":b(w),infinite:k.infinite,"zoom-rate":k.zoomRate,"min-scale":k.minScale,"max-scale":k.maxScale,"url-list":k.previewSrcList,crossorigin:k.crossorigin,"hide-on-click-modal":k.hideOnClickModal,teleported:k.previewTeleported,"close-on-press-escape":k.closeOnPressEscape,onClose:R,onSwitch:B},{default:ge(()=>[k.$slots.viewer?(F(),ie("div",{key:0},[Ne(k.$slots,"viewer")])):Be("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):Be("v-if",!0)],64)):Be("v-if",!0)],16))}});var W_e=ot(G_e,[["__file","image.vue"]]);const K_e=Ft(W_e),q_e=at({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:cr,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:n=>n===null||At(n)||["min","max"].includes(n),default:null},name:String,placeholder:String,precision:{type:Number,validator:n=>n>=0&&n===Number.parseInt(`${n}`,10)},validateEvent:{type:Boolean,default:!0},...Zr(["ariaLabel"])}),X_e={[jn]:(n,e)=>e!==n,blur:n=>n instanceof FocusEvent,focus:n=>n instanceof FocusEvent,[ls]:n=>At(n)||xr(n),[Kt]:n=>At(n)||xr(n)},Y_e=ve({name:"ElInputNumber"}),j_e=ve({...Y_e,props:q_e,emits:X_e,setup(n,{expose:e,emit:t}){const i=n,{t:r}=xn(),s=Ze("input-number"),a=X(),o=Nn({currentValue:i.modelValue,userInput:null}),{formItem:l}=fs(),c=N(()=>At(i.modelValue)&&i.modelValue<=i.min),u=N(()=>At(i.modelValue)&&i.modelValue>=i.max),d=N(()=>{const L=g(i.step);return Wn(i.precision)?Math.max(g(i.modelValue),L):(L>i.precision,i.precision)}),f=N(()=>i.controls&&i.controlsPosition==="right"),h=tr(),p=hs(),m=N(()=>{if(o.userInput!==null)return o.userInput;let L=o.currentValue;if(xr(L))return"";if(At(L)){if(Number.isNaN(L))return"";Wn(i.precision)||(L=L.toFixed(i.precision))}return L}),v=(L,R)=>{if(Wn(R)&&(R=d.value),R===0)return Math.round(L);let B=String(L);const k=B.indexOf(".");if(k===-1||!B.replace(".","").split("")[k+R])return L;const G=B.length;return B.charAt(G-1)==="5"&&(B=`${B.slice(0,Math.max(0,G-1))}6`),Number.parseFloat(Number(B).toFixed(R))},g=L=>{if(xr(L))return 0;const R=L.toString(),B=R.indexOf(".");let k=0;return B!==-1&&(k=R.length-B-1),k},_=(L,R=1)=>At(L)?v(L+i.step*R):o.currentValue,y=()=>{if(i.readonly||p.value||u.value)return;const L=Number(m.value)||0,R=_(L);x(R),t(ls,o.currentValue),P()},S=()=>{if(i.readonly||p.value||c.value)return;const L=Number(m.value)||0,R=_(L,-1);x(R),t(ls,o.currentValue),P()},w=(L,R)=>{const{max:B,min:k,step:O,precision:U,stepStrictly:G,valueOnClear:q}=i;B<k&&_r("InputNumber","min should not be greater than max.");let W=Number(L);if(xr(L)||Number.isNaN(W))return null;if(L===""){if(q===null)return null;W=xt(q)?{min:k,max:B}[q]:q}return G&&(W=v(Math.round(W/O)*O,U),W!==L&&R&&t(Kt,W)),Wn(U)||(W=v(W,U)),(W>B||W<k)&&(W=W>B?B:k,R&&t(Kt,W)),W},x=(L,R=!0)=>{var B;const k=o.currentValue,O=w(L);if(!R){t(Kt,O);return}k===O&&L||(o.userInput=null,t(Kt,O),k!==O&&t(jn,O,k),i.validateEvent&&((B=l==null?void 0:l.validate)==null||B.call(l,"change").catch(U=>void 0)),o.currentValue=O)},T=L=>{o.userInput=L;const R=L===""?null:Number(L);t(ls,R),x(R,!1)},C=L=>{const R=L!==""?Number(L):"";(At(R)&&!Number.isNaN(R)||L==="")&&x(R),P(),o.userInput=null},M=()=>{var L,R;(R=(L=a.value)==null?void 0:L.focus)==null||R.call(L)},A=()=>{var L,R;(R=(L=a.value)==null?void 0:L.blur)==null||R.call(L)},E=L=>{t("focus",L)},I=L=>{var R,B;o.userInput=null,uM()&&o.currentValue===null&&((R=a.value)!=null&&R.input)&&(a.value.input.value=""),t("blur",L),i.validateEvent&&((B=l==null?void 0:l.validate)==null||B.call(l,"blur").catch(k=>void 0))},P=()=>{o.currentValue!==i.modelValue&&(o.currentValue=i.modelValue)},D=L=>{document.activeElement===L.target&&L.preventDefault()};return We(()=>i.modelValue,(L,R)=>{const B=w(L,!0);o.userInput===null&&B!==R&&(o.currentValue=B)},{immediate:!0}),Ht(()=>{var L;const{min:R,max:B,modelValue:k}=i,O=(L=a.value)==null?void 0:L.input;if(O.setAttribute("role","spinbutton"),Number.isFinite(B)?O.setAttribute("aria-valuemax",String(B)):O.removeAttribute("aria-valuemax"),Number.isFinite(R)?O.setAttribute("aria-valuemin",String(R)):O.removeAttribute("aria-valuemin"),O.setAttribute("aria-valuenow",o.currentValue||o.currentValue===0?String(o.currentValue):""),O.setAttribute("aria-disabled",String(p.value)),!At(k)&&k!=null){let U=Number(k);Number.isNaN(U)&&(U=null),t(Kt,U)}O.addEventListener("wheel",D,{passive:!1})}),Bo(()=>{var L,R;const B=(L=a.value)==null?void 0:L.input;B==null||B.setAttribute("aria-valuenow",`${(R=o.currentValue)!=null?R:""}`)}),e({focus:M,blur:A}),(L,R)=>(F(),ie("div",{class:$([b(s).b(),b(s).m(b(h)),b(s).is("disabled",b(p)),b(s).is("without-controls",!L.controls),b(s).is("controls-right",b(f))]),onDragstart:Pt(()=>{},["prevent"])},[L.controls?Wt((F(),ie("span",{key:0,role:"button","aria-label":b(r)("el.inputNumber.decrease"),class:$([b(s).e("decrease"),b(s).is("disabled",b(c))]),onKeydown:ri(S,["enter"])},[Ne(L.$slots,"decrease-icon",{},()=>[oe(b(_t),null,{default:ge(()=>[b(f)?(F(),He(b(du),{key:0})):(F(),He(b(yce),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[b(hx),S]]):Be("v-if",!0),L.controls?Wt((F(),ie("span",{key:1,role:"button","aria-label":b(r)("el.inputNumber.increase"),class:$([b(s).e("increase"),b(s).is("disabled",b(u))]),onKeydown:ri(y,["enter"])},[Ne(L.$slots,"increase-icon",{},()=>[oe(b(_t),null,{default:ge(()=>[b(f)?(F(),He(b(wL),{key:0})):(F(),He(b(zG),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[b(hx),y]]):Be("v-if",!0),oe(b(Rs),{id:L.id,ref_key:"input",ref:a,type:"number",step:L.step,"model-value":b(m),placeholder:L.placeholder,readonly:L.readonly,disabled:b(p),size:b(h),max:L.max,min:L.min,name:L.name,"aria-label":L.ariaLabel,"validate-event":!1,onKeydown:[ri(Pt(y,["prevent"]),["up"]),ri(Pt(S,["prevent"]),["down"])],onBlur:I,onFocus:E,onInput:T,onChange:C},Ro({_:2},[L.$slots.prefix?{name:"prefix",fn:ge(()=>[Ne(L.$slots,"prefix")])}:void 0,L.$slots.suffix?{name:"suffix",fn:ge(()=>[Ne(L.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var Q_e=ot(j_e,[["__file","input-number.vue"]]);const B9=Ft(Q_e),Z_e=at({modelValue:{type:Re(Array)},max:Number,tagType:{...Jc.type,default:"info"},tagEffect:Jc.effect,trigger:{type:Re(String),default:ut.enter},draggable:{type:Boolean,default:!1},size:cr,clearable:Boolean,disabled:{type:Boolean,default:void 0},validateEvent:{type:Boolean,default:!0},readonly:Boolean,autofocus:Boolean,id:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},placeholder:String,autocomplete:{type:String,default:"off"},ariaLabel:String}),J_e={[Kt]:n=>nt(n)||Wn(n),[jn]:n=>nt(n)||Wn(n),[ls]:n=>xt(n),"add-tag":n=>xt(n),"remove-tag":n=>xt(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0};function ebe({props:n,emit:e,formItem:t}){const i=hs(),r=tr(),s=Yn(),a=X(),o=N(()=>["small"].includes(r.value)?"small":"default"),l=N(()=>{var M;return(M=n.modelValue)!=null&&M.length?void 0:n.placeholder}),c=N(()=>!(n.readonly||i.value)),u=N(()=>{var M,A;return Wn(n.max)?!1:((A=(M=n.modelValue)==null?void 0:M.length)!=null?A:0)>=n.max}),d=M=>{if(u.value){a.value=void 0;return}w.value||e(ls,M.target.value)},f=M=>{var A;if(!w.value)switch(M.code){case n.trigger:M.preventDefault(),M.stopPropagation(),h();break;case ut.numpadEnter:n.trigger===ut.enter&&(M.preventDefault(),M.stopPropagation(),h());break;case ut.backspace:!a.value&&((A=n.modelValue)!=null&&A.length)&&(M.preventDefault(),M.stopPropagation(),p(n.modelValue.length-1));break}},h=()=>{var M,A;const E=(M=a.value)==null?void 0:M.trim();if(!E||u.value)return;const I=[...(A=n.modelValue)!=null?A:[],E];e(Kt,I),e(jn,I),e("add-tag",E),a.value=void 0},p=M=>{var A;const E=((A=n.modelValue)!=null?A:[]).slice(),[I]=E.splice(M,1);e(Kt,E),e(jn,E),e("remove-tag",I)},m=()=>{a.value=void 0,e(Kt,void 0),e(jn,void 0),e("clear")},v=(M,A,E)=>{var I;const P=((I=n.modelValue)!=null?I:[]).slice(),[D]=P.splice(M,1),L=A>M&&E==="before"?-1:A<M&&E==="after"?1:0;P.splice(A+L,0,D),e(Kt,P),e(jn,P)},g=()=>{var M;(M=s.value)==null||M.focus()},_=()=>{var M;(M=s.value)==null||M.blur()},{wrapperRef:y,isFocused:S}=ef(s,{beforeFocus(){return i.value},afterBlur(){var M;h(),n.validateEvent&&((M=t==null?void 0:t.validate)==null||M.call(t,"blur").catch(A=>void 0))}}),{isComposing:w,handleCompositionStart:x,handleCompositionUpdate:T,handleCompositionEnd:C}=cb({afterComposition:d});return We(()=>n.modelValue,()=>{var M;n.validateEvent&&((M=t==null?void 0:t.validate)==null||M.call(t,jn).catch(A=>void 0))}),{inputRef:s,wrapperRef:y,isFocused:S,isComposing:w,inputValue:a,size:r,tagSize:o,placeholder:l,closable:c,disabled:i,inputLimit:u,handleDragged:v,handleInput:d,handleKeydown:f,handleAddTag:h,handleRemoveTag:p,handleClear:m,handleCompositionStart:x,handleCompositionUpdate:T,handleCompositionEnd:C,focus:g,blur:_}}function tbe(){const n=X(!1);return{hovering:n,handleMouseEnter:()=>{n.value=!0},handleMouseLeave:()=>{n.value=!1}}}function nbe(){const n=Yn(),e=X(0),t=11,i=N(()=>({minWidth:`${Math.max(e.value,t)}px`}));return Ti(n,()=>{var s,a;e.value=(a=(s=n.value)==null?void 0:s.getBoundingClientRect().width)!=null?a:0}),{calculatorRef:n,calculatorWidth:e,inputStyle:i}}function ibe({wrapperRef:n,handleDragged:e,afterDragged:t}){const i=Ze("input-tag"),r=Yn(),s=X(!1);let a,o,l,c;function u(p){return`.${i.e("inner")} .${i.namespace.value}-tag:nth-child(${p+1})`}function d(p,m){a=m,o=n.value.querySelector(u(m)),o&&(o.style.opacity="0.5"),p.dataTransfer.effectAllowed="move"}function f(p,m){if(l=m,p.preventDefault(),p.dataTransfer.dropEffect="move",Wn(a)||a===m){s.value=!1;return}const v=n.value.querySelector(u(m)).getBoundingClientRect(),g=a+1!==m,_=a-1!==m,y=p.clientX-v.left,S=g?_?.5:1:-1,w=_?g?.5:0:1;y<=v.width*S?c="before":y>v.width*w?c="after":c=void 0;const x=n.value.querySelector(`.${i.e("inner")}`),T=x.getBoundingClientRect(),C=Number.parseFloat(Fc(x,"gap"))/2,M=v.top-T.top;let A=-9999;if(c==="before")A=Math.max(v.left-T.left-C,Math.floor(-C/2));else if(c==="after"){const E=v.right-T.left;A=E+(T.width===E?Math.floor(C/2):C)}LG(r.value,{top:`${M}px`,left:`${A}px`}),s.value=!!c}function h(p){p.preventDefault(),o&&(o.style.opacity=""),c&&!Wn(a)&&!Wn(l)&&a!==l&&e(a,l,c),s.value=!1,a=void 0,o=null,l=void 0,c=void 0,t==null||t()}return{dropIndicatorRef:r,showDropIndicator:s,handleDragStart:d,handleDragOver:f,handleDragEnd:h}}function rbe({props:n,isFocused:e,hovering:t,disabled:i,inputValue:r,size:s,validateState:a,validateIcon:o,needStatusIcon:l}){const c=Zd(),u=ur(),d=Ze("input-tag"),f=Ze("input"),h=N(()=>[d.b(),d.is("focused",e.value),d.is("hovering",t.value),d.is("disabled",i.value),d.m(s.value),d.e("wrapper"),c.class]),p=N(()=>[c.style]),m=N(()=>{var _,y;return[d.e("inner"),d.is("draggable",n.draggable),d.is("left-space",!((_=n.modelValue)!=null&&_.length)&&!u.prefix),d.is("right-space",!((y=n.modelValue)!=null&&y.length)&&!g.value)]}),v=N(()=>{var _;return n.clearable&&!i.value&&!n.readonly&&(((_=n.modelValue)==null?void 0:_.length)||r.value)&&(e.value||t.value)}),g=N(()=>u.suffix||v.value||a.value&&o.value&&l.value);return{ns:d,nsInput:f,containerKls:h,containerStyle:p,innerKls:m,showClear:v,showSuffix:g}}const sbe=ve({name:"ElInputTag",inheritAttrs:!1}),abe=ve({...sbe,props:Z_e,emits:J_e,setup(n,{expose:e,emit:t}){const i=n,r=lb(),s=ur(),{form:a,formItem:o}=fs(),{inputId:l}=Fo(i,{formItemContext:o}),c=N(()=>{var H;return(H=a==null?void 0:a.statusIcon)!=null?H:!1}),u=N(()=>(o==null?void 0:o.validateState)||""),d=N(()=>u.value&&cM[u.value]),{inputRef:f,wrapperRef:h,isFocused:p,inputValue:m,size:v,tagSize:g,placeholder:_,closable:y,disabled:S,handleDragged:w,handleInput:x,handleKeydown:T,handleRemoveTag:C,handleClear:M,handleCompositionStart:A,handleCompositionUpdate:E,handleCompositionEnd:I,focus:P,blur:D}=ebe({props:i,emit:t,formItem:o}),{hovering:L,handleMouseEnter:R,handleMouseLeave:B}=tbe(),{calculatorRef:k,inputStyle:O}=nbe(),{dropIndicatorRef:U,showDropIndicator:G,handleDragStart:q,handleDragOver:W,handleDragEnd:Y}=ibe({wrapperRef:h,handleDragged:w,afterDragged:P}),{ns:J,nsInput:Z,containerKls:ee,containerStyle:me,innerKls:ye,showClear:Te,showSuffix:Ee}=rbe({props:i,hovering:L,isFocused:p,inputValue:m,disabled:S,size:v,validateState:u,validateIcon:d,needStatusIcon:c});return e({focus:P,blur:D}),(H,Q)=>(F(),ie("div",{ref_key:"wrapperRef",ref:h,class:$(b(ee)),style:Ct(b(me)),onMouseenter:b(R),onMouseleave:b(B)},[b(s).prefix?(F(),ie("div",{key:0,class:$(b(J).e("prefix"))},[Ne(H.$slots,"prefix")],2)):Be("v-if",!0),le("div",{class:$(b(ye))},[(F(!0),ie(bt,null,sn(H.modelValue,(j,Pe)=>(F(),He(b(Iv),{key:Pe,size:b(g),closable:b(y),type:H.tagType,effect:H.tagEffect,draggable:b(y)&&H.draggable,"disable-transitions":"",onClose:we=>b(C)(Pe),onDragstart:we=>b(q)(we,Pe),onDragover:we=>b(W)(we,Pe),onDragend:b(Y),onDrop:Pt(()=>{},["stop"])},{default:ge(()=>[Ne(H.$slots,"tag",{value:j,index:Pe},()=>[Xt(rt(j),1)])]),_:2},1032,["size","closable","type","effect","draggable","onClose","onDragstart","onDragover","onDragend","onDrop"]))),128)),le("div",{class:$(b(J).e("input-wrapper"))},[Wt(le("input",rn({id:b(l),ref_key:"inputRef",ref:f,"onUpdate:modelValue":j=>fi(m)?m.value=j:null},b(r),{type:"text",minlength:H.minlength,maxlength:H.maxlength,disabled:b(S),readonly:H.readonly,autocomplete:H.autocomplete,tabindex:H.tabindex,placeholder:b(_),autofocus:H.autofocus,ariaLabel:H.ariaLabel,class:b(J).e("input"),style:b(O),onCompositionstart:b(A),onCompositionupdate:b(E),onCompositionend:b(I),onInput:b(x),onKeydown:b(T)}),null,16,["id","onUpdate:modelValue","minlength","maxlength","disabled","readonly","autocomplete","tabindex","placeholder","autofocus","ariaLabel","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onKeydown"]),[[jC,b(m)]]),le("span",{ref_key:"calculatorRef",ref:k,"aria-hidden":"true",class:$(b(J).e("input-calculator")),textContent:rt(b(m))},null,10,["textContent"])],2),Wt(le("div",{ref_key:"dropIndicatorRef",ref:U,class:$(b(J).e("drop-indicator"))},null,2),[[Dn,b(G)]])],2),b(Ee)?(F(),ie("div",{key:1,class:$(b(J).e("suffix"))},[Ne(H.$slots,"suffix"),b(Te)?(F(),He(b(_t),{key:0,class:$([b(J).e("icon"),b(J).e("clear")]),onMousedown:Pt(b(Vn),["prevent"]),onClick:b(M)},{default:ge(()=>[oe(b(fu))]),_:1},8,["class","onMousedown","onClick"])):Be("v-if",!0),b(u)&&b(d)&&b(c)?(F(),He(b(_t),{key:1,class:$([b(Z).e("icon"),b(Z).e("validateIcon"),b(Z).is("loading",b(u)==="validating")])},{default:ge(()=>[(F(),He(en(b(d))))]),_:1},8,["class"])):Be("v-if",!0)],2)):Be("v-if",!0)],46,["onMouseenter","onMouseleave"]))}});var obe=ot(abe,[["__file","input-tag.vue"]]);const lbe=Ft(obe),cbe=at({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:Zn}}),ube={click:n=>n instanceof MouseEvent},dbe=ve({name:"ElLink"}),fbe=ve({...dbe,props:cbe,emits:ube,setup(n,{emit:e}){const t=n,i=Ze("link"),r=N(()=>[i.b(),i.m(t.type),i.is("disabled",t.disabled),i.is("underline",t.underline&&!t.disabled)]);function s(a){t.disabled||e("click",a)}return(a,o)=>(F(),ie("a",{class:$(b(r)),href:a.disabled||!a.href?void 0:a.href,target:a.disabled||!a.href?void 0:a.target,onClick:s},[a.icon?(F(),He(b(_t),{key:0},{default:ge(()=>[(F(),He(en(a.icon)))]),_:1})):Be("v-if",!0),a.$slots.default?(F(),ie("span",{key:1,class:$(b(i).e("inner"))},[Ne(a.$slots,"default")],2)):Be("v-if",!0),a.$slots.icon?Ne(a.$slots,"icon",{key:2}):Be("v-if",!0)],10,["href","target"]))}});var hbe=ot(fbe,[["__file","link.vue"]]);const pbe=Ft(hbe);let mbe=class{constructor(e,t){this.parent=e,this.domNode=t,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,t=>{t.addEventListener("keydown",i=>{let r=!1;switch(i.code){case ut.down:{this.gotoSubIndex(this.subIndex+1),r=!0;break}case ut.up:{this.gotoSubIndex(this.subIndex-1),r=!0;break}case ut.tab:{a1(e,"mouseleave");break}case ut.enter:case ut.numpadEnter:case ut.space:{r=!0,i.currentTarget.click();break}}return r&&(i.preventDefault(),i.stopPropagation()),!1})})}},vbe=class{constructor(e,t){this.domNode=e,this.submenu=null,this.submenu=null,this.init(t)}init(e){this.domNode.setAttribute("tabindex","0");const t=this.domNode.querySelector(`.${e}-menu`);t&&(this.submenu=new mbe(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",e=>{let t=!1;switch(e.code){case ut.down:{a1(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),t=!0;break}case ut.up:{a1(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),t=!0;break}case ut.tab:{a1(e.currentTarget,"mouseleave");break}case ut.enter:case ut.numpadEnter:case ut.space:{t=!0,e.currentTarget.click();break}}t&&e.preventDefault()})}},gbe=class{constructor(e,t){this.domNode=e,this.init(t)}init(e){const t=this.domNode.childNodes;Array.from(t).forEach(i=>{i.nodeType===1&&new vbe(i,e)})}};const ybe=ve({name:"ElMenuCollapseTransition",setup(){const n=Ze("menu");return{listeners:{onBeforeEnter:t=>t.style.opacity="0.2",onEnter(t,i){_o(t,`${n.namespace.value}-opacity-transition`),t.style.opacity="1",i()},onAfterEnter(t){Ls(t,`${n.namespace.value}-opacity-transition`),t.style.opacity=""},onBeforeLeave(t){t.dataset||(t.dataset={}),fa(t,n.m("collapse"))?(Ls(t,n.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),_o(t,n.m("collapse"))):(_o(t,n.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),Ls(t,n.m("collapse"))),t.style.width=`${t.scrollWidth}px`,t.style.overflow="hidden"},onLeave(t){_o(t,"horizontal-collapse-transition"),t.style.width=`${t.dataset.scrollWidth}px`}}}}});function _be(n,e,t,i,r,s){return F(),He(yr,rn({mode:"out-in"},n.listeners),{default:ge(()=>[Ne(n.$slots,"default")]),_:3},16)}var bbe=ot(ybe,[["render",_be],["__file","menu-collapse-transition.vue"]]);function F9(n,e){const t=N(()=>{let r=n.parent;const s=[e.value];for(;r.type.name!=="ElMenu";)r.props.index&&s.unshift(r.props.index),r=r.parent;return s});return{parentMenu:N(()=>{let r=n.parent;for(;r&&!["ElMenu","ElSubMenu"].includes(r.type.name);)r=r.parent;return r}),indexPath:t}}function Sbe(n){return N(()=>{const t=n.backgroundColor;return t?new SW(t).shade(20).toString():""})}const z9=(n,e)=>{const t=Ze("menu");return N(()=>t.cssVarBlock({"text-color":n.textColor||"","hover-text-color":n.textColor||"","bg-color":n.backgroundColor||"","hover-bg-color":Sbe(n).value||"","active-color":n.activeTextColor||"",level:`${e}`}))},wbe=at({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:Zn},expandOpenIcon:{type:Zn},collapseCloseIcon:{type:Zn},collapseOpenIcon:{type:Zn}}),MT="ElSubMenu";var l3=ve({name:MT,props:wbe,setup(n,{slots:e,expose:t}){const i=jt(),{indexPath:r,parentMenu:s}=F9(i,N(()=>n.index)),a=Ze("menu"),o=Ze("sub-menu"),l=mt("rootMenu");l||_r(MT,"can not inject root menu");const c=mt(`subMenu:${s.value.uid}`);c||_r(MT,"can not inject sub menu");const u=X({}),d=X({});let f;const h=X(!1),p=X(),m=X(null),v=N(()=>C.value==="horizontal"&&_.value?"bottom-start":"right-start"),g=N(()=>C.value==="horizontal"&&_.value||C.value==="vertical"&&!l.props.collapse?n.expandCloseIcon&&n.expandOpenIcon?x.value?n.expandOpenIcon:n.expandCloseIcon:du:n.collapseCloseIcon&&n.collapseOpenIcon?x.value?n.collapseOpenIcon:n.collapseCloseIcon:js),_=N(()=>c.level===0),y=N(()=>{const U=n.teleported;return U===void 0?_.value:U}),S=N(()=>l.props.collapse?`${a.namespace.value}-zoom-in-left`:`${a.namespace.value}-zoom-in-top`),w=N(()=>C.value==="horizontal"&&_.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),x=N(()=>l.openedMenus.includes(n.index)),T=N(()=>{let U=!1;return Object.values(u.value).forEach(G=>{G.active&&(U=!0)}),Object.values(d.value).forEach(G=>{G.active&&(U=!0)}),U}),C=N(()=>l.props.mode),M=Nn({index:n.index,indexPath:r,active:T}),A=z9(l.props,c.level+1),E=N(()=>{var U;return(U=n.popperOffset)!=null?U:l.props.popperOffset}),I=N(()=>{var U;return(U=n.popperClass)!=null?U:l.props.popperClass}),P=N(()=>{var U;return(U=n.showTimeout)!=null?U:l.props.showTimeout}),D=N(()=>{var U;return(U=n.hideTimeout)!=null?U:l.props.hideTimeout}),L=()=>{var U,G,q;return(q=(G=(U=m.value)==null?void 0:U.popperRef)==null?void 0:G.popperInstanceRef)==null?void 0:q.destroy()},R=U=>{U||L()},B=()=>{l.props.menuTrigger==="hover"&&l.props.mode==="horizontal"||l.props.collapse&&l.props.mode==="vertical"||n.disabled||l.handleSubMenuClick({index:n.index,indexPath:r.value,active:T.value})},k=(U,G=P.value)=>{var q;if(U.type!=="focus"){if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||n.disabled){c.mouseInChild.value=!0;return}c.mouseInChild.value=!0,f==null||f(),{stop:f}=Bh(()=>{l.openMenu(n.index,r.value)},G),y.value&&((q=s.value.vnode.el)==null||q.dispatchEvent(new MouseEvent("mouseenter")))}},O=(U=!1)=>{var G;if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"){c.mouseInChild.value=!1;return}f==null||f(),c.mouseInChild.value=!1,{stop:f}=Bh(()=>!h.value&&l.closeMenu(n.index,r.value),D.value),y.value&&U&&((G=c.handleMouseleave)==null||G.call(c,!0))};We(()=>l.props.collapse,U=>R(!!U));{const U=q=>{d.value[q.index]=q},G=q=>{delete d.value[q.index]};un(`subMenu:${i.uid}`,{addSubMenu:U,removeSubMenu:G,handleMouseleave:O,mouseInChild:h,level:c.level+1})}return t({opened:x}),Ht(()=>{l.addSubMenu(M),c.addSubMenu(M)}),Un(()=>{c.removeSubMenu(M),l.removeSubMenu(M)}),()=>{var U;const G=[(U=e.title)==null?void 0:U.call(e),wt(_t,{class:o.e("icon-arrow"),style:{transform:x.value?n.expandCloseIcon&&n.expandOpenIcon||n.collapseCloseIcon&&n.collapseOpenIcon&&l.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>xt(g.value)?wt(i.appContext.components[g.value]):wt(g.value)})],q=l.isMenuPopup?wt(us,{ref:m,visible:x.value,effect:"light",pure:!0,offset:E.value,showArrow:!1,persistent:!0,popperClass:I.value,placement:v.value,teleported:y.value,fallbackPlacements:w.value,transition:S.value,gpuAcceleration:!1},{content:()=>{var W;return wt("div",{class:[a.m(C.value),a.m("popup-container"),I.value],onMouseenter:Y=>k(Y,100),onMouseleave:()=>O(!0),onFocus:Y=>k(Y,100)},[wt("ul",{class:[a.b(),a.m("popup"),a.m(`popup-${v.value}`)],style:A.value},[(W=e.default)==null?void 0:W.call(e)])])},default:()=>wt("div",{class:o.e("title"),onClick:B},G)}):wt(bt,{},[wt("div",{class:o.e("title"),ref:p,onClick:B},G),wt(pM,{},{default:()=>{var W;return Wt(wt("ul",{role:"menu",class:[a.b(),a.m("inline")],style:A.value},[(W=e.default)==null?void 0:W.call(e)]),[[Dn,x.value]])}})]);return wt("li",{class:[o.b(),o.is("active",T.value),o.is("opened",x.value),o.is("disabled",n.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:x.value,onMouseenter:k,onMouseleave:()=>O(),onFocus:k},[q])}}});const xbe=at({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Re(Array),default:()=>Li([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:Zn,default:()=>Sce},popperEffect:{type:Re(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300}}),TT=n=>nt(n)&&n.every(e=>xt(e)),Cbe={close:(n,e)=>xt(n)&&TT(e),open:(n,e)=>xt(n)&&TT(e),select:(n,e,t,i)=>xt(n)&&TT(e)&&Yt(t)&&(i===void 0||i instanceof Promise)};var Mbe=ve({name:"ElMenu",props:xbe,emits:Cbe,setup(n,{emit:e,slots:t,expose:i}){const r=jt(),s=r.appContext.config.globalProperties.$router,a=X(),o=Ze("menu"),l=Ze("sub-menu"),c=X(-1),u=X(n.defaultOpeneds&&!n.collapse?n.defaultOpeneds.slice(0):[]),d=X(n.defaultActive),f=X({}),h=X({}),p=N(()=>n.mode==="horizontal"||n.mode==="vertical"&&n.collapse),m=()=>{const L=d.value&&f.value[d.value];if(!L||n.mode==="horizontal"||n.collapse)return;L.indexPath.forEach(B=>{const k=h.value[B];k&&v(B,k.indexPath)})},v=(L,R)=>{u.value.includes(L)||(n.uniqueOpened&&(u.value=u.value.filter(B=>R.includes(B))),u.value.push(L),e("open",L,R))},g=L=>{const R=u.value.indexOf(L);R!==-1&&u.value.splice(R,1)},_=(L,R)=>{g(L),e("close",L,R)},y=({index:L,indexPath:R})=>{u.value.includes(L)?_(L,R):v(L,R)},S=L=>{(n.mode==="horizontal"||n.collapse)&&(u.value=[]);const{index:R,indexPath:B}=L;if(!(xr(R)||xr(B)))if(n.router&&s){const k=L.route||R,O=s.push(k).then(U=>(U||(d.value=R),U));e("select",R,B,{index:R,indexPath:B,route:k},O)}else d.value=R,e("select",R,B,{index:R,indexPath:B})},w=L=>{const R=f.value,B=R[L]||d.value&&R[d.value]||R[n.defaultActive];B?d.value=B.index:d.value=L},x=L=>{const R=getComputedStyle(L),B=Number.parseInt(R.marginLeft,10),k=Number.parseInt(R.marginRight,10);return L.offsetWidth+B+k||0},T=()=>{var L,R;if(!a.value)return-1;const B=Array.from((R=(L=a.value)==null?void 0:L.childNodes)!=null?R:[]).filter(J=>J.nodeName!=="#comment"&&(J.nodeName!=="#text"||J.nodeValue)),k=64,O=getComputedStyle(a.value),U=Number.parseInt(O.paddingLeft,10),G=Number.parseInt(O.paddingRight,10),q=a.value.clientWidth-U-G;let W=0,Y=0;return B.forEach((J,Z)=>{W+=x(J),W<=q-k&&(Y=Z+1)}),Y===B.length?-1:Y},C=L=>h.value[L].indexPath,M=(L,R=33.34)=>{let B;return()=>{B&&clearTimeout(B),B=setTimeout(()=>{L()},R)}};let A=!0;const E=()=>{if(c.value===T())return;const L=()=>{c.value=-1,Mt(()=>{c.value=T()})};A?L():M(L)(),A=!1};We(()=>n.defaultActive,L=>{f.value[L]||(d.value=""),w(L)}),We(()=>n.collapse,L=>{L&&(u.value=[])}),We(f.value,m);let I;zr(()=>{n.mode==="horizontal"&&n.ellipsis?I=Ti(a,E).stop:I==null||I()});const P=X(!1);{const L=O=>{h.value[O.index]=O},R=O=>{delete h.value[O.index]};un("rootMenu",Nn({props:n,openedMenus:u,items:f,subMenus:h,activeIndex:d,isMenuPopup:p,addMenuItem:O=>{f.value[O.index]=O},removeMenuItem:O=>{delete f.value[O.index]},addSubMenu:L,removeSubMenu:R,openMenu:v,closeMenu:_,handleMenuItemClick:S,handleSubMenuClick:y})),un(`subMenu:${r.uid}`,{addSubMenu:L,removeSubMenu:R,mouseInChild:P,level:0})}Ht(()=>{n.mode==="horizontal"&&new gbe(r.vnode.el,o.namespace.value)}),i({open:R=>{const{indexPath:B}=h.value[R];B.forEach(k=>v(k,B))},close:g,handleResize:E});const D=z9(n,0);return()=>{var L,R;let B=(R=(L=t.default)==null?void 0:L.call(t))!=null?R:[];const k=[];if(n.mode==="horizontal"&&a.value){const G=gd(B),q=c.value===-1?G:G.slice(0,c.value),W=c.value===-1?[]:G.slice(c.value);W!=null&&W.length&&n.ellipsis&&(B=q,k.push(wt(l3,{index:"sub-menu-more",class:l.e("hide-arrow"),popperOffset:n.popperOffset},{title:()=>wt(_t,{class:l.e("icon-more")},{default:()=>wt(n.ellipsisIcon)}),default:()=>W})))}const O=n.closeOnClickOutside?[[eu,()=>{u.value.length&&(P.value||(u.value.forEach(G=>e("close",G,C(G))),u.value=[]))}]]:[],U=Wt(wt("ul",{key:String(n.collapse),role:"menubar",ref:a,style:D.value,class:{[o.b()]:!0,[o.m(n.mode)]:!0,[o.m("collapse")]:n.collapse}},[...B,...k]),O);return n.collapseTransition&&n.mode==="vertical"?wt(bbe,()=>U):U}}});const Tbe=at({index:{type:Re([String,null]),default:null},route:{type:Re([String,Object])},disabled:Boolean}),Abe={click:n=>xt(n.index)&&nt(n.indexPath)},AT="ElMenuItem",Ebe=ve({name:AT,components:{ElTooltip:us},props:Tbe,emits:Abe,setup(n,{emit:e}){const t=jt(),i=mt("rootMenu"),r=Ze("menu"),s=Ze("menu-item");i||_r(AT,"can not inject root menu");const{parentMenu:a,indexPath:o}=F9(t,zn(n,"index")),l=mt(`subMenu:${a.value.uid}`);l||_r(AT,"can not inject sub menu");const c=N(()=>n.index===i.activeIndex),u=Nn({index:n.index,indexPath:o,active:c}),d=()=>{n.disabled||(i.handleMenuItemClick({index:n.index,indexPath:o.value,route:n.route}),e("click",u))};return Ht(()=>{l.addSubMenu(u),i.addMenuItem(u)}),Un(()=>{l.removeSubMenu(u),i.removeMenuItem(u)}),{parentMenu:a,rootMenu:i,active:c,nsMenu:r,nsMenuItem:s,handleClick:d}}});function Ibe(n,e,t,i,r,s){const a=yt("el-tooltip");return F(),ie("li",{class:$([n.nsMenuItem.b(),n.nsMenuItem.is("active",n.active),n.nsMenuItem.is("disabled",n.disabled)]),role:"menuitem",tabindex:"-1",onClick:n.handleClick},[n.parentMenu.type.name==="ElMenu"&&n.rootMenu.props.collapse&&n.$slots.title?(F(),He(a,{key:0,effect:n.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:ge(()=>[Ne(n.$slots,"title")]),default:ge(()=>[le("div",{class:$(n.nsMenu.be("tooltip","trigger"))},[Ne(n.$slots,"default")],2)]),_:3},8,["effect"])):(F(),ie(bt,{key:1},[Ne(n.$slots,"default"),Ne(n.$slots,"title")],64))],10,["onClick"])}var U9=ot(Ebe,[["render",Ibe],["__file","menu-item.vue"]]);const Rbe={title:String},Pbe="ElMenuItemGroup",Dbe=ve({name:Pbe,props:Rbe,setup(){return{ns:Ze("menu-item-group")}}});function Lbe(n,e,t,i,r,s){return F(),ie("li",{class:$(n.ns.b())},[le("div",{class:$(n.ns.e("title"))},[n.$slots.title?Ne(n.$slots,"title",{key:1}):(F(),ie(bt,{key:0},[Xt(rt(n.title),1)],64))],2),le("ul",null,[Ne(n.$slots,"default")])],2)}var H9=ot(Dbe,[["render",Lbe],["__file","menu-item-group.vue"]]);const kbe=Ft(Mbe,{MenuItem:U9,MenuItemGroup:H9,SubMenu:l3}),Obe=ki(U9),Nbe=ki(H9),Bbe=ki(l3),Fbe=at({icon:{type:Zn,default:()=>Ule},title:String,content:{type:String,default:""}}),zbe={back:()=>!0},Ube=ve({name:"ElPageHeader"}),Hbe=ve({...Ube,props:Fbe,emits:zbe,setup(n,{emit:e}){const t=ur(),{t:i}=xn(),r=Ze("page-header"),s=N(()=>[r.b(),{[r.m("has-breadcrumb")]:!!t.breadcrumb,[r.m("has-extra")]:!!t.extra,[r.is("contentful")]:!!t.default}]);function a(){e("back")}return(o,l)=>(F(),ie("div",{class:$(b(s))},[o.$slots.breadcrumb?(F(),ie("div",{key:0,class:$(b(r).e("breadcrumb"))},[Ne(o.$slots,"breadcrumb")],2)):Be("v-if",!0),le("div",{class:$(b(r).e("header"))},[le("div",{class:$(b(r).e("left"))},[le("div",{class:$(b(r).e("back")),role:"button",tabindex:"0",onClick:a},[o.icon||o.$slots.icon?(F(),ie("div",{key:0,"aria-label":o.title||b(i)("el.pageHeader.title"),class:$(b(r).e("icon"))},[Ne(o.$slots,"icon",{},()=>[o.icon?(F(),He(b(_t),{key:0},{default:ge(()=>[(F(),He(en(o.icon)))]),_:1})):Be("v-if",!0)])],10,["aria-label"])):Be("v-if",!0),le("div",{class:$(b(r).e("title"))},[Ne(o.$slots,"title",{},()=>[Xt(rt(o.title||b(i)("el.pageHeader.title")),1)])],2)],2),oe(b(C9),{direction:"vertical"}),le("div",{class:$(b(r).e("content"))},[Ne(o.$slots,"content",{},()=>[Xt(rt(o.content),1)])],2)],2),o.$slots.extra?(F(),ie("div",{key:0,class:$(b(r).e("extra"))},[Ne(o.$slots,"extra")],2)):Be("v-if",!0)],2),o.$slots.default?(F(),ie("div",{key:1,class:$(b(r).e("main"))},[Ne(o.$slots,"default")],2)):Be("v-if",!0)],2))}});var Vbe=ot(Hbe,[["__file","page-header.vue"]]);const $be=Ft(Vbe),V9=Symbol("elPaginationKey"),Gbe=at({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:Zn}}),Wbe={click:n=>n instanceof MouseEvent},Kbe=ve({name:"ElPaginationPrev"}),qbe=ve({...Kbe,props:Gbe,emits:Wbe,setup(n){const e=n,{t}=xn(),i=N(()=>e.disabled||e.currentPage<=1);return(r,s)=>(F(),ie("button",{type:"button",class:"btn-prev",disabled:b(i),"aria-label":r.prevText||b(t)("el.pagination.prev"),"aria-disabled":b(i),onClick:a=>r.$emit("click",a)},[r.prevText?(F(),ie("span",{key:0},rt(r.prevText),1)):(F(),He(b(_t),{key:1},{default:ge(()=>[(F(),He(en(r.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var Xbe=ot(qbe,[["__file","prev.vue"]]);const Ybe=at({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:Zn}}),jbe=ve({name:"ElPaginationNext"}),Qbe=ve({...jbe,props:Ybe,emits:["click"],setup(n){const e=n,{t}=xn(),i=N(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0);return(r,s)=>(F(),ie("button",{type:"button",class:"btn-next",disabled:b(i),"aria-label":r.nextText||b(t)("el.pagination.next"),"aria-disabled":b(i),onClick:a=>r.$emit("click",a)},[r.nextText?(F(),ie("span",{key:0},rt(r.nextText),1)):(F(),He(b(_t),{key:1},{default:ge(()=>[(F(),He(en(r.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var Zbe=ot(Qbe,[["__file","next.vue"]]);const $9=Symbol("ElSelectGroup"),yg=Symbol("ElSelect");function Jbe(n,e){const t=mt(yg),i=mt($9,{disabled:!1}),r=N(()=>u(As(t.props.modelValue),n.value)),s=N(()=>{var h;if(t.props.multiple){const p=As((h=t.props.modelValue)!=null?h:[]);return!r.value&&p.length>=t.props.multipleLimit&&t.props.multipleLimit>0}else return!1}),a=N(()=>n.label||(Yt(n.value)?"":n.value)),o=N(()=>n.value||n.label||""),l=N(()=>n.disabled||e.groupDisabled||s.value),c=jt(),u=(h=[],p)=>{if(Yt(n.value)){const m=t.props.valueKey;return h&&h.some(v=>Jn(Yi(v,m))===Yi(p,m))}else return h&&h.includes(p)},d=()=>{!n.disabled&&!i.disabled&&(t.states.hoveringIndex=t.optionsArray.indexOf(c.proxy))},f=h=>{const p=new RegExp(KL(h),"i");e.visible=p.test(a.value)||n.created};return We(()=>a.value,()=>{!n.created&&!t.props.remote&&t.setSelected()}),We(()=>n.value,(h,p)=>{const{remote:m,valueKey:v}=t.props;if(h!==p&&(t.onOptionDestroy(p,c.proxy),t.onOptionCreate(c.proxy)),!n.created&&!m){if(v&&Yt(h)&&Yt(p)&&h[v]===p[v])return;t.setSelected()}}),We(()=>i.disabled,()=>{e.groupDisabled=i.disabled},{immediate:!0}),{select:t,currentLabel:a,currentValue:o,itemSelected:r,isDisabled:l,hoverItem:d,updateOption:f}}const eSe=ve({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(n){const e=Ze("select"),t=Qr(),i=N(()=>[e.be("dropdown","item"),e.is("disabled",b(o)),e.is("selected",b(a)),e.is("hovering",b(f))]),r=Nn({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:s,itemSelected:a,isDisabled:o,select:l,hoverItem:c,updateOption:u}=Jbe(n,r),{visible:d,hover:f}=Mr(r),h=jt().proxy;l.onOptionCreate(h),Un(()=>{const m=h.value,{selected:v}=l.states,g=v.some(_=>_.value===h.value);Mt(()=>{l.states.cachedOptions.get(m)===h&&!g&&l.states.cachedOptions.delete(m)}),l.onOptionDestroy(m,h)});function p(){o.value||l.handleOptionSelect(h)}return{ns:e,id:t,containerKls:i,currentLabel:s,itemSelected:a,isDisabled:o,select:l,hoverItem:c,updateOption:u,visible:d,hover:f,selectOptionClick:p,states:r}}});function tSe(n,e,t,i,r,s){return Wt((F(),ie("li",{id:n.id,class:$(n.containerKls),role:"option","aria-disabled":n.isDisabled||void 0,"aria-selected":n.itemSelected,onMousemove:n.hoverItem,onClick:Pt(n.selectOptionClick,["stop"])},[Ne(n.$slots,"default",{},()=>[le("span",null,rt(n.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[Dn,n.visible]])}var c3=ot(eSe,[["render",tSe],["__file","option.vue"]]);const nSe=ve({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const n=mt(yg),e=Ze("select"),t=N(()=>n.props.popperClass),i=N(()=>n.props.multiple),r=N(()=>n.props.fitInputWidth),s=X("");function a(){var o;s.value=`${(o=n.selectRef)==null?void 0:o.offsetWidth}px`}return Ht(()=>{a(),Ti(n.selectRef,a)}),{ns:e,minWidth:s,popperClass:t,isMultiple:i,isFitInputWidth:r}}});function iSe(n,e,t,i,r,s){return F(),ie("div",{class:$([n.ns.b("dropdown"),n.ns.is("multiple",n.isMultiple),n.popperClass]),style:Ct({[n.isFitInputWidth?"width":"minWidth"]:n.minWidth})},[n.$slots.header?(F(),ie("div",{key:0,class:$(n.ns.be("dropdown","header"))},[Ne(n.$slots,"header")],2)):Be("v-if",!0),Ne(n.$slots,"default"),n.$slots.footer?(F(),ie("div",{key:1,class:$(n.ns.be("dropdown","footer"))},[Ne(n.$slots,"footer")],2)):Be("v-if",!0)],6)}var rSe=ot(nSe,[["render",iSe],["__file","select-dropdown.vue"]]);const sSe=11,aSe=(n,e)=>{const{t}=xn(),i=Qr(),r=Ze("select"),s=Ze("input"),a=Nn({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),o=X(null),l=X(null),c=X(null),u=X(null),d=X(null),f=X(null),h=X(null),p=X(null),m=X(null),v=X(null),g=X(null),_=X(null),{isComposing:y,handleCompositionStart:S,handleCompositionUpdate:w,handleCompositionEnd:x}=cb({afterComposition:Ue=>he(Ue)}),{wrapperRef:T,isFocused:C,handleBlur:M}=ef(d,{beforeFocus(){return B.value},afterFocus(){n.automaticDropdown&&!A.value&&(A.value=!0,a.menuVisibleOnFocus=!0)},beforeBlur(Ue){var pt,Lt;return((pt=c.value)==null?void 0:pt.isFocusInsideContent(Ue))||((Lt=u.value)==null?void 0:Lt.isFocusInsideContent(Ue))},afterBlur(){A.value=!1,a.menuVisibleOnFocus=!1}}),A=X(!1),E=X(),{form:I,formItem:P}=fs(),{inputId:D}=Fo(n,{formItemContext:P}),{valueOnClear:L,isEmptyValue:R}=sM(n),B=N(()=>n.disabled||(I==null?void 0:I.disabled)),k=N(()=>nt(n.modelValue)?n.modelValue.length>0:!R(n.modelValue)),O=N(()=>{var Ue;return(Ue=I==null?void 0:I.statusIcon)!=null?Ue:!1}),U=N(()=>n.clearable&&!B.value&&a.inputHovering&&k.value),G=N(()=>n.remote&&n.filterable&&!n.remoteShowSuffix?"":n.suffixIcon),q=N(()=>r.is("reverse",G.value&&A.value)),W=N(()=>(P==null?void 0:P.validateState)||""),Y=N(()=>cM[W.value]),J=N(()=>n.remote?300:0),Z=N(()=>n.loading?n.loadingText||t("el.select.loading"):n.remote&&!a.inputValue&&a.options.size===0?!1:n.filterable&&a.inputValue&&a.options.size>0&&ee.value===0?n.noMatchText||t("el.select.noMatch"):a.options.size===0?n.noDataText||t("el.select.noData"):null),ee=N(()=>me.value.filter(Ue=>Ue.visible).length),me=N(()=>{const Ue=Array.from(a.options.values()),pt=[];return a.optionValues.forEach(Lt=>{const tn=Ue.findIndex(ln=>ln.value===Lt);tn>-1&&pt.push(Ue[tn])}),pt.length>=Ue.length?pt:Ue}),ye=N(()=>Array.from(a.cachedOptions.values())),Te=N(()=>{const Ue=me.value.filter(pt=>!pt.created).some(pt=>pt.currentLabel===a.inputValue);return n.filterable&&n.allowCreate&&a.inputValue!==""&&!Ue}),Ee=()=>{n.filterable&&Tt(n.filterMethod)||n.filterable&&n.remote&&Tt(n.remoteMethod)||me.value.forEach(Ue=>{var pt;(pt=Ue.updateOption)==null||pt.call(Ue,a.inputValue)})},H=tr(),Q=N(()=>["small"].includes(H.value)?"small":"default"),j=N({get(){return A.value&&Z.value!==!1},set(Ue){A.value=Ue}}),Pe=N(()=>{if(n.multiple&&!Wn(n.modelValue))return As(n.modelValue).length===0&&!a.inputValue;const Ue=nt(n.modelValue)?n.modelValue[0]:n.modelValue;return n.filterable||Wn(Ue)?!a.inputValue:!0}),we=N(()=>{var Ue;const pt=(Ue=n.placeholder)!=null?Ue:t("el.select.placeholder");return n.multiple||!k.value?pt:a.selectedLabel}),De=N(()=>eI?null:"mouseenter");We(()=>n.modelValue,(Ue,pt)=>{n.multiple&&n.filterable&&!n.reserveKeyword&&(a.inputValue="",Me("")),Fe(),!jr(Ue,pt)&&n.validateEvent&&(P==null||P.validate("change").catch(Lt=>void 0))},{flush:"post",deep:!0}),We(()=>A.value,Ue=>{Ue?Me(a.inputValue):(a.inputValue="",a.previousQuery=null,a.isBeforeHide=!0),e("visible-change",Ue)}),We(()=>a.options.entries(),()=>{wn&&(Fe(),n.defaultFirstOption&&(n.filterable||n.remote)&&ee.value&&Ae())},{flush:"post"}),We(()=>a.hoveringIndex,Ue=>{At(Ue)&&Ue>-1?E.value=me.value[Ue]||{}:E.value={},me.value.forEach(pt=>{pt.hover=E.value===pt})}),zr(()=>{a.isBeforeHide||Ee()});const Me=Ue=>{a.previousQuery===Ue||y.value||(a.previousQuery=Ue,n.filterable&&Tt(n.filterMethod)?n.filterMethod(Ue):n.filterable&&n.remote&&Tt(n.remoteMethod)&&n.remoteMethod(Ue),n.defaultFirstOption&&(n.filterable||n.remote)&&ee.value?Mt(Ae):Mt(z))},Ae=()=>{const Ue=me.value.filter(ln=>ln.visible&&!ln.disabled&&!ln.states.groupDisabled),pt=Ue.find(ln=>ln.created),Lt=Ue[0],tn=me.value.map(ln=>ln.value);a.hoveringIndex=de(tn,pt||Lt)},Fe=()=>{if(n.multiple)a.selectedLabel="";else{const pt=nt(n.modelValue)?n.modelValue[0]:n.modelValue,Lt=ne(pt);a.selectedLabel=Lt.currentLabel,a.selected=[Lt];return}const Ue=[];Wn(n.modelValue)||As(n.modelValue).forEach(pt=>{Ue.push(ne(pt))}),a.selected=Ue},ne=Ue=>{let pt;const Lt=zy(Ue);for(let Fn=a.cachedOptions.size-1;Fn>=0;Fn--){const An=ye.value[Fn];if(Lt?Yi(An.value,n.valueKey)===Yi(Ue,n.valueKey):An.value===Ue){pt={value:Ue,currentLabel:An.currentLabel,get isDisabled(){return An.isDisabled}};break}}if(pt)return pt;const tn=Lt?Ue.label:Ue??"";return{value:Ue,currentLabel:tn}},z=()=>{a.hoveringIndex=me.value.findIndex(Ue=>a.selected.some(pt=>pi(pt)===pi(Ue)))},K=()=>{a.selectionWidth=l.value.getBoundingClientRect().width},ae=()=>{a.calculatorWidth=f.value.getBoundingClientRect().width},xe=()=>{a.collapseItemWidth=g.value.getBoundingClientRect().width},Le=()=>{var Ue,pt;(pt=(Ue=c.value)==null?void 0:Ue.updatePopper)==null||pt.call(Ue)},Xe=()=>{var Ue,pt;(pt=(Ue=u.value)==null?void 0:Ue.updatePopper)==null||pt.call(Ue)},je=()=>{a.inputValue.length>0&&!A.value&&(A.value=!0),Me(a.inputValue)},he=Ue=>{if(a.inputValue=Ue.target.value,n.remote)Ye();else return je()},Ye=wa(()=>{je()},J.value),Ke=Ue=>{jr(n.modelValue,Ue)||e(jn,Ue)},V=Ue=>mG(Ue,pt=>{const Lt=a.cachedOptions.get(pt);return Lt&&!Lt.disabled&&!Lt.states.groupDisabled}),re=Ue=>{if(n.multiple&&Ue.code!==ut.delete&&Ue.target.value.length<=0){const pt=As(n.modelValue).slice(),Lt=V(pt);if(Lt<0)return;const tn=pt[Lt];pt.splice(Lt,1),e(Kt,pt),Ke(pt),e("remove-tag",tn)}},te=(Ue,pt)=>{const Lt=a.selected.indexOf(pt);if(Lt>-1&&!B.value){const tn=As(n.modelValue).slice();tn.splice(Lt,1),e(Kt,tn),Ke(tn),e("remove-tag",pt.value)}Ue.stopPropagation(),ht()},pe=Ue=>{Ue.stopPropagation();const pt=n.multiple?[]:L.value;if(n.multiple)for(const Lt of a.selected)Lt.isDisabled&&pt.push(Lt.value);e(Kt,pt),Ke(pt),a.hoveringIndex=-1,A.value=!1,e("clear"),ht()},se=Ue=>{var pt;if(n.multiple){const Lt=As((pt=n.modelValue)!=null?pt:[]).slice(),tn=de(Lt,Ue);tn>-1?Lt.splice(tn,1):(n.multipleLimit<=0||Lt.length<n.multipleLimit)&&Lt.push(Ue.value),e(Kt,Lt),Ke(Lt),Ue.created&&Me(""),n.filterable&&!n.reserveKeyword&&(a.inputValue="")}else e(Kt,Ue.value),Ke(Ue.value),A.value=!1;ht(),!A.value&&Mt(()=>{qe(Ue)})},de=(Ue=[],pt)=>Wn(pt)?-1:Yt(pt.value)?Ue.findIndex(Lt=>jr(Yi(Lt,n.valueKey),pi(pt))):Ue.indexOf(pt.value),qe=Ue=>{var pt,Lt,tn,ln,Fn;const An=nt(Ue)?Ue[0]:Ue;let kn=null;if(An!=null&&An.value){const _e=me.value.filter(Qe=>Qe.value===An.value);_e.length>0&&(kn=_e[0].$el)}if(c.value&&kn){const _e=(ln=(tn=(Lt=(pt=c.value)==null?void 0:pt.popperRef)==null?void 0:Lt.contentRef)==null?void 0:tn.querySelector)==null?void 0:ln.call(tn,`.${r.be("dropdown","wrap")}`);_e&&SL(_e,kn)}(Fn=_.value)==null||Fn.handleScroll()},fe=Ue=>{a.options.set(Ue.value,Ue),a.cachedOptions.set(Ue.value,Ue)},Je=(Ue,pt)=>{a.options.get(Ue)===pt&&a.options.delete(Ue)},$e=N(()=>{var Ue,pt;return(pt=(Ue=c.value)==null?void 0:Ue.popperRef)==null?void 0:pt.contentRef}),et=()=>{a.isBeforeHide=!1,Mt(()=>qe(a.selected))},ht=()=>{var Ue;(Ue=d.value)==null||Ue.focus()},st=()=>{var Ue;if(A.value){A.value=!1,Mt(()=>{var pt;return(pt=d.value)==null?void 0:pt.blur()});return}(Ue=d.value)==null||Ue.blur()},Rt=Ue=>{pe(Ue)},Vt=Ue=>{if(A.value=!1,C.value){const pt=new FocusEvent("focus",Ue);Mt(()=>M(pt))}},Pn=()=>{a.inputValue.length>0?a.inputValue="":A.value=!1},Jt=()=>{B.value||(eI&&(a.inputHovering=!0),a.menuVisibleOnFocus?a.menuVisibleOnFocus=!1:A.value=!A.value)},Ai=()=>{if(!A.value)Jt();else{const Ue=me.value[a.hoveringIndex];Ue&&!Ue.isDisabled&&se(Ue)}},pi=Ue=>Yt(Ue.value)?Yi(Ue.value,n.valueKey):Ue.value,Xa=N(()=>me.value.filter(Ue=>Ue.visible).every(Ue=>Ue.isDisabled)),_l=N(()=>n.multiple?n.collapseTags?a.selected.slice(0,n.maxCollapseTags):a.selected:[]),Gr=N(()=>n.multiple?n.collapseTags?a.selected.slice(n.maxCollapseTags):[]:[]),Ya=Ue=>{if(!A.value){A.value=!0;return}if(!(a.options.size===0||ee.value===0||y.value)&&!Xa.value){Ue==="next"?(a.hoveringIndex++,a.hoveringIndex===a.options.size&&(a.hoveringIndex=0)):Ue==="prev"&&(a.hoveringIndex--,a.hoveringIndex<0&&(a.hoveringIndex=a.options.size-1));const pt=me.value[a.hoveringIndex];(pt.isDisabled||!pt.visible)&&Ya(Ue),Mt(()=>qe(E.value))}},Oe=()=>{if(!l.value)return 0;const Ue=window.getComputedStyle(l.value);return Number.parseFloat(Ue.gap||"6px")},lt=N(()=>{const Ue=Oe();return{maxWidth:`${g.value&&n.maxCollapseTags===1?a.selectionWidth-a.collapseItemWidth-Ue:a.selectionWidth}px`}}),dt=N(()=>({maxWidth:`${a.selectionWidth}px`})),ct=N(()=>({width:`${Math.max(a.calculatorWidth,sSe)}px`}));return Ti(l,K),Ti(f,ae),Ti(m,Le),Ti(T,Le),Ti(v,Xe),Ti(g,xe),Ht(()=>{Fe()}),{inputId:D,contentId:i,nsSelect:r,nsInput:s,states:a,isFocused:C,expanded:A,optionsArray:me,hoverOption:E,selectSize:H,filteredOptionsCount:ee,resetCalculatorWidth:ae,updateTooltip:Le,updateTagTooltip:Xe,debouncedOnInputChange:Ye,onInput:he,deletePrevTag:re,deleteTag:te,deleteSelected:pe,handleOptionSelect:se,scrollToOption:qe,hasModelValue:k,shouldShowPlaceholder:Pe,currentPlaceholder:we,mouseEnterEventName:De,needStatusIcon:O,showClose:U,iconComponent:G,iconReverse:q,validateState:W,validateIcon:Y,showNewOption:Te,updateOptions:Ee,collapseTagSize:Q,setSelected:Fe,selectDisabled:B,emptyText:Z,handleCompositionStart:S,handleCompositionUpdate:w,handleCompositionEnd:x,onOptionCreate:fe,onOptionDestroy:Je,handleMenuEnter:et,focus:ht,blur:st,handleClearClick:Rt,handleClickOutside:Vt,handleEsc:Pn,toggleMenu:Jt,selectOption:Ai,getValueKey:pi,navigateOptions:Ya,dropdownMenuVisible:j,showTagList:_l,collapseTagList:Gr,tagStyle:lt,collapseTagStyle:dt,inputStyle:ct,popperRef:$e,inputRef:d,tooltipRef:c,tagTooltipRef:u,calculatorRef:f,prefixRef:h,suffixRef:p,selectRef:o,wrapperRef:T,selectionRef:l,scrollbarRef:_,menuRef:m,tagMenuRef:v,collapseItemRef:g}};var oSe=ve({name:"ElOptions",setup(n,{slots:e}){const t=mt(yg);let i=[];return()=>{var r,s;const a=(r=e.default)==null?void 0:r.call(e),o=[];function l(c){nt(c)&&c.forEach(u=>{var d,f,h,p;const m=(d=(u==null?void 0:u.type)||{})==null?void 0:d.name;m==="ElOptionGroup"?l(!xt(u.children)&&!nt(u.children)&&Tt((f=u.children)==null?void 0:f.default)?(h=u.children)==null?void 0:h.default():u.children):m==="ElOption"?o.push((p=u.props)==null?void 0:p.value):nt(u.children)&&l(u.children)})}return a.length&&l((s=a[0])==null?void 0:s.children),jr(o,i)||(i=o,t&&(t.states.optionValues=o)),a}}});const lSe=at({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:cr,effect:{type:Re(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Re(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:Rr.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:Zn,default:fu},fitInputWidth:Boolean,suffixIcon:{type:Zn,default:du},tagType:{...Jc.type,default:"info"},tagEffect:{...Jc.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:Re(String),values:hu,default:"bottom-start"},fallbackPlacements:{type:Re(Array),default:["bottom-start","top-start","right","left"]},tabindex:{type:[String,Number],default:0},appendTo:String,...pg,...Zr(["ariaLabel"])}),kF="ElSelect",cSe=ve({name:kF,componentName:kF,components:{ElSelectMenu:rSe,ElOption:c3,ElOptions:oSe,ElTag:Iv,ElScrollbar:ic,ElTooltip:us,ElIcon:_t},directives:{ClickOutside:eu},props:lSe,emits:[Kt,jn,"remove-tag","clear","visible-change","focus","blur"],setup(n,{emit:e}){const t=N(()=>{const{modelValue:a,multiple:o}=n,l=o?[]:void 0;return nt(a)?o?a:l:o?l:a}),i=Nn({...Mr(n),modelValue:t}),r=aSe(i,e);un(yg,Nn({props:i,states:r.states,optionsArray:r.optionsArray,handleOptionSelect:r.handleOptionSelect,onOptionCreate:r.onOptionCreate,onOptionDestroy:r.onOptionDestroy,selectRef:r.selectRef,setSelected:r.setSelected}));const s=N(()=>n.multiple?r.states.selected.map(a=>a.currentLabel):r.states.selectedLabel);return{...r,modelValue:t,selectedLabel:s}}});function uSe(n,e,t,i,r,s){const a=yt("el-tag"),o=yt("el-tooltip"),l=yt("el-icon"),c=yt("el-option"),u=yt("el-options"),d=yt("el-scrollbar"),f=yt("el-select-menu"),h=qC("click-outside");return Wt((F(),ie("div",{ref:"selectRef",class:$([n.nsSelect.b(),n.nsSelect.m(n.selectSize)]),[Y0(n.mouseEnterEventName)]:p=>n.states.inputHovering=!0,onMouseleave:p=>n.states.inputHovering=!1},[oe(o,{ref:"tooltipRef",visible:n.dropdownMenuVisible,placement:n.placement,teleported:n.teleported,"popper-class":[n.nsSelect.e("popper"),n.popperClass],"popper-options":n.popperOptions,"fallback-placements":n.fallbackPlacements,effect:n.effect,pure:"",trigger:"click",transition:`${n.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:n.persistent,"append-to":n.appendTo,"show-arrow":n.showArrow,offset:n.offset,onBeforeShow:n.handleMenuEnter,onHide:p=>n.states.isBeforeHide=!1},{default:ge(()=>{var p;return[le("div",{ref:"wrapperRef",class:$([n.nsSelect.e("wrapper"),n.nsSelect.is("focused",n.isFocused),n.nsSelect.is("hovering",n.states.inputHovering),n.nsSelect.is("filterable",n.filterable),n.nsSelect.is("disabled",n.selectDisabled)]),onClick:Pt(n.toggleMenu,["prevent"])},[n.$slots.prefix?(F(),ie("div",{key:0,ref:"prefixRef",class:$(n.nsSelect.e("prefix"))},[Ne(n.$slots,"prefix")],2)):Be("v-if",!0),le("div",{ref:"selectionRef",class:$([n.nsSelect.e("selection"),n.nsSelect.is("near",n.multiple&&!n.$slots.prefix&&!!n.states.selected.length)])},[n.multiple?Ne(n.$slots,"tag",{key:0},()=>[(F(!0),ie(bt,null,sn(n.showTagList,m=>(F(),ie("div",{key:n.getValueKey(m),class:$(n.nsSelect.e("selected-item"))},[oe(a,{closable:!n.selectDisabled&&!m.isDisabled,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:Ct(n.tagStyle),onClose:v=>n.deleteTag(v,m)},{default:ge(()=>[le("span",{class:$(n.nsSelect.e("tags-text"))},[Ne(n.$slots,"label",{label:m.currentLabel,value:m.value},()=>[Xt(rt(m.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),n.collapseTags&&n.states.selected.length>n.maxCollapseTags?(F(),He(o,{key:0,ref:"tagTooltipRef",disabled:n.dropdownMenuVisible||!n.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:n.effect,placement:"bottom",teleported:n.teleported},{default:ge(()=>[le("div",{ref:"collapseItemRef",class:$(n.nsSelect.e("selected-item"))},[oe(a,{closable:!1,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:Ct(n.collapseTagStyle)},{default:ge(()=>[le("span",{class:$(n.nsSelect.e("tags-text"))}," + "+rt(n.states.selected.length-n.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:ge(()=>[le("div",{ref:"tagMenuRef",class:$(n.nsSelect.e("selection"))},[(F(!0),ie(bt,null,sn(n.collapseTagList,m=>(F(),ie("div",{key:n.getValueKey(m),class:$(n.nsSelect.e("selected-item"))},[oe(a,{class:"in-tooltip",closable:!n.selectDisabled&&!m.isDisabled,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",onClose:v=>n.deleteTag(v,m)},{default:ge(()=>[le("span",{class:$(n.nsSelect.e("tags-text"))},[Ne(n.$slots,"label",{label:m.currentLabel,value:m.value},()=>[Xt(rt(m.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):Be("v-if",!0)]):Be("v-if",!0),le("div",{class:$([n.nsSelect.e("selected-item"),n.nsSelect.e("input-wrapper"),n.nsSelect.is("hidden",!n.filterable)])},[Wt(le("input",{id:n.inputId,ref:"inputRef","onUpdate:modelValue":m=>n.states.inputValue=m,type:"text",name:n.name,class:$([n.nsSelect.e("input"),n.nsSelect.is(n.selectSize)]),disabled:n.selectDisabled,autocomplete:n.autocomplete,style:Ct(n.inputStyle),tabindex:n.tabindex,role:"combobox",readonly:!n.filterable,spellcheck:"false","aria-activedescendant":((p=n.hoverOption)==null?void 0:p.id)||"","aria-controls":n.contentId,"aria-expanded":n.dropdownMenuVisible,"aria-label":n.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[ri(Pt(m=>n.navigateOptions("next"),["stop","prevent"]),["down"]),ri(Pt(m=>n.navigateOptions("prev"),["stop","prevent"]),["up"]),ri(Pt(n.handleEsc,["stop","prevent"]),["esc"]),ri(Pt(n.selectOption,["stop","prevent"]),["enter"]),ri(Pt(n.deletePrevTag,["stop"]),["delete"])],onCompositionstart:n.handleCompositionStart,onCompositionupdate:n.handleCompositionUpdate,onCompositionend:n.handleCompositionEnd,onInput:n.onInput,onClick:Pt(n.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","tabindex","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[jC,n.states.inputValue]]),n.filterable?(F(),ie("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:$(n.nsSelect.e("input-calculator")),textContent:rt(n.states.inputValue)},null,10,["textContent"])):Be("v-if",!0)],2),n.shouldShowPlaceholder?(F(),ie("div",{key:1,class:$([n.nsSelect.e("selected-item"),n.nsSelect.e("placeholder"),n.nsSelect.is("transparent",!n.hasModelValue||n.expanded&&!n.states.inputValue)])},[n.hasModelValue?Ne(n.$slots,"label",{key:0,label:n.currentPlaceholder,value:n.modelValue},()=>[le("span",null,rt(n.currentPlaceholder),1)]):(F(),ie("span",{key:1},rt(n.currentPlaceholder),1))],2)):Be("v-if",!0)],2),le("div",{ref:"suffixRef",class:$(n.nsSelect.e("suffix"))},[n.iconComponent&&!n.showClose?(F(),He(l,{key:0,class:$([n.nsSelect.e("caret"),n.nsSelect.e("icon"),n.iconReverse])},{default:ge(()=>[(F(),He(en(n.iconComponent)))]),_:1},8,["class"])):Be("v-if",!0),n.showClose&&n.clearIcon?(F(),He(l,{key:1,class:$([n.nsSelect.e("caret"),n.nsSelect.e("icon"),n.nsSelect.e("clear")]),onClick:n.handleClearClick},{default:ge(()=>[(F(),He(en(n.clearIcon)))]),_:1},8,["class","onClick"])):Be("v-if",!0),n.validateState&&n.validateIcon&&n.needStatusIcon?(F(),He(l,{key:2,class:$([n.nsInput.e("icon"),n.nsInput.e("validateIcon")])},{default:ge(()=>[(F(),He(en(n.validateIcon)))]),_:1},8,["class"])):Be("v-if",!0)],2)],10,["onClick"])]}),content:ge(()=>[oe(f,{ref:"menuRef"},{default:ge(()=>[n.$slots.header?(F(),ie("div",{key:0,class:$(n.nsSelect.be("dropdown","header")),onClick:Pt(()=>{},["stop"])},[Ne(n.$slots,"header")],10,["onClick"])):Be("v-if",!0),Wt(oe(d,{id:n.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":n.nsSelect.be("dropdown","wrap"),"view-class":n.nsSelect.be("dropdown","list"),class:$([n.nsSelect.is("empty",n.filteredOptionsCount===0)]),role:"listbox","aria-label":n.ariaLabel,"aria-orientation":"vertical"},{default:ge(()=>[n.showNewOption?(F(),He(c,{key:0,value:n.states.inputValue,created:!0},null,8,["value"])):Be("v-if",!0),oe(u,null,{default:ge(()=>[Ne(n.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[Dn,n.states.options.size>0&&!n.loading]]),n.$slots.loading&&n.loading?(F(),ie("div",{key:1,class:$(n.nsSelect.be("dropdown","loading"))},[Ne(n.$slots,"loading")],2)):n.loading||n.filteredOptionsCount===0?(F(),ie("div",{key:2,class:$(n.nsSelect.be("dropdown","empty"))},[Ne(n.$slots,"empty",{},()=>[le("span",null,rt(n.emptyText),1)])],2)):Be("v-if",!0),n.$slots.footer?(F(),ie("div",{key:3,class:$(n.nsSelect.be("dropdown","footer")),onClick:Pt(()=>{},["stop"])},[Ne(n.$slots,"footer")],10,["onClick"])):Be("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[h,n.handleClickOutside,n.popperRef]])}var dSe=ot(cSe,[["render",uSe],["__file","select.vue"]]);const fSe=ve({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(n){const e=Ze("select"),t=X(null),i=jt(),r=X([]);un($9,Nn({...Mr(n)}));const s=N(()=>r.value.some(c=>c.visible===!0)),a=c=>{var u,d;return((u=c.type)==null?void 0:u.name)==="ElOption"&&!!((d=c.component)!=null&&d.proxy)},o=c=>{const u=As(c),d=[];return u.forEach(f=>{var h,p;a(f)?d.push(f.component.proxy):(h=f.children)!=null&&h.length?d.push(...o(f.children)):(p=f.component)!=null&&p.subTree&&d.push(...o(f.component.subTree))}),d},l=()=>{r.value=o(i.subTree)};return Ht(()=>{l()}),wG(t,l,{attributes:!0,subtree:!0,childList:!0}),{groupRef:t,visible:s,ns:e}}});function hSe(n,e,t,i,r,s){return Wt((F(),ie("ul",{ref:"groupRef",class:$(n.ns.be("group","wrap"))},[le("li",{class:$(n.ns.be("group","title"))},rt(n.label),3),le("li",null,[le("ul",{class:$(n.ns.b("group"))},[Ne(n.$slots,"default")],2)])],2)),[[Dn,n.visible]])}var G9=ot(fSe,[["render",hSe],["__file","option-group.vue"]]);const zh=Ft(dSe,{Option:c3,OptionGroup:G9}),vx=ki(c3),pSe=ki(G9),u3=()=>mt(V9,{}),mSe=at({pageSize:{type:Number,required:!0},pageSizes:{type:Re(Array),default:()=>Li([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:nc},appendSizeTo:String}),vSe=ve({name:"ElPaginationSizes"}),gSe=ve({...vSe,props:mSe,emits:["page-size-change"],setup(n,{emit:e}){const t=n,{t:i}=xn(),r=Ze("pagination"),s=u3(),a=X(t.pageSize);We(()=>t.pageSizes,(c,u)=>{if(!jr(c,u)&&nt(c)){const d=c.includes(t.pageSize)?t.pageSize:t.pageSizes[0];e("page-size-change",d)}}),We(()=>t.pageSize,c=>{a.value=c});const o=N(()=>t.pageSizes);function l(c){var u;c!==a.value&&(a.value=c,(u=s.handleSizeChange)==null||u.call(s,Number(c)))}return(c,u)=>(F(),ie("span",{class:$(b(r).e("sizes"))},[oe(b(zh),{"model-value":a.value,disabled:c.disabled,"popper-class":c.popperClass,size:c.size,teleported:c.teleported,"validate-event":!1,"append-to":c.appendSizeTo,onChange:l},{default:ge(()=>[(F(!0),ie(bt,null,sn(b(o),d=>(F(),He(b(vx),{key:d,value:d,label:d+b(i)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported","append-to"])],2))}});var ySe=ot(gSe,[["__file","sizes.vue"]]);const _Se=at({size:{type:String,values:nc}}),bSe=ve({name:"ElPaginationJumper"}),SSe=ve({...bSe,props:_Se,setup(n){const{t:e}=xn(),t=Ze("pagination"),{pageCount:i,disabled:r,currentPage:s,changeEvent:a}=u3(),o=X(),l=N(()=>{var d;return(d=o.value)!=null?d:s==null?void 0:s.value});function c(d){o.value=d?+d:""}function u(d){d=Math.trunc(+d),a==null||a(d),o.value=void 0}return(d,f)=>(F(),ie("span",{class:$(b(t).e("jump")),disabled:b(r)},[le("span",{class:$([b(t).e("goto")])},rt(b(e)("el.pagination.goto")),3),oe(b(Rs),{size:d.size,class:$([b(t).e("editor"),b(t).is("in-pagination")]),min:1,max:b(i),disabled:b(r),"model-value":b(l),"validate-event":!1,"aria-label":b(e)("el.pagination.page"),type:"number","onUpdate:modelValue":c,onChange:u},null,8,["size","class","max","disabled","model-value","aria-label"]),le("span",{class:$([b(t).e("classifier")])},rt(b(e)("el.pagination.pageClassifier")),3)],10,["disabled"]))}});var wSe=ot(SSe,[["__file","jumper.vue"]]);const xSe=at({total:{type:Number,default:1e3}}),CSe=ve({name:"ElPaginationTotal"}),MSe=ve({...CSe,props:xSe,setup(n){const{t:e}=xn(),t=Ze("pagination"),{disabled:i}=u3();return(r,s)=>(F(),ie("span",{class:$(b(t).e("total")),disabled:b(i)},rt(b(e)("el.pagination.total",{total:r.total})),11,["disabled"]))}});var TSe=ot(MSe,[["__file","total.vue"]]);const ASe=at({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),ESe=ve({name:"ElPaginationPager"}),ISe=ve({...ESe,props:ASe,emits:["change"],setup(n,{emit:e}){const t=n,i=Ze("pager"),r=Ze("icon"),{t:s}=xn(),a=X(!1),o=X(!1),l=X(!1),c=X(!1),u=X(!1),d=X(!1),f=N(()=>{const S=t.pagerCount,w=(S-1)/2,x=Number(t.currentPage),T=Number(t.pageCount);let C=!1,M=!1;T>S&&(x>S-w&&(C=!0),x<T-w&&(M=!0));const A=[];if(C&&!M){const E=T-(S-2);for(let I=E;I<T;I++)A.push(I)}else if(!C&&M)for(let E=2;E<S;E++)A.push(E);else if(C&&M){const E=Math.floor(S/2)-1;for(let I=x-E;I<=x+E;I++)A.push(I)}else for(let E=2;E<T;E++)A.push(E);return A}),h=N(()=>["more","btn-quickprev",r.b(),i.is("disabled",t.disabled)]),p=N(()=>["more","btn-quicknext",r.b(),i.is("disabled",t.disabled)]),m=N(()=>t.disabled?-1:0);zr(()=>{const S=(t.pagerCount-1)/2;a.value=!1,o.value=!1,t.pageCount>t.pagerCount&&(t.currentPage>t.pagerCount-S&&(a.value=!0),t.currentPage<t.pageCount-S&&(o.value=!0))});function v(S=!1){t.disabled||(S?l.value=!0:c.value=!0)}function g(S=!1){S?u.value=!0:d.value=!0}function _(S){const w=S.target;if(w.tagName.toLowerCase()==="li"&&Array.from(w.classList).includes("number")){const x=Number(w.textContent);x!==t.currentPage&&e("change",x)}else w.tagName.toLowerCase()==="li"&&Array.from(w.classList).includes("more")&&y(S)}function y(S){const w=S.target;if(w.tagName.toLowerCase()==="ul"||t.disabled)return;let x=Number(w.textContent);const T=t.pageCount,C=t.currentPage,M=t.pagerCount-2;w.className.includes("more")&&(w.className.includes("quickprev")?x=C-M:w.className.includes("quicknext")&&(x=C+M)),Number.isNaN(+x)||(x<1&&(x=1),x>T&&(x=T)),x!==C&&e("change",x)}return(S,w)=>(F(),ie("ul",{class:$(b(i).b()),onClick:y,onKeyup:ri(_,["enter"])},[S.pageCount>0?(F(),ie("li",{key:0,class:$([[b(i).is("active",S.currentPage===1),b(i).is("disabled",S.disabled)],"number"]),"aria-current":S.currentPage===1,"aria-label":b(s)("el.pagination.currentPage",{pager:1}),tabindex:b(m)}," 1 ",10,["aria-current","aria-label","tabindex"])):Be("v-if",!0),a.value?(F(),ie("li",{key:1,class:$(b(h)),tabindex:b(m),"aria-label":b(s)("el.pagination.prevPages",{pager:S.pagerCount-2}),onMouseenter:x=>v(!0),onMouseleave:x=>l.value=!1,onFocus:x=>g(!0),onBlur:x=>u.value=!1},[(l.value||u.value)&&!S.disabled?(F(),He(b(kd),{key:0})):(F(),He(b(LB),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):Be("v-if",!0),(F(!0),ie(bt,null,sn(b(f),x=>(F(),ie("li",{key:x,class:$([[b(i).is("active",S.currentPage===x),b(i).is("disabled",S.disabled)],"number"]),"aria-current":S.currentPage===x,"aria-label":b(s)("el.pagination.currentPage",{pager:x}),tabindex:b(m)},rt(x),11,["aria-current","aria-label","tabindex"]))),128)),o.value?(F(),ie("li",{key:2,class:$(b(p)),tabindex:b(m),"aria-label":b(s)("el.pagination.nextPages",{pager:S.pagerCount-2}),onMouseenter:x=>v(),onMouseleave:x=>c.value=!1,onFocus:x=>g(),onBlur:x=>d.value=!1},[(c.value||d.value)&&!S.disabled?(F(),He(b(Od),{key:0})):(F(),He(b(LB),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):Be("v-if",!0),S.pageCount>1?(F(),ie("li",{key:3,class:$([[b(i).is("active",S.currentPage===S.pageCount),b(i).is("disabled",S.disabled)],"number"]),"aria-current":S.currentPage===S.pageCount,"aria-label":b(s)("el.pagination.currentPage",{pager:S.pageCount}),tabindex:b(m)},rt(S.pageCount),11,["aria-current","aria-label","tabindex"])):Be("v-if",!0)],42,["onKeyup"]))}});var RSe=ot(ISe,[["__file","pager.vue"]]);const Fs=n=>typeof n!="number",PSe=at({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:n=>At(n)&&Math.trunc(n)===n&&n>4&&n<22&&n%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Re(Array),default:()=>Li([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:Zn,default:()=>Ld},nextText:{type:String,default:""},nextIcon:{type:Zn,default:()=>js},teleported:{type:Boolean,default:!0},small:Boolean,size:cr,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),DSe={"update:current-page":n=>At(n),"update:page-size":n=>At(n),"size-change":n=>At(n),change:(n,e)=>At(n)&&At(e),"current-change":n=>At(n),"prev-click":n=>At(n),"next-click":n=>At(n)},OF="ElPagination";var LSe=ve({name:OF,props:PSe,emits:DSe,setup(n,{emit:e,slots:t}){const{t:i}=xn(),r=Ze("pagination"),s=jt().vnode.props||{},a=IG(),o=N(()=>{var w;return n.small?"small":(w=n.size)!=null?w:a.value});md({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},N(()=>!!n.small));const l="onUpdate:currentPage"in s||"onUpdate:current-page"in s||"onCurrentChange"in s,c="onUpdate:pageSize"in s||"onUpdate:page-size"in s||"onSizeChange"in s,u=N(()=>{if(Fs(n.total)&&Fs(n.pageCount)||!Fs(n.currentPage)&&!l)return!1;if(n.layout.includes("sizes")){if(Fs(n.pageCount)){if(!Fs(n.total)&&!Fs(n.pageSize)&&!c)return!1}else if(!c)return!1}return!0}),d=X(Fs(n.defaultPageSize)?10:n.defaultPageSize),f=X(Fs(n.defaultCurrentPage)?1:n.defaultCurrentPage),h=N({get(){return Fs(n.pageSize)?d.value:n.pageSize},set(w){Fs(n.pageSize)&&(d.value=w),c&&(e("update:page-size",w),e("size-change",w))}}),p=N(()=>{let w=0;return Fs(n.pageCount)?Fs(n.total)||(w=Math.max(1,Math.ceil(n.total/h.value))):w=n.pageCount,w}),m=N({get(){return Fs(n.currentPage)?f.value:n.currentPage},set(w){let x=w;w<1?x=1:w>p.value&&(x=p.value),Fs(n.currentPage)&&(f.value=x),l&&(e("update:current-page",x),e("current-change",x))}});We(p,w=>{m.value>w&&(m.value=w)}),We([m,h],w=>{e("change",...w)},{flush:"post"});function v(w){m.value=w}function g(w){h.value=w;const x=p.value;m.value>x&&(m.value=x)}function _(){n.disabled||(m.value-=1,e("prev-click",m.value))}function y(){n.disabled||(m.value+=1,e("next-click",m.value))}function S(w,x){w&&(w.props||(w.props={}),w.props.class=[w.props.class,x].join(" "))}return un(V9,{pageCount:p,disabled:N(()=>n.disabled),currentPage:m,changeEvent:v,handleSizeChange:g}),()=>{var w,x;if(!u.value)return i("el.pagination.deprecationWarning"),null;if(!n.layout||n.hideOnSinglePage&&p.value<=1)return null;const T=[],C=[],M=wt("div",{class:r.e("rightwrapper")},C),A={prev:wt(Xbe,{disabled:n.disabled,currentPage:m.value,prevText:n.prevText,prevIcon:n.prevIcon,onClick:_}),jumper:wt(wSe,{size:o.value}),pager:wt(RSe,{currentPage:m.value,pageCount:p.value,pagerCount:n.pagerCount,onChange:v,disabled:n.disabled}),next:wt(Zbe,{disabled:n.disabled,currentPage:m.value,pageCount:p.value,nextText:n.nextText,nextIcon:n.nextIcon,onClick:y}),sizes:wt(ySe,{pageSize:h.value,pageSizes:n.pageSizes,popperClass:n.popperClass,disabled:n.disabled,teleported:n.teleported,size:o.value,appendSizeTo:n.appendSizeTo}),slot:(x=(w=t==null?void 0:t.default)==null?void 0:w.call(t))!=null?x:null,total:wt(TSe,{total:Fs(n.total)?0:n.total})},E=n.layout.split(",").map(P=>P.trim());let I=!1;return E.forEach(P=>{if(P==="->"){I=!0;return}I?C.push(A[P]):T.push(A[P])}),S(T[0],r.is("first")),S(T[T.length-1],r.is("last")),I&&C.length>0&&(S(C[0],r.is("first")),S(C[C.length-1],r.is("last")),T.push(M)),wt("div",{class:[r.b(),r.is("background",n.background),r.m(o.value)]},T)}}});const kSe=Ft(LSe),OSe=at({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:rI,default:"primary"},cancelButtonType:{type:String,values:rI,default:"text"},icon:{type:Zn,default:()=>Ece},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:Rr.teleported,persistent:Rr.persistent,width:{type:[String,Number],default:150}}),NSe={confirm:n=>n instanceof MouseEvent,cancel:n=>n instanceof MouseEvent},BSe=ve({name:"ElPopconfirm"}),FSe=ve({...BSe,props:OSe,emits:NSe,setup(n,{emit:e}){const t=n,{t:i}=xn(),r=Ze("popconfirm"),s=X(),a=()=>{var f,h;(h=(f=s.value)==null?void 0:f.onClose)==null||h.call(f)},o=N(()=>({width:Ui(t.width)})),l=f=>{e("confirm",f),a()},c=f=>{e("cancel",f),a()},u=N(()=>t.confirmButtonText||i("el.popconfirm.confirmButtonText")),d=N(()=>t.cancelButtonText||i("el.popconfirm.cancelButtonText"));return(f,h)=>(F(),He(b(us),rn({ref_key:"tooltipRef",ref:s,trigger:"click",effect:"light"},f.$attrs,{"popper-class":`${b(r).namespace.value}-popover`,"popper-style":b(o),teleported:f.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":f.hideAfter,persistent:f.persistent}),{content:ge(()=>[le("div",{class:$(b(r).b())},[le("div",{class:$(b(r).e("main"))},[!f.hideIcon&&f.icon?(F(),He(b(_t),{key:0,class:$(b(r).e("icon")),style:Ct({color:f.iconColor})},{default:ge(()=>[(F(),He(en(f.icon)))]),_:1},8,["class","style"])):Be("v-if",!0),Xt(" "+rt(f.title),1)],2),le("div",{class:$(b(r).e("action"))},[Ne(f.$slots,"actions",{confirm:l,cancel:c},()=>[oe(b(Ur),{size:"small",type:f.cancelButtonType==="text"?"":f.cancelButtonType,text:f.cancelButtonType==="text",onClick:c},{default:ge(()=>[Xt(rt(b(d)),1)]),_:1},8,["type","text"]),oe(b(Ur),{size:"small",type:f.confirmButtonType==="text"?"":f.confirmButtonType,text:f.confirmButtonType==="text",onClick:l},{default:ge(()=>[Xt(rt(b(u)),1)]),_:1},8,["type","text"])])],2)],2)]),default:ge(()=>[f.$slots.reference?Ne(f.$slots,"reference",{key:0}):Be("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var zSe=ot(FSe,[["__file","popconfirm.vue"]]);const USe=Ft(zSe),HSe=at({trigger:i_.trigger,placement:u1.placement,disabled:i_.disabled,visible:Rr.visible,transition:Rr.transition,popperOptions:u1.popperOptions,tabindex:u1.tabindex,content:Rr.content,popperStyle:Rr.popperStyle,popperClass:Rr.popperClass,enterable:{...Rr.enterable,default:!0},effect:{...Rr.effect,default:"light"},teleported:Rr.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),VSe={"update:visible":n=>ai(n),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},$Se="onUpdate:visible",GSe=ve({name:"ElPopover"}),WSe=ve({...GSe,props:HSe,emits:VSe,setup(n,{expose:e,emit:t}){const i=n,r=N(()=>i[$Se]),s=Ze("popover"),a=X(),o=N(()=>{var v;return(v=b(a))==null?void 0:v.popperRef}),l=N(()=>[{width:Ui(i.width)},i.popperStyle]),c=N(()=>[s.b(),i.popperClass,{[s.m("plain")]:!!i.content}]),u=N(()=>i.transition===`${s.namespace.value}-fade-in-linear`),d=()=>{var v;(v=a.value)==null||v.hide()},f=()=>{t("before-enter")},h=()=>{t("before-leave")},p=()=>{t("after-enter")},m=()=>{t("update:visible",!1),t("after-leave")};return e({popperRef:o,hide:d}),(v,g)=>(F(),He(b(us),rn({ref_key:"tooltipRef",ref:a},v.$attrs,{trigger:v.trigger,placement:v.placement,disabled:v.disabled,visible:v.visible,transition:v.transition,"popper-options":v.popperOptions,tabindex:v.tabindex,content:v.content,offset:v.offset,"show-after":v.showAfter,"hide-after":v.hideAfter,"auto-close":v.autoClose,"show-arrow":v.showArrow,"aria-label":v.title,effect:v.effect,enterable:v.enterable,"popper-class":b(c),"popper-style":b(l),teleported:v.teleported,persistent:v.persistent,"gpu-acceleration":b(u),"onUpdate:visible":b(r),onBeforeShow:f,onBeforeHide:h,onShow:p,onHide:m}),{content:ge(()=>[v.title?(F(),ie("div",{key:0,class:$(b(s).e("title")),role:"title"},rt(v.title),3)):Be("v-if",!0),Ne(v.$slots,"default",{},()=>[Xt(rt(v.content),1)])]),default:ge(()=>[v.$slots.reference?Ne(v.$slots,"reference",{key:0}):Be("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var KSe=ot(WSe,[["__file","popover.vue"]]);const NF=(n,e)=>{const t=e.arg||e.value,i=t==null?void 0:t.popperRef;i&&(i.triggerRef=n)};var qSe={mounted(n,e){NF(n,e)},updated(n,e){NF(n,e)}};const XSe="popover",W9=Ile(qSe,XSe),YSe=Ft(KSe,{directive:W9}),jSe=at({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:n=>n>=0&&n<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:Re(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:Re([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:Re(Function),default:n=>`${n}%`}}),QSe=ve({name:"ElProgress"}),ZSe=ve({...QSe,props:jSe,setup(n){const e=n,t={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},i=Ze("progress"),r=N(()=>{const y={width:`${e.percentage}%`,animationDuration:`${e.duration}s`},S=_(e.percentage);return S.includes("gradient")?y.background=S:y.backgroundColor=S,y}),s=N(()=>(e.strokeWidth/e.width*100).toFixed(1)),a=N(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(s.value)/2}`,10):0),o=N(()=>{const y=a.value,S=e.type==="dashboard";return`
          M 50 50
          m 0 ${S?"":"-"}${y}
          a ${y} ${y} 0 1 1 0 ${S?"-":""}${y*2}
          a ${y} ${y} 0 1 1 0 ${S?"":"-"}${y*2}
          `}),l=N(()=>2*Math.PI*a.value),c=N(()=>e.type==="dashboard"?.75:1),u=N(()=>`${-1*l.value*(1-c.value)/2}px`),d=N(()=>({strokeDasharray:`${l.value*c.value}px, ${l.value}px`,strokeDashoffset:u.value})),f=N(()=>({strokeDasharray:`${l.value*c.value*(e.percentage/100)}px, ${l.value}px`,strokeDashoffset:u.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),h=N(()=>{let y;return e.color?y=_(e.percentage):y=t[e.status]||t.default,y}),p=N(()=>e.status==="warning"?lM:e.type==="line"?e.status==="success"?xL:fu:e.status==="success"?ob:fl),m=N(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),v=N(()=>e.format(e.percentage));function g(y){const S=100/y.length;return y.map((x,T)=>xt(x)?{color:x,percentage:(T+1)*S}:x).sort((x,T)=>x.percentage-T.percentage)}const _=y=>{var S;const{color:w}=e;if(Tt(w))return w(y);if(xt(w))return w;{const x=g(w);for(const T of x)if(T.percentage>y)return T.color;return(S=x[x.length-1])==null?void 0:S.color}};return(y,S)=>(F(),ie("div",{class:$([b(i).b(),b(i).m(y.type),b(i).is(y.status),{[b(i).m("without-text")]:!y.showText,[b(i).m("text-inside")]:y.textInside}]),role:"progressbar","aria-valuenow":y.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[y.type==="line"?(F(),ie("div",{key:0,class:$(b(i).b("bar"))},[le("div",{class:$(b(i).be("bar","outer")),style:Ct({height:`${y.strokeWidth}px`})},[le("div",{class:$([b(i).be("bar","inner"),{[b(i).bem("bar","inner","indeterminate")]:y.indeterminate},{[b(i).bem("bar","inner","striped")]:y.striped},{[b(i).bem("bar","inner","striped-flow")]:y.stripedFlow}]),style:Ct(b(r))},[(y.showText||y.$slots.default)&&y.textInside?(F(),ie("div",{key:0,class:$(b(i).be("bar","innerText"))},[Ne(y.$slots,"default",{percentage:y.percentage},()=>[le("span",null,rt(b(v)),1)])],2)):Be("v-if",!0)],6)],6)],2)):(F(),ie("div",{key:1,class:$(b(i).b("circle")),style:Ct({height:`${y.width}px`,width:`${y.width}px`})},[(F(),ie("svg",{viewBox:"0 0 100 100"},[le("path",{class:$(b(i).be("circle","track")),d:b(o),stroke:`var(${b(i).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":y.strokeLinecap,"stroke-width":b(s),fill:"none",style:Ct(b(d))},null,14,["d","stroke","stroke-linecap","stroke-width"]),le("path",{class:$(b(i).be("circle","path")),d:b(o),stroke:b(h),fill:"none",opacity:y.percentage?1:0,"stroke-linecap":y.strokeLinecap,"stroke-width":b(s),style:Ct(b(f))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(y.showText||y.$slots.default)&&!y.textInside?(F(),ie("div",{key:2,class:$(b(i).e("text")),style:Ct({fontSize:`${b(m)}px`})},[Ne(y.$slots,"default",{percentage:y.percentage},()=>[y.status?(F(),He(b(_t),{key:1},{default:ge(()=>[(F(),He(en(b(p))))]),_:1})):(F(),ie("span",{key:0},rt(b(v)),1))])],6)):Be("v-if",!0)],10,["aria-valuenow"]))}});var JSe=ot(ZSe,[["__file","progress.vue"]]);const K9=Ft(JSe),ewe=at({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:Re([Array,Object]),default:()=>Li(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:Re([Array,Object]),default:()=>[Hb,Hb,Hb]},voidIcon:{type:Zn,default:()=>$ce},disabledVoidIcon:{type:Zn,default:()=>Hb},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:Re(Array),default:()=>Li(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:cr,clearable:Boolean,...Zr(["ariaLabel"])}),twe={[jn]:n=>At(n),[Kt]:n=>At(n)},nwe=ve({name:"ElRate"}),iwe=ve({...nwe,props:ewe,emits:twe,setup(n,{expose:e,emit:t}){const i=n;function r(R,B){const k=G=>Yt(G),O=Object.keys(B).map(G=>+G).filter(G=>{const q=B[G];return(k(q)?q.excluded:!1)?R<G:R<=G}).sort((G,q)=>G-q),U=B[O[0]];return k(U)&&U.value||U}const s=mt(rp,void 0),a=mt(Xl,void 0),o=tr(),l=Ze("rate"),{inputId:c,isLabeledByFormItem:u}=Fo(i,{formItemContext:a}),d=X(i.modelValue),f=X(-1),h=X(!0),p=N(()=>[l.b(),l.m(o.value)]),m=N(()=>i.disabled||(s==null?void 0:s.disabled)),v=N(()=>l.cssVarBlock({"void-color":i.voidColor,"disabled-void-color":i.disabledVoidColor,"fill-color":S.value})),g=N(()=>{let R="";return i.showScore?R=i.scoreTemplate.replace(/\{\s*value\s*\}/,m.value?`${i.modelValue}`:`${d.value}`):i.showText&&(R=i.texts[Math.ceil(d.value)-1]),R}),_=N(()=>i.modelValue*100-Math.floor(i.modelValue)*100),y=N(()=>nt(i.colors)?{[i.lowThreshold]:i.colors[0],[i.highThreshold]:{value:i.colors[1],excluded:!0},[i.max]:i.colors[2]}:i.colors),S=N(()=>{const R=r(d.value,y.value);return Yt(R)?"":R}),w=N(()=>{let R="";return m.value?R=`${_.value}%`:i.allowHalf&&(R="50%"),{color:S.value,width:R}}),x=N(()=>{let R=nt(i.icons)?[...i.icons]:{...i.icons};return R=Wc(R),nt(R)?{[i.lowThreshold]:R[0],[i.highThreshold]:{value:R[1],excluded:!0},[i.max]:R[2]}:R}),T=N(()=>r(i.modelValue,x.value)),C=N(()=>m.value?xt(i.disabledVoidIcon)?i.disabledVoidIcon:Wc(i.disabledVoidIcon):xt(i.voidIcon)?i.voidIcon:Wc(i.voidIcon)),M=N(()=>r(d.value,x.value));function A(R){const B=m.value&&_.value>0&&R-1<i.modelValue&&R>i.modelValue,k=i.allowHalf&&h.value&&R-.5<=d.value&&R>d.value;return B||k}function E(R){i.clearable&&R===i.modelValue&&(R=0),t(Kt,R),i.modelValue!==R&&t("change",R)}function I(R){m.value||(i.allowHalf&&h.value?E(d.value):E(R))}function P(R){if(m.value)return;let B=d.value;const k=R.code;return k===ut.up||k===ut.right?(i.allowHalf?B+=.5:B+=1,R.stopPropagation(),R.preventDefault()):(k===ut.left||k===ut.down)&&(i.allowHalf?B-=.5:B-=1,R.stopPropagation(),R.preventDefault()),B=B<0?0:B,B=B>i.max?i.max:B,t(Kt,B),t("change",B),B}function D(R,B){if(!m.value){if(i.allowHalf&&B){let k=B.target;fa(k,l.e("item"))&&(k=k.querySelector(`.${l.e("icon")}`)),(k.clientWidth===0||fa(k,l.e("decimal")))&&(k=k.parentNode),h.value=B.offsetX*2<=k.clientWidth,d.value=h.value?R-.5:R}else d.value=R;f.value=R}}function L(){m.value||(i.allowHalf&&(h.value=i.modelValue!==Math.floor(i.modelValue)),d.value=i.modelValue,f.value=-1)}return We(()=>i.modelValue,R=>{d.value=R,h.value=i.modelValue!==Math.floor(i.modelValue)}),i.modelValue||t(Kt,0),e({setCurrentValue:D,resetCurrentValue:L}),(R,B)=>{var k;return F(),ie("div",{id:b(c),class:$([b(p),b(l).is("disabled",b(m))]),role:"slider","aria-label":b(u)?void 0:R.ariaLabel||"rating","aria-labelledby":b(u)?(k=b(a))==null?void 0:k.labelId:void 0,"aria-valuenow":d.value,"aria-valuetext":b(g)||void 0,"aria-valuemin":"0","aria-valuemax":R.max,tabindex:"0",style:Ct(b(v)),onKeydown:P},[(F(!0),ie(bt,null,sn(R.max,(O,U)=>(F(),ie("span",{key:U,class:$(b(l).e("item")),onMousemove:G=>D(O,G),onMouseleave:L,onClick:G=>I(O)},[oe(b(_t),{class:$([b(l).e("icon"),{hover:f.value===O},b(l).is("active",O<=d.value)])},{default:ge(()=>[A(O)?Be("v-if",!0):(F(),ie(bt,{key:0},[Wt((F(),He(en(b(M)),null,null,512)),[[Dn,O<=d.value]]),Wt((F(),He(en(b(C)),null,null,512)),[[Dn,!(O<=d.value)]])],64)),A(O)?(F(),ie(bt,{key:1},[(F(),He(en(b(C)),{class:$([b(l).em("decimal","box")])},null,8,["class"])),oe(b(_t),{style:Ct(b(w)),class:$([b(l).e("icon"),b(l).e("decimal")])},{default:ge(()=>[(F(),He(en(b(T))))]),_:1},8,["style","class"])],64)):Be("v-if",!0)]),_:2},1032,["class"])],42,["onMousemove","onClick"]))),128)),R.showText||R.showScore?(F(),ie("span",{key:0,class:$(b(l).e("text")),style:Ct({color:R.textColor})},rt(b(g)),7)):Be("v-if",!0)],46,["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"])}}});var rwe=ot(iwe,[["__file","rate.vue"]]);const swe=Ft(rwe),km={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},BF={[km.success]:Xle,[km.warning]:lM,[km.error]:CL,[km.info]:ML},awe=at({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),owe=ve({name:"ElResult"}),lwe=ve({...owe,props:awe,setup(n){const e=n,t=Ze("result"),i=N(()=>{const r=e.icon,s=r&&km[r]?km[r]:"icon-info",a=BF[s]||BF["icon-info"];return{class:s,component:a}});return(r,s)=>(F(),ie("div",{class:$(b(t).b())},[le("div",{class:$(b(t).e("icon"))},[Ne(r.$slots,"icon",{},()=>[b(i).component?(F(),He(en(b(i).component),{key:0,class:$(b(i).class)},null,8,["class"])):Be("v-if",!0)])],2),r.title||r.$slots.title?(F(),ie("div",{key:0,class:$(b(t).e("title"))},[Ne(r.$slots,"title",{},()=>[le("p",null,rt(r.title),1)])],2)):Be("v-if",!0),r.subTitle||r.$slots["sub-title"]?(F(),ie("div",{key:1,class:$(b(t).e("subtitle"))},[Ne(r.$slots,"sub-title",{},()=>[le("p",null,rt(r.subTitle),1)])],2)):Be("v-if",!0),r.$slots.extra?(F(),ie("div",{key:2,class:$(b(t).e("extra"))},[Ne(r.$slots,"extra")],2)):Be("v-if",!0)],2))}});var cwe=ot(lwe,[["__file","result.vue"]]);const uwe=Ft(cwe),dwe=["start","center","end","space-around","space-between","space-evenly"],fwe=["top","middle","bottom"],hwe=at({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:dwe,default:"start"},align:{type:String,values:fwe}}),pwe=ve({name:"ElRow"}),mwe=ve({...pwe,props:hwe,setup(n){const e=n,t=Ze("row"),i=N(()=>e.gutter);un(KW,{gutter:i});const r=N(()=>{const a={};return e.gutter&&(a.marginRight=a.marginLeft=`-${e.gutter/2}px`),a}),s=N(()=>[t.b(),t.is(`justify-${e.justify}`,e.justify!=="start"),t.is(`align-${e.align}`,!!e.align)]);return(a,o)=>(F(),He(en(a.tag),{class:$(b(s)),style:Ct(b(r))},{default:ge(()=>[Ne(a.$slots,"default")]),_:3},8,["class","style"]))}});var vwe=ot(mwe,[["__file","row.vue"]]);const gwe=Ft(vwe),ywe=ve({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:Ze("select")}}});function _we(n,e,t,i,r,s){return F(),ie("div",{class:$(n.ns.be("group","title")),style:Ct({...n.style,lineHeight:`${n.height}px`})},rt(n.item.label),7)}var bwe=ot(ywe,[["render",_we],["__file","group-item.vue"]]);function Swe(n,{emit:e}){return{hoverItem:()=>{n.disabled||e("hover",n.index)},selectOptionClick:()=>{n.disabled||e("select",n.item,n.index)}}}const q9={label:"label",value:"value",disabled:"disabled",options:"options"};function yM(n){const e=N(()=>({...q9,...n.props}));return{aliasProps:e,getLabel:a=>Yi(a,e.value.label),getValue:a=>Yi(a,e.value.value),getDisabled:a=>Yi(a,e.value.disabled),getOptions:a=>Yi(a,e.value.options)}}const wwe=at({allowCreate:Boolean,autocomplete:{type:Re(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:Zn,default:fu},effect:{type:Re(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:Re([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Re(Array),required:!0},placeholder:{type:String},teleported:Rr.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Re(Object),default:()=>({})},remote:Boolean,size:cr,props:{type:Re(Object),default:()=>q9},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:12},showArrow:{type:Boolean,default:!0},placement:{type:Re(String),values:hu,default:"bottom-start"},fallbackPlacements:{type:Re(Array),default:["bottom-start","top-start","right","left"]},tagType:{...Jc.type,default:"info"},tagEffect:{...Jc.effect,default:"light"},tabindex:{type:[String,Number],default:0},appendTo:String,...pg,...Zr(["ariaLabel"])}),xwe=at({data:Array,disabled:Boolean,hovering:Boolean,item:{type:Re(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),Cwe={[Kt]:n=>!0,[jn]:n=>!0,"remove-tag":n=>!0,"visible-change":n=>!0,focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0},Mwe={hover:n=>At(n),select:(n,e)=>!0},d3=Symbol("ElSelectV2Injection"),Twe=ve({props:xwe,emits:Mwe,setup(n,{emit:e}){const t=mt(d3),i=Ze("select"),{hoverItem:r,selectOptionClick:s}=Swe(n,{emit:e}),{getLabel:a}=yM(t.props);return{ns:i,hoverItem:r,selectOptionClick:s,getLabel:a}}});function Awe(n,e,t,i,r,s){return F(),ie("li",{"aria-selected":n.selected,style:Ct(n.style),class:$([n.ns.be("dropdown","item"),n.ns.is("selected",n.selected),n.ns.is("disabled",n.disabled),n.ns.is("created",n.created),n.ns.is("hovering",n.hovering)]),onMousemove:n.hoverItem,onClick:Pt(n.selectOptionClick,["stop"])},[Ne(n.$slots,"default",{item:n.item,index:n.index,disabled:n.disabled},()=>[le("span",null,rt(n.getLabel(n.item)),1)])],46,["aria-selected","onMousemove","onClick"])}var Ewe=ot(Twe,[["render",Awe],["__file","option-item.vue"]]),FF=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Iwe(n,e){return!!(n===e||FF(n)&&FF(e))}function Rwe(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!Iwe(n[t],e[t]))return!1;return!0}function Pwe(n,e){e===void 0&&(e=Rwe);var t=null;function i(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(t&&t.lastThis===this&&e(r,t.lastArgs))return t.lastResult;var a=n.apply(this,r);return t={lastResult:a,lastArgs:r,lastThis:this},a}return i.clear=function(){t=null},i}const X9=()=>{const e=jt().proxy.$props;return N(()=>{const t=(i,r,s)=>({});return e.perfMode?tM(t):Pwe(t)})},MI=50,gx="itemRendered",yx="scroll",Om="forward",_x="backward",bo="auto",_M="smart",o_="start",Ol="center",l_="end",Pv="horizontal",f3="vertical",Dwe="ltr",nv="rtl",c_="negative",h3="positive-ascending",p3="positive-descending",Lwe={[Pv]:"left",[f3]:"top"},kwe=20,Owe={[Pv]:"deltaX",[f3]:"deltaY"},Nwe=({atEndEdge:n,atStartEdge:e,layout:t},i)=>{let r,s=0;const a=l=>l<0&&e.value||l>0&&n.value;return{hasReachedEdge:a,onWheel:l=>{Fh(r);const c=l[Owe[t.value]];a(s)&&a(s+c)||(s+=c,uM()||l.preventDefault(),r=Dd(()=>{i(s),s=0}))}}},TI=pl({type:Re([Number,Function]),required:!0}),AI=pl({type:Number}),EI=pl({type:Number,default:2}),Bwe=pl({type:String,values:["ltr","rtl"],default:"ltr"}),II=pl({type:Number,default:0}),bx=pl({type:Number,required:!0}),Y9=pl({type:String,values:["horizontal","vertical"],default:f3}),j9=at({className:{type:String,default:""},containerElement:{type:Re([String,Object]),default:"div"},data:{type:Re(Array),default:()=>Li([])},direction:Bwe,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:Re([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),Q9=at({cache:EI,estimatedItemSize:AI,layout:Y9,initScrollOffset:II,total:bx,itemSize:TI,...j9}),RI={type:Number,default:6},Z9={type:Number,default:0},J9={type:Number,default:2},Mh=at({columnCache:EI,columnWidth:TI,estimatedColumnWidth:AI,estimatedRowHeight:AI,initScrollLeft:II,initScrollTop:II,itemKey:{type:Re(Function),default:({columnIndex:n,rowIndex:e})=>`${e}:${n}`},rowCache:EI,rowHeight:TI,totalColumn:bx,totalRow:bx,hScrollbarSize:RI,vScrollbarSize:RI,scrollbarStartGap:Z9,scrollbarEndGap:J9,role:String,...j9}),e7=at({alwaysOn:Boolean,class:String,layout:Y9,total:bx,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:RI,startGap:Z9,endGap:J9,visible:Boolean}),lh=(n,e)=>n<e?Om:_x,u_=n=>n===Dwe||n===nv||n===Pv,zF=n=>n===nv;let yp=null;function Sx(n=!1){if(yp===null||n){const e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";const i=document.createElement("div"),r=i.style;return r.width="100px",r.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?yp=p3:(e.scrollLeft=1,e.scrollLeft===0?yp=c_:yp=h3),document.body.removeChild(e),yp}return yp}function Fwe({move:n,size:e,bar:t},i){const r={},s=`translate${t.axis}(${n}px)`;return r[t.size]=e,r.transform=s,r.msTransform=s,r.webkitTransform=s,i==="horizontal"?r.height="100%":r.width="100%",r}const PI=ve({name:"ElVirtualScrollBar",props:e7,emits:["scroll","start-move","stop-move"],setup(n,{emit:e}){const t=N(()=>n.startGap+n.endGap),i=Ze("virtual-scrollbar"),r=Ze("scrollbar"),s=X(),a=X();let o=null,l=null;const c=Nn({isDragging:!1,traveled:0}),u=N(()=>VG[n.layout]),d=N(()=>n.clientSize-b(t)),f=N(()=>({position:"absolute",width:`${Pv===n.layout?d.value:n.scrollbarSize}px`,height:`${Pv===n.layout?n.scrollbarSize:d.value}px`,[Lwe[n.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),h=N(()=>{const x=n.ratio,T=n.clientSize;if(x>=100)return Number.POSITIVE_INFINITY;if(x>=50)return x*T/100;const C=T/3;return Math.floor(Math.min(Math.max(x*T,kwe),C))}),p=N(()=>{if(!Number.isFinite(h.value))return{display:"none"};const x=`${h.value}px`;return Fwe({bar:u.value,size:x,move:c.traveled},n.layout)}),m=N(()=>Math.floor(n.clientSize-h.value-b(t))),v=()=>{window.addEventListener("mousemove",S),window.addEventListener("mouseup",y);const x=b(a);x&&(l=document.onselectstart,document.onselectstart=()=>!1,x.addEventListener("touchmove",S,{passive:!0}),x.addEventListener("touchend",y))},g=()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",y),document.onselectstart=l,l=null;const x=b(a);x&&(x.removeEventListener("touchmove",S),x.removeEventListener("touchend",y))},_=x=>{x.stopImmediatePropagation(),!(x.ctrlKey||[1,2].includes(x.button))&&(c.isDragging=!0,c[u.value.axis]=x.currentTarget[u.value.offset]-(x[u.value.client]-x.currentTarget.getBoundingClientRect()[u.value.direction]),e("start-move"),v())},y=()=>{c.isDragging=!1,c[u.value.axis]=0,e("stop-move"),g()},S=x=>{const{isDragging:T}=c;if(!T||!a.value||!s.value)return;const C=c[u.value.axis];if(!C)return;Fh(o);const M=(s.value.getBoundingClientRect()[u.value.direction]-x[u.value.client])*-1,A=a.value[u.value.offset]-C,E=M-A;o=Dd(()=>{c.traveled=Math.max(n.startGap,Math.min(E,m.value)),e("scroll",E,m.value)})},w=x=>{const T=Math.abs(x.target.getBoundingClientRect()[u.value.direction]-x[u.value.client]),C=a.value[u.value.offset]/2,M=T-C;c.traveled=Math.max(0,Math.min(M,m.value)),e("scroll",M,m.value)};return We(()=>n.scrollFrom,x=>{c.isDragging||(c.traveled=Math.ceil(x*m.value))}),Un(()=>{g()}),()=>wt("div",{role:"presentation",ref:s,class:[i.b(),n.class,(n.alwaysOn||c.isDragging)&&"always-on"],style:f.value,onMousedown:Pt(w,["stop","prevent"]),onTouchstartPrevent:_},wt("div",{ref:a,class:r.e("thumb"),style:p.value,onMousedown:_},[]))}}),t7=({name:n,getOffset:e,getItemSize:t,getItemOffset:i,getEstimatedTotalSize:r,getStartIndexForOffset:s,getStopIndexForStartIndex:a,initCache:o,clearCache:l,validateProps:c})=>ve({name:n??"ElVirtualList",props:Q9,emits:[gx,yx],setup(u,{emit:d,expose:f}){c(u);const h=jt(),p=Ze("vl"),m=X(o(u,h)),v=X9(),g=X(),_=X(),y=X(),S=X({isScrolling:!1,scrollDir:"forward",scrollOffset:At(u.initScrollOffset)?u.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:u.scrollbarAlwaysOn}),w=N(()=>{const{total:W,cache:Y}=u,{isScrolling:J,scrollDir:Z,scrollOffset:ee}=b(S);if(W===0)return[0,0,0,0];const me=s(u,ee,b(m)),ye=a(u,me,ee,b(m)),Te=!J||Z===_x?Math.max(1,Y):1,Ee=!J||Z===Om?Math.max(1,Y):1;return[Math.max(0,me-Te),Math.max(0,Math.min(W-1,ye+Ee)),me,ye]}),x=N(()=>r(u,b(m))),T=N(()=>u_(u.layout)),C=N(()=>[{position:"relative",[`overflow-${T.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:u.direction,height:At(u.height)?`${u.height}px`:u.height,width:At(u.width)?`${u.width}px`:u.width},u.style]),M=N(()=>{const W=b(x),Y=b(T);return{height:Y?"100%":`${W}px`,pointerEvents:b(S).isScrolling?"none":void 0,width:Y?`${W}px`:"100%"}}),A=N(()=>T.value?u.width:u.height),{onWheel:E}=Nwe({atStartEdge:N(()=>S.value.scrollOffset<=0),atEndEdge:N(()=>S.value.scrollOffset>=x.value),layout:N(()=>u.layout)},W=>{var Y,J;(J=(Y=y.value).onMouseUp)==null||J.call(Y),B(Math.min(S.value.scrollOffset+W,x.value-A.value))});Kn(g,"wheel",E,{passive:!1});const I=()=>{const{total:W}=u;if(W>0){const[ee,me,ye,Te]=b(w);d(gx,ee,me,ye,Te)}const{scrollDir:Y,scrollOffset:J,updateRequested:Z}=b(S);d(yx,Y,J,Z)},P=W=>{const{clientHeight:Y,scrollHeight:J,scrollTop:Z}=W.currentTarget,ee=b(S);if(ee.scrollOffset===Z)return;const me=Math.max(0,Math.min(Z,J-Y));S.value={...ee,isScrolling:!0,scrollDir:lh(ee.scrollOffset,me),scrollOffset:me,updateRequested:!1},Mt(U)},D=W=>{const{clientWidth:Y,scrollLeft:J,scrollWidth:Z}=W.currentTarget,ee=b(S);if(ee.scrollOffset===J)return;const{direction:me}=u;let ye=J;if(me===nv)switch(Sx()){case c_:{ye=-J;break}case p3:{ye=Z-Y-J;break}}ye=Math.max(0,Math.min(ye,Z-Y)),S.value={...ee,isScrolling:!0,scrollDir:lh(ee.scrollOffset,ye),scrollOffset:ye,updateRequested:!1},Mt(U)},L=W=>{b(T)?D(W):P(W),I()},R=(W,Y)=>{const J=(x.value-A.value)/Y*W;B(Math.min(x.value-A.value,J))},B=W=>{W=Math.max(W,0),W!==b(S).scrollOffset&&(S.value={...b(S),scrollOffset:W,scrollDir:lh(b(S).scrollOffset,W),updateRequested:!0},Mt(U))},k=(W,Y=bo)=>{const{scrollOffset:J}=b(S);W=Math.max(0,Math.min(W,u.total-1)),B(e(u,W,Y,J,b(m)))},O=W=>{const{direction:Y,itemSize:J,layout:Z}=u,ee=v.value(l&&J,l&&Z,l&&Y);let me;if(Cn(ee,String(W)))me=ee[W];else{const ye=i(u,W,b(m)),Te=t(u,W,b(m)),Ee=b(T),H=Y===nv,Q=Ee?ye:0;ee[W]=me={position:"absolute",left:H?void 0:`${Q}px`,right:H?`${Q}px`:void 0,top:Ee?0:`${ye}px`,height:Ee?"100%":`${Te}px`,width:Ee?`${Te}px`:"100%"}}return me},U=()=>{S.value.isScrolling=!1,Mt(()=>{v.value(-1,null,null)})},G=()=>{const W=g.value;W&&(W.scrollTop=0)};Ht(()=>{if(!wn)return;const{initScrollOffset:W}=u,Y=b(g);At(W)&&Y&&(b(T)?Y.scrollLeft=W:Y.scrollTop=W),I()}),Bo(()=>{const{direction:W,layout:Y}=u,{scrollOffset:J,updateRequested:Z}=b(S),ee=b(g);if(Z&&ee)if(Y===Pv)if(W===nv)switch(Sx()){case c_:{ee.scrollLeft=-J;break}case h3:{ee.scrollLeft=J;break}default:{const{clientWidth:me,scrollWidth:ye}=ee;ee.scrollLeft=ye-me-J;break}}else ee.scrollLeft=J;else ee.scrollTop=J}),KD(()=>{b(g).scrollTop=b(S).scrollOffset});const q={ns:p,clientSize:A,estimatedTotalSize:x,windowStyle:C,windowRef:g,innerRef:_,innerStyle:M,itemsToRender:w,scrollbarRef:y,states:S,getItemStyle:O,onScroll:L,onScrollbarScroll:R,onWheel:E,scrollTo:B,scrollToItem:k,resetScrollTop:G};return f({windowRef:g,innerRef:_,getItemStyleCache:v,scrollTo:B,scrollToItem:k,resetScrollTop:G,states:S}),q},render(u){var d;const{$slots:f,className:h,clientSize:p,containerElement:m,data:v,getItemStyle:g,innerElement:_,itemsToRender:y,innerStyle:S,layout:w,total:x,onScroll:T,onScrollbarScroll:C,states:M,useIsScrolling:A,windowStyle:E,ns:I}=u,[P,D]=y,L=en(m),R=en(_),B=[];if(x>0)for(let G=P;G<=D;G++)B.push(wt(bt,{key:G},(d=f.default)==null?void 0:d.call(f,{data:v,index:G,isScrolling:A?M.isScrolling:void 0,style:g(G)})));const k=[wt(R,{style:S,ref:"innerRef"},xt(R)?B:{default:()=>B})],O=wt(PI,{ref:"scrollbarRef",clientSize:p,layout:w,onScroll:C,ratio:p*100/this.estimatedTotalSize,scrollFrom:M.scrollOffset/(this.estimatedTotalSize-p),total:x}),U=wt(L,{class:[I.e("window"),h],style:E,onScroll:T,ref:"windowRef",key:0},xt(L)?[k]:{default:()=>[k]});return wt("div",{key:0,class:[I.e("wrapper"),M.scrollbarAlwaysOn?"always-on":""]},[U,O])}}),n7=t7({name:"ElFixedSizeList",getItemOffset:({itemSize:n},e)=>e*n,getItemSize:({itemSize:n})=>n,getEstimatedTotalSize:({total:n,itemSize:e})=>e*n,getOffset:({height:n,total:e,itemSize:t,layout:i,width:r},s,a,o)=>{const l=u_(i)?r:n,c=Math.max(0,e*t-l),u=Math.min(c,s*t),d=Math.max(0,(s+1)*t-l);switch(a===_M&&(o>=d-l&&o<=u+l?a=bo:a=Ol),a){case o_:return u;case l_:return d;case Ol:{const f=Math.round(d+(u-d)/2);return f<Math.ceil(l/2)?0:f>c+Math.floor(l/2)?c:f}case bo:default:return o>=d&&o<=u?o:o<d?d:u}},getStartIndexForOffset:({total:n,itemSize:e},t)=>Math.max(0,Math.min(n-1,Math.floor(t/e))),getStopIndexForStartIndex:({height:n,total:e,itemSize:t,layout:i,width:r},s,a)=>{const o=s*t,l=u_(i)?r:n,c=Math.ceil((l+a-o)/t);return Math.max(0,Math.min(e-1,s+c-1))},initCache(){},clearCache:!0,validateProps(){}}),Nm=(n,e,t)=>{const{itemSize:i}=n,{items:r,lastVisitedIndex:s}=t;if(e>s){let a=0;if(s>=0){const o=r[s];a=o.offset+o.size}for(let o=s+1;o<=e;o++){const l=i(o);r[o]={offset:a,size:l},a+=l}t.lastVisitedIndex=e}return r[e]},zwe=(n,e,t)=>{const{items:i,lastVisitedIndex:r}=e;return(r>0?i[r].offset:0)>=t?i7(n,e,0,r,t):Uwe(n,e,Math.max(0,r),t)},i7=(n,e,t,i,r)=>{for(;t<=i;){const s=t+Math.floor((i-t)/2),a=Nm(n,s,e).offset;if(a===r)return s;a<r?t=s+1:a>r&&(i=s-1)}return Math.max(0,t-1)},Uwe=(n,e,t,i)=>{const{total:r}=n;let s=1;for(;t<r&&Nm(n,t,e).offset<i;)t+=s,s*=2;return i7(n,e,Math.floor(t/2),Math.min(t,r-1),i)},UF=({total:n},{items:e,estimatedItemSize:t,lastVisitedIndex:i})=>{let r=0;if(i>=n&&(i=n-1),i>=0){const o=e[i];r=o.offset+o.size}const a=(n-i-1)*t;return r+a},Hwe=t7({name:"ElDynamicSizeList",getItemOffset:(n,e,t)=>Nm(n,e,t).offset,getItemSize:(n,e,{items:t})=>t[e].size,getEstimatedTotalSize:UF,getOffset:(n,e,t,i,r)=>{const{height:s,layout:a,width:o}=n,l=u_(a)?o:s,c=Nm(n,e,r),u=UF(n,r),d=Math.max(0,Math.min(u-l,c.offset)),f=Math.max(0,c.offset-l+c.size);switch(t===_M&&(i>=f-l&&i<=d+l?t=bo:t=Ol),t){case o_:return d;case l_:return f;case Ol:return Math.round(f+(d-f)/2);case bo:default:return i>=f&&i<=d?i:i<f?f:d}},getStartIndexForOffset:(n,e,t)=>zwe(n,t,e),getStopIndexForStartIndex:(n,e,t,i)=>{const{height:r,total:s,layout:a,width:o}=n,l=u_(a)?o:r,c=Nm(n,e,i),u=t+l;let d=c.offset+c.size,f=e;for(;f<s-1&&d<u;)f++,d+=Nm(n,f,i).size;return f},initCache({estimatedItemSize:n=MI},e){const t={items:{},estimatedItemSize:n,lastVisitedIndex:-1};return t.clearCacheAfterIndex=(i,r=!0)=>{var s,a;t.lastVisitedIndex=Math.min(t.lastVisitedIndex,i-1),(s=e.exposed)==null||s.getItemStyleCache(-1),r&&((a=e.proxy)==null||a.$forceUpdate())},t},clearCache:!1,validateProps:({itemSize:n})=>{}}),Vwe={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number};var $we=ve({name:"ElSelectDropdown",props:Vwe,setup(n,{slots:e,expose:t}){const i=mt(d3),r=Ze("select"),{getLabel:s,getValue:a,getDisabled:o}=yM(i.props),l=X([]),c=X(),u=N(()=>n.data.length);We(()=>u.value,()=>{var E,I;(I=(E=i.tooltipRef.value).updatePopper)==null||I.call(E)});const d=N(()=>Wn(i.props.estimatedOptionHeight)),f=N(()=>d.value?{itemSize:i.props.itemHeight}:{estimatedSize:i.props.estimatedOptionHeight,itemSize:E=>l.value[E]}),h=(E=[],I)=>{const{props:{valueKey:P}}=i;return Yt(I)?E&&E.some(D=>Jn(Yi(D,P))===Yi(I,P)):E.includes(I)},p=(E,I)=>{if(Yt(I)){const{valueKey:P}=i.props;return Yi(E,P)===Yi(I,P)}else return E===I},m=(E,I)=>i.props.multiple?h(E,a(I)):p(E,a(I)),v=(E,I)=>{const{disabled:P,multiple:D,multipleLimit:L}=i.props;return P||!I&&(D?L>0&&E.length>=L:!1)},g=E=>n.hoveringIndex===E;t({listRef:c,isSized:d,isItemDisabled:v,isItemHovering:g,isItemSelected:m,scrollToItem:E=>{const I=c.value;I&&I.scrollToItem(E)},resetScrollTop:()=>{const E=c.value;E&&E.resetScrollTop()}});const w=E=>{const{index:I,data:P,style:D}=E,L=b(d),{itemSize:R,estimatedSize:B}=b(f),{modelValue:k}=i.props,{onSelect:O,onHover:U}=i,G=P[I];if(G.type==="Group")return oe(bwe,{item:G,style:D,height:L?R:B},null);const q=m(k,G),W=v(k,q),Y=g(I);return oe(Ewe,rn(E,{selected:q,disabled:o(G)||W,created:!!G.created,hovering:Y,item:G,onSelect:O,onHover:U}),{default:J=>{var Z;return((Z=e.default)==null?void 0:Z.call(e,J))||oe("span",null,[s(G)])}})},{onKeyboardNavigate:x,onKeyboardSelect:T}=i,C=()=>{x("forward")},M=()=>{x("backward")},A=E=>{const{code:I}=E,{tab:P,esc:D,down:L,up:R,enter:B,numpadEnter:k}=ut;switch(I!==P&&(E.preventDefault(),E.stopPropagation()),I){case P:case D:break;case L:C();break;case R:M();break;case B:case k:T();break}};return()=>{var E,I,P,D;const{data:L,width:R}=n,{height:B,multiple:k,scrollbarAlwaysOn:O}=i.props,U=b(d)?n7:Hwe;return oe("div",{class:[r.b("dropdown"),r.is("multiple",k)],style:{width:`${R}px`}},[(E=e.header)==null?void 0:E.call(e),((I=e.loading)==null?void 0:I.call(e))||((P=e.empty)==null?void 0:P.call(e))||oe(U,rn({ref:c},b(f),{className:r.be("dropdown","list"),scrollbarAlwaysOn:O,data:L,height:B,width:R,total:L.length,onKeydown:A}),{default:G=>oe(w,G,null)}),(D=e.footer)==null?void 0:D.call(e)])}}});function Gwe(n,e){const{aliasProps:t,getLabel:i,getValue:r}=yM(n),s=X(0),a=X(),o=N(()=>n.allowCreate&&n.filterable);function l(h){const p=m=>i(m)===h;return n.options&&n.options.some(p)||e.createdOptions.some(p)}function c(h){o.value&&(n.multiple&&h.created?s.value++:a.value=h)}function u(h){if(o.value)if(h&&h.length>0){if(l(h))return;const p={[t.value.value]:h,[t.value.label]:h,created:!0,[t.value.disabled]:!1};e.createdOptions.length>=s.value?e.createdOptions[s.value]=p:e.createdOptions.push(p)}else if(n.multiple)e.createdOptions.length=s.value;else{const p=a.value;e.createdOptions.length=0,p&&p.created&&e.createdOptions.push(p)}}function d(h){if(!o.value||!h||!h.created||h.created&&n.reserveKeyword&&e.inputValue===i(h))return;const p=e.createdOptions.findIndex(m=>r(m)===r(h));~p&&(e.createdOptions.splice(p,1),s.value--)}function f(){o.value&&(e.createdOptions.length=0,s.value=0)}return{createNewOption:u,removeNewOption:d,selectNewOption:c,clearAllNewOption:f}}const Wwe=11,Kwe=(n,e)=>{const{t}=xn(),i=Ze("select"),r=Ze("input"),{form:s,formItem:a}=fs(),{inputId:o}=Fo(n,{formItemContext:a}),{aliasProps:l,getLabel:c,getValue:u,getDisabled:d,getOptions:f}=yM(n),{valueOnClear:h,isEmptyValue:p}=sM(n),m=Nn({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),v=X(-1),g=X(),_=X(),y=X(),S=X(),w=X(),x=X(),T=X(),C=X(),M=X(),A=X(),E=X(),{isComposing:I,handleCompositionStart:P,handleCompositionEnd:D,handleCompositionUpdate:L}=cb({afterComposition:Ie=>ln(Ie)}),{wrapperRef:R,isFocused:B,handleBlur:k}=ef(w,{beforeFocus(){return q.value},afterFocus(){n.automaticDropdown&&!G.value&&(G.value=!0,m.menuVisibleOnFocus=!0)},beforeBlur(Ie){var Ge,Ve;return((Ge=y.value)==null?void 0:Ge.isFocusInsideContent(Ie))||((Ve=S.value)==null?void 0:Ve.isFocusInsideContent(Ie))},afterBlur(){G.value=!1,m.menuVisibleOnFocus=!1}}),O=X([]),U=X([]),G=X(!1),q=N(()=>n.disabled||(s==null?void 0:s.disabled)),W=N(()=>{var Ie;return(Ie=s==null?void 0:s.statusIcon)!=null?Ie:!1}),Y=N(()=>{const Ie=U.value.length*n.itemHeight;return Ie>n.height?n.height:Ie}),J=N(()=>n.multiple?nt(n.modelValue)&&n.modelValue.length>0:!p(n.modelValue)),Z=N(()=>n.clearable&&!q.value&&m.inputHovering&&J.value),ee=N(()=>n.remote&&n.filterable?"":du),me=N(()=>ee.value&&i.is("reverse",G.value)),ye=N(()=>(a==null?void 0:a.validateState)||""),Te=N(()=>{if(ye.value)return cM[ye.value]}),Ee=N(()=>n.remote?300:0),H=N(()=>n.loading?n.loadingText||t("el.select.loading"):n.remote&&!m.inputValue&&O.value.length===0?!1:n.filterable&&m.inputValue&&O.value.length>0&&U.value.length===0?n.noMatchText||t("el.select.noMatch"):O.value.length===0?n.noDataText||t("el.select.noData"):null),Q=Ie=>{const Ge=Ve=>{if(n.filterable&&Tt(n.filterMethod)||n.filterable&&n.remote&&Tt(n.remoteMethod))return!0;const it=new RegExp(KL(Ie),"i");return Ie?it.test(c(Ve)||""):!0};return n.loading?[]:[...m.createdOptions,...n.options].reduce((Ve,it)=>{const It=f(it);if(nt(It)){const Et=It.filter(Ge);Et.length>0&&Ve.push({label:c(it),type:"Group"},...Et)}else(n.remote||Ge(it))&&Ve.push(it);return Ve},[])},j=()=>{O.value=Q(""),U.value=Q(m.inputValue)},Pe=N(()=>{const Ie=new Map;return O.value.forEach((Ge,Ve)=>{Ie.set(st(u(Ge)),{option:Ge,index:Ve})}),Ie}),we=N(()=>{const Ie=new Map;return U.value.forEach((Ge,Ve)=>{Ie.set(st(u(Ge)),{option:Ge,index:Ve})}),Ie}),De=N(()=>U.value.every(Ie=>d(Ie))),Me=tr(),Ae=N(()=>Me.value==="small"?"small":"default"),Fe=()=>{var Ie;v.value=((Ie=g.value)==null?void 0:Ie.offsetWidth)||200},ne=()=>{if(!_.value)return 0;const Ie=window.getComputedStyle(_.value);return Number.parseFloat(Ie.gap||"6px")},z=N(()=>{const Ie=ne();return{maxWidth:`${E.value&&n.maxCollapseTags===1?m.selectionWidth-m.collapseItemWidth-Ie:m.selectionWidth}px`}}),K=N(()=>({maxWidth:`${m.selectionWidth}px`})),ae=N(()=>({width:`${Math.max(m.calculatorWidth,Wwe)}px`})),xe=N(()=>nt(n.modelValue)?n.modelValue.length===0&&!m.inputValue:n.filterable?!m.inputValue:!0),Le=N(()=>{var Ie;const Ge=(Ie=n.placeholder)!=null?Ie:t("el.select.placeholder");return n.multiple||!J.value?Ge:m.selectedLabel}),Xe=N(()=>{var Ie,Ge;return(Ge=(Ie=y.value)==null?void 0:Ie.popperRef)==null?void 0:Ge.contentRef}),je=N(()=>{if(n.multiple){const Ie=n.modelValue.length;if(n.modelValue.length>0&&we.value.has(n.modelValue[Ie-1])){const{index:Ge}=we.value.get(n.modelValue[Ie-1]);return Ge}}else if(!p(n.modelValue)&&we.value.has(n.modelValue)){const{index:Ie}=we.value.get(n.modelValue);return Ie}return-1}),he=N({get(){return G.value&&H.value!==!1},set(Ie){G.value=Ie}}),Ye=N(()=>n.multiple?n.collapseTags?m.cachedOptions.slice(0,n.maxCollapseTags):m.cachedOptions:[]),Ke=N(()=>n.multiple?n.collapseTags?m.cachedOptions.slice(n.maxCollapseTags):[]:[]),{createNewOption:V,removeNewOption:re,selectNewOption:te,clearAllNewOption:pe}=Gwe(n,m),se=()=>{q.value||(m.menuVisibleOnFocus?m.menuVisibleOnFocus=!1:G.value=!G.value)},de=()=>{m.inputValue.length>0&&!G.value&&(G.value=!0),V(m.inputValue),fe(m.inputValue)},qe=wa(de,Ee.value),fe=Ie=>{m.previousQuery===Ie||I.value||(m.previousQuery=Ie,n.filterable&&Tt(n.filterMethod)?n.filterMethod(Ie):n.filterable&&n.remote&&Tt(n.remoteMethod)&&n.remoteMethod(Ie),n.defaultFirstOption&&(n.filterable||n.remote)&&U.value.length?Mt(Je):Mt(tn))},Je=()=>{const Ie=U.value.filter(it=>!it.disabled&&it.type!=="Group"),Ge=Ie.find(it=>it.created),Ve=Ie[0];m.hoveringIndex=ht(U.value,Ge||Ve)},$e=Ie=>{jr(n.modelValue,Ie)||e(jn,Ie)},et=Ie=>{e(Kt,Ie),$e(Ie),m.previousValue=n.multiple?String(Ie):Ie},ht=(Ie=[],Ge)=>{if(!Yt(Ge))return Ie.indexOf(Ge);const Ve=n.valueKey;let it=-1;return Ie.some((It,Et)=>Yi(It,Ve)===Yi(Ge,Ve)?(it=Et,!0):!1),it},st=Ie=>Yt(Ie)?Yi(Ie,n.valueKey):Ie,Rt=()=>{Fe()},Vt=()=>{m.selectionWidth=_.value.getBoundingClientRect().width},Pn=()=>{m.calculatorWidth=x.value.getBoundingClientRect().width},Jt=()=>{m.collapseItemWidth=E.value.getBoundingClientRect().width},Ai=()=>{var Ie,Ge;(Ge=(Ie=y.value)==null?void 0:Ie.updatePopper)==null||Ge.call(Ie)},pi=()=>{var Ie,Ge;(Ge=(Ie=S.value)==null?void 0:Ie.updatePopper)==null||Ge.call(Ie)},Xa=Ie=>{if(n.multiple){let Ge=n.modelValue.slice();const Ve=ht(Ge,u(Ie));Ve>-1?(Ge=[...Ge.slice(0,Ve),...Ge.slice(Ve+1)],m.cachedOptions.splice(Ve,1),re(Ie)):(n.multipleLimit<=0||Ge.length<n.multipleLimit)&&(Ge=[...Ge,u(Ie)],m.cachedOptions.push(Ie),te(Ie)),et(Ge),Ie.created&&fe(""),n.filterable&&!n.reserveKeyword&&(m.inputValue="")}else m.selectedLabel=c(Ie),et(u(Ie)),G.value=!1,te(Ie),Ie.created||pe();Gr()},_l=(Ie,Ge)=>{let Ve=n.modelValue.slice();const it=ht(Ve,u(Ge));it>-1&&!q.value&&(Ve=[...n.modelValue.slice(0,it),...n.modelValue.slice(it+1)],m.cachedOptions.splice(it,1),et(Ve),e("remove-tag",u(Ge)),re(Ge)),Ie.stopPropagation(),Gr()},Gr=()=>{var Ie;(Ie=w.value)==null||Ie.focus()},Ya=()=>{var Ie;if(G.value){G.value=!1,Mt(()=>{var Ge;return(Ge=w.value)==null?void 0:Ge.blur()});return}(Ie=w.value)==null||Ie.blur()},Oe=()=>{m.inputValue.length>0?m.inputValue="":G.value=!1},lt=Ie=>mG(Ie,Ge=>!m.cachedOptions.some(Ve=>u(Ve)===Ge&&d(Ve))),dt=Ie=>{if(n.multiple&&Ie.code!==ut.delete&&m.inputValue.length===0){Ie.preventDefault();const Ge=n.modelValue.slice(),Ve=lt(Ge);if(Ve<0)return;const it=Ge[Ve];Ge.splice(Ve,1);const It=m.cachedOptions[Ve];m.cachedOptions.splice(Ve,1),re(It),et(Ge),e("remove-tag",it)}},ct=()=>{let Ie;nt(n.modelValue)?Ie=[]:Ie=h.value,n.multiple?m.cachedOptions=[]:m.selectedLabel="",G.value=!1,et(Ie),e("clear"),pe(),Gr()},Ue=(Ie,Ge=void 0)=>{const Ve=U.value;if(!["forward","backward"].includes(Ie)||q.value||Ve.length<=0||De.value||I.value)return;if(!G.value)return se();Ge===void 0&&(Ge=m.hoveringIndex);let it=-1;Ie==="forward"?(it=Ge+1,it>=Ve.length&&(it=0)):Ie==="backward"&&(it=Ge-1,(it<0||it>=Ve.length)&&(it=Ve.length-1));const It=Ve[it];if(d(It)||It.type==="Group")return Ue(Ie,it);m.hoveringIndex=it,kn(it)},pt=()=>{if(G.value)~m.hoveringIndex&&U.value[m.hoveringIndex]&&Xa(U.value[m.hoveringIndex]);else return se()},Lt=Ie=>{m.hoveringIndex=Ie??-1},tn=()=>{n.multiple?m.hoveringIndex=U.value.findIndex(Ie=>n.modelValue.some(Ge=>st(Ge)===st(Ie))):m.hoveringIndex=U.value.findIndex(Ie=>st(Ie)===st(n.modelValue))},ln=Ie=>{if(m.inputValue=Ie.target.value,n.remote)qe();else return de()},Fn=Ie=>{if(G.value=!1,B.value){const Ge=new FocusEvent("focus",Ie);k(Ge)}},An=()=>(m.isBeforeHide=!1,Mt(()=>{~je.value&&kn(m.hoveringIndex)})),kn=Ie=>{M.value.scrollToItem(Ie)},_e=(Ie,Ge)=>{const Ve=st(Ie);if(Pe.value.has(Ve)){const{option:it}=Pe.value.get(Ve);return it}if(Ge&&Ge.length){const it=Ge.find(It=>st(u(It))===Ve);if(it)return it}return{[l.value.value]:Ie,[l.value.label]:Ie}},Qe=(Ie=!1)=>{if(n.multiple)if(n.modelValue.length>0){const Ge=m.cachedOptions.slice();m.cachedOptions.length=0,m.previousValue=n.modelValue.toString();for(const Ve of n.modelValue){const it=_e(Ve,Ge);m.cachedOptions.push(it)}}else m.cachedOptions=[],m.previousValue=void 0;else if(J.value){m.previousValue=n.modelValue;const Ge=U.value,Ve=Ge.findIndex(it=>st(u(it))===st(n.modelValue));~Ve?m.selectedLabel=c(Ge[Ve]):(!m.selectedLabel||Ie)&&(m.selectedLabel=st(n.modelValue))}else m.selectedLabel="",m.previousValue=void 0;pe(),Fe()};return We(G,Ie=>{Ie?fe(""):(m.inputValue="",m.previousQuery=null,m.isBeforeHide=!0,V("")),e("visible-change",Ie)}),We(()=>n.modelValue,(Ie,Ge)=>{var Ve;(!Ie||nt(Ie)&&Ie.length===0||n.multiple&&!jr(Ie.toString(),m.previousValue)||!n.multiple&&st(Ie)!==st(m.previousValue))&&Qe(!0),!jr(Ie,Ge)&&n.validateEvent&&((Ve=a==null?void 0:a.validate)==null||Ve.call(a,"change").catch(It=>void 0))},{deep:!0}),We(()=>n.options,()=>{const Ie=w.value;(!Ie||Ie&&document.activeElement!==Ie)&&Qe()},{deep:!0,flush:"post"}),We(()=>U.value,()=>M.value&&Mt(M.value.resetScrollTop)),zr(()=>{m.isBeforeHide||j()}),zr(()=>{const{valueKey:Ie,options:Ge}=n,Ve=new Map;for(const it of Ge){const It=u(it);let Et=It;if(Yt(Et)&&(Et=Yi(It,Ie)),Ve.get(Et))break;Ve.set(Et,!0)}}),Ht(()=>{Qe()}),Ti(g,Rt),Ti(_,Vt),Ti(x,Pn),Ti(M,Ai),Ti(R,Ai),Ti(A,pi),Ti(E,Jt),{inputId:o,collapseTagSize:Ae,currentPlaceholder:Le,expanded:G,emptyText:H,popupHeight:Y,debounce:Ee,allOptions:O,filteredOptions:U,iconComponent:ee,iconReverse:me,tagStyle:z,collapseTagStyle:K,inputStyle:ae,popperSize:v,dropdownMenuVisible:he,hasModelValue:J,shouldShowPlaceholder:xe,selectDisabled:q,selectSize:Me,needStatusIcon:W,showClearBtn:Z,states:m,isFocused:B,nsSelect:i,nsInput:r,calculatorRef:x,inputRef:w,menuRef:M,tagMenuRef:A,tooltipRef:y,tagTooltipRef:S,selectRef:g,wrapperRef:R,selectionRef:_,prefixRef:T,suffixRef:C,collapseItemRef:E,popperRef:Xe,validateState:ye,validateIcon:Te,showTagList:Ye,collapseTagList:Ke,debouncedOnInputChange:qe,deleteTag:_l,getLabel:c,getValue:u,getDisabled:d,getValueKey:st,handleClear:ct,handleClickOutside:Fn,handleDel:dt,handleEsc:Oe,focus:Gr,blur:Ya,handleMenuEnter:An,handleResize:Rt,resetSelectionWidth:Vt,resetCalculatorWidth:Pn,updateTooltip:Ai,updateTagTooltip:pi,updateOptions:j,toggleMenu:se,scrollTo:kn,onInput:ln,onKeyboardNavigate:Ue,onKeyboardSelect:pt,onSelect:Xa,onHover:Lt,handleCompositionStart:P,handleCompositionEnd:D,handleCompositionUpdate:L}},qwe=ve({name:"ElSelectV2",components:{ElSelectMenu:$we,ElTag:Iv,ElTooltip:us,ElIcon:_t},directives:{ClickOutside:eu},props:wwe,emits:Cwe,setup(n,{emit:e}){const t=N(()=>{const{modelValue:s,multiple:a}=n,o=a?[]:void 0;return nt(s)?a?s:o:a?o:s}),i=Kwe(Nn({...Mr(n),modelValue:t}),e);un(d3,{props:Nn({...Mr(n),height:i.popupHeight,modelValue:t}),expanded:i.expanded,tooltipRef:i.tooltipRef,onSelect:i.onSelect,onHover:i.onHover,onKeyboardNavigate:i.onKeyboardNavigate,onKeyboardSelect:i.onKeyboardSelect});const r=N(()=>n.multiple?i.states.cachedOptions.map(s=>s.label):i.states.selectedLabel);return{...i,modelValue:t,selectedLabel:r}}});function Xwe(n,e,t,i,r,s){const a=yt("el-tag"),o=yt("el-tooltip"),l=yt("el-icon"),c=yt("el-select-menu"),u=qC("click-outside");return Wt((F(),ie("div",{ref:"selectRef",class:$([n.nsSelect.b(),n.nsSelect.m(n.selectSize)]),onMouseenter:d=>n.states.inputHovering=!0,onMouseleave:d=>n.states.inputHovering=!1},[oe(o,{ref:"tooltipRef",visible:n.dropdownMenuVisible,teleported:n.teleported,"popper-class":[n.nsSelect.e("popper"),n.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":n.popperOptions,"fallback-placements":n.fallbackPlacements,effect:n.effect,placement:n.placement,pure:"",transition:`${n.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:n.persistent,"append-to":n.appendTo,"show-arrow":n.showArrow,offset:n.offset,onBeforeShow:n.handleMenuEnter,onHide:d=>n.states.isBeforeHide=!1},{default:ge(()=>[le("div",{ref:"wrapperRef",class:$([n.nsSelect.e("wrapper"),n.nsSelect.is("focused",n.isFocused),n.nsSelect.is("hovering",n.states.inputHovering),n.nsSelect.is("filterable",n.filterable),n.nsSelect.is("disabled",n.selectDisabled)]),onClick:Pt(n.toggleMenu,["prevent"])},[n.$slots.prefix?(F(),ie("div",{key:0,ref:"prefixRef",class:$(n.nsSelect.e("prefix"))},[Ne(n.$slots,"prefix")],2)):Be("v-if",!0),le("div",{ref:"selectionRef",class:$([n.nsSelect.e("selection"),n.nsSelect.is("near",n.multiple&&!n.$slots.prefix&&!!n.modelValue.length)])},[n.multiple?Ne(n.$slots,"tag",{key:0},()=>[(F(!0),ie(bt,null,sn(n.showTagList,d=>(F(),ie("div",{key:n.getValueKey(n.getValue(d)),class:$(n.nsSelect.e("selected-item"))},[oe(a,{closable:!n.selectDisabled&&!n.getDisabled(d),size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:Ct(n.tagStyle),onClose:f=>n.deleteTag(f,d)},{default:ge(()=>[le("span",{class:$(n.nsSelect.e("tags-text"))},[Ne(n.$slots,"label",{label:n.getLabel(d),value:n.getValue(d)},()=>[Xt(rt(n.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),n.collapseTags&&n.modelValue.length>n.maxCollapseTags?(F(),He(o,{key:0,ref:"tagTooltipRef",disabled:n.dropdownMenuVisible||!n.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:n.effect,placement:"bottom",teleported:n.teleported},{default:ge(()=>[le("div",{ref:"collapseItemRef",class:$(n.nsSelect.e("selected-item"))},[oe(a,{closable:!1,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,style:Ct(n.collapseTagStyle),"disable-transitions":""},{default:ge(()=>[le("span",{class:$(n.nsSelect.e("tags-text"))}," + "+rt(n.modelValue.length-n.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:ge(()=>[le("div",{ref:"tagMenuRef",class:$(n.nsSelect.e("selection"))},[(F(!0),ie(bt,null,sn(n.collapseTagList,d=>(F(),ie("div",{key:n.getValueKey(n.getValue(d)),class:$(n.nsSelect.e("selected-item"))},[oe(a,{class:"in-tooltip",closable:!n.selectDisabled&&!n.getDisabled(d),size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",onClose:f=>n.deleteTag(f,d)},{default:ge(()=>[le("span",{class:$(n.nsSelect.e("tags-text"))},[Ne(n.$slots,"label",{label:n.getLabel(d),value:n.getValue(d)},()=>[Xt(rt(n.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):Be("v-if",!0)]):Be("v-if",!0),le("div",{class:$([n.nsSelect.e("selected-item"),n.nsSelect.e("input-wrapper"),n.nsSelect.is("hidden",!n.filterable)])},[Wt(le("input",{id:n.inputId,ref:"inputRef","onUpdate:modelValue":d=>n.states.inputValue=d,style:Ct(n.inputStyle),autocomplete:n.autocomplete,tabindex:n.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":n.expanded,"aria-label":n.ariaLabel,class:$([n.nsSelect.e("input"),n.nsSelect.is(n.selectSize)]),disabled:n.selectDisabled,role:"combobox",readonly:!n.filterable,spellcheck:"false",type:"text",name:n.name,onInput:n.onInput,onCompositionstart:n.handleCompositionStart,onCompositionupdate:n.handleCompositionUpdate,onCompositionend:n.handleCompositionEnd,onKeydown:[ri(Pt(d=>n.onKeyboardNavigate("backward"),["stop","prevent"]),["up"]),ri(Pt(d=>n.onKeyboardNavigate("forward"),["stop","prevent"]),["down"]),ri(Pt(n.onKeyboardSelect,["stop","prevent"]),["enter"]),ri(Pt(n.handleEsc,["stop","prevent"]),["esc"]),ri(Pt(n.handleDel,["stop"]),["delete"])],onClick:Pt(n.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","onInput","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown","onClick"]),[[jC,n.states.inputValue]]),n.filterable?(F(),ie("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:$(n.nsSelect.e("input-calculator")),textContent:rt(n.states.inputValue)},null,10,["textContent"])):Be("v-if",!0)],2),n.shouldShowPlaceholder?(F(),ie("div",{key:1,class:$([n.nsSelect.e("selected-item"),n.nsSelect.e("placeholder"),n.nsSelect.is("transparent",!n.hasModelValue||n.expanded&&!n.states.inputValue)])},[n.hasModelValue?Ne(n.$slots,"label",{key:0,label:n.currentPlaceholder,value:n.modelValue},()=>[le("span",null,rt(n.currentPlaceholder),1)]):(F(),ie("span",{key:1},rt(n.currentPlaceholder),1))],2)):Be("v-if",!0)],2),le("div",{ref:"suffixRef",class:$(n.nsSelect.e("suffix"))},[n.iconComponent?Wt((F(),He(l,{key:0,class:$([n.nsSelect.e("caret"),n.nsInput.e("icon"),n.iconReverse])},{default:ge(()=>[(F(),He(en(n.iconComponent)))]),_:1},8,["class"])),[[Dn,!n.showClearBtn]]):Be("v-if",!0),n.showClearBtn&&n.clearIcon?(F(),He(l,{key:1,class:$([n.nsSelect.e("caret"),n.nsInput.e("icon"),n.nsSelect.e("clear")]),onClick:Pt(n.handleClear,["prevent","stop"])},{default:ge(()=>[(F(),He(en(n.clearIcon)))]),_:1},8,["class","onClick"])):Be("v-if",!0),n.validateState&&n.validateIcon&&n.needStatusIcon?(F(),He(l,{key:2,class:$([n.nsInput.e("icon"),n.nsInput.e("validateIcon")])},{default:ge(()=>[(F(),He(en(n.validateIcon)))]),_:1},8,["class"])):Be("v-if",!0)],2)],10,["onClick"])]),content:ge(()=>[oe(c,{ref:"menuRef",data:n.filteredOptions,width:n.popperSize,"hovering-index":n.states.hoveringIndex,"scrollbar-always-on":n.scrollbarAlwaysOn},Ro({default:ge(d=>[Ne(n.$slots,"default",nl(Id(d)))]),_:2},[n.$slots.header?{name:"header",fn:ge(()=>[le("div",{class:$(n.nsSelect.be("dropdown","header"))},[Ne(n.$slots,"header")],2)])}:void 0,n.$slots.loading&&n.loading?{name:"loading",fn:ge(()=>[le("div",{class:$(n.nsSelect.be("dropdown","loading"))},[Ne(n.$slots,"loading")],2)])}:n.loading||n.filteredOptions.length===0?{name:"empty",fn:ge(()=>[le("div",{class:$(n.nsSelect.be("dropdown","empty"))},[Ne(n.$slots,"empty",{},()=>[le("span",null,rt(n.emptyText),1)])],2)])}:void 0,n.$slots.footer?{name:"footer",fn:ge(()=>[le("div",{class:$(n.nsSelect.be("dropdown","footer"))},[Ne(n.$slots,"footer")],2)])}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],42,["onMouseenter","onMouseleave"])),[[u,n.handleClickOutside,n.popperRef]])}var Ywe=ot(qwe,[["render",Xwe],["__file","select.vue"]]);const jwe=Ft(Ywe),Qwe=at({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Re([Number,Object])}}),Zwe=at({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),Jwe=ve({name:"ElSkeletonItem"}),e1e=ve({...Jwe,props:Zwe,setup(n){const e=Ze("skeleton");return(t,i)=>(F(),ie("div",{class:$([b(e).e("item"),b(e).e(t.variant)])},[t.variant==="image"?(F(),He(b(xce),{key:0})):Be("v-if",!0)],2))}});var xx=ot(e1e,[["__file","skeleton-item.vue"]]);const t1e=(n,e=0)=>{if(e===0)return n;const t=Yt(e)&&!!e.initVal,i=X(t);let r=null;const s=o=>{if(Wn(o)){i.value=n.value;return}r&&clearTimeout(r),r=setTimeout(()=>{i.value=n.value},o)},a=o=>{o==="leading"?At(e)?s(e):s(e.leading):Yt(e)?s(e.trailing):i.value=!1};return Ht(()=>a("leading")),We(()=>n.value,o=>{a(o?"leading":"trailing")}),i},n1e=ve({name:"ElSkeleton"}),i1e=ve({...n1e,props:Qwe,setup(n,{expose:e}){const t=n,i=Ze("skeleton"),r=t1e(zn(t,"loading"),t.throttle);return e({uiLoading:r}),(s,a)=>b(r)?(F(),ie("div",rn({key:0,class:[b(i).b(),b(i).is("animated",s.animated)]},s.$attrs),[(F(!0),ie(bt,null,sn(s.count,o=>(F(),ie(bt,{key:o},[b(r)?Ne(s.$slots,"template",{key:o},()=>[oe(xx,{class:$(b(i).is("first")),variant:"p"},null,8,["class"]),(F(!0),ie(bt,null,sn(s.rows,l=>(F(),He(xx,{key:l,class:$([b(i).e("paragraph"),b(i).is("last",l===s.rows&&s.rows>1)]),variant:"p"},null,8,["class"]))),128))]):Be("v-if",!0)],64))),128))],16)):Ne(s.$slots,"default",nl(rn({key:1},s.$attrs)))}});var r1e=ot(i1e,[["__file","skeleton.vue"]]);const s1e=Ft(r1e,{SkeletonItem:xx}),a1e=ki(xx),r7=Symbol("sliderContextKey"),o1e=at({modelValue:{type:Re([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:cr,inputSize:cr,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Re(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Re(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:hu,default:"top"},marks:{type:Re(Object)},validateEvent:{type:Boolean,default:!0},...Zr(["ariaLabel"])}),ET=n=>At(n)||nt(n)&&n.every(At),l1e={[Kt]:ET,[ls]:ET,[jn]:ET},c1e=at({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:hu,default:"top"}}),u1e={[Kt]:n=>At(n)},d1e=(n,e,t)=>{const i=X(),r=X(!1),s=N(()=>e.value instanceof Function),a=N(()=>s.value&&e.value(n.modelValue)||n.modelValue),o=wa(()=>{t.value&&(r.value=!0)},50),l=wa(()=>{t.value&&(r.value=!1)},50);return{tooltip:i,tooltipVisible:r,formatValue:a,displayTooltip:o,hideTooltip:l}},f1e=(n,e,t)=>{const{disabled:i,min:r,max:s,step:a,showTooltip:o,precision:l,sliderSize:c,formatTooltip:u,emitChange:d,resetSize:f,updateDragging:h}=mt(r7),{tooltip:p,tooltipVisible:m,formatValue:v,displayTooltip:g,hideTooltip:_}=d1e(n,u,o),y=X(),S=N(()=>`${(n.modelValue-r.value)/(s.value-r.value)*100}%`),w=N(()=>n.vertical?{bottom:S.value}:{left:S.value}),x=()=>{e.hovering=!0,g()},T=()=>{e.hovering=!1,e.dragging||_()},C=q=>{i.value||(q.preventDefault(),k(q),window.addEventListener("mousemove",O),window.addEventListener("touchmove",O),window.addEventListener("mouseup",U),window.addEventListener("touchend",U),window.addEventListener("contextmenu",U),y.value.focus())},M=q=>{i.value||(e.newPosition=Number.parseFloat(S.value)+q/(s.value-r.value)*100,G(e.newPosition),d())},A=()=>{M(-a.value)},E=()=>{M(a.value)},I=()=>{M(-a.value*4)},P=()=>{M(a.value*4)},D=()=>{i.value||(G(0),d())},L=()=>{i.value||(G(100),d())},R=q=>{let W=!0;switch(q.code){case ut.left:case ut.down:A();break;case ut.right:case ut.up:E();break;case ut.home:D();break;case ut.end:L();break;case ut.pageDown:I();break;case ut.pageUp:P();break;default:W=!1;break}W&&q.preventDefault()},B=q=>{let W,Y;return q.type.startsWith("touch")?(Y=q.touches[0].clientY,W=q.touches[0].clientX):(Y=q.clientY,W=q.clientX),{clientX:W,clientY:Y}},k=q=>{e.dragging=!0,e.isClick=!0;const{clientX:W,clientY:Y}=B(q);n.vertical?e.startY=Y:e.startX=W,e.startPosition=Number.parseFloat(S.value),e.newPosition=e.startPosition},O=q=>{if(e.dragging){e.isClick=!1,g(),f();let W;const{clientX:Y,clientY:J}=B(q);n.vertical?(e.currentY=J,W=(e.startY-e.currentY)/c.value*100):(e.currentX=Y,W=(e.currentX-e.startX)/c.value*100),e.newPosition=e.startPosition+W,G(e.newPosition)}},U=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||_(),e.isClick||G(e.newPosition),d()},0),window.removeEventListener("mousemove",O),window.removeEventListener("touchmove",O),window.removeEventListener("mouseup",U),window.removeEventListener("touchend",U),window.removeEventListener("contextmenu",U))},G=async q=>{if(q===null||Number.isNaN(+q))return;q<0?q=0:q>100&&(q=100);const W=100/((s.value-r.value)/a.value);let J=Math.round(q/W)*W*(s.value-r.value)*.01+r.value;J=Number.parseFloat(J.toFixed(l.value)),J!==n.modelValue&&t(Kt,J),!e.dragging&&n.modelValue!==e.oldValue&&(e.oldValue=n.modelValue),await Mt(),e.dragging&&g(),p.value.updatePopper()};return We(()=>e.dragging,q=>{h(q)}),Kn(y,"touchstart",C,{passive:!1}),{disabled:i,button:y,tooltip:p,tooltipVisible:m,showTooltip:o,wrapperStyle:w,formatValue:v,handleMouseEnter:x,handleMouseLeave:T,onButtonDown:C,onKeyDown:R,setPosition:G}},h1e=ve({name:"ElSliderButton"}),p1e=ve({...h1e,props:c1e,emits:u1e,setup(n,{expose:e,emit:t}){const i=n,r=Ze("slider"),s=Nn({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:i.modelValue}),{disabled:a,button:o,tooltip:l,showTooltip:c,tooltipVisible:u,wrapperStyle:d,formatValue:f,handleMouseEnter:h,handleMouseLeave:p,onButtonDown:m,onKeyDown:v,setPosition:g}=f1e(i,s,t),{hovering:_,dragging:y}=Mr(s);return e({onButtonDown:m,onKeyDown:v,setPosition:g,hovering:_,dragging:y}),(S,w)=>(F(),ie("div",{ref_key:"button",ref:o,class:$([b(r).e("button-wrapper"),{hover:b(_),dragging:b(y)}]),style:Ct(b(d)),tabindex:b(a)?-1:0,onMouseenter:b(h),onMouseleave:b(p),onMousedown:b(m),onFocus:b(h),onBlur:b(p),onKeydown:b(v)},[oe(b(us),{ref_key:"tooltip",ref:l,visible:b(u),placement:S.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":S.tooltipClass,disabled:!b(c),persistent:b(c)},{content:ge(()=>[le("span",null,rt(b(f)),1)]),default:ge(()=>[le("div",{class:$([b(r).e("button"),{hover:b(_),dragging:b(y)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var HF=ot(p1e,[["__file","button.vue"]]);const m1e=at({mark:{type:Re([String,Object]),default:void 0}});var v1e=ve({name:"ElSliderMarker",props:m1e,setup(n){const e=Ze("slider"),t=N(()=>xt(n.mark)?n.mark:n.mark.label),i=N(()=>xt(n.mark)?void 0:n.mark.style);return()=>wt("div",{class:e.e("marks-text"),style:i.value},t.value)}});const g1e=(n,e,t)=>{const{form:i,formItem:r}=fs(),s=Yn(),a=X(),o=X(),l={firstButton:a,secondButton:o},c=N(()=>n.disabled||(i==null?void 0:i.disabled)||!1),u=N(()=>Math.min(e.firstValue,e.secondValue)),d=N(()=>Math.max(e.firstValue,e.secondValue)),f=N(()=>n.range?`${100*(d.value-u.value)/(n.max-n.min)}%`:`${100*(e.firstValue-n.min)/(n.max-n.min)}%`),h=N(()=>n.range?`${100*(u.value-n.min)/(n.max-n.min)}%`:"0%"),p=N(()=>n.vertical?{height:n.height}:{}),m=N(()=>n.vertical?{height:f.value,bottom:h.value}:{width:f.value,left:h.value}),v=()=>{s.value&&(e.sliderSize=s.value[`client${n.vertical?"Height":"Width"}`])},g=I=>{const P=n.min+I*(n.max-n.min)/100;if(!n.range)return a;let D;return Math.abs(u.value-P)<Math.abs(d.value-P)?D=e.firstValue<e.secondValue?"firstButton":"secondButton":D=e.firstValue>e.secondValue?"firstButton":"secondButton",l[D]},_=I=>{const P=g(I);return P.value.setPosition(I),P},y=I=>{e.firstValue=I??n.min,w(n.range?[u.value,d.value]:I??n.min)},S=I=>{e.secondValue=I,n.range&&w([u.value,d.value])},w=I=>{t(Kt,I),t(ls,I)},x=async()=>{await Mt(),t(jn,n.range?[u.value,d.value]:n.modelValue)},T=I=>{var P,D,L,R,B,k;if(c.value||e.dragging)return;v();let O=0;if(n.vertical){const U=(L=(D=(P=I.touches)==null?void 0:P.item(0))==null?void 0:D.clientY)!=null?L:I.clientY;O=(s.value.getBoundingClientRect().bottom-U)/e.sliderSize*100}else{const U=(k=(B=(R=I.touches)==null?void 0:R.item(0))==null?void 0:B.clientX)!=null?k:I.clientX,G=s.value.getBoundingClientRect().left;O=(U-G)/e.sliderSize*100}if(!(O<0||O>100))return _(O)};return{elFormItem:r,slider:s,firstButton:a,secondButton:o,sliderDisabled:c,minValue:u,maxValue:d,runwayStyle:p,barStyle:m,resetSize:v,setPosition:_,emitChange:x,onSliderWrapperPrevent:I=>{var P,D;((P=l.firstButton.value)!=null&&P.dragging||(D=l.secondButton.value)!=null&&D.dragging)&&I.preventDefault()},onSliderClick:I=>{T(I)&&x()},onSliderDown:async I=>{const P=T(I);P&&(await Mt(),P.value.onButtonDown(I))},onSliderMarkerDown:I=>{c.value||e.dragging||_(I)},setFirstValue:y,setSecondValue:S}},y1e=(n,e,t,i)=>({stops:N(()=>{if(!n.showStops||n.min>n.max)return[];if(n.step===0)return[];const a=(n.max-n.min)/n.step,o=100*n.step/(n.max-n.min),l=Array.from({length:a-1}).map((c,u)=>(u+1)*o);return n.range?l.filter(c=>c<100*(t.value-n.min)/(n.max-n.min)||c>100*(i.value-n.min)/(n.max-n.min)):l.filter(c=>c>100*(e.firstValue-n.min)/(n.max-n.min))}),getStopStyle:a=>n.vertical?{bottom:`${a}%`}:{left:`${a}%`}}),_1e=n=>N(()=>n.marks?Object.keys(n.marks).map(Number.parseFloat).sort((t,i)=>t-i).filter(t=>t<=n.max&&t>=n.min).map(t=>({point:t,position:(t-n.min)*100/(n.max-n.min),mark:n.marks[t]})):[]),b1e=(n,e,t,i,r,s)=>{const a=c=>{r(Kt,c),r(ls,c)},o=()=>n.range?![t.value,i.value].every((c,u)=>c===e.oldValue[u]):n.modelValue!==e.oldValue,l=()=>{var c,u;n.min>n.max&&_r("Slider","min should not be greater than max.");const d=n.modelValue;n.range&&nt(d)?d[1]<n.min?a([n.min,n.min]):d[0]>n.max?a([n.max,n.max]):d[0]<n.min?a([n.min,d[1]]):d[1]>n.max?a([d[0],n.max]):(e.firstValue=d[0],e.secondValue=d[1],o()&&(n.validateEvent&&((c=s==null?void 0:s.validate)==null||c.call(s,"change").catch(f=>void 0)),e.oldValue=d.slice())):!n.range&&At(d)&&!Number.isNaN(d)&&(d<n.min?a(n.min):d>n.max?a(n.max):(e.firstValue=d,o()&&(n.validateEvent&&((u=s==null?void 0:s.validate)==null||u.call(s,"change").catch(f=>void 0)),e.oldValue=d)))};l(),We(()=>e.dragging,c=>{c||l()}),We(()=>n.modelValue,(c,u)=>{e.dragging||nt(c)&&nt(u)&&c.every((d,f)=>d===u[f])&&e.firstValue===c[0]&&e.secondValue===c[1]||l()},{deep:!0}),We(()=>[n.min,n.max],()=>{l()})},S1e=(n,e,t)=>{const i=X();return Ht(async()=>{n.range?(nt(n.modelValue)?(e.firstValue=Math.max(n.min,n.modelValue[0]),e.secondValue=Math.min(n.max,n.modelValue[1])):(e.firstValue=n.min,e.secondValue=n.max),e.oldValue=[e.firstValue,e.secondValue]):(!At(n.modelValue)||Number.isNaN(n.modelValue)?e.firstValue=n.min:e.firstValue=Math.min(n.max,Math.max(n.min,n.modelValue)),e.oldValue=e.firstValue),Kn(window,"resize",t),await Mt(),t()}),{sliderWrapper:i}},w1e=ve({name:"ElSlider"}),x1e=ve({...w1e,props:o1e,emits:l1e,setup(n,{expose:e,emit:t}){const i=n,r=Ze("slider"),{t:s}=xn(),a=Nn({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:o,slider:l,firstButton:c,secondButton:u,sliderDisabled:d,minValue:f,maxValue:h,runwayStyle:p,barStyle:m,resetSize:v,emitChange:g,onSliderWrapperPrevent:_,onSliderClick:y,onSliderDown:S,onSliderMarkerDown:w,setFirstValue:x,setSecondValue:T}=g1e(i,a,t),{stops:C,getStopStyle:M}=y1e(i,a,f,h),{inputId:A,isLabeledByFormItem:E}=Fo(i,{formItemContext:o}),I=tr(),P=N(()=>i.inputSize||I.value),D=N(()=>i.ariaLabel||s("el.slider.defaultLabel",{min:i.min,max:i.max})),L=N(()=>i.range?i.rangeStartLabel||s("el.slider.defaultRangeStartLabel"):D.value),R=N(()=>i.formatValueText?i.formatValueText(W.value):`${W.value}`),B=N(()=>i.rangeEndLabel||s("el.slider.defaultRangeEndLabel")),k=N(()=>i.formatValueText?i.formatValueText(Y.value):`${Y.value}`),O=N(()=>[r.b(),r.m(I.value),r.is("vertical",i.vertical),{[r.m("with-input")]:i.showInput}]),U=_1e(i);b1e(i,a,f,h,t,o);const G=N(()=>{const ee=[i.min,i.max,i.step].map(me=>{const ye=`${me}`.split(".")[1];return ye?ye.length:0});return Math.max.apply(null,ee)}),{sliderWrapper:q}=S1e(i,a,v),{firstValue:W,secondValue:Y,sliderSize:J}=Mr(a),Z=ee=>{a.dragging=ee};return Kn(q,"touchstart",_,{passive:!1}),Kn(q,"touchmove",_,{passive:!1}),un(r7,{...Mr(i),sliderSize:J,disabled:d,precision:G,emitChange:g,resetSize:v,updateDragging:Z}),e({onSliderClick:y}),(ee,me)=>{var ye,Te;return F(),ie("div",{id:ee.range?b(A):void 0,ref_key:"sliderWrapper",ref:q,class:$(b(O)),role:ee.range?"group":void 0,"aria-label":ee.range&&!b(E)?b(D):void 0,"aria-labelledby":ee.range&&b(E)?(ye=b(o))==null?void 0:ye.labelId:void 0},[le("div",{ref_key:"slider",ref:l,class:$([b(r).e("runway"),{"show-input":ee.showInput&&!ee.range},b(r).is("disabled",b(d))]),style:Ct(b(p)),onMousedown:b(S),onTouchstartPassive:b(S)},[le("div",{class:$(b(r).e("bar")),style:Ct(b(m))},null,6),oe(HF,{id:ee.range?void 0:b(A),ref_key:"firstButton",ref:c,"model-value":b(W),vertical:ee.vertical,"tooltip-class":ee.tooltipClass,placement:ee.placement,role:"slider","aria-label":ee.range||!b(E)?b(L):void 0,"aria-labelledby":!ee.range&&b(E)?(Te=b(o))==null?void 0:Te.labelId:void 0,"aria-valuemin":ee.min,"aria-valuemax":ee.range?b(Y):ee.max,"aria-valuenow":b(W),"aria-valuetext":b(R),"aria-orientation":ee.vertical?"vertical":"horizontal","aria-disabled":b(d),"onUpdate:modelValue":b(x)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),ee.range?(F(),He(HF,{key:0,ref_key:"secondButton",ref:u,"model-value":b(Y),vertical:ee.vertical,"tooltip-class":ee.tooltipClass,placement:ee.placement,role:"slider","aria-label":b(B),"aria-valuemin":b(W),"aria-valuemax":ee.max,"aria-valuenow":b(Y),"aria-valuetext":b(k),"aria-orientation":ee.vertical?"vertical":"horizontal","aria-disabled":b(d),"onUpdate:modelValue":b(T)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):Be("v-if",!0),ee.showStops?(F(),ie("div",{key:1},[(F(!0),ie(bt,null,sn(b(C),(Ee,H)=>(F(),ie("div",{key:H,class:$(b(r).e("stop")),style:Ct(b(M)(Ee))},null,6))),128))])):Be("v-if",!0),b(U).length>0?(F(),ie(bt,{key:2},[le("div",null,[(F(!0),ie(bt,null,sn(b(U),(Ee,H)=>(F(),ie("div",{key:H,style:Ct(b(M)(Ee.position)),class:$([b(r).e("stop"),b(r).e("marks-stop")])},null,6))),128))]),le("div",{class:$(b(r).e("marks"))},[(F(!0),ie(bt,null,sn(b(U),(Ee,H)=>(F(),He(b(v1e),{key:H,mark:Ee.mark,style:Ct(b(M)(Ee.position)),onMousedown:Pt(Q=>b(w)(Ee.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):Be("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),ee.showInput&&!ee.range?(F(),He(b(B9),{key:0,ref:"input","model-value":b(W),class:$(b(r).e("input")),step:ee.step,disabled:b(d),controls:ee.showInputControls,min:ee.min,max:ee.max,precision:b(G),debounce:ee.debounce,size:b(P),"onUpdate:modelValue":b(x),onChange:b(g)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):Be("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var C1e=ot(x1e,[["__file","slider.vue"]]);const M1e=Ft(C1e),T1e=at({prefixCls:{type:String}}),VF=ve({name:"ElSpaceItem",props:T1e,setup(n,{slots:e}){const t=Ze("space"),i=N(()=>`${n.prefixCls||t.b()}__item`);return()=>wt("div",{class:i.value},Ne(e,"default"))}}),$F={small:8,default:12,large:16};function A1e(n){const e=Ze("space"),t=N(()=>[e.b(),e.m(n.direction),n.class]),i=X(0),r=X(0),s=N(()=>{const o=n.wrap||n.fill?{flexWrap:"wrap"}:{},l={alignItems:n.alignment},c={rowGap:`${r.value}px`,columnGap:`${i.value}px`};return[o,l,c,n.style]}),a=N(()=>n.fill?{flexGrow:1,minWidth:`${n.fillRatio}%`}:{});return zr(()=>{const{size:o="small",wrap:l,direction:c,fill:u}=n;if(nt(o)){const[d=0,f=0]=o;i.value=d,r.value=f}else{let d;At(o)?d=o:d=$F[o||"small"]||$F.small,(l||u)&&c==="horizontal"?i.value=r.value=d:c==="horizontal"?(i.value=d,r.value=0):(r.value=d,i.value=0)}}),{classes:t,containerStyle:s,itemStyle:a}}const E1e=at({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:Re([String,Object,Array]),default:""},style:{type:Re([String,Array,Object]),default:""},alignment:{type:Re(String),default:"center"},prefixCls:{type:String},spacer:{type:Re([Object,String,Number,Array]),default:null,validator:n=>Pi(n)||At(n)||xt(n)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:nc,validator:n=>At(n)||nt(n)&&n.length===2&&n.every(At)}}),I1e=ve({name:"ElSpace",props:E1e,setup(n,{slots:e}){const{classes:t,containerStyle:i,itemStyle:r}=A1e(n);function s(a,o="",l=[]){const{prefixCls:c}=n;return a.forEach((u,d)=>{lI(u)?nt(u.children)&&u.children.forEach((f,h)=>{lI(f)&&nt(f.children)?s(f.children,`${o+h}-`,l):l.push(oe(VF,{style:r.value,prefixCls:c,key:`nested-${o+h}`},{default:()=>[f]},oo.PROPS|oo.STYLE,["style","prefixCls"]))}):Spe(u)&&l.push(oe(VF,{style:r.value,prefixCls:c,key:`LoopKey${o+d}`},{default:()=>[u]},oo.PROPS|oo.STYLE,["style","prefixCls"]))}),l}return()=>{var a;const{spacer:o,direction:l}=n,c=Ne(e,"default",{key:0},()=>[]);if(((a=c.children)!=null?a:[]).length===0)return null;if(nt(c.children)){let u=s(c.children);if(o){const d=u.length-1;u=u.reduce((f,h,p)=>{const m=[...f,h];return p!==d&&m.push(oe("span",{style:[r.value,l==="vertical"?"width: 100%":null],key:p},[Pi(o)?o:Xt(o,oo.TEXT)],oo.STYLE)),m},[])}return oe("div",{class:t.value,style:i.value},u,oo.STYLE|oo.CLASS)}return c.children}}}),R1e=Ft(I1e),P1e=at({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:Re([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:Re([String,Object,Array])}}),D1e=ve({name:"ElStatistic"}),L1e=ve({...D1e,props:P1e,setup(n,{expose:e}){const t=n,i=Ze("statistic"),r=N(()=>{const{value:s,formatter:a,precision:o,decimalSeparator:l,groupSeparator:c}=t;if(Tt(a))return a(s);if(!At(s)||Number.isNaN(s))return s;let[u,d=""]=String(s).split(".");return d=d.padEnd(o,"0").slice(0,o>0?o:0),u=u.replace(/\B(?=(\d{3})+(?!\d))/g,c),[u,d].join(d?l:"")});return e({displayValue:r}),(s,a)=>(F(),ie("div",{class:$(b(i).b())},[s.$slots.title||s.title?(F(),ie("div",{key:0,class:$(b(i).e("head"))},[Ne(s.$slots,"title",{},()=>[Xt(rt(s.title),1)])],2)):Be("v-if",!0),le("div",{class:$(b(i).e("content"))},[s.$slots.prefix||s.prefix?(F(),ie("div",{key:0,class:$(b(i).e("prefix"))},[Ne(s.$slots,"prefix",{},()=>[le("span",null,rt(s.prefix),1)])],2)):Be("v-if",!0),le("span",{class:$(b(i).e("number")),style:Ct(s.valueStyle)},rt(b(r)),7),s.$slots.suffix||s.suffix?(F(),ie("div",{key:1,class:$(b(i).e("suffix"))},[Ne(s.$slots,"suffix",{},()=>[le("span",null,rt(s.suffix),1)])],2)):Be("v-if",!0)],2)],2))}});var k1e=ot(L1e,[["__file","statistic.vue"]]);const s7=Ft(k1e),O1e=at({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:Re([Number,Object]),default:0},valueStyle:{type:Re([String,Object,Array])}}),N1e={finish:()=>!0,[jn]:n=>At(n)},B1e=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],GF=n=>At(n)?new Date(n).getTime():n.valueOf(),WF=(n,e)=>{let t=n;const i=/\[([^\]]*)]/g;return B1e.reduce((s,[a,o])=>{const l=new RegExp(`${a}+(?![^\\[\\]]*\\])`,"g");if(l.test(s)){const c=Math.floor(t/o);return t-=c*o,s.replace(l,u=>String(c).padStart(u.length,"0"))}return s},e).replace(i,"$1")},F1e=ve({name:"ElCountdown"}),z1e=ve({...F1e,props:O1e,emits:N1e,setup(n,{expose:e,emit:t}){const i=n;let r;const s=X(0),a=N(()=>WF(s.value,i.format)),o=u=>WF(u,i.format),l=()=>{r&&(Fh(r),r=void 0)},c=()=>{const u=GF(i.value),d=()=>{let f=u-Date.now();t("change",f),f<=0?(f=0,l(),t("finish")):r=Dd(d),s.value=f};r=Dd(d)};return Ht(()=>{s.value=GF(i.value)-Date.now(),We(()=>[i.value,i.format],()=>{l(),c()},{immediate:!0})}),Un(()=>{l()}),e({displayValue:a}),(u,d)=>(F(),He(b(s7),{value:s.value,title:u.title,prefix:u.prefix,suffix:u.suffix,"value-style":u.valueStyle,formatter:o},Ro({_:2},[sn(u.$slots,(f,h)=>({name:h,fn:ge(()=>[Ne(u.$slots,h)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var U1e=ot(z1e,[["__file","countdown.vue"]]);const H1e=Ft(U1e),V1e=at({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),$1e={[jn]:(n,e)=>[n,e].every(At)},G1e=ve({name:"ElSteps"}),W1e=ve({...G1e,props:V1e,emits:$1e,setup(n,{emit:e}){const t=n,i=Ze("steps"),{children:r,addChild:s,removeChild:a}=GL(jt(),"ElStep");return We(r,()=>{r.value.forEach((o,l)=>{o.setIndex(l)})}),un("ElSteps",{props:t,steps:r,addStep:s,removeStep:a}),We(()=>t.active,(o,l)=>{e(jn,o,l)}),(o,l)=>(F(),ie("div",{class:$([b(i).b(),b(i).m(o.simple?"simple":o.direction)])},[Ne(o.$slots,"default")],2))}});var K1e=ot(W1e,[["__file","steps.vue"]]);const q1e=at({title:{type:String,default:""},icon:{type:Zn},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),X1e=ve({name:"ElStep"}),Y1e=ve({...X1e,props:q1e,setup(n){const e=n,t=Ze("step"),i=X(-1),r=X({}),s=X(""),a=mt("ElSteps"),o=jt();Ht(()=>{We([()=>a.props.active,()=>a.props.processStatus,()=>a.props.finishStatus],([x])=>{S(x)},{immediate:!0})}),Un(()=>{a.removeStep(w.uid)});const l=N(()=>e.status||s.value),c=N(()=>{const x=a.steps.value[i.value-1];return x?x.currentStatus:"wait"}),u=N(()=>a.props.alignCenter),d=N(()=>a.props.direction==="vertical"),f=N(()=>a.props.simple),h=N(()=>a.steps.value.length),p=N(()=>{var x;return((x=a.steps.value[h.value-1])==null?void 0:x.uid)===(o==null?void 0:o.uid)}),m=N(()=>f.value?"":a.props.space),v=N(()=>[t.b(),t.is(f.value?"simple":a.props.direction),t.is("flex",p.value&&!m.value&&!u.value),t.is("center",u.value&&!d.value&&!f.value)]),g=N(()=>{const x={flexBasis:At(m.value)?`${m.value}px`:m.value?m.value:`${100/(h.value-(u.value?0:1))}%`};return d.value||p.value&&(x.maxWidth=`${100/h.value}%`),x}),_=x=>{i.value=x},y=x=>{const T=x==="wait",C={transitionDelay:`${T?"-":""}${150*i.value}ms`},M=x===a.props.processStatus||T?0:100;C.borderWidth=M&&!f.value?"1px":0,C[a.props.direction==="vertical"?"height":"width"]=`${M}%`,r.value=C},S=x=>{x>i.value?s.value=a.props.finishStatus:x===i.value&&c.value!=="error"?s.value=a.props.processStatus:s.value="wait";const T=a.steps.value[i.value-1];T&&T.calcProgress(s.value)},w=Nn({uid:o.uid,currentStatus:l,setIndex:_,calcProgress:y});return a.addStep(w),(x,T)=>(F(),ie("div",{style:Ct(b(g)),class:$(b(v))},[Be(" icon & line "),le("div",{class:$([b(t).e("head"),b(t).is(b(l))])},[b(f)?Be("v-if",!0):(F(),ie("div",{key:0,class:$(b(t).e("line"))},[le("i",{class:$(b(t).e("line-inner")),style:Ct(r.value)},null,6)],2)),le("div",{class:$([b(t).e("icon"),b(t).is(x.icon||x.$slots.icon?"icon":"text")])},[Ne(x.$slots,"icon",{},()=>[x.icon?(F(),He(b(_t),{key:0,class:$(b(t).e("icon-inner"))},{default:ge(()=>[(F(),He(en(x.icon)))]),_:1},8,["class"])):b(l)==="success"?(F(),He(b(_t),{key:1,class:$([b(t).e("icon-inner"),b(t).is("status")])},{default:ge(()=>[oe(b(ob))]),_:1},8,["class"])):b(l)==="error"?(F(),He(b(_t),{key:2,class:$([b(t).e("icon-inner"),b(t).is("status")])},{default:ge(()=>[oe(b(fl))]),_:1},8,["class"])):b(f)?Be("v-if",!0):(F(),ie("div",{key:3,class:$(b(t).e("icon-inner"))},rt(i.value+1),3))])],2)],2),Be(" title & description "),le("div",{class:$(b(t).e("main"))},[le("div",{class:$([b(t).e("title"),b(t).is(b(l))])},[Ne(x.$slots,"title",{},()=>[Xt(rt(x.title),1)])],2),b(f)?(F(),ie("div",{key:0,class:$(b(t).e("arrow"))},null,2)):(F(),ie("div",{key:1,class:$([b(t).e("description"),b(t).is(b(l))])},[Ne(x.$slots,"description",{},()=>[Xt(rt(x.description),1)])],2))],2)],6))}});var a7=ot(Y1e,[["__file","item.vue"]]);const j1e=Ft(K1e,{Step:a7}),Q1e=ki(a7),o7=n=>["",...nc].includes(n),Z1e=at({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:o7},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:Zn},activeActionIcon:{type:Zn},activeIcon:{type:Zn},inactiveIcon:{type:Zn},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:Re(Function)},id:String,tabindex:{type:[String,Number]},...Zr(["ariaLabel"])}),J1e={[Kt]:n=>ai(n)||xt(n)||At(n),[jn]:n=>ai(n)||xt(n)||At(n),[ls]:n=>ai(n)||xt(n)||At(n)},l7="ElSwitch",exe=ve({name:l7}),txe=ve({...exe,props:Z1e,emits:J1e,setup(n,{expose:e,emit:t}){const i=n,{formItem:r}=fs(),s=tr(),a=Ze("switch"),{inputId:o}=Fo(i,{formItemContext:r}),l=hs(N(()=>i.loading)),c=X(i.modelValue!==!1),u=X(),d=X(),f=N(()=>[a.b(),a.m(s.value),a.is("disabled",l.value),a.is("checked",g.value)]),h=N(()=>[a.e("label"),a.em("label","left"),a.is("active",!g.value)]),p=N(()=>[a.e("label"),a.em("label","right"),a.is("active",g.value)]),m=N(()=>({width:Ui(i.width)}));We(()=>i.modelValue,()=>{c.value=!0});const v=N(()=>c.value?i.modelValue:!1),g=N(()=>v.value===i.activeValue);[i.activeValue,i.inactiveValue].includes(v.value)||(t(Kt,i.inactiveValue),t(jn,i.inactiveValue),t(ls,i.inactiveValue)),We(g,w=>{var x;u.value.checked=w,i.validateEvent&&((x=r==null?void 0:r.validate)==null||x.call(r,"change").catch(T=>void 0))});const _=()=>{const w=g.value?i.inactiveValue:i.activeValue;t(Kt,w),t(jn,w),t(ls,w),Mt(()=>{u.value.checked=g.value})},y=()=>{if(l.value)return;const{beforeChange:w}=i;if(!w){_();return}const x=w();[Fy(x),ai(x)].includes(!0)||_r(l7,"beforeChange must return type `Promise<boolean>` or `boolean`"),Fy(x)?x.then(C=>{C&&_()}).catch(C=>{}):x&&_()},S=()=>{var w,x;(x=(w=u.value)==null?void 0:w.focus)==null||x.call(w)};return Ht(()=>{u.value.checked=g.value}),e({focus:S,checked:g}),(w,x)=>(F(),ie("div",{class:$(b(f)),onClick:Pt(y,["prevent"])},[le("input",{id:b(o),ref_key:"input",ref:u,class:$(b(a).e("input")),type:"checkbox",role:"switch","aria-checked":b(g),"aria-disabled":b(l),"aria-label":w.ariaLabel,name:w.name,"true-value":w.activeValue,"false-value":w.inactiveValue,disabled:b(l),tabindex:w.tabindex,onChange:_,onKeydown:ri(y,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!w.inlinePrompt&&(w.inactiveIcon||w.inactiveText)?(F(),ie("span",{key:0,class:$(b(h))},[w.inactiveIcon?(F(),He(b(_t),{key:0},{default:ge(()=>[(F(),He(en(w.inactiveIcon)))]),_:1})):Be("v-if",!0),!w.inactiveIcon&&w.inactiveText?(F(),ie("span",{key:1,"aria-hidden":b(g)},rt(w.inactiveText),9,["aria-hidden"])):Be("v-if",!0)],2)):Be("v-if",!0),le("span",{ref_key:"core",ref:d,class:$(b(a).e("core")),style:Ct(b(m))},[w.inlinePrompt?(F(),ie("div",{key:0,class:$(b(a).e("inner"))},[w.activeIcon||w.inactiveIcon?(F(),He(b(_t),{key:0,class:$(b(a).is("icon"))},{default:ge(()=>[(F(),He(en(b(g)?w.activeIcon:w.inactiveIcon)))]),_:1},8,["class"])):w.activeText||w.inactiveText?(F(),ie("span",{key:1,class:$(b(a).is("text")),"aria-hidden":!b(g)},rt(b(g)?w.activeText:w.inactiveText),11,["aria-hidden"])):Be("v-if",!0)],2)):Be("v-if",!0),le("div",{class:$(b(a).e("action"))},[w.loading?(F(),He(b(_t),{key:0,class:$(b(a).is("loading"))},{default:ge(()=>[oe(b(ql))]),_:1},8,["class"])):b(g)?Ne(w.$slots,"active-action",{key:1},()=>[w.activeActionIcon?(F(),He(b(_t),{key:0},{default:ge(()=>[(F(),He(en(w.activeActionIcon)))]),_:1})):Be("v-if",!0)]):b(g)?Be("v-if",!0):Ne(w.$slots,"inactive-action",{key:2},()=>[w.inactiveActionIcon?(F(),He(b(_t),{key:0},{default:ge(()=>[(F(),He(en(w.inactiveActionIcon)))]),_:1})):Be("v-if",!0)])],2)],6),!w.inlinePrompt&&(w.activeIcon||w.activeText)?(F(),ie("span",{key:1,class:$(b(p))},[w.activeIcon?(F(),He(b(_t),{key:0},{default:ge(()=>[(F(),He(en(w.activeIcon)))]),_:1})):Be("v-if",!0),!w.activeIcon&&w.activeText?(F(),ie("span",{key:1,"aria-hidden":!b(g)},rt(w.activeText),9,["aria-hidden"])):Be("v-if",!0)],2)):Be("v-if",!0)],10,["onClick"]))}});var nxe=ot(txe,[["__file","switch.vue"]]);const ixe=Ft(nxe),IT=function(n){var e;return(e=n.target)==null?void 0:e.closest("td")},rxe=function(n,e,t,i,r){if(!e&&!i&&(!r||nt(r)&&!r.length))return n;xt(t)?t=t==="descending"?-1:1:t=t&&t<0?-1:1;const s=i?null:function(o,l){return r?(nt(r)||(r=[r]),r.map(c=>xt(c)?Yi(o,c):c(o,l,n))):(e!=="$key"&&Yt(o)&&"$value"in o&&(o=o.$value),[Yt(o)?Yi(o,e):o])},a=function(o,l){if(i)return i(o.value,l.value);for(let c=0,u=o.key.length;c<u;c++){if(o.key[c]<l.key[c])return-1;if(o.key[c]>l.key[c])return 1}return 0};return n.map((o,l)=>({value:o,index:l,key:s?s(o,l):null})).sort((o,l)=>{let c=a(o,l);return c||(c=o.index-l.index),c*+t}).map(o=>o.value)},c7=function(n,e){let t=null;return n.columns.forEach(i=>{i.id===e&&(t=i)}),t},sxe=function(n,e){let t=null;for(let i=0;i<n.columns.length;i++){const r=n.columns[i];if(r.columnKey===e){t=r;break}}return t||_r("ElTable",`No column matching with column-key: ${e}`),t},KF=function(n,e,t){const i=(e.className||"").match(new RegExp(`${t}-table_[^\\s]+`,"gm"));return i?c7(n,i[0]):null},Es=(n,e)=>{if(!n)throw new Error("Row is required when get row identity");if(xt(e)){if(!e.includes("."))return`${n[e]}`;const t=e.split(".");let i=n;for(const r of t)i=i[r];return`${i}`}else if(Tt(e))return e.call(null,n)},ch=function(n,e){const t={};return(n||[]).forEach((i,r)=>{t[Es(i,e)]={row:i,index:r}}),t};function axe(n,e){const t={};let i;for(i in n)t[i]=n[i];for(i in e)if(Cn(e,i)){const r=e[i];typeof r<"u"&&(t[i]=r)}return t}function m3(n){return n===""||n!==void 0&&(n=Number.parseInt(n,10),Number.isNaN(n)&&(n="")),n}function u7(n){return n===""||n!==void 0&&(n=m3(n),Number.isNaN(n)&&(n=80)),n}function oxe(n){return At(n)?n:xt(n)?/^\d+(?:px)?$/.test(n)?Number.parseInt(n,10):n:null}function lxe(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function Cx(n,e,t,i,r,s){let a=s??0,o=!1;const l=n.indexOf(e),c=l!==-1,u=r==null?void 0:r.call(null,e,s),d=h=>{h==="add"?n.push(e):n.splice(l,1),o=!0},f=h=>{let p=0;const m=(i==null?void 0:i.children)&&h[i.children];return m&&nt(m)&&(p+=m.length,m.forEach(v=>{p+=f(v)})),p};return(!r||u)&&(ai(t)?t&&!c?d("add"):!t&&c&&d("remove"):d(c?"remove":"add")),!(i!=null&&i.checkStrictly)&&(i!=null&&i.children)&&nt(e[i.children])&&e[i.children].forEach(h=>{Cx(n,h,t??!c,i,r,a+1),a+=f(h)+1}),o}function cxe(n,e,t="children",i="hasChildren"){const r=a=>!(nt(a)&&a.length);function s(a,o,l){e(a,o,l),o.forEach(c=>{if(c[i]){e(c,null,l+1);return}const u=c[t];r(u)||s(c,u,l+1)})}n.forEach(a=>{if(a[i]){e(a,null,0);return}const o=a[t];r(o)||s(a,o,0)})}const qF=(n,e)=>({content:e,...n,popperOptions:{strategy:"fixed",...n.popperOptions}});let no=null;function uxe(n,e,t,i){if((no==null?void 0:no.trigger)===t){gG(no.vm.component.props,qF(n,e));return}no==null||no();const r=i==null?void 0:i.refs.tableWrapper,s=r==null?void 0:r.dataset.prefix,a=oe(us,{virtualTriggering:!0,virtualRef:t,appendTo:r,placement:"top",transition:"none",offset:0,hideAfter:0,...qF(n,e)});a.appContext={...i.appContext,...i};const o=document.createElement("div");Rd(a,o),a.component.exposed.onOpen();const l=r==null?void 0:r.querySelector(`.${s}-scrollbar__wrap`);no=()=>{Rd(null,o),l==null||l.removeEventListener("scroll",no),no=null},no.trigger=t,no.vm=a,l==null||l.addEventListener("scroll",no)}function d7(n){return n.children?loe(n.children,d7):[n]}function XF(n,e){return n+e.colSpan}const f7=(n,e,t,i)=>{let r=0,s=n;const a=t.states.columns.value;if(i){const l=d7(i[n]);r=a.slice(0,a.indexOf(l[0])).reduce(XF,0),s=r+l.reduce(XF,0)-1}else r=n;let o;switch(e){case"left":s<t.states.fixedLeafColumnsLength.value&&(o="left");break;case"right":r>=a.length-t.states.rightFixedLeafColumnsLength.value&&(o="right");break;default:s<t.states.fixedLeafColumnsLength.value?o="left":r>=a.length-t.states.rightFixedLeafColumnsLength.value&&(o="right")}return o?{direction:o,start:r,after:s}:{}},v3=(n,e,t,i,r,s=0)=>{const a=[],{direction:o,start:l,after:c}=f7(e,t,i,r);if(o){const u=o==="left";a.push(`${n}-fixed-column--${o}`),u&&c+s===i.states.fixedLeafColumnsLength.value-1?a.push("is-last-column"):!u&&l-s===i.states.columns.value.length-i.states.rightFixedLeafColumnsLength.value&&a.push("is-first-column")}return a};function YF(n,e){return n+(e.realWidth===null||Number.isNaN(e.realWidth)?Number(e.width):e.realWidth)}const g3=(n,e,t,i)=>{const{direction:r,start:s=0,after:a=0}=f7(n,e,t,i);if(!r)return;const o={},l=r==="left",c=t.states.columns.value;return l?o.left=c.slice(0,s).reduce(YF,0):o.right=c.slice(a+1).reverse().reduce(YF,0),o},Dv=(n,e)=>{n&&(Number.isNaN(n[e])||(n[e]=`${n[e]}px`))};function dxe(n){const e=jt(),t=X(!1),i=X([]);return{updateExpandRows:()=>{const l=n.data.value||[],c=n.rowKey.value;if(t.value)i.value=l.slice();else if(c){const u=ch(i.value,c);i.value=l.reduce((d,f)=>{const h=Es(f,c);return u[h]&&d.push(f),d},[])}else i.value=[]},toggleRowExpansion:(l,c)=>{Cx(i.value,l,c)&&e.emit("expand-change",l,i.value.slice())},setExpandRowKeys:l=>{e.store.assertRowKey();const c=n.data.value||[],u=n.rowKey.value,d=ch(c,u);i.value=l.reduce((f,h)=>{const p=d[h];return p&&f.push(p.row),f},[])},isRowExpanded:l=>{const c=n.rowKey.value;return c?!!ch(i.value,c)[Es(l,c)]:i.value.includes(l)},states:{expandRows:i,defaultExpandAll:t}}}function fxe(n){const e=jt(),t=X(null),i=X(null),r=c=>{e.store.assertRowKey(),t.value=c,a(c)},s=()=>{t.value=null},a=c=>{const{data:u,rowKey:d}=n;let f=null;d.value&&(f=(b(u)||[]).find(h=>Es(h,d.value)===c)),i.value=f,e.emit("current-change",i.value,null)};return{setCurrentRowKey:r,restoreCurrentRowKey:s,setCurrentRowByKey:a,updateCurrentRow:c=>{const u=i.value;if(c&&c!==u){i.value=c,e.emit("current-change",i.value,u);return}!c&&u&&(i.value=null,e.emit("current-change",null,u))},updateCurrentRowData:()=>{const c=n.rowKey.value,u=n.data.value||[],d=i.value;if(!u.includes(d)&&d){if(c){const f=Es(d,c);a(f)}else i.value=null;i.value===null&&e.emit("current-change",null,d)}else t.value&&(a(t.value),s())},states:{_currentRowKey:t,currentRow:i}}}function hxe(n){const e=X([]),t=X({}),i=X(16),r=X(!1),s=X({}),a=X("hasChildren"),o=X("children"),l=X(!1),c=jt(),u=N(()=>{if(!n.rowKey.value)return{};const y=n.data.value||[];return f(y)}),d=N(()=>{const y=n.rowKey.value,S=Object.keys(s.value),w={};return S.length&&S.forEach(x=>{if(s.value[x].length){const T={children:[]};s.value[x].forEach(C=>{const M=Es(C,y);T.children.push(M),C[a.value]&&!w[M]&&(w[M]={children:[]})}),w[x]=T}}),w}),f=y=>{const S=n.rowKey.value,w={};return cxe(y,(x,T,C)=>{const M=Es(x,S);nt(T)?w[M]={children:T.map(A=>Es(A,S)),level:C}:r.value&&(w[M]={children:[],lazy:!0,level:C})},o.value,a.value),w},h=(y=!1,S=(w=>(w=c.store)==null?void 0:w.states.defaultExpandAll.value)())=>{var w;const x=u.value,T=d.value,C=Object.keys(x),M={};if(C.length){const A=b(t),E=[],I=(D,L)=>{if(y)return e.value?S||e.value.includes(L):!!(S||D!=null&&D.expanded);{const R=S||e.value&&e.value.includes(L);return!!(D!=null&&D.expanded||R)}};C.forEach(D=>{const L=A[D],R={...x[D]};if(R.expanded=I(L,D),R.lazy){const{loaded:B=!1,loading:k=!1}=L||{};R.loaded=!!B,R.loading=!!k,E.push(D)}M[D]=R});const P=Object.keys(T);r.value&&P.length&&E.length&&P.forEach(D=>{const L=A[D],R=T[D].children;if(E.includes(D)){if(M[D].children.length!==0)throw new Error("[ElTable]children must be an empty array.");M[D].children=R}else{const{loaded:B=!1,loading:k=!1}=L||{};M[D]={lazy:!0,loaded:!!B,loading:!!k,expanded:I(L,D),children:R,level:""}}})}t.value=M,(w=c.store)==null||w.updateTableScrollY()};We(()=>e.value,()=>{h(!0)}),We(()=>u.value,()=>{h()}),We(()=>d.value,()=>{h()});const p=y=>{e.value=y,h()},m=(y,S)=>{c.store.assertRowKey();const w=n.rowKey.value,x=Es(y,w),T=x&&t.value[x];if(x&&T&&"expanded"in T){const C=T.expanded;S=Wn(S)?!T.expanded:S,t.value[x].expanded=S,C!==S&&c.emit("expand-change",y,S),c.store.updateTableScrollY()}},v=y=>{c.store.assertRowKey();const S=n.rowKey.value,w=Es(y,S),x=t.value[w];r.value&&x&&"loaded"in x&&!x.loaded?g(y,w,x):m(y,void 0)},g=(y,S,w)=>{const{load:x}=c.props;x&&!t.value[S].loaded&&(t.value[S].loading=!0,x(y,w,T=>{if(!nt(T))throw new TypeError("[ElTable] data must be an array");t.value[S].loading=!1,t.value[S].loaded=!0,t.value[S].expanded=!0,T.length&&(s.value[S]=T),c.emit("expand-change",y,!0)}))};return{loadData:g,loadOrToggle:v,toggleTreeExpansion:m,updateTreeExpandKeys:p,updateTreeData:h,updateKeyChildren:(y,S)=>{const{lazy:w,rowKey:x}=c.props;if(w){if(!x)throw new Error("[Table] rowKey is required in updateKeyChild");s.value[y]&&(s.value[y]=S)}},normalize:f,states:{expandRowKeys:e,treeData:t,indent:i,lazy:r,lazyTreeNodeMap:s,lazyColumnIdentifier:a,childrenColumnName:o,checkStrictly:l}}}const pxe=(n,e)=>{const t=e.sortingColumn;return!t||xt(t.sortable)?n:rxe(n,e.sortProp,e.sortOrder,t.sortMethod,t.sortBy)},f1=n=>{const e=[];return n.forEach(t=>{t.children&&t.children.length>0?e.push.apply(e,f1(t.children)):e.push(t)}),e};function mxe(){var n;const e=jt(),{size:t}=Mr((n=e.proxy)==null?void 0:n.$props),i=X(null),r=X([]),s=X([]),a=X(!1),o=X([]),l=X([]),c=X([]),u=X([]),d=X([]),f=X([]),h=X([]),p=X([]),m=[],v=X(0),g=X(0),_=X(0),y=X(!1),S=X([]),w=X(!1),x=X(!1),T=X(null),C=X({}),M=X(null),A=X(null),E=X(null),I=X(null),P=X(null);We(r,()=>{var V;e.state&&(k(!1),e.props.tableLayout==="auto"&&((V=e.refs.tableHeaderRef)==null||V.updateFixedColumnStyle()))},{deep:!0});const D=()=>{if(!i.value)throw new Error("[ElTable] prop row-key is required")},L=V=>{var re;(re=V.children)==null||re.forEach(te=>{te.fixed=V.fixed,L(te)})};let R;const B=()=>{o.value.forEach(se=>{L(se)}),u.value=o.value.filter(se=>se.fixed===!0||se.fixed==="left"),d.value=o.value.filter(se=>se.fixed==="right"),Wn(R)&&o.value[0]&&o.value[0].type==="selection"&&(R=!!o.value[0].fixed),u.value.length>0&&o.value[0]&&o.value[0].type==="selection"&&(o.value[0].fixed?u.value.some(de=>de.type!=="selection")?R=void 0:(o.value[0].fixed=R,R||u.value.shift()):(o.value[0].fixed=!0,u.value.unshift(o.value[0])));const V=o.value.filter(se=>!se.fixed);l.value=[].concat(u.value).concat(V).concat(d.value);const re=f1(V),te=f1(u.value),pe=f1(d.value);v.value=re.length,g.value=te.length,_.value=pe.length,c.value=[].concat(te).concat(re).concat(pe),a.value=u.value.length>0||d.value.length>0},k=(V,re=!1)=>{V&&B(),re?e.state.doLayout():e.state.debouncedUpdateLayout()},O=V=>S.value.some(re=>jr(re,V)),U=()=>{y.value=!1;const V=S.value;S.value=[],V.length&&e.emit("selection-change",[])},G=()=>{let V;if(i.value){V=[];const re=ch(S.value,i.value),te=ch(r.value,i.value);for(const pe in re)Cn(re,pe)&&!te[pe]&&V.push(re[pe].row)}else V=S.value.filter(re=>!r.value.includes(re));if(V.length){const re=S.value.filter(te=>!V.includes(te));S.value=re,e.emit("selection-change",re.slice())}},q=()=>(S.value||[]).slice(),W=(V,re,te=!0,pe=!1)=>{var se,de,qe,fe;const Je={children:(de=(se=e==null?void 0:e.store)==null?void 0:se.states)==null?void 0:de.childrenColumnName.value,checkStrictly:(fe=(qe=e==null?void 0:e.store)==null?void 0:qe.states)==null?void 0:fe.checkStrictly.value};if(Cx(S.value,V,re,Je,pe?void 0:T.value)){const et=(S.value||[]).slice();te&&e.emit("select",et,V),e.emit("selection-change",et)}},Y=()=>{var V,re;const te=x.value?!y.value:!(y.value||S.value.length);y.value=te;let pe=!1,se=0;const de=(re=(V=e==null?void 0:e.store)==null?void 0:V.states)==null?void 0:re.rowKey.value,{childrenColumnName:qe}=e.store.states,fe={children:qe.value,checkStrictly:!1};r.value.forEach((Je,$e)=>{const et=$e+se;Cx(S.value,Je,te,fe,T.value,et)&&(pe=!0),se+=ee(Es(Je,de))}),pe&&e.emit("selection-change",S.value?S.value.slice():[]),e.emit("select-all",(S.value||[]).slice())},J=()=>{const V=ch(S.value,i.value);r.value.forEach(re=>{const te=Es(re,i.value),pe=V[te];pe&&(S.value[pe.index]=re)})},Z=()=>{var V;if(((V=r.value)==null?void 0:V.length)===0){y.value=!1;return}const{childrenColumnName:re}=e.store.states,te=i.value?ch(S.value,i.value):void 0;let pe=0,se=0;const de=Je=>te?!!te[Es(Je,i.value)]:S.value.includes(Je),qe=Je=>{var $e;for(const et of Je){const ht=T.value&&T.value.call(null,et,pe);if(de(et))se++;else if(!T.value||ht)return!1;if(pe++,($e=et[re.value])!=null&&$e.length&&!qe(et[re.value]))return!1}return!0},fe=qe(r.value||[]);y.value=se===0?!1:fe},ee=V=>{var re;if(!e||!e.store)return 0;const{treeData:te}=e.store.states;let pe=0;const se=(re=te.value[V])==null?void 0:re.children;return se&&(pe+=se.length,se.forEach(de=>{pe+=ee(de)})),pe},me=(V,re)=>{nt(V)||(V=[V]);const te={};return V.forEach(pe=>{C.value[pe.id]=re,te[pe.columnKey||pe.id]=re}),te},ye=(V,re,te)=>{A.value&&A.value!==V&&(A.value.order=null),A.value=V,E.value=re,I.value=te},Te=()=>{let V=b(s);Object.keys(C.value).forEach(re=>{const te=C.value[re];if(!te||te.length===0)return;const pe=c7({columns:c.value},re);pe&&pe.filterMethod&&(V=V.filter(se=>te.some(de=>pe.filterMethod.call(null,de,se,pe))))}),M.value=V},Ee=()=>{r.value=pxe(M.value,{sortingColumn:A.value,sortProp:E.value,sortOrder:I.value})},H=(V=void 0)=>{V&&V.filter||Te(),Ee()},Q=V=>{const{tableHeaderRef:re}=e.refs;if(!re)return;const te=Object.assign({},re.filterPanels),pe=Object.keys(te);if(pe.length)if(xt(V)&&(V=[V]),nt(V)){const se=V.map(de=>sxe({columns:c.value},de));pe.forEach(de=>{const qe=se.find(fe=>fe.id===de);qe&&(qe.filteredValue=[])}),e.store.commit("filterChange",{column:se,values:[],silent:!0,multi:!0})}else pe.forEach(se=>{const de=c.value.find(qe=>qe.id===se);de&&(de.filteredValue=[])}),C.value={},e.store.commit("filterChange",{column:{},values:[],silent:!0})},j=()=>{A.value&&(ye(null,null,null),e.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:Pe,toggleRowExpansion:we,updateExpandRows:De,states:Me,isRowExpanded:Ae}=dxe({data:r,rowKey:i}),{updateTreeExpandKeys:Fe,toggleTreeExpansion:ne,updateTreeData:z,updateKeyChildren:K,loadOrToggle:ae,states:xe}=hxe({data:r,rowKey:i}),{updateCurrentRowData:Le,updateCurrentRow:Xe,setCurrentRowKey:je,states:he}=fxe({data:r,rowKey:i});return{assertRowKey:D,updateColumns:B,scheduleLayout:k,isSelected:O,clearSelection:U,cleanSelection:G,getSelectionRows:q,toggleRowSelection:W,_toggleAllSelection:Y,toggleAllSelection:null,updateSelectionByRowKey:J,updateAllSelected:Z,updateFilters:me,updateCurrentRow:Xe,updateSort:ye,execFilter:Te,execSort:Ee,execQuery:H,clearFilter:Q,clearSort:j,toggleRowExpansion:we,setExpandRowKeysAdapter:V=>{Pe(V),Fe(V)},setCurrentRowKey:je,toggleRowExpansionAdapter:(V,re)=>{c.value.some(({type:pe})=>pe==="expand")?we(V,re):ne(V,re)},isRowExpanded:Ae,updateExpandRows:De,updateCurrentRowData:Le,loadOrToggle:ae,updateTreeData:z,updateKeyChildren:K,states:{tableSize:t,rowKey:i,data:r,_data:s,isComplex:a,_columns:o,originColumns:l,columns:c,fixedColumns:u,rightFixedColumns:d,leafColumns:f,fixedLeafColumns:h,rightFixedLeafColumns:p,updateOrderFns:m,leafColumnsLength:v,fixedLeafColumnsLength:g,rightFixedLeafColumnsLength:_,isAllSelected:y,selection:S,reserveSelection:w,selectOnIndeterminate:x,selectable:T,filters:C,filteredData:M,sortingColumn:A,sortProp:E,sortOrder:I,hoverRow:P,...Me,...xe,...he}}}function DI(n,e){return n.map(t=>{var i;return t.id===e.id?e:((i=t.children)!=null&&i.length&&(t.children=DI(t.children,e)),t)})}function LI(n){n.forEach(e=>{var t,i;e.no=(t=e.getColumnIndex)==null?void 0:t.call(e),(i=e.children)!=null&&i.length&&LI(e.children)}),n.sort((e,t)=>e.no-t.no)}function vxe(){const n=jt(),e=mxe();return{ns:Ze("table"),...e,mutations:{setData(a,o){const l=b(a._data)!==o;a.data.value=o,a._data.value=o,n.store.execQuery(),n.store.updateCurrentRowData(),n.store.updateExpandRows(),n.store.updateTreeData(n.store.states.defaultExpandAll.value),b(a.reserveSelection)?(n.store.assertRowKey(),n.store.updateSelectionByRowKey()):l?n.store.clearSelection():n.store.cleanSelection(),n.store.updateAllSelected(),n.$ready&&n.store.scheduleLayout()},insertColumn(a,o,l,c){const u=b(a._columns);let d=[];l?(l&&!l.children&&(l.children=[]),l.children.push(o),d=DI(u,l)):(u.push(o),d=u),LI(d),a._columns.value=d,a.updateOrderFns.push(c),o.type==="selection"&&(a.selectable.value=o.selectable,a.reserveSelection.value=o.reserveSelection),n.$ready&&(n.store.updateColumns(),n.store.scheduleLayout())},updateColumnOrder(a,o){var l;((l=o.getColumnIndex)==null?void 0:l.call(o))!==o.no&&(LI(a._columns.value),n.$ready&&n.store.updateColumns())},removeColumn(a,o,l,c){const u=b(a._columns)||[];if(l)l.children.splice(l.children.findIndex(f=>f.id===o.id),1),Mt(()=>{var f;((f=l.children)==null?void 0:f.length)===0&&delete l.children}),a._columns.value=DI(u,l);else{const f=u.indexOf(o);f>-1&&(u.splice(f,1),a._columns.value=u)}const d=a.updateOrderFns.indexOf(c);d>-1&&a.updateOrderFns.splice(d,1),n.$ready&&(n.store.updateColumns(),n.store.scheduleLayout())},sort(a,o){const{prop:l,order:c,init:u}=o;if(l){const d=b(a.columns).find(f=>f.property===l);d&&(d.order=c,n.store.updateSort(d,l,c),n.store.commit("changeSortCondition",{init:u}))}},changeSortCondition(a,o){const{sortingColumn:l,sortProp:c,sortOrder:u}=a,d=b(l),f=b(c),h=b(u);h===null&&(a.sortingColumn.value=null,a.sortProp.value=null);const p={filter:!0};n.store.execQuery(p),(!o||!(o.silent||o.init))&&n.emit("sort-change",{column:d,prop:f,order:h}),n.store.updateTableScrollY()},filterChange(a,o){const{column:l,values:c,silent:u}=o,d=n.store.updateFilters(l,c);n.store.execQuery(),u||n.emit("filter-change",d),n.store.updateTableScrollY()},toggleAllSelection(){n.store.toggleAllSelection()},rowSelectedChanged(a,o){n.store.toggleRowSelection(o),n.store.updateAllSelected()},setHoverRow(a,o){a.hoverRow.value=o},setCurrentRow(a,o){n.store.updateCurrentRow(o)}},commit:function(a,...o){const l=n.store.mutations;if(l[a])l[a].apply(n,[n.store.states].concat(o));else throw new Error(`Action not found: ${a}`)},updateTableScrollY:function(){Mt(()=>n.layout.updateScrollY.apply(n.layout))}}}const ay={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"},"treeProps.checkStrictly":{key:"checkStrictly",default:!1}};function gxe(n,e){if(!n)throw new Error("Table is required.");const t=vxe();return t.toggleAllSelection=wa(t._toggleAllSelection,10),Object.keys(ay).forEach(i=>{h7(p7(e,i),i,t)}),yxe(t,e),t}function yxe(n,e){Object.keys(ay).forEach(t=>{We(()=>p7(e,t),i=>{h7(i,t,n)})})}function h7(n,e,t){let i=n,r=ay[e];typeof ay[e]=="object"&&(r=r.key,i=i||ay[e].default),t.states[r].value=i}function p7(n,e){if(e.includes(".")){const t=e.split(".");let i=n;return t.forEach(r=>{i=i[r]}),i}else return n[e]}class _xe{constructor(e){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=X(null),this.scrollX=X(!1),this.scrollY=X(!1),this.bodyWidth=X(null),this.fixedWidth=X(null),this.rightFixedWidth=X(null),this.gutterWidth=0;for(const t in e)Cn(e,t)&&(fi(this[t])?this[t].value=e[t]:this[t]=e[t]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const t=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(t!=null&&t.wrapRef)){let i=!0;const r=this.scrollY.value;return i=t.wrapRef.scrollHeight>t.wrapRef.clientHeight,this.scrollY.value=i,r!==i}return!1}setHeight(e,t="height"){if(!wn)return;const i=this.table.vnode.el;if(e=oxe(e),this.height.value=Number(e),!i&&(e||e===0))return Mt(()=>this.setHeight(e,t));At(e)?(i.style[t]=`${e}px`,this.updateElsHeight()):xt(e)&&(i.style[t]=e,this.updateElsHeight())}setMaxHeight(e){this.setHeight(e,"max-height")}getFlattenColumns(){const e=[];return this.table.store.states.columns.value.forEach(i=>{i.isColumnGroup?e.push.apply(e,i.columns):e.push(i)}),e}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(e){if(!e)return!0;let t=e;for(;t.tagName!=="DIV";){if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}updateColumnsWidth(){if(!wn)return;const e=this.fit,t=this.table.vnode.el.clientWidth;let i=0;const r=this.getFlattenColumns(),s=r.filter(l=>!At(l.width));if(r.forEach(l=>{At(l.width)&&l.realWidth&&(l.realWidth=null)}),s.length>0&&e){if(r.forEach(l=>{i+=Number(l.width||l.minWidth||80)}),i<=t){this.scrollX.value=!1;const l=t-i;if(s.length===1)s[0].realWidth=Number(s[0].minWidth||80)+l;else{const c=s.reduce((f,h)=>f+Number(h.minWidth||80),0),u=l/c;let d=0;s.forEach((f,h)=>{if(h===0)return;const p=Math.floor(Number(f.minWidth||80)*u);d+=p,f.realWidth=Number(f.minWidth||80)+p}),s[0].realWidth=Number(s[0].minWidth||80)+l-d}}else this.scrollX.value=!0,s.forEach(l=>{l.realWidth=Number(l.minWidth)});this.bodyWidth.value=Math.max(i,t),this.table.state.resizeState.value.width=this.bodyWidth.value}else r.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),i+=l.realWidth}),this.scrollX.value=i>t,this.bodyWidth.value=i;const a=this.store.states.fixedColumns.value;if(a.length>0){let l=0;a.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.fixedWidth.value=l}const o=this.store.states.rightFixedColumns.value;if(o.length>0){let l=0;o.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(e){this.observers.push(e)}removeObserver(e){const t=this.observers.indexOf(e);t!==-1&&this.observers.splice(t,1)}notifyObservers(e){this.observers.forEach(i=>{var r,s;switch(e){case"columns":(r=i.state)==null||r.onColumnsChange(this);break;case"scrollable":(s=i.state)==null||s.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${e}.`)}})}}const{CheckboxGroup:bxe}=ko,Sxe=ve({name:"ElTableFilterPanel",components:{ElCheckbox:ko,ElCheckboxGroup:bxe,ElScrollbar:ic,ElTooltip:us,ElIcon:_t,ArrowDown:du,ArrowUp:wL},directives:{ClickOutside:eu},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function},appendTo:{type:String}},setup(n){const e=jt(),{t}=xn(),i=Ze("table-filter"),r=e==null?void 0:e.parent;r.filterPanels.value[n.column.id]||(r.filterPanels.value[n.column.id]=e);const s=X(!1),a=X(null),o=N(()=>n.column&&n.column.filters),l=N(()=>n.column.filterClassName?`${i.b()} ${n.column.filterClassName}`:i.b()),c=N({get:()=>{var w;return(((w=n.column)==null?void 0:w.filteredValue)||[])[0]},set:w=>{u.value&&(typeof w<"u"&&w!==null?u.value.splice(0,1,w):u.value.splice(0,1))}}),u=N({get(){return n.column?n.column.filteredValue||[]:[]},set(w){n.column&&n.upDataColumn("filteredValue",w)}}),d=N(()=>n.column?n.column.filterMultiple:!0),f=w=>w.value===c.value,h=()=>{s.value=!1},p=w=>{w.stopPropagation(),s.value=!s.value},m=()=>{s.value=!1},v=()=>{y(u.value),h()},g=()=>{u.value=[],y(u.value),h()},_=w=>{c.value=w,y(typeof w<"u"&&w!==null?u.value:[]),h()},y=w=>{n.store.commit("filterChange",{column:n.column,values:w}),n.store.updateAllSelected()};We(s,w=>{n.column&&n.upDataColumn("filterOpened",w)},{immediate:!0});const S=N(()=>{var w,x;return(x=(w=a.value)==null?void 0:w.popperRef)==null?void 0:x.contentRef});return{tooltipVisible:s,multiple:d,filterClassName:l,filteredValue:u,filterValue:c,filters:o,handleConfirm:v,handleReset:g,handleSelect:_,isActive:f,t,ns:i,showFilterPanel:p,hideFilterPanel:m,popperPaneRef:S,tooltip:a}}});function wxe(n,e,t,i,r,s){const a=yt("el-checkbox"),o=yt("el-checkbox-group"),l=yt("el-scrollbar"),c=yt("arrow-up"),u=yt("arrow-down"),d=yt("el-icon"),f=yt("el-tooltip"),h=qC("click-outside");return F(),He(f,{ref:"tooltip",visible:n.tooltipVisible,offset:0,placement:n.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":n.filterClassName,persistent:"","append-to":n.appendTo},{content:ge(()=>[n.multiple?(F(),ie("div",{key:0},[le("div",{class:$(n.ns.e("content"))},[oe(l,{"wrap-class":n.ns.e("wrap")},{default:ge(()=>[oe(o,{modelValue:n.filteredValue,"onUpdate:modelValue":p=>n.filteredValue=p,class:$(n.ns.e("checkbox-group"))},{default:ge(()=>[(F(!0),ie(bt,null,sn(n.filters,p=>(F(),He(a,{key:p.value,value:p.value},{default:ge(()=>[Xt(rt(p.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"])]),_:1},8,["wrap-class"])],2),le("div",{class:$(n.ns.e("bottom"))},[le("button",{class:$({[n.ns.is("disabled")]:n.filteredValue.length===0}),disabled:n.filteredValue.length===0,type:"button",onClick:n.handleConfirm},rt(n.t("el.table.confirmFilter")),11,["disabled","onClick"]),le("button",{type:"button",onClick:n.handleReset},rt(n.t("el.table.resetFilter")),9,["onClick"])],2)])):(F(),ie("ul",{key:1,class:$(n.ns.e("list"))},[le("li",{class:$([n.ns.e("list-item"),{[n.ns.is("active")]:n.filterValue===void 0||n.filterValue===null}]),onClick:p=>n.handleSelect(null)},rt(n.t("el.table.clearFilter")),11,["onClick"]),(F(!0),ie(bt,null,sn(n.filters,p=>(F(),ie("li",{key:p.value,class:$([n.ns.e("list-item"),n.ns.is("active",n.isActive(p))]),label:p.value,onClick:m=>n.handleSelect(p.value)},rt(p.text),11,["label","onClick"]))),128))],2))]),default:ge(()=>[Wt((F(),ie("span",{class:$([`${n.ns.namespace.value}-table__column-filter-trigger`,`${n.ns.namespace.value}-none-outline`]),onClick:n.showFilterPanel},[oe(d,null,{default:ge(()=>[Ne(n.$slots,"filter-icon",{},()=>[n.column.filterOpened?(F(),He(c,{key:0})):(F(),He(u,{key:1}))])]),_:3})],10,["onClick"])),[[h,n.hideFilterPanel,n.popperPaneRef]])]),_:3},8,["visible","placement","popper-class","append-to"])}var xxe=ot(Sxe,[["render",wxe],["__file","filter-panel.vue"]]);function m7(n){const e=jt();KC(()=>{t.value.addObserver(e)}),Ht(()=>{i(t.value),r(t.value)}),Bo(()=>{i(t.value),r(t.value)}),Qd(()=>{t.value.removeObserver(e)});const t=N(()=>{const s=n.layout;if(!s)throw new Error("Can not find table layout.");return s}),i=s=>{var a;const o=((a=n.vnode.el)==null?void 0:a.querySelectorAll("colgroup > col"))||[];if(!o.length)return;const l=s.getFlattenColumns(),c={};l.forEach(u=>{c[u.id]=u});for(let u=0,d=o.length;u<d;u++){const f=o[u],h=f.getAttribute("name"),p=c[h];p&&f.setAttribute("width",p.realWidth||p.width)}},r=s=>{var a,o;const l=((a=n.vnode.el)==null?void 0:a.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let u=0,d=l.length;u<d;u++)l[u].setAttribute("width",s.scrollY.value?s.gutterWidth:"0");const c=((o=n.vnode.el)==null?void 0:o.querySelectorAll("th.gutter"))||[];for(let u=0,d=c.length;u<d;u++){const f=c[u];f.style.width=s.scrollY.value?`${s.gutterWidth}px`:"0",f.style.display=s.scrollY.value?"":"none"}};return{tableLayout:t.value,onColumnsChange:i,onScrollableChange:r}}const rc=Symbol("ElTable");function Cxe(n,e){const t=jt(),i=mt(rc),r=m=>{m.stopPropagation()},s=(m,v)=>{!v.filters&&v.sortable?p(m,v,!1):v.filterable&&!v.sortable&&r(m),i==null||i.emit("header-click",v,m)},a=(m,v)=>{i==null||i.emit("header-contextmenu",v,m)},o=X(null),l=X(!1),c=X({}),u=(m,v)=>{if(wn&&!(v.children&&v.children.length>0)&&o.value&&n.border){l.value=!0;const g=i;e("set-drag-visible",!0);const y=(g==null?void 0:g.vnode.el).getBoundingClientRect().left,S=t.vnode.el.querySelector(`th.${v.id}`),w=S.getBoundingClientRect(),x=w.left-y+30;_o(S,"noclick"),c.value={startMouseLeft:m.clientX,startLeft:w.right-y,startColumnLeft:w.left-y,tableLeft:y};const T=g==null?void 0:g.refs.resizeProxy;T.style.left=`${c.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const C=A=>{const E=A.clientX-c.value.startMouseLeft,I=c.value.startLeft+E;T.style.left=`${Math.max(x,I)}px`},M=()=>{if(l.value){const{startColumnLeft:A,startLeft:E}=c.value,P=Number.parseInt(T.style.left,10)-A;v.width=v.realWidth=P,g==null||g.emit("header-dragend",v.width,E-A,v,m),requestAnimationFrame(()=>{n.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,o.value=null,c.value={},e("set-drag-visible",!1)}document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",M),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{Ls(S,"noclick")},0)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",M)}},d=(m,v)=>{var g;if(v.children&&v.children.length>0)return;const _=m.target;if(!za(_))return;const y=_==null?void 0:_.closest("th");if(!(!v||!v.resizable||!y)&&!l.value&&n.border){const S=y.getBoundingClientRect(),w=document.body.style,x=((g=y.parentNode)==null?void 0:g.lastElementChild)===y;S.width>12&&S.right-m.pageX<8&&!x?(w.cursor="col-resize",fa(y,"is-sortable")&&(y.style.cursor="col-resize"),o.value=v):l.value||(w.cursor="",fa(y,"is-sortable")&&(y.style.cursor="pointer"),o.value=null)}},f=()=>{wn&&(document.body.style.cursor="")},h=({order:m,sortOrders:v})=>{if(m==="")return v[0];const g=v.indexOf(m||null);return v[g>v.length-2?0:g+1]},p=(m,v,g)=>{var _;m.stopPropagation();const y=v.order===g?null:g||h(v),S=(_=m.target)==null?void 0:_.closest("th");if(S&&fa(S,"noclick")){Ls(S,"noclick");return}if(!v.sortable)return;const w=m.currentTarget;if(["ascending","descending"].some(A=>fa(w,A)&&!v.sortOrders.includes(A)))return;const x=n.store.states;let T=x.sortProp.value,C;const M=x.sortingColumn.value;(M!==v||M===v&&M.order===null)&&(M&&(M.order=null),x.sortingColumn.value=v,T=v.property),y?C=v.order=y:C=v.order=null,x.sortProp.value=T,x.sortOrder.value=C,i==null||i.store.commit("changeSortCondition")};return{handleHeaderClick:s,handleHeaderContextMenu:a,handleMouseDown:u,handleMouseMove:d,handleMouseOut:f,handleSortClick:p,handleFilterClick:r}}function Mxe(n){const e=mt(rc),t=Ze("table");return{getHeaderRowStyle:o=>{const l=e==null?void 0:e.props.headerRowStyle;return Tt(l)?l.call(null,{rowIndex:o}):l},getHeaderRowClass:o=>{const l=[],c=e==null?void 0:e.props.headerRowClassName;return xt(c)?l.push(c):Tt(c)&&l.push(c.call(null,{rowIndex:o})),l.join(" ")},getHeaderCellStyle:(o,l,c,u)=>{var d;let f=(d=e==null?void 0:e.props.headerCellStyle)!=null?d:{};Tt(f)&&(f=f.call(null,{rowIndex:o,columnIndex:l,row:c,column:u}));const h=g3(l,u.fixed,n.store,c);return Dv(h,"left"),Dv(h,"right"),Object.assign({},f,h)},getHeaderCellClass:(o,l,c,u)=>{const d=v3(t.b(),l,u.fixed,n.store,c),f=[u.id,u.order,u.headerAlign,u.className,u.labelClassName,...d];u.children||f.push("is-leaf"),u.sortable&&f.push("is-sortable");const h=e==null?void 0:e.props.headerCellClassName;return xt(h)?f.push(h):Tt(h)&&f.push(h.call(null,{rowIndex:o,columnIndex:l,row:c,column:u})),f.push(t.e("cell")),f.filter(p=>!!p).join(" ")}}}const v7=n=>{const e=[];return n.forEach(t=>{t.children?(e.push(t),e.push.apply(e,v7(t.children))):e.push(t)}),e},g7=n=>{let e=1;const t=(s,a)=>{if(a&&(s.level=a.level+1,e<s.level&&(e=s.level)),s.children){let o=0;s.children.forEach(l=>{t(l,s),o+=l.colSpan}),s.colSpan=o}else s.colSpan=1};n.forEach(s=>{s.level=1,t(s,void 0)});const i=[];for(let s=0;s<e;s++)i.push([]);return v7(n).forEach(s=>{s.children?(s.rowSpan=1,s.children.forEach(a=>a.isSubColumn=!0)):s.rowSpan=e-s.level+1,i[s.level-1].push(s)}),i};function Txe(n){const e=mt(rc),t=N(()=>g7(n.store.states.originColumns.value));return{isGroup:N(()=>{const s=t.value.length>1;return s&&e&&(e.state.isGroup.value=!0),s}),toggleAllSelection:s=>{s.stopPropagation(),e==null||e.store.commit("toggleAllSelection")},columnRows:t}}var Axe=ve({name:"ElTableHeader",components:{ElCheckbox:ko},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})},appendFilterPanelTo:{type:String}},setup(n,{emit:e}){const t=jt(),i=mt(rc),r=Ze("table"),s=X({}),{onColumnsChange:a,onScrollableChange:o}=m7(i),l=(i==null?void 0:i.props.tableLayout)==="auto",c=Nn(new Map),u=X(),d=()=>{setTimeout(()=>{c.size>0&&(c.forEach((A,E)=>{const I=u.value.querySelector(`.${E.replace(/\s/g,".")}`);if(I){const P=I.getBoundingClientRect().width;A.width=P}}),c.clear())})};We(c,d),Ht(async()=>{await Mt(),await Mt();const{prop:A,order:E}=n.defaultSort;i==null||i.store.commit("sort",{prop:A,order:E,init:!0}),d()});const{handleHeaderClick:f,handleHeaderContextMenu:h,handleMouseDown:p,handleMouseMove:m,handleMouseOut:v,handleSortClick:g,handleFilterClick:_}=Cxe(n,e),{getHeaderRowStyle:y,getHeaderRowClass:S,getHeaderCellStyle:w,getHeaderCellClass:x}=Mxe(n),{isGroup:T,toggleAllSelection:C,columnRows:M}=Txe(n);return t.state={onColumnsChange:a,onScrollableChange:o},t.filterPanels=s,{ns:r,filterPanels:s,onColumnsChange:a,onScrollableChange:o,columnRows:M,getHeaderRowClass:S,getHeaderRowStyle:y,getHeaderCellClass:x,getHeaderCellStyle:w,handleHeaderClick:f,handleHeaderContextMenu:h,handleMouseDown:p,handleMouseMove:m,handleMouseOut:v,handleSortClick:g,handleFilterClick:_,isGroup:T,toggleAllSelection:C,saveIndexSelection:c,isTableLayoutAuto:l,theadRef:u,updateFixedColumnStyle:d}},render(){const{ns:n,isGroup:e,columnRows:t,getHeaderCellStyle:i,getHeaderCellClass:r,getHeaderRowClass:s,getHeaderRowStyle:a,handleHeaderClick:o,handleHeaderContextMenu:l,handleMouseDown:c,handleMouseMove:u,handleSortClick:d,handleMouseOut:f,store:h,$parent:p,saveIndexSelection:m,isTableLayoutAuto:v}=this;let g=1;return wt("thead",{ref:"theadRef",class:{[n.is("group")]:e}},t.map((_,y)=>wt("tr",{class:s(y),key:y,style:a(y)},_.map((S,w)=>{S.rowSpan>g&&(g=S.rowSpan);const x=r(y,w,_,S);return v&&S.fixed&&m.set(x,S),wt("th",{class:x,colspan:S.colSpan,key:`${S.id}-thead`,rowspan:S.rowSpan,style:i(y,w,_,S),onClick:T=>{T.currentTarget.classList.contains("noclick")||o(T,S)},onContextmenu:T=>l(T,S),onMousedown:T=>c(T,S),onMousemove:T=>u(T,S),onMouseout:f},[wt("div",{class:["cell",S.filteredValue&&S.filteredValue.length>0?"highlight":""]},[S.renderHeader?S.renderHeader({column:S,$index:w,store:h,_self:p}):S.label,S.sortable&&wt("span",{onClick:T=>d(T,S),class:"caret-wrapper"},[wt("i",{onClick:T=>d(T,S,"ascending"),class:"sort-caret ascending"}),wt("i",{onClick:T=>d(T,S,"descending"),class:"sort-caret descending"})]),S.filterable&&wt(xxe,{store:h,placement:S.filterPlacement||"bottom-start",appendTo:p.appendFilterPanelTo,column:S,upDataColumn:(T,C)=>{S[T]=C}},{"filter-icon":()=>S.renderFilterIcon?S.renderFilterIcon({filterOpened:S.filterOpened}):null})])])}))))}});function RT(n,e,t=.03){return n-e>t}function Exe(n){const e=mt(rc),t=X(""),i=X(wt("div")),r=(p,m,v)=>{var g;const _=e,y=IT(p);let S;const w=(g=_==null?void 0:_.vnode.el)==null?void 0:g.dataset.prefix;y&&(S=KF({columns:n.store.states.columns.value},y,w),S&&(_==null||_.emit(`cell-${v}`,m,S,y,p))),_==null||_.emit(`row-${v}`,m,S,p)},s=(p,m)=>{r(p,m,"dblclick")},a=(p,m)=>{n.store.commit("setCurrentRow",m),r(p,m,"click")},o=(p,m)=>{r(p,m,"contextmenu")},l=wa(p=>{n.store.commit("setHoverRow",p)},30),c=wa(()=>{n.store.commit("setHoverRow",null)},30),u=p=>{const m=window.getComputedStyle(p,null),v=Number.parseInt(m.paddingLeft,10)||0,g=Number.parseInt(m.paddingRight,10)||0,_=Number.parseInt(m.paddingTop,10)||0,y=Number.parseInt(m.paddingBottom,10)||0;return{left:v,right:g,top:_,bottom:y}},d=(p,m,v)=>{let g=m.target.parentNode;for(;p>1&&(g=g==null?void 0:g.nextSibling,!(!g||g.nodeName!=="TR"));)v(g,"hover-row hover-fixed-row"),p--};return{handleDoubleClick:s,handleClick:a,handleContextMenu:o,handleMouseEnter:l,handleMouseLeave:c,handleCellMouseEnter:(p,m,v)=>{var g;const _=e,y=IT(p),S=(g=_==null?void 0:_.vnode.el)==null?void 0:g.dataset.prefix;if(y){const B=KF({columns:n.store.states.columns.value},y,S);y.rowSpan>1&&d(y.rowSpan,p,_o);const k=_.hoverState={cell:y,column:B,row:m};_==null||_.emit("cell-mouse-enter",k.row,k.column,k.cell,p)}if(!v)return;const w=p.target.querySelector(".cell");if(!(fa(w,`${S}-tooltip`)&&w.childNodes.length))return;const x=document.createRange();x.setStart(w,0),x.setEnd(w,w.childNodes.length);const{width:T,height:C}=x.getBoundingClientRect(),{width:M,height:A}=w.getBoundingClientRect(),{top:E,left:I,right:P,bottom:D}=u(w),L=I+P,R=E+D;(RT(T+L,M)||RT(C+R,A)||RT(w.scrollWidth,M))&&uxe(v,y.innerText||y.textContent,y,_)},handleCellMouseLeave:p=>{const m=IT(p);if(!m)return;m.rowSpan>1&&d(m.rowSpan,p,Ls);const v=e==null?void 0:e.hoverState;e==null||e.emit("cell-mouse-leave",v==null?void 0:v.row,v==null?void 0:v.column,v==null?void 0:v.cell,p)},tooltipContent:t,tooltipTrigger:i}}function Ixe(n){const e=mt(rc),t=Ze("table");return{getRowStyle:(c,u)=>{const d=e==null?void 0:e.props.rowStyle;return Tt(d)?d.call(null,{row:c,rowIndex:u}):d||null},getRowClass:(c,u)=>{const d=[t.e("row")];e!=null&&e.props.highlightCurrentRow&&c===n.store.states.currentRow.value&&d.push("current-row"),n.stripe&&u%2===1&&d.push(t.em("row","striped"));const f=e==null?void 0:e.props.rowClassName;return xt(f)?d.push(f):Tt(f)&&d.push(f.call(null,{row:c,rowIndex:u})),d},getCellStyle:(c,u,d,f)=>{const h=e==null?void 0:e.props.cellStyle;let p=h??{};Tt(h)&&(p=h.call(null,{rowIndex:c,columnIndex:u,row:d,column:f}));const m=g3(u,n==null?void 0:n.fixed,n.store);return Dv(m,"left"),Dv(m,"right"),Object.assign({},p,m)},getCellClass:(c,u,d,f,h)=>{const p=v3(t.b(),u,n==null?void 0:n.fixed,n.store,void 0,h),m=[f.id,f.align,f.className,...p],v=e==null?void 0:e.props.cellClassName;return xt(v)?m.push(v):Tt(v)&&m.push(v.call(null,{rowIndex:c,columnIndex:u,row:d,column:f})),m.push(t.e("cell")),m.filter(g=>!!g).join(" ")},getSpan:(c,u,d,f)=>{let h=1,p=1;const m=e==null?void 0:e.props.spanMethod;if(Tt(m)){const v=m({row:c,column:u,rowIndex:d,columnIndex:f});nt(v)?(h=v[0],p=v[1]):typeof v=="object"&&(h=v.rowspan,p=v.colspan)}return{rowspan:h,colspan:p}},getColspanRealWidth:(c,u,d)=>{if(u<1)return c[d].realWidth;const f=c.map(({realWidth:h,width:p})=>h||p).slice(d,d+u);return Number(f.reduce((h,p)=>Number(h)+Number(p),-1))}}}const Rxe=ve({name:"TableTdWrapper"}),Pxe=ve({...Rxe,props:{colspan:{type:Number,default:1},rowspan:{type:Number,default:1}},setup(n){return(e,t)=>(F(),ie("td",{colspan:n.colspan,rowspan:n.rowspan},[Ne(e.$slots,"default")],8,["colspan","rowspan"]))}});var Dxe=ot(Pxe,[["__file","td-wrapper.vue"]]);function Lxe(n){const e=mt(rc),t=Ze("table"),{handleDoubleClick:i,handleClick:r,handleContextMenu:s,handleMouseEnter:a,handleMouseLeave:o,handleCellMouseEnter:l,handleCellMouseLeave:c,tooltipContent:u,tooltipTrigger:d}=Exe(n),{getRowStyle:f,getRowClass:h,getCellStyle:p,getCellClass:m,getSpan:v,getColspanRealWidth:g}=Ixe(n),_=N(()=>n.store.states.columns.value.findIndex(({type:T})=>T==="default")),y=(T,C)=>{const M=e.props.rowKey;return M?Es(T,M):C},S=(T,C,M,A=!1)=>{const{tooltipEffect:E,tooltipOptions:I,store:P}=n,{indent:D,columns:L}=P.states,R=h(T,C);let B=!0;return M&&(R.push(t.em("row",`level-${M.level}`)),B=M.display),wt("tr",{style:[B?null:{display:"none"},f(T,C)],class:R,key:y(T,C),onDblclick:O=>i(O,T),onClick:O=>r(O,T),onContextmenu:O=>s(O,T),onMouseenter:()=>a(C),onMouseleave:o},L.value.map((O,U)=>{const{rowspan:G,colspan:q}=v(T,O,C,U);if(!G||!q)return null;const W=Object.assign({},O);W.realWidth=g(L.value,q,U);const Y={store:n.store,_self:n.context||e,column:W,row:T,$index:C,cellIndex:U,expanded:A};U===_.value&&M&&(Y.treeNode={indent:M.level*D.value,level:M.level},ai(M.expanded)&&(Y.treeNode.expanded=M.expanded,"loading"in M&&(Y.treeNode.loading=M.loading),"noLazyChildren"in M&&(Y.treeNode.noLazyChildren=M.noLazyChildren)));const J=`${y(T,C)},${U}`,Z=W.columnKey||W.rawColumnKey||"",ee=O.showOverflowTooltip&&gG({effect:E},I,O.showOverflowTooltip);return wt(Dxe,{style:p(C,U,T,O),class:m(C,U,T,O,q-1),key:`${Z}${J}`,rowspan:G,colspan:q,onMouseenter:me=>l(me,T,ee),onMouseleave:c},{default:()=>w(U,O,Y)})}))},w=(T,C,M)=>C.renderCell(M);return{wrappedRowRender:(T,C)=>{const M=n.store,{isRowExpanded:A,assertRowKey:E}=M,{treeData:I,lazyTreeNodeMap:P,childrenColumnName:D,rowKey:L}=M.states,R=M.states.columns.value;if(R.some(({type:k})=>k==="expand")){const k=A(T),O=S(T,C,void 0,k),U=e.renderExpanded;return k?U?[[O,wt("tr",{key:`expanded-row__${O.key}`},[wt("td",{colspan:R.length,class:`${t.e("cell")} ${t.e("expanded-cell")}`},[U({row:T,$index:C,store:M,expanded:k})])])]]:(console.error("[Element Error]renderExpanded is required."),O):[[O]]}else if(Object.keys(I.value).length){E();const k=Es(T,L.value);let O=I.value[k],U=null;O&&(U={expanded:O.expanded,level:O.level,display:!0},ai(O.lazy)&&(ai(O.loaded)&&O.loaded&&(U.noLazyChildren=!(O.children&&O.children.length)),U.loading=O.loading));const G=[S(T,C,U)];if(O){let q=0;const W=(J,Z)=>{J&&J.length&&Z&&J.forEach(ee=>{const me={display:Z.display&&Z.expanded,level:Z.level+1,expanded:!1,noLazyChildren:!1,loading:!1},ye=Es(ee,L.value);if(ye==null)throw new Error("For nested data item, row-key is required.");if(O={...I.value[ye]},O&&(me.expanded=O.expanded,O.level=O.level||me.level,O.display=!!(O.expanded&&me.display),ai(O.lazy)&&(ai(O.loaded)&&O.loaded&&(me.noLazyChildren=!(O.children&&O.children.length)),me.loading=O.loading)),q++,G.push(S(ee,C+q,me)),O){const Te=P.value[ye]||ee[D.value];W(Te,O)}})};O.display=!0;const Y=P.value[k]||T[D.value];W(Y,O)}return G}else return S(T,C,void 0)},tooltipContent:u,tooltipTrigger:d}}const kxe={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var Oxe=ve({name:"ElTableBody",props:kxe,setup(n){const e=jt(),t=mt(rc),i=Ze("table"),{wrappedRowRender:r,tooltipContent:s,tooltipTrigger:a}=Lxe(n),{onColumnsChange:o,onScrollableChange:l}=m7(t),c=[];return We(n.store.states.hoverRow,(u,d)=>{var f;const h=e==null?void 0:e.vnode.el,p=Array.from((h==null?void 0:h.children)||[]).filter(g=>g==null?void 0:g.classList.contains(`${i.e("row")}`));let m=u;const v=(f=p[m])==null?void 0:f.childNodes;if(v!=null&&v.length){let g=0;Array.from(v).reduce((y,S,w)=>{var x,T;return((x=v[w])==null?void 0:x.colSpan)>1&&(g=(T=v[w])==null?void 0:T.colSpan),S.nodeName!=="TD"&&g===0&&y.push(w),g>0&&g--,y},[]).forEach(y=>{var S;for(m=u;m>0;){const w=(S=p[m-1])==null?void 0:S.childNodes;if(w[y]&&w[y].nodeName==="TD"&&w[y].rowSpan>1){_o(w[y],"hover-cell"),c.push(w[y]);break}m--}})}else c.forEach(g=>Ls(g,"hover-cell")),c.length=0;!n.store.states.isComplex.value||!wn||Dd(()=>{const g=p[d],_=p[u];g&&!g.classList.contains("hover-fixed-row")&&Ls(g,"hover-row"),_&&_o(_,"hover-row")})}),Qd(()=>{var u;(u=no)==null||u()}),{ns:i,onColumnsChange:o,onScrollableChange:l,wrappedRowRender:r,tooltipContent:s,tooltipTrigger:a}},render(){const{wrappedRowRender:n,store:e}=this,t=e.states.data.value||[];return wt("tbody",{tabIndex:-1},[t.reduce((i,r)=>i.concat(n(r,i.length)),[])])}});function Nxe(){const n=mt(rc),e=n==null?void 0:n.store,t=N(()=>e.states.fixedLeafColumnsLength.value),i=N(()=>e.states.rightFixedColumns.value.length),r=N(()=>e.states.columns.value.length),s=N(()=>e.states.fixedColumns.value.length),a=N(()=>e.states.rightFixedColumns.value.length);return{leftFixedLeafCount:t,rightFixedLeafCount:i,columnsCount:r,leftFixedCount:s,rightFixedCount:a,columns:e.states.columns}}function Bxe(n){const{columns:e}=Nxe(),t=Ze("table");return{getCellClasses:(s,a)=>{const o=s[a],l=[t.e("cell"),o.id,o.align,o.labelClassName,...v3(t.b(),a,o.fixed,n.store)];return o.className&&l.push(o.className),o.children||l.push(t.is("leaf")),l},getCellStyles:(s,a)=>{const o=g3(a,s.fixed,n.store);return Dv(o,"left"),Dv(o,"right"),o},columns:e}}var Fxe=ve({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(n){const{getCellClasses:e,getCellStyles:t,columns:i}=Bxe(n);return{ns:Ze("table"),getCellClasses:e,getCellStyles:t,columns:i}},render(){const{columns:n,getCellStyles:e,getCellClasses:t,summaryMethod:i,sumText:r}=this,s=this.store.states.data.value;let a=[];return i?a=i({columns:n,data:s}):n.forEach((o,l)=>{if(l===0){a[l]=r;return}const c=s.map(h=>Number(h[o.property])),u=[];let d=!0;c.forEach(h=>{if(!Number.isNaN(+h)){d=!1;const p=`${h}`.split(".")[1];u.push(p?p.length:0)}});const f=Math.max.apply(null,u);d?a[l]="":a[l]=c.reduce((h,p)=>{const m=Number(p);return Number.isNaN(+m)?h:Number.parseFloat((h+p).toFixed(Math.min(f,20)))},0)}),wt(wt("tfoot",[wt("tr",{},[...n.map((o,l)=>wt("td",{key:l,colspan:o.colSpan,rowspan:o.rowSpan,class:t(n,l),style:e(o,l)},[wt("div",{class:["cell",o.labelClassName]},[a[l]])]))])]))}});function zxe(n){return{setCurrentRow:d=>{n.commit("setCurrentRow",d)},getSelectionRows:()=>n.getSelectionRows(),toggleRowSelection:(d,f,h=!0)=>{n.toggleRowSelection(d,f,!1,h),n.updateAllSelected()},clearSelection:()=>{n.clearSelection()},clearFilter:d=>{n.clearFilter(d)},toggleAllSelection:()=>{n.commit("toggleAllSelection")},toggleRowExpansion:(d,f)=>{n.toggleRowExpansionAdapter(d,f)},clearSort:()=>{n.clearSort()},sort:(d,f)=>{n.commit("sort",{prop:d,order:f})},updateKeyChildren:(d,f)=>{n.updateKeyChildren(d,f)}}}function Uxe(n,e,t,i){const r=X(!1),s=X(null),a=X(!1),o=k=>{a.value=k},l=X({width:null,height:null,headerHeight:null}),c=X(!1),u={display:"inline-block",verticalAlign:"middle"},d=X(),f=X(0),h=X(0),p=X(0),m=X(0),v=X(0);zr(()=>{e.setHeight(n.height)}),zr(()=>{e.setMaxHeight(n.maxHeight)}),We(()=>[n.currentRowKey,t.states.rowKey],([k,O])=>{!b(O)||!b(k)||t.setCurrentRowKey(`${k}`)},{immediate:!0}),We(()=>n.data,k=>{i.store.commit("setData",k)},{immediate:!0,deep:!0}),zr(()=>{n.expandRowKeys&&t.setExpandRowKeysAdapter(n.expandRowKeys)});const g=()=>{i.store.commit("setHoverRow",null),i.hoverState&&(i.hoverState=null)},_=(k,O)=>{const{pixelX:U,pixelY:G}=O;Math.abs(U)>=Math.abs(G)&&(i.refs.bodyWrapper.scrollLeft+=O.pixelX/5)},y=N(()=>n.height||n.maxHeight||t.states.fixedColumns.value.length>0||t.states.rightFixedColumns.value.length>0),S=N(()=>({width:e.bodyWidth.value?`${e.bodyWidth.value}px`:""})),w=()=>{y.value&&e.updateElsHeight(),e.updateColumnsWidth(),requestAnimationFrame(M)};Ht(async()=>{await Mt(),t.updateColumns(),A(),requestAnimationFrame(w);const k=i.vnode.el,O=i.refs.headerWrapper;n.flexible&&k&&k.parentElement&&(k.parentElement.style.minWidth="0"),l.value={width:d.value=k.offsetWidth,height:k.offsetHeight,headerHeight:n.showHeader&&O?O.offsetHeight:null},t.states.columns.value.forEach(U=>{U.filteredValue&&U.filteredValue.length&&i.store.commit("filterChange",{column:U,values:U.filteredValue,silent:!0})}),i.$ready=!0});const x=(k,O)=>{if(!k)return;const U=Array.from(k.classList).filter(G=>!G.startsWith("is-scrolling-"));U.push(e.scrollX.value?O:"is-scrolling-none"),k.className=U.join(" ")},T=k=>{const{tableWrapper:O}=i.refs;x(O,k)},C=k=>{const{tableWrapper:O}=i.refs;return!!(O&&O.classList.contains(k))},M=function(){if(!i.refs.scrollBarRef)return;if(!e.scrollX.value){const J="is-scrolling-none";C(J)||T(J);return}const k=i.refs.scrollBarRef.wrapRef;if(!k)return;const{scrollLeft:O,offsetWidth:U,scrollWidth:G}=k,{headerWrapper:q,footerWrapper:W}=i.refs;q&&(q.scrollLeft=O),W&&(W.scrollLeft=O);const Y=G-U-1;O>=Y?T("is-scrolling-right"):T(O===0?"is-scrolling-left":"is-scrolling-middle")},A=()=>{i.refs.scrollBarRef&&(i.refs.scrollBarRef.wrapRef&&Kn(i.refs.scrollBarRef.wrapRef,"scroll",M,{passive:!0}),n.fit?Ti(i.vnode.el,E):Kn(window,"resize",E),Ti(i.refs.bodyWrapper,()=>{var k,O;E(),(O=(k=i.refs)==null?void 0:k.scrollBarRef)==null||O.update()}))},E=()=>{var k,O,U,G;const q=i.vnode.el;if(!i.$ready||!q)return;let W=!1;const{width:Y,height:J,headerHeight:Z}=l.value,ee=d.value=q.offsetWidth;Y!==ee&&(W=!0);const me=q.offsetHeight;(n.height||y.value)&&J!==me&&(W=!0);const ye=n.tableLayout==="fixed"?i.refs.headerWrapper:(k=i.refs.tableHeaderRef)==null?void 0:k.$el;n.showHeader&&(ye==null?void 0:ye.offsetHeight)!==Z&&(W=!0),f.value=((O=i.refs.tableWrapper)==null?void 0:O.scrollHeight)||0,p.value=(ye==null?void 0:ye.scrollHeight)||0,m.value=((U=i.refs.footerWrapper)==null?void 0:U.offsetHeight)||0,v.value=((G=i.refs.appendWrapper)==null?void 0:G.offsetHeight)||0,h.value=f.value-p.value-m.value-v.value,W&&(l.value={width:ee,height:me,headerHeight:n.showHeader&&(ye==null?void 0:ye.offsetHeight)||0},w())},I=tr(),P=N(()=>{const{bodyWidth:k,scrollY:O,gutterWidth:U}=e;return k.value?`${k.value-(O.value?U:0)}px`:""}),D=N(()=>n.maxHeight?"fixed":n.tableLayout),L=N(()=>{if(n.data&&n.data.length)return null;let k="100%";n.height&&h.value&&(k=`${h.value}px`);const O=d.value;return{width:O?`${O}px`:"",height:k}}),R=N(()=>n.height?{height:"100%"}:n.maxHeight?Number.isNaN(Number(n.maxHeight))?{maxHeight:`calc(${n.maxHeight} - ${p.value+m.value}px)`}:{maxHeight:`${n.maxHeight-p.value-m.value}px`}:{});return{isHidden:r,renderExpanded:s,setDragVisible:o,isGroup:c,handleMouseLeave:g,handleHeaderFooterMousewheel:_,tableSize:I,emptyBlockStyle:L,handleFixedMousewheel:(k,O)=>{const U=i.refs.bodyWrapper;if(Math.abs(O.spinY)>0){const G=U.scrollTop;O.pixelY<0&&G!==0&&k.preventDefault(),O.pixelY>0&&U.scrollHeight-U.clientHeight>G&&k.preventDefault(),U.scrollTop+=Math.ceil(O.pixelY/5)}else U.scrollLeft+=Math.ceil(O.pixelX/5)},resizeProxyVisible:a,bodyWidth:P,resizeState:l,doLayout:w,tableBodyStyles:S,tableLayout:D,scrollbarViewStyle:u,scrollbarStyle:R}}function Hxe(n){const e=X(),t=()=>{const r=n.vnode.el.querySelector(".hidden-columns"),s={childList:!0,subtree:!0},a=n.store.states.updateOrderFns;e.value=new MutationObserver(()=>{a.forEach(o=>o())}),e.value.observe(r,s)};Ht(()=>{t()}),Qd(()=>{var i;(i=e.value)==null||i.disconnect()})}var Vxe={data:{type:Array,default:()=>[]},size:cr,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",checkStrictly:!1})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object],appendFilterPanelTo:String,scrollbarTabindex:{type:[Number,String],default:void 0}};function y7(n){const e=n.tableLayout==="auto";let t=n.columns||[];e&&t.every(r=>r.width===void 0)&&(t=[]);const i=r=>{const s={key:`${n.tableLayout}_${r.id}`,style:{},name:void 0};return e?s.style={width:`${r.width}px`}:s.name=r.id,s};return wt("colgroup",{},t.map(r=>wt("col",i(r))))}y7.props=["columns","tableLayout"];const $xe=()=>{const n=X(),e=(s,a)=>{const o=n.value;o&&o.scrollTo(s,a)},t=(s,a)=>{const o=n.value;o&&At(a)&&["Top","Left"].includes(s)&&o[`setScroll${s}`](a)};return{scrollBarRef:n,scrollTo:e,setScrollTop:s=>t("Top",s),setScrollLeft:s=>t("Left",s)}};var jF=!1,jf,kI,OI,h1,p1,_7,m1,NI,BI,FI,b7,zI,UI,S7,w7;function sa(){if(!jF){jF=!0;var n=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(n),t=/(Mac OS X)|(Windows)|(Linux)/.exec(n);if(zI=/\b(iPhone|iP[ao]d)/.exec(n),UI=/\b(iP[ao]d)/.exec(n),FI=/Android/i.exec(n),S7=/FBAN\/\w+;/i.exec(n),w7=/Mobile/i.exec(n),b7=!!/Win64/.exec(n),e){jf=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,jf&&document&&document.documentMode&&(jf=document.documentMode);var i=/(?:Trident\/(\d+.\d+))/.exec(n);_7=i?parseFloat(i[1])+4:jf,kI=e[2]?parseFloat(e[2]):NaN,OI=e[3]?parseFloat(e[3]):NaN,h1=e[4]?parseFloat(e[4]):NaN,h1?(e=/(?:Chrome\/(\d+\.\d+))/.exec(n),p1=e&&e[1]?parseFloat(e[1]):NaN):p1=NaN}else jf=kI=OI=p1=h1=NaN;if(t){if(t[1]){var r=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(n);m1=r?parseFloat(r[1].replace("_",".")):!0}else m1=!1;NI=!!t[2],BI=!!t[3]}else m1=NI=BI=!1}}var HI={ie:function(){return sa()||jf},ieCompatibilityMode:function(){return sa()||_7>jf},ie64:function(){return HI.ie()&&b7},firefox:function(){return sa()||kI},opera:function(){return sa()||OI},webkit:function(){return sa()||h1},safari:function(){return HI.webkit()},chrome:function(){return sa()||p1},windows:function(){return sa()||NI},osx:function(){return sa()||m1},linux:function(){return sa()||BI},iphone:function(){return sa()||zI},mobile:function(){return sa()||zI||UI||FI||w7},nativeApp:function(){return sa()||S7},android:function(){return sa()||FI},ipad:function(){return sa()||UI}},Gxe=HI,Jb=!!(typeof window<"u"&&window.document&&window.document.createElement),Wxe={canUseDOM:Jb,canUseWorkers:typeof Worker<"u",canUseEventListeners:Jb&&!!(window.addEventListener||window.attachEvent),canUseViewport:Jb&&!!window.screen,isInWorker:!Jb},x7=Wxe,C7;x7.canUseDOM&&(C7=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function Kxe(n,e){if(!x7.canUseDOM||e&&!("addEventListener"in document))return!1;var t="on"+n,i=t in document;if(!i){var r=document.createElement("div");r.setAttribute(t,"return;"),i=typeof r[t]=="function"}return!i&&C7&&n==="wheel"&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var qxe=Kxe,QF=10,ZF=40,JF=800;function M7(n){var e=0,t=0,i=0,r=0;return"detail"in n&&(t=n.detail),"wheelDelta"in n&&(t=-n.wheelDelta/120),"wheelDeltaY"in n&&(t=-n.wheelDeltaY/120),"wheelDeltaX"in n&&(e=-n.wheelDeltaX/120),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(e=t,t=0),i=e*QF,r=t*QF,"deltaY"in n&&(r=n.deltaY),"deltaX"in n&&(i=n.deltaX),(i||r)&&n.deltaMode&&(n.deltaMode==1?(i*=ZF,r*=ZF):(i*=JF,r*=JF)),i&&!e&&(e=i<1?-1:1),r&&!t&&(t=r<1?-1:1),{spinX:e,spinY:t,pixelX:i,pixelY:r}}M7.getEventType=function(){return Gxe.firefox()?"DOMMouseScroll":qxe("wheel")?"wheel":"mousewheel"};var Xxe=M7;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const Yxe=function(n,e){if(n&&n.addEventListener){const t=function(i){const r=Xxe(i);e&&Reflect.apply(e,this,[i,r])};n.addEventListener("wheel",t,{passive:!0})}},jxe={beforeMount(n,e){Yxe(n,e.value)}};let Qxe=1;const Zxe=ve({name:"ElTable",directives:{Mousewheel:jxe},components:{TableHeader:Axe,TableBody:Oxe,TableFooter:Fxe,ElScrollbar:ic,hColgroup:y7},props:Vxe,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change","scroll"],setup(n){const{t:e}=xn(),t=Ze("table"),i=jt();un(rc,i);const r=gxe(i,n);i.store=r;const s=new _xe({store:i.store,table:i,fit:n.fit,showHeader:n.showHeader});i.layout=s;const a=N(()=>(r.states.data.value||[]).length===0),{setCurrentRow:o,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:f,toggleRowExpansion:h,clearSort:p,sort:m,updateKeyChildren:v}=zxe(r),{isHidden:g,renderExpanded:_,setDragVisible:y,isGroup:S,handleMouseLeave:w,handleHeaderFooterMousewheel:x,tableSize:T,emptyBlockStyle:C,handleFixedMousewheel:M,resizeProxyVisible:A,bodyWidth:E,resizeState:I,doLayout:P,tableBodyStyles:D,tableLayout:L,scrollbarViewStyle:R,scrollbarStyle:B}=Uxe(n,s,r,i),{scrollBarRef:k,scrollTo:O,setScrollLeft:U,setScrollTop:G}=$xe(),q=wa(P,50),W=`${t.namespace.value}-table_${Qxe++}`;i.tableId=W,i.state={isGroup:S,resizeState:I,doLayout:P,debouncedUpdateLayout:q};const Y=N(()=>{var ee;return(ee=n.sumText)!=null?ee:e("el.table.sumText")}),J=N(()=>{var ee;return(ee=n.emptyText)!=null?ee:e("el.table.emptyText")}),Z=N(()=>g7(r.states.originColumns.value)[0]);return Hxe(i),Un(()=>{q.cancel()}),{ns:t,layout:s,store:r,columns:Z,handleHeaderFooterMousewheel:x,handleMouseLeave:w,tableId:W,tableSize:T,isHidden:g,isEmpty:a,renderExpanded:_,resizeProxyVisible:A,resizeState:I,isGroup:S,bodyWidth:E,tableBodyStyles:D,emptyBlockStyle:C,debouncedUpdateLayout:q,handleFixedMousewheel:M,setCurrentRow:o,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:f,toggleRowExpansion:h,clearSort:p,doLayout:P,sort:m,updateKeyChildren:v,t:e,setDragVisible:y,context:i,computedSumText:Y,computedEmptyText:J,tableLayout:L,scrollbarViewStyle:R,scrollbarStyle:B,scrollBarRef:k,scrollTo:O,setScrollLeft:U,setScrollTop:G}}});function Jxe(n,e,t,i,r,s){const a=yt("hColgroup"),o=yt("table-header"),l=yt("table-body"),c=yt("table-footer"),u=yt("el-scrollbar"),d=qC("mousewheel");return F(),ie("div",{ref:"tableWrapper",class:$([{[n.ns.m("fit")]:n.fit,[n.ns.m("striped")]:n.stripe,[n.ns.m("border")]:n.border||n.isGroup,[n.ns.m("hidden")]:n.isHidden,[n.ns.m("group")]:n.isGroup,[n.ns.m("fluid-height")]:n.maxHeight,[n.ns.m("scrollable-x")]:n.layout.scrollX.value,[n.ns.m("scrollable-y")]:n.layout.scrollY.value,[n.ns.m("enable-row-hover")]:!n.store.states.isComplex.value,[n.ns.m("enable-row-transition")]:(n.store.states.data.value||[]).length!==0&&(n.store.states.data.value||[]).length<100,"has-footer":n.showSummary},n.ns.m(n.tableSize),n.className,n.ns.b(),n.ns.m(`layout-${n.tableLayout}`)]),style:Ct(n.style),"data-prefix":n.ns.namespace.value,onMouseleave:n.handleMouseLeave},[le("div",{class:$(n.ns.e("inner-wrapper"))},[le("div",{ref:"hiddenColumns",class:"hidden-columns"},[Ne(n.$slots,"default")],512),n.showHeader&&n.tableLayout==="fixed"?Wt((F(),ie("div",{key:0,ref:"headerWrapper",class:$(n.ns.e("header-wrapper"))},[le("table",{ref:"tableHeader",class:$(n.ns.e("header")),style:Ct(n.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[oe(a,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),oe(o,{ref:"tableHeaderRef",border:n.border,"default-sort":n.defaultSort,store:n.store,"append-filter-panel-to":n.appendFilterPanelTo,onSetDragVisible:n.setDragVisible},null,8,["border","default-sort","store","append-filter-panel-to","onSetDragVisible"])],6)],2)),[[d,n.handleHeaderFooterMousewheel]]):Be("v-if",!0),le("div",{ref:"bodyWrapper",class:$(n.ns.e("body-wrapper"))},[oe(u,{ref:"scrollBarRef","view-style":n.scrollbarViewStyle,"wrap-style":n.scrollbarStyle,always:n.scrollbarAlwaysOn,tabindex:n.scrollbarTabindex,onScroll:f=>n.$emit("scroll",f)},{default:ge(()=>[le("table",{ref:"tableBody",class:$(n.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:Ct({width:n.bodyWidth,tableLayout:n.tableLayout})},[oe(a,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),n.showHeader&&n.tableLayout==="auto"?(F(),He(o,{key:0,ref:"tableHeaderRef",class:$(n.ns.e("body-header")),border:n.border,"default-sort":n.defaultSort,store:n.store,"append-filter-panel-to":n.appendFilterPanelTo,onSetDragVisible:n.setDragVisible},null,8,["class","border","default-sort","store","append-filter-panel-to","onSetDragVisible"])):Be("v-if",!0),oe(l,{context:n.context,highlight:n.highlightCurrentRow,"row-class-name":n.rowClassName,"tooltip-effect":n.tooltipEffect,"tooltip-options":n.tooltipOptions,"row-style":n.rowStyle,store:n.store,stripe:n.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),n.showSummary&&n.tableLayout==="auto"?(F(),He(c,{key:1,class:$(n.ns.e("body-footer")),border:n.border,"default-sort":n.defaultSort,store:n.store,"sum-text":n.computedSumText,"summary-method":n.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):Be("v-if",!0)],6),n.isEmpty?(F(),ie("div",{key:0,ref:"emptyBlock",style:Ct(n.emptyBlockStyle),class:$(n.ns.e("empty-block"))},[le("span",{class:$(n.ns.e("empty-text"))},[Ne(n.$slots,"empty",{},()=>[Xt(rt(n.computedEmptyText),1)])],2)],6)):Be("v-if",!0),n.$slots.append?(F(),ie("div",{key:1,ref:"appendWrapper",class:$(n.ns.e("append-wrapper"))},[Ne(n.$slots,"append")],2)):Be("v-if",!0)]),_:3},8,["view-style","wrap-style","always","tabindex","onScroll"])],2),n.showSummary&&n.tableLayout==="fixed"?Wt((F(),ie("div",{key:1,ref:"footerWrapper",class:$(n.ns.e("footer-wrapper"))},[le("table",{class:$(n.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:Ct(n.tableBodyStyles)},[oe(a,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),oe(c,{border:n.border,"default-sort":n.defaultSort,store:n.store,"sum-text":n.computedSumText,"summary-method":n.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[Dn,!n.isEmpty],[d,n.handleHeaderFooterMousewheel]]):Be("v-if",!0),n.border||n.isGroup?(F(),ie("div",{key:2,class:$(n.ns.e("border-left-patch"))},null,2)):Be("v-if",!0)],2),Wt(le("div",{ref:"resizeProxy",class:$(n.ns.e("column-resize-proxy"))},null,2),[[Dn,n.resizeProxyVisible]])],46,["data-prefix","onMouseleave"])}var eCe=ot(Zxe,[["render",Jxe],["__file","table.vue"]]);const tCe={selection:"table-column--selection",expand:"table__expand-column"},nCe={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},iCe=n=>tCe[n]||"",rCe={selection:{renderHeader({store:n,column:e}){function t(){return n.states.data.value&&n.states.data.value.length===0}return wt(ko,{disabled:t(),size:n.states.tableSize.value,indeterminate:n.states.selection.value.length>0&&!n.states.isAllSelected.value,"onUpdate:modelValue":n.toggleAllSelection,modelValue:n.states.isAllSelected.value,ariaLabel:e.label})},renderCell({row:n,column:e,store:t,$index:i}){return wt(ko,{disabled:e.selectable?!e.selectable.call(null,n,i):!1,size:t.states.tableSize.value,onChange:()=>{t.commit("rowSelectedChanged",n)},onClick:r=>r.stopPropagation(),modelValue:t.isSelected(n),ariaLabel:e.label})},sortable:!1,resizable:!1},index:{renderHeader({column:n}){return n.label||"#"},renderCell({column:n,$index:e}){let t=e+1;const i=n.index;return At(i)?t=e+i:Tt(i)&&(t=i(e)),wt("div",{},[t])},sortable:!1},expand:{renderHeader({column:n}){return n.label||""},renderCell({row:n,store:e,expanded:t}){const{ns:i}=e,r=[i.e("expand-icon")];return t&&r.push(i.em("expand-icon","expanded")),wt("div",{class:r,onClick:function(a){a.stopPropagation(),e.toggleRowExpansion(n)}},{default:()=>[wt(_t,null,{default:()=>[wt(js)]})]})},sortable:!1,resizable:!1}};function sCe({row:n,column:e,$index:t}){var i;const r=e.property,s=r&&s1(n,r).value;return e&&e.formatter?e.formatter(n,e,s,t):((i=s==null?void 0:s.toString)==null?void 0:i.call(s))||""}function aCe({row:n,treeNode:e,store:t},i=!1){const{ns:r}=t;if(!e)return i?[wt("span",{class:r.e("placeholder")})]:null;const s=[],a=function(o){o.stopPropagation(),!e.loading&&t.loadOrToggle(n)};if(e.indent&&s.push(wt("span",{class:r.e("indent"),style:{"padding-left":`${e.indent}px`}})),ai(e.expanded)&&!e.noLazyChildren){const o=[r.e("expand-icon"),e.expanded?r.em("expand-icon","expanded"):""];let l=js;e.loading&&(l=ql),s.push(wt("div",{class:o,onClick:a},{default:()=>[wt(_t,{class:{[r.is("loading")]:e.loading}},{default:()=>[wt(l)]})]}))}else s.push(wt("span",{class:r.e("placeholder")}));return s}function e4(n,e){return n.reduce((t,i)=>(t[i]=i,t),e)}function oCe(n,e){const t=jt();return{registerComplexWatchers:()=>{const s=["fixed"],a={realWidth:"width",realMinWidth:"minWidth"},o=e4(s,a);Object.keys(o).forEach(l=>{const c=a[l];Cn(e,c)&&We(()=>e[c],u=>{let d=u;c==="width"&&l==="realWidth"&&(d=m3(u)),c==="minWidth"&&l==="realMinWidth"&&(d=u7(u)),t.columnConfig.value[c]=d,t.columnConfig.value[l]=d;const f=c==="fixed";n.value.store.scheduleLayout(f)})})},registerNormalWatchers:()=>{const s=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],a={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},o=e4(s,a);Object.keys(o).forEach(l=>{const c=a[l];Cn(e,c)&&We(()=>e[c],u=>{t.columnConfig.value[l]=u})})}}}function lCe(n,e,t){const i=jt(),r=X(""),s=X(!1),a=X(),o=X(),l=Ze("table");zr(()=>{a.value=n.align?`is-${n.align}`:null,a.value}),zr(()=>{o.value=n.headerAlign?`is-${n.headerAlign}`:a.value,o.value});const c=N(()=>{let S=i.vnode.vParent||i.parent;for(;S&&!S.tableId&&!S.columnId;)S=S.vnode.vParent||S.parent;return S}),u=N(()=>{const{store:S}=i.parent;if(!S)return!1;const{treeData:w}=S.states,x=w.value;return x&&Object.keys(x).length>0}),d=X(m3(n.width)),f=X(u7(n.minWidth)),h=S=>(d.value&&(S.width=d.value),f.value&&(S.minWidth=f.value),!d.value&&f.value&&(S.width=void 0),S.minWidth||(S.minWidth=80),S.realWidth=Number(S.width===void 0?S.minWidth:S.width),S),p=S=>{const w=S.type,x=rCe[w]||{};Object.keys(x).forEach(C=>{const M=x[C];C!=="className"&&M!==void 0&&(S[C]=M)});const T=iCe(w);if(T){const C=`${b(l.namespace)}-${T}`;S.className=S.className?`${S.className} ${C}`:C}return S},m=S=>{nt(S)?S.forEach(x=>w(x)):w(S);function w(x){var T;((T=x==null?void 0:x.type)==null?void 0:T.name)==="ElTableColumn"&&(x.vParent=i)}};return{columnId:r,realAlign:a,isSubColumn:s,realHeaderAlign:o,columnOrTableParent:c,setColumnWidth:h,setColumnForcedProps:p,setColumnRenders:S=>{n.renderHeader||S.type!=="selection"&&(S.renderHeader=x=>(i.columnConfig.value.label,Ne(e,"header",x,()=>[S.label]))),e["filter-icon"]&&(S.renderFilterIcon=x=>Ne(e,"filter-icon",x));let w=S.renderCell;return S.type==="expand"?(S.renderCell=x=>wt("div",{class:"cell"},[w(x)]),t.value.renderExpanded=x=>e.default?e.default(x):e.default):(w=w||sCe,S.renderCell=x=>{let T=null;if(e.default){const P=e.default(x);T=P.some(D=>D.type!==Ds)?P:w(x)}else T=w(x);const{columns:C}=t.value.store.states,M=C.value.findIndex(P=>P.type==="default"),A=u.value&&x.cellIndex===M,E=aCe(x,A),I={class:"cell",style:{}};return S.showOverflowTooltip&&(I.class=`${I.class} ${b(l.namespace)}-tooltip`,I.style={width:`${(x.column.realWidth||Number(x.column.width))-1}px`}),m(T),wt("div",I,[E,T])}),S},getPropsData:(...S)=>S.reduce((w,x)=>(nt(x)&&x.forEach(T=>{w[T]=n[T]}),w),{}),getColumnElIndex:(S,w)=>Array.prototype.indexOf.call(S,w),updateColumnOrder:()=>{t.value.store.commit("updateColumnOrder",i.columnConfig.value)}}}var cCe={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:n=>n.every(e=>["ascending","descending",null].includes(e))}};let uCe=1;var T7=ve({name:"ElTableColumn",components:{ElCheckbox:ko},props:cCe,setup(n,{slots:e}){const t=jt(),i=X({}),r=N(()=>{let y=t.parent;for(;y&&!y.tableId;)y=y.parent;return y}),{registerNormalWatchers:s,registerComplexWatchers:a}=oCe(r,n),{columnId:o,isSubColumn:l,realHeaderAlign:c,columnOrTableParent:u,setColumnWidth:d,setColumnForcedProps:f,setColumnRenders:h,getPropsData:p,getColumnElIndex:m,realAlign:v,updateColumnOrder:g}=lCe(n,e,r),_=u.value;o.value=`${_.tableId||_.columnId}_column_${uCe++}`,KC(()=>{l.value=r.value!==_;const y=n.type||"default",S=n.sortable===""?!0:n.sortable,w=Wn(n.showOverflowTooltip)?_.props.showOverflowTooltip:n.showOverflowTooltip,x={...nCe[y],id:o.value,type:y,property:n.prop||n.property,align:v,headerAlign:c,showOverflowTooltip:w,filterable:n.filters||n.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:S,index:n.index,rawColumnKey:t.vnode.key};let E=p(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);E=axe(x,E),E=lxe(h,d,f)(E),i.value=E,s(),a()}),Ht(()=>{var y;const S=u.value,w=l.value?S.vnode.el.children:(y=S.refs.hiddenColumns)==null?void 0:y.children,x=()=>m(w||[],t.vnode.el);i.value.getColumnIndex=x,x()>-1&&r.value.store.commit("insertColumn",i.value,l.value?S.columnConfig.value:null,g)}),Un(()=>{const y=i.value.getColumnIndex;(y?y():-1)>-1&&r.value.store.commit("removeColumn",i.value,l.value?_.columnConfig.value:null,g)}),t.columnId=o.value,t.columnConfig=i},render(){var n,e,t;try{const i=(e=(n=this.$slots).default)==null?void 0:e.call(n,{row:{},column:{},$index:-1}),r=[];if(nt(i))for(const a of i)((t=a.type)==null?void 0:t.name)==="ElTableColumn"||a.shapeFlag&2?r.push(a):a.type===bt&&nt(a.children)&&a.children.forEach(o=>{(o==null?void 0:o.patchFlag)!==1024&&!xt(o==null?void 0:o.children)&&r.push(o)});return wt("div",r)}catch{return wt("div",[])}}});const dCe=Ft(eCe,{TableColumn:T7}),fCe=ki(T7);var d_=(n=>(n.ASC="asc",n.DESC="desc",n))(d_||{}),f_=(n=>(n.CENTER="center",n.RIGHT="right",n))(f_||{}),A7=(n=>(n.LEFT="left",n.RIGHT="right",n))(A7||{});const VI={asc:"desc",desc:"asc"},h_=Symbol("placeholder"),hCe=(n,e,t)=>{var i;const r={flexGrow:0,flexShrink:0,...t?{}:{flexGrow:n.flexGrow||0,flexShrink:n.flexShrink||1}};t||(r.flexShrink=1);const s={...(i=n.style)!=null?i:{},...r,flexBasis:"auto",width:n.width};return e||(n.maxWidth&&(s.maxWidth=n.maxWidth),n.minWidth&&(s.minWidth=n.minWidth)),s};function pCe(n,e,t){const i=N(()=>b(e).map((v,g)=>{var _,y;return{...v,key:(y=(_=v.key)!=null?_:v.dataKey)!=null?y:g}})),r=N(()=>b(i).filter(v=>!v.hidden)),s=N(()=>b(r).filter(v=>v.fixed==="left"||v.fixed===!0)),a=N(()=>b(r).filter(v=>v.fixed==="right")),o=N(()=>b(r).filter(v=>!v.fixed)),l=N(()=>{const v=[];return b(s).forEach(g=>{v.push({...g,placeholderSign:h_})}),b(o).forEach(g=>{v.push(g)}),b(a).forEach(g=>{v.push({...g,placeholderSign:h_})}),v}),c=N(()=>b(s).length||b(a).length),u=N(()=>b(i).reduce((v,g)=>(v[g.key]=hCe(g,b(t),n.fixed),v),{})),d=N(()=>b(r).reduce((v,g)=>v+g.width,0)),f=v=>b(i).find(g=>g.key===v),h=v=>b(u)[v],p=(v,g)=>{v.width=g};function m(v){var g;const{key:_}=v.currentTarget.dataset;if(!_)return;const{sortState:y,sortBy:S}=n;let w=d_.ASC;Yt(y)?w=VI[y[_]]:w=VI[S.order],(g=n.onColumnSort)==null||g.call(n,{column:f(_),key:_,order:w})}return{columns:i,columnsStyles:u,columnsTotalWidth:d,fixedColumnsOnLeft:s,fixedColumnsOnRight:a,hasFixedColumns:c,mainColumns:l,normalColumns:o,visibleColumns:r,getColumn:f,getColumnStyle:h,updateColumnWidth:p,onColumnSorted:m}}const mCe=(n,{mainTableRef:e,leftTableRef:t,rightTableRef:i,onMaybeEndReached:r})=>{const s=X({scrollLeft:0,scrollTop:0});function a(h){var p,m,v;const{scrollTop:g}=h;(p=e.value)==null||p.scrollTo(h),(m=t.value)==null||m.scrollToTop(g),(v=i.value)==null||v.scrollToTop(g)}function o(h){s.value=h,a(h)}function l(h){s.value.scrollTop=h,a(b(s))}function c(h){var p,m;s.value.scrollLeft=h,(m=(p=e.value)==null?void 0:p.scrollTo)==null||m.call(p,b(s))}function u(h){var p;o(h),(p=n.onScroll)==null||p.call(n,h)}function d({scrollTop:h}){const{scrollTop:p}=b(s);h!==p&&l(h)}function f(h,p="auto"){var m;(m=e.value)==null||m.scrollToRow(h,p)}return We(()=>b(s).scrollTop,(h,p)=>{h>p&&r()}),{scrollPos:s,scrollTo:o,scrollToLeft:c,scrollToTop:l,scrollToRow:f,onScroll:u,onVerticalScroll:d}},vCe=(n,{mainTableRef:e,leftTableRef:t,rightTableRef:i,tableInstance:r,ns:s,isScrolling:a})=>{const o=jt(),{emit:l}=o,c=Yn(!1),u=X(n.defaultExpandedRowKeys||[]),d=X(-1),f=Yn(null),h=X({}),p=X({}),m=Yn({}),v=Yn({}),g=Yn({}),_=N(()=>At(n.estimatedRowHeight));function y(A){var E;(E=n.onRowsRendered)==null||E.call(n,A),A.rowCacheEnd>b(d)&&(d.value=A.rowCacheEnd)}function S({hovered:A,rowKey:E}){if(a.value)return;r.vnode.el.querySelectorAll(`[rowkey="${String(E)}"]`).forEach(D=>{A?D.classList.add(s.is("hovered")):D.classList.remove(s.is("hovered"))})}function w({expanded:A,rowData:E,rowIndex:I,rowKey:P}){var D,L;const R=[...b(u)],B=R.indexOf(P);A?B===-1&&R.push(P):B>-1&&R.splice(B,1),u.value=R,l("update:expandedRowKeys",R),(D=n.onRowExpand)==null||D.call(n,{expanded:A,rowData:E,rowIndex:I,rowKey:P}),(L=n.onExpandedRowsChange)==null||L.call(n,R)}const x=wa(()=>{var A,E,I,P;c.value=!0,h.value={...b(h),...b(p)},T(b(f),!1),p.value={},f.value=null,(A=e.value)==null||A.forceUpdate(),(E=t.value)==null||E.forceUpdate(),(I=i.value)==null||I.forceUpdate(),(P=o.proxy)==null||P.$forceUpdate(),c.value=!1},0);function T(A,E=!1){b(_)&&[e,t,i].forEach(I=>{const P=b(I);P&&P.resetAfterRowIndex(A,E)})}function C(A,E,I){const P=b(f);(P===null||P>I)&&(f.value=I),p.value[A]=E}function M({rowKey:A,height:E,rowIndex:I},P){P?P===A7.RIGHT?g.value[A]=E:m.value[A]=E:v.value[A]=E;const D=Math.max(...[m,g,v].map(L=>L.value[A]||0));b(h)[A]!==D&&(C(A,D,I),x())}return{expandedRowKeys:u,lastRenderedRowIndex:d,isDynamic:_,isResetting:c,rowHeights:h,resetAfterIndex:T,onRowExpanded:w,onRowHovered:S,onRowsRendered:y,onRowHeightChange:M}},gCe=(n,{expandedRowKeys:e,lastRenderedRowIndex:t,resetAfterIndex:i})=>{const r=X({}),s=N(()=>{const o={},{data:l,rowKey:c}=n,u=b(e);if(!u||!u.length)return l;const d=[],f=new Set;u.forEach(p=>f.add(p));let h=l.slice();for(h.forEach(p=>o[p[c]]=0);h.length>0;){const p=h.shift();d.push(p),f.has(p[c])&&nt(p.children)&&p.children.length>0&&(h=[...p.children,...h],p.children.forEach(m=>o[m[c]]=o[p[c]]+1))}return r.value=o,d}),a=N(()=>{const{data:o,expandColumnKey:l}=n;return l?b(s):o});return We(a,(o,l)=>{o!==l&&(t.value=-1,i(0,!0))}),{data:a,depthMap:r}},yCe=(n,e)=>n+e,v1=n=>nt(n)?n.reduce(yCe,0):n,Uh=(n,e,t={})=>Tt(n)?n(e):n??t,ad=n=>(["width","maxWidth","minWidth","height"].forEach(e=>{n[e]=Ui(n[e])}),n),E7=n=>Pi(n)?e=>wt(n,e):n,_Ce=(n,{columnsTotalWidth:e,rowsHeight:t,fixedColumnsOnLeft:i,fixedColumnsOnRight:r})=>{const s=N(()=>{const{fixed:_,width:y,vScrollbarSize:S}=n,w=y-S;return _?Math.max(Math.round(b(e)),w):w}),a=N(()=>b(s)+n.vScrollbarSize),o=N(()=>{const{height:_=0,maxHeight:y=0,footerHeight:S,hScrollbarSize:w}=n;if(y>0){const x=b(h),T=b(t),M=b(f)+x+T+w;return Math.min(M,y-S)}return _-S}),l=N(()=>{const{maxHeight:_}=n,y=b(o);if(At(_)&&_>0)return y;const S=b(t)+b(f)+b(h);return Math.min(y,S)}),c=_=>_.width,u=N(()=>v1(b(i).map(c))),d=N(()=>v1(b(r).map(c))),f=N(()=>v1(n.headerHeight)),h=N(()=>{var _;return(((_=n.fixedData)==null?void 0:_.length)||0)*n.rowHeight}),p=N(()=>b(o)-b(f)-b(h)),m=N(()=>{const{style:_={},height:y,width:S}=n;return ad({..._,height:y,width:S})}),v=N(()=>ad({height:n.footerHeight})),g=N(()=>({top:Ui(b(f)),bottom:Ui(n.footerHeight),width:Ui(n.width)}));return{bodyWidth:s,fixedTableHeight:l,mainTableHeight:o,leftTableWidth:u,rightTableWidth:d,headerWidth:a,windowHeight:p,footerHeight:v,emptyStyle:g,rootStyle:m,headerHeight:f}};function bCe(n){const e=X(),t=X(),i=X(),{columns:r,columnsStyles:s,columnsTotalWidth:a,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,hasFixedColumns:c,mainColumns:u,onColumnSorted:d}=pCe(n,zn(n,"columns"),zn(n,"fixed")),{scrollTo:f,scrollToLeft:h,scrollToTop:p,scrollToRow:m,onScroll:v,onVerticalScroll:g,scrollPos:_}=mCe(n,{mainTableRef:e,leftTableRef:t,rightTableRef:i,onMaybeEndReached:Q}),y=Ze("table-v2"),S=jt(),w=Yn(!1),{expandedRowKeys:x,lastRenderedRowIndex:T,isDynamic:C,isResetting:M,rowHeights:A,resetAfterIndex:E,onRowExpanded:I,onRowHeightChange:P,onRowHovered:D,onRowsRendered:L}=vCe(n,{mainTableRef:e,leftTableRef:t,rightTableRef:i,tableInstance:S,ns:y,isScrolling:w}),{data:R,depthMap:B}=gCe(n,{expandedRowKeys:x,lastRenderedRowIndex:T,resetAfterIndex:E}),k=N(()=>{const{estimatedRowHeight:j,rowHeight:Pe}=n,we=b(R);return At(j)?Object.values(b(A)).reduce((De,Me)=>De+Me,0):we.length*Pe}),{bodyWidth:O,fixedTableHeight:U,mainTableHeight:G,leftTableWidth:q,rightTableWidth:W,headerWidth:Y,windowHeight:J,footerHeight:Z,emptyStyle:ee,rootStyle:me,headerHeight:ye}=_Ce(n,{columnsTotalWidth:a,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,rowsHeight:k}),Te=X(),Ee=N(()=>{const j=b(R).length===0;return nt(n.fixedData)?n.fixedData.length===0&&j:j});function H(j){const{estimatedRowHeight:Pe,rowHeight:we,rowKey:De}=n;return Pe?b(A)[b(R)[j][De]]||Pe:we}function Q(){const{onEndReached:j}=n;if(!j)return;const{scrollTop:Pe}=b(_),we=b(k),De=b(J),Me=we-(Pe+De)+n.hScrollbarSize;b(T)>=0&&we===Pe+b(G)-b(ye)&&j(Me)}return We(()=>n.expandedRowKeys,j=>x.value=j,{deep:!0}),{columns:r,containerRef:Te,mainTableRef:e,leftTableRef:t,rightTableRef:i,isDynamic:C,isResetting:M,isScrolling:w,hasFixedColumns:c,columnsStyles:s,columnsTotalWidth:a,data:R,expandedRowKeys:x,depthMap:B,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,mainColumns:u,bodyWidth:O,emptyStyle:ee,rootStyle:me,headerWidth:Y,footerHeight:Z,mainTableHeight:G,fixedTableHeight:U,leftTableWidth:q,rightTableWidth:W,showEmpty:Ee,getRowHeight:H,onColumnSorted:d,onRowHovered:D,onRowExpanded:I,onRowsRendered:L,onRowHeightChange:P,scrollTo:f,scrollToLeft:h,scrollToTop:p,scrollToRow:m,onScroll:v,onVerticalScroll:g}}const y3=Symbol("tableV2"),I7=String,hb={type:Re(Array),required:!0},_3={type:Re(Array)},R7={..._3,required:!0},SCe=String,t4={type:Re(Array),default:()=>Li([])},Qf={type:Number,required:!0},P7={type:Re([String,Number,Symbol]),default:"id"},n4={type:Re(Object)},uh=at({class:String,columns:hb,columnsStyles:{type:Re(Object),required:!0},depth:Number,expandColumnKey:SCe,estimatedRowHeight:{...Mh.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:Re(Function)},onRowHover:{type:Re(Function)},onRowHeightChange:{type:Re(Function)},rowData:{type:Re(Object),required:!0},rowEventHandlers:{type:Re(Object)},rowIndex:{type:Number,required:!0},rowKey:P7,style:{type:Re(Object)}}),PT={type:Number,required:!0},b3=at({class:String,columns:hb,fixedHeaderData:{type:Re(Array)},headerData:{type:Re(Array),required:!0},headerHeight:{type:Re([Number,Array]),default:50},rowWidth:PT,rowHeight:{type:Number,default:50},height:PT,width:PT}),g1=at({columns:hb,data:R7,fixedData:_3,estimatedRowHeight:uh.estimatedRowHeight,width:Qf,height:Qf,headerWidth:Qf,headerHeight:b3.headerHeight,bodyWidth:Qf,rowHeight:Qf,cache:Q9.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:Mh.scrollbarAlwaysOn,scrollbarStartGap:Mh.scrollbarStartGap,scrollbarEndGap:Mh.scrollbarEndGap,class:I7,style:n4,containerStyle:n4,getRowHeight:{type:Re(Function),required:!0},rowKey:uh.rowKey,onRowsRendered:{type:Re(Function)},onScroll:{type:Re(Function)}}),wCe=at({cache:g1.cache,estimatedRowHeight:uh.estimatedRowHeight,rowKey:P7,headerClass:{type:Re([String,Function])},headerProps:{type:Re([Object,Function])},headerCellProps:{type:Re([Object,Function])},headerHeight:b3.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:Re([String,Function])},rowProps:{type:Re([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:Re([Object,Function])},columns:hb,data:R7,dataGetter:{type:Re(Function)},fixedData:_3,expandColumnKey:uh.expandColumnKey,expandedRowKeys:t4,defaultExpandedRowKeys:t4,class:I7,fixed:Boolean,style:{type:Re(Object)},width:Qf,height:Qf,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:Mh.hScrollbarSize,vScrollbarSize:Mh.vScrollbarSize,scrollbarAlwaysOn:e7.alwaysOn,sortBy:{type:Re(Object),default:()=>({})},sortState:{type:Re(Object),default:void 0},onColumnSort:{type:Re(Function)},onExpandedRowsChange:{type:Re(Function)},onEndReached:{type:Re(Function)},onRowExpand:uh.onRowExpand,onScroll:g1.onScroll,onRowsRendered:g1.onRowsRendered,rowEventHandlers:uh.rowEventHandlers}),xCe="ElTableV2Header",CCe=ve({name:xCe,props:b3,setup(n,{slots:e,expose:t}){const i=Ze("table-v2"),r=mt("tableV2GridScrollLeft"),s=X(),a=N(()=>ad({width:n.width,height:n.height})),o=N(()=>ad({width:n.rowWidth,height:n.height})),l=N(()=>As(b(n.headerHeight))),c=f=>{const h=b(s);Mt(()=>{h!=null&&h.scroll&&h.scroll({left:f})})},u=()=>{const f=i.e("fixed-header-row"),{columns:h,fixedHeaderData:p,rowHeight:m}=n;return p==null?void 0:p.map((v,g)=>{var _;const y=ad({height:m,width:"100%"});return(_=e.fixed)==null?void 0:_.call(e,{class:f,columns:h,rowData:v,rowIndex:-(g+1),style:y})})},d=()=>{const f=i.e("dynamic-header-row"),{columns:h}=n;return b(l).map((p,m)=>{var v;const g=ad({width:"100%",height:p});return(v=e.dynamic)==null?void 0:v.call(e,{class:f,columns:h,headerIndex:m,style:g})})};return Bo(()=>{r!=null&&r.value&&c(r.value)}),t({scrollToLeft:c}),()=>{if(!(n.height<=0))return oe("div",{ref:s,class:n.class,style:b(a),role:"rowgroup"},[oe("div",{style:b(o),class:i.e("header")},[d(),u()])])}}});var MCe=CCe;const TCe=({atXEndEdge:n,atXStartEdge:e,atYEndEdge:t,atYStartEdge:i},r)=>{let s=null,a=0,o=0;const l=(u,d)=>{const f=u<=0&&e.value||u>=0&&n.value,h=d<=0&&i.value||d>=0&&t.value;return f&&h};return{hasReachedEdge:l,onWheel:u=>{Fh(s);let d=u.deltaX,f=u.deltaY;Math.abs(d)>Math.abs(f)?f=0:d=0,u.shiftKey&&f!==0&&(d=f,f=0),!(l(a,o)&&l(a+d,o+f))&&(a+=d,o+=f,u.preventDefault(),s=Dd(()=>{r(a,o),a=0,o=0}))}}},D7=({name:n,clearCache:e,getColumnPosition:t,getColumnStartIndexForOffset:i,getColumnStopIndexForStartIndex:r,getEstimatedTotalHeight:s,getEstimatedTotalWidth:a,getColumnOffset:o,getRowOffset:l,getRowPosition:c,getRowStartIndexForOffset:u,getRowStopIndexForStartIndex:d,initCache:f,injectToInstance:h,validateProps:p})=>ve({name:n??"ElVirtualList",props:Mh,emits:[gx,yx],setup(m,{emit:v,expose:g,slots:_}){const y=Ze("vl");p(m);const S=jt(),w=X(f(m,S));h==null||h(S,w);const x=X(),T=X(),C=X(),M=X(null),A=X({isScrolling:!1,scrollLeft:At(m.initScrollLeft)?m.initScrollLeft:0,scrollTop:At(m.initScrollTop)?m.initScrollTop:0,updateRequested:!1,xAxisScrollDir:Om,yAxisScrollDir:Om}),E=X9(),I=N(()=>Number.parseInt(`${m.height}`,10)),P=N(()=>Number.parseInt(`${m.width}`,10)),D=N(()=>{const{totalColumn:De,totalRow:Me,columnCache:Ae}=m,{isScrolling:Fe,xAxisScrollDir:ne,scrollLeft:z}=b(A);if(De===0||Me===0)return[0,0,0,0];const K=i(m,z,b(w)),ae=r(m,K,z,b(w)),xe=!Fe||ne===_x?Math.max(1,Ae):1,Le=!Fe||ne===Om?Math.max(1,Ae):1;return[Math.max(0,K-xe),Math.max(0,Math.min(De-1,ae+Le)),K,ae]}),L=N(()=>{const{totalColumn:De,totalRow:Me,rowCache:Ae}=m,{isScrolling:Fe,yAxisScrollDir:ne,scrollTop:z}=b(A);if(De===0||Me===0)return[0,0,0,0];const K=u(m,z,b(w)),ae=d(m,K,z,b(w)),xe=!Fe||ne===_x?Math.max(1,Ae):1,Le=!Fe||ne===Om?Math.max(1,Ae):1;return[Math.max(0,K-xe),Math.max(0,Math.min(Me-1,ae+Le)),K,ae]}),R=N(()=>s(m,b(w))),B=N(()=>a(m,b(w))),k=N(()=>{var De;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:m.direction,height:At(m.height)?`${m.height}px`:m.height,width:At(m.width)?`${m.width}px`:m.width},(De=m.style)!=null?De:{}]}),O=N(()=>{const De=`${b(B)}px`;return{height:`${b(R)}px`,pointerEvents:b(A).isScrolling?"none":void 0,width:De}}),U=()=>{const{totalColumn:De,totalRow:Me}=m;if(De>0&&Me>0){const[ae,xe,Le,Xe]=b(D),[je,he,Ye,Ke]=b(L);v(gx,{columnCacheStart:ae,columnCacheEnd:xe,rowCacheStart:je,rowCacheEnd:he,columnVisibleStart:Le,columnVisibleEnd:Xe,rowVisibleStart:Ye,rowVisibleEnd:Ke})}const{scrollLeft:Ae,scrollTop:Fe,updateRequested:ne,xAxisScrollDir:z,yAxisScrollDir:K}=b(A);v(yx,{xAxisScrollDir:z,scrollLeft:Ae,yAxisScrollDir:K,scrollTop:Fe,updateRequested:ne})},G=De=>{const{clientHeight:Me,clientWidth:Ae,scrollHeight:Fe,scrollLeft:ne,scrollTop:z,scrollWidth:K}=De.currentTarget,ae=b(A);if(ae.scrollTop===z&&ae.scrollLeft===ne)return;let xe=ne;if(zF(m.direction))switch(Sx()){case c_:xe=-ne;break;case p3:xe=K-Ae-ne;break}A.value={...ae,isScrolling:!0,scrollLeft:xe,scrollTop:Math.max(0,Math.min(z,Fe-Me)),updateRequested:!0,xAxisScrollDir:lh(ae.scrollLeft,xe),yAxisScrollDir:lh(ae.scrollTop,z)},Mt(()=>me()),ye(),U()},q=(De,Me)=>{const Ae=b(I),Fe=(R.value-Ae)/Me*De;J({scrollTop:Math.min(R.value-Ae,Fe)})},W=(De,Me)=>{const Ae=b(P),Fe=(B.value-Ae)/Me*De;J({scrollLeft:Math.min(B.value-Ae,Fe)})},{onWheel:Y}=TCe({atXStartEdge:N(()=>A.value.scrollLeft<=0),atXEndEdge:N(()=>A.value.scrollLeft>=B.value-b(P)),atYStartEdge:N(()=>A.value.scrollTop<=0),atYEndEdge:N(()=>A.value.scrollTop>=R.value-b(I))},(De,Me)=>{var Ae,Fe,ne,z;(Fe=(Ae=T.value)==null?void 0:Ae.onMouseUp)==null||Fe.call(Ae),(z=(ne=C.value)==null?void 0:ne.onMouseUp)==null||z.call(ne);const K=b(P),ae=b(I);J({scrollLeft:Math.min(A.value.scrollLeft+De,B.value-K),scrollTop:Math.min(A.value.scrollTop+Me,R.value-ae)})});Kn(x,"wheel",Y,{passive:!1});const J=({scrollLeft:De=A.value.scrollLeft,scrollTop:Me=A.value.scrollTop})=>{De=Math.max(De,0),Me=Math.max(Me,0);const Ae=b(A);Me===Ae.scrollTop&&De===Ae.scrollLeft||(A.value={...Ae,xAxisScrollDir:lh(Ae.scrollLeft,De),yAxisScrollDir:lh(Ae.scrollTop,Me),scrollLeft:De,scrollTop:Me,updateRequested:!0},Mt(()=>me()),ye(),U())},Z=(De=0,Me=0,Ae=bo)=>{const Fe=b(A);Me=Math.max(0,Math.min(Me,m.totalColumn-1)),De=Math.max(0,Math.min(De,m.totalRow-1));const ne=kG(y.namespace.value),z=b(w),K=s(m,z),ae=a(m,z);J({scrollLeft:o(m,Me,Ae,Fe.scrollLeft,z,ae>m.width?ne:0),scrollTop:l(m,De,Ae,Fe.scrollTop,z,K>m.height?ne:0)})},ee=(De,Me)=>{const{columnWidth:Ae,direction:Fe,rowHeight:ne}=m,z=E.value(e&&Ae,e&&ne,e&&Fe),K=`${De},${Me}`;if(Cn(z,K))return z[K];{const[,ae]=t(m,Me,b(w)),xe=b(w),Le=zF(Fe),[Xe,je]=c(m,De,xe),[he]=t(m,Me,xe);return z[K]={position:"absolute",left:Le?void 0:`${ae}px`,right:Le?`${ae}px`:void 0,top:`${je}px`,height:`${Xe}px`,width:`${he}px`},z[K]}},me=()=>{A.value.isScrolling=!1,Mt(()=>{E.value(-1,null,null)})};Ht(()=>{if(!wn)return;const{initScrollLeft:De,initScrollTop:Me}=m,Ae=b(x);Ae&&(At(De)&&(Ae.scrollLeft=De),At(Me)&&(Ae.scrollTop=Me)),U()});const ye=()=>{const{direction:De}=m,{scrollLeft:Me,scrollTop:Ae,updateRequested:Fe}=b(A),ne=b(x);if(Fe&&ne){if(De===nv)switch(Sx()){case c_:{ne.scrollLeft=-Me;break}case h3:{ne.scrollLeft=Me;break}default:{const{clientWidth:z,scrollWidth:K}=ne;ne.scrollLeft=K-z-Me;break}}else ne.scrollLeft=Math.max(0,Me);ne.scrollTop=Math.max(0,Ae)}},{resetAfterColumnIndex:Te,resetAfterRowIndex:Ee,resetAfter:H}=S.proxy;g({windowRef:x,innerRef:M,getItemStyleCache:E,scrollTo:J,scrollToItem:Z,states:A,resetAfterColumnIndex:Te,resetAfterRowIndex:Ee,resetAfter:H});const Q=()=>{const{scrollbarAlwaysOn:De,scrollbarStartGap:Me,scrollbarEndGap:Ae,totalColumn:Fe,totalRow:ne}=m,z=b(P),K=b(I),ae=b(B),xe=b(R),{scrollLeft:Le,scrollTop:Xe}=b(A),je=wt(PI,{ref:T,alwaysOn:De,startGap:Me,endGap:Ae,class:y.e("horizontal"),clientSize:z,layout:"horizontal",onScroll:W,ratio:z*100/ae,scrollFrom:Le/(ae-z),total:ne,visible:!0}),he=wt(PI,{ref:C,alwaysOn:De,startGap:Me,endGap:Ae,class:y.e("vertical"),clientSize:K,layout:"vertical",onScroll:q,ratio:K*100/xe,scrollFrom:Xe/(xe-K),total:Fe,visible:!0});return{horizontalScrollbar:je,verticalScrollbar:he}},j=()=>{var De;const[Me,Ae]=b(D),[Fe,ne]=b(L),{data:z,totalColumn:K,totalRow:ae,useIsScrolling:xe,itemKey:Le}=m,Xe=[];if(ae>0&&K>0)for(let je=Fe;je<=ne;je++)for(let he=Me;he<=Ae;he++){const Ye=Le({columnIndex:he,data:z,rowIndex:je});Xe.push(wt(bt,{key:Ye},(De=_.default)==null?void 0:De.call(_,{columnIndex:he,data:z,isScrolling:xe?b(A).isScrolling:void 0,style:ee(je,he),rowIndex:je})))}return Xe},Pe=()=>{const De=en(m.innerElement),Me=j();return[wt(De,{style:b(O),ref:M},xt(De)?Me:{default:()=>Me})]};return()=>{const De=en(m.containerElement),{horizontalScrollbar:Me,verticalScrollbar:Ae}=Q(),Fe=Pe();return wt("div",{key:0,class:y.e("wrapper"),role:m.role},[wt(De,{class:m.className,style:b(k),onScroll:G,ref:x},xt(De)?Fe:{default:()=>Fe}),Me,Ae])}}}),{max:Mx,min:L7,floor:k7}=Math,ACe={column:"columnWidth",row:"rowHeight"},$I={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},Oc=(n,e,t,i)=>{const[r,s,a]=[t[i],n[ACe[i]],t[$I[i]]];if(e>a){let o=0;if(a>=0){const l=r[a];o=l.offset+l.size}for(let l=a+1;l<=e;l++){const c=s(l);r[l]={offset:o,size:c},o+=c}t[$I[i]]=e}return r[e]},O7=(n,e,t,i,r,s)=>{for(;t<=i;){const a=t+k7((i-t)/2),o=Oc(n,a,e,s).offset;if(o===r)return a;o<r?t=a+1:i=a-1}return Mx(0,t-1)},ECe=(n,e,t,i,r)=>{const s=r==="column"?n.totalColumn:n.totalRow;let a=1;for(;t<s&&Oc(n,t,e,r).offset<i;)t+=a,a*=2;return O7(n,e,k7(t/2),L7(t,s-1),i,r)},i4=(n,e,t,i)=>{const[r,s]=[e[i],e[$I[i]]];return(s>0?r[s].offset:0)>=t?O7(n,e,0,s,t,i):ECe(n,e,Mx(0,s),t,i)},N7=({totalRow:n},{estimatedRowHeight:e,lastVisitedRowIndex:t,row:i})=>{let r=0;if(t>=n&&(t=n-1),t>=0){const o=i[t];r=o.offset+o.size}const a=(n-t-1)*e;return r+a},B7=({totalColumn:n},{column:e,estimatedColumnWidth:t,lastVisitedColumnIndex:i})=>{let r=0;if(i>n&&(i=n-1),i>=0){const o=e[i];r=o.offset+o.size}const a=(n-i-1)*t;return r+a},ICe={column:B7,row:N7},r4=(n,e,t,i,r,s,a)=>{const[o,l]=[s==="row"?n.height:n.width,ICe[s]],c=Oc(n,e,r,s),u=l(n,r),d=Mx(0,L7(u-o,c.offset)),f=Mx(0,c.offset-o+a+c.size);switch(t===_M&&(i>=f-o&&i<=d+o?t=bo:t=Ol),t){case o_:return d;case l_:return f;case Ol:return Math.round(f+(d-f)/2);case bo:default:return i>=f&&i<=d?i:f>d||i<f?f:d}},RCe=D7({name:"ElDynamicSizeGrid",getColumnPosition:(n,e,t)=>{const i=Oc(n,e,t,"column");return[i.size,i.offset]},getRowPosition:(n,e,t)=>{const i=Oc(n,e,t,"row");return[i.size,i.offset]},getColumnOffset:(n,e,t,i,r,s)=>r4(n,e,t,i,r,"column",s),getRowOffset:(n,e,t,i,r,s)=>r4(n,e,t,i,r,"row",s),getColumnStartIndexForOffset:(n,e,t)=>i4(n,t,e,"column"),getColumnStopIndexForStartIndex:(n,e,t,i)=>{const r=Oc(n,e,i,"column"),s=t+n.width;let a=r.offset+r.size,o=e;for(;o<n.totalColumn-1&&a<s;)o++,a+=Oc(n,e,i,"column").size;return o},getEstimatedTotalHeight:N7,getEstimatedTotalWidth:B7,getRowStartIndexForOffset:(n,e,t)=>i4(n,t,e,"row"),getRowStopIndexForStartIndex:(n,e,t,i)=>{const{totalRow:r,height:s}=n,a=Oc(n,e,i,"row"),o=t+s;let l=a.size+a.offset,c=e;for(;c<r-1&&l<o;)c++,l+=Oc(n,c,i,"row").size;return c},injectToInstance:(n,e)=>{const t=({columnIndex:s,rowIndex:a},o)=>{var l,c;o=Wn(o)?!0:o,At(s)&&(e.value.lastVisitedColumnIndex=Math.min(e.value.lastVisitedColumnIndex,s-1)),At(a)&&(e.value.lastVisitedRowIndex=Math.min(e.value.lastVisitedRowIndex,a-1)),(l=n.exposed)==null||l.getItemStyleCache.value(-1,null,null),o&&((c=n.proxy)==null||c.$forceUpdate())},i=(s,a)=>{t({columnIndex:s},a)},r=(s,a)=>{t({rowIndex:s},a)};Object.assign(n.proxy,{resetAfterColumnIndex:i,resetAfterRowIndex:r,resetAfter:t})},initCache:({estimatedColumnWidth:n=MI,estimatedRowHeight:e=MI})=>({column:{},estimatedColumnWidth:n,estimatedRowHeight:e,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:n,rowHeight:e})=>{}}),PCe=D7({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:n},e)=>[n,e*n],getRowPosition:({rowHeight:n},e)=>[n,e*n],getEstimatedTotalHeight:({totalRow:n,rowHeight:e})=>e*n,getEstimatedTotalWidth:({totalColumn:n,columnWidth:e})=>e*n,getColumnOffset:({totalColumn:n,columnWidth:e,width:t},i,r,s,a,o)=>{t=Number(t);const l=Math.max(0,n*e-t),c=Math.min(l,i*e),u=Math.max(0,i*e-t+o+e);switch(r==="smart"&&(s>=u-t&&s<=c+t?r=bo:r=Ol),r){case o_:return c;case l_:return u;case Ol:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(t/2)?0:d>l+Math.floor(t/2)?l:d}case bo:default:return s>=u&&s<=c?s:u>c||s<u?u:c}},getRowOffset:({rowHeight:n,height:e,totalRow:t},i,r,s,a,o)=>{e=Number(e);const l=Math.max(0,t*n-e),c=Math.min(l,i*n),u=Math.max(0,i*n-e+o+n);switch(r===_M&&(s>=u-e&&s<=c+e?r=bo:r=Ol),r){case o_:return c;case l_:return u;case Ol:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(e/2)?0:d>l+Math.floor(e/2)?l:d}case bo:default:return s>=u&&s<=c?s:u>c||s<u?u:c}},getColumnStartIndexForOffset:({columnWidth:n,totalColumn:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/n))),getColumnStopIndexForStartIndex:({columnWidth:n,totalColumn:e,width:t},i,r)=>{const s=i*n,a=Math.ceil((t+r-s)/n);return Math.max(0,Math.min(e-1,i+a-1))},getRowStartIndexForOffset:({rowHeight:n,totalRow:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/n))),getRowStopIndexForStartIndex:({rowHeight:n,totalRow:e,height:t},i,r)=>{const s=i*n,a=Math.ceil((t+r-s)/n);return Math.max(0,Math.min(e-1,i+a-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:n,rowHeight:e})=>{}}),DCe="ElTableV2Grid",LCe=n=>{const e=X(),t=X(),i=X(0),r=N(()=>{const{data:v,rowHeight:g,estimatedRowHeight:_}=n;if(!_)return v.length*g}),s=N(()=>{const{fixedData:v,rowHeight:g}=n;return((v==null?void 0:v.length)||0)*g}),a=N(()=>v1(n.headerHeight)),o=N(()=>{const{height:v}=n;return Math.max(0,v-b(a)-b(s))}),l=N(()=>b(a)+b(s)>0),c=({data:v,rowIndex:g})=>v[g][n.rowKey];function u({rowCacheStart:v,rowCacheEnd:g,rowVisibleStart:_,rowVisibleEnd:y}){var S;(S=n.onRowsRendered)==null||S.call(n,{rowCacheStart:v,rowCacheEnd:g,rowVisibleStart:_,rowVisibleEnd:y})}function d(v,g){var _;(_=t.value)==null||_.resetAfterRowIndex(v,g)}function f(v,g){const _=b(e),y=b(t);Yt(v)?(_==null||_.scrollToLeft(v.scrollLeft),i.value=v.scrollLeft,y==null||y.scrollTo(v)):(_==null||_.scrollToLeft(v),i.value=v,y==null||y.scrollTo({scrollLeft:v,scrollTop:g}))}function h(v){var g;(g=b(t))==null||g.scrollTo({scrollTop:v})}function p(v,g){var _;(_=b(t))==null||_.scrollToItem(v,1,g)}function m(){var v,g;(v=b(t))==null||v.$forceUpdate(),(g=b(e))==null||g.$forceUpdate()}return{bodyRef:t,forceUpdate:m,fixedRowHeight:s,gridHeight:o,hasHeader:l,headerHeight:a,headerRef:e,totalHeight:r,itemKey:c,onItemRendered:u,resetAfterRowIndex:d,scrollTo:f,scrollToTop:h,scrollToRow:p,scrollLeft:i}},kCe=ve({name:DCe,props:g1,setup(n,{slots:e,expose:t}){const{ns:i}=mt(y3),{bodyRef:r,fixedRowHeight:s,gridHeight:a,hasHeader:o,headerRef:l,headerHeight:c,totalHeight:u,forceUpdate:d,itemKey:f,onItemRendered:h,resetAfterRowIndex:p,scrollTo:m,scrollToTop:v,scrollToRow:g,scrollLeft:_}=LCe(n);un("tableV2GridScrollLeft",_),t({forceUpdate:d,totalHeight:u,scrollTo:m,scrollToTop:v,scrollToRow:g,resetAfterRowIndex:p});const y=()=>n.bodyWidth;return()=>{const{cache:S,columns:w,data:x,fixedData:T,useIsScrolling:C,scrollbarAlwaysOn:M,scrollbarEndGap:A,scrollbarStartGap:E,style:I,rowHeight:P,bodyWidth:D,estimatedRowHeight:L,headerWidth:R,height:B,width:k,getRowHeight:O,onScroll:U}=n,G=At(L),q=G?RCe:PCe,W=b(c);return oe("div",{role:"table",class:[i.e("table"),n.class],style:I},[oe(q,{ref:r,data:x,useIsScrolling:C,itemKey:f,columnCache:0,columnWidth:G?y:D,totalColumn:1,totalRow:x.length,rowCache:S,rowHeight:G?O:P,width:k,height:b(a),class:i.e("body"),role:"rowgroup",scrollbarStartGap:E,scrollbarEndGap:A,scrollbarAlwaysOn:M,onScroll:U,onItemRendered:h,perfMode:!1},{default:Y=>{var J;const Z=x[Y.rowIndex];return(J=e.row)==null?void 0:J.call(e,{...Y,columns:w,rowData:Z})}}),b(o)&&oe(MCe,{ref:l,class:i.e("header-wrapper"),columns:w,headerData:x,headerHeight:n.headerHeight,fixedHeaderData:T,rowWidth:R,rowHeight:P,width:k,height:Math.min(W+b(s),B)},{dynamic:e.header,fixed:e.row})])}}});var S3=kCe;function OCe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Pi(n)}const NCe=(n,{slots:e})=>{const{mainTableRef:t,...i}=n;return oe(S3,rn({ref:t},i),OCe(e)?e:{default:()=>[e]})};var BCe=NCe;function FCe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Pi(n)}const zCe=(n,{slots:e})=>{if(!n.columns.length)return;const{leftTableRef:t,...i}=n;return oe(S3,rn({ref:t},i),FCe(e)?e:{default:()=>[e]})};var UCe=zCe;function HCe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Pi(n)}const VCe=(n,{slots:e})=>{if(!n.columns.length)return;const{rightTableRef:t,...i}=n;return oe(S3,rn({ref:t},i),HCe(e)?e:{default:()=>[e]})};var $Ce=VCe;const GCe=n=>{const{isScrolling:e}=mt(y3),t=X(!1),i=X(),r=N(()=>At(n.estimatedRowHeight)&&n.rowIndex>=0),s=(l=!1)=>{const c=b(i);if(!c)return;const{columns:u,onRowHeightChange:d,rowKey:f,rowIndex:h,style:p}=n,{height:m}=c.getBoundingClientRect();t.value=!0,Mt(()=>{if(l||m!==Number.parseInt(p.height)){const v=u[0],g=(v==null?void 0:v.placeholderSign)===h_;d==null||d({rowKey:f,height:m,rowIndex:h},v&&!g&&v.fixed)}})},a=N(()=>{const{rowData:l,rowIndex:c,rowKey:u,onRowHover:d}=n,f=n.rowEventHandlers||{},h={};return Object.entries(f).forEach(([p,m])=>{Tt(m)&&(h[p]=v=>{m({event:v,rowData:l,rowIndex:c,rowKey:u})})}),d&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:p,hovered:m})=>{const v=h[p];h[p]=g=>{d({event:g,hovered:m,rowData:l,rowIndex:c,rowKey:u}),v==null||v(g)}}),h}),o=l=>{const{onRowExpand:c,rowData:u,rowIndex:d,rowKey:f}=n;c==null||c({expanded:l,rowData:u,rowIndex:d,rowKey:f})};return Ht(()=>{b(r)&&s(!0)}),{isScrolling:e,measurable:r,measured:t,rowRef:i,eventHandlers:a,onExpand:o}},WCe="ElTableV2TableRow",KCe=ve({name:WCe,props:uh,setup(n,{expose:e,slots:t,attrs:i}){const{eventHandlers:r,isScrolling:s,measurable:a,measured:o,rowRef:l,onExpand:c}=GCe(n);return e({onExpand:c}),()=>{const{columns:u,columnsStyles:d,expandColumnKey:f,depth:h,rowData:p,rowIndex:m,style:v}=n;let g=u.map((_,y)=>{const S=nt(p.children)&&p.children.length>0&&_.key===f;return t.cell({column:_,columns:u,columnIndex:y,depth:h,style:d[_.key],rowData:p,rowIndex:m,isScrolling:b(s),expandIconProps:S?{rowData:p,rowIndex:m,onExpand:c}:void 0})});if(t.row&&(g=t.row({cells:g.map(_=>nt(_)&&_.length===1?_[0]:_),style:v,columns:u,depth:h,rowData:p,rowIndex:m,isScrolling:b(s)})),b(a)){const{height:_,...y}=v||{},S=b(o);return oe("div",rn({ref:l,class:n.class,style:S?v:y,role:"row"},i,b(r)),[g])}return oe("div",rn(i,{ref:l,class:n.class,style:v,role:"row"},b(r)),[g])}}});var qCe=KCe;function XCe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Pi(n)}const YCe=(n,{slots:e})=>{const{columns:t,columnsStyles:i,depthMap:r,expandColumnKey:s,expandedRowKeys:a,estimatedRowHeight:o,hasFixedColumns:l,rowData:c,rowIndex:u,style:d,isScrolling:f,rowProps:h,rowClass:p,rowKey:m,rowEventHandlers:v,ns:g,onRowHovered:_,onRowExpanded:y}=n,S=Uh(p,{columns:t,rowData:c,rowIndex:u},""),w=Uh(h,{columns:t,rowData:c,rowIndex:u}),x=c[m],T=r[x]||0,C=!!s,M=u<0,A=[g.e("row"),S,{[g.e(`row-depth-${T}`)]:C&&u>=0,[g.is("expanded")]:C&&a.includes(x),[g.is("fixed")]:!T&&M,[g.is("customized")]:!!e.row}],E=l?_:void 0,I={...w,columns:t,columnsStyles:i,class:A,depth:T,expandColumnKey:s,estimatedRowHeight:M?void 0:o,isScrolling:f,rowIndex:u,rowData:c,rowKey:x,rowEventHandlers:v,style:d};return oe(qCe,rn(I,{onRowExpand:y,onMouseenter:L=>{E==null||E({hovered:!0,rowKey:x,event:L,rowData:c,rowIndex:u})},onMouseleave:L=>{E==null||E({hovered:!1,rowKey:x,event:L,rowData:c,rowIndex:u})},rowkey:x}),XCe(e)?e:{default:()=>[e]})};var jCe=YCe;const w3=(n,{slots:e})=>{var t;const{cellData:i,style:r}=n,s=((t=i==null?void 0:i.toString)==null?void 0:t.call(i))||"",a=Ne(e,"default",n,()=>[s]);return oe("div",{class:n.class,title:s,style:r},[a])};w3.displayName="ElTableV2Cell";w3.inheritAttrs=!1;var QCe=w3;const ZCe=n=>{const{expanded:e,expandable:t,onExpand:i,style:r,size:s}=n,a={onClick:t?()=>i(!e):void 0,class:n.class};return oe(_t,rn(a,{size:s,style:r}),{default:()=>[oe(js,null,null)]})};var JCe=ZCe;const F7=({columns:n,column:e,columnIndex:t,depth:i,expandIconProps:r,isScrolling:s,rowData:a,rowIndex:o,style:l,expandedRowKeys:c,ns:u,cellProps:d,expandColumnKey:f,indentSize:h,iconSize:p,rowKey:m},{slots:v})=>{const g=ad(l);if(e.placeholderSign===h_)return oe("div",{class:u.em("row-cell","placeholder"),style:g},null);const{cellRenderer:_,dataKey:y,dataGetter:S}=e,w=Tt(S)?S({columns:n,column:e,columnIndex:t,rowData:a,rowIndex:o}):Yi(a,y??""),x=Uh(d,{cellData:w,columns:n,column:e,columnIndex:t,rowIndex:o,rowData:a}),T={class:u.e("cell-text"),columns:n,column:e,columnIndex:t,cellData:w,isScrolling:s,rowData:a,rowIndex:o},C=E7(_),M=C?C(T):Ne(v,"default",T,()=>[oe(QCe,T,null)]),A=[u.e("row-cell"),e.class,e.align===f_.CENTER&&u.is("align-center"),e.align===f_.RIGHT&&u.is("align-right")],E=o>=0&&f&&e.key===f,I=o>=0&&c.includes(a[m]);let P;const D=`margin-inline-start: ${i*h}px;`;return E&&(Yt(r)?P=oe(JCe,rn(r,{class:[u.e("expand-icon"),u.is("expanded",I)],size:p,expanded:I,style:D,expandable:!0}),null):P=oe("div",{style:[D,`width: ${p}px; height: ${p}px;`].join(" ")},null)),oe("div",rn({class:A,style:g},x,{role:"cell"}),[P,M])};F7.inheritAttrs=!1;var s4=F7;const eMe=at({class:String,columns:hb,columnsStyles:{type:Re(Object),required:!0},headerIndex:Number,style:{type:Re(Object)}}),tMe=ve({name:"ElTableV2HeaderRow",props:eMe,setup(n,{slots:e}){return()=>{const{columns:t,columnsStyles:i,headerIndex:r,style:s}=n;let a=t.map((o,l)=>e.cell({columns:t,column:o,columnIndex:l,headerIndex:r,style:i[o.key]}));return e.header&&(a=e.header({cells:a.map(o=>nt(o)&&o.length===1?o[0]:o),columns:t,headerIndex:r})),oe("div",{class:n.class,style:s,role:"row"},[a])}}});var nMe=tMe;function iMe(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Pi(n)}const rMe=({columns:n,columnsStyles:e,headerIndex:t,style:i,headerClass:r,headerProps:s,ns:a},{slots:o})=>{const l={columns:n,headerIndex:t},c=[a.e("header-row"),Uh(r,l,""),{[a.is("customized")]:!!o.header}],u={...Uh(s,l),columnsStyles:e,class:c,columns:n,headerIndex:t,style:i};return oe(nMe,u,iMe(o)?o:{default:()=>[o]})};var sMe=rMe;const x3=(n,{slots:e})=>Ne(e,"default",n,()=>{var t,i;return[oe("div",{class:n.class,title:(t=n.column)==null?void 0:t.title},[(i=n.column)==null?void 0:i.title])]});x3.displayName="ElTableV2HeaderCell";x3.inheritAttrs=!1;var aMe=x3;const oMe=n=>{const{sortOrder:e}=n;return oe(_t,{size:14,class:n.class},{default:()=>[e===d_.ASC?oe(Uce,null,null):oe(Fce,null,null)]})};var lMe=oMe;const cMe=(n,{slots:e})=>{const{column:t,ns:i,style:r,onColumnSorted:s}=n,a=ad(r);if(t.placeholderSign===h_)return oe("div",{class:i.em("header-row-cell","placeholder"),style:a},null);const{headerCellRenderer:o,headerClass:l,sortable:c}=t,u={...n,class:i.e("header-cell-text")},d=E7(o),f=d?d(u):Ne(e,"default",u,()=>[oe(aMe,u,null)]),{sortBy:h,sortState:p,headerCellProps:m}=n;let v,g;if(p){const S=p[t.key];v=!!VI[S],g=v?S:d_.ASC}else v=t.key===h.key,g=v?h.order:d_.ASC;const _=[i.e("header-cell"),Uh(l,n,""),t.align===f_.CENTER&&i.is("align-center"),t.align===f_.RIGHT&&i.is("align-right"),c&&i.is("sortable")],y={...Uh(m,n),onClick:t.sortable?s:void 0,class:_,style:a,"data-key":t.key};return oe("div",rn(y,{role:"columnheader"}),[f,c&&oe(lMe,{class:[i.e("sort-icon"),v&&i.is("sorting")],sortOrder:g},null)])};var a4=cMe;const z7=(n,{slots:e})=>{var t;return oe("div",{class:n.class,style:n.style},[(t=e.default)==null?void 0:t.call(e)])};z7.displayName="ElTableV2Footer";var uMe=z7;const U7=(n,{slots:e})=>{const t=Ne(e,"default",{},()=>[oe(L9,null,null)]);return oe("div",{class:n.class,style:n.style},[t])};U7.displayName="ElTableV2Empty";var dMe=U7;const H7=(n,{slots:e})=>{var t;return oe("div",{class:n.class,style:n.style},[(t=e.default)==null?void 0:t.call(e)])};H7.displayName="ElTableV2Overlay";var fMe=H7;function Qg(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Pi(n)}const hMe="ElTableV2",pMe=ve({name:hMe,props:wCe,setup(n,{slots:e,expose:t}){const i=Ze("table-v2"),{columnsStyles:r,fixedColumnsOnLeft:s,fixedColumnsOnRight:a,mainColumns:o,mainTableHeight:l,fixedTableHeight:c,leftTableWidth:u,rightTableWidth:d,data:f,depthMap:h,expandedRowKeys:p,hasFixedColumns:m,mainTableRef:v,leftTableRef:g,rightTableRef:_,isDynamic:y,isResetting:S,isScrolling:w,bodyWidth:x,emptyStyle:T,rootStyle:C,headerWidth:M,footerHeight:A,showEmpty:E,scrollTo:I,scrollToLeft:P,scrollToTop:D,scrollToRow:L,getRowHeight:R,onColumnSorted:B,onRowHeightChange:k,onRowHovered:O,onRowExpanded:U,onRowsRendered:G,onScroll:q,onVerticalScroll:W}=bCe(n);return t({scrollTo:I,scrollToLeft:P,scrollToTop:D,scrollToRow:L}),un(y3,{ns:i,isResetting:S,isScrolling:w}),()=>{const{cache:Y,cellProps:J,estimatedRowHeight:Z,expandColumnKey:ee,fixedData:me,headerHeight:ye,headerClass:Te,headerProps:Ee,headerCellProps:H,sortBy:Q,sortState:j,rowHeight:Pe,rowClass:we,rowEventHandlers:De,rowKey:Me,rowProps:Ae,scrollbarAlwaysOn:Fe,indentSize:ne,iconSize:z,useIsScrolling:K,vScrollbarSize:ae,width:xe}=n,Le=b(f),Xe={cache:Y,class:i.e("main"),columns:b(o),data:Le,fixedData:me,estimatedRowHeight:Z,bodyWidth:b(x)+ae,headerHeight:ye,headerWidth:b(M),height:b(l),mainTableRef:v,rowKey:Me,rowHeight:Pe,scrollbarAlwaysOn:Fe,scrollbarStartGap:2,scrollbarEndGap:ae,useIsScrolling:K,width:xe,getRowHeight:R,onRowsRendered:G,onScroll:q},je=b(u),he=b(c),Ye={cache:Y,class:i.e("left"),columns:b(s),data:Le,estimatedRowHeight:Z,leftTableRef:g,rowHeight:Pe,bodyWidth:je,headerWidth:je,headerHeight:ye,height:he,rowKey:Me,scrollbarAlwaysOn:Fe,scrollbarStartGap:2,scrollbarEndGap:ae,useIsScrolling:K,width:je,getRowHeight:R,onScroll:W},V=b(d)+ae,re={cache:Y,class:i.e("right"),columns:b(a),data:Le,estimatedRowHeight:Z,rightTableRef:_,rowHeight:Pe,bodyWidth:V,headerWidth:V,headerHeight:ye,height:he,rowKey:Me,scrollbarAlwaysOn:Fe,scrollbarStartGap:2,scrollbarEndGap:ae,width:V,style:`--${b(i.namespace)}-table-scrollbar-size: ${ae}px`,useIsScrolling:K,getRowHeight:R,onScroll:W},te=b(r),pe={ns:i,depthMap:b(h),columnsStyles:te,expandColumnKey:ee,expandedRowKeys:b(p),estimatedRowHeight:Z,hasFixedColumns:b(m),rowProps:Ae,rowClass:we,rowKey:Me,rowEventHandlers:De,onRowHovered:O,onRowExpanded:U,onRowHeightChange:k},se={cellProps:J,expandColumnKey:ee,indentSize:ne,iconSize:z,rowKey:Me,expandedRowKeys:b(p),ns:i},de={ns:i,headerClass:Te,headerProps:Ee,columnsStyles:te},qe={ns:i,sortBy:Q,sortState:j,headerCellProps:H,onColumnSorted:B},fe={row:et=>oe(jCe,rn(et,pe),{row:e.row,cell:ht=>{let st;return e.cell?oe(s4,rn(ht,se,{style:te[ht.column.key]}),Qg(st=e.cell(ht))?st:{default:()=>[st]}):oe(s4,rn(ht,se,{style:te[ht.column.key]}),null)}}),header:et=>oe(sMe,rn(et,de),{header:e.header,cell:ht=>{let st;return e["header-cell"]?oe(a4,rn(ht,qe,{style:te[ht.column.key]}),Qg(st=e["header-cell"](ht))?st:{default:()=>[st]}):oe(a4,rn(ht,qe,{style:te[ht.column.key]}),null)}})},Je=[n.class,i.b(),i.e("root"),{[i.is("dynamic")]:b(y)}],$e={class:i.e("footer"),style:b(A)};return oe("div",{class:Je,style:b(C)},[oe(BCe,Xe,Qg(fe)?fe:{default:()=>[fe]}),oe(UCe,Ye,Qg(fe)?fe:{default:()=>[fe]}),oe($Ce,re,Qg(fe)?fe:{default:()=>[fe]}),e.footer&&oe(uMe,$e,{default:e.footer}),b(E)&&oe(dMe,{class:i.e("empty"),style:b(T)},{default:e.empty}),e.overlay&&oe(fMe,{class:i.e("overlay")},{default:e.overlay})])}}});var mMe=pMe;const vMe=at({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:Re(Function)}}),gMe=n=>{const e=X(),t=X(0),i=X(0);let r;return Ht(()=>{r=Ti(e,([s])=>{const{width:a,height:o}=s.contentRect,{paddingLeft:l,paddingRight:c,paddingTop:u,paddingBottom:d}=getComputedStyle(s.target),f=Number.parseInt(l)||0,h=Number.parseInt(c)||0,p=Number.parseInt(u)||0,m=Number.parseInt(d)||0;t.value=a-f-h,i.value=o-p-m}).stop}),Un(()=>{r==null||r()}),We([t,i],([s,a])=>{var o;(o=n.onResize)==null||o.call(n,{width:s,height:a})}),{sizer:e,width:t,height:i}},yMe=ve({name:"ElAutoResizer",props:vMe,setup(n,{slots:e}){const t=Ze("auto-resizer"),{height:i,width:r,sizer:s}=gMe(n),a={width:"100%",height:"100%"};return()=>{var o;return oe("div",{ref:s,class:t.b(),style:a},[(o=e.default)==null?void 0:o.call(e,{height:i.value,width:r.value})])}}});var _Me=yMe;const bMe=Ft(mMe),SMe=Ft(_Me),bM=Symbol("tabsRootContextKey"),wMe=at({tabs:{type:Re(Array),default:()=>Li([])}}),V7="ElTabBar",xMe=ve({name:V7}),CMe=ve({...xMe,props:wMe,setup(n,{expose:e}){const t=n,i=jt(),r=mt(bM);r||_r(V7,"<el-tabs><el-tab-bar /></el-tabs>");const s=Ze("tabs"),a=X(),o=X(),l=()=>{let h=0,p=0;const m=["top","bottom"].includes(r.props.tabPosition)?"width":"height",v=m==="width"?"x":"y",g=v==="x"?"left":"top";return t.tabs.every(_=>{var y,S;const w=(S=(y=i.parent)==null?void 0:y.refs)==null?void 0:S[`tab-${_.uid}`];if(!w)return!1;if(!_.active)return!0;h=w[`offset${Dl(g)}`],p=w[`client${Dl(m)}`];const x=window.getComputedStyle(w);return m==="width"&&(p-=Number.parseFloat(x.paddingLeft)+Number.parseFloat(x.paddingRight),h+=Number.parseFloat(x.paddingLeft)),!1}),{[m]:`${p}px`,transform:`translate${Dl(v)}(${h}px)`}},c=()=>o.value=l(),u=[],d=()=>{var h;u.forEach(m=>m.stop()),u.length=0;const p=(h=i.parent)==null?void 0:h.refs;if(p){for(const m in p)if(m.startsWith("tab-")){const v=p[m];v&&u.push(Ti(v,c))}}};We(()=>t.tabs,async()=>{await Mt(),c(),d()},{immediate:!0});const f=Ti(a,()=>c());return Un(()=>{u.forEach(h=>h.stop()),u.length=0,f.stop()}),e({ref:a,update:c}),(h,p)=>(F(),ie("div",{ref_key:"barRef",ref:a,class:$([b(s).e("active-bar"),b(s).is(b(r).props.tabPosition)]),style:Ct(o.value)},null,6))}});var MMe=ot(CMe,[["__file","tab-bar.vue"]]);const TMe=at({panes:{type:Re(Array),default:()=>Li([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),AMe={tabClick:(n,e,t)=>t instanceof Event,tabRemove:(n,e)=>e instanceof Event},o4="ElTabNav",EMe=ve({name:o4,props:TMe,emits:AMe,setup(n,{expose:e,emit:t}){const i=mt(bM);i||_r(o4,"<el-tabs><tab-nav /></el-tabs>");const r=Ze("tabs"),s=Qoe(),a=cle(),o=X(),l=X(),c=X(),u=X(),d=X(!1),f=X(0),h=X(!1),p=X(!0),m=N(()=>["top","bottom"].includes(i.props.tabPosition)?"width":"height"),v=N(()=>({transform:`translate${m.value==="width"?"X":"Y"}(-${f.value}px)`})),g=()=>{if(!o.value)return;const C=o.value[`offset${Dl(m.value)}`],M=f.value;if(!M)return;const A=M>C?M-C:0;f.value=A},_=()=>{if(!o.value||!l.value)return;const C=l.value[`offset${Dl(m.value)}`],M=o.value[`offset${Dl(m.value)}`],A=f.value;if(C-A<=M)return;const E=C-A>M*2?A+M:C-M;f.value=E},y=async()=>{const C=l.value;if(!d.value||!c.value||!o.value||!C)return;await Mt();const M=c.value.querySelector(".is-active");if(!M)return;const A=o.value,E=["top","bottom"].includes(i.props.tabPosition),I=M.getBoundingClientRect(),P=A.getBoundingClientRect(),D=E?C.offsetWidth-P.width:C.offsetHeight-P.height,L=f.value;let R=L;E?(I.left<P.left&&(R=L-(P.left-I.left)),I.right>P.right&&(R=L+I.right-P.right)):(I.top<P.top&&(R=L-(P.top-I.top)),I.bottom>P.bottom&&(R=L+(I.bottom-P.bottom))),R=Math.max(R,0),f.value=Math.min(R,D)},S=()=>{var C;if(!l.value||!o.value)return;n.stretch&&((C=u.value)==null||C.update());const M=l.value[`offset${Dl(m.value)}`],A=o.value[`offset${Dl(m.value)}`],E=f.value;A<M?(d.value=d.value||{},d.value.prev=E,d.value.next=E+A<M,M-E<A&&(f.value=M-A)):(d.value=!1,E>0&&(f.value=0))},w=C=>{let M=0;switch(C.code){case ut.left:case ut.up:M=-1;break;case ut.right:case ut.down:M=1;break;default:return}const A=Array.from(C.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let I=A.indexOf(C.target)+M;I<0?I=A.length-1:I>=A.length&&(I=0),A[I].focus({preventScroll:!0}),A[I].click(),x()},x=()=>{p.value&&(h.value=!0)},T=()=>h.value=!1;return We(s,C=>{C==="hidden"?p.value=!1:C==="visible"&&setTimeout(()=>p.value=!0,50)}),We(a,C=>{C?setTimeout(()=>p.value=!0,50):p.value=!1}),Ti(c,S),Ht(()=>setTimeout(()=>y(),0)),Bo(()=>S()),e({scrollToActiveTab:y,removeFocus:T}),()=>{const C=d.value?[oe("span",{class:[r.e("nav-prev"),r.is("disabled",!d.value.prev)],onClick:g},[oe(_t,null,{default:()=>[oe(Ld,null,null)]})]),oe("span",{class:[r.e("nav-next"),r.is("disabled",!d.value.next)],onClick:_},[oe(_t,null,{default:()=>[oe(js,null,null)]})])]:null,M=n.panes.map((A,E)=>{var I,P,D,L;const R=A.uid,B=A.props.disabled,k=(P=(I=A.props.name)!=null?I:A.index)!=null?P:`${E}`,O=!B&&(A.isClosable||n.editable);A.index=`${E}`;const U=O?oe(_t,{class:"is-icon-close",onClick:W=>t("tabRemove",A,W)},{default:()=>[oe(fl,null,null)]}):null,G=((L=(D=A.slots).label)==null?void 0:L.call(D))||A.props.label,q=!B&&A.active?0:-1;return oe("div",{ref:`tab-${R}`,class:[r.e("item"),r.is(i.props.tabPosition),r.is("active",A.active),r.is("disabled",B),r.is("closable",O),r.is("focus",h.value)],id:`tab-${k}`,key:`tab-${R}`,"aria-controls":`pane-${k}`,role:"tab","aria-selected":A.active,tabindex:q,onFocus:()=>x(),onBlur:()=>T(),onClick:W=>{T(),t("tabClick",A,k,W)},onKeydown:W=>{O&&(W.code===ut.delete||W.code===ut.backspace)&&t("tabRemove",A,W)}},[G,U])});return oe("div",{ref:c,class:[r.e("nav-wrap"),r.is("scrollable",!!d.value),r.is(i.props.tabPosition)]},[C,oe("div",{class:r.e("nav-scroll"),ref:o},[oe("div",{class:[r.e("nav"),r.is(i.props.tabPosition),r.is("stretch",n.stretch&&["top","bottom"].includes(i.props.tabPosition))],ref:l,style:v.value,role:"tablist",onKeydown:w},[n.type?null:oe(MMe,{ref:u,tabs:[...n.panes]},null),M])])])}}}),IMe=at({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Re(Function),default:()=>!0},stretch:Boolean}),DT=n=>xt(n)||At(n),RMe={[Kt]:n=>DT(n),tabClick:(n,e)=>e instanceof Event,tabChange:n=>DT(n),edit:(n,e)=>["remove","add"].includes(e),tabRemove:n=>DT(n),tabAdd:()=>!0},PMe=ve({name:"ElTabs",props:IMe,emits:RMe,setup(n,{emit:e,slots:t,expose:i}){var r;const s=Ze("tabs"),a=N(()=>["left","right"].includes(n.tabPosition)),{children:o,addChild:l,removeChild:c}=GL(jt(),"ElTabPane"),u=X(),d=X((r=n.modelValue)!=null?r:"0"),f=async(g,_=!1)=>{var y,S,w;if(!(d.value===g||Wn(g)))try{await((y=n.beforeLeave)==null?void 0:y.call(n,g,d.value))!==!1&&(d.value=g,_&&(e(Kt,g),e("tabChange",g)),(w=(S=u.value)==null?void 0:S.removeFocus)==null||w.call(S))}catch{}},h=(g,_,y)=>{g.props.disabled||(f(_,!0),e("tabClick",g,y))},p=(g,_)=>{g.props.disabled||Wn(g.props.name)||(_.stopPropagation(),e("edit",g.props.name,"remove"),e("tabRemove",g.props.name))},m=()=>{e("edit",void 0,"add"),e("tabAdd")};We(()=>n.modelValue,g=>f(g)),We(d,async()=>{var g;await Mt(),(g=u.value)==null||g.scrollToActiveTab()}),un(bM,{props:n,currentName:d,registerPane:g=>{o.value.push(g)},sortPane:l,unregisterPane:c}),i({currentName:d});const v=({render:g})=>g();return()=>{const g=t["add-icon"],_=n.editable||n.addable?oe("div",{class:[s.e("new-tab"),a.value&&s.e("new-tab-vertical")],tabindex:"0",onClick:m,onKeydown:w=>{[ut.enter,ut.numpadEnter].includes(w.code)&&m()}},[g?Ne(t,"add-icon"):oe(_t,{class:s.is("icon-plus")},{default:()=>[oe(zG,null,null)]})]):null,y=oe("div",{class:[s.e("header"),a.value&&s.e("header-vertical"),s.is(n.tabPosition)]},[oe(v,{render:()=>{const w=o.value.some(x=>x.slots.label);return oe(EMe,{ref:u,currentName:d.value,editable:n.editable,type:n.type,panes:o.value,stretch:n.stretch,onTabClick:h,onTabRemove:p},{$stable:!w})}},null),_]),S=oe("div",{class:s.e("content")},[Ne(t,"default")]);return oe("div",{class:[s.b(),s.m(n.tabPosition),{[s.m("card")]:n.type==="card",[s.m("border-card")]:n.type==="border-card"}]},[S,y])}}});var DMe=PMe;const LMe=at({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),$7="ElTabPane",kMe=ve({name:$7}),OMe=ve({...kMe,props:LMe,setup(n){const e=n,t=jt(),i=ur(),r=mt(bM);r||_r($7,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=Ze("tab-pane"),a=X(),o=N(()=>e.closable||r.props.closable),l=Z2(()=>{var h;return r.currentName.value===((h=e.name)!=null?h:a.value)}),c=X(l.value),u=N(()=>{var h;return(h=e.name)!=null?h:a.value}),d=Z2(()=>!e.lazy||c.value||l.value);We(l,h=>{h&&(c.value=!0)});const f=Nn({uid:t.uid,slots:i,props:e,paneName:u,active:l,index:a,isClosable:o});return r.registerPane(f),Ht(()=>{r.sortPane(f)}),Qd(()=>{r.unregisterPane(f.uid)}),(h,p)=>b(d)?Wt((F(),ie("div",{key:0,id:`pane-${b(u)}`,class:$(b(s).b()),role:"tabpanel","aria-hidden":!b(l),"aria-labelledby":`tab-${b(u)}`},[Ne(h.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Dn,b(l)]]):Be("v-if",!0)}});var G7=ot(OMe,[["__file","tab-pane.vue"]]);const NMe=Ft(DMe,{TabPane:G7}),BMe=ki(G7),FMe=at({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:nc,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),zMe=ve({name:"ElText"}),UMe=ve({...zMe,props:FMe,setup(n){const e=n,t=tr(),i=Ze("text"),r=N(()=>[i.b(),i.m(e.type),i.m(t.value),i.is("truncated",e.truncated),i.is("line-clamp",!Wn(e.lineClamp))]);return(s,a)=>(F(),He(en(s.tag),{class:$(b(r)),style:Ct({"-webkit-line-clamp":s.lineClamp})},{default:ge(()=>[Ne(s.$slots,"default")]),_:3},8,["class","style"]))}});var HMe=ot(UMe,[["__file","text.vue"]]);const VMe=Ft(HMe),$Me=at({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:Re(String),default:"light"},clearable:{type:Boolean,default:!0},size:cr,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:Re([String,Object]),default:()=>FG},clearIcon:{type:Re([String,Object]),default:()=>fu},...pg}),zc=n=>{const e=(n||"").split(":");if(e.length>=2){let t=Number.parseInt(e[0],10);const i=Number.parseInt(e[1],10),r=n.toUpperCase();return r.includes("AM")&&t===12?t=0:r.includes("PM")&&t!==12&&(t+=12),{hours:t,minutes:i}}return null},LT=(n,e)=>{const t=zc(n);if(!t)return-1;const i=zc(e);if(!i)return-1;const r=t.minutes+t.hours*60,s=i.minutes+i.hours*60;return r===s?0:r>s?1:-1},l4=n=>`${n}`.padStart(2,"0"),xm=n=>`${l4(n.hours)}:${l4(n.minutes)}`,GMe=(n,e)=>{const t=zc(n);if(!t)return"";const i=zc(e);if(!i)return"";const r={hours:t.hours,minutes:t.minutes};return r.minutes+=i.minutes,r.hours+=i.hours,r.hours+=Math.floor(r.minutes/60),r.minutes=r.minutes%60,xm(r)},WMe=ve({name:"ElTimeSelect"}),KMe=ve({...WMe,props:$Me,emits:["change","blur","focus","clear","update:modelValue"],setup(n,{expose:e}){const t=n;Ot.extend(XL);const{Option:i}=zh,r=Ze("input"),s=X(),a=hs(),{lang:o}=xn(),l=N(()=>t.modelValue),c=N(()=>{const g=zc(t.start);return g?xm(g):null}),u=N(()=>{const g=zc(t.end);return g?xm(g):null}),d=N(()=>{const g=zc(t.step);return g?xm(g):null}),f=N(()=>{const g=zc(t.minTime||"");return g?xm(g):null}),h=N(()=>{const g=zc(t.maxTime||"");return g?xm(g):null}),p=N(()=>{const g=[];if(t.start&&t.end&&t.step){let _=c.value,y;for(;_&&u.value&&LT(_,u.value)<=0;)y=Ot(_,"HH:mm").locale(o.value).format(t.format),g.push({value:y,disabled:LT(_,f.value||"-1:-1")<=0||LT(_,h.value||"100:100")>=0}),_=GMe(_,d.value)}return g});return e({blur:()=>{var g,_;(_=(g=s.value)==null?void 0:g.blur)==null||_.call(g)},focus:()=>{var g,_;(_=(g=s.value)==null?void 0:g.focus)==null||_.call(g)}}),(g,_)=>(F(),He(b(zh),{ref_key:"select",ref:s,"model-value":b(l),disabled:b(a),clearable:g.clearable,"clear-icon":g.clearIcon,size:g.size,effect:g.effect,placeholder:g.placeholder,"default-first-option":"",filterable:g.editable,"empty-values":g.emptyValues,"value-on-clear":g.valueOnClear,"onUpdate:modelValue":y=>g.$emit("update:modelValue",y),onChange:y=>g.$emit("change",y),onBlur:y=>g.$emit("blur",y),onFocus:y=>g.$emit("focus",y),onClear:()=>g.$emit("clear")},{prefix:ge(()=>[g.prefixIcon?(F(),He(b(_t),{key:0,class:$(b(r).e("prefix-icon"))},{default:ge(()=>[(F(),He(en(g.prefixIcon)))]),_:1},8,["class"])):Be("v-if",!0)]),default:ge(()=>[(F(!0),ie(bt,null,sn(b(p),y=>(F(),He(b(i),{key:y.value,label:y.value,value:y.value,disabled:y.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable","empty-values","value-on-clear","onUpdate:modelValue","onChange","onBlur","onFocus","onClear"]))}});var qMe=ot(KMe,[["__file","time-select.vue"]]);const XMe=Ft(qMe),YMe=ve({name:"ElTimeline",setup(n,{slots:e}){const t=Ze("timeline");return un("timeline",e),()=>wt("ul",{class:[t.b()]},[Ne(e,"default")])}}),jMe=at({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:Zn},hollow:Boolean}),QMe=ve({name:"ElTimelineItem"}),ZMe=ve({...QMe,props:jMe,setup(n){const e=n,t=Ze("timeline-item"),i=N(()=>[t.e("node"),t.em("node",e.size||""),t.em("node",e.type||""),t.is("hollow",e.hollow)]);return(r,s)=>(F(),ie("li",{class:$([b(t).b(),{[b(t).e("center")]:r.center}])},[le("div",{class:$(b(t).e("tail"))},null,2),r.$slots.dot?Be("v-if",!0):(F(),ie("div",{key:0,class:$(b(i)),style:Ct({backgroundColor:r.color})},[r.icon?(F(),He(b(_t),{key:0,class:$(b(t).e("icon"))},{default:ge(()=>[(F(),He(en(r.icon)))]),_:1},8,["class"])):Be("v-if",!0)],6)),r.$slots.dot?(F(),ie("div",{key:1,class:$(b(t).e("dot"))},[Ne(r.$slots,"dot")],2)):Be("v-if",!0),le("div",{class:$(b(t).e("wrapper"))},[!r.hideTimestamp&&r.placement==="top"?(F(),ie("div",{key:0,class:$([b(t).e("timestamp"),b(t).is("top")])},rt(r.timestamp),3)):Be("v-if",!0),le("div",{class:$(b(t).e("content"))},[Ne(r.$slots,"default")],2),!r.hideTimestamp&&r.placement==="bottom"?(F(),ie("div",{key:1,class:$([b(t).e("timestamp"),b(t).is("bottom")])},rt(r.timestamp),3)):Be("v-if",!0)],2)],2))}});var W7=ot(ZMe,[["__file","timeline-item.vue"]]);const JMe=Ft(YMe,{TimelineItem:W7}),eTe=ki(W7),K7=at({nowrap:Boolean});var q7=(n=>(n.top="top",n.bottom="bottom",n.left="left",n.right="right",n))(q7||{});const tTe=Object.values(q7),C3=at({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:Re(Object),default:null}}),nTe=at({side:{type:Re(String),values:tTe,required:!0}}),iTe=["absolute","fixed"],rTe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],M3=at({arrowPadding:{type:Re(Number),default:5},effect:{type:Re(String),default:"light"},contentClass:String,placement:{type:Re(String),values:rTe,default:"bottom"},reference:{type:Re(Object),default:null},offset:{type:Number,default:8},strategy:{type:Re(String),values:iTe,default:"absolute"},showArrow:Boolean,...Zr(["ariaLabel"])}),T3=at({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:Re(Function)},"onUpdate:open":{type:Re(Function)}}),_p={type:Re(Function)},A3=at({onBlur:_p,onClick:_p,onFocus:_p,onMouseDown:_p,onMouseEnter:_p,onMouseLeave:_p}),sTe=at({...T3,...C3,...A3,...M3,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:Re(Object),default:null},teleported:Boolean,to:{type:Re(String),default:"body"}}),SM=Symbol("tooltipV2"),X7=Symbol("tooltipV2Content"),kT="tooltip_v2.open",aTe=ve({name:"ElTooltipV2Root"}),oTe=ve({...aTe,props:T3,setup(n,{expose:e}){const t=n,i=X(t.defaultOpen),r=X(null),s=N({get:()=>Nh(t.open)?i.value:t.open,set:v=>{var g;i.value=v,(g=t["onUpdate:open"])==null||g.call(t,v)}}),a=N(()=>At(t.delayDuration)&&t.delayDuration>0),{start:o,stop:l}=Bh(()=>{s.value=!0},N(()=>t.delayDuration),{immediate:!1}),c=Ze("tooltip-v2"),u=Qr(),d=()=>{l(),s.value=!0},f=()=>{b(a)?o():d()},h=d,p=()=>{l(),s.value=!1};return We(s,v=>{var g;v&&(document.dispatchEvent(new CustomEvent(kT)),h()),(g=t.onOpenChange)==null||g.call(t,v)}),Ht(()=>{document.addEventListener(kT,p)}),Un(()=>{l(),document.removeEventListener(kT,p)}),un(SM,{contentId:u,triggerRef:r,ns:c,onClose:p,onDelayOpen:f,onOpen:h}),e({onOpen:h,onClose:p}),(v,g)=>Ne(v.$slots,"default",{open:b(s)})}});var lTe=ot(oTe,[["__file","root.vue"]]);const cTe=ve({name:"ElTooltipV2Arrow"}),uTe=ve({...cTe,props:{...C3,...nTe},setup(n){const e=n,{ns:t}=mt(SM),{arrowRef:i}=mt(X7),r=N(()=>{const{style:s,width:a,height:o}=e,l=t.namespace.value;return{[`--${l}-tooltip-v2-arrow-width`]:`${a}px`,[`--${l}-tooltip-v2-arrow-height`]:`${o}px`,[`--${l}-tooltip-v2-arrow-border-width`]:`${a/2}px`,[`--${l}-tooltip-v2-arrow-cover-width`]:a/2-1,...s||{}}});return(s,a)=>(F(),ie("span",{ref_key:"arrowRef",ref:i,style:Ct(b(r)),class:$(b(t).e("arrow"))},null,6))}});var c4=ot(uTe,[["__file","arrow.vue"]]);const Lv=Math.min,Th=Math.max,Tx=Math.round,eS=Math.floor,Bd=n=>({x:n,y:n}),dTe={left:"right",right:"left",bottom:"top",top:"bottom"},fTe={start:"end",end:"start"};function GI(n,e,t){return Th(n,Lv(e,t))}function pb(n,e){return typeof n=="function"?n(e):n}function Hh(n){return n.split("-")[0]}function mb(n){return n.split("-")[1]}function Y7(n){return n==="x"?"y":"x"}function E3(n){return n==="y"?"height":"width"}function wM(n){return["top","bottom"].includes(Hh(n))?"y":"x"}function I3(n){return Y7(wM(n))}function hTe(n,e,t){t===void 0&&(t=!1);const i=mb(n),r=I3(n),s=E3(r);let a=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=Ax(a)),[a,Ax(a)]}function pTe(n){const e=Ax(n);return[WI(n),e,WI(e)]}function WI(n){return n.replace(/start|end/g,e=>fTe[e])}function mTe(n,e,t){const i=["left","right"],r=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(n){case"top":case"bottom":return t?e?r:i:e?i:r;case"left":case"right":return e?s:a;default:return[]}}function vTe(n,e,t,i){const r=mb(n);let s=mTe(Hh(n),t==="start",i);return r&&(s=s.map(a=>a+"-"+r),e&&(s=s.concat(s.map(WI)))),s}function Ax(n){return n.replace(/left|right|bottom|top/g,e=>dTe[e])}function gTe(n){return{top:0,right:0,bottom:0,left:0,...n}}function j7(n){return typeof n!="number"?gTe(n):{top:n,right:n,bottom:n,left:n}}function Ex(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}function u4(n,e,t){let{reference:i,floating:r}=n;const s=wM(e),a=I3(e),o=E3(a),l=Hh(e),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[o]/2-r[o]/2;let h;switch(l){case"top":h={x:u,y:i.y-r.height};break;case"bottom":h={x:u,y:i.y+i.height};break;case"right":h={x:i.x+i.width,y:d};break;case"left":h={x:i.x-r.width,y:d};break;default:h={x:i.x,y:i.y}}switch(mb(e)){case"start":h[a]-=f*(t&&c?-1:1);break;case"end":h[a]+=f*(t&&c?-1:1);break}return h}const yTe=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:a}=t,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:n,floating:e,strategy:r}),{x:u,y:d}=u4(c,i,l),f=i,h={},p=0;for(let m=0;m<o.length;m++){const{name:v,fn:g}=o[m],{x:_,y,data:S,reset:w}=await g({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:h,rects:c,platform:a,elements:{reference:n,floating:e}});if(u=_??u,d=y??d,h={...h,[v]:{...h[v],...S}},w&&p<=50){p++,typeof w=="object"&&(w.placement&&(f=w.placement),w.rects&&(c=w.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:r}):w.rects),{x:u,y:d}=u4(c,f,l)),m=-1;continue}}return{x:u,y:d,placement:f,strategy:r,middlewareData:h}};async function R3(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:a,elements:o,strategy:l}=n,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=pb(e,n),p=j7(h),v=o[f?d==="floating"?"reference":"floating":d],g=Ex(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(v)))==null||t?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),_=d==="floating"?{...a.floating,x:i,y:r}:a.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),S=await(s.isElement==null?void 0:s.isElement(y))?await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1}:{x:1,y:1},w=Ex(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:_,offsetParent:y,strategy:l}):_);return{top:(g.top-w.top+p.top)/S.y,bottom:(w.bottom-g.bottom+p.bottom)/S.y,left:(g.left-w.left+p.left)/S.x,right:(w.right-g.right+p.right)/S.x}}const Q7=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:r,rects:s,platform:a,elements:o}=e,{element:l,padding:c=0}=pb(n,e)||{};if(l==null)return{};const u=j7(c),d={x:t,y:i},f=I3(r),h=E3(f),p=await a.getDimensions(l),m=f==="y",v=m?"top":"left",g=m?"bottom":"right",_=m?"clientHeight":"clientWidth",y=s.reference[h]+s.reference[f]-d[f]-s.floating[h],S=d[f]-s.reference[f],w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l));let x=w?w[_]:0;(!x||!await(a.isElement==null?void 0:a.isElement(w)))&&(x=o.floating[_]||s.floating[h]);const T=y/2-S/2,C=x/2-p[h]/2-1,M=Lv(u[v],C),A=Lv(u[g],C),E=M,I=x-p[h]-A,P=x/2-p[h]/2+T,D=GI(E,P,I),R=mb(r)!=null&&P!=D&&s.reference[h]/2-(P<E?M:A)-p[h]/2<0?P<E?E-P:I-P:0;return{[f]:d[f]-R,data:{[f]:D,centerOffset:P-D+R}}}}),_Te=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t;const{placement:i,middlewareData:r,rects:s,initialPlacement:a,platform:o,elements:l}=e,{mainAxis:c=!0,crossAxis:u=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:p=!0,...m}=pb(n,e),v=Hh(i),g=Hh(a)===a,_=await(o.isRTL==null?void 0:o.isRTL(l.floating)),y=d||(g||!p?[Ax(a)]:pTe(a));!d&&h!=="none"&&y.push(...vTe(a,p,h,_));const S=[a,...y],w=await R3(e,m),x=[];let T=((t=r.flip)==null?void 0:t.overflows)||[];if(c&&x.push(w[v]),u){const E=hTe(i,s,_);x.push(w[E[0]],w[E[1]])}if(T=[...T,{placement:i,overflows:x}],!x.every(E=>E<=0)){var C,M;const E=(((C=r.flip)==null?void 0:C.index)||0)+1,I=S[E];if(I)return{data:{index:E,overflows:T},reset:{placement:I}};let P=(M=T.filter(D=>D.overflows[0]<=0).sort((D,L)=>D.overflows[1]-L.overflows[1])[0])==null?void 0:M.placement;if(!P)switch(f){case"bestFit":{var A;const D=(A=T.map(L=>[L.placement,L.overflows.filter(R=>R>0).reduce((R,B)=>R+B,0)]).sort((L,R)=>L[1]-R[1])[0])==null?void 0:A[0];D&&(P=D);break}case"initialPlacement":P=a;break}if(i!==P)return{reset:{placement:P}}}return{}}}};async function bTe(n,e){const{placement:t,platform:i,elements:r}=n,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),a=Hh(t),o=mb(t),l=wM(t)==="y",c=["left","top"].includes(a)?-1:1,u=s&&l?-1:1,d=pb(e,n);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return o&&typeof p=="number"&&(h=o==="end"?p*-1:p),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const Z7=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:i}=e,r=await bTe(e,n);return{x:t+r.x,y:i+r.y,data:r}}}},STe=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:v=>{let{x:g,y:_}=v;return{x:g,y:_}}},...l}=pb(n,e),c={x:t,y:i},u=await R3(e,l),d=wM(Hh(r)),f=Y7(d);let h=c[f],p=c[d];if(s){const v=f==="y"?"top":"left",g=f==="y"?"bottom":"right",_=h+u[v],y=h-u[g];h=GI(_,h,y)}if(a){const v=d==="y"?"top":"left",g=d==="y"?"bottom":"right",_=p+u[v],y=p-u[g];p=GI(_,p,y)}const m=o.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-t,y:m.y-i}}}}};function Fd(n){return J7(n)?(n.nodeName||"").toLowerCase():"#document"}function Ua(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function vu(n){var e;return(e=(J7(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function J7(n){return n instanceof Node||n instanceof Ua(n).Node}function tu(n){return n instanceof Element||n instanceof Ua(n).Element}function jl(n){return n instanceof HTMLElement||n instanceof Ua(n).HTMLElement}function d4(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Ua(n).ShadowRoot}function vb(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=Oo(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(r)}function wTe(n){return["table","td","th"].includes(Fd(n))}function P3(n){const e=D3(),t=Oo(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function D3(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function xM(n){return["html","body","#document"].includes(Fd(n))}function Oo(n){return Ua(n).getComputedStyle(n)}function CM(n){return tu(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function kv(n){if(Fd(n)==="html")return n;const e=n.assignedSlot||n.parentNode||d4(n)&&n.host||vu(n);return d4(e)?e.host:e}function eK(n){const e=kv(n);return xM(e)?n.ownerDocument?n.ownerDocument.body:n.body:jl(e)&&vb(e)?e:eK(e)}function Ix(n,e){var t;e===void 0&&(e=[]);const i=eK(n),r=i===((t=n.ownerDocument)==null?void 0:t.body),s=Ua(i);return r?e.concat(s,s.visualViewport||[],vb(i)?i:[]):e.concat(i,Ix(i))}function tK(n){const e=Oo(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=jl(n),s=r?n.offsetWidth:t,a=r?n.offsetHeight:i,o=Tx(t)!==s||Tx(i)!==a;return o&&(t=s,i=a),{width:t,height:i,$:o}}function L3(n){return tu(n)?n:n.contextElement}function iv(n){const e=L3(n);if(!jl(e))return Bd(1);const t=e.getBoundingClientRect(),{width:i,height:r,$:s}=tK(e);let a=(s?Tx(t.width):t.width)/i,o=(s?Tx(t.height):t.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const xTe=Bd(0);function nK(n){const e=Ua(n);return!D3()||!e.visualViewport?xTe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function CTe(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ua(n)?!1:e}function Vh(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=L3(n);let a=Bd(1);e&&(i?tu(i)&&(a=iv(i)):a=iv(n));const o=CTe(s,t,i)?nK(s):Bd(0);let l=(r.left+o.x)/a.x,c=(r.top+o.y)/a.y,u=r.width/a.x,d=r.height/a.y;if(s){const f=Ua(s),h=i&&tu(i)?Ua(i):i;let p=f.frameElement;for(;p&&i&&h!==f;){const m=iv(p),v=p.getBoundingClientRect(),g=Oo(p),_=v.left+(p.clientLeft+parseFloat(g.paddingLeft))*m.x,y=v.top+(p.clientTop+parseFloat(g.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,d*=m.y,l+=_,c+=y,p=Ua(p).frameElement}}return Ex({width:u,height:d,x:l,y:c})}function MTe(n){let{rect:e,offsetParent:t,strategy:i}=n;const r=jl(t),s=vu(t);if(t===s)return e;let a={scrollLeft:0,scrollTop:0},o=Bd(1);const l=Bd(0);if((r||!r&&i!=="fixed")&&((Fd(t)!=="body"||vb(s))&&(a=CM(t)),jl(t))){const c=Vh(t);o=iv(t),l.x=c.x+t.clientLeft,l.y=c.y+t.clientTop}return{width:e.width*o.x,height:e.height*o.y,x:e.x*o.x-a.scrollLeft*o.x+l.x,y:e.y*o.y-a.scrollTop*o.y+l.y}}function TTe(n){return Array.from(n.getClientRects())}function iK(n){return Vh(vu(n)).left+CM(n).scrollLeft}function ATe(n){const e=vu(n),t=CM(n),i=n.ownerDocument.body,r=Th(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=Th(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let a=-t.scrollLeft+iK(n);const o=-t.scrollTop;return Oo(i).direction==="rtl"&&(a+=Th(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:a,y:o}}function ETe(n,e){const t=Ua(n),i=vu(n),r=t.visualViewport;let s=i.clientWidth,a=i.clientHeight,o=0,l=0;if(r){s=r.width,a=r.height;const c=D3();(!c||c&&e==="fixed")&&(o=r.offsetLeft,l=r.offsetTop)}return{width:s,height:a,x:o,y:l}}function ITe(n,e){const t=Vh(n,!0,e==="fixed"),i=t.top+n.clientTop,r=t.left+n.clientLeft,s=jl(n)?iv(n):Bd(1),a=n.clientWidth*s.x,o=n.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:a,height:o,x:l,y:c}}function f4(n,e,t){let i;if(e==="viewport")i=ETe(n,t);else if(e==="document")i=ATe(vu(n));else if(tu(e))i=ITe(e,t);else{const r=nK(n);i={...e,x:e.x-r.x,y:e.y-r.y}}return Ex(i)}function rK(n,e){const t=kv(n);return t===e||!tu(t)||xM(t)?!1:Oo(t).position==="fixed"||rK(t,e)}function RTe(n,e){const t=e.get(n);if(t)return t;let i=Ix(n).filter(o=>tu(o)&&Fd(o)!=="body"),r=null;const s=Oo(n).position==="fixed";let a=s?kv(n):n;for(;tu(a)&&!xM(a);){const o=Oo(a),l=P3(a);!l&&o.position==="fixed"&&(r=null),(s?!l&&!r:!l&&o.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||vb(a)&&!l&&rK(n,a))?i=i.filter(u=>u!==a):r=o,a=kv(a)}return e.set(n,i),i}function PTe(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const a=[...t==="clippingAncestors"?RTe(e,this._c):[].concat(t),i],o=a[0],l=a.reduce((c,u)=>{const d=f4(e,u,r);return c.top=Th(d.top,c.top),c.right=Lv(d.right,c.right),c.bottom=Lv(d.bottom,c.bottom),c.left=Th(d.left,c.left),c},f4(e,o,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function DTe(n){return tK(n)}function LTe(n,e,t){const i=jl(e),r=vu(e),s=t==="fixed",a=Vh(n,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=Bd(0);if(i||!i&&!s)if((Fd(e)!=="body"||vb(r))&&(o=CM(e)),i){const c=Vh(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else r&&(l.x=iK(r));return{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function h4(n,e){return!jl(n)||Oo(n).position==="fixed"?null:e?e(n):n.offsetParent}function kTe(n){let e=kv(n);for(;jl(e)&&!xM(e);){if(P3(e))return e;e=kv(e)}return null}function sK(n,e){const t=Ua(n);if(!jl(n))return t;let i=h4(n,e);for(;i&&wTe(i)&&Oo(i).position==="static";)i=h4(i,e);return i&&(Fd(i)==="html"||Fd(i)==="body"&&Oo(i).position==="static"&&!P3(i))?t:i||kTe(n)||t}const OTe=async function(n){let{reference:e,floating:t,strategy:i}=n;const r=this.getOffsetParent||sK,s=this.getDimensions;return{reference:LTe(e,await r(t),i),floating:{x:0,y:0,...await s(t)}}};function NTe(n){return Oo(n).direction==="rtl"}const BTe={convertOffsetParentRelativeRectToViewportRelativeRect:MTe,getDocumentElement:vu,getClippingRect:PTe,getOffsetParent:sK,getElementRects:OTe,getClientRects:TTe,getDimensions:DTe,getScale:iv,isElement:tu,isRTL:NTe};function FTe(n,e){let t=null,i;const r=vu(n);function s(){clearTimeout(i),t&&t.disconnect(),t=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:f}=n.getBoundingClientRect();if(o||e(),!d||!f)return;const h=eS(u),p=eS(r.clientWidth-(c+d)),m=eS(r.clientHeight-(u+f)),v=eS(c),_={rootMargin:-h+"px "+-p+"px "+-m+"px "+-v+"px",threshold:Th(0,Lv(1,l))||1};let y=!0;function S(w){const x=w[0].intersectionRatio;if(x!==l){if(!y)return a();x?a(!1,x):i=setTimeout(()=>{a(!1,1e-7)},100)}y=!1}try{t=new IntersectionObserver(S,{..._,root:r.ownerDocument})}catch{t=new IntersectionObserver(S,_)}t.observe(n)}return a(!0),s}function zTe(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=L3(n),u=r||s?[...c?Ix(c):[],...Ix(e)]:[];u.forEach(g=>{r&&g.addEventListener("scroll",t,{passive:!0}),s&&g.addEventListener("resize",t)});const d=c&&o?FTe(c,t):null;let f=-1,h=null;a&&(h=new ResizeObserver(g=>{let[_]=g;_&&_.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{h&&h.observe(e)})),t()}),c&&!l&&h.observe(c),h.observe(e));let p,m=l?Vh(n):null;l&&v();function v(){const g=Vh(n);m&&(g.x!==m.x||g.y!==m.y||g.width!==m.width||g.height!==m.height)&&t(),m=g,p=requestAnimationFrame(v)}return t(),()=>{u.forEach(g=>{r&&g.removeEventListener("scroll",t),s&&g.removeEventListener("resize",t)}),d&&d(),h&&h.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const aK=(n,e,t)=>{const i=new Map,r={platform:BTe,...t},s={...r.platform,_c:i};return yTe(n,e,{...r,platform:s})},UTe=at({style:{type:Re([String,Object,Array]),default:()=>({})}}),HTe=ve({name:"ElVisuallyHidden"}),VTe=ve({...HTe,props:UTe,setup(n){const e=n,t=N(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(i,r)=>(F(),ie("span",rn(i.$attrs,{style:b(t)}),[Ne(i.$slots,"default")],16))}});var $Te=ot(VTe,[["__file","visual-hidden.vue"]]);at({});const GTe=n=>{if(!wn)return;if(!n)return n;const e=Xs(n);return e||(fi(n)?e:n)},WTe=({middleware:n,placement:e,strategy:t})=>{const i=X(),r=X(),s=X(),a=X(),o=X({}),l={x:s,y:a,placement:e,strategy:t,middlewareData:o},c=async()=>{if(!wn)return;const u=GTe(i),d=Xs(r);if(!u||!d)return;const f=await aK(u,d,{placement:b(e),strategy:b(t),middleware:b(n)});xv(l).forEach(h=>{l[h].value=f[h]})};return Ht(()=>{zr(()=>{c()})}),{...l,update:c,referenceRef:i,contentRef:r}},KTe=({arrowRef:n,padding:e})=>({name:"arrow",options:{element:n,padding:e},fn(t){const i=b(n);return i?Q7({element:i,padding:e}).fn(t):{}}}),qTe=ve({name:"ElTooltipV2Content"}),XTe=ve({...qTe,props:{...M3,...K7},setup(n){const e=n,{triggerRef:t,contentId:i}=mt(SM),r=X(e.placement),s=X(e.strategy),a=X(null),{referenceRef:o,contentRef:l,middlewareData:c,x:u,y:d,update:f}=WTe({placement:r,strategy:s,middleware:N(()=>{const y=[Z7(e.offset)];return e.showArrow&&y.push(KTe({arrowRef:a})),y})}),h=hg().nextZIndex(),p=Ze("tooltip-v2"),m=N(()=>r.value.split("-")[0]),v=N(()=>({position:b(s),top:`${b(d)||0}px`,left:`${b(u)||0}px`,zIndex:h})),g=N(()=>{if(!e.showArrow)return{};const{arrow:y}=b(c);return{[`--${p.namespace.value}-tooltip-v2-arrow-x`]:`${y==null?void 0:y.x}px`||"",[`--${p.namespace.value}-tooltip-v2-arrow-y`]:`${y==null?void 0:y.y}px`||""}}),_=N(()=>[p.e("content"),p.is("dark",e.effect==="dark"),p.is(b(s)),e.contentClass]);return We(a,()=>f()),We(()=>e.placement,y=>r.value=y),Ht(()=>{We(()=>e.reference||t.value,y=>{o.value=y||void 0},{immediate:!0})}),un(X7,{arrowRef:a}),(y,S)=>(F(),ie("div",{ref_key:"contentRef",ref:l,style:Ct(b(v)),"data-tooltip-v2-root":""},[y.nowrap?Be("v-if",!0):(F(),ie("div",{key:0,"data-side":b(m),class:$(b(_))},[Ne(y.$slots,"default",{contentStyle:b(v),contentClass:b(_)}),oe(b($Te),{id:b(i),role:"tooltip"},{default:ge(()=>[y.ariaLabel?(F(),ie(bt,{key:0},[Xt(rt(y.ariaLabel),1)],64)):Ne(y.$slots,"default",{key:1})]),_:3},8,["id"]),Ne(y.$slots,"arrow",{style:Ct(b(g)),side:b(m)})],10,["data-side"]))],4))}});var p4=ot(XTe,[["__file","content.vue"]]);const YTe=at({setRef:{type:Re(Function),required:!0},onlyChild:Boolean});var jTe=ve({props:YTe,setup(n,{slots:e}){const t=X(),i=vM(t,r=>{r?n.setRef(r.nextElementSibling):n.setRef(null)});return()=>{var r;const[s]=((r=e.default)==null?void 0:r.call(e))||[],a=n.onlyChild?xpe(s.children):s.children;return oe(bt,{ref:i},[a])}}});const QTe=ve({name:"ElTooltipV2Trigger"}),ZTe=ve({...QTe,props:{...K7,...A3},setup(n){const e=n,{onClose:t,onOpen:i,onDelayOpen:r,triggerRef:s,contentId:a}=mt(SM);let o=!1;const l=_=>{s.value=_},c=()=>{o=!1},u=zi(e.onMouseEnter,r),d=zi(e.onMouseLeave,t),f=zi(e.onMouseDown,()=>{t(),o=!0,document.addEventListener("mouseup",c,{once:!0})}),h=zi(e.onFocus,()=>{o||i()}),p=zi(e.onBlur,t),m=zi(e.onClick,_=>{_.detail===0&&t()}),v={blur:p,click:m,focus:h,mousedown:f,mouseenter:u,mouseleave:d},g=(_,y,S)=>{_&&Object.entries(y).forEach(([w,x])=>{_[S](w,x)})};return We(s,(_,y)=>{g(_,v,"addEventListener"),g(y,v,"removeEventListener"),_&&_.setAttribute("aria-describedby",a.value)}),Un(()=>{g(s.value,v,"removeEventListener"),document.removeEventListener("mouseup",c)}),(_,y)=>_.nowrap?(F(),He(b(jTe),{key:0,"set-ref":l,"only-child":""},{default:ge(()=>[Ne(_.$slots,"default")]),_:3})):(F(),ie("button",rn({key:1,ref_key:"triggerRef",ref:s},_.$attrs),[Ne(_.$slots,"default")],16))}});var JTe=ot(ZTe,[["__file","trigger.vue"]]);const eAe=ve({name:"ElTooltipV2"}),tAe=ve({...eAe,props:sTe,setup(n){const t=Mr(n),i=Nn(rl(t,Object.keys(C3))),r=Nn(rl(t,Object.keys(M3))),s=Nn(rl(t,Object.keys(T3))),a=Nn(rl(t,Object.keys(A3)));return(o,l)=>(F(),He(lTe,nl(Id(s)),{default:ge(({open:c})=>[oe(JTe,rn(a,{nowrap:""}),{default:ge(()=>[Ne(o.$slots,"trigger")]),_:3},16),oe(b(vg),{to:o.to,disabled:!o.teleported},{default:ge(()=>[o.fullTransition?(F(),He(yr,nl(rn({key:0},o.transitionProps)),{default:ge(()=>[o.alwaysOn||c?(F(),He(p4,nl(rn({key:0},r)),{arrow:ge(({style:u,side:d})=>[o.showArrow?(F(),He(c4,rn({key:0},i,{style:u,side:d}),null,16,["style","side"])):Be("v-if",!0)]),default:ge(()=>[Ne(o.$slots,"default")]),_:3},16)):Be("v-if",!0)]),_:2},1040)):(F(),ie(bt,{key:1},[o.alwaysOn||c?(F(),He(p4,nl(rn({key:0},r)),{arrow:ge(({style:u,side:d})=>[o.showArrow?(F(),He(c4,rn({key:0},i,{style:u,side:d}),null,16,["style","side"])):Be("v-if",!0)]),default:ge(()=>[Ne(o.$slots,"default")]),_:3},16)):Be("v-if",!0)],64))]),_:2},1032,["to","disabled"])]),_:3},16))}});var nAe=ot(tAe,[["__file","tooltip.vue"]]);const iAe=Ft(nAe),oK="left-check-change",lK="right-check-change",Cm=at({data:{type:Re(Array),default:()=>[]},titles:{type:Re(Array),default:()=>[]},buttonTexts:{type:Re(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:Re(Function)},leftDefaultChecked:{type:Re(Array),default:()=>[]},rightDefaultChecked:{type:Re(Array),default:()=>[]},renderContent:{type:Re(Function)},modelValue:{type:Re(Array),default:()=>[]},format:{type:Re(Object),default:()=>({})},filterable:Boolean,props:{type:Re(Object),default:()=>Li({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),KI=(n,e)=>[n,e].every(nt)||nt(n)&&xr(e),rAe={[jn]:(n,e,t)=>[n,t].every(nt)&&["left","right"].includes(e),[Kt]:n=>nt(n),[oK]:KI,[lK]:KI},qI="checked-change",sAe=at({data:Cm.data,optionRender:{type:Re(Function)},placeholder:String,title:String,filterable:Boolean,format:Cm.format,filterMethod:Cm.filterMethod,defaultChecked:Cm.leftDefaultChecked,props:Cm.props}),aAe={[qI]:KI},gb=n=>{const e={label:"label",key:"key",disabled:"disabled"};return N(()=>({...e,...n.props}))},oAe=(n,e,t)=>{const i=gb(n),r=N(()=>n.data.filter(u=>Tt(n.filterMethod)?n.filterMethod(e.query,u):String(u[i.value.label]||u[i.value.key]).toLowerCase().includes(e.query.toLowerCase()))),s=N(()=>r.value.filter(u=>!u[i.value.disabled])),a=N(()=>{const u=e.checked.length,d=n.data.length,{noChecked:f,hasChecked:h}=n.format;return f&&h?u>0?h.replace(/\${checked}/g,u.toString()).replace(/\${total}/g,d.toString()):f.replace(/\${total}/g,d.toString()):`${u}/${d}`}),o=N(()=>{const u=e.checked.length;return u>0&&u<s.value.length}),l=()=>{const u=s.value.map(d=>d[i.value.key]);e.allChecked=u.length>0&&u.every(d=>e.checked.includes(d))},c=u=>{e.checked=u?s.value.map(d=>d[i.value.key]):[]};return We(()=>e.checked,(u,d)=>{if(l(),e.checkChangeByUser){const f=u.concat(d).filter(h=>!u.includes(h)||!d.includes(h));t(qI,u,f)}else t(qI,u),e.checkChangeByUser=!0}),We(s,()=>{l()}),We(()=>n.data,()=>{const u=[],d=r.value.map(f=>f[i.value.key]);e.checked.forEach(f=>{d.includes(f)&&u.push(f)}),e.checkChangeByUser=!1,e.checked=u}),We(()=>n.defaultChecked,(u,d)=>{if(d&&u.length===d.length&&u.every(p=>d.includes(p)))return;const f=[],h=s.value.map(p=>p[i.value.key]);u.forEach(p=>{h.includes(p)&&f.push(p)}),e.checkChangeByUser=!1,e.checked=f},{immediate:!0}),{filteredData:r,checkableData:s,checkedSummary:a,isIndeterminate:o,updateAllChecked:l,handleAllCheckedChange:c}},lAe=ve({name:"ElTransferPanel"}),cAe=ve({...lAe,props:sAe,emits:aAe,setup(n,{expose:e,emit:t}){const i=n,r=ur(),s=({option:y})=>y,{t:a}=xn(),o=Ze("transfer"),l=Nn({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),c=gb(i),{filteredData:u,checkedSummary:d,isIndeterminate:f,handleAllCheckedChange:h}=oAe(i,l,t),p=N(()=>!ka(l.query)&&ka(u.value)),m=N(()=>!ka(r.default()[0].children)),{checked:v,allChecked:g,query:_}=Mr(l);return e({query:_}),(y,S)=>(F(),ie("div",{class:$(b(o).b("panel"))},[le("p",{class:$(b(o).be("panel","header"))},[oe(b(ko),{modelValue:b(g),"onUpdate:modelValue":w=>fi(g)?g.value=w:null,indeterminate:b(f),"validate-event":!1,onChange:b(h)},{default:ge(()=>[Xt(rt(y.title)+" ",1),le("span",null,rt(b(d)),1)]),_:1},8,["modelValue","onUpdate:modelValue","indeterminate","onChange"])],2),le("div",{class:$([b(o).be("panel","body"),b(o).is("with-footer",b(m))])},[y.filterable?(F(),He(b(Rs),{key:0,modelValue:b(_),"onUpdate:modelValue":w=>fi(_)?_.value=w:null,class:$(b(o).be("panel","filter")),size:"default",placeholder:y.placeholder,"prefix-icon":b(Nce),clearable:"","validate-event":!1},null,8,["modelValue","onUpdate:modelValue","class","placeholder","prefix-icon"])):Be("v-if",!0),Wt(oe(b(NW),{modelValue:b(v),"onUpdate:modelValue":w=>fi(v)?v.value=w:null,"validate-event":!1,class:$([b(o).is("filterable",y.filterable),b(o).be("panel","list")])},{default:ge(()=>[(F(!0),ie(bt,null,sn(b(u),w=>(F(),He(b(ko),{key:w[b(c).key],class:$(b(o).be("panel","item")),value:w[b(c).key],disabled:w[b(c).disabled],"validate-event":!1},{default:ge(()=>{var x;return[oe(s,{option:(x=y.optionRender)==null?void 0:x.call(y,w)},null,8,["option"])]}),_:2},1032,["class","value","disabled"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"]),[[Dn,!b(p)&&!b(ka)(y.data)]]),Wt(le("div",{class:$(b(o).be("panel","empty"))},[Ne(y.$slots,"empty",{},()=>[Xt(rt(b(p)?b(a)("el.transfer.noMatch"):b(a)("el.transfer.noData")),1)])],2),[[Dn,b(p)||b(ka)(y.data)]])],2),b(m)?(F(),ie("p",{key:0,class:$(b(o).be("panel","footer"))},[Ne(y.$slots,"default")],2)):Be("v-if",!0)],2))}});var m4=ot(cAe,[["__file","transfer-panel.vue"]]);const uAe=n=>{const e=gb(n),t=N(()=>n.data.reduce((s,a)=>(s[a[e.value.key]]=a)&&s,{})),i=N(()=>n.data.filter(s=>!n.modelValue.includes(s[e.value.key]))),r=N(()=>n.targetOrder==="original"?n.data.filter(s=>n.modelValue.includes(s[e.value.key])):n.modelValue.reduce((s,a)=>{const o=t.value[a];return o&&s.push(o),s},[]));return{sourceData:i,targetData:r}},dAe=(n,e,t)=>{const i=gb(n),r=(o,l,c)=>{t(Kt,o),t(jn,o,l,c)};return{addToLeft:()=>{const o=n.modelValue.slice();e.rightChecked.forEach(l=>{const c=o.indexOf(l);c>-1&&o.splice(c,1)}),r(o,"left",e.rightChecked)},addToRight:()=>{let o=n.modelValue.slice();const l=n.data.filter(c=>{const u=c[i.value.key];return e.leftChecked.includes(u)&&!n.modelValue.includes(u)}).map(c=>c[i.value.key]);o=n.targetOrder==="unshift"?l.concat(o):o.concat(l),n.targetOrder==="original"&&(o=n.data.filter(c=>o.includes(c[i.value.key])).map(c=>c[i.value.key])),r(o,"right",e.leftChecked)}}},fAe=(n,e)=>({onSourceCheckedChange:(r,s)=>{n.leftChecked=r,s&&e(oK,r,s)},onTargetCheckedChange:(r,s)=>{n.rightChecked=r,s&&e(lK,r,s)}}),hAe=ve({name:"ElTransfer"}),pAe=ve({...hAe,props:Cm,emits:rAe,setup(n,{expose:e,emit:t}){const i=n,r=ur(),{t:s}=xn(),a=Ze("transfer"),{formItem:o}=fs(),l=Nn({leftChecked:[],rightChecked:[]}),c=gb(i),{sourceData:u,targetData:d}=uAe(i),{onSourceCheckedChange:f,onTargetCheckedChange:h}=fAe(l,t),{addToLeft:p,addToRight:m}=dAe(i,l,t),v=X(),g=X(),_=C=>{switch(C){case"left":v.value.query="";break;case"right":g.value.query="";break}},y=N(()=>i.buttonTexts.length===2),S=N(()=>i.titles[0]||s("el.transfer.titles.0")),w=N(()=>i.titles[1]||s("el.transfer.titles.1")),x=N(()=>i.filterPlaceholder||s("el.transfer.filterPlaceholder"));We(()=>i.modelValue,()=>{var C;i.validateEvent&&((C=o==null?void 0:o.validate)==null||C.call(o,"change").catch(M=>void 0))});const T=N(()=>C=>{var M;if(i.renderContent)return i.renderContent(wt,C);const A=(((M=r.default)==null?void 0:M.call(r,{option:C}))||[]).filter(E=>E.type!==Ds);return A.length?A:wt("span",C[c.value.label]||C[c.value.key])});return e({clearQuery:_,leftPanel:v,rightPanel:g}),(C,M)=>(F(),ie("div",{class:$(b(a).b())},[oe(m4,{ref_key:"leftPanel",ref:v,data:b(u),"option-render":b(T),placeholder:b(x),title:b(S),filterable:C.filterable,format:C.format,"filter-method":C.filterMethod,"default-checked":C.leftDefaultChecked,props:i.props,onCheckedChange:b(f)},{empty:ge(()=>[Ne(C.$slots,"left-empty")]),default:ge(()=>[Ne(C.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),le("div",{class:$(b(a).e("buttons"))},[oe(b(Ur),{type:"primary",class:$([b(a).e("button"),b(a).is("with-texts",b(y))]),disabled:b(ka)(l.rightChecked),onClick:b(p)},{default:ge(()=>[oe(b(_t),null,{default:ge(()=>[oe(b(Ld))]),_:1}),b(Wn)(C.buttonTexts[0])?Be("v-if",!0):(F(),ie("span",{key:0},rt(C.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),oe(b(Ur),{type:"primary",class:$([b(a).e("button"),b(a).is("with-texts",b(y))]),disabled:b(ka)(l.leftChecked),onClick:b(m)},{default:ge(()=>[b(Wn)(C.buttonTexts[1])?Be("v-if",!0):(F(),ie("span",{key:0},rt(C.buttonTexts[1]),1)),oe(b(_t),null,{default:ge(()=>[oe(b(js))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),oe(m4,{ref_key:"rightPanel",ref:g,data:b(d),"option-render":b(T),placeholder:b(x),filterable:C.filterable,format:C.format,"filter-method":C.filterMethod,title:b(w),"default-checked":C.rightDefaultChecked,props:i.props,onCheckedChange:b(h)},{empty:ge(()=>[Ne(C.$slots,"right-empty")]),default:ge(()=>[Ne(C.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var mAe=ot(pAe,[["__file","transfer.vue"]]);const vAe=Ft(mAe),rv="$treeNodeId",v4=function(n,e){!e||e[rv]||Object.defineProperty(e,rv,{value:n.id,enumerable:!1,configurable:!1,writable:!1})},k3=function(n,e){return n?e[n]:e[rv]},XI=(n,e,t)=>{const i=n.value.currentNode;t();const r=n.value.currentNode;i!==r&&e("current-change",r?r.data:null,r)},YI=n=>{let e=!0,t=!0,i=!0;for(let r=0,s=n.length;r<s;r++){const a=n[r];(a.checked!==!0||a.indeterminate)&&(e=!1,a.disabled||(i=!1)),(a.checked!==!1||a.indeterminate)&&(t=!1)}return{all:e,none:t,allWithoutDisable:i,half:!e&&!t}},F0=function(n){if(n.childNodes.length===0||n.loading)return;const{all:e,none:t,half:i}=YI(n.childNodes);e?(n.checked=!0,n.indeterminate=!1):i?(n.checked=!1,n.indeterminate=!0):t&&(n.checked=!1,n.indeterminate=!1);const r=n.parent;!r||r.level===0||n.store.checkStrictly||F0(r)},tS=function(n,e){const t=n.store.props,i=n.data||{},r=t[e];if(Tt(r))return r(i,n);if(xt(r))return i[r];if(Wn(r)){const s=i[e];return s===void 0?"":s}};let gAe=0,jI=class y1{constructor(e){this.id=gAe++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const t in e)Cn(e,t)&&(this[t]=e[t]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const t=e.props;if(t&&typeof t.isLeaf<"u"){const s=tS(this,"isLeaf");ai(s)&&(this.isLeafByUser=s)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&!this.isLeafByUser&&this.expand(),nt(this.data)||v4(this,this.data),!this.data)return;const i=e.defaultExpandedKeys,r=e.key;r&&i&&i.includes(this.key)&&this.expand(null,e.autoExpandParent),r&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(e){nt(e)||v4(this,e),this.data=e,this.childNodes=[];let t;this.level===0&&nt(this.data)?t=this.data:t=tS(this,"children")||[];for(let i=0,r=t.length;i<r;i++)this.insertChild({data:t[i]})}get label(){return tS(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return tS(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}get previousSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}contains(e,t=!0){return(this.childNodes||[]).some(i=>i===e||t&&i.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,t,i){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof y1)){if(!i){const r=this.getChildren(!0);r.includes(e.data)||(Wn(t)||t<0?r.push(e.data):r.splice(t,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=Nn(new y1(e)),e instanceof y1&&e.initialize()}e.level=this.level+1,Wn(t)||t<0?this.childNodes.push(e):this.childNodes.splice(t,0,e),this.updateLeafState()}insertBefore(e,t){let i;t&&(i=this.childNodes.indexOf(t)),this.insertChild(e,i)}insertAfter(e,t){let i;t&&(i=this.childNodes.indexOf(t),i!==-1&&(i+=1)),this.insertChild(e,i)}removeChild(e){const t=this.getChildren()||[],i=t.indexOf(e.data);i>-1&&t.splice(i,1);const r=this.childNodes.indexOf(e);r>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(r,1)),this.updateLeafState()}removeChildByData(e){let t=null;for(let i=0;i<this.childNodes.length;i++)if(this.childNodes[i].data===e){t=this.childNodes[i];break}t&&this.removeChild(t)}expand(e,t){const i=()=>{if(t){let r=this.parent;for(;r.level>0;)r.expanded=!0,r=r.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(r=>{r.canFocus=!0})};this.shouldLoadData()?this.loadData(r=>{nt(r)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||F0(this),i())}):i()}doCreateChildren(e,t={}){e.forEach(i=>{this.insertChild(Object.assign({data:i},t),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,t,i,r){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:a,allWithoutDisable:o}=YI(this.childNodes);!this.isLeaf&&!a&&o&&(this.checked=!1,e=!1);const l=()=>{if(t){const c=this.childNodes;for(let f=0,h=c.length;f<h;f++){const p=c[f];r=r||e!==!1;const m=p.disabled?p.checked:r;p.setChecked(m,t,!0,r)}const{half:u,all:d}=YI(c);d||(this.checked=d,this.indeterminate=u)}};if(this.shouldLoadData()){this.loadData(()=>{l(),F0(this)},{checked:e!==!1});return}else l()}const s=this.parent;!s||s.level===0||i||F0(s)}getChildren(e=!1){if(this.level===0)return this.data;const t=this.data;if(!t)return null;const i=this.store.props;let r="children";return i&&(r=i.children||"children"),t[r]===void 0&&(t[r]=null),e&&!t[r]&&(t[r]=[]),t[r]}updateChildren(){const e=this.getChildren()||[],t=this.childNodes.map(s=>s.data),i={},r=[];e.forEach((s,a)=>{const o=s[rv];!!o&&t.findIndex(c=>c[rv]===o)>=0?i[o]={index:a,data:s}:r.push({index:a,data:s})}),this.store.lazy||t.forEach(s=>{i[s[rv]]||this.removeChildByData(s)}),r.forEach(({index:s,data:a})=>{this.insertChild({data:a},s)}),this.updateLeafState()}loadData(e,t={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(t).length)){this.loading=!0;const i=s=>{this.childNodes=[],this.doCreateChildren(s,t),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,s)},r=()=>{this.loading=!1};this.store.load(this,i,r)}else e&&e.call(this)}eachNode(e){const t=[this];for(;t.length;){const i=t.shift();t.unshift(...i.childNodes),e(i)}}reInitChecked(){this.store.checkStrictly||F0(this)}};class yAe{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const t in e)Cn(e,t)&&(this[t]=e[t]);this.nodesMap={}}initialize(){if(this.root=new jI({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,t=>{this.root.doCreateChildren(t),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(e){const t=this.filterNodeMethod,i=this.lazy,r=function(s){const a=s.root?s.root.childNodes:s.childNodes;if(a.forEach(o=>{o.visible=t.call(o,e,o.data,o),r(o)}),!s.visible&&a.length){let o=!0;o=!a.some(l=>l.visible),s.root?s.root.visible=o===!1:s.visible=o===!1}e&&s.visible&&!s.isLeaf&&(!i||s.loaded)&&s.expand()};r(this)}setData(e){e!==this.root.data?(this.nodesMap={},this.root.setData(e),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(e){if(e instanceof jI)return e;const t=Yt(e)?k3(this.key,e):e;return this.nodesMap[t]||null}insertBefore(e,t){const i=this.getNode(t);i.parent.insertBefore({data:e},i)}insertAfter(e,t){const i=this.getNode(t);i.parent.insertAfter({data:e},i)}remove(e){const t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))}append(e,t){const i=Nh(t)?this.root:this.getNode(t);i&&i.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],t=this.nodesMap;e.forEach(i=>{const r=t[i];r&&r.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const t=this.key;!e||!e.data||(t?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(i=>{this.deregisterNode(i)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,t=!1){const i=[],r=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(o=>{(o.checked||t&&o.indeterminate)&&(!e||e&&o.isLeaf)&&i.push(o.data),r(o)})};return r(this),i}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(t=>(t||{})[this.key])}getHalfCheckedNodes(){const e=[],t=function(i){(i.root?i.root.childNodes:i.childNodes).forEach(s=>{s.indeterminate&&e.push(s.data),t(s)})};return t(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],t=this.nodesMap;for(const i in t)Cn(t,i)&&e.push(t[i]);return e}updateChildren(e,t){const i=this.nodesMap[e];if(!i)return;const r=i.childNodes;for(let s=r.length-1;s>=0;s--){const a=r[s];this.remove(a.data)}for(let s=0,a=t.length;s<a;s++){const o=t[s];this.append(o,i.data)}}_setCheckedKeys(e,t=!1,i){const r=this._getAllNodes().sort((l,c)=>l.level-c.level),s=Object.create(null),a=Object.keys(i);r.forEach(l=>l.setChecked(!1,!1));const o=l=>{l.childNodes.forEach(c=>{var u;s[c.data[e]]=!0,(u=c.childNodes)!=null&&u.length&&o(c)})};for(let l=0,c=r.length;l<c;l++){const u=r[l],d=u.data[e].toString();if(!a.includes(d)){u.checked&&!s[d]&&u.setChecked(!1,!1);continue}if(u.childNodes.length&&o(u),u.isLeaf||this.checkStrictly){u.setChecked(!0,!1);continue}if(u.setChecked(!0,!0),t){u.setChecked(!1,!1);const h=function(p){p.childNodes.forEach(v=>{v.isLeaf||v.setChecked(!1,!1),h(v)})};h(u)}}}setCheckedNodes(e,t=!1){const i=this.key,r={};e.forEach(s=>{r[(s||{})[i]]=!0}),this._setCheckedKeys(i,t,r)}setCheckedKeys(e,t=!1){this.defaultCheckedKeys=e;const i=this.key,r={};e.forEach(s=>{r[s]=!0}),this._setCheckedKeys(i,t,r)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(t=>{const i=this.getNode(t);i&&i.expand(null,this.autoExpandParent)})}setChecked(e,t,i){const r=this.getNode(e);r&&r.setChecked(!!t,i)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,t=!0){const i=e[this.key],r=this.nodesMap[i];this.setCurrentNode(r),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,t=!0){if(this.currentNodeKey=e,e==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const i=this.getNode(e);i&&(this.setCurrentNode(i),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const _Ae=ve({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(n){const e=Ze("tree"),t=mt("NodeInstance"),i=mt("RootTree");return()=>{const r=n.node,{data:s,store:a}=r;return n.renderContent?n.renderContent(wt,{_self:t,node:r,data:s,store:a}):Ne(i.ctx.slots,"default",{node:r,data:s},()=>[wt("span",{class:e.be("node","label")},[r.label])])}}});var bAe=ot(_Ae,[["__file","tree-node-content.vue"]]);function cK(n){const e=mt("TreeNodeMap",null),t={treeNodeExpand:i=>{n.node!==i&&n.node.collapse()},children:[]};return e&&e.children.push(t),un("TreeNodeMap",t),{broadcastExpanded:i=>{if(n.accordion)for(const r of t.children)r.treeNodeExpand(i)}}}const uK=Symbol("dragEvents");function SAe({props:n,ctx:e,el$:t,dropIndicator$:i,store:r}){const s=Ze("tree"),a=X({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return un(uK,{treeNodeDragStart:({event:u,treeNode:d})=>{if(Tt(n.allowDrag)&&!n.allowDrag(d.node))return u.preventDefault(),!1;u.dataTransfer.effectAllowed="move";try{u.dataTransfer.setData("text/plain","")}catch{}a.value.draggingNode=d,e.emit("node-drag-start",d.node,u)},treeNodeDragOver:({event:u,treeNode:d})=>{const f=d,h=a.value.dropNode;h&&h.node.id!==f.node.id&&Ls(h.$el,s.is("drop-inner"));const p=a.value.draggingNode;if(!p||!f)return;let m=!0,v=!0,g=!0,_=!0;Tt(n.allowDrop)&&(m=n.allowDrop(p.node,f.node,"prev"),_=v=n.allowDrop(p.node,f.node,"inner"),g=n.allowDrop(p.node,f.node,"next")),u.dataTransfer.dropEffect=v||m||g?"move":"none",(m||v||g)&&(h==null?void 0:h.node.id)!==f.node.id&&(h&&e.emit("node-drag-leave",p.node,h.node,u),e.emit("node-drag-enter",p.node,f.node,u)),m||v||g?a.value.dropNode=f:a.value.dropNode=null,f.node.nextSibling===p.node&&(g=!1),f.node.previousSibling===p.node&&(m=!1),f.node.contains(p.node,!1)&&(v=!1),(p.node===f.node||p.node.contains(f.node))&&(m=!1,v=!1,g=!1);const y=f.$el.querySelector(`.${s.be("node","content")}`).getBoundingClientRect(),S=t.value.getBoundingClientRect();let w;const x=m?v?.25:g?.45:1:-1,T=g?v?.75:m?.55:0:1;let C=-9999;const M=u.clientY-y.top;M<y.height*x?w="before":M>y.height*T?w="after":v?w="inner":w="none";const A=f.$el.querySelector(`.${s.be("node","expand-icon")}`).getBoundingClientRect(),E=i.value;w==="before"?C=A.top-S.top:w==="after"&&(C=A.bottom-S.top),E.style.top=`${C}px`,E.style.left=`${A.right-S.left}px`,w==="inner"?_o(f.$el,s.is("drop-inner")):Ls(f.$el,s.is("drop-inner")),a.value.showDropIndicator=w==="before"||w==="after",a.value.allowDrop=a.value.showDropIndicator||_,a.value.dropType=w,e.emit("node-drag-over",p.node,f.node,u)},treeNodeDragEnd:u=>{const{draggingNode:d,dropType:f,dropNode:h}=a.value;if(u.preventDefault(),u.dataTransfer&&(u.dataTransfer.dropEffect="move"),d&&h){const p={data:d.node.data};f!=="none"&&d.node.remove(),f==="before"?h.node.parent.insertBefore(p,h.node):f==="after"?h.node.parent.insertAfter(p,h.node):f==="inner"&&h.node.insertChild(p),f!=="none"&&(r.value.registerNode(p),r.value.key&&d.node.eachNode(m=>{var v;(v=r.value.nodesMap[m.data[r.value.key]])==null||v.setChecked(m.checked,!r.value.checkStrictly)})),Ls(h.$el,s.is("drop-inner")),e.emit("node-drag-end",d.node,h.node,f,u),f!=="none"&&e.emit("node-drop",d.node,h.node,f,u)}d&&!h&&e.emit("node-drag-end",d.node,null,f,u),a.value.showDropIndicator=!1,a.value.draggingNode=null,a.value.dropNode=null,a.value.allowDrop=!0}}),{dragState:a}}const wAe=ve({name:"ElTreeNode",components:{ElCollapseTransition:pM,ElCheckbox:ko,NodeContent:bAe,ElIcon:_t,Loading:ql},props:{node:{type:jI,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(n,e){const t=Ze("tree"),{broadcastExpanded:i}=cK(n),r=mt("RootTree"),s=X(!1),a=X(!1),o=X(null),l=X(null),c=X(null),u=mt(uK),d=jt();un("NodeInstance",d),n.node.expanded&&(s.value=!0,a.value=!0);const f=r.props.props.children||"children";We(()=>{const M=n.node.data[f];return M&&[...M]},()=>{n.node.updateChildren()}),We(()=>n.node.indeterminate,M=>{m(n.node.checked,M)}),We(()=>n.node.checked,M=>{m(M,n.node.indeterminate)}),We(()=>n.node.childNodes.length,()=>n.node.reInitChecked()),We(()=>n.node.expanded,M=>{Mt(()=>s.value=M),M&&(a.value=!0)});const h=M=>k3(r.props.nodeKey,M.data),p=M=>{const A=n.props.class;if(!A)return{};let E;if(Tt(A)){const{data:I}=M;E=A(I,M)}else E=A;return xt(E)?{[E]:!0}:E},m=(M,A)=>{(o.value!==M||l.value!==A)&&r.ctx.emit("check-change",n.node.data,M,A),o.value=M,l.value=A},v=M=>{XI(r.store,r.ctx.emit,()=>{var A;if((A=r==null?void 0:r.props)==null?void 0:A.nodeKey){const I=h(n.node);r.store.value.setCurrentNodeKey(I)}else r.store.value.setCurrentNode(n.node)}),r.currentNode.value=n.node,r.props.expandOnClickNode&&_(),r.props.checkOnClickNode&&!n.node.disabled&&y(null,{target:{checked:!n.node.checked}}),r.ctx.emit("node-click",n.node.data,n.node,d,M)},g=M=>{r.instance.vnode.props.onNodeContextmenu&&(M.stopPropagation(),M.preventDefault()),r.ctx.emit("node-contextmenu",M,n.node.data,n.node,d)},_=()=>{n.node.isLeaf||(s.value?(r.ctx.emit("node-collapse",n.node.data,n.node,d),n.node.collapse()):n.node.expand(()=>{e.emit("node-expand",n.node.data,n.node,d)}))},y=(M,A)=>{n.node.setChecked(A.target.checked,!r.props.checkStrictly),Mt(()=>{const E=r.store.value;r.ctx.emit("check",n.node.data,{checkedNodes:E.getCheckedNodes(),checkedKeys:E.getCheckedKeys(),halfCheckedNodes:E.getHalfCheckedNodes(),halfCheckedKeys:E.getHalfCheckedKeys()})})};return{ns:t,node$:c,tree:r,expanded:s,childNodeRendered:a,oldChecked:o,oldIndeterminate:l,getNodeKey:h,getNodeClass:p,handleSelectChange:m,handleClick:v,handleContextMenu:g,handleExpandIconClick:_,handleCheckChange:y,handleChildNodeExpand:(M,A,E)=>{i(A),r.ctx.emit("node-expand",M,A,E)},handleDragStart:M=>{r.props.draggable&&u.treeNodeDragStart({event:M,treeNode:n})},handleDragOver:M=>{M.preventDefault(),r.props.draggable&&u.treeNodeDragOver({event:M,treeNode:{$el:c.value,node:n.node}})},handleDrop:M=>{M.preventDefault()},handleDragEnd:M=>{r.props.draggable&&u.treeNodeDragEnd(M)},CaretRight:BG}}});function xAe(n,e,t,i,r,s){const a=yt("el-icon"),o=yt("el-checkbox"),l=yt("loading"),c=yt("node-content"),u=yt("el-tree-node"),d=yt("el-collapse-transition");return Wt((F(),ie("div",{ref:"node$",class:$([n.ns.b("node"),n.ns.is("expanded",n.expanded),n.ns.is("current",n.node.isCurrent),n.ns.is("hidden",!n.node.visible),n.ns.is("focusable",!n.node.disabled),n.ns.is("checked",!n.node.disabled&&n.node.checked),n.getNodeClass(n.node)]),role:"treeitem",tabindex:"-1","aria-expanded":n.expanded,"aria-disabled":n.node.disabled,"aria-checked":n.node.checked,draggable:n.tree.props.draggable,"data-key":n.getNodeKey(n.node),onClick:Pt(n.handleClick,["stop"]),onContextmenu:n.handleContextMenu,onDragstart:Pt(n.handleDragStart,["stop"]),onDragover:Pt(n.handleDragOver,["stop"]),onDragend:Pt(n.handleDragEnd,["stop"]),onDrop:Pt(n.handleDrop,["stop"])},[le("div",{class:$(n.ns.be("node","content")),style:Ct({paddingLeft:(n.node.level-1)*n.tree.props.indent+"px"})},[n.tree.props.icon||n.CaretRight?(F(),He(a,{key:0,class:$([n.ns.be("node","expand-icon"),n.ns.is("leaf",n.node.isLeaf),{expanded:!n.node.isLeaf&&n.expanded}]),onClick:Pt(n.handleExpandIconClick,["stop"])},{default:ge(()=>[(F(),He(en(n.tree.props.icon||n.CaretRight)))]),_:1},8,["class","onClick"])):Be("v-if",!0),n.showCheckbox?(F(),He(o,{key:1,"model-value":n.node.checked,indeterminate:n.node.indeterminate,disabled:!!n.node.disabled,onClick:Pt(()=>{},["stop"]),onChange:n.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):Be("v-if",!0),n.node.loading?(F(),He(a,{key:2,class:$([n.ns.be("node","loading-icon"),n.ns.is("loading")])},{default:ge(()=>[oe(l)]),_:1},8,["class"])):Be("v-if",!0),oe(c,{node:n.node,"render-content":n.renderContent},null,8,["node","render-content"])],6),oe(d,null,{default:ge(()=>[!n.renderAfterExpand||n.childNodeRendered?Wt((F(),ie("div",{key:0,class:$(n.ns.be("node","children")),role:"group","aria-expanded":n.expanded},[(F(!0),ie(bt,null,sn(n.node.childNodes,f=>(F(),He(u,{key:n.getNodeKey(f),"render-content":n.renderContent,"render-after-expand":n.renderAfterExpand,"show-checkbox":n.showCheckbox,node:f,accordion:n.accordion,props:n.props,onNodeExpand:n.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded"])),[[Dn,n.expanded]]):Be("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[Dn,n.node.visible]])}var CAe=ot(wAe,[["render",xAe],["__file","tree-node.vue"]]);function MAe({el$:n},e){const t=Ze("tree"),i=Yn([]),r=Yn([]);Ht(()=>{a()}),Bo(()=>{i.value=Array.from(n.value.querySelectorAll("[role=treeitem]")),r.value=Array.from(n.value.querySelectorAll("input[type=checkbox]"))}),We(r,o=>{o.forEach(l=>{l.setAttribute("tabindex","-1")})}),Kn(n,"keydown",o=>{const l=o.target;if(!l.className.includes(t.b("node")))return;const c=o.code;i.value=Array.from(n.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`));const u=i.value.indexOf(l);let d;if([ut.up,ut.down].includes(c)){if(o.preventDefault(),c===ut.up){d=u===-1?0:u!==0?u-1:i.value.length-1;const h=d;for(;!e.value.getNode(i.value[d].dataset.key).canFocus;){if(d--,d===h){d=-1;break}d<0&&(d=i.value.length-1)}}else{d=u===-1?0:u<i.value.length-1?u+1:0;const h=d;for(;!e.value.getNode(i.value[d].dataset.key).canFocus;){if(d++,d===h){d=-1;break}d>=i.value.length&&(d=0)}}d!==-1&&i.value[d].focus()}[ut.left,ut.right].includes(c)&&(o.preventDefault(),l.click());const f=l.querySelector('[type="checkbox"]');[ut.enter,ut.numpadEnter,ut.space].includes(c)&&f&&(o.preventDefault(),f.click())});const a=()=>{var o;i.value=Array.from(n.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`)),r.value=Array.from(n.value.querySelectorAll("input[type=checkbox]"));const l=n.value.querySelectorAll(`.${t.is("checked")}[role=treeitem]`);if(l.length){l[0].setAttribute("tabindex","0");return}(o=i.value[0])==null||o.setAttribute("tabindex","0")}}const TAe=ve({name:"ElTree",components:{ElTreeNode:CAe},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:Zn}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(n,e){const{t}=xn(),i=Ze("tree"),r=mt(yg,null),s=X(new yAe({key:n.nodeKey,data:n.data,lazy:n.lazy,props:n.props,load:n.load,currentNodeKey:n.currentNodeKey,checkStrictly:n.checkStrictly,checkDescendants:n.checkDescendants,defaultCheckedKeys:n.defaultCheckedKeys,defaultExpandedKeys:n.defaultExpandedKeys,autoExpandParent:n.autoExpandParent,defaultExpandAll:n.defaultExpandAll,filterNodeMethod:n.filterNodeMethod}));s.value.initialize();const a=X(s.value.root),o=X(null),l=X(null),c=X(null),{broadcastExpanded:u}=cK(n),{dragState:d}=SAe({props:n,ctx:e,el$:l,dropIndicator$:c,store:s});MAe({el$:l},s);const f=N(()=>{const{childNodes:k}=a.value,O=r?r.hasFilteredOptions!==0:!1;return(!k||k.length===0||k.every(({visible:U})=>!U))&&!O});We(()=>n.currentNodeKey,k=>{s.value.setCurrentNodeKey(k)}),We(()=>n.defaultCheckedKeys,k=>{s.value.setDefaultCheckedKey(k)}),We(()=>n.defaultExpandedKeys,k=>{s.value.setDefaultExpandedKeys(k)}),We(()=>n.data,k=>{s.value.setData(k)},{deep:!0}),We(()=>n.checkStrictly,k=>{s.value.checkStrictly=k});const h=k=>{if(!n.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");s.value.filter(k)},p=k=>k3(n.nodeKey,k.data),m=k=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const O=s.value.getNode(k);if(!O)return[];const U=[O.data];let G=O.parent;for(;G&&G!==a.value;)U.push(G.data),G=G.parent;return U.reverse()},v=(k,O)=>s.value.getCheckedNodes(k,O),g=k=>s.value.getCheckedKeys(k),_=()=>{const k=s.value.getCurrentNode();return k?k.data:null},y=()=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const k=_();return k?k[n.nodeKey]:null},S=(k,O)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");s.value.setCheckedNodes(k,O)},w=(k,O)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");s.value.setCheckedKeys(k,O)},x=(k,O,U)=>{s.value.setChecked(k,O,U)},T=()=>s.value.getHalfCheckedNodes(),C=()=>s.value.getHalfCheckedKeys(),M=(k,O=!0)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");XI(s,e.emit,()=>{u(k),s.value.setUserCurrentNode(k,O)})},A=(k,O=!0)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");XI(s,e.emit,()=>{u(),s.value.setCurrentNodeKey(k,O)})},E=k=>s.value.getNode(k),I=k=>{s.value.remove(k)},P=(k,O)=>{s.value.append(k,O)},D=(k,O)=>{s.value.insertBefore(k,O)},L=(k,O)=>{s.value.insertAfter(k,O)},R=(k,O,U)=>{u(O),e.emit("node-expand",k,O,U)},B=(k,O)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");s.value.updateChildren(k,O)};return un("RootTree",{ctx:e,props:n,store:s,root:a,currentNode:o,instance:jt()}),un(Xl,void 0),{ns:i,store:s,root:a,currentNode:o,dragState:d,el$:l,dropIndicator$:c,isEmpty:f,filter:h,getNodeKey:p,getNodePath:m,getCheckedNodes:v,getCheckedKeys:g,getCurrentNode:_,getCurrentKey:y,setCheckedNodes:S,setCheckedKeys:w,setChecked:x,getHalfCheckedNodes:T,getHalfCheckedKeys:C,setCurrentNode:M,setCurrentKey:A,t,getNode:E,remove:I,append:P,insertBefore:D,insertAfter:L,handleNodeExpand:R,updateKeyChildren:B}}});function AAe(n,e,t,i,r,s){const a=yt("el-tree-node");return F(),ie("div",{ref:"el$",class:$([n.ns.b(),n.ns.is("dragging",!!n.dragState.draggingNode),n.ns.is("drop-not-allow",!n.dragState.allowDrop),n.ns.is("drop-inner",n.dragState.dropType==="inner"),{[n.ns.m("highlight-current")]:n.highlightCurrent}]),role:"tree"},[(F(!0),ie(bt,null,sn(n.root.childNodes,o=>(F(),He(a,{key:n.getNodeKey(o),node:o,props:n.props,accordion:n.accordion,"render-after-expand":n.renderAfterExpand,"show-checkbox":n.showCheckbox,"render-content":n.renderContent,onNodeExpand:n.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),n.isEmpty?(F(),ie("div",{key:0,class:$(n.ns.e("empty-block"))},[Ne(n.$slots,"empty",{},()=>{var o;return[le("span",{class:$(n.ns.e("empty-text"))},rt((o=n.emptyText)!=null?o:n.t("el.tree.emptyText")),3)]})],2)):Be("v-if",!0),Wt(le("div",{ref:"dropIndicator$",class:$(n.ns.e("drop-indicator"))},null,2),[[Dn,n.dragState.showDropIndicator]])],2)}var EAe=ot(TAe,[["render",AAe],["__file","tree.vue"]]);const Rx=Ft(EAe),IAe=(n,{attrs:e,emit:t},{select:i,tree:r,key:s})=>{const a=Ze("tree-select");return We(()=>n.data,()=>{n.filterable&&Mt(()=>{var l,c;(c=r.value)==null||c.filter((l=i.value)==null?void 0:l.states.inputValue)})},{flush:"post"}),{...rl(Mr(n),Object.keys(zh.props)),...e,"onUpdate:modelValue":l=>t(Kt,l),valueKey:s,popperClass:N(()=>{const l=[a.e("popper")];return n.popperClass&&l.push(n.popperClass),l.join(" ")}),filterMethod:(l="")=>{var c;n.filterMethod?n.filterMethod(l):n.remoteMethod?n.remoteMethod(l):(c=r.value)==null||c.filter(l)}}},RAe=ve({extends:vx,setup(n,e){const t=vx.setup(n,e);delete t.selectOptionClick;const i=jt().proxy;return Mt(()=>{t.select.states.cachedOptions.get(i.value)||t.select.onOptionCreate(i)}),We(()=>e.attrs.visible,r=>{t.states.visible=r},{immediate:!0}),t},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function QI(n){return n||n===0}function O3(n){return nt(n)&&n.length}function bp(n){return nt(n)?n:QI(n)?[n]:[]}function _1(n,e,t,i,r){for(let s=0;s<n.length;s++){const a=n[s];if(e(a,s,n,r))return i?i(a,s,n,r):a;{const o=t(a);if(O3(o)){const l=_1(o,e,t,i,a);if(l)return l}}}}function b1(n,e,t,i){for(let r=0;r<n.length;r++){const s=n[r];e(s,r,n,i);const a=t(s);O3(a)&&b1(a,e,t,s)}}const PAe=(n,{attrs:e,slots:t,emit:i},{select:r,tree:s,key:a})=>{We(()=>n.modelValue,()=>{n.showCheckbox&&Mt(()=>{const f=s.value;f&&!jr(f.getCheckedKeys(),bp(n.modelValue))&&f.setCheckedKeys(bp(n.modelValue))})},{immediate:!0,deep:!0});const o=N(()=>({value:a.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...n.props})),l=(f,h)=>{var p;const m=o.value[f];return Tt(m)?m(h,(p=s.value)==null?void 0:p.getNode(l("value",h))):h[m]},c=bp(n.modelValue).map(f=>_1(n.data||[],h=>l("value",h)===f,h=>l("children",h),(h,p,m,v)=>v&&l("value",v))).filter(f=>QI(f)),u=N(()=>{if(!n.renderAfterExpand&&!n.lazy)return[];const f=[];return b1(n.data.concat(n.cacheData),h=>{const p=l("value",h);f.push({value:p,currentLabel:l("label",h),isDisabled:l("disabled",h)})},h=>l("children",h)),f}),d=()=>{var f;return(f=s.value)==null?void 0:f.getCheckedKeys().filter(h=>{var p;const m=(p=s.value)==null?void 0:p.getNode(h);return!xr(m)&&ka(m.childNodes)})};return{...rl(Mr(n),Object.keys(Rx.props)),...e,nodeKey:a,expandOnClickNode:N(()=>!n.checkStrictly&&n.expandOnClickNode),defaultExpandedKeys:N(()=>n.defaultExpandedKeys?n.defaultExpandedKeys.concat(c):c),renderContent:(f,{node:h,data:p,store:m})=>f(RAe,{value:l("value",p),label:l("label",p),disabled:l("disabled",p),visible:h.visible},n.renderContent?()=>n.renderContent(f,{node:h,data:p,store:m}):t.default?()=>t.default({node:h,data:p,store:m}):void 0),filterNodeMethod:(f,h,p)=>n.filterNodeMethod?n.filterNodeMethod(f,h,p):f?new RegExp(KL(f),"i").test(l("label",h)||""):!0,onNodeClick:(f,h,p)=>{var m,v,g,_;if((m=e.onNodeClick)==null||m.call(e,f,h,p),!(n.showCheckbox&&n.checkOnClickNode)){if(!n.showCheckbox&&(n.checkStrictly||h.isLeaf)){if(!l("disabled",f)){const y=(v=r.value)==null?void 0:v.states.options.get(l("value",f));(g=r.value)==null||g.handleOptionSelect(y)}}else n.expandOnClickNode&&p.proxy.handleExpandIconClick();(_=r.value)==null||_.focus()}},onCheck:(f,h)=>{var p;if(!n.showCheckbox)return;const m=l("value",f),v={};b1([s.value.store.root],S=>v[S.key]=S,S=>S.childNodes);const g=h.checkedKeys,_=n.multiple?bp(n.modelValue).filter(S=>!(S in v)&&!g.includes(S)):[],y=_.concat(g);if(n.checkStrictly)i(Kt,n.multiple?y:y.includes(m)?m:void 0);else if(n.multiple){const S=d();i(Kt,_.concat(S))}else{const S=_1([f],T=>!O3(l("children",T))&&!l("disabled",T),T=>l("children",T)),w=S?l("value",S):void 0,x=QI(n.modelValue)&&!!_1([f],T=>l("value",T)===n.modelValue,T=>l("children",T));i(Kt,w===n.modelValue||x?void 0:w)}Mt(()=>{var S;const w=bp(n.modelValue);s.value.setCheckedKeys(w),(S=e.onCheck)==null||S.call(e,f,{checkedKeys:s.value.getCheckedKeys(),checkedNodes:s.value.getCheckedNodes(),halfCheckedKeys:s.value.getHalfCheckedKeys(),halfCheckedNodes:s.value.getHalfCheckedNodes()})}),(p=r.value)==null||p.focus()},onNodeExpand:(f,h,p)=>{var m;(m=e.onNodeExpand)==null||m.call(e,f,h,p),Mt(()=>{if(!n.checkStrictly&&n.lazy&&n.multiple&&h.checked){const v={},g=s.value.getCheckedKeys();b1([s.value.store.root],S=>v[S.key]=S,S=>S.childNodes);const _=bp(n.modelValue).filter(S=>!(S in v)&&!g.includes(S)),y=d();i(Kt,_.concat(y))}})},cacheOptions:u}};var DAe=ve({props:{data:{type:Array,default:()=>[]}},setup(n){const e=mt(yg);return We(()=>n.data,()=>{var t;n.data.forEach(r=>{e.states.cachedOptions.has(r.value)||e.states.cachedOptions.set(r.value,r)});const i=((t=e.selectRef)==null?void 0:t.querySelectorAll("input"))||[];wn&&!Array.from(i).includes(document.activeElement)&&e.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const LAe=ve({name:"ElTreeSelect",inheritAttrs:!1,props:{...zh.props,...Rx.props,cacheData:{type:Array,default:()=>[]}},setup(n,e){const{slots:t,expose:i}=e,r=X(),s=X(),a=N(()=>n.nodeKey||n.valueKey||"value"),o=IAe(n,e,{select:r,tree:s,key:a}),{cacheOptions:l,...c}=PAe(n,e,{select:r,tree:s,key:a}),u=Nn({});return i(u),Ht(()=>{Object.assign(u,{...rl(s.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...rl(r.value,["focus","blur","selectedLabel"])})}),()=>wt(zh,Nn({...o,ref:d=>r.value=d}),{...t,default:()=>[wt(DAe,{data:l.value}),wt(Rx,Nn({...c,ref:d=>s.value=d}))]})}});var kAe=ot(LAe,[["__file","tree-select.vue"]]);const OAe=Ft(kAe),N3=Symbol(),NAe={key:-1,level:-1,data:{}};var z0=(n=>(n.KEY="id",n.LABEL="label",n.CHILDREN="children",n.DISABLED="disabled",n.CLASS="",n))(z0||{}),ZI=(n=>(n.ADD="add",n.DELETE="delete",n))(ZI||{});const dK={type:Number,default:26},BAe=at({data:{type:Re(Array),default:()=>Li([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:Re(Object),default:()=>Li({children:"children",label:"label",disabled:"disabled",value:"id",class:""})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:Re(Array),default:()=>Li([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:Re(Array),default:()=>Li([])},indent:{type:Number,default:16},itemSize:dK,icon:{type:Zn},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:Re([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:Re(Function)},perfMode:{type:Boolean,default:!0}}),FAe=at({node:{type:Re(Object),default:()=>Li(NAe)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:dK}),zAe=at({node:{type:Re(Object),required:!0}}),fK="node-click",hK="node-drop",pK="node-expand",mK="node-collapse",vK="current-change",gK="check",yK="check-change",_K="node-contextmenu",UAe={[fK]:(n,e,t)=>n&&e&&t,[hK]:(n,e,t)=>n&&e&&t,[pK]:(n,e)=>n&&e,[mK]:(n,e)=>n&&e,[vK]:(n,e)=>n&&e,[gK]:(n,e)=>n&&e,[yK]:(n,e)=>n&&ai(e),[_K]:(n,e,t)=>n&&e&&t},HAe={click:(n,e)=>!!(n&&e),drop:(n,e)=>!!(n&&e),toggle:n=>!!n,check:(n,e)=>n&&ai(e)};function VAe(n,e){const t=X(new Set),i=X(new Set),{emit:r}=jt();We([()=>e.value,()=>n.defaultCheckedKeys],()=>Mt(()=>{_(n.defaultCheckedKeys)}),{immediate:!0});const s=()=>{if(!e.value||!n.showCheckbox||n.checkStrictly)return;const{levelTreeNodeMap:y,maxLevel:S}=e.value,w=t.value,x=new Set;for(let T=S-1;T>=1;--T){const C=y.get(T);C&&C.forEach(M=>{const A=M.children;if(A){let E=!0,I=!1;for(const P of A){const D=P.key;if(w.has(D))I=!0;else if(x.has(D)){E=!1,I=!0;break}else E=!1}E?w.add(M.key):I?(x.add(M.key),w.delete(M.key)):(w.delete(M.key),x.delete(M.key))}})}i.value=x},a=y=>t.value.has(y.key),o=y=>i.value.has(y.key),l=(y,S,w=!0,x=!0)=>{const T=t.value,C=(M,A)=>{T[A?ZI.ADD:ZI.DELETE](M.key);const E=M.children;!n.checkStrictly&&E&&E.forEach(I=>{I.disabled||C(I,A)})};C(y,S),x&&s(),w&&c(y,S)},c=(y,S)=>{const{checkedNodes:w,checkedKeys:x}=p(),{halfCheckedNodes:T,halfCheckedKeys:C}=m();r(gK,y.data,{checkedKeys:x,checkedNodes:w,halfCheckedKeys:C,halfCheckedNodes:T}),r(yK,y.data,S)};function u(y=!1){return p(y).checkedKeys}function d(y=!1){return p(y).checkedNodes}function f(){return m().halfCheckedKeys}function h(){return m().halfCheckedNodes}function p(y=!1){const S=[],w=[];if(e!=null&&e.value&&n.showCheckbox){const{treeNodeMap:x}=e.value;t.value.forEach(T=>{const C=x.get(T);C&&(!y||y&&C.isLeaf)&&(w.push(T),S.push(C.data))})}return{checkedKeys:w,checkedNodes:S}}function m(){const y=[],S=[];if(e!=null&&e.value&&n.showCheckbox){const{treeNodeMap:w}=e.value;i.value.forEach(x=>{const T=w.get(x);T&&(S.push(x),y.push(T.data))})}return{halfCheckedNodes:y,halfCheckedKeys:S}}function v(y){t.value.clear(),i.value.clear(),Mt(()=>{_(y)})}function g(y,S){if(e!=null&&e.value&&n.showCheckbox){const w=e.value.treeNodeMap.get(y);w&&l(w,S,!1)}}function _(y){if(e!=null&&e.value){const{treeNodeMap:S}=e.value;if(n.showCheckbox&&S&&(y==null?void 0:y.length)>0){for(const w of y){const x=S.get(w);x&&!a(x)&&l(x,!0,!1,!1)}s()}}}return{updateCheckedKeys:s,toggleCheckbox:l,isChecked:a,isIndeterminate:o,getCheckedKeys:u,getCheckedNodes:d,getHalfCheckedKeys:f,getHalfCheckedNodes:h,setChecked:g,setCheckedKeys:v}}function $Ae(n,e){const t=X(new Set([])),i=X(new Set([])),r=N(()=>Tt(n.filterMethod));function s(o){var l;if(!r.value)return;const c=new Set,u=i.value,d=t.value,f=[],h=((l=e.value)==null?void 0:l.treeNodes)||[],p=n.filterMethod;d.clear();function m(v){v.forEach(g=>{f.push(g),p!=null&&p(o,g.data,g)?f.forEach(y=>{c.add(y.key)}):g.isLeaf&&d.add(g.key);const _=g.children;if(_&&m(_),!g.isLeaf){if(!c.has(g.key))d.add(g.key);else if(_){let y=!0;for(const S of _)if(!d.has(S.key)){y=!1;break}y?u.add(g.key):u.delete(g.key)}}f.pop()})}return m(h),c}function a(o){return i.value.has(o.key)}return{hiddenExpandIconKeySet:i,hiddenNodeKeySet:t,doFilter:s,isForceHiddenExpandIcon:a}}function GAe(n,e){const t=X(new Set(n.defaultExpandedKeys)),i=X(),r=Yn(),s=X();We(()=>n.currentNodeKey,H=>{i.value=H},{immediate:!0}),We(()=>n.data,H=>{me(H)},{immediate:!0});const{isIndeterminate:a,isChecked:o,toggleCheckbox:l,getCheckedKeys:c,getCheckedNodes:u,getHalfCheckedKeys:d,getHalfCheckedNodes:f,setChecked:h,setCheckedKeys:p}=VAe(n,r),{doFilter:m,hiddenNodeKeySet:v,isForceHiddenExpandIcon:g}=$Ae(n,r),_=N(()=>{var H;return((H=n.props)==null?void 0:H.value)||z0.KEY}),y=N(()=>{var H;return((H=n.props)==null?void 0:H.children)||z0.CHILDREN}),S=N(()=>{var H;return((H=n.props)==null?void 0:H.disabled)||z0.DISABLED}),w=N(()=>{var H;return((H=n.props)==null?void 0:H.label)||z0.LABEL}),x=N(()=>{var H;const Q=t.value,j=v.value,Pe=[],we=((H=r.value)==null?void 0:H.treeNodes)||[],De=[];for(let Me=we.length-1;Me>=0;--Me)De.push(we[Me]);for(;De.length;){const Me=De.pop();if(!j.has(Me.key)&&(Pe.push(Me),Me.children&&Q.has(Me.key)))for(let Ae=Me.children.length-1;Ae>=0;--Ae)De.push(Me.children[Ae])}return Pe}),T=N(()=>x.value.length>0);function C(H){const Q=new Map,j=new Map;let Pe=1;function we(Me,Ae=1,Fe=void 0){var ne;const z=[];for(const K of Me){const ae=E(K),xe={level:Ae,key:ae,data:K};xe.label=P(K),xe.parent=Fe;const Le=A(K);xe.disabled=I(K),xe.isLeaf=!Le||Le.length===0,Le&&Le.length&&(xe.children=we(Le,Ae+1,xe)),z.push(xe),Q.set(ae,xe),j.has(Ae)||j.set(Ae,[]),(ne=j.get(Ae))==null||ne.push(xe)}return Ae>Pe&&(Pe=Ae),z}const De=we(H);return{treeNodeMap:Q,levelTreeNodeMap:j,maxLevel:Pe,treeNodes:De}}function M(H){const Q=m(H);Q&&(t.value=Q)}function A(H){return H[y.value]}function E(H){return H?H[_.value]:""}function I(H){return H[S.value]}function P(H){return H[w.value]}function D(H){t.value.has(H.key)?G(H):U(H)}function L(H){const Q=new Set,j=r.value.treeNodeMap;H.forEach(Pe=>{let we=j.get(Pe);for(;we&&!Q.has(we.key);)Q.add(we.key),we=we.parent}),t.value=Q}function R(H,Q){e(fK,H.data,H,Q),k(H),n.expandOnClickNode&&D(H),n.showCheckbox&&n.checkOnClickNode&&!H.disabled&&l(H,!o(H),!0)}function B(H,Q){e(hK,H.data,H,Q)}function k(H){Y(H)||(i.value=H.key,e(vK,H.data,H))}function O(H,Q){l(H,Q)}function U(H){const Q=t.value;if(r.value&&n.accordion){const{treeNodeMap:j}=r.value;Q.forEach(Pe=>{const we=j.get(Pe);H&&H.level===(we==null?void 0:we.level)&&Q.delete(Pe)})}Q.add(H.key),e(pK,H.data,H)}function G(H){t.value.delete(H.key),e(mK,H.data,H)}function q(H){return t.value.has(H.key)}function W(H){return!!H.disabled}function Y(H){const Q=i.value;return Q!==void 0&&Q===H.key}function J(){var H,Q;if(i.value)return(Q=(H=r.value)==null?void 0:H.treeNodeMap.get(i.value))==null?void 0:Q.data}function Z(){return i.value}function ee(H){i.value=H}function me(H){Mt(()=>r.value=C(H))}function ye(H){var Q;const j=Yt(H)?E(H):H;return(Q=r.value)==null?void 0:Q.treeNodeMap.get(j)}function Te(H,Q="auto"){const j=ye(H);j&&s.value&&s.value.scrollToItem(x.value.indexOf(j),Q)}function Ee(H){var Q;(Q=s.value)==null||Q.scrollTo(H)}return{tree:r,flattenTree:x,isNotEmpty:T,listRef:s,getKey:E,getChildren:A,toggleExpand:D,toggleCheckbox:l,isExpanded:q,isChecked:o,isIndeterminate:a,isDisabled:W,isCurrent:Y,isForceHiddenExpandIcon:g,handleNodeClick:R,handleNodeDrop:B,handleNodeCheck:O,getCurrentNode:J,getCurrentKey:Z,setCurrentKey:ee,getCheckedKeys:c,getCheckedNodes:u,getHalfCheckedKeys:d,getHalfCheckedNodes:f,setChecked:h,setCheckedKeys:p,filter:M,setData:me,getNode:ye,expandNode:U,collapseNode:G,setExpandedKeys:L,scrollToNode:Te,scrollTo:Ee}}var WAe=ve({name:"ElTreeNodeContent",props:zAe,setup(n){const e=mt(N3),t=Ze("tree");return()=>{const i=n.node,{data:r}=i;return e!=null&&e.ctx.slots.default?e.ctx.slots.default({node:i,data:r}):wt("span",{class:t.be("node","label")},[i==null?void 0:i.label])}}});const KAe=ve({name:"ElTreeNode"}),qAe=ve({...KAe,props:FAe,emits:HAe,setup(n,{emit:e}){const t=n,i=mt(N3),r=Ze("tree"),s=N(()=>{var h;return(h=i==null?void 0:i.props.indent)!=null?h:16}),a=N(()=>{var h;return(h=i==null?void 0:i.props.icon)!=null?h:BG}),o=h=>{const p=i==null?void 0:i.props.props.class;if(!p)return{};let m;if(Tt(p)){const{data:v}=h;m=p(v,h)}else m=p;return xt(m)?{[m]:!0}:m},l=h=>{e("click",t.node,h)},c=h=>{e("drop",t.node,h)},u=()=>{e("toggle",t.node)},d=h=>{e("check",t.node,h)},f=h=>{var p,m,v,g;(v=(m=(p=i==null?void 0:i.instance)==null?void 0:p.vnode)==null?void 0:m.props)!=null&&v.onNodeContextmenu&&(h.stopPropagation(),h.preventDefault()),i==null||i.ctx.emit(_K,h,(g=t.node)==null?void 0:g.data,t.node)};return(h,p)=>{var m,v,g;return F(),ie("div",{ref:"node$",class:$([b(r).b("node"),b(r).is("expanded",h.expanded),b(r).is("current",h.current),b(r).is("focusable",!h.disabled),b(r).is("checked",!h.disabled&&h.checked),o(h.node)]),role:"treeitem",tabindex:"-1","aria-expanded":h.expanded,"aria-disabled":h.disabled,"aria-checked":h.checked,"data-key":(m=h.node)==null?void 0:m.key,onClick:Pt(l,["stop"]),onContextmenu:f,onDragover:Pt(()=>{},["prevent"]),onDragenter:Pt(()=>{},["prevent"]),onDrop:Pt(c,["stop"])},[le("div",{class:$(b(r).be("node","content")),style:Ct({paddingLeft:`${(h.node.level-1)*b(s)}px`,height:h.itemSize+"px"})},[b(a)?(F(),He(b(_t),{key:0,class:$([b(r).is("leaf",!!((v=h.node)!=null&&v.isLeaf)),b(r).is("hidden",h.hiddenExpandIcon),{expanded:!((g=h.node)!=null&&g.isLeaf)&&h.expanded},b(r).be("node","expand-icon")]),onClick:Pt(u,["stop"])},{default:ge(()=>[(F(),He(en(b(a))))]),_:1},8,["class","onClick"])):Be("v-if",!0),h.showCheckbox?(F(),He(b(ko),{key:1,"model-value":h.checked,indeterminate:h.indeterminate,disabled:h.disabled,onChange:d,onClick:Pt(()=>{},["stop"])},null,8,["model-value","indeterminate","disabled","onClick"])):Be("v-if",!0),oe(b(WAe),{node:h.node},null,8,["node"])],6)],42,["aria-expanded","aria-disabled","aria-checked","data-key","onClick","onDragover","onDragenter","onDrop"])}}});var XAe=ot(qAe,[["__file","tree-node.vue"]]);const YAe=ve({name:"ElTreeV2"}),jAe=ve({...YAe,props:BAe,emits:UAe,setup(n,{expose:e,emit:t}){const i=n,r=ur(),s=N(()=>i.itemSize);un(N3,{ctx:{emit:t,slots:r},props:i,instance:jt()}),un(Xl,void 0);const{t:a}=xn(),o=Ze("tree"),{flattenTree:l,isNotEmpty:c,listRef:u,toggleExpand:d,isExpanded:f,isIndeterminate:h,isChecked:p,isDisabled:m,isCurrent:v,isForceHiddenExpandIcon:g,handleNodeClick:_,handleNodeDrop:y,handleNodeCheck:S,toggleCheckbox:w,getCurrentNode:x,getCurrentKey:T,setCurrentKey:C,getCheckedKeys:M,getCheckedNodes:A,getHalfCheckedKeys:E,getHalfCheckedNodes:I,setChecked:P,setCheckedKeys:D,filter:L,setData:R,getNode:B,expandNode:k,collapseNode:O,setExpandedKeys:U,scrollToNode:G,scrollTo:q}=GAe(i,t);return e({toggleCheckbox:w,getCurrentNode:x,getCurrentKey:T,setCurrentKey:C,getCheckedKeys:M,getCheckedNodes:A,getHalfCheckedKeys:E,getHalfCheckedNodes:I,setChecked:P,setCheckedKeys:D,filter:L,setData:R,getNode:B,expandNode:k,collapseNode:O,setExpandedKeys:U,scrollToNode:G,scrollTo:q}),(W,Y)=>(F(),ie("div",{class:$([b(o).b(),{[b(o).m("highlight-current")]:W.highlightCurrent}]),role:"tree"},[b(c)?(F(),He(b(n7),{key:0,ref_key:"listRef",ref:u,"class-name":b(o).b("virtual-list"),data:b(l),total:b(l).length,height:W.height,"item-size":b(s),"perf-mode":W.perfMode},{default:ge(({data:J,index:Z,style:ee})=>[(F(),He(XAe,{key:J[Z].key,style:Ct(ee),node:J[Z],expanded:b(f)(J[Z]),"show-checkbox":W.showCheckbox,checked:b(p)(J[Z]),indeterminate:b(h)(J[Z]),"item-size":b(s),disabled:b(m)(J[Z]),current:b(v)(J[Z]),"hidden-expand-icon":b(g)(J[Z]),onClick:b(_),onToggle:b(d),onCheck:b(S),onDrop:b(y)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck","onDrop"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(F(),ie("div",{key:1,class:$(b(o).e("empty-block"))},[Ne(W.$slots,"empty",{},()=>{var J;return[le("span",{class:$(b(o).e("empty-text"))},rt((J=W.emptyText)!=null?J:b(a)("el.tree.emptyText")),3)]})],2))],2))}});var QAe=ot(jAe,[["__file","tree.vue"]]);const ZAe=Ft(QAe),bK=Symbol("uploadContextKey"),JAe="ElUpload";class eEe extends Error{constructor(e,t,i,r){super(e),this.name="UploadAjaxError",this.status=t,this.method=i,this.url=r}}function g4(n,e,t){let i;return t.response?i=`${t.response.error||t.response}`:t.responseText?i=`${t.responseText}`:i=`fail to ${e.method} ${n} ${t.status}`,new eEe(i,t.status,e.method,n)}function tEe(n){const e=n.responseText||n.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const nEe=n=>{typeof XMLHttpRequest>"u"&&_r(JAe,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,t=n.action;e.upload&&e.upload.addEventListener("progress",s=>{const a=s;a.percent=s.total>0?s.loaded/s.total*100:0,n.onProgress(a)});const i=new FormData;if(n.data)for(const[s,a]of Object.entries(n.data))nt(a)&&a.length?i.append(s,...a):i.append(s,a);i.append(n.filename,n.file,n.file.name),e.addEventListener("error",()=>{n.onError(g4(t,n,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return n.onError(g4(t,n,e));n.onSuccess(tEe(e))}),e.open(n.method,t,!0),n.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const r=n.headers||{};if(r instanceof Headers)r.forEach((s,a)=>e.setRequestHeader(a,s));else for(const[s,a]of Object.entries(r))xr(a)||e.setRequestHeader(s,String(a));return e.send(i),e},SK=["text","picture","picture-card"];let iEe=1;const JI=()=>Date.now()+iEe++,wK=at({action:{type:String,default:"#"},headers:{type:Re(Object)},method:{type:String,default:"post"},data:{type:Re([Object,Function,Promise]),default:()=>Li({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:Re(Array),default:()=>Li([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:SK,default:"text"},httpRequest:{type:Re(Function),default:nEe},disabled:Boolean,limit:Number}),rEe=at({...wK,beforeUpload:{type:Re(Function),default:Vn},beforeRemove:{type:Re(Function)},onRemove:{type:Re(Function),default:Vn},onChange:{type:Re(Function),default:Vn},onPreview:{type:Re(Function),default:Vn},onSuccess:{type:Re(Function),default:Vn},onProgress:{type:Re(Function),default:Vn},onError:{type:Re(Function),default:Vn},onExceed:{type:Re(Function),default:Vn},crossorigin:{type:Re(String)}}),sEe=at({files:{type:Re(Array),default:()=>Li([])},disabled:{type:Boolean,default:!1},handlePreview:{type:Re(Function),default:Vn},listType:{type:String,values:SK,default:"text"},crossorigin:{type:Re(String)}}),aEe={remove:n=>!!n},oEe=ve({name:"ElUploadList"}),lEe=ve({...oEe,props:sEe,emits:aEe,setup(n,{emit:e}){const t=n,{t:i}=xn(),r=Ze("upload"),s=Ze("icon"),a=Ze("list"),o=hs(),l=X(!1),c=N(()=>[r.b("list"),r.bm("list",t.listType),r.is("disabled",t.disabled)]),u=d=>{e("remove",d)};return(d,f)=>(F(),He(C8,{tag:"ul",class:$(b(c)),name:b(a).b()},{default:ge(()=>[(F(!0),ie(bt,null,sn(d.files,(h,p)=>(F(),ie("li",{key:h.uid||h.name,class:$([b(r).be("list","item"),b(r).is(h.status),{focusing:l.value}]),tabindex:"0",onKeydown:ri(m=>!b(o)&&u(h),["delete"]),onFocus:m=>l.value=!0,onBlur:m=>l.value=!1,onClick:m=>l.value=!1},[Ne(d.$slots,"default",{file:h,index:p},()=>[d.listType==="picture"||h.status!=="uploading"&&d.listType==="picture-card"?(F(),ie("img",{key:0,class:$(b(r).be("list","item-thumbnail")),src:h.url,crossorigin:d.crossorigin,alt:""},null,10,["src","crossorigin"])):Be("v-if",!0),h.status==="uploading"||d.listType!=="picture-card"?(F(),ie("div",{key:1,class:$(b(r).be("list","item-info"))},[le("a",{class:$(b(r).be("list","item-name")),onClick:Pt(m=>d.handlePreview(h),["prevent"])},[oe(b(_t),{class:$(b(s).m("document"))},{default:ge(()=>[oe(b(tI))]),_:1},8,["class"]),le("span",{class:$(b(r).be("list","item-file-name")),title:h.name},rt(h.name),11,["title"])],10,["onClick"]),h.status==="uploading"?(F(),He(b(K9),{key:0,type:d.listType==="picture-card"?"circle":"line","stroke-width":d.listType==="picture-card"?6:2,percentage:Number(h.percentage),style:Ct(d.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):Be("v-if",!0)],2)):Be("v-if",!0),le("label",{class:$(b(r).be("list","item-status-label"))},[d.listType==="text"?(F(),He(b(_t),{key:0,class:$([b(s).m("upload-success"),b(s).m("circle-check")])},{default:ge(()=>[oe(b(xL))]),_:1},8,["class"])):["picture-card","picture"].includes(d.listType)?(F(),He(b(_t),{key:1,class:$([b(s).m("upload-success"),b(s).m("check")])},{default:ge(()=>[oe(b(ob))]),_:1},8,["class"])):Be("v-if",!0)],2),b(o)?Be("v-if",!0):(F(),He(b(_t),{key:2,class:$(b(s).m("close")),onClick:m=>u(h)},{default:ge(()=>[oe(b(fl))]),_:2},1032,["class","onClick"])),Be(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),Be(" This is a bug which needs to be fixed "),Be(" TODO: Fix the incorrect navigation interaction "),b(o)?Be("v-if",!0):(F(),ie("i",{key:3,class:$(b(s).m("close-tip"))},rt(b(i)("el.upload.deleteTip")),3)),d.listType==="picture-card"?(F(),ie("span",{key:4,class:$(b(r).be("list","item-actions"))},[le("span",{class:$(b(r).be("list","item-preview")),onClick:m=>d.handlePreview(h)},[oe(b(_t),{class:$(b(s).m("zoom-in"))},{default:ge(()=>[oe(b(UG))]),_:1},8,["class"])],10,["onClick"]),b(o)?Be("v-if",!0):(F(),ie("span",{key:0,class:$(b(r).be("list","item-delete")),onClick:m=>u(h)},[oe(b(_t),{class:$(b(s).m("delete"))},{default:ge(()=>[oe(b(sce))]),_:1},8,["class"])],10,["onClick"]))],2)):Be("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),Ne(d.$slots,"append")]),_:3},8,["class","name"]))}});var y4=ot(lEe,[["__file","upload-list.vue"]]);const cEe=at({disabled:{type:Boolean,default:!1}}),uEe={file:n=>nt(n)},xK="ElUploadDrag",dEe=ve({name:xK}),fEe=ve({...dEe,props:cEe,emits:uEe,setup(n,{emit:e}){mt(bK)||_r(xK,"usage: <el-upload><el-upload-dragger /></el-upload>");const i=Ze("upload"),r=X(!1),s=hs(),a=l=>{if(s.value)return;r.value=!1,l.stopPropagation();const c=Array.from(l.dataTransfer.files);e("file",c)},o=()=>{s.value||(r.value=!0)};return(l,c)=>(F(),ie("div",{class:$([b(i).b("dragger"),b(i).is("dragover",r.value)]),onDrop:Pt(a,["prevent"]),onDragover:Pt(o,["prevent"]),onDragleave:Pt(u=>r.value=!1,["prevent"])},[Ne(l.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var hEe=ot(fEe,[["__file","upload-dragger.vue"]]);const pEe=at({...wK,beforeUpload:{type:Re(Function),default:Vn},onRemove:{type:Re(Function),default:Vn},onStart:{type:Re(Function),default:Vn},onSuccess:{type:Re(Function),default:Vn},onProgress:{type:Re(Function),default:Vn},onError:{type:Re(Function),default:Vn},onExceed:{type:Re(Function),default:Vn}}),mEe=ve({name:"ElUploadContent",inheritAttrs:!1}),vEe=ve({...mEe,props:pEe,setup(n,{expose:e}){const t=n,i=Ze("upload"),r=hs(),s=Yn({}),a=Yn(),o=m=>{if(m.length===0)return;const{autoUpload:v,limit:g,fileList:_,multiple:y,onStart:S,onExceed:w}=t;if(g&&_.length+m.length>g){w(m,_);return}y||(m=m.slice(0,1));for(const x of m){const T=x;T.uid=JI(),S(T),v&&l(T)}},l=async m=>{if(a.value.value="",!t.beforeUpload)return u(m);let v,g={};try{const y=t.data,S=t.beforeUpload(m);g=zy(t.data)?ux(t.data):t.data,v=await S,zy(t.data)&&jr(y,g)&&(g=ux(t.data))}catch{v=!1}if(v===!1){t.onRemove(m);return}let _=m;v instanceof Blob&&(v instanceof File?_=v:_=new File([v],m.name,{type:m.type})),u(Object.assign(_,{uid:m.uid}),g)},c=async(m,v)=>Tt(m)?m(v):m,u=async(m,v)=>{const{headers:g,data:_,method:y,withCredentials:S,name:w,action:x,onProgress:T,onSuccess:C,onError:M,httpRequest:A}=t;try{v=await c(v??_,m)}catch{t.onRemove(m);return}const{uid:E}=m,I={headers:g||{},withCredentials:S,file:m,data:v,method:y,filename:w,action:x,onProgress:D=>{T(D,m)},onSuccess:D=>{C(D,m),delete s.value[E]},onError:D=>{M(D,m),delete s.value[E]}},P=A(I);s.value[E]=P,P instanceof Promise&&P.then(I.onSuccess,I.onError)},d=m=>{const v=m.target.files;v&&o(Array.from(v))},f=()=>{r.value||(a.value.value="",a.value.click())},h=()=>{f()};return e({abort:m=>{PG(s.value).filter(m?([g])=>String(m.uid)===g:()=>!0).forEach(([g,_])=>{_ instanceof XMLHttpRequest&&_.abort(),delete s.value[g]})},upload:l}),(m,v)=>(F(),ie("div",{class:$([b(i).b(),b(i).m(m.listType),b(i).is("drag",m.drag),b(i).is("disabled",b(r))]),tabindex:b(r)?"-1":"0",onClick:f,onKeydown:ri(Pt(h,["self"]),["enter","space"])},[m.drag?(F(),He(hEe,{key:0,disabled:b(r),onFile:o},{default:ge(()=>[Ne(m.$slots,"default")]),_:3},8,["disabled"])):Ne(m.$slots,"default",{key:1}),le("input",{ref_key:"inputRef",ref:a,class:$(b(i).e("input")),name:m.name,disabled:b(r),multiple:m.multiple,accept:m.accept,type:"file",onChange:d,onClick:Pt(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var _4=ot(vEe,[["__file","upload-content.vue"]]);const b4="ElUpload",S4=n=>{var e;(e=n.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(n.url)},gEe=(n,e)=>{const t=xG(n,"fileList",void 0,{passive:!0}),i=h=>t.value.find(p=>p.uid===h.uid);function r(h){var p;(p=e.value)==null||p.abort(h)}function s(h=["ready","uploading","success","fail"]){t.value=t.value.filter(p=>!h.includes(p.status))}function a(h){t.value=t.value.filter(p=>p!==h)}const o=(h,p)=>{const m=i(p);m&&(console.error(h),m.status="fail",a(m),n.onError(h,m,t.value),n.onChange(m,t.value))},l=(h,p)=>{const m=i(p);m&&(n.onProgress(h,m,t.value),m.status="uploading",m.percentage=Math.round(h.percent))},c=(h,p)=>{const m=i(p);m&&(m.status="success",m.response=h,n.onSuccess(h,m,t.value),n.onChange(m,t.value))},u=h=>{xr(h.uid)&&(h.uid=JI());const p={name:h.name,percentage:0,status:"ready",size:h.size,raw:h,uid:h.uid};if(n.listType==="picture-card"||n.listType==="picture")try{p.url=URL.createObjectURL(h)}catch(m){m.message,n.onError(m,p,t.value)}t.value=[...t.value,p],n.onChange(p,t.value)},d=async h=>{const p=h instanceof File?i(h):h;p||_r(b4,"file to be removed not found");const m=v=>{r(v),a(v),n.onRemove(v,t.value),S4(v)};n.beforeRemove?await n.beforeRemove(p,t.value)!==!1&&m(p):m(p)};function f(){t.value.filter(({status:h})=>h==="ready").forEach(({raw:h})=>{var p;return h&&((p=e.value)==null?void 0:p.upload(h))})}return We(()=>n.listType,h=>{h!=="picture-card"&&h!=="picture"||(t.value=t.value.map(p=>{const{raw:m,url:v}=p;if(!v&&m)try{p.url=URL.createObjectURL(m)}catch(g){n.onError(g,p,t.value)}return p}))}),We(t,h=>{for(const p of h)p.uid||(p.uid=JI()),p.status||(p.status="success")},{immediate:!0,deep:!0}),{uploadFiles:t,abort:r,clearFiles:s,handleError:o,handleProgress:l,handleStart:u,handleSuccess:c,handleRemove:d,submit:f,revokeFileObjectURL:S4}},yEe=ve({name:"ElUpload"}),_Ee=ve({...yEe,props:rEe,setup(n,{expose:e}){const t=n,i=hs(),r=Yn(),{abort:s,submit:a,clearFiles:o,uploadFiles:l,handleStart:c,handleError:u,handleRemove:d,handleSuccess:f,handleProgress:h,revokeFileObjectURL:p}=gEe(t,r),m=N(()=>t.listType==="picture-card"),v=N(()=>({...t,fileList:l.value,onStart:c,onProgress:h,onSuccess:f,onError:u,onRemove:d}));return Un(()=>{l.value.forEach(p)}),un(bK,{accept:zn(t,"accept")}),e({abort:s,submit:a,clearFiles:o,handleStart:c,handleRemove:d}),(g,_)=>(F(),ie("div",null,[b(m)&&g.showFileList?(F(),He(y4,{key:0,disabled:b(i),"list-type":g.listType,files:b(l),crossorigin:g.crossorigin,"handle-preview":g.onPreview,onRemove:b(d)},Ro({append:ge(()=>[oe(_4,rn({ref_key:"uploadRef",ref:r},b(v)),{default:ge(()=>[g.$slots.trigger?Ne(g.$slots,"trigger",{key:0}):Be("v-if",!0),!g.$slots.trigger&&g.$slots.default?Ne(g.$slots,"default",{key:1}):Be("v-if",!0)]),_:3},16)]),_:2},[g.$slots.file?{name:"default",fn:ge(({file:y,index:S})=>[Ne(g.$slots,"file",{file:y,index:S})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):Be("v-if",!0),!b(m)||b(m)&&!g.showFileList?(F(),He(_4,rn({key:1,ref_key:"uploadRef",ref:r},b(v)),{default:ge(()=>[g.$slots.trigger?Ne(g.$slots,"trigger",{key:0}):Be("v-if",!0),!g.$slots.trigger&&g.$slots.default?Ne(g.$slots,"default",{key:1}):Be("v-if",!0)]),_:3},16)):Be("v-if",!0),g.$slots.trigger?Ne(g.$slots,"default",{key:2}):Be("v-if",!0),Ne(g.$slots,"tip"),!b(m)&&g.showFileList?(F(),He(y4,{key:3,disabled:b(i),"list-type":g.listType,files:b(l),crossorigin:g.crossorigin,"handle-preview":g.onPreview,onRemove:b(d)},Ro({_:2},[g.$slots.file?{name:"default",fn:ge(({file:y,index:S})=>[Ne(g.$slots,"file",{file:y,index:S})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):Be("v-if",!0)]))}});var bEe=ot(_Ee,[["__file","upload.vue"]]);const SEe=Ft(bEe),wEe=at({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:Re([String,Array]),default:"Element Plus"},font:{type:Re(Object)},gap:{type:Re(Array),default:()=>[100,100]},offset:{type:Re(Array)}});function xEe(n){return n.replace(/([A-Z])/g,"-$1").toLowerCase()}function CEe(n){return Object.keys(n).map(e=>`${xEe(e)}: ${n[e]};`).join(" ")}function MEe(){return window.devicePixelRatio||1}const TEe=(n,e)=>{let t=!1;return n.removedNodes.length&&e&&(t=Array.from(n.removedNodes).includes(e)),n.type==="attributes"&&n.target===e&&(t=!0),t},CK=3;function OT(n,e,t=1){const i=document.createElement("canvas"),r=i.getContext("2d"),s=n*t,a=e*t;return i.setAttribute("width",`${s}px`),i.setAttribute("height",`${a}px`),r.save(),[r,i,s,a]}function AEe(){function n(e,t,i,r,s,a,o,l){const[c,u,d,f]=OT(r,s,i);if(e instanceof HTMLImageElement)c.drawImage(e,0,0,d,f);else{const{color:G,fontSize:q,fontStyle:W,fontWeight:Y,fontFamily:J,textAlign:Z,textBaseline:ee}=a,me=Number(q)*i;c.font=`${W} normal ${Y} ${me}px/${s}px ${J}`,c.fillStyle=G,c.textAlign=Z,c.textBaseline=ee;const ye=nt(e)?e:[e];ye==null||ye.forEach((Te,Ee)=>{c.fillText(Te??"",d/2,Ee*(me+CK*i))})}const h=Math.PI/180*Number(t),p=Math.max(r,s),[m,v,g]=OT(p,p,i);m.translate(g/2,g/2),m.rotate(h),d>0&&f>0&&m.drawImage(u,-d/2,-f/2);function _(G,q){const W=G*Math.cos(h)-q*Math.sin(h),Y=G*Math.sin(h)+q*Math.cos(h);return[W,Y]}let y=0,S=0,w=0,x=0;const T=d/2,C=f/2;[[0-T,0-C],[0+T,0-C],[0+T,0+C],[0-T,0+C]].forEach(([G,q])=>{const[W,Y]=_(G,q);y=Math.min(y,W),S=Math.max(S,W),w=Math.min(w,Y),x=Math.max(x,Y)});const A=y+g/2,E=w+g/2,I=S-y,P=x-w,D=o*i,L=l*i,R=(I+D)*2,B=P+L,[k,O]=OT(R,B);function U(G=0,q=0){k.drawImage(v,A,E,I,P,G,q,I,P)}return U(),U(I+D,-P/2-L/2),U(I+D,+P/2+L/2),[O.toDataURL(),R/i,B/i]}return n}const EEe=ve({name:"ElWatermark"}),IEe=ve({...EEe,props:wEe,setup(n){const e=n,t={position:"relative"},i=N(()=>{var A,E;return(E=(A=e.font)==null?void 0:A.color)!=null?E:"rgba(0,0,0,.15)"}),r=N(()=>{var A,E;return(E=(A=e.font)==null?void 0:A.fontSize)!=null?E:16}),s=N(()=>{var A,E;return(E=(A=e.font)==null?void 0:A.fontWeight)!=null?E:"normal"}),a=N(()=>{var A,E;return(E=(A=e.font)==null?void 0:A.fontStyle)!=null?E:"normal"}),o=N(()=>{var A,E;return(E=(A=e.font)==null?void 0:A.fontFamily)!=null?E:"sans-serif"}),l=N(()=>{var A,E;return(E=(A=e.font)==null?void 0:A.textAlign)!=null?E:"center"}),c=N(()=>{var A,E;return(E=(A=e.font)==null?void 0:A.textBaseline)!=null?E:"hanging"}),u=N(()=>e.gap[0]),d=N(()=>e.gap[1]),f=N(()=>u.value/2),h=N(()=>d.value/2),p=N(()=>{var A,E;return(E=(A=e.offset)==null?void 0:A[0])!=null?E:f.value}),m=N(()=>{var A,E;return(E=(A=e.offset)==null?void 0:A[1])!=null?E:h.value}),v=()=>{const A={zIndex:e.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let E=p.value-f.value,I=m.value-h.value;return E>0&&(A.left=`${E}px`,A.width=`calc(100% - ${E}px)`,E=0),I>0&&(A.top=`${I}px`,A.height=`calc(100% - ${I}px)`,I=0),A.backgroundPosition=`${E}px ${I}px`,A},g=Yn(null),_=Yn(),y=X(!1),S=()=>{_.value&&(_.value.remove(),_.value=void 0)},w=(A,E)=>{var I;g.value&&_.value&&(y.value=!0,_.value.setAttribute("style",CEe({...v(),backgroundImage:`url('${A}')`,backgroundSize:`${Math.floor(E)}px`})),(I=g.value)==null||I.append(_.value),setTimeout(()=>{y.value=!1}))},x=A=>{let E=120,I=64;const P=e.image,D=e.content,L=e.width,R=e.height;if(!P&&A.measureText){A.font=`${Number(r.value)}px ${o.value}`;const B=nt(D)?D:[D],k=B.map(O=>{const U=A.measureText(O);return[U.width,U.fontBoundingBoxAscent!==void 0?U.fontBoundingBoxAscent+U.fontBoundingBoxDescent:U.actualBoundingBoxAscent+U.actualBoundingBoxDescent]});E=Math.ceil(Math.max(...k.map(O=>O[0]))),I=Math.ceil(Math.max(...k.map(O=>O[1])))*B.length+(B.length-1)*CK}return[L??E,R??I]},T=AEe(),C=()=>{const E=document.createElement("canvas").getContext("2d"),I=e.image,P=e.content,D=e.rotate;if(E){_.value||(_.value=document.createElement("div"));const L=MEe(),[R,B]=x(E),k=O=>{const[U,G]=T(O||"",D,L,R,B,{color:i.value,fontSize:r.value,fontStyle:a.value,fontWeight:s.value,fontFamily:o.value,textAlign:l.value,textBaseline:c.value},u.value,d.value);w(U,G)};if(I){const O=new Image;O.onload=()=>{k(O)},O.onerror=()=>{k(P)},O.crossOrigin="anonymous",O.referrerPolicy="no-referrer",O.src=I}else k(P)}};return Ht(()=>{C()}),We(()=>e,()=>{C()},{deep:!0,flush:"post"}),Un(()=>{S()}),wG(g,A=>{y.value||A.forEach(E=>{TEe(E,_.value)&&(S(),C())})},{attributes:!0,subtree:!0,childList:!0}),(A,E)=>(F(),ie("div",{ref_key:"containerRef",ref:g,style:Ct([t])},[Ne(A.$slots,"default")],4))}});var REe=ot(IEe,[["__file","watermark.vue"]]);const PEe=Ft(REe),DEe=at({zIndex:{type:Number,default:1001},visible:Boolean,fill:{type:String,default:"rgba(0,0,0,0.5)"},pos:{type:Re(Object)},targetAreaClickable:{type:Boolean,default:!0}}),LEe=(n,e,t,i,r)=>{const s=X(null),a=()=>{let d;return xt(n.value)?d=document.querySelector(n.value):Tt(n.value)?d=n.value():d=n.value,d},o=()=>{const d=a();if(!d||!e.value){s.value=null;return}kEe(d)||d.scrollIntoView(r.value);const{left:f,top:h,width:p,height:m}=d.getBoundingClientRect();s.value={left:f,top:h,width:p,height:m,radius:0}};Ht(()=>{We([e,n],()=>{o()},{immediate:!0}),window.addEventListener("resize",o)}),Un(()=>{window.removeEventListener("resize",o)});const l=d=>{var f;return(f=nt(t.value.offset)?t.value.offset[d]:t.value.offset)!=null?f:6},c=N(()=>{var d;if(!s.value)return s.value;const f=l(0),h=l(1),p=((d=t.value)==null?void 0:d.radius)||2;return{left:s.value.left-f,top:s.value.top-h,width:s.value.width+f*2,height:s.value.height+h*2,radius:p}}),u=N(()=>{const d=a();return!i.value||!d||!window.DOMRect?d||void 0:{getBoundingClientRect(){var f,h,p,m;return window.DOMRect.fromRect({width:((f=c.value)==null?void 0:f.width)||0,height:((h=c.value)==null?void 0:h.height)||0,x:((p=c.value)==null?void 0:p.left)||0,y:((m=c.value)==null?void 0:m.top)||0})}}});return{mergedPosInfo:c,triggerTarget:u}},MM=Symbol("ElTour");function kEe(n){const e=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight,{top:i,right:r,bottom:s,left:a}=n.getBoundingClientRect();return i>=0&&a>=0&&r<=e&&s<=t}const OEe=(n,e,t,i,r,s,a,o)=>{const l=X(),c=X(),u=X({}),d={x:l,y:c,placement:i,strategy:r,middlewareData:u},f=N(()=>{const g=[Z7(b(s)),_Te(),STe(),NEe()];return b(o)&&b(t)&&g.push(Q7({element:b(t)})),g}),h=async()=>{if(!wn)return;const g=b(n),_=b(e);if(!g||!_)return;const y=await aK(g,_,{placement:b(i),strategy:b(r),middleware:b(f)});xv(d).forEach(S=>{d[S].value=y[S]})},p=N(()=>{if(!b(n))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:b(a)};const{overflow:g}=b(u);return{position:b(r),zIndex:b(a),top:b(c)!=null?`${b(c)}px`:"",left:b(l)!=null?`${b(l)}px`:"",maxWidth:g!=null&&g.maxWidth?`${g==null?void 0:g.maxWidth}px`:""}}),m=N(()=>{if(!b(o))return{};const{arrow:g}=b(u);return{left:(g==null?void 0:g.x)!=null?`${g==null?void 0:g.x}px`:"",top:(g==null?void 0:g.y)!=null?`${g==null?void 0:g.y}px`:""}});let v;return Ht(()=>{const g=b(n),_=b(e);g&&_&&(v=zTe(g,_,h)),zr(()=>{h()})}),Un(()=>{v&&v()}),{update:h,contentStyle:p,arrowStyle:m}},NEe=()=>({name:"overflow",async fn(n){const e=await R3(n);let t=0;return e.left>0&&(t=e.left),e.right>0&&(t=e.right),{data:{maxWidth:n.rects.floating.width-t}}}}),BEe=ve({name:"ElTourMask",inheritAttrs:!1}),FEe=ve({...BEe,props:DEe,setup(n){const e=n,{ns:t}=mt(MM),i=N(()=>{var o,l;return(l=(o=e.pos)==null?void 0:o.radius)!=null?l:2}),r=N(()=>{const o=i.value,l=`a${o},${o} 0 0 1`;return{topRight:`${l} ${o},${o}`,bottomRight:`${l} ${-o},${o}`,bottomLeft:`${l} ${-o},${-o}`,topLeft:`${l} ${o},${-o}`}}),s=N(()=>{const o=window.innerWidth,l=window.innerHeight,c=r.value,u=`M${o},0 L0,0 L0,${l} L${o},${l} L${o},0 Z`,d=i.value;return e.pos?`${u} M${e.pos.left+d},${e.pos.top} h${e.pos.width-d*2} ${c.topRight} v${e.pos.height-d*2} ${c.bottomRight} h${-e.pos.width+d*2} ${c.bottomLeft} v${-e.pos.height+d*2} ${c.topLeft} z`:u}),a=N(()=>({fill:e.fill,pointerEvents:"auto",cursor:"auto"}));return r3(zn(e,"visible"),{ns:t}),(o,l)=>o.visible?(F(),ie("div",rn({key:0,class:b(t).e("mask"),style:{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:o.zIndex,pointerEvents:o.pos&&o.targetAreaClickable?"none":"auto"}},o.$attrs),[(F(),ie("svg",{style:{width:"100%",height:"100%"}},[le("path",{class:$(b(t).e("hollow")),style:Ct(b(a)),d:b(s)},null,14,["d"])]))],16)):Be("v-if",!0)}});var zEe=ot(FEe,[["__file","mask.vue"]]);const UEe=["absolute","fixed"],HEe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],B3=at({placement:{type:Re(String),values:HEe,default:"bottom"},reference:{type:Re(Object),default:null},strategy:{type:Re(String),values:UEe,default:"absolute"},offset:{type:Number,default:10},showArrow:Boolean,zIndex:{type:Number,default:2001}}),VEe={close:()=>!0},$Ee=ve({name:"ElTourContent"}),GEe=ve({...$Ee,props:B3,emits:VEe,setup(n,{emit:e}){const t=n,i=X(t.placement),r=X(t.strategy),s=X(null),a=X(null);We(()=>t.placement,()=>{i.value=t.placement});const{contentStyle:o,arrowStyle:l}=OEe(zn(t,"reference"),s,a,i,r,zn(t,"offset"),zn(t,"zIndex"),zn(t,"showArrow")),c=N(()=>i.value.split("-")[0]),{ns:u}=mt(MM),d=()=>{e("close")},f=h=>{h.detail.focusReason==="pointer"&&h.preventDefault()};return(h,p)=>(F(),ie("div",{ref_key:"contentRef",ref:s,style:Ct(b(o)),class:$(b(u).e("content")),"data-side":b(c),tabindex:"-1"},[oe(b(mg),{loop:"",trapped:"","focus-start-el":"container","focus-trap-el":s.value||void 0,onReleaseRequested:d,onFocusoutPrevented:f},{default:ge(()=>[Ne(h.$slots,"default")]),_:3},8,["focus-trap-el"]),h.showArrow?(F(),ie("span",{key:0,ref_key:"arrowRef",ref:a,style:Ct(b(l)),class:$(b(u).e("arrow"))},null,6)):Be("v-if",!0)],14,["data-side"]))}});var WEe=ot(GEe,[["__file","content.vue"]]),KEe=ve({name:"ElTourSteps",props:{current:{type:Number,default:0}},emits:["update-total"],setup(n,{slots:e,emit:t}){let i=0;return()=>{var r,s;const a=(r=e.default)==null?void 0:r.call(e),o=[];let l=0;function c(u){nt(u)&&u.forEach(d=>{var f;((f=(d==null?void 0:d.type)||{})==null?void 0:f.name)==="ElTourStep"&&(o.push(d),l+=1)})}return a.length&&c(gd((s=a[0])==null?void 0:s.children)),i!==l&&(i=l,t("update-total",l)),o.length?o[n.current]:null}}});const qEe=at({modelValue:Boolean,current:{type:Number,default:0},showArrow:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeIcon:{type:Zn},placement:B3.placement,contentStyle:{type:Re([Object])},mask:{type:Re([Boolean,Object]),default:!0},gap:{type:Re(Object),default:()=>({offset:6,radius:2})},zIndex:{type:Number},scrollIntoViewOptions:{type:Re([Boolean,Object]),default:()=>({block:"center"})},type:{type:Re(String)},appendTo:{type:Re([String,Object]),default:"body"},closeOnPressEscape:{type:Boolean,default:!0},targetAreaClickable:{type:Boolean,default:!0}}),XEe={[Kt]:n=>ai(n),"update:current":n=>At(n),close:n=>At(n),finish:()=>!0,change:n=>At(n)},YEe=ve({name:"ElTour"}),jEe=ve({...YEe,props:qEe,emits:XEe,setup(n,{emit:e}){const t=n,i=Ze("tour"),r=X(0),s=X(),a=xG(t,"current",e,{passive:!0}),o=N(()=>{var M;return(M=s.value)==null?void 0:M.target}),l=N(()=>[i.b(),v.value==="primary"?i.m("primary"):""]),c=N(()=>{var M;return((M=s.value)==null?void 0:M.placement)||t.placement}),u=N(()=>{var M,A;return(A=(M=s.value)==null?void 0:M.contentStyle)!=null?A:t.contentStyle}),d=N(()=>{var M,A;return(A=(M=s.value)==null?void 0:M.mask)!=null?A:t.mask}),f=N(()=>!!d.value&&t.modelValue),h=N(()=>ai(d.value)?void 0:d.value),p=N(()=>{var M,A;return!!o.value&&((A=(M=s.value)==null?void 0:M.showArrow)!=null?A:t.showArrow)}),m=N(()=>{var M,A;return(A=(M=s.value)==null?void 0:M.scrollIntoViewOptions)!=null?A:t.scrollIntoViewOptions}),v=N(()=>{var M,A;return(A=(M=s.value)==null?void 0:M.type)!=null?A:t.type}),{nextZIndex:g}=hg(),_=g(),y=N(()=>{var M;return(M=t.zIndex)!=null?M:_}),{mergedPosInfo:S,triggerTarget:w}=LEe(o,zn(t,"modelValue"),zn(t,"gap"),d,m);We(()=>t.modelValue,M=>{M||(a.value=0)});const x=()=>{t.closeOnPressEscape&&(e("update:modelValue",!1),e("close",a.value))},T=M=>{r.value=M},C=ur();return un(MM,{currentStep:s,current:a,total:r,showClose:zn(t,"showClose"),closeIcon:zn(t,"closeIcon"),mergedType:v,ns:i,slots:C,updateModelValue(M){e("update:modelValue",M)},onClose(){e("close",a.value)},onFinish(){e("finish")},onChange(){e("change",a.value)}}),(M,A)=>(F(),ie(bt,null,[oe(b(vg),{to:M.appendTo},{default:ge(()=>{var E,I;return[le("div",rn({class:b(l)},M.$attrs),[oe(zEe,{visible:b(f),fill:(E=b(h))==null?void 0:E.color,style:Ct((I=b(h))==null?void 0:I.style),pos:b(S),"z-index":b(y),"target-area-clickable":M.targetAreaClickable},null,8,["visible","fill","style","pos","z-index","target-area-clickable"]),M.modelValue?(F(),He(WEe,{key:b(a),reference:b(w),placement:b(c),"show-arrow":b(p),"z-index":b(y),style:Ct(b(u)),onClose:x},{default:ge(()=>[oe(b(KEe),{current:b(a),onUpdateTotal:T},{default:ge(()=>[Ne(M.$slots,"default")]),_:3},8,["current"])]),_:3},8,["reference","placement","show-arrow","z-index","style"])):Be("v-if",!0)],16)]}),_:3},8,["to"]),Be(" just for IDE "),Be("v-if",!0)],64))}});var QEe=ot(jEe,[["__file","tour.vue"]]);const ZEe=at({target:{type:Re([String,Object,Function])},title:String,description:String,showClose:{type:Boolean,default:void 0},closeIcon:{type:Zn},showArrow:{type:Boolean,default:void 0},placement:B3.placement,mask:{type:Re([Boolean,Object]),default:void 0},contentStyle:{type:Re([Object])},prevButtonProps:{type:Re(Object)},nextButtonProps:{type:Re(Object)},scrollIntoViewOptions:{type:Re([Boolean,Object]),default:void 0},type:{type:Re(String)}}),JEe={close:()=>!0},e2e=ve({name:"ElTourStep"}),t2e=ve({...e2e,props:ZEe,emits:JEe,setup(n,{emit:e}){const t=n,{Close:i}=AL,{t:r}=xn(),{currentStep:s,current:a,total:o,showClose:l,closeIcon:c,mergedType:u,ns:d,slots:f,updateModelValue:h,onClose:p,onFinish:m,onChange:v}=mt(MM);We(t,C=>{s.value=C},{immediate:!0});const g=N(()=>{var C;return(C=t.showClose)!=null?C:l.value}),_=N(()=>{var C,M;return(M=(C=t.closeIcon)!=null?C:c.value)!=null?M:i}),y=C=>{if(C)return _oe(C,["children","onClick"])},S=()=>{var C,M;a.value-=1,(C=t.prevButtonProps)!=null&&C.onClick&&((M=t.prevButtonProps)==null||M.onClick()),v()},w=()=>{var C;a.value>=o.value-1?x():a.value+=1,(C=t.nextButtonProps)!=null&&C.onClick&&t.nextButtonProps.onClick(),v()},x=()=>{T(),m()},T=()=>{h(!1),p(),e("close")};return(C,M)=>(F(),ie(bt,null,[b(g)?(F(),ie("button",{key:0,"aria-label":"Close",class:$(b(d).e("closebtn")),type:"button",onClick:T},[oe(b(_t),{class:$(b(d).e("close"))},{default:ge(()=>[(F(),He(en(b(_))))]),_:1},8,["class"])],2)):Be("v-if",!0),le("header",{class:$([b(d).e("header"),{"show-close":b(l)}])},[Ne(C.$slots,"header",{},()=>[le("span",{role:"heading",class:$(b(d).e("title"))},rt(C.title),3)])],2),le("div",{class:$(b(d).e("body"))},[Ne(C.$slots,"default",{},()=>[le("span",null,rt(C.description),1)])],2),le("footer",{class:$(b(d).e("footer"))},[le("div",{class:$(b(d).b("indicators"))},[b(f).indicators?(F(),He(en(b(f).indicators),{key:0,current:b(a),total:b(o)},null,8,["current","total"])):(F(!0),ie(bt,{key:1},sn(b(o),(A,E)=>(F(),ie("span",{key:A,class:$([b(d).b("indicator"),E===b(a)?"is-active":""])},null,2))),128))],2),le("div",{class:$(b(d).b("buttons"))},[b(a)>0?(F(),He(b(Ur),rn({key:0,size:"small",type:b(u)},y(C.prevButtonProps),{onClick:S}),{default:ge(()=>{var A,E;return[Xt(rt((E=(A=C.prevButtonProps)==null?void 0:A.children)!=null?E:b(r)("el.tour.previous")),1)]}),_:1},16,["type"])):Be("v-if",!0),b(a)<=b(o)-1?(F(),He(b(Ur),rn({key:1,size:"small",type:b(u)==="primary"?"default":"primary"},y(C.nextButtonProps),{onClick:w}),{default:ge(()=>{var A,E;return[Xt(rt((E=(A=C.nextButtonProps)==null?void 0:A.children)!=null?E:b(a)===b(o)-1?b(r)("el.tour.finish"):b(r)("el.tour.next")),1)]}),_:1},16,["type"])):Be("v-if",!0)],2)],2)],64))}});var MK=ot(t2e,[["__file","step.vue"]]);const n2e=Ft(QEe,{TourStep:MK}),i2e=ki(MK),r2e=at({container:{type:Re([String,Object])},offset:{type:Number,default:0},bound:{type:Number,default:15},duration:{type:Number,default:300},marker:{type:Boolean,default:!0},type:{type:Re(String),default:"default"},direction:{type:Re(String),default:"vertical"}}),s2e={change:n=>xt(n),click:(n,e)=>n instanceof MouseEvent&&(xt(e)||Wn(e))},TK=Symbol("anchor"),nS=n=>{if(!wn||n==="")return null;if(xt(n))try{return document.querySelector(n)}catch{return null}return n};function a2e(n){let e=0;const t=(...i)=>{e&&Fh(e),e=Dd(()=>{n(...i),e=0})};return t.cancel=()=>{Fh(e),e=0},t}const o2e=ve({name:"ElAnchor"}),l2e=ve({...o2e,props:r2e,emits:s2e,setup(n,{expose:e,emit:t}){const i=n,r=X(""),s=X(null),a=X(null),o=X(),l={};let c=!1,u=0;const d=Ze("anchor"),f=N(()=>[d.b(),i.type==="underline"?d.m("underline"):"",d.m(i.direction)]),h=C=>{l[C.href]=C.el},p=C=>{delete l[C]},m=C=>{r.value!==C&&(r.value=C,t("change",C))};let v=null;const g=C=>{if(!o.value)return;const M=nS(C);if(!M)return;v&&v(),c=!0;const A=PB(M,o.value),E=fI(M,A),I=A.scrollHeight-A.clientHeight,P=Math.min(E-i.offset,I);v=Mle(o.value,u,P,i.duration,()=>{setTimeout(()=>{c=!1},20)})},_=C=>{C&&(m(C),g(C))},y=(C,M)=>{t("click",C,M),_(M)},S=a2e(()=>{o.value&&(u=DB(o.value));const C=w();c||Wn(C)||m(C)}),w=()=>{if(!o.value)return;const C=DB(o.value),M=[];for(const A of Object.keys(l)){const E=nS(A);if(!E)continue;const I=PB(E,o.value),P=fI(E,I);M.push({top:P-i.offset-i.bound,href:A})}M.sort((A,E)=>A.top-E.top);for(let A=0;A<M.length;A++){const E=M[A],I=M[A+1];if(A===0&&C===0)return"";if(E.top<=C&&(!I||I.top>C))return E.href}},x=()=>{const C=nS(i.container);!C||rM(C)?o.value=window:o.value=C};Kn(o,"scroll",S);const T=N(()=>{if(!s.value||!a.value||!r.value)return{};const C=l[r.value];if(!C)return{};const M=s.value.getBoundingClientRect(),A=a.value.getBoundingClientRect(),E=C.getBoundingClientRect();return i.direction==="horizontal"?{left:`${E.left-M.left}px`,width:`${E.width}px`,opacity:1}:{top:`${E.top-M.top+(E.height-A.height)/2}px`,opacity:1}});return Ht(()=>{x();const C=decodeURIComponent(window.location.hash);nS(C)?_(C):S()}),We(()=>i.container,()=>{x()}),un(TK,{ns:d,direction:i.direction,currentAnchor:r,addLink:h,removeLink:p,handleClick:y}),e({scrollTo:_}),(C,M)=>(F(),ie("div",{ref_key:"anchorRef",ref:s,class:$(b(f))},[C.marker?(F(),ie("div",{key:0,ref_key:"markerRef",ref:a,class:$(b(d).e("marker")),style:Ct(b(T))},null,6)):Be("v-if",!0),le("div",{class:$(b(d).e("list"))},[Ne(C.$slots,"default")],2)],2))}});var c2e=ot(l2e,[["__file","anchor.vue"]]);const u2e=at({title:String,href:String}),d2e=ve({name:"ElAnchorLink"}),f2e=ve({...d2e,props:u2e,setup(n){const e=n,t=X(null),{ns:i,direction:r,currentAnchor:s,addLink:a,removeLink:o,handleClick:l}=mt(TK),c=N(()=>[i.e("link"),i.is("active",s.value===e.href)]),u=d=>{l(d,e.href)};return We(()=>e.href,(d,f)=>{Mt(()=>{f&&o(f),d&&a({href:d,el:t.value})})}),Ht(()=>{const{href:d}=e;d&&a({href:d,el:t.value})}),Un(()=>{const{href:d}=e;d&&o(d)}),(d,f)=>(F(),ie("div",{class:$(b(i).e("item"))},[le("a",{ref_key:"linkRef",ref:t,class:$(b(c)),href:d.href,onClick:u},[Ne(d.$slots,"default",{},()=>[Xt(rt(d.title),1)])],10,["href"]),d.$slots["sub-link"]&&b(r)==="vertical"?(F(),ie("div",{key:0,class:$(b(i).e("list"))},[Ne(d.$slots,"sub-link")],2)):Be("v-if",!0)],2))}});var AK=ot(f2e,[["__file","anchor-link.vue"]]);const h2e=Ft(c2e,{AnchorLink:AK}),p2e=ki(AK),m2e=at({direction:{type:Re(String),default:"horizontal"},options:{type:Re(Array),default:()=>[]},modelValue:{type:[String,Number,Boolean],default:void 0},block:Boolean,size:cr,disabled:Boolean,validateEvent:{type:Boolean,default:!0},id:String,name:String,...Zr(["ariaLabel"])}),v2e={[Kt]:n=>xt(n)||At(n)||ai(n),[jn]:n=>xt(n)||At(n)||ai(n)},g2e=ve({name:"ElSegmented"}),y2e=ve({...g2e,props:m2e,emits:v2e,setup(n,{emit:e}){const t=n,i=Ze("segmented"),r=Qr(),s=tr(),a=hs(),{formItem:o}=fs(),{inputId:l,isLabeledByFormItem:c}=Fo(t,{formItemContext:o}),u=X(null),d=Xoe(),f=Nn({isInit:!1,width:0,height:0,translateX:0,translateY:0,focusVisible:!1}),h=M=>{const A=p(M);e(Kt,A),e(jn,A)},p=M=>Yt(M)?M.value:M,m=M=>Yt(M)?M.label:M,v=M=>!!(a.value||Yt(M)&&M.disabled),g=M=>t.modelValue===p(M),_=M=>t.options.find(A=>p(A)===M),y=M=>[i.e("item"),i.is("selected",g(M)),i.is("disabled",v(M))],S=()=>{if(!u.value)return;const M=u.value.querySelector(".is-selected"),A=u.value.querySelector(".is-selected input");if(!M||!A){f.width=0,f.height=0,f.translateX=0,f.translateY=0,f.focusVisible=!1;return}const E=M.getBoundingClientRect();f.isInit=!0,t.direction==="vertical"?(f.height=E.height,f.translateY=M.offsetTop):(f.width=E.width,f.translateX=M.offsetLeft);try{f.focusVisible=A.matches(":focus-visible")}catch{}},w=N(()=>[i.b(),i.m(s.value),i.is("block",t.block)]),x=N(()=>({width:t.direction==="vertical"?"100%":`${f.width}px`,height:t.direction==="vertical"?`${f.height}px`:"100%",transform:t.direction==="vertical"?`translateY(${f.translateY}px)`:`translateX(${f.translateX}px)`,display:f.isInit?"block":"none"})),T=N(()=>[i.e("item-selected"),i.is("disabled",v(_(t.modelValue))),i.is("focus-visible",f.focusVisible)]),C=N(()=>t.name||r.value);return Ti(u,S),We(d,S),We(()=>t.modelValue,()=>{var M;S(),t.validateEvent&&((M=o==null?void 0:o.validate)==null||M.call(o,"change").catch(A=>void 0))},{flush:"post"}),(M,A)=>M.options.length?(F(),ie("div",{key:0,id:b(l),ref_key:"segmentedRef",ref:u,class:$(b(w)),role:"radiogroup","aria-label":b(c)?void 0:M.ariaLabel||"segmented","aria-labelledby":b(c)?b(o).labelId:void 0},[le("div",{class:$([b(i).e("group"),b(i).m(t.direction)])},[le("div",{style:Ct(b(x)),class:$(b(T))},null,6),(F(!0),ie(bt,null,sn(M.options,(E,I)=>(F(),ie("label",{key:I,class:$(y(E))},[le("input",{class:$(b(i).e("item-input")),type:"radio",name:b(C),disabled:v(E),checked:g(E),onChange:P=>h(E)},null,42,["name","disabled","checked","onChange"]),le("div",{class:$(b(i).e("item-label"))},[Ne(M.$slots,"default",{item:E},()=>[Xt(rt(m(E)),1)])],2)],2))),128))],2)],10,["id","aria-label","aria-labelledby"])):Be("v-if",!0)}});var _2e=ot(y2e,[["__file","segmented.vue"]]);const b2e=Ft(_2e),S2e=(n,e)=>{const t=n.toLowerCase();return(e.label||e.value).toLowerCase().includes(t)},w2e=(n,e,t)=>{const{selectionEnd:i}=n;if(i===null)return;const r=n.value,s=As(e);let a=-1,o;for(let l=i-1;l>=0;--l){const c=r[l];if(c===t||c===`
`||c==="\r"){a=l;continue}if(s.includes(c)){const u=a===-1?i:a;o={pattern:r.slice(l+1,u),start:l+1,end:u,prefix:c,prefixIndex:l,splitIndex:a,selectionEnd:i};break}}return o},x2e=(n,e={debug:!1,useSelectionEnd:!1})=>{const t=n.selectionStart!==null?n.selectionStart:0,i=n.selectionEnd!==null?n.selectionEnd:0,r=e.useSelectionEnd?i:t,s=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];if(e.debug){const f=document.querySelector("#input-textarea-caret-position-mirror-div");f!=null&&f.parentNode&&f.parentNode.removeChild(f)}const a=document.createElement("div");a.id="input-textarea-caret-position-mirror-div",document.body.appendChild(a);const o=a.style,l=window.getComputedStyle(n),c=n.nodeName==="INPUT";o.whiteSpace=c?"nowrap":"pre-wrap",c||(o.wordWrap="break-word"),o.position="absolute",e.debug||(o.visibility="hidden"),s.forEach(f=>{if(c&&f==="lineHeight")if(l.boxSizing==="border-box"){const h=Number.parseInt(l.height),p=Number.parseInt(l.paddingTop)+Number.parseInt(l.paddingBottom)+Number.parseInt(l.borderTopWidth)+Number.parseInt(l.borderBottomWidth),m=p+Number.parseInt(l.lineHeight);h>m?o.lineHeight=`${h-p}px`:h===m?o.lineHeight=l.lineHeight:o.lineHeight="0"}else o.lineHeight=l.height;else o[f]=l[f]}),uM()?n.scrollHeight>Number.parseInt(l.height)&&(o.overflowY="scroll"):o.overflow="hidden",a.textContent=n.value.slice(0,Math.max(0,r)),c&&a.textContent&&(a.textContent=a.textContent.replace(/\s/g,""));const u=document.createElement("span");u.textContent=n.value.slice(Math.max(0,r))||".",u.style.position="relative",u.style.left=`${-n.scrollLeft}px`,u.style.top=`${-n.scrollTop}px`,a.appendChild(u);const d={top:u.offsetTop+Number.parseInt(l.borderTopWidth),left:u.offsetLeft+Number.parseInt(l.borderLeftWidth),height:Number.parseInt(l.fontSize)*1.5};return e.debug?u.style.backgroundColor="#aaa":document.body.removeChild(a),d.left>=n.clientWidth&&(d.left=n.clientWidth),d},C2e=at({...IL,options:{type:Re(Array),default:()=>[]},prefix:{type:Re([String,Array]),default:"@",validator:n=>xt(n)?n.length===1:n.every(e=>xt(e)&&e.length===1)},split:{type:String,default:" ",validator:n=>n.length===1},filterOption:{type:Re([Boolean,Function]),default:()=>S2e,validator:n=>n===!1?!0:Tt(n)},placement:{type:Re(String),default:"bottom"},showArrow:Boolean,offset:{type:Number,default:0},whole:Boolean,checkIsWhole:{type:Re(Function)},modelValue:String,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Re(Object),default:()=>({})}}),M2e={[Kt]:n=>xt(n),search:(n,e)=>xt(n)&&xt(e),select:(n,e)=>xt(n.value)&&xt(e),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent},T2e=at({options:{type:Re(Array),default:()=>[]},loading:Boolean,disabled:Boolean,contentId:String,ariaLabel:String}),A2e={select:n=>xt(n.value)},E2e=ve({name:"ElMentionDropdown"}),I2e=ve({...E2e,props:T2e,emits:A2e,setup(n,{expose:e,emit:t}){const i=n,r=Ze("mention"),{t:s}=xn(),a=X(-1),o=X(),l=X(),c=X(),u=(y,S)=>[r.be("dropdown","item"),r.is("hovering",a.value===S),r.is("disabled",y.disabled||i.disabled)],d=y=>{y.disabled||i.disabled||t("select",y)},f=y=>{a.value=y},h=N(()=>i.disabled||i.options.every(y=>y.disabled)),p=N(()=>i.options[a.value]),m=()=>{p.value&&t("select",p.value)},v=y=>{const{options:S}=i;if(S.length===0||h.value)return;y==="next"?(a.value++,a.value===S.length&&(a.value=0)):y==="prev"&&(a.value--,a.value<0&&(a.value=S.length-1));const w=S[a.value];if(w.disabled){v(y);return}Mt(()=>g(w))},g=y=>{var S,w,x,T;const{options:C}=i,M=C.findIndex(E=>E.value===y.value),A=(S=l.value)==null?void 0:S[M];if(A){const E=(x=(w=c.value)==null?void 0:w.querySelector)==null?void 0:x.call(w,`.${r.be("dropdown","wrap")}`);E&&SL(E,A)}(T=o.value)==null||T.handleScroll()};return We(()=>i.options,()=>{h.value||i.options.length===0?a.value=-1:a.value=0},{immediate:!0}),e({hoveringIndex:a,navigateOptions:v,selectHoverOption:m,hoverOption:p}),(y,S)=>(F(),ie("div",{ref_key:"dropdownRef",ref:c,class:$(b(r).b("dropdown"))},[y.$slots.header?(F(),ie("div",{key:0,class:$(b(r).be("dropdown","header"))},[Ne(y.$slots,"header")],2)):Be("v-if",!0),Wt(oe(b(ic),{id:y.contentId,ref_key:"scrollbarRef",ref:o,tag:"ul","wrap-class":b(r).be("dropdown","wrap"),"view-class":b(r).be("dropdown","list"),role:"listbox","aria-label":y.ariaLabel,"aria-orientation":"vertical"},{default:ge(()=>[(F(!0),ie(bt,null,sn(y.options,(w,x)=>(F(),ie("li",{id:`${y.contentId}-${x}`,ref_for:!0,ref_key:"optionRefs",ref:l,key:x,class:$(u(w,x)),role:"option","aria-disabled":w.disabled||y.disabled||void 0,"aria-selected":a.value===x,onMousemove:T=>f(x),onClick:Pt(T=>d(w),["stop"])},[Ne(y.$slots,"label",{item:w,index:x},()=>{var T;return[le("span",null,rt((T=w.label)!=null?T:w.value),1)]})],42,["id","aria-disabled","aria-selected","onMousemove","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class","aria-label"]),[[Dn,y.options.length>0&&!y.loading]]),y.loading?(F(),ie("div",{key:1,class:$(b(r).be("dropdown","loading"))},[Ne(y.$slots,"loading",{},()=>[Xt(rt(b(s)("el.mention.loading")),1)])],2)):Be("v-if",!0),y.$slots.footer?(F(),ie("div",{key:2,class:$(b(r).be("dropdown","footer"))},[Ne(y.$slots,"footer")],2)):Be("v-if",!0)],2))}});var R2e=ot(I2e,[["__file","mention-dropdown.vue"]]);const P2e=ve({name:"ElMention",inheritAttrs:!1}),D2e=ve({...P2e,props:C2e,emits:M2e,setup(n,{expose:e,emit:t}){const i=n,r=N(()=>rl(i,Object.keys(IL))),s=Ze("mention"),a=hs(),o=Qr(),l=X(),c=X(),u=X(),d=X(!1),f=X(),h=X(),p=N(()=>i.showArrow?i.placement:`${i.placement}-start`),m=N(()=>i.showArrow?["bottom","top"]:["bottom-start","top-start"]),v=N(()=>{const{filterOption:I,options:P}=i;return!h.value||!I?P:P.filter(D=>I(h.value.pattern,D))}),g=N(()=>d.value&&(!!v.value.length||i.loading)),_=N(()=>{var I;return`${o.value}-${(I=u.value)==null?void 0:I.hoveringIndex}`}),y=I=>{t("update:modelValue",I),M()},S=I=>{var P,D,L,R;if(!(!("code"in I)||(P=l.value)!=null&&P.isComposing))switch(I.code){case ut.left:case ut.right:M();break;case ut.up:case ut.down:if(!d.value)return;I.preventDefault(),(D=u.value)==null||D.navigateOptions(I.code===ut.up?"prev":"next");break;case ut.enter:case ut.numpadEnter:if(!d.value)return;I.preventDefault(),(L=u.value)!=null&&L.hoverOption?(R=u.value)==null||R.selectHoverOption():d.value=!1;break;case ut.esc:if(!d.value)return;I.preventDefault(),d.value=!1;break;case ut.backspace:if(i.whole&&h.value){const{splitIndex:B,selectionEnd:k,pattern:O,prefixIndex:U,prefix:G}=h.value,q=C();if(!q)return;const W=q.value,Y=i.options.find(Z=>Z.value===O);if((Tt(i.checkIsWhole)?i.checkIsWhole(O,G):Y)&&B!==-1&&B+1===k){I.preventDefault();const Z=W.slice(0,U)+W.slice(B+1);t(Kt,Z);const ee=U;Mt(()=>{q.selectionStart=ee,q.selectionEnd=ee,E()})}}}},{wrapperRef:w}=ef(l,{beforeFocus(){return a.value},afterFocus(){M()},beforeBlur(I){var P;return(P=c.value)==null?void 0:P.isFocusInsideContent(I)},afterBlur(){d.value=!1}}),x=()=>{M()},T=I=>{if(!h.value)return;const P=C();if(!P)return;const D=P.value,{split:L}=i,R=D.slice(h.value.end),B=R.startsWith(L),k=`${I.value}${B?"":L}`,O=D.slice(0,h.value.start)+k+R;t(Kt,O),t("select",I,h.value.prefix);const U=h.value.start+k.length+(B?1:0);Mt(()=>{P.selectionStart=U,P.selectionEnd=U,P.focus(),E()})},C=()=>{var I,P;return i.type==="textarea"?(I=l.value)==null?void 0:I.textarea:(P=l.value)==null?void 0:P.input},M=()=>{setTimeout(()=>{A(),E(),Mt(()=>{var I;return(I=c.value)==null?void 0:I.updatePopper()})},0)},A=()=>{const I=C();if(!I)return;const P=x2e(I),D=I.getBoundingClientRect(),L=l.value.$el.getBoundingClientRect();f.value={position:"absolute",width:0,height:`${P.height}px`,left:`${P.left+D.left-L.left}px`,top:`${P.top+D.top-L.top}px`}},E=()=>{const I=C();if(document.activeElement!==I){d.value=!1;return}const{prefix:P,split:D}=i;if(h.value=w2e(I,P,D),h.value&&h.value.splitIndex===-1){d.value=!0,t("search",h.value.pattern,h.value.prefix);return}d.value=!1};return e({input:l,tooltip:c,dropdownVisible:g}),(I,P)=>(F(),ie("div",{ref_key:"wrapperRef",ref:w,class:$(b(s).b())},[oe(b(Rs),rn(rn(b(r),I.$attrs),{ref_key:"elInputRef",ref:l,"model-value":I.modelValue,disabled:b(a),role:b(g)?"combobox":void 0,"aria-activedescendant":b(g)?b(_)||"":void 0,"aria-controls":b(g)?b(o):void 0,"aria-expanded":b(g)||void 0,"aria-label":I.ariaLabel,"aria-autocomplete":b(g)?"none":void 0,"aria-haspopup":b(g)?"listbox":void 0,onInput:y,onKeydown:S,onMousedown:x}),Ro({_:2},[sn(I.$slots,(D,L)=>({name:L,fn:ge(R=>[Ne(I.$slots,L,nl(Id(R)))])}))]),1040,["model-value","disabled","role","aria-activedescendant","aria-controls","aria-expanded","aria-label","aria-autocomplete","aria-haspopup"]),oe(b(us),{ref_key:"tooltipRef",ref:c,visible:b(g),"popper-class":[b(s).e("popper"),I.popperClass],"popper-options":I.popperOptions,placement:b(p),"fallback-placements":b(m),effect:"light",pure:"",offset:I.offset,"show-arrow":I.showArrow},{default:ge(()=>[le("div",{style:Ct(f.value)},null,4)]),content:ge(()=>{var D;return[oe(R2e,{ref_key:"dropdownRef",ref:u,options:b(v),disabled:b(a),loading:I.loading,"content-id":b(o),"aria-label":I.ariaLabel,onSelect:T,onClick:Pt((D=l.value)==null?void 0:D.focus,["stop"])},Ro({_:2},[sn(I.$slots,(L,R)=>({name:R,fn:ge(B=>[Ne(I.$slots,R,nl(Id(B)))])}))]),1032,["options","disabled","loading","content-id","aria-label","onClick"])]}),_:3},8,["visible","popper-class","popper-options","placement","fallback-placements","offset","show-arrow"])],2))}});var L2e=ot(D2e,[["__file","mention.vue"]]);const k2e=Ft(L2e);var O2e=[Rle,iue,jfe,SMe,nhe,che,vW,She,whe,Ur,xW,fpe,gpe,kpe,Ope,Ome,WW,Hme,ko,Ype,NW,Kme,lve,cve,pM,Ove,Fve,jve,Qve,Zve,Jve,ege,d0e,S0e,w0e,k0e,C9,G0e,Lye,kye,Oye,L9,k_e,O_e,_t,K_e,N9,Rs,B9,lbe,pbe,kbe,Obe,Nbe,Bbe,$be,kSe,USe,YSe,dW,K9,$W,lme,ome,swe,uwe,gwe,ic,zh,vx,pSe,jwe,s1e,a1e,M1e,R1e,s7,H1e,j1e,Q1e,ixe,dCe,fCe,bMe,NMe,BMe,Iv,VMe,Pge,XMe,JMe,eTe,us,iAe,vAe,Rx,OAe,ZAe,SEe,PEe,n2e,i2e,h2e,p2e,b2e,k2e];const co="ElInfiniteScroll",N2e=50,B2e=200,F2e=0,z2e={delay:{type:Number,default:B2e},distance:{type:Number,default:F2e},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},F3=(n,e)=>Object.entries(z2e).reduce((t,[i,r])=>{var s,a;const{type:o,default:l}=r,c=n.getAttribute(`infinite-scroll-${i}`);let u=(a=(s=e[c])!=null?s:c)!=null?a:l;return u=u==="false"?!1:u,u=o(u),t[i]=Number.isNaN(u)?l:u,t},{}),EK=n=>{const{observer:e}=n[co];e&&(e.disconnect(),delete n[co].observer)},U2e=(n,e)=>{const{container:t,containerEl:i,instance:r,observer:s,lastScrollTop:a}=n[co],{disabled:o,distance:l}=F3(n,r),{clientHeight:c,scrollHeight:u,scrollTop:d}=i,f=d-a;if(n[co].lastScrollTop=d,s||o||f<0)return;let h=!1;if(t===n)h=u-(c+d)<=l;else{const{clientTop:p,scrollHeight:m}=n,v=fI(n,i);h=d+c>=v+p+m-l}h&&e.call(r)};function NT(n,e){const{containerEl:t,instance:i}=n[co],{disabled:r}=F3(n,i);r||t.clientHeight===0||(t.scrollHeight<=t.clientHeight?e.call(i):EK(n))}const H2e={async mounted(n,e){const{instance:t,value:i}=e;Tt(i)||_r(co,"'v-infinite-scroll' binding value must be a function"),await Mt();const{delay:r,immediate:s}=F3(n,t),a=bL(n,!0),o=a===window?document.documentElement:a,l=xh(U2e.bind(null,n,i),r);if(a){if(n[co]={instance:t,container:a,containerEl:o,delay:r,cb:i,onScroll:l,lastScrollTop:o.scrollTop},s){const c=new MutationObserver(xh(NT.bind(null,n,i),N2e));n[co].observer=c,c.observe(n,{childList:!0,subtree:!0}),NT(n,i)}a.addEventListener("scroll",l)}},unmounted(n){if(!n[co])return;const{container:e,onScroll:t}=n[co];e==null||e.removeEventListener("scroll",t),EK(n)},async updated(n){if(!n[co])await Mt();else{const{containerEl:e,cb:t,observer:i}=n[co];e.clientHeight&&i&&NT(n,t)}}},eR=H2e;eR.install=n=>{n.directive("InfiniteScroll",eR)};const V2e=eR;function $2e(n){let e;const t=X(!1),i=Nn({...n,originalPosition:"",originalOverflow:"",visible:!1});function r(f){i.text=f}function s(){const f=i.parent,h=d.ns;if(!f.vLoadingAddClassList){let p=f.getAttribute("loading-number");p=Number.parseInt(p)-1,p?f.setAttribute("loading-number",p.toString()):(Ls(f,h.bm("parent","relative")),f.removeAttribute("loading-number")),Ls(f,h.bm("parent","hidden"))}a(),u.unmount()}function a(){var f,h;(h=(f=d.$el)==null?void 0:f.parentNode)==null||h.removeChild(d.$el)}function o(){var f;n.beforeClose&&!n.beforeClose()||(t.value=!0,clearTimeout(e),e=setTimeout(l,400),i.visible=!1,(f=n.closed)==null||f.call(n))}function l(){if(!t.value)return;const f=i.parent;t.value=!1,f.vLoadingAddClassList=void 0,s()}const c=ve({name:"ElLoading",setup(f,{expose:h}){const{ns:p,zIndex:m}=oM("loading");return h({ns:p,zIndex:m}),()=>{const v=i.spinner||i.svg,g=wt("svg",{class:"circular",viewBox:i.svgViewBox?i.svgViewBox:"0 0 50 50",...v?{innerHTML:v}:{}},[wt("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),_=i.text?wt("p",{class:p.b("text")},[i.text]):void 0;return wt(yr,{name:p.b("fade"),onAfterLeave:l},{default:ge(()=>[Wt(oe("div",{style:{backgroundColor:i.background||""},class:[p.b("mask"),i.customClass,i.fullscreen?"is-fullscreen":""]},[wt("div",{class:p.b("spinner")},[g,_])]),[[Dn,i.visible]])])})}}}),u=I8(c),d=u.mount(document.createElement("div"));return{...Mr(i),setText:r,removeElLoadingChild:a,close:o,handleAfterLeave:l,vm:d,get $el(){return d.$el}}}let iS;const tR=function(n={}){if(!wn)return;const e=G2e(n);if(e.fullscreen&&iS)return iS;const t=$2e({...e,closed:()=>{var r;(r=e.closed)==null||r.call(e),e.fullscreen&&(iS=void 0)}});W2e(e,e.parent,t),w4(e,e.parent,t),e.parent.vLoadingAddClassList=()=>w4(e,e.parent,t);let i=e.parent.getAttribute("loading-number");return i?i=`${Number.parseInt(i)+1}`:i="1",e.parent.setAttribute("loading-number",i),e.parent.appendChild(t.$el),Mt(()=>t.visible.value=e.visible),e.fullscreen&&(iS=t),t},G2e=n=>{var e,t,i,r;let s;return xt(n.target)?s=(e=document.querySelector(n.target))!=null?e:document.body:s=n.target||document.body,{parent:s===document.body||n.body?document.body:s,background:n.background||"",svg:n.svg||"",svgViewBox:n.svgViewBox||"",spinner:n.spinner||!1,text:n.text||"",fullscreen:s===document.body&&((t=n.fullscreen)!=null?t:!0),lock:(i=n.lock)!=null?i:!1,customClass:n.customClass||"",visible:(r=n.visible)!=null?r:!0,beforeClose:n.beforeClose,closed:n.closed,target:s}},W2e=async(n,e,t)=>{const{nextZIndex:i}=t.vm.zIndex||t.vm._.exposed.zIndex,r={};if(n.fullscreen)t.originalPosition.value=Fc(document.body,"position"),t.originalOverflow.value=Fc(document.body,"overflow"),r.zIndex=i();else if(n.parent===document.body){t.originalPosition.value=Fc(document.body,"position"),await Mt();for(const s of["top","left"]){const a=s==="top"?"scrollTop":"scrollLeft";r[s]=`${n.target.getBoundingClientRect()[s]+document.body[a]+document.documentElement[a]-Number.parseInt(Fc(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])r[s]=`${n.target.getBoundingClientRect()[s]}px`}else t.originalPosition.value=Fc(e,"position");for(const[s,a]of Object.entries(r))t.$el.style[s]=a},w4=(n,e,t)=>{const i=t.vm.ns||t.vm._.exposed.ns;["absolute","fixed","sticky"].includes(t.originalPosition.value)?Ls(e,i.bm("parent","relative")):_o(e,i.bm("parent","relative")),n.fullscreen&&n.lock?_o(e,i.bm("parent","hidden")):Ls(e,i.bm("parent","hidden"))},S1=Symbol("ElLoading"),x4=(n,e)=>{var t,i,r,s;const a=e.instance,o=f=>Yt(e.value)?e.value[f]:void 0,l=f=>{const h=xt(f)&&(a==null?void 0:a[f])||f;return h&&X(h)},c=f=>l(o(f)||n.getAttribute(`element-loading-${jd(f)}`)),u=(t=o("fullscreen"))!=null?t:e.modifiers.fullscreen,d={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:u,target:(i=o("target"))!=null?i:u?void 0:n,body:(r=o("body"))!=null?r:e.modifiers.body,lock:(s=o("lock"))!=null?s:e.modifiers.lock};n[S1]={options:d,instance:tR(d)}},K2e=(n,e)=>{for(const t of Object.keys(e))fi(e[t])&&(e[t].value=n[t])},C4={mounted(n,e){e.value&&x4(n,e)},updated(n,e){const t=n[S1];e.oldValue!==e.value&&(e.value&&!e.oldValue?x4(n,e):e.value&&e.oldValue?Yt(e.value)&&K2e(e.value,t.options):t==null||t.instance.close())},unmounted(n){var e;(e=n[S1])==null||e.instance.close(),n[S1]=null}},q2e={install(n){n.directive("loading",C4),n.config.globalProperties.$loading=tR},directive:C4,service:tR},IK=["success","info","warning","error"],Ss=Li({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:wn?document.body:void 0}),X2e=at({customClass:{type:String,default:Ss.customClass},center:{type:Boolean,default:Ss.center},dangerouslyUseHTMLString:{type:Boolean,default:Ss.dangerouslyUseHTMLString},duration:{type:Number,default:Ss.duration},icon:{type:Zn,default:Ss.icon},id:{type:String,default:Ss.id},message:{type:Re([String,Object,Function]),default:Ss.message},onClose:{type:Re(Function),default:Ss.onClose},showClose:{type:Boolean,default:Ss.showClose},type:{type:String,values:IK,default:Ss.type},plain:{type:Boolean,default:Ss.plain},offset:{type:Number,default:Ss.offset},zIndex:{type:Number,default:Ss.zIndex},grouping:{type:Boolean,default:Ss.grouping},repeatNum:{type:Number,default:Ss.repeatNum}}),Y2e={destroy:()=>!0},sl=z6([]),j2e=n=>{const e=sl.findIndex(r=>r.id===n),t=sl[e];let i;return e>0&&(i=sl[e-1]),{current:t,prev:i}},Q2e=n=>{const{prev:e}=j2e(n);return e?e.vm.exposed.bottom.value:0},Z2e=(n,e)=>sl.findIndex(i=>i.id===n)>0?16:e,J2e=ve({name:"ElMessage"}),eIe=ve({...J2e,props:X2e,emits:Y2e,setup(n,{expose:e}){const t=n,{Close:i}=EL,{ns:r,zIndex:s}=oM("message"),{currentZIndex:a,nextZIndex:o}=s,l=X(),c=X(!1),u=X(0);let d;const f=N(()=>t.type?t.type==="error"?"danger":t.type:"info"),h=N(()=>{const T=t.type;return{[r.bm("icon",T)]:T&&Nd[T]}}),p=N(()=>t.icon||Nd[t.type]||""),m=N(()=>Q2e(t.id)),v=N(()=>Z2e(t.id,t.offset)+m.value),g=N(()=>u.value+v.value),_=N(()=>({top:`${v.value}px`,zIndex:a.value}));function y(){t.duration!==0&&({stop:d}=Bh(()=>{w()},t.duration))}function S(){d==null||d()}function w(){c.value=!1}function x({code:T}){T===ut.esc&&w()}return Ht(()=>{y(),o(),c.value=!0}),We(()=>t.repeatNum,()=>{S(),y()}),Kn(document,"keydown",x),Ti(l,()=>{u.value=l.value.getBoundingClientRect().height}),e({visible:c,bottom:g,close:w}),(T,C)=>(F(),He(yr,{name:b(r).b("fade"),onBeforeLeave:T.onClose,onAfterLeave:M=>T.$emit("destroy"),persisted:""},{default:ge(()=>[Wt(le("div",{id:T.id,ref_key:"messageRef",ref:l,class:$([b(r).b(),{[b(r).m(T.type)]:T.type},b(r).is("center",T.center),b(r).is("closable",T.showClose),b(r).is("plain",T.plain),T.customClass]),style:Ct(b(_)),role:"alert",onMouseenter:S,onMouseleave:y},[T.repeatNum>1?(F(),He(b(vW),{key:0,value:T.repeatNum,type:b(f),class:$(b(r).e("badge"))},null,8,["value","type","class"])):Be("v-if",!0),b(p)?(F(),He(b(_t),{key:1,class:$([b(r).e("icon"),b(h)])},{default:ge(()=>[(F(),He(en(b(p))))]),_:1},8,["class"])):Be("v-if",!0),Ne(T.$slots,"default",{},()=>[T.dangerouslyUseHTMLString?(F(),ie(bt,{key:1},[Be(" Caution here, message could've been compromised, never use user's input as message "),le("p",{class:$(b(r).e("content")),innerHTML:T.message},null,10,["innerHTML"])],2112)):(F(),ie("p",{key:0,class:$(b(r).e("content"))},rt(T.message),3))]),T.showClose?(F(),He(b(_t),{key:2,class:$(b(r).e("closeBtn")),onClick:Pt(w,["stop"])},{default:ge(()=>[oe(b(i))]),_:1},8,["class","onClick"])):Be("v-if",!0)],46,["id"]),[[Dn,c.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var tIe=ot(eIe,[["__file","message.vue"]]);let nIe=1;const RK=n=>{const e=!n||xt(n)||Pi(n)||Tt(n)?{message:n}:n,t={...Ss,...e};if(!t.appendTo)t.appendTo=document.body;else if(xt(t.appendTo)){let i=document.querySelector(t.appendTo);za(i)||(i=document.body),t.appendTo=i}return ai(Jo.grouping)&&!t.grouping&&(t.grouping=Jo.grouping),At(Jo.duration)&&t.duration===3e3&&(t.duration=Jo.duration),At(Jo.offset)&&t.offset===16&&(t.offset=Jo.offset),ai(Jo.showClose)&&!t.showClose&&(t.showClose=Jo.showClose),t},iIe=n=>{const e=sl.indexOf(n);if(e===-1)return;sl.splice(e,1);const{handler:t}=n;t.close()},rIe=({appendTo:n,...e},t)=>{const i=`message_${nIe++}`,r=e.onClose,s=document.createElement("div"),a={...e,id:i,onClose:()=>{r==null||r(),iIe(u)},onDestroy:()=>{Rd(null,s)}},o=oe(tIe,a,Tt(a.message)||Pi(a.message)?{default:Tt(a.message)?a.message:()=>a.message}:null);o.appContext=t||Ov._context,Rd(o,s),n.appendChild(s.firstElementChild);const l=o.component,u={id:i,vnode:o,vm:l,handler:{close:()=>{l.exposed.visible.value=!1}},props:o.component.props};return u},Ov=(n={},e)=>{if(!wn)return{close:()=>{}};const t=RK(n);if(t.grouping&&sl.length){const r=sl.find(({vnode:s})=>{var a;return((a=s.props)==null?void 0:a.message)===t.message});if(r)return r.props.repeatNum+=1,r.props.type=t.type,r.handler}if(At(Jo.max)&&sl.length>=Jo.max)return{close:()=>{}};const i=rIe(t,e);return sl.push(i),i.handler};IK.forEach(n=>{Ov[n]=(e={},t)=>{const i=RK(e);return Ov({...i,type:n},t)}});function sIe(n){for(const e of sl)(!n||n===e.props.type)&&e.handler.close()}Ov.closeAll=sIe;Ov._context=null;const aIe=NG(Ov,"$message"),nR="_trap-focus-children",dh=[],M4=n=>{if(dh.length===0)return;const e=dh[dh.length-1][nR];if(e.length>0&&n.code===ut.tab){if(e.length===1){n.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const t=n.shiftKey,i=n.target===e[0],r=n.target===e[e.length-1];i&&t&&(n.preventDefault(),e[e.length-1].focus()),r&&!t&&(n.preventDefault(),e[0].focus())}},oIe={beforeMount(n){n[nR]=BB(n),dh.push(n),dh.length<=1&&document.addEventListener("keydown",M4)},updated(n){Mt(()=>{n[nR]=BB(n)})},unmounted(){dh.shift(),dh.length===0&&document.removeEventListener("keydown",M4)}},lIe=ve({name:"ElMessageBox",directives:{TrapFocus:oIe},components:{ElButton:Ur,ElFocusTrap:mg,ElInput:Rs,ElOverlay:i3,ElIcon:_t,...EL},inheritAttrs:!1,props:{buttonSize:{type:String,validator:o7},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(n,{emit:e}){const{locale:t,zIndex:i,ns:r,size:s}=oM("message-box",N(()=>n.buttonSize)),{t:a}=t,{nextZIndex:o}=i,l=X(!1),c=Nn({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:Wc(ql),cancelButtonLoadingIcon:Wc(ql),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:o()}),u=N(()=>{const R=c.type;return{[r.bm("icon",R)]:R&&Nd[R]}}),d=Qr(),f=Qr(),h=N(()=>c.icon||Nd[c.type]||""),p=N(()=>!!c.message),m=X(),v=X(),g=X(),_=X(),y=X(),S=N(()=>c.confirmButtonClass);We(()=>c.inputValue,async R=>{await Mt(),n.boxType==="prompt"&&R!==null&&I()},{immediate:!0}),We(()=>l.value,R=>{var B,k;R&&(n.boxType!=="prompt"&&(c.autofocus?g.value=(k=(B=y.value)==null?void 0:B.$el)!=null?k:m.value:g.value=m.value),c.zIndex=o()),n.boxType==="prompt"&&(R?Mt().then(()=>{var O;_.value&&_.value.$el&&(c.autofocus?g.value=(O=P())!=null?O:m.value:g.value=m.value)}):(c.editorErrorMessage="",c.validateError=!1))});const w=N(()=>n.draggable),x=N(()=>n.overflow);b9(m,v,w,x),Ht(async()=>{await Mt(),n.closeOnHashChange&&window.addEventListener("hashchange",T)}),Un(()=>{n.closeOnHashChange&&window.removeEventListener("hashchange",T)});function T(){l.value&&(l.value=!1,Mt(()=>{c.action&&e("action",c.action)}))}const C=()=>{n.closeOnClickModal&&E(c.distinguishCancelAndClose?"close":"cancel")},M=n3(C),A=R=>{if(c.inputType!=="textarea")return R.preventDefault(),E("confirm")},E=R=>{var B;n.boxType==="prompt"&&R==="confirm"&&!I()||(c.action=R,c.beforeClose?(B=c.beforeClose)==null||B.call(c,R,c,T):T())},I=()=>{if(n.boxType==="prompt"){const R=c.inputPattern;if(R&&!R.test(c.inputValue||""))return c.editorErrorMessage=c.inputErrorMessage||a("el.messagebox.error"),c.validateError=!0,!1;const B=c.inputValidator;if(Tt(B)){const k=B(c.inputValue);if(k===!1)return c.editorErrorMessage=c.inputErrorMessage||a("el.messagebox.error"),c.validateError=!0,!1;if(xt(k))return c.editorErrorMessage=k,c.validateError=!0,!1}}return c.editorErrorMessage="",c.validateError=!1,!0},P=()=>{const R=_.value.$refs;return R.input||R.textarea},D=()=>{E("close")},L=()=>{n.closeOnPressEscape&&D()};return n.lockScroll&&r3(l),{...Mr(c),ns:r,overlayEvent:M,visible:l,hasMessage:p,typeClass:u,contentId:d,inputId:f,btnSize:s,iconComponent:h,confirmButtonClasses:S,rootRef:m,focusStartRef:g,headerRef:v,inputRef:_,confirmRef:y,doClose:T,handleClose:D,onCloseRequested:L,handleWrapperClick:C,handleInputEnter:A,handleAction:E,t:a}}});function cIe(n,e,t,i,r,s){const a=yt("el-icon"),o=yt("close"),l=yt("el-input"),c=yt("el-button"),u=yt("el-focus-trap"),d=yt("el-overlay");return F(),He(yr,{name:"fade-in-linear",onAfterLeave:f=>n.$emit("vanish"),persisted:""},{default:ge(()=>[Wt(oe(d,{"z-index":n.zIndex,"overlay-class":[n.ns.is("message-box"),n.modalClass],mask:n.modal},{default:ge(()=>[le("div",{role:"dialog","aria-label":n.title,"aria-modal":"true","aria-describedby":n.showInput?void 0:n.contentId,class:$(`${n.ns.namespace.value}-overlay-message-box`),onClick:n.overlayEvent.onClick,onMousedown:n.overlayEvent.onMousedown,onMouseup:n.overlayEvent.onMouseup},[oe(u,{loop:"",trapped:n.visible,"focus-trap-el":n.rootRef,"focus-start-el":n.focusStartRef,onReleaseRequested:n.onCloseRequested},{default:ge(()=>[le("div",{ref:"rootRef",class:$([n.ns.b(),n.customClass,n.ns.is("draggable",n.draggable),{[n.ns.m("center")]:n.center}]),style:Ct(n.customStyle),tabindex:"-1",onClick:Pt(()=>{},["stop"])},[n.title!==null&&n.title!==void 0?(F(),ie("div",{key:0,ref:"headerRef",class:$([n.ns.e("header"),{"show-close":n.showClose}])},[le("div",{class:$(n.ns.e("title"))},[n.iconComponent&&n.center?(F(),He(a,{key:0,class:$([n.ns.e("status"),n.typeClass])},{default:ge(()=>[(F(),He(en(n.iconComponent)))]),_:1},8,["class"])):Be("v-if",!0),le("span",null,rt(n.title),1)],2),n.showClose?(F(),ie("button",{key:0,type:"button",class:$(n.ns.e("headerbtn")),"aria-label":n.t("el.messagebox.close"),onClick:f=>n.handleAction(n.distinguishCancelAndClose?"close":"cancel"),onKeydown:ri(Pt(f=>n.handleAction(n.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[oe(a,{class:$(n.ns.e("close"))},{default:ge(()=>[oe(o)]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):Be("v-if",!0)],2)):Be("v-if",!0),le("div",{id:n.contentId,class:$(n.ns.e("content"))},[le("div",{class:$(n.ns.e("container"))},[n.iconComponent&&!n.center&&n.hasMessage?(F(),He(a,{key:0,class:$([n.ns.e("status"),n.typeClass])},{default:ge(()=>[(F(),He(en(n.iconComponent)))]),_:1},8,["class"])):Be("v-if",!0),n.hasMessage?(F(),ie("div",{key:1,class:$(n.ns.e("message"))},[Ne(n.$slots,"default",{},()=>[n.dangerouslyUseHTMLString?(F(),He(en(n.showInput?"label":"p"),{key:1,for:n.showInput?n.inputId:void 0,innerHTML:n.message},null,8,["for","innerHTML"])):(F(),He(en(n.showInput?"label":"p"),{key:0,for:n.showInput?n.inputId:void 0},{default:ge(()=>[Xt(rt(n.dangerouslyUseHTMLString?"":n.message),1)]),_:1},8,["for"]))])],2)):Be("v-if",!0)],2),Wt(le("div",{class:$(n.ns.e("input"))},[oe(l,{id:n.inputId,ref:"inputRef",modelValue:n.inputValue,"onUpdate:modelValue":f=>n.inputValue=f,type:n.inputType,placeholder:n.inputPlaceholder,"aria-invalid":n.validateError,class:$({invalid:n.validateError}),onKeydown:ri(n.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),le("div",{class:$(n.ns.e("errormsg")),style:Ct({visibility:n.editorErrorMessage?"visible":"hidden"})},rt(n.editorErrorMessage),7)],2),[[Dn,n.showInput]])],10,["id"]),le("div",{class:$(n.ns.e("btns"))},[n.showCancelButton?(F(),He(c,{key:0,loading:n.cancelButtonLoading,"loading-icon":n.cancelButtonLoadingIcon,class:$([n.cancelButtonClass]),round:n.roundButton,size:n.btnSize,onClick:f=>n.handleAction("cancel"),onKeydown:ri(Pt(f=>n.handleAction("cancel"),["prevent"]),["enter"])},{default:ge(()=>[Xt(rt(n.cancelButtonText||n.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):Be("v-if",!0),Wt(oe(c,{ref:"confirmRef",type:"primary",loading:n.confirmButtonLoading,"loading-icon":n.confirmButtonLoadingIcon,class:$([n.confirmButtonClasses]),round:n.roundButton,disabled:n.confirmButtonDisabled,size:n.btnSize,onClick:f=>n.handleAction("confirm"),onKeydown:ri(Pt(f=>n.handleAction("confirm"),["prevent"]),["enter"])},{default:ge(()=>[Xt(rt(n.confirmButtonText||n.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[Dn,n.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[Dn,n.visible]])]),_:3},8,["onAfterLeave"])}var uIe=ot(lIe,[["render",cIe],["__file","index.vue"]]);const p_=new Map,dIe=n=>{let e=document.body;return n.appendTo&&(xt(n.appendTo)&&(e=document.querySelector(n.appendTo)),za(n.appendTo)&&(e=n.appendTo),za(e)||(e=document.body)),e},fIe=(n,e,t=null)=>{const i=oe(uIe,n,Tt(n.message)||Pi(n.message)?{default:Tt(n.message)?n.message:()=>n.message}:null);return i.appContext=t,Rd(i,e),dIe(n).appendChild(e.firstElementChild),i.component},hIe=()=>document.createElement("div"),pIe=(n,e)=>{const t=hIe();n.onVanish=()=>{Rd(null,t),p_.delete(r)},n.onAction=s=>{const a=p_.get(r);let o;n.showInput?o={value:r.inputValue,action:s}:o=s,n.callback?n.callback(o,i.proxy):s==="cancel"||s==="close"?n.distinguishCancelAndClose&&s!=="cancel"?a.reject("close"):a.reject("cancel"):a.resolve(o)};const i=fIe(n,t,e),r=i.proxy;for(const s in n)Cn(n,s)&&!Cn(r.$props,s)&&(r[s]=n[s]);return r.visible=!0,r};function _g(n,e=null){if(!wn)return Promise.reject();let t;return xt(n)||Pi(n)?n={message:n}:t=n.callback,new Promise((i,r)=>{const s=pIe(n,e??_g._context);p_.set(s,{options:n,callback:t,resolve:i,reject:r})})}const mIe=["alert","confirm","prompt"],vIe={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};mIe.forEach(n=>{_g[n]=gIe(n)});function gIe(n){return(e,t,i,r)=>{let s="";return Yt(t)?(i=t,s=""):Wn(t)?s="":s=t,_g(Object.assign({title:s,message:e,type:"",...vIe[n]},i,{boxType:n}),r)}}_g.close=()=>{p_.forEach((n,e)=>{e.doClose()}),p_.clear()};_g._context=null;const Qu=_g;Qu.install=n=>{Qu._context=n._context,n.config.globalProperties.$msgbox=Qu,n.config.globalProperties.$messageBox=Qu,n.config.globalProperties.$alert=Qu.alert,n.config.globalProperties.$confirm=Qu.confirm,n.config.globalProperties.$prompt=Qu.prompt};const yIe=Qu,PK=["success","info","warning","error"],_Ie=at({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:Zn},id:{type:String,default:""},message:{type:Re([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:Re(Function),default:()=>{}},onClose:{type:Re(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...PK,""],default:""},zIndex:Number}),bIe={destroy:()=>!0},SIe=ve({name:"ElNotification"}),wIe=ve({...SIe,props:_Ie,emits:bIe,setup(n,{expose:e}){const t=n,{ns:i,zIndex:r}=oM("notification"),{nextZIndex:s,currentZIndex:a}=r,{Close:o}=AL,l=X(!1);let c;const u=N(()=>{const y=t.type;return y&&Nd[t.type]?i.m(y):""}),d=N(()=>t.type&&Nd[t.type]||t.icon),f=N(()=>t.position.endsWith("right")?"right":"left"),h=N(()=>t.position.startsWith("top")?"top":"bottom"),p=N(()=>{var y;return{[h.value]:`${t.offset}px`,zIndex:(y=t.zIndex)!=null?y:a.value}});function m(){t.duration>0&&({stop:c}=Bh(()=>{l.value&&g()},t.duration))}function v(){c==null||c()}function g(){l.value=!1}function _({code:y}){y===ut.delete||y===ut.backspace?v():y===ut.esc?l.value&&g():m()}return Ht(()=>{m(),s(),l.value=!0}),Kn(document,"keydown",_),e({visible:l,close:g}),(y,S)=>(F(),He(yr,{name:b(i).b("fade"),onBeforeLeave:y.onClose,onAfterLeave:w=>y.$emit("destroy"),persisted:""},{default:ge(()=>[Wt(le("div",{id:y.id,class:$([b(i).b(),y.customClass,b(f)]),style:Ct(b(p)),role:"alert",onMouseenter:v,onMouseleave:m,onClick:y.onClick},[b(d)?(F(),He(b(_t),{key:0,class:$([b(i).e("icon"),b(u)])},{default:ge(()=>[(F(),He(en(b(d))))]),_:1},8,["class"])):Be("v-if",!0),le("div",{class:$(b(i).e("group"))},[le("h2",{class:$(b(i).e("title")),textContent:rt(y.title)},null,10,["textContent"]),Wt(le("div",{class:$(b(i).e("content")),style:Ct(y.title?void 0:{margin:0})},[Ne(y.$slots,"default",{},()=>[y.dangerouslyUseHTMLString?(F(),ie(bt,{key:1},[Be(" Caution here, message could've been compromised, never use user's input as message "),le("p",{innerHTML:y.message},null,8,["innerHTML"])],2112)):(F(),ie("p",{key:0},rt(y.message),1))])],6),[[Dn,y.message]]),y.showClose?(F(),He(b(_t),{key:0,class:$(b(i).e("closeBtn")),onClick:Pt(g,["stop"])},{default:ge(()=>[oe(b(o))]),_:1},8,["class","onClick"])):Be("v-if",!0)],2)],46,["id","onClick"]),[[Dn,l.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var xIe=ot(wIe,[["__file","notification.vue"]]);const Px={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},iR=16;let CIe=1;const Nv=function(n={},e){if(!wn)return{close:()=>{}};(xt(n)||Pi(n))&&(n={message:n});const t=n.position||"top-right";let i=n.offset||0;Px[t].forEach(({vm:u})=>{var d;i+=(((d=u.el)==null?void 0:d.offsetHeight)||0)+iR}),i+=iR;const r=`notification_${CIe++}`,s=n.onClose,a={...n,offset:i,id:r,onClose:()=>{MIe(r,t,s)}};let o=document.body;za(n.appendTo)?o=n.appendTo:xt(n.appendTo)&&(o=document.querySelector(n.appendTo)),za(o)||(o=document.body);const l=document.createElement("div"),c=oe(xIe,a,Tt(a.message)?a.message:Pi(a.message)?()=>a.message:null);return c.appContext=Wn(e)?Nv._context:e,c.props.onDestroy=()=>{Rd(null,l)},Rd(c,l),Px[t].push({vm:c}),o.appendChild(l.firstElementChild),{close:()=>{c.component.exposed.visible.value=!1}}};PK.forEach(n=>{Nv[n]=(e={},t)=>((xt(e)||Pi(e))&&(e={message:e}),Nv({...e,type:n},t))});function MIe(n,e,t){const i=Px[e],r=i.findIndex(({vm:c})=>{var u;return((u=c.component)==null?void 0:u.props.id)===n});if(r===-1)return;const{vm:s}=i[r];if(!s)return;t==null||t(s);const a=s.el.offsetHeight,o=e.split("-")[0];i.splice(r,1);const l=i.length;if(!(l<1))for(let c=r;c<l;c++){const{el:u,component:d}=i[c].vm,f=Number.parseInt(u.style[o],10)-a-iR;d.props.offset=f}}function TIe(){for(const n of Object.values(Px))n.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})}Nv.closeAll=TIe;Nv._context=null;const AIe=NG(Nv,"$notify");var EIe=[V2e,q2e,aIe,yIe,AIe,W9],IIe=ble([...O2e,...EIe]);const RIe=["href"],PIe=ve({__name:"Header",setup(n){const e={name:"Template",link:"#"};return(t,i)=>{const r=yt("el-menu-item"),s=yt("el-menu"),a=yt("el-affix");return F(),He(a,{offset:0,style:{width:"100%"}},{default:ge(()=>[oe(s,{"default-active":"1",class:"el-menu-demo",mode:"horizontal",ellipsis:!1},{default:ge(()=>[oe(r,{index:"1"},{default:ge(()=>[oe(b(_t),{size:20},{default:ge(()=>[oe(b(TL))]),_:1}),le("a",{href:e.link},rt(e.name),9,RIe)]),_:1})]),_:1})]),_:1})}}}),sc=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t},DIe=sc(PIe,[["__scopeId","data-v-ef56c920"]]),LIe={class:"paper-title"},kIe=["href"],OIe={class:"author"},NIe={key:0,class:"name_sup"},BIe=["href"],FIe={class:"btn-text"},zIe="./logo.png",T4="CDFormer: Cross-Domain Few-Shot Object Detection Transformer Against Feature Confusion",UIe="#000000",A4=" (ICME2025)",HIe="#42B883",VIe="#444444",$Ie=ve({__name:"Title",setup(n){const e=[{name:"Boyuan Meng",icon:"./icon/junyaohu.jpg",homepage:"https://junyaohu.github.io/",address_flag:"1"}],t=[" [ICME 2025] "," Our code is coming soon"],i=[{disabled:!0,name:"Paper",component:tI},{disabled:!0,name:"",component:tI},{disabled:!1,name:"Code",component:lce},{disabled:!1,name:"Demo",component:vce},{disabled:!0,name:"Poster",component:Mce},{disabled:!0,name:"Slide",component:ice}];return(r,s)=>{const a=yt("el-alert"),o=yt("el-col"),l=yt("el-row"),c=yt("el-image"),u=yt("el-avatar"),d=yt("el-button");return F(),ie("div",null,[oe(l,{justify:"center"},{default:ge(()=>[oe(o,{span:24},{default:ge(()=>[oe(a,{title:" This template is still under development.",type:"success"})]),_:1})]),_:1}),(F(),He(l,{key:0,justify:"center"},{default:ge(()=>[oe(c,{src:zIe,class:"logo",fit:"cover"})]),_:1})),oe(l,{justify:"center"},{default:ge(()=>[oe(o,{span:20},{default:ge(()=>[le("h1",LIe,[T4?(F(),ie("span",{key:0,style:Ct({color:UIe})},rt(T4),4)):Be("",!0),A4?(F(),ie("span",{key:1,style:Ct({color:HIe})},rt(A4),4)):Be("",!0)])]),_:1})]),_:1}),oe(l,{justify:"center"},{default:ge(()=>[(F(),ie(bt,null,sn(e,f=>le("a",{href:f.homepage},[oe(d,{class:"title-button",type:"primary",text:""},{default:ge(()=>[f.icon?(F(),He(u,{key:0,size:40,src:f.icon},null,8,["src"])):Be("",!0),le("span",OIe,[Xt(rt(f.name),1),f.address_flag?(F(),ie("sup",NIe,rt(f.address_flag),1)):Be("",!0)])]),_:2},1024)],8,kIe)),64))]),_:1}),(F(),ie(bt,null,sn(t,f=>oe(l,{justify:"center",class:"emphasis"},{default:ge(()=>[Xt(rt(f),1)]),_:2},1024)),64)),oe(l,{justify:"center",style:{"margin-bottom":"20px"}},{default:ge(()=>[oe(o,{span:20},{default:ge(()=>[oe(l,{justify:"center"},{default:ge(()=>[(F(),ie(bt,null,sn(i,f=>le("a",{href:f.link},[oe(d,{class:"guidance-button",size:"default",color:VIe,disabled:f.disabled,round:""},{default:ge(()=>[oe(b(_t),{size:18},{default:ge(()=>[(F(),He(en(f.component)))]),_:2},1024),le("span",FIe,rt(f.name),1)]),_:2},1032,["disabled"])],8,BIe)),64))]),_:1})]),_:1})]),_:1})])}}}),GIe=sc($Ie,[["__scopeId","data-v-b25903f7"]]);function oy(n,e,t){const{children:i}=e;return delete e.children,arguments.length>2&&(e.key=t),wt(n,e,i)}function E4(n){const e={h1:"h1",p:"p",...n.components};return oy(bt,{children:[oy(e.h1,{children:"Abstract"}),`
`,oy(e.p,{children:"Aute amet minim mollit nisi adipisicing cupidatat. Duis sit tempor consequat ea nisi qui consequat deserunt. Officia duis sit mollit dolor officia occaecat. Minim aute excepteur nostrud adipisicing magna nisi amet. Laborum aliqua ut ex cillum qui ipsum tempor officia sunt. Reprehenderit est ex sit fugiat laborum reprehenderit proident deserunt sint pariatur cillum voluptate irure. Voluptate laboris velit veniam exercitation sunt eiusmod occaecat velit fugiat ad."})]})}function WIe(n={}){const{wrapper:e}=n.components||{};return e?oy(e,{...n,children:oy(E4,{...n})}):E4(n)}const KIe={__name:"Abstract",setup(n){return(e,t)=>{const i=yt("el-divider"),r=yt("el-col"),s=yt("el-row");return F(),ie("div",null,[oe(i),oe(s,{justify:"center"},{default:ge(()=>[oe(r,{xs:24,sm:20,md:16,lg:12,xl:12},{default:ge(()=>[oe(b(WIe))]),_:1})]),_:1})])}}};function I4(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function z3(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof n[t]>"u"?n[t]=e[t]:I4(e[t])&&I4(n[t])&&Object.keys(e[t]).length>0&&z3(n[t],e[t])})}const DK={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function $l(){const n=typeof document<"u"?document:{};return z3(n,DK),n}const qIe={document:DK,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function qa(){const n=typeof window<"u"?window:{};return z3(n,qIe),n}function XIe(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function rR(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function Dx(){return Date.now()}function YIe(n){const e=qa();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function jIe(n,e){e===void 0&&(e="x");const t=qa();let i,r,s;const a=YIe(n);return t.WebKitCSSMatrix?(r=a.transform||a.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(o=>o.replace(",",".")).join(", ")),s=new t.WebKitCSSMatrix(r==="none"?"":r)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=s.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?r=s.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function rS(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function QIe(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function La(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!QIe(i)){const r=Object.keys(Object(i)).filter(s=>e.indexOf(s)<0);for(let s=0,a=r.length;s<a;s+=1){const o=r[s],l=Object.getOwnPropertyDescriptor(i,o);l!==void 0&&l.enumerable&&(rS(n[o])&&rS(i[o])?i[o].__swiper__?n[o]=i[o]:La(n[o],i[o]):!rS(n[o])&&rS(i[o])?(n[o]={},i[o].__swiper__?n[o]=i[o]:La(n[o],i[o])):n[o]=i[o])}}}return n}function sS(n,e,t){n.style.setProperty(e,t)}function LK(n){let{swiper:e,targetPosition:t,side:i}=n;const r=qa(),s=-e.translate;let a=null,o;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const c=t>s?"next":"prev",u=(f,h)=>c==="next"&&f>=h||c==="prev"&&f<=h,d=()=>{o=new Date().getTime(),a===null&&(a=o);const f=Math.max(Math.min((o-a)/l,1),0),h=.5-Math.cos(f*Math.PI)/2;let p=s+h*(t-s);if(u(p,t)&&(p=t),e.wrapperEl.scrollTo({[i]:p}),u(p,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:p})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(d)};d()}function Nl(n,e){return e===void 0&&(e=""),[...n.children].filter(t=>t.matches(e))}function kK(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:[e]),t}function ZIe(n,e){const t=[];for(;n.previousElementSibling;){const i=n.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function JIe(n,e){const t=[];for(;n.nextElementSibling;){const i=n.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function od(n,e){return qa().getComputedStyle(n,null).getPropertyValue(e)}function Lx(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function OK(n,e){const t=[];let i=n.parentElement;for(;i;)e?i.matches(e)&&t.push(i):t.push(i),i=i.parentElement;return t}function sR(n,e,t){const i=qa();return t?n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):n.offsetWidth}let BT;function eRe(){const n=qa(),e=$l();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function NK(){return BT||(BT=eRe()),BT}let FT;function tRe(n){let{userAgent:e}=n===void 0?{}:n;const t=NK(),i=qa(),r=i.navigator.platform,s=e||i.navigator.userAgent,a={ios:!1,android:!1},o=i.screen.width,l=i.screen.height,c=s.match(/(Android);?[\s\/]+([\d.]+)?/);let u=s.match(/(iPad).*OS\s([\d_]+)/);const d=s.match(/(iPod)(.*OS\s([\d_]+))?/),f=!u&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h=r==="Win32";let p=r==="MacIntel";const m=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&p&&t.touch&&m.indexOf(`${o}x${l}`)>=0&&(u=s.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),p=!1),c&&!h&&(a.os="android",a.android=!0),(u||f||d)&&(a.os="ios",a.ios=!0),a}function nRe(n){return n===void 0&&(n={}),FT||(FT=tRe(n)),FT}let zT;function iRe(){const n=qa();let e=!1;function t(){const i=n.navigator.userAgent.toLowerCase();return i.indexOf("safari")>=0&&i.indexOf("chrome")<0&&i.indexOf("android")<0}if(t()){const i=String(n.navigator.userAgent);if(i.includes("Version/")){const[r,s]=i.split("Version/")[1].split(" ")[0].split(".").map(a=>Number(a));e=r<16||r===16&&s<2}}return{isSafari:e||t(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent)}}function rRe(){return zT||(zT=iRe()),zT}function sRe(n){let{swiper:e,on:t,emit:i}=n;const r=qa();let s=null,a=null;const o=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(d=>{a=r.requestAnimationFrame(()=>{const{width:f,height:h}=e;let p=f,m=h;d.forEach(v=>{let{contentBoxSize:g,contentRect:_,target:y}=v;y&&y!==e.el||(p=_?_.width:(g[0]||g).inlineSize,m=_?_.height:(g[0]||g).blockSize)}),(p!==f||m!==h)&&o()})}),s.observe(e.el))},c=()=>{a&&r.cancelAnimationFrame(a),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},u=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",o),r.addEventListener("orientationchange",u)}),t("destroy",()=>{c(),r.removeEventListener("resize",o),r.removeEventListener("orientationchange",u)})}function aRe(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s=[],a=qa(),o=function(u,d){d===void 0&&(d={});const f=a.MutationObserver||a.WebkitMutationObserver,h=new f(p=>{if(e.__preventObserver__)return;if(p.length===1){r("observerUpdate",p[0]);return}const m=function(){r("observerUpdate",p[0])};a.requestAnimationFrame?a.requestAnimationFrame(m):a.setTimeout(m,0)});h.observe(u,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:typeof d.childList>"u"?!0:d.childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),s.push(h)},l=()=>{if(e.params.observer){if(e.params.observeParents){const u=OK(e.hostEl);for(let d=0;d<u.length;d+=1)o(u[d])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},c=()=>{s.forEach(u=>{u.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",c)}var oRe={on(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=t?"unshift":"push";return n.split(" ").forEach(s=>{i.eventsListeners[s]||(i.eventsListeners[s]=[]),i.eventsListeners[s][r](e)}),i},once(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(){i.off(n,r),r.__emitterProxy&&delete r.__emitterProxy;for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];e.apply(i,a)}return r.__emitterProxy=e,i.on(n,r,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[i](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((r,s)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[i].splice(s,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,i;for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),i=n):(e=s[0].events,t=s[0].data,i=s[0].context||n),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(c=>{c.apply(i,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(c=>{c.apply(i,t)})}),n}};function lRe(){const n=this;let e,t;const i=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(od(i,"padding-left")||0,10)-parseInt(od(i,"padding-right")||0,10),t=t-parseInt(od(i,"padding-top")||0,10)-parseInt(od(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function cRe(){const n=this;function e(E){return n.isHorizontal()?E:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[E]}function t(E,I){return parseFloat(E.getPropertyValue(e(I))||0)}const i=n.params,{wrapperEl:r,slidesEl:s,size:a,rtlTranslate:o,wrongRTL:l}=n,c=n.virtual&&i.virtual.enabled,u=c?n.virtual.slides.length:n.slides.length,d=Nl(s,`.${n.params.slideClass}, swiper-slide`),f=c?n.virtual.slides.length:d.length;let h=[];const p=[],m=[];let v=i.slidesOffsetBefore;typeof v=="function"&&(v=i.slidesOffsetBefore.call(n));let g=i.slidesOffsetAfter;typeof g=="function"&&(g=i.slidesOffsetAfter.call(n));const _=n.snapGrid.length,y=n.slidesGrid.length;let S=i.spaceBetween,w=-v,x=0,T=0;if(typeof a>"u")return;typeof S=="string"&&S.indexOf("%")>=0?S=parseFloat(S.replace("%",""))/100*a:typeof S=="string"&&(S=parseFloat(S)),n.virtualSize=-S,d.forEach(E=>{o?E.style.marginLeft="":E.style.marginRight="",E.style.marginBottom="",E.style.marginTop=""}),i.centeredSlides&&i.cssMode&&(sS(r,"--swiper-centered-offset-before",""),sS(r,"--swiper-centered-offset-after",""));const C=i.grid&&i.grid.rows>1&&n.grid;C&&n.grid.initSlides(f);let M;const A=i.slidesPerView==="auto"&&i.breakpoints&&Object.keys(i.breakpoints).filter(E=>typeof i.breakpoints[E].slidesPerView<"u").length>0;for(let E=0;E<f;E+=1){M=0;let I;if(d[E]&&(I=d[E]),C&&n.grid.updateSlide(E,I,f,e),!(d[E]&&od(I,"display")==="none")){if(i.slidesPerView==="auto"){A&&(d[E].style[e("width")]="");const P=getComputedStyle(I),D=I.style.transform,L=I.style.webkitTransform;if(D&&(I.style.transform="none"),L&&(I.style.webkitTransform="none"),i.roundLengths)M=n.isHorizontal()?sR(I,"width",!0):sR(I,"height",!0);else{const R=t(P,"width"),B=t(P,"padding-left"),k=t(P,"padding-right"),O=t(P,"margin-left"),U=t(P,"margin-right"),G=P.getPropertyValue("box-sizing");if(G&&G==="border-box")M=R+O+U;else{const{clientWidth:q,offsetWidth:W}=I;M=R+B+k+O+U+(W-q)}}D&&(I.style.transform=D),L&&(I.style.webkitTransform=L),i.roundLengths&&(M=Math.floor(M))}else M=(a-(i.slidesPerView-1)*S)/i.slidesPerView,i.roundLengths&&(M=Math.floor(M)),d[E]&&(d[E].style[e("width")]=`${M}px`);d[E]&&(d[E].swiperSlideSize=M),m.push(M),i.centeredSlides?(w=w+M/2+x/2+S,x===0&&E!==0&&(w=w-a/2-S),E===0&&(w=w-a/2-S),Math.abs(w)<1/1e3&&(w=0),i.roundLengths&&(w=Math.floor(w)),T%i.slidesPerGroup===0&&h.push(w),p.push(w)):(i.roundLengths&&(w=Math.floor(w)),(T-Math.min(n.params.slidesPerGroupSkip,T))%n.params.slidesPerGroup===0&&h.push(w),p.push(w),w=w+M+S),n.virtualSize+=M+S,x=M,T+=1}}if(n.virtualSize=Math.max(n.virtualSize,a)+g,o&&l&&(i.effect==="slide"||i.effect==="coverflow")&&(r.style.width=`${n.virtualSize+S}px`),i.setWrapperSize&&(r.style[e("width")]=`${n.virtualSize+S}px`),C&&n.grid.updateWrapperSize(M,h,e),!i.centeredSlides){const E=[];for(let I=0;I<h.length;I+=1){let P=h[I];i.roundLengths&&(P=Math.floor(P)),h[I]<=n.virtualSize-a&&E.push(P)}h=E,Math.floor(n.virtualSize-a)-Math.floor(h[h.length-1])>1&&h.push(n.virtualSize-a)}if(c&&i.loop){const E=m[0]+S;if(i.slidesPerGroup>1){const I=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/i.slidesPerGroup),P=E*i.slidesPerGroup;for(let D=0;D<I;D+=1)h.push(h[h.length-1]+P)}for(let I=0;I<n.virtual.slidesBefore+n.virtual.slidesAfter;I+=1)i.slidesPerGroup===1&&h.push(h[h.length-1]+E),p.push(p[p.length-1]+E),n.virtualSize+=E}if(h.length===0&&(h=[0]),S!==0){const E=n.isHorizontal()&&o?"marginLeft":e("marginRight");d.filter((I,P)=>!i.cssMode||i.loop?!0:P!==d.length-1).forEach(I=>{I.style[E]=`${S}px`})}if(i.centeredSlides&&i.centeredSlidesBounds){let E=0;m.forEach(P=>{E+=P+(S||0)}),E-=S;const I=E-a;h=h.map(P=>P<=0?-v:P>I?I+g:P)}if(i.centerInsufficientSlides){let E=0;if(m.forEach(I=>{E+=I+(S||0)}),E-=S,E<a){const I=(a-E)/2;h.forEach((P,D)=>{h[D]=P-I}),p.forEach((P,D)=>{p[D]=P+I})}}if(Object.assign(n,{slides:d,snapGrid:h,slidesGrid:p,slidesSizesGrid:m}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){sS(r,"--swiper-centered-offset-before",`${-h[0]}px`),sS(r,"--swiper-centered-offset-after",`${n.size/2-m[m.length-1]/2}px`);const E=-n.snapGrid[0],I=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(P=>P+E),n.slidesGrid=n.slidesGrid.map(P=>P+I)}if(f!==u&&n.emit("slidesLengthChange"),h.length!==_&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),p.length!==y&&n.emit("slidesGridLengthChange"),i.watchSlidesProgress&&n.updateSlidesOffset(),!c&&!i.cssMode&&(i.effect==="slide"||i.effect==="fade")){const E=`${i.containerModifierClass}backface-hidden`,I=n.el.classList.contains(E);f<=i.maxBackfaceHiddenSlides?I||n.el.classList.add(E):I&&n.el.classList.remove(E)}}function uRe(n){const e=this,t=[],i=e.virtual&&e.params.virtual.enabled;let r=0,s;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const a=o=>i?e.slides[e.getSlideIndexByData(o)]:e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{t.push(o)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const o=e.activeIndex+s;if(o>e.slides.length&&!i)break;t.push(a(o))}else t.push(a(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){const o=t[s].offsetHeight;r=o>r?o:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function dRe(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(n.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-n.cssOverflowAdjustment()}function fRe(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:i,rtlTranslate:r,snapGrid:s}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-n;r&&(a=n),i.forEach(l=>{l.classList.remove(t.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=t.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:typeof o=="string"&&(o=parseFloat(o));for(let l=0;l<i.length;l+=1){const c=i[l];let u=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(u-=i[0].swiperSlideOffset);const d=(a+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+o),f=(a-s[0]+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+o),h=-(a-u),p=h+e.slidesSizesGrid[l];(h>=0&&h<e.size-1||p>1&&p<=e.size||h<=0&&p>=e.size)&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l),i[l].classList.add(t.slideVisibleClass)),c.progress=r?-d:d,c.originalProgress=r?-f:f}}function hRe(n){const e=this;if(typeof n>"u"){const u=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*u||0}const t=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:s,isEnd:a,progressLoop:o}=e;const l=s,c=a;if(i===0)r=0,s=!0,a=!0;else{r=(n-e.minTranslate())/i;const u=Math.abs(n-e.minTranslate())<1,d=Math.abs(n-e.maxTranslate())<1;s=u||r<=0,a=d||r>=1,u&&(r=0),d&&(r=1)}if(t.loop){const u=e.getSlideIndexByData(0),d=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[u],h=e.slidesGrid[d],p=e.slidesGrid[e.slidesGrid.length-1],m=Math.abs(n);m>=f?o=(m-f)/p:o=(m+p-h)/p,o>1&&(o-=1)}Object.assign(e,{progress:r,progressLoop:o,isBeginning:s,isEnd:a}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),s&&!l&&e.emit("reachBeginning toEdge"),a&&!c&&e.emit("reachEnd toEdge"),(l&&!s||c&&!a)&&e.emit("fromEdge"),e.emit("progress",r)}function pRe(){const n=this,{slides:e,params:t,slidesEl:i,activeIndex:r}=n,s=n.virtual&&t.virtual.enabled,a=l=>Nl(i,`.${t.slideClass}${l}, swiper-slide${l}`)[0];e.forEach(l=>{l.classList.remove(t.slideActiveClass,t.slideNextClass,t.slidePrevClass)});let o;if(s)if(t.loop){let l=r-n.virtual.slidesBefore;l<0&&(l=n.virtual.slides.length+l),l>=n.virtual.slides.length&&(l-=n.virtual.slides.length),o=a(`[data-swiper-slide-index="${l}"]`)}else o=a(`[data-swiper-slide-index="${r}"]`);else o=e[r];if(o){o.classList.add(t.slideActiveClass);let l=JIe(o,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!l&&(l=e[0]),l&&l.classList.add(t.slideNextClass);let c=ZIe(o,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!c===0&&(c=e[e.length-1]),c&&c.classList.add(t.slidePrevClass)}n.emitSlidesClasses()}const w1=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,i=e.closest(t());if(i){let r=i.querySelector(`.${n.params.lazyPreloaderClass}`);!r&&n.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},UT=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},aR=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const i=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),r=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const a=r,o=[a-e];o.push(...Array.from({length:e}).map((l,c)=>a+i+c)),n.slides.forEach((l,c)=>{o.includes(l.column)&&UT(n,c)});return}const s=r+i-1;if(n.params.rewind||n.params.loop)for(let a=r-e;a<=s+e;a+=1){const o=(a%t+t)%t;(o<r||o>s)&&UT(n,o)}else for(let a=Math.max(r-e,0);a<=Math.min(s+e,t-1);a+=1)a!==r&&(a>s||a<r)&&UT(n,a)};function mRe(n){const{slidesGrid:e,params:t}=n,i=n.rtlTranslate?n.translate:-n.translate;let r;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?i>=e[s]&&i<e[s+1]-(e[s+1]-e[s])/2?r=s:i>=e[s]&&i<e[s+1]&&(r=s+1):i>=e[s]&&(r=s);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function vRe(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:r,activeIndex:s,realIndex:a,snapIndex:o}=e;let l=n,c;const u=f=>{let h=f-e.virtual.slidesBefore;return h<0&&(h=e.virtual.slides.length+h),h>=e.virtual.slides.length&&(h-=e.virtual.slides.length),h};if(typeof l>"u"&&(l=mRe(e)),i.indexOf(t)>=0)c=i.indexOf(t);else{const f=Math.min(r.slidesPerGroupSkip,l);c=f+Math.floor((l-f)/r.slidesPerGroup)}if(c>=i.length&&(c=i.length-1),l===s){c!==o&&(e.snapIndex=c,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=u(l));return}let d;e.virtual&&r.virtual.enabled&&r.loop?d=u(l):e.slides[l]?d=parseInt(e.slides[l].getAttribute("data-swiper-slide-index")||l,10):d=l,Object.assign(e,{previousSnapIndex:o,snapIndex:c,previousRealIndex:a,realIndex:d,previousIndex:s,activeIndex:l}),e.initialized&&aR(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==d&&e.emit("realIndexChange"),e.emit("slideChange"))}function gRe(n,e){const t=this,i=t.params;let r=n.closest(`.${i.slideClass}, swiper-slide`);!r&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(o=>{!r&&o.matches&&o.matches(`.${i.slideClass}, swiper-slide`)&&(r=o)});let s=!1,a;if(r){for(let o=0;o<t.slides.length;o+=1)if(t.slides[o]===r){s=!0,a=o;break}}if(r&&s)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=a;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var yRe={updateSize:lRe,updateSlides:cRe,updateAutoHeight:uRe,updateSlidesOffset:dRe,updateSlidesProgress:fRe,updateProgress:hRe,updateSlidesClasses:pRe,updateActiveIndex:vRe,updateClickedSlide:gRe};function _Re(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:i,translate:r,wrapperEl:s}=e;if(t.virtualTranslate)return i?-r:r;if(t.cssMode)return r;let a=jIe(s,n);return a+=e.cssOverflowAdjustment(),i&&(a=-a),a||0}function bRe(n,e){const t=this,{rtlTranslate:i,params:r,wrapperEl:s,progress:a}=t;let o=0,l=0;const c=0;t.isHorizontal()?o=i?-n:n:l=n,r.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?o:l,r.cssMode?s[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-o:-l:r.virtualTranslate||(t.isHorizontal()?o-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),s.style.transform=`translate3d(${o}px, ${l}px, ${c}px)`);let u;const d=t.maxTranslate()-t.minTranslate();d===0?u=0:u=(n-t.minTranslate())/d,u!==a&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function SRe(){return-this.snapGrid[0]}function wRe(){return-this.snapGrid[this.snapGrid.length-1]}function xRe(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);const s=this,{params:a,wrapperEl:o}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const l=s.minTranslate(),c=s.maxTranslate();let u;if(i&&n>l?u=l:i&&n<c?u=c:u=n,s.updateProgress(u),a.cssMode){const d=s.isHorizontal();if(e===0)o[d?"scrollLeft":"scrollTop"]=-u;else{if(!s.support.smoothScroll)return LK({swiper:s,targetPosition:-u,side:d?"left":"top"}),!0;o.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(u),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(u),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(f){!s||s.destroyed||f.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,t&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var CRe={getTranslate:_Re,setTranslate:bRe,minTranslate:SRe,maxTranslate:wRe,translateTo:xRe};function MRe(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function BK(n){let{swiper:e,runCallbacks:t,direction:i,step:r}=n;const{activeIndex:s,previousIndex:a}=e;let o=i;if(o||(s>a?o="next":s<a?o="prev":o="reset"),e.emit(`transition${r}`),t&&s!==a){if(o==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),o==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function TRe(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),BK({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function ARe(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),BK({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var ERe={setTransition:MRe,transitionStart:TRe,transitionEnd:ARe};function IRe(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const s=this;let a=n;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:f,wrapperEl:h,enabled:p}=s;if(s.animating&&o.preventInteractionOnTransition||!p&&!i&&!r)return!1;const m=Math.min(s.params.slidesPerGroupSkip,a);let v=m+Math.floor((a-m)/s.params.slidesPerGroup);v>=l.length&&(v=l.length-1);const g=-l[v];if(o.normalizeSlideIndex)for(let y=0;y<c.length;y+=1){const S=-Math.floor(g*100),w=Math.floor(c[y]*100),x=Math.floor(c[y+1]*100);typeof c[y+1]<"u"?S>=w&&S<x-(x-w)/2?a=y:S>=w&&S<x&&(a=y+1):S>=w&&(a=y)}if(s.initialized&&a!==d&&(!s.allowSlideNext&&(f?g>s.translate&&g>s.minTranslate():g<s.translate&&g<s.minTranslate())||!s.allowSlidePrev&&g>s.translate&&g>s.maxTranslate()&&(d||0)!==a))return!1;a!==(u||0)&&t&&s.emit("beforeSlideChangeStart"),s.updateProgress(g);let _;if(a>d?_="next":a<d?_="prev":_="reset",f&&-g===s.translate||!f&&g===s.translate)return s.updateActiveIndex(a),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),o.effect!=="slide"&&s.setTranslate(g),_!=="reset"&&(s.transitionStart(t,_),s.transitionEnd(t,_)),!1;if(o.cssMode){const y=s.isHorizontal(),S=f?g:-g;if(e===0){const w=s.virtual&&s.params.virtual.enabled;w&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),w&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{h[y?"scrollLeft":"scrollTop"]=S})):h[y?"scrollLeft":"scrollTop"]=S,w&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return LK({swiper:s,targetPosition:S,side:y?"left":"top"}),!0;h.scrollTo({[y?"left":"top"]:S,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(g),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,i),s.transitionStart(t,_),e===0?s.transitionEnd(t,_):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(S){!s||s.destroyed||S.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(t,_))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function RRe(n,e,t,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const r=this;let s=n;return r.params.loop&&(r.virtual&&r.params.virtual.enabled?s=s+r.virtual.slidesBefore:s=r.getSlideIndexByData(s)),r.slideTo(s,e,t,i)}function PRe(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this,{enabled:r,params:s,animating:a}=i;if(!r)return i;let o=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(o=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<s.slidesPerGroupSkip?1:o,c=i.virtual&&s.virtual.enabled;if(s.loop){if(a&&!c&&s.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,n,e,t)}),!0}return s.rewind&&i.isEnd?i.slideTo(0,n,e,t):i.slideTo(i.activeIndex+l,n,e,t)}function DRe(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this,{params:r,snapGrid:s,slidesGrid:a,rtlTranslate:o,enabled:l,animating:c}=i;if(!l)return i;const u=i.virtual&&r.virtual.enabled;if(r.loop){if(c&&!u&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const d=o?i.translate:-i.translate;function f(g){return g<0?-Math.floor(Math.abs(g)):Math.floor(g)}const h=f(d),p=s.map(g=>f(g));let m=s[p.indexOf(h)-1];if(typeof m>"u"&&r.cssMode){let g;s.forEach((_,y)=>{h>=_&&(g=y)}),typeof g<"u"&&(m=s[g>0?g-1:g])}let v=0;if(typeof m<"u"&&(v=a.indexOf(m),v<0&&(v=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(v=v-i.slidesPerViewDynamic("previous",!0)+1,v=Math.max(v,0))),r.rewind&&i.isBeginning){const g=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(g,n,e,t)}else if(r.loop&&i.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(v,n,e,t)}),!0;return i.slideTo(v,n,e,t)}function LRe(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this;return i.slideTo(i.activeIndex,n,e,t)}function kRe(n,e,t,i){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0),i===void 0&&(i=.5);const r=this;let s=r.activeIndex;const a=Math.min(r.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[o]){const c=r.snapGrid[o],u=r.snapGrid[o+1];l-c>(u-c)*i&&(s+=r.params.slidesPerGroup)}else{const c=r.snapGrid[o-1],u=r.snapGrid[o];l-c<=(u-c)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,n,e,t)}function ORe(){const n=this,{params:e,slidesEl:t}=n,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let r=n.clickedIndex,s;const a=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;s=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<n.loopedSlides-i/2||r>n.slides.length-n.loopedSlides+i/2?(n.loopFix(),r=n.getSlideIndex(Nl(t,`${a}[data-swiper-slide-index="${s}"]`)[0]),rR(()=>{n.slideTo(r)})):n.slideTo(r):r>n.slides.length-i?(n.loopFix(),r=n.getSlideIndex(Nl(t,`${a}[data-swiper-slide-index="${s}"]`)[0]),rR(()=>{n.slideTo(r)})):n.slideTo(r)}else n.slideTo(r)}var NRe={slideTo:IRe,slideToLoop:RRe,slideNext:PRe,slidePrev:DRe,slideReset:LRe,slideToClosest:kRe,slideToClickedSlide:ORe};function BRe(n){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;Nl(i,`.${t.slideClass}, swiper-slide`).forEach((s,a)=>{s.setAttribute("data-swiper-slide-index",a)}),e.loopFix({slideRealIndex:n,direction:t.centeredSlides?void 0:"next"})}function FRe(n){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:r,activeSlideIndex:s,byController:a,byMousewheel:o}=n===void 0?{}:n;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:c,allowSlidePrev:u,allowSlideNext:d,slidesEl:f,params:h}=l;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&h.virtual.enabled){t&&(!h.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):h.centeredSlides&&l.snapIndex<h.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=u,l.allowSlideNext=d,l.emit("loopFix");return}const p=h.slidesPerView==="auto"?l.slidesPerViewDynamic():Math.ceil(parseFloat(h.slidesPerView,10));let m=h.loopedSlides||p;m%h.slidesPerGroup!==0&&(m+=h.slidesPerGroup-m%h.slidesPerGroup),l.loopedSlides=m;const v=[],g=[];let _=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(l.slides.filter(T=>T.classList.contains(h.slideActiveClass))[0]):_=s;const y=i==="next"||!i,S=i==="prev"||!i;let w=0,x=0;if(s<m){w=Math.max(m-s,h.slidesPerGroup);for(let T=0;T<m-s;T+=1){const C=T-Math.floor(T/c.length)*c.length;v.push(c.length-C-1)}}else if(s>l.slides.length-m*2){x=Math.max(s-(l.slides.length-m*2),h.slidesPerGroup);for(let T=0;T<x;T+=1){const C=T-Math.floor(T/c.length)*c.length;g.push(C)}}if(S&&v.forEach(T=>{l.slides[T].swiperLoopMoveDOM=!0,f.prepend(l.slides[T]),l.slides[T].swiperLoopMoveDOM=!1}),y&&g.forEach(T=>{l.slides[T].swiperLoopMoveDOM=!0,f.append(l.slides[T]),l.slides[T].swiperLoopMoveDOM=!1}),l.recalcSlides(),h.slidesPerView==="auto"&&l.updateSlides(),h.watchSlidesProgress&&l.updateSlidesOffset(),t){if(v.length>0&&S)if(typeof e>"u"){const T=l.slidesGrid[_],M=l.slidesGrid[_+w]-T;o?l.setTranslate(l.translate-M):(l.slideTo(_+w,0,!1,!0),r&&(l.touches[l.isHorizontal()?"startX":"startY"]+=M,l.touchEventsData.currentTranslate=l.translate))}else r&&(l.slideToLoop(e,0,!1,!0),l.touchEventsData.currentTranslate=l.translate);else if(g.length>0&&y)if(typeof e>"u"){const T=l.slidesGrid[_],M=l.slidesGrid[_-x]-T;o?l.setTranslate(l.translate-M):(l.slideTo(_-x,0,!1,!0),r&&(l.touches[l.isHorizontal()?"startX":"startY"]+=M,l.touchEventsData.currentTranslate=l.translate))}else l.slideToLoop(e,0,!1,!0)}if(l.allowSlidePrev=u,l.allowSlideNext=d,l.controller&&l.controller.control&&!a){const T={slideRealIndex:e,direction:i,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(C=>{!C.destroyed&&C.params.loop&&C.loopFix({...T,slideTo:C.params.slidesPerView===h.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...T,slideTo:l.controller.control.params.slidesPerView===h.slidesPerView?t:!1})}l.emit("loopFix")}function zRe(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const i=[];n.slides.forEach(r=>{const s=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[s]=r}),n.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{t.append(r)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var URe={loopCreate:BRe,loopFix:FRe,loopDestroy:zRe};function HRe(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function VRe(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var $Re={setGrabCursor:HRe,unsetGrabCursor:VRe};function GRe(n,e){e===void 0&&(e=this);function t(i){if(!i||i===$l()||i===qa())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(n);return!r&&!i.getRootNode?null:r||t(i.getRootNode().host)}return t(e)}function WRe(n){const e=this,t=$l(),i=qa(),r=e.touchEventsData;r.evCache.push(n);const{params:s,touches:a,enabled:o}=e;if(!o||!s.simulateTouch&&n.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=n;l.originalEvent&&(l=l.originalEvent);let c=l.target;if(s.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(c)||"which"in l&&l.which===3||"button"in l&&l.button>0||r.isTouched&&r.isMoved)return;const u=!!s.noSwipingClass&&s.noSwipingClass!=="",d=n.composedPath?n.composedPath():n.path;u&&l.target&&l.target.shadowRoot&&d&&(c=d[0]);const f=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,h=!!(l.target&&l.target.shadowRoot);if(s.noSwiping&&(h?GRe(f,c):c.closest(f))){e.allowClick=!0;return}if(s.swipeHandler&&!c.closest(s.swipeHandler))return;a.currentX=l.pageX,a.currentY=l.pageY;const p=a.currentX,m=a.currentY,v=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,g=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(v&&(p<=g||p>=i.innerWidth-g))if(v==="prevent")n.preventDefault();else return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=m,r.touchStartTime=Dx(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1);let _=!0;c.matches(r.focusableElements)&&(_=!1,c.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==c&&t.activeElement.blur();const y=_&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||y)&&!c.isContentEditable&&l.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function KRe(n){const e=$l(),t=this,i=t.touchEventsData,{params:r,touches:s,rtlTranslate:a,enabled:o}=t;if(!o||!r.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}const c=i.evCache.findIndex(T=>T.pointerId===l.pointerId);c>=0&&(i.evCache[c]=l);const u=i.evCache.length>1?i.evCache[0]:l,d=u.pageX,f=u.pageY;if(l.preventedByNestedSwiper){s.startX=d,s.startY=f;return}if(!t.allowTouchMove){l.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(s,{startX:d,startY:f,prevX:t.touches.currentX,prevY:t.touches.currentY,currentX:d,currentY:f}),i.touchStartTime=Dx());return}if(r.touchReleaseOnEdges&&!r.loop){if(t.isVertical()){if(f<s.startY&&t.translate<=t.maxTranslate()||f>s.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(d<s.startX&&t.translate<=t.maxTranslate()||d>s.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}if(i.allowTouchCallbacks&&t.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=d,s.currentY=f;const h=s.currentX-s.startX,p=s.currentY-s.startY;if(t.params.threshold&&Math.sqrt(h**2+p**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let T;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:h*h+p*p>=25&&(T=Math.atan2(Math.abs(p),Math.abs(h))*180/Math.PI,i.isScrolling=t.isHorizontal()?T>r.touchAngle:90-T>r.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling||t.zoom&&t.params.zoom&&t.params.zoom.enabled&&i.evCache.length>1){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation();let m=t.isHorizontal()?h:p,v=t.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;r.oneWayMovement&&(m=Math.abs(m)*(a?1:-1),v=Math.abs(v)*(a?1:-1)),s.diff=m,m*=r.touchRatio,a&&(m=-m,v=-v);const g=t.touchesDirection;t.swipeDirection=m>0?"prev":"next",t.touchesDirection=v>0?"prev":"next";const _=t.params.loop&&!r.cssMode,y=t.swipeDirection==="next"&&t.allowSlideNext||t.swipeDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(_&&y&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const T=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(T)}i.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let S;i.isMoved&&g!==t.touchesDirection&&_&&y&&Math.abs(m)>=1&&(t.loopFix({direction:t.swipeDirection,setTranslate:!0}),S=!0),t.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=m+i.startTranslate;let w=!0,x=r.resistanceRatio;if(r.touchReleaseOnEdges&&(x=0),m>0?(_&&y&&!S&&i.currentTranslate>(r.centeredSlides?t.minTranslate()-t.size/2:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(w=!1,r.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+m)**x))):m<0&&(_&&y&&!S&&i.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.size/2:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(w=!1,r.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-m)**x))),w&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(m)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function qRe(n){const e=this,t=e.touchEventsData,i=t.evCache.findIndex(y=>y.pointerId===n.pointerId);if(i>=0&&t.evCache.splice(i,1),["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&!(["pointercancel","contextmenu"].includes(n.type)&&(e.browser.isSafari||e.browser.isWebView)))return;const{params:r,touches:s,rtlTranslate:a,slidesGrid:o,enabled:l}=e;if(!l||!r.simulateTouch&&n.pointerType==="mouse")return;let c=n;if(c.originalEvent&&(c=c.originalEvent),t.allowTouchCallbacks&&e.emit("touchEnd",c),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&r.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}r.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const u=Dx(),d=u-t.touchStartTime;if(e.allowClick){const y=c.path||c.composedPath&&c.composedPath();e.updateClickedSlide(y&&y[0]||c.target,y),e.emit("tap click",c),d<300&&u-t.lastClickTime<300&&e.emit("doubleTap doubleClick",c)}if(t.lastClickTime=Dx(),rR(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||s.diff===0||t.currentTranslate===t.startTranslate){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let f;if(r.followFinger?f=a?e.translate:-e.translate:f=-t.currentTranslate,r.cssMode)return;if(r.freeMode&&r.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:f});return}let h=0,p=e.slidesSizesGrid[0];for(let y=0;y<o.length;y+=y<r.slidesPerGroupSkip?1:r.slidesPerGroup){const S=y<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;typeof o[y+S]<"u"?f>=o[y]&&f<o[y+S]&&(h=y,p=o[y+S]-o[y]):f>=o[y]&&(h=y,p=o[o.length-1]-o[o.length-2])}let m=null,v=null;r.rewind&&(e.isBeginning?v=r.virtual&&r.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(m=0));const g=(f-o[h])/p,_=h<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(d>r.longSwipesMs){if(!r.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(g>=r.longSwipesRatio?e.slideTo(r.rewind&&e.isEnd?m:h+_):e.slideTo(h)),e.swipeDirection==="prev"&&(g>1-r.longSwipesRatio?e.slideTo(h+_):v!==null&&g<0&&Math.abs(g)>r.longSwipesRatio?e.slideTo(v):e.slideTo(h))}else{if(!r.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(c.target===e.navigation.nextEl||c.target===e.navigation.prevEl)?c.target===e.navigation.nextEl?e.slideTo(h+_):e.slideTo(h):(e.swipeDirection==="next"&&e.slideTo(m!==null?m:h+_),e.swipeDirection==="prev"&&e.slideTo(v!==null?v:h))}}function R4(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:s}=n,a=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const o=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!o?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!a?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=r,n.allowSlideNext=i,n.params.watchOverflow&&s!==n.snapGrid&&n.checkOverflow()}function XRe(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function YRe(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=n;if(!i)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let r;const s=n.maxTranslate()-n.minTranslate();s===0?r=0:r=(n.translate-n.minTranslate())/s,r!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function jRe(n){const e=this;w1(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}let P4=!1;function QRe(){}const FK=(n,e)=>{const t=$l(),{params:i,el:r,wrapperEl:s,device:a}=n,o=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;r[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:o}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",n.onClick,!0),i.cssMode&&s[l]("scroll",n.onScroll),i.updateOnWindowResize?n[c](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",R4,!0):n[c]("observerUpdate",R4,!0),r[l]("load",n.onLoad,{capture:!0})};function ZRe(){const n=this,e=$l(),{params:t}=n;n.onTouchStart=WRe.bind(n),n.onTouchMove=KRe.bind(n),n.onTouchEnd=qRe.bind(n),t.cssMode&&(n.onScroll=YRe.bind(n)),n.onClick=XRe.bind(n),n.onLoad=jRe.bind(n),P4||(e.addEventListener("touchstart",QRe),P4=!0),FK(n,"on")}function JRe(){FK(this,"off")}var ePe={attachEvents:ZRe,detachEvents:JRe};const D4=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function tPe(){const n=this,{realIndex:e,initialized:t,params:i,el:r}=n,s=i.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const a=n.getBreakpoint(s,n.params.breakpointsBase,n.el);if(!a||n.currentBreakpoint===a)return;const l=(a in s?s[a]:void 0)||n.originalParams,c=D4(n,i),u=D4(n,l),d=i.enabled;c&&!u?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),n.emitContainerClasses()):!c&&u&&(r.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),n.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(g=>{if(typeof l[g]>"u")return;const _=i[g]&&i[g].enabled,y=l[g]&&l[g].enabled;_&&!y&&n[g].disable(),!_&&y&&n[g].enable()});const f=l.direction&&l.direction!==i.direction,h=i.loop&&(l.slidesPerView!==i.slidesPerView||f),p=i.loop;f&&t&&n.changeDirection(),La(n.params,l);const m=n.params.enabled,v=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),d&&!m?n.disable():!d&&m&&n.enable(),n.currentBreakpoint=a,n.emit("_beforeBreakpoint",l),t&&(h?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!p&&v?(n.loopCreate(e),n.updateSlides()):p&&!v&&n.loopDestroy()),n.emit("breakpoint",l)}function nPe(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let i=!1;const r=qa(),s=e==="window"?r.innerHeight:t.clientHeight,a=Object.keys(n).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:s*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:c}=a[o];e==="window"?r.matchMedia(`(min-width: ${c}px)`).matches&&(i=l):c<=t.clientWidth&&(i=l)}return i||"max"}var iPe={setBreakpoint:tPe,getBreakpoint:nPe};function rPe(n,e){const t=[];return n.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&t.push(e+r)}):typeof i=="string"&&t.push(e+i)}),t}function sPe(){const n=this,{classNames:e,params:t,rtl:i,el:r,device:s}=n,a=rPe(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...a),r.classList.add(...e),n.emitContainerClasses()}function aPe(){const n=this,{el:e,classNames:t}=n;e.classList.remove(...t),n.emitContainerClasses()}var oPe={addClasses:sPe,removeClasses:aPe};function lPe(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:i}=t;if(i){const r=n.slides.length-1,s=n.slidesGrid[r]+n.slidesSizesGrid[r]+i*2;n.isLocked=n.size>s}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var cPe={checkOverflow:lPe},oR={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function uPe(n,e){return function(i){i===void 0&&(i={});const r=Object.keys(i)[0],s=i[r];if(typeof s!="object"||s===null){La(e,i);return}if(n[r]===!0&&(n[r]={enabled:!0}),r==="navigation"&&n[r]&&n[r].enabled&&!n[r].prevEl&&!n[r].nextEl&&(n[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&n[r]&&n[r].enabled&&!n[r].el&&(n[r].auto=!0),!(r in n&&"enabled"in s)){La(e,i);return}typeof n[r]=="object"&&!("enabled"in n[r])&&(n[r].enabled=!0),n[r]||(n[r]={enabled:!1}),La(e,i)}}const HT={eventsEmitter:oRe,update:yRe,translate:CRe,transition:ERe,slide:NRe,loop:URe,grabCursor:$Re,events:ePe,breakpoints:iPe,checkOverflow:cPe,classes:oPe},VT={};let U3=class Ic{constructor(){let e,t;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?t=r[0]:[e,t]=r,t||(t={}),t=La({},t),e&&!t.el&&(t.el=e);const a=$l();if(t.el&&typeof t.el=="string"&&a.querySelectorAll(t.el).length>1){const u=[];return a.querySelectorAll(t.el).forEach(d=>{const f=La({},t,{el:d});u.push(new Ic(f))}),u}const o=this;o.__swiper__=!0,o.support=NK(),o.device=nRe({userAgent:t.userAgent}),o.browser=rRe(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const l={};o.modules.forEach(u=>{u({params:t,swiper:o,extendParams:uPe(t,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const c=La({},oR,l);return o.params=La({},c,VT,t),o.originalParams=La({},o.params),o.passedParams=La({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach(u=>{o.on(u,o.params.on[u])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getSlideIndex(e){const{slidesEl:t,params:i}=this,r=Nl(t,`.${i.slideClass}, swiper-slide`),s=Lx(r[0]);return Lx(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=Nl(t,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const r=i.minTranslate(),a=(i.maxTranslate()-r)*e+r;i.translateTo(a,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const r=e.getSlideClasses(i);t.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const i=this,{params:r,slides:s,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:c}=i;let u=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let d=s[c]?s[c].swiperSlideSize:0,f;for(let h=c+1;h<s.length;h+=1)s[h]&&!f&&(d+=s[h].swiperSlideSize,u+=1,d>l&&(f=!0));for(let h=c-1;h>=0;h-=1)s[h]&&!f&&(d+=s[h].swiperSlideSize,u+=1,d>l&&(f=!0))}else if(e==="current")for(let d=c+1;d<s.length;d+=1)(t?a[d]+o[d]-a[c]<l:a[d]-a[c]<l)&&(u+=1);else for(let d=c-1;d>=0;d-=1)a[c]-a[d]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&w1(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const a=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const a=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(a.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||r()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName==="SWIPER-CONTAINER"&&(t.isElement=!0);const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=(()=>i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):Nl(i,r())[0])();return!a&&t.params.createElements&&(a=kK("div",t.params.wrapperClass),i.append(a),Nl(i,`.${t.params.slideClass}`).forEach(o=>{a.append(o)})),Object.assign(t,{el:i,wrapperEl:a,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:a,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||od(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||od(i,"direction")==="rtl"),wrongRTL:od(a,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const r=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&r.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(s=>{s.complete?w1(t,s):s.addEventListener("load",a=>{w1(t,a.target)})}),aR(t),t.initialized=!0,aR(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const i=this,{params:r,el:s,wrapperEl:a,slides:o}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),t&&(i.removeClasses(),s.removeAttribute("style"),a.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el.swiper=null,XIe(i)),i.destroyed=!0),null}static extendDefaults(e){La(VT,e)}static get extendedDefaults(){return VT}static get defaults(){return oR}static installModule(e){Ic.prototype.__modules__||(Ic.prototype.__modules__=[]);const t=Ic.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>Ic.installModule(t)),Ic):(Ic.installModule(e),Ic)}};Object.keys(HT).forEach(n=>{Object.keys(HT[n]).forEach(e=>{U3.prototype[e]=HT[n][e]})});U3.use([sRe,aRe]);const zK=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function $h(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function Ah(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>t.indexOf(i)<0).forEach(i=>{typeof n[i]>"u"?n[i]=e[i]:$h(e[i])&&$h(n[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?n[i]=e[i]:Ah(n[i],e[i]):n[i]=e[i]})}function UK(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function HK(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function VK(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function $K(n){n===void 0&&(n="");const e=n.split(" ").map(i=>i.trim()).filter(i=>!!i),t=[];return e.forEach(i=>{t.indexOf(i)<0&&t.push(i)}),t.join(" ")}function dPe(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function fPe(n){let{swiper:e,slides:t,passedParams:i,changedParams:r,nextEl:s,prevEl:a,scrollbarEl:o,paginationEl:l}=n;const c=r.filter(M=>M!=="children"&&M!=="direction"&&M!=="wrapperClass"),{params:u,pagination:d,navigation:f,scrollbar:h,virtual:p,thumbs:m}=e;let v,g,_,y,S,w,x,T;r.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&u.thumbs&&!u.thumbs.swiper&&(v=!0),r.includes("controller")&&i.controller&&i.controller.control&&u.controller&&!u.controller.control&&(g=!0),r.includes("pagination")&&i.pagination&&(i.pagination.el||l)&&(u.pagination||u.pagination===!1)&&d&&!d.el&&(_=!0),r.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||o)&&(u.scrollbar||u.scrollbar===!1)&&h&&!h.el&&(y=!0),r.includes("navigation")&&i.navigation&&(i.navigation.prevEl||a)&&(i.navigation.nextEl||s)&&(u.navigation||u.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(S=!0);const C=M=>{e[M]&&(e[M].destroy(),M==="navigation"?(e.isElement&&(e[M].prevEl.remove(),e[M].nextEl.remove()),u[M].prevEl=void 0,u[M].nextEl=void 0,e[M].prevEl=void 0,e[M].nextEl=void 0):(e.isElement&&e[M].el.remove(),u[M].el=void 0,e[M].el=void 0))};r.includes("loop")&&e.isElement&&(u.loop&&!i.loop?w=!0:!u.loop&&i.loop?x=!0:T=!0),c.forEach(M=>{if($h(u[M])&&$h(i[M]))Ah(u[M],i[M]),(M==="navigation"||M==="pagination"||M==="scrollbar")&&"enabled"in i[M]&&!i[M].enabled&&C(M);else{const A=i[M];(A===!0||A===!1)&&(M==="navigation"||M==="pagination"||M==="scrollbar")?A===!1&&C(M):u[M]=i[M]}}),c.includes("controller")&&!g&&e.controller&&e.controller.control&&u.controller&&u.controller.control&&(e.controller.control=u.controller.control),r.includes("children")&&t&&p&&u.virtual.enabled&&(p.slides=t,p.update(!0)),r.includes("children")&&t&&u.loop&&(T=!0),v&&m.init()&&m.update(!0),g&&(e.controller.control=u.controller.control),_&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(u.pagination.el=l),d.init(),d.render(),d.update()),y&&(e.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),e.el.appendChild(o)),o&&(u.scrollbar.el=o),h.init(),h.updateSize(),h.setTranslate()),S&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),s.innerHTML=e.hostEl.constructor.nextButtonSvg,s.part.add("button-next"),e.el.appendChild(s)),(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-prev"),a.innerHTML=e.hostEl.constructor.prevButtonSvg,a.part.add("button-prev"),e.el.appendChild(a))),s&&(u.navigation.nextEl=s),a&&(u.navigation.prevEl=a),f.init(),f.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),r.includes("direction")&&e.changeDirection(i.direction,!1),(w||T)&&e.loopDestroy(),(x||T)&&e.loopCreate(),e.update()}function L4(n,e){n===void 0&&(n={}),e===void 0&&(e=!0);const t={on:{}},i={},r={};Ah(t,oR),t._emitClasses=!0,t.init=!1;const s={},a=zK.map(l=>l.replace(/_/,"")),o=Object.assign({},n);return Object.keys(o).forEach(l=>{typeof n[l]>"u"||(a.indexOf(l)>=0?$h(n[l])?(t[l]={},r[l]={},Ah(t[l],n[l]),Ah(r[l],n[l])):(t[l]=n[l],r[l]=n[l]):l.search(/on[A-Z]/)===0&&typeof n[l]=="function"?e?i[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:t.on[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:s[l]=n[l])}),["navigation","pagination","scrollbar"].forEach(l=>{t[l]===!0&&(t[l]={}),t[l]===!1&&delete t[l]}),{params:t,passedParams:r,rest:s,events:i}}function hPe(n,e){let{el:t,nextEl:i,prevEl:r,paginationEl:s,scrollbarEl:a,swiper:o}=n;UK(e)&&i&&r&&(o.params.navigation.nextEl=i,o.originalParams.navigation.nextEl=i,o.params.navigation.prevEl=r,o.originalParams.navigation.prevEl=r),HK(e)&&s&&(o.params.pagination.el=s,o.originalParams.pagination.el=s),VK(e)&&a&&(o.params.scrollbar.el=a,o.originalParams.scrollbar.el=a),o.init(t)}function pPe(n,e,t,i,r){const s=[];if(!e)return s;const a=l=>{s.indexOf(l)<0&&s.push(l)};if(t&&i){const l=i.map(r),c=t.map(r);l.join("")!==c.join("")&&a("children"),i.length!==t.length&&a("children")}return zK.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in n&&l in e)if($h(n[l])&&$h(e[l])){const c=Object.keys(n[l]),u=Object.keys(e[l]);c.length!==u.length?a(l):(c.forEach(d=>{n[l][d]!==e[l][d]&&a(l)}),u.forEach(d=>{n[l][d]!==e[l][d]&&a(l)}))}else n[l]!==e[l]&&a(l)}),s}const mPe=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function $T(n,e,t){n===void 0&&(n={});const i=[],r={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},s=(a,o)=>{Array.isArray(a)&&a.forEach(l=>{const c=typeof l.type=="symbol";o==="default"&&(o="container-end"),c&&l.children?s(l.children,o):l.type&&(l.type.name==="SwiperSlide"||l.type.name==="AsyncComponentWrapper")?i.push(l):r[o]&&r[o].push(l)})};return Object.keys(n).forEach(a=>{if(typeof n[a]!="function")return;const o=n[a]();s(o,a)}),t.value=e.value,e.value=i,{slides:i,slots:r}}function vPe(n,e,t){if(!t)return null;const i=u=>{let d=u;return u<0?d=e.length+u:d>=e.length&&(d=d-e.length),d},r=n.value.isHorizontal()?{[n.value.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:s,to:a}=t,o=n.value.params.loop?-e.length:0,l=n.value.params.loop?e.length*2:e.length,c=[];for(let u=o;u<l;u+=1)u>=s&&u<=a&&c.push(e[i(u)]);return c.map(u=>(u.props||(u.props={}),u.props.style||(u.props.style={}),u.props.swiperRef=n,u.props.style=r,wt(u.type,{...u.props},u.children)))}const gPe={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},oneWayMovement:{type:Boolean,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:[Number,String],default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopedSlides:{type:Number,default:void 0},loopPreventsSliding:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},lazyPreloaderClass:{type:String,default:void 0},lazyPreloadPrevNext:{type:Number,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","autoplayTimeLeft","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","breakpointsBase","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","init","keyPress","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(n,e){let{slots:t,emit:i}=e;const{tag:r,wrapperTag:s}=n,a=X("swiper"),o=X(null),l=X(!1),c=X(!1),u=X(null),d=X(null),f=X(null),h={value:[]},p={value:[]},m=X(null),v=X(null),g=X(null),_=X(null),{params:y,passedParams:S}=L4(n,!1);$T(t,h,p),f.value=S,p.value=h.value;const w=()=>{$T(t,h,p),l.value=!0};y.onAny=function(C){for(var M=arguments.length,A=new Array(M>1?M-1:0),E=1;E<M;E++)A[E-1]=arguments[E];i(C,...A)},Object.assign(y.on,{_beforeBreakpoint:w,_containerClasses(C,M){a.value=M}});const x={...y};if(delete x.wrapperClass,d.value=new U3(x),d.value.virtual&&d.value.params.virtual.enabled){d.value.virtual.slides=h.value;const C={cache:!1,slides:h.value,renderExternal:M=>{o.value=M},renderExternalUpdate:!1};Ah(d.value.params.virtual,C),Ah(d.value.originalParams.virtual,C)}Bo(()=>{!c.value&&d.value&&(d.value.emitSlidesClasses(),c.value=!0);const{passedParams:C}=L4(n,!1),M=pPe(C,f.value,h.value,p.value,A=>A.props&&A.props.key);f.value=C,(M.length||l.value)&&d.value&&!d.value.destroyed&&fPe({swiper:d.value,slides:h.value,passedParams:C,changedParams:M,nextEl:m.value,prevEl:v.value,scrollbarEl:_.value,paginationEl:g.value}),l.value=!1}),un("swiper",d),We(o,()=>{Mt(()=>{mPe(d.value)})}),Ht(()=>{u.value&&(hPe({el:u.value,nextEl:m.value,prevEl:v.value,paginationEl:g.value,scrollbarEl:_.value,swiper:d.value},y),i("swiper",d.value))}),Un(()=>{d.value&&!d.value.destroyed&&d.value.destroy(!0,!1)});function T(C){return y.virtual?vPe(d,C,o.value):(C.forEach((M,A)=>{M.props||(M.props={}),M.props.swiperRef=d,M.props.swiperSlideIndex=A}),C)}return()=>{const{slides:C,slots:M}=$T(t,h,p);return wt(r,{ref:u,class:$K(a.value)},[M["container-start"],wt(s,{class:dPe(y.wrapperClass)},[M["wrapper-start"],T(C),M["wrapper-end"]]),UK(n)&&[wt("div",{ref:v,class:"swiper-button-prev"}),wt("div",{ref:m,class:"swiper-button-next"})],VK(n)&&wt("div",{ref:_,class:"swiper-scrollbar"}),HK(n)&&wt("div",{ref:g,class:"swiper-pagination"}),M["container-end"]])}}},yPe={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},swiperSlideIndex:{type:Number,default:void 0,required:!1},zoom:{type:Boolean,default:void 0,required:!1},lazy:{type:Boolean,default:!1,required:!1},virtualIndex:{type:[String,Number],default:void 0}},setup(n,e){let{slots:t}=e,i=!1;const{swiperRef:r}=n,s=X(null),a=X("swiper-slide"),o=X(!1);function l(d,f,h){f===s.value&&(a.value=h)}Ht(()=>{!r||!r.value||(r.value.on("_slideClass",l),i=!0)}),qD(()=>{i||!r||!r.value||(r.value.on("_slideClass",l),i=!0)}),Bo(()=>{!s.value||!r||!r.value||(typeof n.swiperSlideIndex<"u"&&(s.value.swiperSlideIndex=n.swiperSlideIndex),r.value.destroyed&&a.value!=="swiper-slide"&&(a.value="swiper-slide"))}),Un(()=>{!r||!r.value||r.value.off("_slideClass",l)});const c=N(()=>({isActive:a.value.indexOf("swiper-slide-active")>=0,isVisible:a.value.indexOf("swiper-slide-visible")>=0,isPrev:a.value.indexOf("swiper-slide-prev")>=0,isNext:a.value.indexOf("swiper-slide-next")>=0}));un("swiperSlide",c);const u=()=>{o.value=!0};return()=>wt(n.tag,{class:$K(`${a.value}`),ref:s,"data-swiper-slide-index":typeof n.virtualIndex>"u"&&r&&r.value&&r.value.params.loop?n.swiperSlideIndex:n.virtualIndex,onLoadCapture:u},n.zoom?wt("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof n.zoom=="number"?n.zoom:void 0},[t.default&&t.default(c.value),n.lazy&&!o.value&&wt("div",{class:"swiper-lazy-preloader"})]):[t.default&&t.default(c.value),n.lazy&&!o.value&&wt("div",{class:"swiper-lazy-preloader"})])}};function GK(n,e,t,i){return n.params.createElements&&Object.keys(i).forEach(r=>{if(!t[r]&&t.auto===!0){let s=Nl(n.el,`.${i[r]}`)[0];s||(s=kK("div",i[r]),s.className=i[r],n.el.append(s)),t[r]=s,e[r]=s}}),t}function k4(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};const s=m=>(Array.isArray(m)?m:[m]).filter(v=>!!v);function a(m){let v;return m&&typeof m=="string"&&e.isElement&&(v=e.el.querySelector(m),v)?v:(m&&(typeof m=="string"&&(v=[...document.querySelectorAll(m)]),e.params.uniqueNavElements&&typeof m=="string"&&v.length>1&&e.el.querySelectorAll(m).length===1&&(v=e.el.querySelector(m))),m&&!v?m:v)}function o(m,v){const g=e.params.navigation;m=s(m),m.forEach(_=>{_&&(_.classList[v?"add":"remove"](...g.disabledClass.split(" ")),_.tagName==="BUTTON"&&(_.disabled=v),e.params.watchOverflow&&e.enabled&&_.classList[e.isLocked?"add":"remove"](g.lockClass))})}function l(){const{nextEl:m,prevEl:v}=e.navigation;if(e.params.loop){o(v,!1),o(m,!1);return}o(v,e.isBeginning&&!e.params.rewind),o(m,e.isEnd&&!e.params.rewind)}function c(m){m.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function u(m){m.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function d(){const m=e.params.navigation;if(e.params.navigation=GK(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(m.nextEl||m.prevEl))return;let v=a(m.nextEl),g=a(m.prevEl);Object.assign(e.navigation,{nextEl:v,prevEl:g}),v=s(v),g=s(g);const _=(y,S)=>{y&&y.addEventListener("click",S==="next"?u:c),!e.enabled&&y&&y.classList.add(...m.lockClass.split(" "))};v.forEach(y=>_(y,"next")),g.forEach(y=>_(y,"prev"))}function f(){let{nextEl:m,prevEl:v}=e.navigation;m=s(m),v=s(v);const g=(_,y)=>{_.removeEventListener("click",y==="next"?u:c),_.classList.remove(...e.params.navigation.disabledClass.split(" "))};m.forEach(_=>g(_,"next")),v.forEach(_=>g(_,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?p():(d(),l())}),i("toEdge fromEdge lock unlock",()=>{l()}),i("destroy",()=>{f()}),i("enable disable",()=>{let{nextEl:m,prevEl:v}=e.navigation;if(m=s(m),v=s(v),e.enabled){l();return}[...m,...v].filter(g=>!!g).forEach(g=>g.classList.add(e.params.navigation.lockClass))}),i("click",(m,v)=>{let{nextEl:g,prevEl:_}=e.navigation;g=s(g),_=s(_);const y=v.target;if(e.params.navigation.hideOnClick&&!_.includes(y)&&!g.includes(y)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===y||e.pagination.el.contains(y)))return;let S;g.length?S=g[0].classList.contains(e.params.navigation.hiddenClass):_.length&&(S=_[0].classList.contains(e.params.navigation.hiddenClass)),r(S===!0?"navigationShow":"navigationHide"),[...g,..._].filter(w=>!!w).forEach(w=>w.classList.toggle(e.params.navigation.hiddenClass))}});const h=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),d(),l()},p=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),f()};Object.assign(e.navigation,{enable:h,disable:p,update:l,init:d,destroy:f})}function Zg(n){return n===void 0&&(n=""),`.${n.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function O4(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:_=>_,formatFractionTotal:_=>_,bulletClass:`${s}-bullet`,bulletActiveClass:`${s}-bullet-active`,modifierClass:`${s}-`,currentClass:`${s}-current`,totalClass:`${s}-total`,hiddenClass:`${s}-hidden`,progressbarFillClass:`${s}-progressbar-fill`,progressbarOppositeClass:`${s}-progressbar-opposite`,clickableClass:`${s}-clickable`,lockClass:`${s}-lock`,horizontalClass:`${s}-horizontal`,verticalClass:`${s}-vertical`,paginationDisabledClass:`${s}-disabled`}}),e.pagination={el:null,bullets:[]};let a,o=0;const l=_=>(Array.isArray(_)?_:[_]).filter(y=>!!y);function c(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function u(_,y){const{bulletActiveClass:S}=e.params.pagination;_&&(_=_[`${y==="prev"?"previous":"next"}ElementSibling`],_&&(_.classList.add(`${S}-${y}`),_=_[`${y==="prev"?"previous":"next"}ElementSibling`],_&&_.classList.add(`${S}-${y}-${y}`)))}function d(_){const y=_.target.closest(Zg(e.params.pagination.bulletClass));if(!y)return;_.preventDefault();const S=Lx(y)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===S)return;const w=e.realIndex,x=e.getSlideIndexByData(S),T=e.getSlideIndexByData(e.realIndex),C=M=>{const A=e.activeIndex;e.loopFix({direction:M,activeSlideIndex:x,slideTo:!1});const E=e.activeIndex;A===E&&e.slideToLoop(w,0,!1,!0)};if(x>e.slides.length-e.loopedSlides)C(x>T?"next":"prev");else if(e.params.centeredSlides){const M=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(parseFloat(e.params.slidesPerView,10));x<Math.floor(M/2)&&C("prev")}e.slideToLoop(S)}else e.slideTo(S)}function f(){const _=e.rtl,y=e.params.pagination;if(c())return;let S=e.pagination.el;S=l(S);let w,x;const T=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,C=e.params.loop?Math.ceil(T/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(x=e.previousRealIndex||0,w=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(w=e.snapIndex,x=e.previousSnapIndex):(x=e.previousIndex||0,w=e.activeIndex||0),y.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const M=e.pagination.bullets;let A,E,I;if(y.dynamicBullets&&(a=sR(M[0],e.isHorizontal()?"width":"height",!0),S.forEach(P=>{P.style[e.isHorizontal()?"width":"height"]=`${a*(y.dynamicMainBullets+4)}px`}),y.dynamicMainBullets>1&&x!==void 0&&(o+=w-(x||0),o>y.dynamicMainBullets-1?o=y.dynamicMainBullets-1:o<0&&(o=0)),A=Math.max(w-o,0),E=A+(Math.min(M.length,y.dynamicMainBullets)-1),I=(E+A)/2),M.forEach(P=>{const D=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(L=>`${y.bulletActiveClass}${L}`)].map(L=>typeof L=="string"&&L.includes(" ")?L.split(" "):L).flat();P.classList.remove(...D)}),S.length>1)M.forEach(P=>{const D=Lx(P);D===w?P.classList.add(...y.bulletActiveClass.split(" ")):e.isElement&&P.setAttribute("part","bullet"),y.dynamicBullets&&(D>=A&&D<=E&&P.classList.add(...`${y.bulletActiveClass}-main`.split(" ")),D===A&&u(P,"prev"),D===E&&u(P,"next"))});else{const P=M[w];if(P&&P.classList.add(...y.bulletActiveClass.split(" ")),e.isElement&&M.forEach((D,L)=>{D.setAttribute("part",L===w?"bullet-active":"bullet")}),y.dynamicBullets){const D=M[A],L=M[E];for(let R=A;R<=E;R+=1)M[R]&&M[R].classList.add(...`${y.bulletActiveClass}-main`.split(" "));u(D,"prev"),u(L,"next")}}if(y.dynamicBullets){const P=Math.min(M.length,y.dynamicMainBullets+4),D=(a*P-a)/2-I*a,L=_?"right":"left";M.forEach(R=>{R.style[e.isHorizontal()?L:"top"]=`${D}px`})}}S.forEach((M,A)=>{if(y.type==="fraction"&&(M.querySelectorAll(Zg(y.currentClass)).forEach(E=>{E.textContent=y.formatFractionCurrent(w+1)}),M.querySelectorAll(Zg(y.totalClass)).forEach(E=>{E.textContent=y.formatFractionTotal(C)})),y.type==="progressbar"){let E;y.progressbarOpposite?E=e.isHorizontal()?"vertical":"horizontal":E=e.isHorizontal()?"horizontal":"vertical";const I=(w+1)/C;let P=1,D=1;E==="horizontal"?P=I:D=I,M.querySelectorAll(Zg(y.progressbarFillClass)).forEach(L=>{L.style.transform=`translate3d(0,0,0) scaleX(${P}) scaleY(${D})`,L.style.transitionDuration=`${e.params.speed}ms`})}y.type==="custom"&&y.renderCustom?(M.innerHTML=y.renderCustom(e,w+1,C),A===0&&r("paginationRender",M)):(A===0&&r("paginationRender",M),r("paginationUpdate",M)),e.params.watchOverflow&&e.enabled&&M.classList[e.isLocked?"add":"remove"](y.lockClass)})}function h(){const _=e.params.pagination;if(c())return;const y=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length;let S=e.pagination.el;S=l(S);let w="";if(_.type==="bullets"){let x=e.params.loop?Math.ceil(y/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&x>y&&(x=y);for(let T=0;T<x;T+=1)_.renderBullet?w+=_.renderBullet.call(e,T,_.bulletClass):w+=`<${_.bulletElement} ${e.isElement?'part="bullet"':""} class="${_.bulletClass}"></${_.bulletElement}>`}_.type==="fraction"&&(_.renderFraction?w=_.renderFraction.call(e,_.currentClass,_.totalClass):w=`<span class="${_.currentClass}"></span> / <span class="${_.totalClass}"></span>`),_.type==="progressbar"&&(_.renderProgressbar?w=_.renderProgressbar.call(e,_.progressbarFillClass):w=`<span class="${_.progressbarFillClass}"></span>`),e.pagination.bullets=[],S.forEach(x=>{_.type!=="custom"&&(x.innerHTML=w||""),_.type==="bullets"&&e.pagination.bullets.push(...x.querySelectorAll(Zg(_.bulletClass)))}),_.type!=="custom"&&r("paginationRender",S[0])}function p(){e.params.pagination=GK(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const _=e.params.pagination;if(!_.el)return;let y;typeof _.el=="string"&&e.isElement&&(y=e.el.querySelector(_.el)),!y&&typeof _.el=="string"&&(y=[...document.querySelectorAll(_.el)]),y||(y=_.el),!(!y||y.length===0)&&(e.params.uniqueNavElements&&typeof _.el=="string"&&Array.isArray(y)&&y.length>1&&(y=[...e.el.querySelectorAll(_.el)],y.length>1&&(y=y.filter(S=>OK(S,".swiper")[0]===e.el)[0])),Array.isArray(y)&&y.length===1&&(y=y[0]),Object.assign(e.pagination,{el:y}),y=l(y),y.forEach(S=>{_.type==="bullets"&&_.clickable&&S.classList.add(...(_.clickableClass||"").split(" ")),S.classList.add(_.modifierClass+_.type),S.classList.add(e.isHorizontal()?_.horizontalClass:_.verticalClass),_.type==="bullets"&&_.dynamicBullets&&(S.classList.add(`${_.modifierClass}${_.type}-dynamic`),o=0,_.dynamicMainBullets<1&&(_.dynamicMainBullets=1)),_.type==="progressbar"&&_.progressbarOpposite&&S.classList.add(_.progressbarOppositeClass),_.clickable&&S.addEventListener("click",d),e.enabled||S.classList.add(_.lockClass)}))}function m(){const _=e.params.pagination;if(c())return;let y=e.pagination.el;y&&(y=l(y),y.forEach(S=>{S.classList.remove(_.hiddenClass),S.classList.remove(_.modifierClass+_.type),S.classList.remove(e.isHorizontal()?_.horizontalClass:_.verticalClass),_.clickable&&(S.classList.remove(...(_.clickableClass||"").split(" ")),S.removeEventListener("click",d))})),e.pagination.bullets&&e.pagination.bullets.forEach(S=>S.classList.remove(..._.bulletActiveClass.split(" ")))}i("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const _=e.params.pagination;let{el:y}=e.pagination;y=l(y),y.forEach(S=>{S.classList.remove(_.horizontalClass,_.verticalClass),S.classList.add(e.isHorizontal()?_.horizontalClass:_.verticalClass)})}),i("init",()=>{e.params.pagination.enabled===!1?g():(p(),h(),f())}),i("activeIndexChange",()=>{typeof e.snapIndex>"u"&&f()}),i("snapIndexChange",()=>{f()}),i("snapGridLengthChange",()=>{h(),f()}),i("destroy",()=>{m()}),i("enable disable",()=>{let{el:_}=e.pagination;_&&(_=l(_),_.forEach(y=>y.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),i("lock unlock",()=>{f()}),i("click",(_,y)=>{const S=y.target,w=l(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&w&&w.length>0&&!S.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&S===e.navigation.nextEl||e.navigation.prevEl&&S===e.navigation.prevEl))return;const x=w[0].classList.contains(e.params.pagination.hiddenClass);r(x===!0?"paginationShow":"paginationHide"),w.forEach(T=>T.classList.toggle(e.params.pagination.hiddenClass))}});const v=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:_}=e.pagination;_&&(_=l(_),_.forEach(y=>y.classList.remove(e.params.pagination.paginationDisabledClass))),p(),h(),f()},g=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:_}=e.pagination;_&&(_=l(_),_.forEach(y=>y.classList.add(e.params.pagination.paginationDisabledClass))),m()};Object.assign(e.pagination,{enable:v,disable:g,render:h,update:f,init:p,destroy:m})}function N4(n){let{swiper:e,extendParams:t,on:i,emit:r,params:s}=n;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let a,o,l=s&&s.autoplay?s.autoplay.delay:3e3,c=s&&s.autoplay?s.autoplay.delay:3e3,u,d=new Date().getTime,f,h,p,m,v,g;function _(B){!e||e.destroyed||!e.wrapperEl||B.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",_),M())}const y=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?f=!0:f&&(c=u,f=!1);const B=e.autoplay.paused?u:d+c-new Date().getTime();e.autoplay.timeLeft=B,r("autoplayTimeLeft",B,B/l),o=requestAnimationFrame(()=>{y()})},S=()=>{let B;return e.virtual&&e.params.virtual.enabled?B=e.slides.filter(O=>O.classList.contains("swiper-slide-active"))[0]:B=e.slides[e.activeIndex],B?parseInt(B.getAttribute("data-swiper-autoplay"),10):void 0},w=B=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(o),y();let k=typeof B>"u"?e.params.autoplay.delay:B;l=e.params.autoplay.delay,c=e.params.autoplay.delay;const O=S();!Number.isNaN(O)&&O>0&&typeof B>"u"&&(k=O,l=O,c=O),u=k;const U=e.params.speed,G=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(U,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,U,!0,!0),r("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(U,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,U,!0,!0),r("autoplay")),e.params.cssMode&&(d=new Date().getTime(),requestAnimationFrame(()=>{w()})))};return k>0?(clearTimeout(a),a=setTimeout(()=>{G()},k)):requestAnimationFrame(()=>{G()}),k},x=()=>{e.autoplay.running=!0,w(),r("autoplayStart")},T=()=>{e.autoplay.running=!1,clearTimeout(a),cancelAnimationFrame(o),r("autoplayStop")},C=(B,k)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(a),B||(g=!0);const O=()=>{r("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",_):M()};if(e.autoplay.paused=!0,k){v&&(u=e.params.autoplay.delay),v=!1,O();return}u=(u||e.params.autoplay.delay)-(new Date().getTime()-d),!(e.isEnd&&u<0&&!e.params.loop)&&(u<0&&(u=0),O())},M=()=>{e.isEnd&&u<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(d=new Date().getTime(),g?(g=!1,w(u)):w(),e.autoplay.paused=!1,r("autoplayResume"))},A=()=>{if(e.destroyed||!e.autoplay.running)return;const B=$l();B.visibilityState==="hidden"&&(g=!0,C(!0)),B.visibilityState==="visible"&&M()},E=B=>{B.pointerType==="mouse"&&(g=!0,!(e.animating||e.autoplay.paused)&&C(!0))},I=B=>{B.pointerType==="mouse"&&e.autoplay.paused&&M()},P=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",E),e.el.addEventListener("pointerleave",I))},D=()=>{e.el.removeEventListener("pointerenter",E),e.el.removeEventListener("pointerleave",I)},L=()=>{$l().addEventListener("visibilitychange",A)},R=()=>{$l().removeEventListener("visibilitychange",A)};i("init",()=>{e.params.autoplay.enabled&&(P(),L(),d=new Date().getTime(),x())}),i("destroy",()=>{D(),R(),e.autoplay.running&&T()}),i("beforeTransitionStart",(B,k,O)=>{e.destroyed||!e.autoplay.running||(O||!e.params.autoplay.disableOnInteraction?C(!0,!0):T())}),i("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){T();return}h=!0,p=!1,g=!1,m=setTimeout(()=>{g=!0,p=!0,C(!0)},200)}}),i("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!h)){if(clearTimeout(m),clearTimeout(a),e.params.autoplay.disableOnInteraction){p=!1,h=!1;return}p&&e.params.cssMode&&M(),p=!1,h=!1}}),i("slideChange",()=>{e.destroyed||!e.autoplay.running||(v=!0)}),Object.assign(e.autoplay,{start:x,stop:T,pause:C,resume:M})}const _Pe={components:{Swiper:gPe,SwiperSlide:yPe,Navigation:k4,Pagination:O4,Autoplay:N4},data(){return{modules:[k4,O4,N4],image_paths:["./carousel/1.jpg","./carousel/2.jpg","./carousel/3.jpg","./carousel/4.jpg","./carousel/5.jpg","./carousel/6.jpg"]}}};function bPe(n,e,t,i,r,s){const a=yt("el-image"),o=yt("swiper-slide"),l=yt("swiper"),c=yt("el-col"),u=yt("el-row");return F(),He(u,{justify:"center"},{default:ge(()=>[oe(c,{span:24},{default:ge(()=>[oe(l,{loop:!0,slidesPerView:1,breakpoints:{600:{slidesPerView:2},800:{slidesPerView:3}},modules:r.modules,navigation:{hideOnClick:!0},pagination:{hideOnClick:!0,clickable:!0,type:"bullets"},autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0}},{default:ge(()=>[(F(!0),ie(bt,null,sn(r.image_paths,d=>(F(),He(o,null,{default:ge(()=>[oe(a,{src:d},null,8,["src"])]),_:2},1024))),256))]),_:1},8,["modules"])]),_:1})]),_:1})}const SPe=sc(_Pe,[["render",bPe]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lR=function(n,e){return lR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])},lR(n,e)};function Mn(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");lR(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var wPe=function(){function n(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return n}(),xPe=function(){function n(){this.browser=new wPe,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return n}(),Vf=new xPe;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Vf.wxa=!0,Vf.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Vf.worker=!0:typeof navigator>"u"?(Vf.node=!0,Vf.svgSupported=!0):CPe(navigator.userAgent,Vf);function CPe(n,e){var t=e.browser,i=n.match(/Firefox\/([\d.]+)/),r=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),s=n.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(n);i&&(t.firefox=!0,t.version=i[1]),r&&(t.ie=!0,t.version=r[1]),s&&(t.edge=!0,t.version=s[1],t.newEdge=+s[1].split(".")[0]>18),a&&(t.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,e.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11),e.domSupported=typeof document<"u";var o=document.documentElement.style;e.transform3dSupported=(t.ie&&"transition"in o||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in o)&&!("OTransition"in o),e.transformSupported=e.transform3dSupported||t.ie&&+t.version>=9}const Qn=Vf;var H3=12,MPe="sans-serif",Gh=H3+"px "+MPe,TPe=20,APe=100,EPe="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function IPe(n){var e={};if(typeof JSON>"u")return e;for(var t=0;t<n.length;t++){var i=String.fromCharCode(t+32),r=(n.charCodeAt(t)-TPe)/APe;e[i]=r}return e}var RPe=IPe(EPe),bg={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var n,e;return function(t,i){if(!n){var r=bg.createCanvas();n=r&&r.getContext("2d")}if(n)return e!==i&&(e=n.font=i||Gh),n.measureText(t);t=t||"",i=i||Gh;var s=/(\d+)px/.exec(i),a=s&&+s[1]||H3,o=0;if(i.indexOf("mono")>=0)o=a*t.length;else for(var l=0;l<t.length;l++){var c=RPe[t[l]];o+=c==null?a:c*a}return{width:o}}}(),loadImage:function(n,e,t){var i=new Image;return i.onload=e,i.onerror=t,i.src=n,i}},WK=zd(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,e){return n["[object "+e+"]"]=!0,n},{}),KK=zd(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,e){return n["[object "+e+"Array]"]=!0,n},{}),yb=Object.prototype.toString,TM=Array.prototype,PPe=TM.forEach,DPe=TM.filter,V3=TM.slice,LPe=TM.map,B4=(function(){}).constructor,aS=B4?B4.prototype:null,$3="__proto__",kPe=2311;function qK(){return kPe++}function G3(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];typeof console<"u"&&console.error.apply(console,n)}function vi(n){if(n==null||typeof n!="object")return n;var e=n,t=yb.call(n);if(t==="[object Array]"){if(!cy(n)){e=[];for(var i=0,r=n.length;i<r;i++)e[i]=vi(n[i])}}else if(KK[t]){if(!cy(n)){var s=n.constructor;if(s.from)e=s.from(n);else{e=new s(n.length);for(var i=0,r=n.length;i<r;i++)e[i]=n[i]}}}else if(!WK[t]&&!cy(n)&&!kx(n)){e={};for(var a in n)n.hasOwnProperty(a)&&a!==$3&&(e[a]=vi(n[a]))}return e}function er(n,e,t){if(!Ln(e)||!Ln(n))return t?vi(e):n;for(var i in e)if(e.hasOwnProperty(i)&&i!==$3){var r=n[i],s=e[i];Ln(s)&&Ln(r)&&!hn(s)&&!hn(r)&&!kx(s)&&!kx(r)&&!F4(s)&&!F4(r)&&!cy(s)&&!cy(r)?er(r,s,t):(t||!(i in n))&&(n[i]=vi(e[i]))}return n}function Nt(n,e){if(Object.assign)Object.assign(n,e);else for(var t in e)e.hasOwnProperty(t)&&t!==$3&&(n[t]=e[t]);return n}function nr(n,e,t){for(var i=mr(e),r=0;r<i.length;r++){var s=i[r];(t?e[s]!=null:n[s]==null)&&(n[s]=e[s])}return n}function $i(n,e){if(n){if(n.indexOf)return n.indexOf(e);for(var t=0,i=n.length;t<i;t++)if(n[t]===e)return t}return-1}function OPe(n,e){var t=n.prototype;function i(){}i.prototype=e.prototype,n.prototype=new i;for(var r in t)t.hasOwnProperty(r)&&(n.prototype[r]=t[r]);n.prototype.constructor=n,n.superClass=e}function gu(n,e,t){if(n="prototype"in n?n.prototype:n,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var i=Object.getOwnPropertyNames(e),r=0;r<i.length;r++){var s=i[r];s!=="constructor"&&(t?e[s]!=null:n[s]==null)&&(n[s]=e[s])}else nr(n,e,t)}function xa(n){return!n||typeof n=="string"?!1:typeof n.length=="number"}function tt(n,e,t){if(n&&e)if(n.forEach&&n.forEach===PPe)n.forEach(e,t);else if(n.length===+n.length)for(var i=0,r=n.length;i<r;i++)e.call(t,n[i],i,n);else for(var s in n)n.hasOwnProperty(s)&&e.call(t,n[s],s,n)}function hi(n,e,t){if(!n)return[];if(!e)return W3(n);if(n.map&&n.map===LPe)return n.map(e,t);for(var i=[],r=0,s=n.length;r<s;r++)i.push(e.call(t,n[r],r,n));return i}function zd(n,e,t,i){if(n&&e){for(var r=0,s=n.length;r<s;r++)t=e.call(i,t,n[r],r,n);return t}}function fo(n,e,t){if(!n)return[];if(!e)return W3(n);if(n.filter&&n.filter===DPe)return n.filter(e,t);for(var i=[],r=0,s=n.length;r<s;r++)e.call(t,n[r],r,n)&&i.push(n[r]);return i}function mr(n){if(!n)return[];if(Object.keys)return Object.keys(n);var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push(t);return e}function NPe(n,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return function(){return n.apply(e,t.concat(V3.call(arguments)))}}var Gi=aS&&Ri(aS.bind)?aS.call.bind(aS.bind):NPe;function Or(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){return n.apply(this,e.concat(V3.call(arguments)))}}function hn(n){return Array.isArray?Array.isArray(n):yb.call(n)==="[object Array]"}function Ri(n){return typeof n=="function"}function Rn(n){return typeof n=="string"}function cR(n){return yb.call(n)==="[object String]"}function vr(n){return typeof n=="number"}function Ln(n){var e=typeof n;return e==="function"||!!n&&e==="object"}function F4(n){return!!WK[yb.call(n)]}function Ka(n){return!!KK[yb.call(n)]}function kx(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function AM(n){return n.colorStops!=null}function BPe(n){return n.image!=null}function FPe(n){return n!==n}function m_(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=0,i=n.length;t<i;t++)if(n[t]!=null)return n[t]}function ui(n,e){return n??e}function ly(n,e,t){return n??e??t}function W3(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return V3.apply(n,e)}function XK(n){if(typeof n=="number")return[n,n,n,n];var e=n.length;return e===2?[n[0],n[1],n[0],n[1]]:e===3?[n[0],n[1],n[2],n[1]]:n}function nu(n,e){if(!n)throw new Error(e)}function Bl(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var YK="__ec_primitive__";function uR(n){n[YK]=!0}function cy(n){return n[YK]}var zPe=function(){function n(){this.data={}}return n.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},n.prototype.has=function(e){return this.data.hasOwnProperty(e)},n.prototype.get=function(e){return this.data[e]},n.prototype.set=function(e,t){return this.data[e]=t,this},n.prototype.keys=function(){return mr(this.data)},n.prototype.forEach=function(e){var t=this.data;for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},n}(),jK=typeof Map=="function";function UPe(){return jK?new Map:new zPe}var HPe=function(){function n(e){var t=hn(e);this.data=UPe();var i=this;e instanceof n?e.each(r):e&&tt(e,r);function r(s,a){t?i.set(s,a):i.set(a,s)}}return n.prototype.hasKey=function(e){return this.data.has(e)},n.prototype.get=function(e){return this.data.get(e)},n.prototype.set=function(e,t){return this.data.set(e,t),t},n.prototype.each=function(e,t){this.data.forEach(function(i,r){e.call(t,i,r)})},n.prototype.keys=function(){var e=this.data.keys();return jK?Array.from(e):e},n.prototype.removeKey=function(e){this.data.delete(e)},n}();function di(n){return new HPe(n)}function VPe(n,e){for(var t=new n.constructor(n.length+e.length),i=0;i<n.length;i++)t[i]=n[i];for(var r=n.length,i=0;i<e.length;i++)t[i+r]=e[i];return t}function EM(n,e){var t;if(Object.create)t=Object.create(n);else{var i=function(){};i.prototype=n,t=new i}return e&&Nt(t,e),t}function QK(n){var e=n.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function Bv(n,e){return n.hasOwnProperty(e)}function ga(){}var $Pe=180/Math.PI;function Sg(n,e){return n==null&&(n=0),e==null&&(e=0),[n,e]}function GPe(n){return[n[0],n[1]]}function z4(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function WPe(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}function KPe(n){return Math.sqrt(qPe(n))}function qPe(n){return n[0]*n[0]+n[1]*n[1]}function GT(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n}function XPe(n,e){var t=KPe(e);return t===0?(n[0]=0,n[1]=0):(n[0]=e[0]/t,n[1]=e[1]/t),n}function dR(n,e){return Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]))}var fR=dR;function YPe(n,e){return(n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])}var sv=YPe;function WT(n,e,t,i){return n[0]=e[0]+i*(t[0]-e[0]),n[1]=e[1]+i*(t[1]-e[1]),n}function Gl(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[2]*r+t[4],n[1]=t[1]*i+t[3]*r+t[5],n}function Bm(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n}function Fm(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n}var Sp=function(){function n(e,t){this.target=e,this.topTarget=t&&t.topTarget}return n}(),jPe=function(){function n(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new Sp(t,e),"dragstart",e.event))},n.prototype._drag=function(e){var t=this._draggingTarget;if(t){var i=e.offsetX,r=e.offsetY,s=i-this._x,a=r-this._y;this._x=i,this._y=r,t.drift(s,a,e),this.handler.dispatchToElement(new Sp(t,e),"drag",e.event);var o=this.handler.findHover(i,r,t).target,l=this._dropTarget;this._dropTarget=o,t!==o&&(l&&o!==l&&this.handler.dispatchToElement(new Sp(l,e),"dragleave",e.event),o&&o!==l&&this.handler.dispatchToElement(new Sp(o,e),"dragenter",e.event))}},n.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new Sp(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new Sp(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},n}();const QPe=jPe;var ZPe=function(){function n(e){e&&(this._$eventProcessor=e)}return n.prototype.on=function(e,t,i,r){this._$handlers||(this._$handlers={});var s=this._$handlers;if(typeof t=="function"&&(r=i,i=t,t=null),!i||!e)return this;var a=this._$eventProcessor;t!=null&&a&&a.normalizeQuery&&(t=a.normalizeQuery(t)),s[e]||(s[e]=[]);for(var o=0;o<s[e].length;o++)if(s[e][o].h===i)return this;var l={h:i,query:t,ctx:r||this,callAtLast:i.zrEventfulCallAtLast},c=s[e].length-1,u=s[e][c];return u&&u.callAtLast?s[e].splice(c,0,l):s[e].push(l),this},n.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},n.prototype.off=function(e,t){var i=this._$handlers;if(!i)return this;if(!e)return this._$handlers={},this;if(t){if(i[e]){for(var r=[],s=0,a=i[e].length;s<a;s++)i[e][s].h!==t&&r.push(i[e][s]);i[e]=r}i[e]&&i[e].length===0&&delete i[e]}else delete i[e];return this},n.prototype.trigger=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!this._$handlers)return this;var r=this._$handlers[e],s=this._$eventProcessor;if(r)for(var a=t.length,o=r.length,l=0;l<o;l++){var c=r[l];if(!(s&&s.filter&&c.query!=null&&!s.filter(e,c.query)))switch(a){case 0:c.h.call(c.ctx);break;case 1:c.h.call(c.ctx,t[0]);break;case 2:c.h.call(c.ctx,t[0],t[1]);break;default:c.h.apply(c.ctx,t);break}}return s&&s.afterTrigger&&s.afterTrigger(e),this},n.prototype.triggerWithContext=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!this._$handlers)return this;var r=this._$handlers[e],s=this._$eventProcessor;if(r)for(var a=t.length,o=t[a-1],l=r.length,c=0;c<l;c++){var u=r[c];if(!(s&&s.filter&&u.query!=null&&!s.filter(e,u.query)))switch(a){case 0:u.h.call(o);break;case 1:u.h.call(o,t[0]);break;case 2:u.h.call(o,t[0],t[1]);break;default:u.h.apply(o,t.slice(1,a-1));break}}return s&&s.afterTrigger&&s.afterTrigger(e),this},n}();const ac=ZPe;var JPe=Math.log(2);function hR(n,e,t,i,r,s){var a=i+"-"+r,o=n.length;if(s.hasOwnProperty(a))return s[a];if(e===1){var l=Math.round(Math.log((1<<o)-1&~r)/JPe);return n[t][l]}for(var c=i|1<<t,u=t+1;i&1<<u;)u++;for(var d=0,f=0,h=0;f<o;f++){var p=1<<f;p&r||(d+=(h%2?-1:1)*n[t][f]*hR(n,e-1,u,c,r|p,s),h++)}return s[a]=d,d}function U4(n,e){var t=[[n[0],n[1],1,0,0,0,-e[0]*n[0],-e[0]*n[1]],[0,0,0,n[0],n[1],1,-e[1]*n[0],-e[1]*n[1]],[n[2],n[3],1,0,0,0,-e[2]*n[2],-e[2]*n[3]],[0,0,0,n[2],n[3],1,-e[3]*n[2],-e[3]*n[3]],[n[4],n[5],1,0,0,0,-e[4]*n[4],-e[4]*n[5]],[0,0,0,n[4],n[5],1,-e[5]*n[4],-e[5]*n[5]],[n[6],n[7],1,0,0,0,-e[6]*n[6],-e[6]*n[7]],[0,0,0,n[6],n[7],1,-e[7]*n[6],-e[7]*n[7]]],i={},r=hR(t,8,0,0,0,i);if(r!==0){for(var s=[],a=0;a<8;a++)for(var o=0;o<8;o++)s[o]==null&&(s[o]=0),s[o]+=((a+o)%2?-1:1)*hR(t,7,a===0?1:0,1<<a,1<<o,i)/r*e[a];return function(l,c,u){var d=c*s[6]+u*s[7]+1;l[0]=(c*s[0]+u*s[1]+s[2])/d,l[1]=(c*s[3]+u*s[4]+s[5])/d}}}var H4="___zrEVENTSAVED",KT=[];function eDe(n,e,t,i,r){return pR(KT,e,i,r,!0)&&pR(n,t,KT[0],KT[1])}function pR(n,e,t,i,r){if(e.getBoundingClientRect&&Qn.domSupported&&!ZK(e)){var s=e[H4]||(e[H4]={}),a=tDe(e,s),o=nDe(a,s,r);if(o)return o(n,t,i),!0}return!1}function tDe(n,e){var t=e.markers;if(t)return t;t=e.markers=[];for(var i=["left","right"],r=["top","bottom"],s=0;s<4;s++){var a=document.createElement("div"),o=a.style,l=s%2,c=(s>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[l]+":0",r[c]+":0",i[1-l]+":auto",r[1-c]+":auto",""].join("!important;"),n.appendChild(a),t.push(a)}return t}function nDe(n,e,t){for(var i=t?"invTrans":"trans",r=e[i],s=e.srcCoords,a=[],o=[],l=!0,c=0;c<4;c++){var u=n[c].getBoundingClientRect(),d=2*c,f=u.left,h=u.top;a.push(f,h),l=l&&s&&f===s[d]&&h===s[d+1],o.push(n[c].offsetLeft,n[c].offsetTop)}return l&&r?r:(e.srcCoords=a,e[i]=t?U4(o,a):U4(a,o))}function ZK(n){return n.nodeName.toUpperCase()==="CANVAS"}var iDe=/([&<>"'])/g,rDe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ho(n){return n==null?"":(n+"").replace(iDe,function(e,t){return rDe[t]})}var sDe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,qT=[],aDe=Qn.browser.firefox&&+Qn.browser.version.split(".")[0]<39;function mR(n,e,t,i){return t=t||{},i?V4(n,e,t):aDe&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):V4(n,e,t),t}function V4(n,e,t){if(Qn.domSupported&&n.getBoundingClientRect){var i=e.clientX,r=e.clientY;if(ZK(n)){var s=n.getBoundingClientRect();t.zrX=i-s.left,t.zrY=r-s.top;return}else if(pR(qT,n,i,r)){t.zrX=qT[0],t.zrY=qT[1];return}}t.zrX=t.zrY=0}function K3(n){return n||window.event}function so(n,e,t){if(e=K3(e),e.zrX!=null)return e;var i=e.type,r=i&&i.indexOf("touch")>=0;if(r){var a=i!=="touchend"?e.targetTouches[0]:e.changedTouches[0];a&&mR(n,a,e,t)}else{mR(n,e,e,t);var s=oDe(e);e.zrDelta=s?s/120:-(e.detail||0)/3}var o=e.button;return e.which==null&&o!==void 0&&sDe.test(e.type)&&(e.which=o&1?1:o&2?3:o&4?2:0),e}function oDe(n){var e=n.wheelDelta;if(e)return e;var t=n.deltaX,i=n.deltaY;if(t==null||i==null)return e;var r=Math.abs(i!==0?i:t),s=i>0?-1:i<0?1:t>0?-1:1;return 3*r*s}function lDe(n,e,t,i){n.addEventListener(e,t,i)}function cDe(n,e,t,i){n.removeEventListener(e,t,i)}var JK=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0},uDe=function(){function n(){this._track=[]}return n.prototype.recognize=function(e,t,i){return this._doTrack(e,t,i),this._recognize(e)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(e,t,i){var r=e.touches;if(r){for(var s={points:[],touches:[],target:t,event:e},a=0,o=r.length;a<o;a++){var l=r[a],c=mR(i,l,{});s.points.push([c.zrX,c.zrY]),s.touches.push(l)}this._track.push(s)}},n.prototype._recognize=function(e){for(var t in XT)if(XT.hasOwnProperty(t)){var i=XT[t](this._track,e);if(i)return i}},n}();function $4(n){var e=n[1][0]-n[0][0],t=n[1][1]-n[0][1];return Math.sqrt(e*e+t*t)}function dDe(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}var XT={pinch:function(n,e){var t=n.length;if(t){var i=(n[t-1]||{}).points,r=(n[t-2]||{}).points||i;if(r&&r.length>1&&i&&i.length>1){var s=$4(i)/$4(r);!isFinite(s)&&(s=1),e.pinchScale=s;var a=dDe(i);return e.pinchX=a[0],e.pinchY=a[1],{type:"pinch",target:n[0].target,event:e}}}}};function v_(){return[1,0,0,1,0,0]}function q3(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function fDe(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function av(n,e,t){var i=e[0]*t[0]+e[2]*t[1],r=e[1]*t[0]+e[3]*t[1],s=e[0]*t[2]+e[2]*t[3],a=e[1]*t[2]+e[3]*t[3],o=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];return n[0]=i,n[1]=r,n[2]=s,n[3]=a,n[4]=o,n[5]=l,n}function vR(n,e,t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4]+t[0],n[5]=e[5]+t[1],n}function X3(n,e,t){var i=e[0],r=e[2],s=e[4],a=e[1],o=e[3],l=e[5],c=Math.sin(t),u=Math.cos(t);return n[0]=i*u+a*c,n[1]=-i*c+a*u,n[2]=r*u+o*c,n[3]=-r*c+u*o,n[4]=u*s+c*l,n[5]=u*l-c*s,n}function hDe(n,e,t){var i=t[0],r=t[1];return n[0]=e[0]*i,n[1]=e[1]*r,n[2]=e[2]*i,n[3]=e[3]*r,n[4]=e[4]*i,n[5]=e[5]*r,n}function eq(n,e){var t=e[0],i=e[2],r=e[4],s=e[1],a=e[3],o=e[5],l=t*a-s*i;return l?(l=1/l,n[0]=a*l,n[1]=-s*l,n[2]=-i*l,n[3]=t*l,n[4]=(i*o-a*r)*l,n[5]=(s*r-t*o)*l,n):null}var pDe=function(){function n(e,t){this.x=e||0,this.y=t||0}return n.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(e,t){return this.x=e,this.y=t,this},n.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},n.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},n.prototype.scale=function(e){this.x*=e,this.y*=e},n.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},n.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},n.prototype.dot=function(e){return this.x*e.x+this.y*e.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},n.prototype.distance=function(e){var t=this.x-e.x,i=this.y-e.y;return Math.sqrt(t*t+i*i)},n.prototype.distanceSquare=function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(e){if(e){var t=this.x,i=this.y;return this.x=e[0]*t+e[2]*i+e[4],this.y=e[1]*t+e[3]*i+e[5],this}},n.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},n.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},n.set=function(e,t,i){e.x=t,e.y=i},n.copy=function(e,t){e.x=t.x,e.y=t.y},n.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.lenSquare=function(e){return e.x*e.x+e.y*e.y},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.add=function(e,t,i){e.x=t.x+i.x,e.y=t.y+i.y},n.sub=function(e,t,i){e.x=t.x-i.x,e.y=t.y-i.y},n.scale=function(e,t,i){e.x=t.x*i,e.y=t.y*i},n.scaleAndAdd=function(e,t,i,r){e.x=t.x+i.x*r,e.y=t.y+i.y*r},n.lerp=function(e,t,i,r){var s=1-r;e.x=s*t.x+r*i.x,e.y=s*t.y+r*i.y},n}();const On=pDe;var oS=Math.min,lS=Math.max,df=new On,ff=new On,hf=new On,pf=new On,Jg=new On,e0=new On,mDe=function(){function n(e,t,i,r){i<0&&(e=e+i,i=-i),r<0&&(t=t+r,r=-r),this.x=e,this.y=t,this.width=i,this.height=r}return n.prototype.union=function(e){var t=oS(e.x,this.x),i=oS(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=lS(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=lS(e.y+e.height,this.y+this.height)-i:this.height=e.height,this.x=t,this.y=i},n.prototype.applyTransform=function(e){n.applyTransform(this,this,e)},n.prototype.calculateTransform=function(e){var t=this,i=e.width/t.width,r=e.height/t.height,s=v_();return vR(s,s,[-t.x,-t.y]),hDe(s,s,[i,r]),vR(s,s,[e.x,e.y]),s},n.prototype.intersect=function(e,t){if(!e)return!1;e instanceof n||(e=n.create(e));var i=this,r=i.x,s=i.x+i.width,a=i.y,o=i.y+i.height,l=e.x,c=e.x+e.width,u=e.y,d=e.y+e.height,f=!(s<l||c<r||o<u||d<a);if(t){var h=1/0,p=0,m=Math.abs(s-l),v=Math.abs(c-r),g=Math.abs(o-u),_=Math.abs(d-a),y=Math.min(m,v),S=Math.min(g,_);s<l||c<r?y>p&&(p=y,m<v?On.set(e0,-m,0):On.set(e0,v,0)):y<h&&(h=y,m<v?On.set(Jg,m,0):On.set(Jg,-v,0)),o<u||d<a?S>p&&(p=S,g<_?On.set(e0,0,-g):On.set(e0,0,_)):y<h&&(h=y,g<_?On.set(Jg,0,g):On.set(Jg,0,-_))}return t&&On.copy(t,f?Jg:e0),f},n.prototype.contain=function(e,t){var i=this;return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(e){n.copy(this,e)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return this.width===0||this.height===0},n.create=function(e){return new n(e.x,e.y,e.width,e.height)},n.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},n.applyTransform=function(e,t,i){if(!i){e!==t&&n.copy(e,t);return}if(i[1]<1e-5&&i[1]>-1e-5&&i[2]<1e-5&&i[2]>-1e-5){var r=i[0],s=i[3],a=i[4],o=i[5];e.x=t.x*r+a,e.y=t.y*s+o,e.width=t.width*r,e.height=t.height*s,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}df.x=hf.x=t.x,df.y=pf.y=t.y,ff.x=pf.x=t.x+t.width,ff.y=hf.y=t.y+t.height,df.transform(i),pf.transform(i),ff.transform(i),hf.transform(i),e.x=oS(df.x,ff.x,hf.x,pf.x),e.y=oS(df.y,ff.y,hf.y,pf.y);var l=lS(df.x,ff.x,hf.x,pf.x),c=lS(df.y,ff.y,hf.y,pf.y);e.width=l-e.x,e.height=c-e.y},n}();const Oi=mDe;var tq="silent";function vDe(n,e,t){return{type:n,event:t,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:gDe}}function gDe(){JK(this.event)}var yDe=function(n){Mn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.handler=null,t}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(ac),t0=function(){function n(e,t){this.x=e,this.y=t}return n}(),_De=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],YT=new Oi(0,0,0,0),nq=function(n){Mn(e,n);function e(t,i,r,s,a){var o=n.call(this)||this;return o._hovered=new t0(0,0),o.storage=t,o.painter=i,o.painterRoot=s,o._pointerSize=a,r=r||new yDe,o.proxy=null,o.setHandlerProxy(r),o._draggingMgr=new QPe(o),o}return e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(tt(_De,function(i){t.on&&t.on(i,this[i],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var i=t.zrX,r=t.zrY,s=iq(this,i,r),a=this._hovered,o=a.target;o&&!o.__zr&&(a=this.findHover(a.x,a.y),o=a.target);var l=this._hovered=s?new t0(i,r):this.findHover(i,r),c=l.target,u=this.proxy;u.setCursor&&u.setCursor(c?c.cursor:"default"),o&&c!==o&&this.dispatchToElement(a,"mouseout",t),this.dispatchToElement(l,"mousemove",t),c&&c!==o&&this.dispatchToElement(l,"mouseover",t)},e.prototype.mouseout=function(t){var i=t.zrEventControl;i!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),i!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new t0(0,0)},e.prototype.dispatch=function(t,i){var r=this[t];r&&r.call(this,i)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var i=this.proxy;i.setCursor&&i.setCursor(t)},e.prototype.dispatchToElement=function(t,i,r){t=t||{};var s=t.target;if(!(s&&s.silent)){for(var a="on"+i,o=vDe(i,t,r);s&&(s[a]&&(o.cancelBubble=!!s[a].call(s,o)),s.trigger(i,o),s=s.__hostTarget?s.__hostTarget:s.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(i,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,o),l.trigger&&l.trigger(i,o)}))}},e.prototype.findHover=function(t,i,r){var s=this.storage.getDisplayList(),a=new t0(t,i);if(G4(s,a,t,i,r),this._pointerSize&&!a.target){for(var o=[],l=this._pointerSize,c=l/2,u=new Oi(t-c,i-c,l,l),d=s.length-1;d>=0;d--){var f=s[d];f!==r&&!f.ignore&&!f.ignoreCoarsePointer&&(!f.parent||!f.parent.ignoreCoarsePointer)&&(YT.copy(f.getBoundingRect()),f.transform&&YT.applyTransform(f.transform),YT.intersect(u)&&o.push(f))}if(o.length)for(var h=4,p=Math.PI/12,m=Math.PI*2,v=0;v<c;v+=h)for(var g=0;g<m;g+=p){var _=t+v*Math.cos(g),y=i+v*Math.sin(g);if(G4(o,a,_,y,r),a.target)return a}}return a},e.prototype.processGesture=function(t,i){this._gestureMgr||(this._gestureMgr=new uDe);var r=this._gestureMgr;i==="start"&&r.clear();var s=r.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(i==="end"&&r.clear(),s){var a=s.type;t.gestureEvent=a;var o=new t0;o.target=s.target,this.dispatchToElement(o,a,s.event)}},e}(ac);tt(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){nq.prototype[n]=function(e){var t=e.zrX,i=e.zrY,r=iq(this,t,i),s,a;if((n!=="mouseup"||!r)&&(s=this.findHover(t,i),a=s.target),n==="mousedown")this._downEl=a,this._downPoint=[e.zrX,e.zrY],this._upEl=a;else if(n==="mouseup")this._upEl=a;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||fR(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(s,n,e)}});function bDe(n,e,t){if(n[n.rectHover?"rectContain":"contain"](e,t)){for(var i=n,r=void 0,s=!1;i;){if(i.ignoreClip&&(s=!0),!s){var a=i.getClipPath();if(a&&!a.contain(e,t))return!1;i.silent&&(r=!0)}var o=i.__hostTarget;i=o||i.parent}return r?tq:!0}return!1}function G4(n,e,t,i,r){for(var s=n.length-1;s>=0;s--){var a=n[s],o=void 0;if(a!==r&&!a.ignore&&(o=bDe(a,t,i))&&(!e.topTarget&&(e.topTarget=a),o!==tq)){e.target=a;break}}}function iq(n,e,t){var i=n.painter;return e<0||e>i.getWidth()||t<0||t>i.getHeight()}const SDe=nq;var rq=32,n0=7;function wDe(n){for(var e=0;n>=rq;)e|=n&1,n>>=1;return n+e}function W4(n,e,t,i){var r=e+1;if(r===t)return 1;if(i(n[r++],n[e])<0){for(;r<t&&i(n[r],n[r-1])<0;)r++;xDe(n,e,r)}else for(;r<t&&i(n[r],n[r-1])>=0;)r++;return r-e}function xDe(n,e,t){for(t--;e<t;){var i=n[e];n[e++]=n[t],n[t--]=i}}function K4(n,e,t,i,r){for(i===e&&i++;i<t;i++){for(var s=n[i],a=e,o=i,l;a<o;)l=a+o>>>1,r(s,n[l])<0?o=l:a=l+1;var c=i-a;switch(c){case 3:n[a+3]=n[a+2];case 2:n[a+2]=n[a+1];case 1:n[a+1]=n[a];break;default:for(;c>0;)n[a+c]=n[a+c-1],c--}n[a]=s}}function jT(n,e,t,i,r,s){var a=0,o=0,l=1;if(s(n,e[t+r])>0){for(o=i-r;l<o&&s(n,e[t+r+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),a+=r,l+=r}else{for(o=r+1;l<o&&s(n,e[t+r-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var c=a;a=r-l,l=r-c}for(a++;a<l;){var u=a+(l-a>>>1);s(n,e[t+u])>0?a=u+1:l=u}return l}function QT(n,e,t,i,r,s){var a=0,o=0,l=1;if(s(n,e[t+r])<0){for(o=r+1;l<o&&s(n,e[t+r-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var c=a;a=r-l,l=r-c}else{for(o=i-r;l<o&&s(n,e[t+r+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),a+=r,l+=r}for(a++;a<l;){var u=a+(l-a>>>1);s(n,e[t+u])<0?l=u:a=u+1}return l}function CDe(n,e){var t=n0,i,r,s=0;n.length;var a=[];i=[],r=[];function o(h,p){i[s]=h,r[s]=p,s+=1}function l(){for(;s>1;){var h=s-2;if(h>=1&&r[h-1]<=r[h]+r[h+1]||h>=2&&r[h-2]<=r[h]+r[h-1])r[h-1]<r[h+1]&&h--;else if(r[h]>r[h+1])break;u(h)}}function c(){for(;s>1;){var h=s-2;h>0&&r[h-1]<r[h+1]&&h--,u(h)}}function u(h){var p=i[h],m=r[h],v=i[h+1],g=r[h+1];r[h]=m+g,h===s-3&&(i[h+1]=i[h+2],r[h+1]=r[h+2]),s--;var _=QT(n[v],n,p,m,0,e);p+=_,m-=_,m!==0&&(g=jT(n[p+m-1],n,v,g,g-1,e),g!==0&&(m<=g?d(p,m,v,g):f(p,m,v,g)))}function d(h,p,m,v){var g=0;for(g=0;g<p;g++)a[g]=n[h+g];var _=0,y=m,S=h;if(n[S++]=n[y++],--v===0){for(g=0;g<p;g++)n[S+g]=a[_+g];return}if(p===1){for(g=0;g<v;g++)n[S+g]=n[y+g];n[S+v]=a[_];return}for(var w=t,x,T,C;;){x=0,T=0,C=!1;do if(e(n[y],a[_])<0){if(n[S++]=n[y++],T++,x=0,--v===0){C=!0;break}}else if(n[S++]=a[_++],x++,T=0,--p===1){C=!0;break}while((x|T)<w);if(C)break;do{if(x=QT(n[y],a,_,p,0,e),x!==0){for(g=0;g<x;g++)n[S+g]=a[_+g];if(S+=x,_+=x,p-=x,p<=1){C=!0;break}}if(n[S++]=n[y++],--v===0){C=!0;break}if(T=jT(a[_],n,y,v,0,e),T!==0){for(g=0;g<T;g++)n[S+g]=n[y+g];if(S+=T,y+=T,v-=T,v===0){C=!0;break}}if(n[S++]=a[_++],--p===1){C=!0;break}w--}while(x>=n0||T>=n0);if(C)break;w<0&&(w=0),w+=2}if(t=w,t<1&&(t=1),p===1){for(g=0;g<v;g++)n[S+g]=n[y+g];n[S+v]=a[_]}else{if(p===0)throw new Error;for(g=0;g<p;g++)n[S+g]=a[_+g]}}function f(h,p,m,v){var g=0;for(g=0;g<v;g++)a[g]=n[m+g];var _=h+p-1,y=v-1,S=m+v-1,w=0,x=0;if(n[S--]=n[_--],--p===0){for(w=S-(v-1),g=0;g<v;g++)n[w+g]=a[g];return}if(v===1){for(S-=p,_-=p,x=S+1,w=_+1,g=p-1;g>=0;g--)n[x+g]=n[w+g];n[S]=a[y];return}for(var T=t;;){var C=0,M=0,A=!1;do if(e(a[y],n[_])<0){if(n[S--]=n[_--],C++,M=0,--p===0){A=!0;break}}else if(n[S--]=a[y--],M++,C=0,--v===1){A=!0;break}while((C|M)<T);if(A)break;do{if(C=p-QT(a[y],n,h,p,p-1,e),C!==0){for(S-=C,_-=C,p-=C,x=S+1,w=_+1,g=C-1;g>=0;g--)n[x+g]=n[w+g];if(p===0){A=!0;break}}if(n[S--]=a[y--],--v===1){A=!0;break}if(M=v-jT(n[_],a,0,v,v-1,e),M!==0){for(S-=M,y-=M,v-=M,x=S+1,w=y+1,g=0;g<M;g++)n[x+g]=a[w+g];if(v<=1){A=!0;break}}if(n[S--]=n[_--],--p===0){A=!0;break}T--}while(C>=n0||M>=n0);if(A)break;T<0&&(T=0),T+=2}if(t=T,t<1&&(t=1),v===1){for(S-=p,_-=p,x=S+1,w=_+1,g=p-1;g>=0;g--)n[x+g]=n[w+g];n[S]=a[y]}else{if(v===0)throw new Error;for(w=S-(v-1),g=0;g<v;g++)n[w+g]=a[g]}}return{mergeRuns:l,forceMergeRuns:c,pushRun:o}}function x1(n,e,t,i){t||(t=0),i||(i=n.length);var r=i-t;if(!(r<2)){var s=0;if(r<rq){s=W4(n,t,i,e),K4(n,t,i,t+s,e);return}var a=CDe(n,e),o=wDe(r);do{if(s=W4(n,t,i,e),s<o){var l=r;l>o&&(l=o),K4(n,t,t+l,t+s,e),s=l}a.pushRun(t,s),a.mergeRuns(),r-=s,t+=s}while(r!==0);a.forceMergeRuns()}}var Oa=1,U0=2,Mm=4,q4=!1;function ZT(){q4||(q4=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function X4(n,e){return n.zlevel===e.zlevel?n.z===e.z?n.z2-e.z2:n.z-e.z:n.zlevel-e.zlevel}var MDe=function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=X4}return n.prototype.traverse=function(e,t){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(e,t)},n.prototype.getDisplayList=function(e,t){t=t||!1;var i=this._displayList;return(e||!i.length)&&this.updateDisplayList(t),i},n.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,i=this._displayList,r=0,s=t.length;r<s;r++)this._updateAndAddDisplayable(t[r],null,e);i.length=this._displayListLen,x1(i,X4)},n.prototype._updateAndAddDisplayable=function(e,t,i){if(!(e.ignore&&!i)){e.beforeUpdate(),e.update(),e.afterUpdate();var r=e.getClipPath();if(e.ignoreClip)t=null;else if(r){t?t=t.slice():t=[];for(var s=r,a=e;s;)s.parent=a,s.updateTransform(),t.push(s),a=s,s=s.getClipPath()}if(e.childrenRef){for(var o=e.childrenRef(),l=0;l<o.length;l++){var c=o[l];e.__dirty&&(c.__dirty|=Oa),this._updateAndAddDisplayable(c,t,i)}e.__dirty=0}else{var u=e;t&&t.length?u.__clipPaths=t:u.__clipPaths&&u.__clipPaths.length>0&&(u.__clipPaths=[]),isNaN(u.z)&&(ZT(),u.z=0),isNaN(u.z2)&&(ZT(),u.z2=0),isNaN(u.zlevel)&&(ZT(),u.zlevel=0),this._displayList[this._displayListLen++]=u}var d=e.getDecalElement&&e.getDecalElement();d&&this._updateAndAddDisplayable(d,t,i);var f=e.getTextGuideLine();f&&this._updateAndAddDisplayable(f,t,i);var h=e.getTextContent();h&&this._updateAndAddDisplayable(h,t,i)}},n.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},n.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,i=e.length;t<i;t++)this.delRoot(e[t]);return}var r=$i(this._roots,e);r>=0&&this._roots.splice(r,1)},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n}();const TDe=MDe;var sq;sq=Qn.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)};const gR=sq;var C1={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return .5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var e,t=.1,i=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=i/4):e=i*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/i)))},elasticOut:function(n){var e,t=.1,i=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=i/4):e=i*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*n)*Math.sin((n-e)*(2*Math.PI)/i)+1)},elasticInOut:function(n){var e,t=.1,i=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=i/4):e=i*Math.asin(1/t)/(2*Math.PI),(n*=2)<1?-.5*(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/i)):t*Math.pow(2,-10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/i)*.5+1)},backIn:function(n){var e=1.70158;return n*n*((e+1)*n-e)},backOut:function(n){var e=1.70158;return--n*n*((e+1)*n+e)+1},backInOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)},bounceIn:function(n){return 1-C1.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?C1.bounceIn(n*2)*.5:C1.bounceOut(n*2-1)*.5+.5}};const aq=C1;var cS=Math.pow,yd=Math.sqrt,Ox=1e-8,oq=1e-4,Y4=yd(3),uS=1/3,Ll=Sg(),po=Sg(),ov=Sg();function ld(n){return n>-Ox&&n<Ox}function lq(n){return n>Ox||n<-Ox}function is(n,e,t,i,r){var s=1-r;return s*s*(s*n+3*r*e)+r*r*(r*i+3*s*t)}function j4(n,e,t,i,r){var s=1-r;return 3*(((e-n)*s+2*(t-e)*r)*s+(i-t)*r*r)}function cq(n,e,t,i,r,s){var a=i+3*(e-t)-n,o=3*(t-e*2+n),l=3*(e-n),c=n-r,u=o*o-3*a*l,d=o*l-9*a*c,f=l*l-3*o*c,h=0;if(ld(u)&&ld(d))if(ld(o))s[0]=0;else{var p=-l/o;p>=0&&p<=1&&(s[h++]=p)}else{var m=d*d-4*u*f;if(ld(m)){var v=d/u,p=-o/a+v,g=-v/2;p>=0&&p<=1&&(s[h++]=p),g>=0&&g<=1&&(s[h++]=g)}else if(m>0){var _=yd(m),y=u*o+1.5*a*(-d+_),S=u*o+1.5*a*(-d-_);y<0?y=-cS(-y,uS):y=cS(y,uS),S<0?S=-cS(-S,uS):S=cS(S,uS);var p=(-o-(y+S))/(3*a);p>=0&&p<=1&&(s[h++]=p)}else{var w=(2*u*o-3*a*d)/(2*yd(u*u*u)),x=Math.acos(w)/3,T=yd(u),C=Math.cos(x),p=(-o-2*T*C)/(3*a),g=(-o+T*(C+Y4*Math.sin(x)))/(3*a),M=(-o+T*(C-Y4*Math.sin(x)))/(3*a);p>=0&&p<=1&&(s[h++]=p),g>=0&&g<=1&&(s[h++]=g),M>=0&&M<=1&&(s[h++]=M)}}return h}function uq(n,e,t,i,r){var s=6*t-12*e+6*n,a=9*e+3*i-3*n-9*t,o=3*e-3*n,l=0;if(ld(a)){if(lq(s)){var c=-o/s;c>=0&&c<=1&&(r[l++]=c)}}else{var u=s*s-4*a*o;if(ld(u))r[0]=-s/(2*a);else if(u>0){var d=yd(u),c=(-s+d)/(2*a),f=(-s-d)/(2*a);c>=0&&c<=1&&(r[l++]=c),f>=0&&f<=1&&(r[l++]=f)}}return l}function Nx(n,e,t,i,r,s){var a=(e-n)*r+n,o=(t-e)*r+e,l=(i-t)*r+t,c=(o-a)*r+a,u=(l-o)*r+o,d=(u-c)*r+c;s[0]=n,s[1]=a,s[2]=c,s[3]=d,s[4]=d,s[5]=u,s[6]=l,s[7]=i}function ADe(n,e,t,i,r,s,a,o,l,c,u){var d,f=.005,h=1/0,p,m,v,g;Ll[0]=l,Ll[1]=c;for(var _=0;_<1;_+=.05)po[0]=is(n,t,r,a,_),po[1]=is(e,i,s,o,_),v=sv(Ll,po),v<h&&(d=_,h=v);h=1/0;for(var y=0;y<32&&!(f<oq);y++)p=d-f,m=d+f,po[0]=is(n,t,r,a,p),po[1]=is(e,i,s,o,p),v=sv(po,Ll),p>=0&&v<h?(d=p,h=v):(ov[0]=is(n,t,r,a,m),ov[1]=is(e,i,s,o,m),g=sv(ov,Ll),m<=1&&g<h?(d=m,h=g):f*=.5);return u&&(u[0]=is(n,t,r,a,d),u[1]=is(e,i,s,o,d)),yd(h)}function EDe(n,e,t,i,r,s,a,o,l){for(var c=n,u=e,d=0,f=1/l,h=1;h<=l;h++){var p=h*f,m=is(n,t,r,a,p),v=is(e,i,s,o,p),g=m-c,_=v-u;d+=Math.sqrt(g*g+_*_),c=m,u=v}return d}function Cs(n,e,t,i){var r=1-i;return r*(r*n+2*i*e)+i*i*t}function Q4(n,e,t,i){return 2*((1-i)*(e-n)+i*(t-e))}function IDe(n,e,t,i,r){var s=n-2*e+t,a=2*(e-n),o=n-i,l=0;if(ld(s)){if(lq(a)){var c=-o/a;c>=0&&c<=1&&(r[l++]=c)}}else{var u=a*a-4*s*o;if(ld(u)){var c=-a/(2*s);c>=0&&c<=1&&(r[l++]=c)}else if(u>0){var d=yd(u),c=(-a+d)/(2*s),f=(-a-d)/(2*s);c>=0&&c<=1&&(r[l++]=c),f>=0&&f<=1&&(r[l++]=f)}}return l}function dq(n,e,t){var i=n+t-2*e;return i===0?.5:(n-e)/i}function Bx(n,e,t,i,r){var s=(e-n)*i+n,a=(t-e)*i+e,o=(a-s)*i+s;r[0]=n,r[1]=s,r[2]=o,r[3]=o,r[4]=a,r[5]=t}function RDe(n,e,t,i,r,s,a,o,l){var c,u=.005,d=1/0;Ll[0]=a,Ll[1]=o;for(var f=0;f<1;f+=.05){po[0]=Cs(n,t,r,f),po[1]=Cs(e,i,s,f);var h=sv(Ll,po);h<d&&(c=f,d=h)}d=1/0;for(var p=0;p<32&&!(u<oq);p++){var m=c-u,v=c+u;po[0]=Cs(n,t,r,m),po[1]=Cs(e,i,s,m);var h=sv(po,Ll);if(m>=0&&h<d)c=m,d=h;else{ov[0]=Cs(n,t,r,v),ov[1]=Cs(e,i,s,v);var g=sv(ov,Ll);v<=1&&g<d?(c=v,d=g):u*=.5}}return l&&(l[0]=Cs(n,t,r,c),l[1]=Cs(e,i,s,c)),yd(d)}function PDe(n,e,t,i,r,s,a){for(var o=n,l=e,c=0,u=1/a,d=1;d<=a;d++){var f=d*u,h=Cs(n,t,r,f),p=Cs(e,i,s,f),m=h-o,v=p-l;c+=Math.sqrt(m*m+v*v),o=h,l=p}return c}var DDe=/cubic-bezier\(([0-9,\.e ]+)\)/;function fq(n){var e=n&&DDe.exec(n);if(e){var t=e[1].split(","),i=+Bl(t[0]),r=+Bl(t[1]),s=+Bl(t[2]),a=+Bl(t[3]);if(isNaN(i+r+s+a))return;var o=[];return function(l){return l<=0?0:l>=1?1:cq(0,i,s,1,l,o)&&is(0,r,a,1,o[0])}}}var LDe=function(){function n(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||ga,this.ondestroy=e.ondestroy||ga,this.onrestart=e.onrestart||ga,e.easing&&this.setEasing(e.easing)}return n.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var i=this._life,r=e-this._startTime-this._pausedTime,s=r/i;s<0&&(s=0),s=Math.min(s,1);var a=this.easingFunc,o=a?a(s):s;if(this.onframe(o),s===1)if(this.loop){var l=r%i;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(e){this.easing=e,this.easingFunc=Ri(e)?e:aq[e]||fq(e)},n}();const kDe=LDe;var hq=function(){function n(e){this.value=e}return n}(),ODe=function(){function n(){this._len=0}return n.prototype.insert=function(e){var t=new hq(e);return this.insertEntry(t),t},n.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},n.prototype.remove=function(e){var t=e.prev,i=e.next;t?t.next=i:this.head=i,i?i.prev=t:this.tail=t,e.next=e.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n}(),NDe=function(){function n(e){this._list=new ODe,this._maxSize=10,this._map={},this._maxSize=e}return n.prototype.put=function(e,t){var i=this._list,r=this._map,s=null;if(r[e]==null){var a=i.len(),o=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=i.head;i.remove(l),delete r[l.key],s=l.value,this._lastRemovedEntry=l}o?o.value=t:o=new hq(t),o.key=e,i.insertEntry(o),r[e]=o}return s},n.prototype.get=function(e){var t=this._map[e],i=this._list;if(t!=null)return t!==i.tail&&(i.remove(t),i.insertEntry(t)),t.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n}();const _b=NDe;var Z4={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function uy(n){return n=Math.round(n),n<0?0:n>255?255:n}function J4(n){return n<0?0:n>1?1:n}function JT(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?uy(parseFloat(e)/100*255):uy(parseInt(e,10))}function dy(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?J4(parseFloat(e)/100):J4(parseFloat(e))}function eA(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function io(n,e,t,i,r){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function yR(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}var pq=new _b(20),dS=null;function wp(n,e){dS&&yR(dS,e),dS=pq.put(n,dS||e.slice())}function Eh(n,e){if(n){e=e||[];var t=pq.get(n);if(t)return yR(e,t);n=n+"";var i=n.replace(/ /g,"").toLowerCase();if(i in Z4)return yR(e,Z4[i]),wp(n,e),e;var r=i.length;if(i.charAt(0)==="#"){if(r===4||r===5){var s=parseInt(i.slice(1,4),16);if(!(s>=0&&s<=4095)){io(e,0,0,0,1);return}return io(e,(s&3840)>>4|(s&3840)>>8,s&240|(s&240)>>4,s&15|(s&15)<<4,r===5?parseInt(i.slice(4),16)/15:1),wp(n,e),e}else if(r===7||r===9){var s=parseInt(i.slice(1,7),16);if(!(s>=0&&s<=16777215)){io(e,0,0,0,1);return}return io(e,(s&16711680)>>16,(s&65280)>>8,s&255,r===9?parseInt(i.slice(7),16)/255:1),wp(n,e),e}return}var a=i.indexOf("("),o=i.indexOf(")");if(a!==-1&&o+1===r){var l=i.substr(0,a),c=i.substr(a+1,o-(a+1)).split(","),u=1;switch(l){case"rgba":if(c.length!==4)return c.length===3?io(e,+c[0],+c[1],+c[2],1):io(e,0,0,0,1);u=dy(c.pop());case"rgb":if(c.length>=3)return io(e,JT(c[0]),JT(c[1]),JT(c[2]),c.length===3?u:dy(c[3])),wp(n,e),e;io(e,0,0,0,1);return;case"hsla":if(c.length!==4){io(e,0,0,0,1);return}return c[3]=dy(c[3]),ez(c,e),wp(n,e),e;case"hsl":if(c.length!==3){io(e,0,0,0,1);return}return ez(c,e),wp(n,e),e;default:return}}io(e,0,0,0,1)}}function ez(n,e){var t=(parseFloat(n[0])%360+360)%360/360,i=dy(n[1]),r=dy(n[2]),s=r<=.5?r*(i+1):r+i-r*i,a=r*2-s;return e=e||[],io(e,uy(eA(a,s,t+1/3)*255),uy(eA(a,s,t)*255),uy(eA(a,s,t-1/3)*255),1),n.length===4&&(e[3]=n[3]),e}function tz(n,e){var t=Eh(n);if(t){for(var i=0;i<3;i++)e<0?t[i]=t[i]*(1-e)|0:t[i]=(255-t[i])*e+t[i]|0,t[i]>255?t[i]=255:t[i]<0&&(t[i]=0);return Y3(t,t.length===4?"rgba":"rgb")}}function Y3(n,e){if(!(!n||!n.length)){var t=n[0]+","+n[1]+","+n[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(t+=","+n[3]),e+"("+t+")"}}function Fx(n,e){var t=Eh(n);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*e:0}function BDe(n){return n.type==="linear"}function FDe(n){return n.type==="radial"}(function(){return Qn.hasGlobalWindow&&Ri(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer<"u"?function(n){return Buffer.from(n).toString("base64")}:function(n){return null}})();var _R=Array.prototype.slice;function Dc(n,e,t){return(e-n)*t+n}function tA(n,e,t,i){for(var r=e.length,s=0;s<r;s++)n[s]=Dc(e[s],t[s],i);return n}function zDe(n,e,t,i){for(var r=e.length,s=r&&e[0].length,a=0;a<r;a++){n[a]||(n[a]=[]);for(var o=0;o<s;o++)n[a][o]=Dc(e[a][o],t[a][o],i)}return n}function fS(n,e,t,i){for(var r=e.length,s=0;s<r;s++)n[s]=e[s]+t[s]*i;return n}function nz(n,e,t,i){for(var r=e.length,s=r&&e[0].length,a=0;a<r;a++){n[a]||(n[a]=[]);for(var o=0;o<s;o++)n[a][o]=e[a][o]+t[a][o]*i}return n}function UDe(n,e){for(var t=n.length,i=e.length,r=t>i?e:n,s=Math.min(t,i),a=r[s-1]||{color:[0,0,0,0],offset:0},o=s;o<Math.max(t,i);o++)r.push({offset:a.offset,color:a.color.slice()})}function HDe(n,e,t){var i=n,r=e;if(!(!i.push||!r.push)){var s=i.length,a=r.length;if(s!==a){var o=s>a;if(o)i.length=a;else for(var l=s;l<a;l++)i.push(t===1?r[l]:_R.call(r[l]))}for(var c=i[0]&&i[0].length,l=0;l<i.length;l++)if(t===1)isNaN(i[l])&&(i[l]=r[l]);else for(var u=0;u<c;u++)isNaN(i[l][u])&&(i[l][u]=r[l][u])}}function M1(n){if(xa(n)){var e=n.length;if(xa(n[0])){for(var t=[],i=0;i<e;i++)t.push(_R.call(n[i]));return t}return _R.call(n)}return n}function T1(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=n[3]==null?1:n[3],"rgba("+n.join(",")+")"}function VDe(n){return xa(n&&n[0])?2:1}var hS=0,A1=1,mq=2,H0=3,bR=4,SR=5,iz=6;function rz(n){return n===bR||n===SR}function pS(n){return n===A1||n===mq}var i0=[0,0,0,0],$De=function(){function n(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(e,t,i){this._needsSort=!0;var r=this.keyframes,s=r.length,a=!1,o=iz,l=t;if(xa(t)){var c=VDe(t);o=c,(c===1&&!vr(t[0])||c===2&&!vr(t[0][0]))&&(a=!0)}else if(vr(t)&&!FPe(t))o=hS;else if(Rn(t))if(!isNaN(+t))o=hS;else{var u=Eh(t);u&&(l=u,o=H0)}else if(AM(t)){var d=Nt({},l);d.colorStops=hi(t.colorStops,function(h){return{offset:h.offset,color:Eh(h.color)}}),BDe(t)?o=bR:FDe(t)&&(o=SR),l=d}s===0?this.valType=o:(o!==this.valType||o===iz)&&(a=!0),this.discrete=this.discrete||a;var f={time:e,value:l,rawValue:t,percent:0};return i&&(f.easing=i,f.easingFunc=Ri(i)?i:aq[i]||fq(i)),r.push(f),f},n.prototype.prepare=function(e,t){var i=this.keyframes;this._needsSort&&i.sort(function(m,v){return m.time-v.time});for(var r=this.valType,s=i.length,a=i[s-1],o=this.discrete,l=pS(r),c=rz(r),u=0;u<s;u++){var d=i[u],f=d.value,h=a.value;d.percent=d.time/e,o||(l&&u!==s-1?HDe(f,h,r):c&&UDe(f.colorStops,h.colorStops))}if(!o&&r!==SR&&t&&this.needsAnimate()&&t.needsAnimate()&&r===t.valType&&!t._finished){this._additiveTrack=t;for(var p=i[0].value,u=0;u<s;u++)r===hS?i[u].additiveValue=i[u].value-p:r===H0?i[u].additiveValue=fS([],i[u].value,p,-1):pS(r)&&(i[u].additiveValue=r===A1?fS([],i[u].value,p,-1):nz([],i[u].value,p,-1))}},n.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var i=this._additiveTrack!=null,r=i?"additiveValue":"value",s=this.valType,a=this.keyframes,o=a.length,l=this.propName,c=s===H0,u,d=this._lastFr,f=Math.min,h,p;if(o===1)h=p=a[0];else{if(t<0)u=0;else if(t<this._lastFrP){var m=f(d+1,o-1);for(u=m;u>=0&&!(a[u].percent<=t);u--);u=f(u,o-2)}else{for(u=d;u<o&&!(a[u].percent>t);u++);u=f(u-1,o-2)}p=a[u+1],h=a[u]}if(h&&p){this._lastFr=u,this._lastFrP=t;var v=p.percent-h.percent,g=v===0?1:f((t-h.percent)/v,1);p.easingFunc&&(g=p.easingFunc(g));var _=i?this._additiveValue:c?i0:e[l];if((pS(s)||c)&&!_&&(_=this._additiveValue=[]),this.discrete)e[l]=g<1?h.rawValue:p.rawValue;else if(pS(s))s===A1?tA(_,h[r],p[r],g):zDe(_,h[r],p[r],g);else if(rz(s)){var y=h[r],S=p[r],w=s===bR;e[l]={type:w?"linear":"radial",x:Dc(y.x,S.x,g),y:Dc(y.y,S.y,g),colorStops:hi(y.colorStops,function(T,C){var M=S.colorStops[C];return{offset:Dc(T.offset,M.offset,g),color:T1(tA([],T.color,M.color,g))}}),global:S.global},w?(e[l].x2=Dc(y.x2,S.x2,g),e[l].y2=Dc(y.y2,S.y2,g)):e[l].r=Dc(y.r,S.r,g)}else if(c)tA(_,h[r],p[r],g),i||(e[l]=T1(_));else{var x=Dc(h[r],p[r],g);i?this._additiveValue=x:e[l]=x}i&&this._addToTarget(e)}}},n.prototype._addToTarget=function(e){var t=this.valType,i=this.propName,r=this._additiveValue;t===hS?e[i]=e[i]+r:t===H0?(Eh(e[i],i0),fS(i0,i0,r,1),e[i]=T1(i0)):t===A1?fS(e[i],e[i],r,1):t===mq&&nz(e[i],e[i],r,1)},n}(),GDe=function(){function n(e,t,i,r){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&r){G3("Can' use additive animation on looped animation.");return}this._additiveAnimators=r,this._allowDiscrete=i}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(e){this._target=e},n.prototype.when=function(e,t,i){return this.whenWithKeys(e,t,mr(t),i)},n.prototype.whenWithKeys=function(e,t,i,r){for(var s=this._tracks,a=0;a<i.length;a++){var o=i[a],l=s[o];if(!l){l=s[o]=new $De(o);var c=void 0,u=this._getAdditiveTrack(o);if(u){var d=u.keyframes,f=d[d.length-1];c=f&&f.value,u.valType===H0&&c&&(c=T1(c))}else c=this._target[o];if(c==null)continue;e>0&&l.addKeyframe(0,M1(c),r),this._trackKeys.push(o)}l.addKeyframe(e,M1(t[o]),r)}return this._maxTime=Math.max(this._maxTime,e),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,i=0;i<t;i++)e[i].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var i=0;i<t.length;i++)t[i].call(this)},n.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,i=0;i<t.length;i++)e[t[i]].setFinished()},n.prototype._getAdditiveTrack=function(e){var t,i=this._additiveAnimators;if(i)for(var r=0;r<i.length;r++){var s=i[r].getTrack(e);s&&(t=s)}return t},n.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,i=[],r=this._maxTime||0,s=0;s<this._trackKeys.length;s++){var a=this._trackKeys[s],o=this._tracks[a],l=this._getAdditiveTrack(a),c=o.keyframes,u=c.length;if(o.prepare(r,l),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var d=c[u-1];d&&(t._target[o.propName]=d.rawValue),o.setFinished()}else i.push(o)}if(i.length||this._force){var f=new kDe({life:r,loop:this._loop,delay:this._delay||0,onframe:function(h){t._started=2;var p=t._additiveAnimators;if(p){for(var m=!1,v=0;v<p.length;v++)if(p[v]._clip){m=!0;break}m||(t._additiveAnimators=null)}for(var v=0;v<i.length;v++)i[v].step(t._target,h);var g=t._onframeCbs;if(g)for(var v=0;v<g.length;v++)g[v](t._target,h)},ondestroy:function(){t._doneCallback()}});this._clip=f,this.animation&&this.animation.addClip(f),e&&f.setEasing(e)}else this._doneCallback();return this}},n.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},n.prototype.delay=function(e){return this._delay=e,this},n.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},n.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},n.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(e){return this._tracks[e]},n.prototype.getTracks=function(){var e=this;return hi(this._trackKeys,function(t){return e._tracks[t]})},n.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var i=this._tracks,r=this._trackKeys,s=0;s<e.length;s++){var a=i[e[s]];a&&!a.isFinished()&&(t?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var o=!0,s=0;s<r.length;s++)if(!i[r[s]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},n.prototype.saveTo=function(e,t,i){if(e){t=t||this._trackKeys;for(var r=0;r<t.length;r++){var s=t[r],a=this._tracks[s];if(!(!a||a.isFinished())){var o=a.keyframes,l=o[i?0:o.length-1];l&&(e[s]=M1(l.rawValue))}}}},n.prototype.__changeFinalValue=function(e,t){t=t||mr(e);for(var i=0;i<t.length;i++){var r=t[i],s=this._tracks[r];if(s){var a=s.keyframes;if(a.length>1){var o=a.pop();s.addKeyframe(o.time,e[r]),s.prepare(this._maxTime,s.getAdditiveTrack())}}}},n}();const j3=GDe;function zm(){return new Date().getTime()}var WDe=function(n){Mn(e,n);function e(t){var i=n.call(this)||this;return i._running=!1,i._time=0,i._pausedTime=0,i._pauseStart=0,i._paused=!1,t=t||{},i.stage=t.stage||{},i}return e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var i=t.getClip();i&&this.addClip(i)},e.prototype.removeClip=function(t){if(t.animation){var i=t.prev,r=t.next;i?i.next=r:this._head=r,r?r.prev=i:this._tail=i,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var i=t.getClip();i&&this.removeClip(i),t.animation=null},e.prototype.update=function(t){for(var i=zm()-this._pausedTime,r=i-this._time,s=this._head;s;){var a=s.next,o=s.step(i,r);o&&(s.ondestroy(),this.removeClip(s)),s=a}this._time=i,t||(this.trigger("frame",r),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0;function i(){t._running&&(gR(i),!t._paused&&t.update())}gR(i)},e.prototype.start=function(){this._running||(this._time=zm(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=zm(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=zm()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var i=t.next;t.prev=t.next=t.animation=null,t=i}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(t,i){i=i||{},this.start();var r=new j3(t,i.loop);return this.addAnimator(r),r},e}(ac);const KDe=WDe;var qDe=300,nA=Qn.domSupported,iA=function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},i=hi(n,function(r){var s=r.replace("mouse","pointer");return t.hasOwnProperty(s)?s:r});return{mouse:n,touch:e,pointer:i}}(),sz={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},az=!1;function wR(n){var e=n.pointerType;return e==="pen"||e==="touch"}function XDe(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function rA(n){n&&(n.zrByTouch=!0)}function YDe(n,e){return so(n.dom,new jDe(n,e),!0)}function vq(n,e){for(var t=e,i=!1;t&&t.nodeType!==9&&!(i=t.domBelongToZr||t!==e&&t===n.painterRoot);)t=t.parentNode;return i}var jDe=function(){function n(e,t){this.stopPropagation=ga,this.stopImmediatePropagation=ga,this.preventDefault=ga,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}return n}(),Qo={mousedown:function(n){n=so(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=so(this.dom,n);var e=this.__mayPointerCapture;e&&(n.zrX!==e[0]||n.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=so(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=so(this.dom,n);var e=n.toElement||n.relatedTarget;vq(this,e)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){az=!0,n=so(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){az||(n=so(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=so(this.dom,n),rA(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),Qo.mousemove.call(this,n),Qo.mousedown.call(this,n)},touchmove:function(n){n=so(this.dom,n),rA(n),this.handler.processGesture(n,"change"),Qo.mousemove.call(this,n)},touchend:function(n){n=so(this.dom,n),rA(n),this.handler.processGesture(n,"end"),Qo.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<qDe&&Qo.click.call(this,n)},pointerdown:function(n){Qo.mousedown.call(this,n)},pointermove:function(n){wR(n)||Qo.mousemove.call(this,n)},pointerup:function(n){Qo.mouseup.call(this,n)},pointerout:function(n){wR(n)||Qo.mouseout.call(this,n)}};tt(["click","dblclick","contextmenu"],function(n){Qo[n]=function(e){e=so(this.dom,e),this.trigger(n,e)}});var xR={pointermove:function(n){wR(n)||xR.mousemove.call(this,n)},pointerup:function(n){xR.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),e&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function QDe(n,e){var t=e.domHandlers;Qn.pointerEventsSupported?tt(iA.pointer,function(i){E1(e,i,function(r){t[i].call(n,r)})}):(Qn.touchEventsSupported&&tt(iA.touch,function(i){E1(e,i,function(r){t[i].call(n,r),XDe(e)})}),tt(iA.mouse,function(i){E1(e,i,function(r){r=K3(r),e.touching||t[i].call(n,r)})}))}function ZDe(n,e){Qn.pointerEventsSupported?tt(sz.pointer,t):Qn.touchEventsSupported||tt(sz.mouse,t);function t(i){function r(s){s=K3(s),vq(n,s.target)||(s=YDe(n,s),e.domHandlers[i].call(n,s))}E1(e,i,r,{capture:!0})}}function E1(n,e,t,i){n.mounted[e]=t,n.listenerOpts[e]=i,lDe(n.domTarget,e,t,i)}function sA(n){var e=n.mounted;for(var t in e)e.hasOwnProperty(t)&&cDe(n.domTarget,t,e[t],n.listenerOpts[t]);n.mounted={}}var oz=function(){function n(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}return n}(),JDe=function(n){Mn(e,n);function e(t,i){var r=n.call(this)||this;return r.__pointerCapturing=!1,r.dom=t,r.painterRoot=i,r._localHandlerScope=new oz(t,Qo),nA&&(r._globalHandlerScope=new oz(document,xR)),QDe(r,r._localHandlerScope),r}return e.prototype.dispose=function(){sA(this._localHandlerScope),nA&&sA(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,nA&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var i=this._globalHandlerScope;t?ZDe(this,i):sA(i)}},e}(ac);const eLe=JDe;var gq=1;Qn.hasGlobalWindow&&(gq=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var zx=gq,CR=.4,MR="#333",TR="#ccc",tLe="#eee",lz=q3,cz=5e-5;function mf(n){return n>cz||n<-cz}var vf=[],xp=[],aA=v_(),oA=Math.abs,nLe=function(){function n(){}return n.prototype.getLocalTransform=function(e){return n.getLocalTransform(this,e)},n.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},n.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},n.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},n.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},n.prototype.needLocalTransform=function(){return mf(this.rotation)||mf(this.x)||mf(this.y)||mf(this.scaleX-1)||mf(this.scaleY-1)||mf(this.skewX)||mf(this.skewY)},n.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),i=this.transform;if(!(t||e)){i&&(lz(i),this.invTransform=null);return}i=i||v_(),t?this.getLocalTransform(i):lz(i),e&&(t?av(i,e,i):fDe(i,e)),this.transform=i,this._resolveGlobalScaleRatio(i)},n.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(vf);var i=vf[0]<0?-1:1,r=vf[1]<0?-1:1,s=((vf[0]-i)*t+i)/vf[0]||0,a=((vf[1]-r)*t+r)/vf[1]||0;e[0]*=s,e[1]*=s,e[2]*=a,e[3]*=a}this.invTransform=this.invTransform||v_(),eq(this.invTransform,e)},n.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},n.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],i=e[2]*e[2]+e[3]*e[3],r=Math.atan2(e[1],e[0]),s=Math.PI/2+r-Math.atan2(e[3],e[2]);i=Math.sqrt(i)*Math.cos(s),t=Math.sqrt(t),this.skewX=s,this.skewY=0,this.rotation=-r,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=i,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(av(xp,e.invTransform,t),t=xp);var i=this.originX,r=this.originY;(i||r)&&(aA[4]=i,aA[5]=r,av(xp,t,aA),xp[4]-=i,xp[5]-=r,t=xp),this.setLocalTransform(t)}},n.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},n.prototype.transformCoordToLocal=function(e,t){var i=[e,t],r=this.invTransform;return r&&Gl(i,i,r),i},n.prototype.transformCoordToGlobal=function(e,t){var i=[e,t],r=this.transform;return r&&Gl(i,i,r),i},n.prototype.getLineScale=function(){var e=this.transform;return e&&oA(e[0]-1)>1e-10&&oA(e[3]-1)>1e-10?Math.sqrt(oA(e[0]*e[3]-e[2]*e[1])):1},n.prototype.copyTransform=function(e){iLe(this,e)},n.getLocalTransform=function(e,t){t=t||[];var i=e.originX||0,r=e.originY||0,s=e.scaleX,a=e.scaleY,o=e.anchorX,l=e.anchorY,c=e.rotation||0,u=e.x,d=e.y,f=e.skewX?Math.tan(e.skewX):0,h=e.skewY?Math.tan(-e.skewY):0;if(i||r||o||l){var p=i+o,m=r+l;t[4]=-p*s-f*m*a,t[5]=-m*a-h*p*s}else t[4]=t[5]=0;return t[0]=s,t[3]=a,t[1]=h*s,t[2]=f*a,c&&X3(t,t,c),t[4]+=i+u,t[5]+=r+d,t},n.initDefaultProps=function(){var e=n.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),n}(),g_=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function iLe(n,e){for(var t=0;t<g_.length;t++){var i=g_[t];n[i]=e[i]}}const Q3=nLe;var uz={};function Ha(n,e){e=e||Gh;var t=uz[e];t||(t=uz[e]=new _b(500));var i=t.get(n);return i==null&&(i=bg.measureText(n,e).width,t.put(n,i)),i}function dz(n,e,t,i){var r=Ha(n,e),s=Z3(e),a=V0(0,r,t),o=Tm(0,s,i),l=new Oi(a,o,r,s);return l}function yq(n,e,t,i){var r=((n||"")+"").split(`
`),s=r.length;if(s===1)return dz(r[0],e,t,i);for(var a=new Oi(0,0,0,0),o=0;o<r.length;o++){var l=dz(r[o],e,t,i);o===0?a.copy(l):a.union(l)}return a}function V0(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function Tm(n,e,t){return t==="middle"?n-=e/2:t==="bottom"&&(n-=e),n}function Z3(n){return Ha("",n)}function Fv(n,e){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*e:parseFloat(n):n}function _q(n,e,t){var i=e.position||"inside",r=e.distance!=null?e.distance:5,s=t.height,a=t.width,o=s/2,l=t.x,c=t.y,u="left",d="top";if(i instanceof Array)l+=Fv(i[0],t.width),c+=Fv(i[1],t.height),u=null,d=null;else switch(i){case"left":l-=r,c+=o,u="right",d="middle";break;case"right":l+=r+a,c+=o,d="middle";break;case"top":l+=a/2,c-=r,u="center",d="bottom";break;case"bottom":l+=a/2,c+=s+r,u="center";break;case"inside":l+=a/2,c+=o,u="center",d="middle";break;case"insideLeft":l+=r,c+=o,d="middle";break;case"insideRight":l+=a-r,c+=o,u="right",d="middle";break;case"insideTop":l+=a/2,c+=r,u="center";break;case"insideBottom":l+=a/2,c+=s-r,u="center",d="bottom";break;case"insideTopLeft":l+=r,c+=r;break;case"insideTopRight":l+=a-r,c+=r,u="right";break;case"insideBottomLeft":l+=r,c+=s-r,d="bottom";break;case"insideBottomRight":l+=a-r,c+=s-r,u="right",d="bottom";break}return n=n||{},n.x=l,n.y=c,n.align=u,n.verticalAlign=d,n}var lA="__zr_normal__",cA=g_.concat(["ignore"]),rLe=zd(g_,function(n,e){return n[e]=!0,n},{ignore:!1}),Cp={},sLe=new Oi(0,0,0,0),J3=function(){function n(e){this.id=qK(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return n.prototype._init=function(e){this.attr(e)},n.prototype.drift=function(e,t,i){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var r=this.transform;r||(r=this.transform=[1,0,0,1,0,0]),r[4]+=e,r[5]+=t,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var i=this.textConfig,r=i.local,s=t.innerTransformable,a=void 0,o=void 0,l=!1;s.parent=r?this:null;var c=!1;if(s.copyTransform(t),i.position!=null){var u=sLe;i.layoutRect?u.copy(i.layoutRect):u.copy(this.getBoundingRect()),r||u.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Cp,i,u):_q(Cp,i,u),s.x=Cp.x,s.y=Cp.y,a=Cp.align,o=Cp.verticalAlign;var d=i.origin;if(d&&i.rotation!=null){var f=void 0,h=void 0;d==="center"?(f=u.width*.5,h=u.height*.5):(f=Fv(d[0],u.width),h=Fv(d[1],u.height)),c=!0,s.originX=-s.x+f+(r?0:u.x),s.originY=-s.y+h+(r?0:u.y)}}i.rotation!=null&&(s.rotation=i.rotation);var p=i.offset;p&&(s.x+=p[0],s.y+=p[1],c||(s.originX=-p[0],s.originY=-p[1]));var m=i.inside==null?typeof i.position=="string"&&i.position.indexOf("inside")>=0:i.inside,v=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),g=void 0,_=void 0,y=void 0;m&&this.canBeInsideText()?(g=i.insideFill,_=i.insideStroke,(g==null||g==="auto")&&(g=this.getInsideTextFill()),(_==null||_==="auto")&&(_=this.getInsideTextStroke(g),y=!0)):(g=i.outsideFill,_=i.outsideStroke,(g==null||g==="auto")&&(g=this.getOutsideFill()),(_==null||_==="auto")&&(_=this.getOutsideStroke(g),y=!0)),g=g||"#000",(g!==v.fill||_!==v.stroke||y!==v.autoStroke||a!==v.align||o!==v.verticalAlign)&&(l=!0,v.fill=g,v.stroke=_,v.autoStroke=y,v.align=a,v.verticalAlign=o,t.setDefaultTextStyle(v)),t.__dirty|=Oa,l&&t.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(e){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?TR:MR},n.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),i=typeof t=="string"&&Eh(t);i||(i=[255,255,255,1]);for(var r=i[3],s=this.__zr.isDarkMode(),a=0;a<3;a++)i[a]=i[a]*r+(s?0:255)*(1-r);return i[3]=1,Y3(i,"rgba")},n.prototype.traverse=function(e,t){},n.prototype.attrKV=function(e,t){e==="textConfig"?this.setTextConfig(t):e==="textContent"?this.setTextContent(t):e==="clipPath"?this.setClipPath(t):e==="extra"?(this.extra=this.extra||{},Nt(this.extra,t)):this[e]=t},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(e,t){if(typeof e=="string")this.attrKV(e,t);else if(Ln(e))for(var i=e,r=mr(i),s=0;s<r.length;s++){var a=r[s];this.attrKV(a,e[a])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,i=0;i<this.animators.length;i++){var r=this.animators[i],s=r.__fromStateTransition;if(!(r.getLoop()||s&&s!==lA)){var a=r.targetName,o=a?t[a]:t;r.saveTo(o)}}},n.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,cA)},n.prototype._savePrimaryToNormal=function(e,t,i){for(var r=0;r<i.length;r++){var s=i[r];e[s]!=null&&!(s in t)&&(t[s]=this[s])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(e){return this.states[e]},n.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},n.prototype.clearStates=function(e){this.useState(lA,!1,e)},n.prototype.useState=function(e,t,i,r){var s=e===lA,a=this.hasState();if(!(!a&&s)){var o=this.currentStates,l=this.stateTransition;if(!($i(o,e)>=0&&(t||o.length===1))){var c;if(this.stateProxy&&!s&&(c=this.stateProxy(e)),c||(c=this.states&&this.states[e]),!c&&!s){G3("State "+e+" not exists.");return}s||this.saveCurrentToNormalState(c);var u=!!(c&&c.hoverLayer||r);u&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,c,this._normalState,t,!i&&!this.__inHover&&l&&l.duration>0,l);var d=this._textContent,f=this._textGuide;return d&&d.useState(e,t,i,u),f&&f.useState(e,t,i,u),s?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!u&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Oa),c}}},n.prototype.useStates=function(e,t,i){if(!e.length)this.clearStates();else{var r=[],s=this.currentStates,a=e.length,o=a===s.length;if(o){for(var l=0;l<a;l++)if(e[l]!==s[l]){o=!1;break}}if(o)return;for(var l=0;l<a;l++){var c=e[l],u=void 0;this.stateProxy&&(u=this.stateProxy(c,e)),u||(u=this.states[c]),u&&r.push(u)}var d=r[a-1],f=!!(d&&d.hoverLayer||i);f&&this._toggleHoverLayerFlag(!0);var h=this._mergeStates(r),p=this.stateTransition;this.saveCurrentToNormalState(h),this._applyStateObj(e.join(","),h,this._normalState,!1,!t&&!this.__inHover&&p&&p.duration>0,p);var m=this._textContent,v=this._textGuide;m&&m.useStates(e,t,f),v&&v.useStates(e,t,f),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!f&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Oa)}},n.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},n.prototype.removeState=function(e){var t=$i(this.currentStates,e);if(t>=0){var i=this.currentStates.slice();i.splice(t,1),this.useStates(i)}},n.prototype.replaceState=function(e,t,i){var r=this.currentStates.slice(),s=$i(r,e),a=$i(r,t)>=0;s>=0?a?r.splice(s,1):r[s]=t:i&&!a&&r.push(t),this.useStates(r)},n.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},n.prototype._mergeStates=function(e){for(var t={},i,r=0;r<e.length;r++){var s=e[r];Nt(t,s),s.textConfig&&(i=i||{},Nt(i,s.textConfig))}return i&&(t.textConfig=i),t},n.prototype._applyStateObj=function(e,t,i,r,s,a){var o=!(t&&r);t&&t.textConfig?(this.textConfig=Nt({},r?this.textConfig:i.textConfig),Nt(this.textConfig,t.textConfig)):o&&i.textConfig&&(this.textConfig=i.textConfig);for(var l={},c=!1,u=0;u<cA.length;u++){var d=cA[u],f=s&&rLe[d];t&&t[d]!=null?f?(c=!0,l[d]=t[d]):this[d]=t[d]:o&&i[d]!=null&&(f?(c=!0,l[d]=i[d]):this[d]=i[d])}if(!s)for(var u=0;u<this.animators.length;u++){var h=this.animators[u],p=h.targetName;h.getLoop()||h.__changeFinalValue(p?(t||i)[p]:t||i)}c&&this._transitionState(e,l,a)},n.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},n.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},n.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new Q3,this._attachComponent(e),this._textContent=e,this.markRedraw())},n.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),Nt(this.textConfig,e),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=Oa;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,i=this._textGuide;t&&(t.__inHover=e),i&&(i.__inHover=e)},n.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var i=0;i<t.length;i++)e.animation.addAnimator(t[i]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},n.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var i=0;i<t.length;i++)e.animation.removeAnimator(t[i]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},n.prototype.animate=function(e,t,i){var r=e?this[e]:this,s=new j3(r,t,i);return e&&(s.targetName=e),this.addAnimator(s,e),s},n.prototype.addAnimator=function(e,t){var i=this.__zr,r=this;e.during(function(){r.updateDuringAnimation(t)}).done(function(){var s=r.animators,a=$i(s,e);a>=0&&s.splice(a,1)}),this.animators.push(e),i&&i.animation.addAnimator(e),i&&i.wakeUp()},n.prototype.updateDuringAnimation=function(e){this.markRedraw()},n.prototype.stopAnimation=function(e,t){for(var i=this.animators,r=i.length,s=[],a=0;a<r;a++){var o=i[a];!e||e===o.scope?o.stop(t):s.push(o)}return this.animators=s,this},n.prototype.animateTo=function(e,t,i){uA(this,e,t,i)},n.prototype.animateFrom=function(e,t,i){uA(this,e,t,i,!0)},n.prototype._transitionState=function(e,t,i,r){for(var s=uA(this,t,i,r),a=0;a<s.length;a++)s[a].__fromStateTransition=e},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var e=n.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=Oa;function t(i,r,s,a){Object.defineProperty(e,i,{get:function(){if(!this[r]){var l=this[r]=[];o(this,l)}return this[r]},set:function(l){this[s]=l[0],this[a]=l[1],this[r]=l,o(this,l)}});function o(l,c){Object.defineProperty(c,0,{get:function(){return l[s]},set:function(u){l[s]=u}}),Object.defineProperty(c,1,{get:function(){return l[a]},set:function(u){l[a]=u}})}}Object.defineProperty&&(t("position","_legacyPos","x","y"),t("scale","_legacyScale","scaleX","scaleY"),t("origin","_legacyOrigin","originX","originY"))}(),n}();gu(J3,ac);gu(J3,Q3);function uA(n,e,t,i,r){t=t||{};var s=[];bq(n,"",n,e,t,i,s,r);var a=s.length,o=!1,l=t.done,c=t.aborted,u=function(){o=!0,a--,a<=0&&(o?l&&l():c&&c())},d=function(){a--,a<=0&&(o?l&&l():c&&c())};a||l&&l(),s.length>0&&t.during&&s[0].during(function(p,m){t.during(m)});for(var f=0;f<s.length;f++){var h=s[f];u&&h.done(u),d&&h.aborted(d),t.force&&h.duration(t.duration),h.start(t.easing)}return s}function dA(n,e,t){for(var i=0;i<t;i++)n[i]=e[i]}function aLe(n){return xa(n[0])}function oLe(n,e,t){if(xa(e[t]))if(xa(n[t])||(n[t]=[]),Ka(e[t])){var i=e[t].length;n[t].length!==i&&(n[t]=new e[t].constructor(i),dA(n[t],e[t],i))}else{var r=e[t],s=n[t],a=r.length;if(aLe(r))for(var o=r[0].length,l=0;l<a;l++)s[l]?dA(s[l],r[l],o):s[l]=Array.prototype.slice.call(r[l]);else dA(s,r,a);s.length=r.length}else n[t]=e[t]}function lLe(n,e){return n===e||xa(n)&&xa(e)&&cLe(n,e)}function cLe(n,e){var t=n.length;if(t!==e.length)return!1;for(var i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function bq(n,e,t,i,r,s,a,o){for(var l=mr(i),c=r.duration,u=r.delay,d=r.additive,f=r.setToFinal,h=!Ln(s),p=n.animators,m=[],v=0;v<l.length;v++){var g=l[v],_=i[g];if(_!=null&&t[g]!=null&&(h||s[g]))if(Ln(_)&&!xa(_)&&!AM(_)){if(e){o||(t[g]=_,n.updateDuringAnimation(e));continue}bq(n,g,t[g],_,r,s&&s[g],a,o)}else m.push(g);else o||(t[g]=_,n.updateDuringAnimation(e),m.push(g))}var y=m.length;if(!d&&y)for(var S=0;S<p.length;S++){var w=p[S];if(w.targetName===e){var x=w.stopTracks(m);if(x){var T=$i(p,w);p.splice(T,1)}}}if(r.force||(m=fo(m,function(E){return!lLe(i[E],t[E])}),y=m.length),y>0||r.force&&!a.length){var C=void 0,M=void 0,A=void 0;if(o){M={},f&&(C={});for(var S=0;S<y;S++){var g=m[S];M[g]=t[g],f?C[g]=i[g]:t[g]=i[g]}}else if(f){A={};for(var S=0;S<y;S++){var g=m[S];A[g]=M1(t[g]),oLe(t,i,g)}}var w=new j3(t,!1,!1,d?fo(p,function(I){return I.targetName===e}):null);w.targetName=e,r.scope&&(w.scope=r.scope),f&&C&&w.whenWithKeys(0,C,m),A&&w.whenWithKeys(0,A,m),w.whenWithKeys(c??500,o?M:i,m).delay(u||0),n.addAnimator(w,e),a.push(w)}}const Sq=J3;var wq=function(n){Mn(e,n);function e(t){var i=n.call(this)||this;return i.isGroup=!0,i._children=[],i.attr(t),i}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var i=this._children,r=0;r<i.length;r++)if(i[r].name===t)return i[r]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,i){if(t&&t!==this&&t.parent!==this&&i&&i.parent===this){var r=this._children,s=r.indexOf(i);s>=0&&(r.splice(s,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,i){var r=$i(this._children,t);return r>=0&&this.replaceAt(i,r),this},e.prototype.replaceAt=function(t,i){var r=this._children,s=r[i];if(t&&t!==this&&t.parent!==this&&t!==s){r[i]=t,s.parent=null;var a=this.__zr;a&&s.removeSelfFromZr(a),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var i=this.__zr;i&&i!==t.__zr&&t.addSelfToZr(i),i&&i.refresh()},e.prototype.remove=function(t){var i=this.__zr,r=this._children,s=$i(r,t);return s<0?this:(r.splice(s,1),t.parent=null,i&&t.removeSelfFromZr(i),i&&i.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,i=this.__zr,r=0;r<t.length;r++){var s=t[r];i&&s.removeSelfFromZr(i),s.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,i){for(var r=this._children,s=0;s<r.length;s++){var a=r[s];t.call(i,a,s)}return this},e.prototype.traverse=function(t,i){for(var r=0;r<this._children.length;r++){var s=this._children[r],a=t.call(i,s);s.isGroup&&!a&&s.traverse(t,i)}return this},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var i=0;i<this._children.length;i++){var r=this._children[i];r.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var i=0;i<this._children.length;i++){var r=this._children[i];r.removeSelfFromZr(t)}},e.prototype.getBoundingRect=function(t){for(var i=new Oi(0,0,0,0),r=t||this._children,s=[],a=null,o=0;o<r.length;o++){var l=r[o];if(!(l.ignore||l.invisible)){var c=l.getBoundingRect(),u=l.getLocalTransform(s);u?(Oi.applyTransform(i,c,u),a=a||i.clone(),a.union(i)):(a=a||c.clone(),a.union(c))}}return a||i},e}(Sq);wq.prototype.type="group";const Ql=wq;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var I1={},xq={};function uLe(n){delete xq[n]}function dLe(n){if(!n)return!1;if(typeof n=="string")return Fx(n,1)<CR;if(n.colorStops){for(var e=n.colorStops,t=0,i=e.length,r=0;r<i;r++)t+=Fx(e[r].color,1);return t/=i,t<CR}return!1}var fLe=function(){function n(e,t,i){var r=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,i=i||{},this.dom=t,this.id=e;var s=new TDe,a=i.renderer||"canvas";I1[a]||(a=mr(I1)[0]),i.useDirtyRect=i.useDirtyRect==null?!1:i.useDirtyRect;var o=new I1[a](t,s,i,e),l=i.ssr||o.ssrOnly;this.storage=s,this.painter=o;var c=!Qn.node&&!Qn.worker&&!l?new eLe(o.getViewportRoot(),o.root):null,u=i.useCoarsePointer,d=u==null||u==="auto"?Qn.touchEventsSupported:!!u,f=44,h;d&&(h=ui(i.pointerSize,f)),this.handler=new SDe(s,o,c,o.root,h),this.animation=new KDe({stage:{update:l?null:function(){return r._flush(!0)}}}),l||this.animation.start()}return n.prototype.add=function(e){e&&(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},n.prototype.remove=function(e){e&&(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(e,t){this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh()},n.prototype.setBackgroundColor=function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=dLe(e)},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(e){this._darkMode=e},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(e){e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},n.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},n.prototype.flush=function(){this._flush(!1)},n.prototype._flush=function(e){var t,i=zm();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var r=zm();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:r-i})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},n.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},n.prototype.resize=function(e){e=e||{},this.painter.resize(e.width,e.height),this.handler.resize()},n.prototype.clearAnimation=function(){this.animation.clear()},n.prototype.getWidth=function(){return this.painter.getWidth()},n.prototype.getHeight=function(){return this.painter.getHeight()},n.prototype.setCursorStyle=function(e){this.handler.setCursorStyle(e)},n.prototype.findHover=function(e,t){return this.handler.findHover(e,t)},n.prototype.on=function(e,t,i){return this.handler.on(e,t,i),this},n.prototype.off=function(e,t){this.handler.off(e,t)},n.prototype.trigger=function(e,t){this.handler.trigger(e,t)},n.prototype.clear=function(){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof Ql&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},n.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,uLe(this.id)},n}();function fz(n,e){var t=new fLe(qK(),n,e);return xq[t.id]=t,t}function hLe(n,e){I1[n]=e}var hz=1e-4,Cq=20;function pLe(n){return n.replace(/^\s+|\s+$/g,"")}function mLe(n,e,t,i){var r=e[0],s=e[1],a=t[0],o=t[1],l=s-r,c=o-a;if(l===0)return c===0?a:(a+o)/2;if(i)if(l>0){if(n<=r)return a;if(n>=s)return o}else{if(n>=r)return a;if(n<=s)return o}else{if(n===r)return a;if(n===s)return o}return(n-r)/l*c+a}function Dr(n,e){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return Rn(n)?pLe(n).match(/%$/)?parseFloat(n)/100*e:parseFloat(n):n==null?NaN:+n}function vLe(n,e,t){return e==null&&(e=10),e=Math.min(Math.max(0,e),Cq),n=(+n).toFixed(e),t?n:+n}function pz(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var e=1,t=0;t<15;t++,e*=10)if(Math.round(n*e)/e===n)return t}return gLe(n)}function gLe(n){var e=n.toString().toLowerCase(),t=e.indexOf("e"),i=t>0?+e.slice(t+1):0,r=t>0?t:e.length,s=e.indexOf("."),a=s<0?0:r-1-s;return Math.max(0,a-i)}function yLe(n,e){var t=zd(n,function(h,p){return h+(isNaN(p)?0:p)},0);if(t===0)return[];for(var i=Math.pow(10,e),r=hi(n,function(h){return(isNaN(h)?0:h)/t*i*100}),s=i*100,a=hi(r,function(h){return Math.floor(h)}),o=zd(a,function(h,p){return h+p},0),l=hi(r,function(h,p){return h-a[p]});o<s;){for(var c=Number.NEGATIVE_INFINITY,u=null,d=0,f=l.length;d<f;++d)l[d]>c&&(c=l[d],u=d);++a[u],l[u]=0,++o}return hi(a,function(h){return h/i})}function _Le(n,e){var t=Math.max(pz(n),pz(e)),i=n+e;return t>Cq?i:vLe(i,t)}function Mq(n){var e=Math.PI*2;return(n%e+e)%e}function Ux(n){return n>-hz&&n<hz}var bLe=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function IM(n){if(n instanceof Date)return n;if(Rn(n)){var e=bLe.exec(n);if(!e)return new Date(NaN);if(e[8]){var t=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(t-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function Hx(n){var e=parseFloat(n);return e==n&&(e!==0||!Rn(n)||n.indexOf("x")<=0)?e:NaN}function SLe(n){return!isNaN(Hx(n))}function Tq(){return Math.round(Math.random()*9)}function Aq(n,e){return e===0?n:Aq(e,n%e)}function mz(n,e){return n==null?e:e==null?n:n*e/Aq(n,e)}function ua(n){throw new Error(n)}var Eq="series\0",wLe="\0_ec_\0";function Qs(n){return n instanceof Array?n:n==null?[]:[n]}function AR(n,e,t){if(n){n[e]=n[e]||{},n.emphasis=n.emphasis||{},n.emphasis[e]=n.emphasis[e]||{};for(var i=0,r=t.length;i<r;i++){var s=t[i];!n.emphasis[e].hasOwnProperty(s)&&n[e].hasOwnProperty(s)&&(n.emphasis[e][s]=n[e][s])}}}var vz=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function RM(n){return Ln(n)&&!hn(n)&&!(n instanceof Date)?n.value:n}function xLe(n){return Ln(n)&&!(n instanceof Array)}function CLe(n,e,t){var i=t==="normalMerge",r=t==="replaceMerge",s=t==="replaceAll";n=n||[],e=(e||[]).slice();var a=di();tt(e,function(l,c){if(!Ln(l)){e[c]=null;return}});var o=MLe(n,a,t);return(i||r)&&TLe(o,n,a,e),i&&ALe(o,e),i||r?ELe(o,e,r):s&&ILe(o,e),RLe(o),o}function MLe(n,e,t){var i=[];if(t==="replaceAll")return i;for(var r=0;r<n.length;r++){var s=n[r];s&&s.id!=null&&e.set(s.id,r),i.push({existing:t==="replaceMerge"||y_(s)?null:s,newOption:null,keyInfo:null,brandNew:null})}return i}function TLe(n,e,t,i){tt(i,function(r,s){if(!(!r||r.id==null)){var a=fy(r.id),o=t.get(a);if(o!=null){var l=n[o];nu(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=r,l.existing=e[o],i[s]=null}}})}function ALe(n,e){tt(e,function(t,i){if(!(!t||t.name==null))for(var r=0;r<n.length;r++){var s=n[r].existing;if(!n[r].newOption&&s&&(s.id==null||t.id==null)&&!y_(t)&&!y_(s)&&Iq("name",s,t)){n[r].newOption=t,e[i]=null;return}}})}function ELe(n,e,t){tt(e,function(i){if(i){for(var r,s=0;(r=n[s])&&(r.newOption||y_(r.existing)||r.existing&&i.id!=null&&!Iq("id",i,r.existing));)s++;r?(r.newOption=i,r.brandNew=t):n.push({newOption:i,brandNew:t,existing:null,keyInfo:null}),s++}})}function ILe(n,e){tt(e,function(t){n.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}function RLe(n){var e=di();tt(n,function(t){var i=t.existing;i&&e.set(i.id,t)}),tt(n,function(t){var i=t.newOption;nu(!i||i.id==null||!e.get(i.id)||e.get(i.id)===t,"id duplicates: "+(i&&i.id)),i&&i.id!=null&&e.set(i.id,t),!t.keyInfo&&(t.keyInfo={})}),tt(n,function(t,i){var r=t.existing,s=t.newOption,a=t.keyInfo;if(Ln(s)){if(a.name=s.name!=null?fy(s.name):r?r.name:Eq+i,r)a.id=fy(r.id);else if(s.id!=null)a.id=fy(s.id);else{var o=0;do a.id="\0"+a.name+"\0"+o++;while(e.get(a.id))}e.set(a.id,t)}})}function Iq(n,e,t){var i=Wl(e[n],null),r=Wl(t[n],null);return i!=null&&r!=null&&i===r}function fy(n){return Wl(n,"")}function Wl(n,e){return n==null?e:Rn(n)?n:vr(n)||cR(n)?n+"":e}function ek(n){var e=n.name;return!!(e&&e.indexOf(Eq))}function y_(n){return n&&n.id!=null&&fy(n.id).indexOf(wLe)===0}function PLe(n,e,t){tt(n,function(i){var r=i.newOption;Ln(r)&&(i.keyInfo.mainType=e,i.keyInfo.subType=DLe(e,r,i.existing,t))})}function DLe(n,e,t,i){var r=e.type?e.type:t?t.subType:i.determineSubType(n,e);return r}function bb(n,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return hn(e.dataIndex)?hi(e.dataIndex,function(t){return n.indexOfRawIndex(t)}):n.indexOfRawIndex(e.dataIndex);if(e.name!=null)return hn(e.name)?hi(e.name,function(t){return n.indexOfName(t)}):n.indexOfName(e.name)}function Jr(){var n="__ec_inner_"+LLe++;return function(e){return e[n]||(e[n]={})}}var LLe=Tq();function fA(n,e,t){var i=tk(e,t),r=i.mainTypeSpecified,s=i.queryOptionMap,a=i.others,o=a,l=t?t.defaultMainType:null;return!r&&l&&s.set(l,{}),s.each(function(c,u){var d=Sb(n,u,c,{useDefault:l===u,enableAll:t&&t.enableAll!=null?t.enableAll:!0,enableNone:t&&t.enableNone!=null?t.enableNone:!0});o[u+"Models"]=d.models,o[u+"Model"]=d.models[0]}),o}function tk(n,e){var t;if(Rn(n)){var i={};i[n+"Index"]=0,t=i}else t=n;var r=di(),s={},a=!1;return tt(t,function(o,l){if(l==="dataIndex"||l==="dataIndexInside"){s[l]=o;return}var c=l.match(/^(\w+)(Index|Id|Name)$/)||[],u=c[1],d=(c[2]||"").toLowerCase();if(!(!u||!d||e&&e.includeMainTypes&&$i(e.includeMainTypes,u)<0)){a=a||!!u;var f=r.get(u)||r.set(u,{});f[d]=o}}),{mainTypeSpecified:a,queryOptionMap:r,others:s}}var nk={useDefault:!0,enableAll:!1,enableNone:!1};function Sb(n,e,t,i){i=i||nk;var r=t.index,s=t.id,a=t.name,o={models:null,specified:r!=null||s!=null||a!=null};if(!o.specified){var l=void 0;return o.models=i.useDefault&&(l=n.getComponent(e))?[l]:[],o}return r==="none"||r===!1?(nu(i.enableNone,'`"none"` or `false` is not a valid value on index option.'),o.models=[],o):(r==="all"&&(nu(i.enableAll,'`"all"` is not a valid value on index option.'),r=s=a=null),o.models=n.queryComponents({mainType:e,index:r,id:s,name:a}),o)}function Rq(n,e,t){n.setAttribute?n.setAttribute(e,t):n[e]=t}function kLe(n,e){return n.getAttribute?n.getAttribute(e):n[e]}function OLe(n){return n==="auto"?Qn.domSupported?"html":"richText":n||"html"}var NLe=".",gf="___EC__COMPONENT__CONTAINER___",Pq="___EC__EXTENDED_CLASS___";function Fl(n){var e={main:"",sub:""};if(n){var t=n.split(NLe);e.main=t[0]||"",e.sub=t[1]||""}return e}function BLe(n){nu(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function FLe(n){return!!(n&&n[Pq])}function ik(n,e){n.$constructor=n,n.extend=function(t){var i=this,r;return zLe(i)?r=function(s){Mn(a,s);function a(){return s.apply(this,arguments)||this}return a}(i):(r=function(){(t.$constructor||i).apply(this,arguments)},OPe(r,this)),Nt(r.prototype,t),r[Pq]=!0,r.extend=this.extend,r.superCall=VLe,r.superApply=$Le,r.superClass=i,r}}function zLe(n){return Ri(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function Dq(n,e){n.extend=e.extend}var ULe=Math.round(Math.random()*10);function HLe(n){var e=["__\0is_clz",ULe++].join("_");n.prototype[e]=!0,n.isInstance=function(t){return!!(t&&t[e])}}function VLe(n,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return this.superClass.prototype[e].apply(n,t)}function $Le(n,e,t){return this.superClass.prototype[e].apply(n,t)}function rk(n){var e={};n.registerClass=function(i){var r=i.type||i.prototype.type;if(r){BLe(r),i.prototype.type=r;var s=Fl(r);if(!s.sub)e[s.main]=i;else if(s.sub!==gf){var a=t(s);a[s.sub]=i}}return i},n.getClass=function(i,r,s){var a=e[i];if(a&&a[gf]&&(a=r?a[r]:null),s&&!a)throw new Error(r?"Component "+i+"."+(r||"")+" is used but not imported.":i+".type should be specified.");return a},n.getClassesByMainType=function(i){var r=Fl(i),s=[],a=e[r.main];return a&&a[gf]?tt(a,function(o,l){l!==gf&&s.push(o)}):s.push(a),s},n.hasClass=function(i){var r=Fl(i);return!!e[r.main]},n.getAllClassMainTypes=function(){var i=[];return tt(e,function(r,s){i.push(s)}),i},n.hasSubTypes=function(i){var r=Fl(i),s=e[r.main];return s&&s[gf]};function t(i){var r=e[i.main];return(!r||!r[gf])&&(r=e[i.main]={},r[gf]=!0),r}}function __(n,e){for(var t=0;t<n.length;t++)n[t][1]||(n[t][1]=n[t][0]);return e=e||!1,function(i,r,s){for(var a={},o=0;o<n.length;o++){var l=n[o][1];if(!(r&&$i(r,l)>=0||s&&$i(s,l)<0)){var c=i.getShallow(l,e);c!=null&&(a[n[o][0]]=c)}}return a}}var GLe=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],WLe=__(GLe),KLe=function(){function n(){}return n.prototype.getAreaStyle=function(e,t){return WLe(this,e,t)},n}(),ER=new _b(50);function qLe(n){if(typeof n=="string"){var e=ER.get(n);return e&&e.image}else return n}function Lq(n,e,t,i,r){if(n)if(typeof n=="string"){if(e&&e.__zrImageSrc===n||!t)return e;var s=ER.get(n),a={hostEl:t,cb:i,cbPayload:r};return s?(e=s.image,!PM(e)&&s.pending.push(a)):(e=bg.loadImage(n,gz,gz),e.__zrImageSrc=n,ER.put(n,e.__cachedImgObj={image:e,pending:[a]})),e}else return n;else return e}function gz(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<n.pending.length;e++){var t=n.pending[e],i=t.cb;i&&i(this,t.cbPayload),t.hostEl.dirty()}n.pending.length=0}function PM(n){return n&&n.width&&n.height}var hA=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function XLe(n,e,t,i,r){if(!e)return"";var s=(n+"").split(`
`);r=kq(e,t,i,r);for(var a=0,o=s.length;a<o;a++)s[a]=Oq(s[a],r);return s.join(`
`)}function kq(n,e,t,i){i=i||{};var r=Nt({},i);r.font=e,t=ui(t,"..."),r.maxIterations=ui(i.maxIterations,2);var s=r.minChar=ui(i.minChar,0);r.cnCharWidth=Ha("",e);var a=r.ascCharWidth=Ha("a",e);r.placeholder=ui(i.placeholder,"");for(var o=n=Math.max(0,n-1),l=0;l<s&&o>=a;l++)o-=a;var c=Ha(t,e);return c>o&&(t="",c=0),o=n-c,r.ellipsis=t,r.ellipsisWidth=c,r.contentWidth=o,r.containerWidth=n,r}function Oq(n,e){var t=e.containerWidth,i=e.font,r=e.contentWidth;if(!t)return"";var s=Ha(n,i);if(s<=t)return n;for(var a=0;;a++){if(s<=r||a>=e.maxIterations){n+=e.ellipsis;break}var o=a===0?YLe(n,r,e.ascCharWidth,e.cnCharWidth):s>0?Math.floor(n.length*r/s):0;n=n.substr(0,o),s=Ha(n,i)}return n===""&&(n=e.placeholder),n}function YLe(n,e,t,i){for(var r=0,s=0,a=n.length;s<a&&r<e;s++){var o=n.charCodeAt(s);r+=0<=o&&o<=127?t:i}return s}function jLe(n,e){n!=null&&(n+="");var t=e.overflow,i=e.padding,r=e.font,s=t==="truncate",a=Z3(r),o=ui(e.lineHeight,a),l=!!e.backgroundColor,c=e.lineOverflow==="truncate",u=e.width,d;u!=null&&(t==="break"||t==="breakAll")?d=n?Nq(n,e.font,u,t==="breakAll",0).lines:[]:d=n?n.split(`
`):[];var f=d.length*o,h=ui(e.height,f);if(f>h&&c){var p=Math.floor(h/o);d=d.slice(0,p)}if(n&&s&&u!=null)for(var m=kq(u,r,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),v=0;v<d.length;v++)d[v]=Oq(d[v],m);for(var g=h,_=0,v=0;v<d.length;v++)_=Math.max(Ha(d[v],r),_);u==null&&(u=_);var y=_;return i&&(g+=i[0]+i[2],y+=i[1]+i[3],u+=i[1]+i[3]),l&&(y=u),{lines:d,height:h,outerWidth:y,outerHeight:g,lineHeight:o,calculatedLineHeight:a,contentWidth:_,contentHeight:f,width:u}}var QLe=function(){function n(){}return n}(),yz=function(){function n(e){this.tokens=[],e&&(this.tokens=e)}return n}(),ZLe=function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return n}();function JLe(n,e){var t=new ZLe;if(n!=null&&(n+=""),!n)return t;for(var i=e.width,r=e.height,s=e.overflow,a=(s==="break"||s==="breakAll")&&i!=null?{width:i,accumWidth:0,breakAll:s==="breakAll"}:null,o=hA.lastIndex=0,l;(l=hA.exec(n))!=null;){var c=l.index;c>o&&pA(t,n.substring(o,c),e,a),pA(t,l[2],e,a,l[1]),o=hA.lastIndex}o<n.length&&pA(t,n.substring(o,n.length),e,a);var u=[],d=0,f=0,h=e.padding,p=s==="truncate",m=e.lineOverflow==="truncate";function v(k,O,U){k.width=O,k.lineHeight=U,d+=U,f=Math.max(f,O)}e:for(var g=0;g<t.lines.length;g++){for(var _=t.lines[g],y=0,S=0,w=0;w<_.tokens.length;w++){var x=_.tokens[w],T=x.styleName&&e.rich[x.styleName]||{},C=x.textPadding=T.padding,M=C?C[1]+C[3]:0,A=x.font=T.font||e.font;x.contentHeight=Z3(A);var E=ui(T.height,x.contentHeight);if(x.innerHeight=E,C&&(E+=C[0]+C[2]),x.height=E,x.lineHeight=ly(T.lineHeight,e.lineHeight,E),x.align=T&&T.align||e.align,x.verticalAlign=T&&T.verticalAlign||"middle",m&&r!=null&&d+x.lineHeight>r){w>0?(_.tokens=_.tokens.slice(0,w),v(_,S,y),t.lines=t.lines.slice(0,g+1)):t.lines=t.lines.slice(0,g);break e}var I=T.width,P=I==null||I==="auto";if(typeof I=="string"&&I.charAt(I.length-1)==="%")x.percentWidth=I,u.push(x),x.contentWidth=Ha(x.text,A);else{if(P){var D=T.backgroundColor,L=D&&D.image;L&&(L=qLe(L),PM(L)&&(x.width=Math.max(x.width,L.width*E/L.height)))}var R=p&&i!=null?i-S:null;R!=null&&R<x.width?!P||R<M?(x.text="",x.width=x.contentWidth=0):(x.text=XLe(x.text,R-M,A,e.ellipsis,{minChar:e.truncateMinChar}),x.width=x.contentWidth=Ha(x.text,A)):x.contentWidth=Ha(x.text,A)}x.width+=M,S+=x.width,T&&(y=Math.max(y,x.lineHeight))}v(_,S,y)}t.outerWidth=t.width=ui(i,f),t.outerHeight=t.height=ui(r,d),t.contentHeight=d,t.contentWidth=f,h&&(t.outerWidth+=h[1]+h[3],t.outerHeight+=h[0]+h[2]);for(var g=0;g<u.length;g++){var x=u[g],B=x.percentWidth;x.width=parseInt(B,10)/100*t.width}return t}function pA(n,e,t,i,r){var s=e==="",a=r&&t.rich[r]||{},o=n.lines,l=a.font||t.font,c=!1,u,d;if(i){var f=a.padding,h=f?f[1]+f[3]:0;if(a.width!=null&&a.width!=="auto"){var p=Fv(a.width,i.width)+h;o.length>0&&p+i.accumWidth>i.width&&(u=e.split(`
`),c=!0),i.accumWidth=p}else{var m=Nq(e,l,i.width,i.breakAll,i.accumWidth);i.accumWidth=m.accumWidth+h,d=m.linesWidths,u=m.lines}}else u=e.split(`
`);for(var v=0;v<u.length;v++){var g=u[v],_=new QLe;if(_.styleName=r,_.text=g,_.isLineHolder=!g&&!s,typeof a.width=="number"?_.width=a.width:_.width=d?d[v]:Ha(g,l),!v&&!c){var y=(o[o.length-1]||(o[0]=new yz)).tokens,S=y.length;S===1&&y[0].isLineHolder?y[0]=_:(g||!S||s)&&y.push(_)}else o.push(new yz([_]))}}function e3e(n){var e=n.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var t3e=zd(",&?/;] ".split(""),function(n,e){return n[e]=!0,n},{});function n3e(n){return e3e(n)?!!t3e[n]:!0}function Nq(n,e,t,i,r){for(var s=[],a=[],o="",l="",c=0,u=0,d=0;d<n.length;d++){var f=n.charAt(d);if(f===`
`){l&&(o+=l,u+=c),s.push(o),a.push(u),o="",l="",c=0,u=0;continue}var h=Ha(f,e),p=i?!1:!n3e(f);if(s.length?u+h>t:r+u+h>t){u?(o||l)&&(p?(o||(o=l,l="",c=0,u=c),s.push(o),a.push(u-c),l+=f,c+=h,o="",u=c):(l&&(o+=l,l="",c=0),s.push(o),a.push(u),o=f,u=h)):p?(s.push(l),a.push(c),l=f,c=h):(s.push(f),a.push(h));continue}u+=h,p?(l+=f,c+=h):(l&&(o+=l,l="",c=0),o+=f)}return!s.length&&!o&&(o=n,l="",c=0),l&&(o+=l),o&&(s.push(o),a.push(u)),s.length===1&&(u+=r),{accumWidth:u,lines:s,linesWidths:a}}var IR="__zr_style_"+Math.round(Math.random()*10),Ih={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DM={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Ih[IR]=!0;var _z=["z","z2","invisible"],i3e=["invisible"],r3e=function(n){Mn(e,n);function e(t){return n.call(this,t)||this}return e.prototype._init=function(t){for(var i=mr(t),r=0;r<i.length;r++){var s=i[r];s==="style"?this.useStyle(t[s]):n.prototype.attrKV.call(this,s,t[s])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,i,r,s){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&s3e(this,t,i)||a&&!a[0]&&!a[3])return!1;if(r&&this.__clipPaths){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(s&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(t,i){return this.rectContain(t,i)},e.prototype.traverse=function(t,i){t.call(i,this)},e.prototype.rectContain=function(t,i){var r=this.transformCoordToLocal(t,i),s=this.getBoundingRect();return s.contain(r[0],r[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var i=this.transform,r=this.getBoundingRect(),s=this.style,a=s.shadowBlur||0,o=s.shadowOffsetX||0,l=s.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new Oi(0,0,0,0)),i?Oi.applyTransform(t,r,i):t.copy(r),(a||o||l)&&(t.width+=a*2+Math.abs(o),t.height+=a*2+Math.abs(l),t.x=Math.min(t.x,t.x+o-a),t.y=Math.min(t.y,t.y+l-a));var c=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-c),t.y=Math.floor(t.y-c),t.width=Math.ceil(t.width+1+c*2),t.height=Math.ceil(t.height+1+c*2))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new Oi(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(t,i){t!=="style"?n.prototype.attrKV.call(this,t,i):this.style?this.setStyle(i):this.useStyle(i)},e.prototype.setStyle=function(t,i){return typeof t=="string"?this.style[t]=i:Nt(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=U0,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&U0)},e.prototype.styleUpdated=function(){this.__dirty&=~U0},e.prototype.createStyle=function(t){return EM(Ih,t)},e.prototype.useStyle=function(t){t[IR]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[IR]},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var i=this._normalState;t.style&&!i.style&&(i.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,i,_z)},e.prototype._applyStateObj=function(t,i,r,s,a,o){n.prototype._applyStateObj.call(this,t,i,r,s,a,o);var l=!(i&&s),c;if(i&&i.style?a?s?c=i.style:(c=this._mergeStyle(this.createStyle(),r.style),this._mergeStyle(c,i.style)):(c=this._mergeStyle(this.createStyle(),s?this.style:r.style),this._mergeStyle(c,i.style)):l&&(c=r.style),c)if(a){var u=this.style;if(this.style=this.createStyle(l?{}:u),l)for(var d=mr(u),f=0;f<d.length;f++){var h=d[f];h in c&&(c[h]=c[h],this.style[h]=u[h])}for(var p=mr(c),f=0;f<p.length;f++){var h=p[f];this.style[h]=this.style[h]}this._transitionState(t,{style:c},o,this.getAnimationStyleProps())}else this.useStyle(c);for(var m=this.__inHover?i3e:_z,f=0;f<m.length;f++){var h=m[f];i&&i[h]!=null?this[h]=i[h]:l&&r[h]!=null&&(this[h]=r[h])}},e.prototype._mergeStates=function(t){for(var i=n.prototype._mergeStates.call(this,t),r,s=0;s<t.length;s++){var a=t[s];a.style&&(r=r||{},this._mergeStyle(r,a.style))}return r&&(i.style=r),i},e.prototype._mergeStyle=function(t,i){return Nt(t,i),t},e.prototype.getAnimationStyleProps=function(){return DM},e.initDefaultProps=function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=Oa|U0}(),e}(Sq),mA=new Oi(0,0,0,0),vA=new Oi(0,0,0,0);function s3e(n,e,t){return mA.copy(n.getBoundingRect()),n.transform&&mA.applyTransform(n.transform),vA.width=e,vA.height=t,!mA.intersect(vA)}const wb=r3e;var mo=Math.min,vo=Math.max,gA=Math.sin,yA=Math.cos,yf=Math.PI*2,mS=Sg(),vS=Sg(),gS=Sg();function bz(n,e,t,i,r,s){r[0]=mo(n,t),r[1]=mo(e,i),s[0]=vo(n,t),s[1]=vo(e,i)}var Sz=[],wz=[];function a3e(n,e,t,i,r,s,a,o,l,c){var u=uq,d=is,f=u(n,t,r,a,Sz);l[0]=1/0,l[1]=1/0,c[0]=-1/0,c[1]=-1/0;for(var h=0;h<f;h++){var p=d(n,t,r,a,Sz[h]);l[0]=mo(p,l[0]),c[0]=vo(p,c[0])}f=u(e,i,s,o,wz);for(var h=0;h<f;h++){var m=d(e,i,s,o,wz[h]);l[1]=mo(m,l[1]),c[1]=vo(m,c[1])}l[0]=mo(n,l[0]),c[0]=vo(n,c[0]),l[0]=mo(a,l[0]),c[0]=vo(a,c[0]),l[1]=mo(e,l[1]),c[1]=vo(e,c[1]),l[1]=mo(o,l[1]),c[1]=vo(o,c[1])}function o3e(n,e,t,i,r,s,a,o){var l=dq,c=Cs,u=vo(mo(l(n,t,r),1),0),d=vo(mo(l(e,i,s),1),0),f=c(n,t,r,u),h=c(e,i,s,d);a[0]=mo(n,r,f),a[1]=mo(e,s,h),o[0]=vo(n,r,f),o[1]=vo(e,s,h)}function l3e(n,e,t,i,r,s,a,o,l){var c=Bm,u=Fm,d=Math.abs(r-s);if(d%yf<1e-4&&d>1e-4){o[0]=n-t,o[1]=e-i,l[0]=n+t,l[1]=e+i;return}if(mS[0]=yA(r)*t+n,mS[1]=gA(r)*i+e,vS[0]=yA(s)*t+n,vS[1]=gA(s)*i+e,c(o,mS,vS),u(l,mS,vS),r=r%yf,r<0&&(r=r+yf),s=s%yf,s<0&&(s=s+yf),r>s&&!a?s+=yf:r<s&&a&&(r+=yf),a){var f=s;s=r,r=f}for(var h=0;h<s;h+=Math.PI/2)h>r&&(gS[0]=yA(h)*t+n,gS[1]=gA(h)*i+e,c(o,gS,o),u(l,gS,l))}var xi={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},_f=[],bf=[],wl=[],Cu=[],xl=[],Cl=[],_A=Math.min,bA=Math.max,Sf=Math.cos,wf=Math.sin,pc=Math.abs,RR=Math.PI,Zu=RR*2,SA=typeof Float32Array<"u",r0=[];function wA(n){var e=Math.round(n/RR*1e8)/1e8;return e%2*RR}function c3e(n,e){var t=wA(n[0]);t<0&&(t+=Zu);var i=t-n[0],r=n[1];r+=i,!e&&r-t>=Zu?r=t+Zu:e&&t-r>=Zu?r=t-Zu:!e&&t>r?r=t+(Zu-wA(t-r)):e&&t<r&&(r=t-(Zu-wA(r-t))),n[0]=t,n[1]=r}var u3e=function(){function n(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(e,t,i){i=i||0,i>0&&(this._ux=pc(i/zx/e)||0,this._uy=pc(i/zx/t)||0)},n.prototype.setDPR=function(e){this.dpr=e},n.prototype.setContext=function(e){this._ctx=e},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(xi.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},n.prototype.lineTo=function(e,t){var i=pc(e-this._xi),r=pc(t-this._yi),s=i>this._ux||r>this._uy;if(this.addData(xi.L,e,t),this._ctx&&s&&this._ctx.lineTo(e,t),s)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var a=i*i+r*r;a>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=a)}return this},n.prototype.bezierCurveTo=function(e,t,i,r,s,a){return this._drawPendingPt(),this.addData(xi.C,e,t,i,r,s,a),this._ctx&&this._ctx.bezierCurveTo(e,t,i,r,s,a),this._xi=s,this._yi=a,this},n.prototype.quadraticCurveTo=function(e,t,i,r){return this._drawPendingPt(),this.addData(xi.Q,e,t,i,r),this._ctx&&this._ctx.quadraticCurveTo(e,t,i,r),this._xi=i,this._yi=r,this},n.prototype.arc=function(e,t,i,r,s,a){this._drawPendingPt(),r0[0]=r,r0[1]=s,c3e(r0,a),r=r0[0],s=r0[1];var o=s-r;return this.addData(xi.A,e,t,i,i,r,o,0,a?0:1),this._ctx&&this._ctx.arc(e,t,i,r,s,a),this._xi=Sf(s)*i+e,this._yi=wf(s)*i+t,this},n.prototype.arcTo=function(e,t,i,r,s){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,i,r,s),this},n.prototype.rect=function(e,t,i,r){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,i,r),this.addData(xi.R,e,t,i,r),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(xi.Z);var e=this._ctx,t=this._x0,i=this._y0;return e&&e.closePath(),this._xi=t,this._yi=i,this},n.prototype.fill=function(e){e&&e.fill(),this.toStatic()},n.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(e){var t=e.length;!(this.data&&this.data.length===t)&&SA&&(this.data=new Float32Array(t));for(var i=0;i<t;i++)this.data[i]=e[i];this._len=t},n.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var t=e.length,i=0,r=this._len,s=0;s<t;s++)i+=e[s].len();SA&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+i));for(var s=0;s<t;s++)for(var a=e[s].data,o=0;o<a.length;o++)this.data[r++]=a[o];this._len=r},n.prototype.addData=function(e,t,i,r,s,a,o,l,c){if(this._saveData){var u=this.data;this._len+arguments.length>u.length&&(this._expandData(),u=this.data);for(var d=0;d<arguments.length;d++)u[this._len++]=arguments[d]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,SA&&this._len>11&&(this.data=new Float32Array(e)))}},n.prototype.getBoundingRect=function(){wl[0]=wl[1]=xl[0]=xl[1]=Number.MAX_VALUE,Cu[0]=Cu[1]=Cl[0]=Cl[1]=-Number.MAX_VALUE;var e=this.data,t=0,i=0,r=0,s=0,a;for(a=0;a<this._len;){var o=e[a++],l=a===1;switch(l&&(t=e[a],i=e[a+1],r=t,s=i),o){case xi.M:t=r=e[a++],i=s=e[a++],xl[0]=r,xl[1]=s,Cl[0]=r,Cl[1]=s;break;case xi.L:bz(t,i,e[a],e[a+1],xl,Cl),t=e[a++],i=e[a++];break;case xi.C:a3e(t,i,e[a++],e[a++],e[a++],e[a++],e[a],e[a+1],xl,Cl),t=e[a++],i=e[a++];break;case xi.Q:o3e(t,i,e[a++],e[a++],e[a],e[a+1],xl,Cl),t=e[a++],i=e[a++];break;case xi.A:var c=e[a++],u=e[a++],d=e[a++],f=e[a++],h=e[a++],p=e[a++]+h;a+=1;var m=!e[a++];l&&(r=Sf(h)*d+c,s=wf(h)*f+u),l3e(c,u,d,f,h,p,m,xl,Cl),t=Sf(p)*d+c,i=wf(p)*f+u;break;case xi.R:r=t=e[a++],s=i=e[a++];var v=e[a++],g=e[a++];bz(r,s,r+v,s+g,xl,Cl);break;case xi.Z:t=r,i=s;break}Bm(wl,wl,xl),Fm(Cu,Cu,Cl)}return a===0&&(wl[0]=wl[1]=Cu[0]=Cu[1]=0),new Oi(wl[0],wl[1],Cu[0]-wl[0],Cu[1]-wl[1])},n.prototype._calculateLength=function(){var e=this.data,t=this._len,i=this._ux,r=this._uy,s=0,a=0,o=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var c=this._pathSegLen,u=0,d=0,f=0;f<t;){var h=e[f++],p=f===1;p&&(s=e[f],a=e[f+1],o=s,l=a);var m=-1;switch(h){case xi.M:s=o=e[f++],a=l=e[f++];break;case xi.L:{var v=e[f++],g=e[f++],_=v-s,y=g-a;(pc(_)>i||pc(y)>r||f===t-1)&&(m=Math.sqrt(_*_+y*y),s=v,a=g);break}case xi.C:{var S=e[f++],w=e[f++],v=e[f++],g=e[f++],x=e[f++],T=e[f++];m=EDe(s,a,S,w,v,g,x,T,10),s=x,a=T;break}case xi.Q:{var S=e[f++],w=e[f++],v=e[f++],g=e[f++];m=PDe(s,a,S,w,v,g,10),s=v,a=g;break}case xi.A:var C=e[f++],M=e[f++],A=e[f++],E=e[f++],I=e[f++],P=e[f++],D=P+I;f+=1,e[f++],p&&(o=Sf(I)*A+C,l=wf(I)*E+M),m=bA(A,E)*_A(Zu,Math.abs(P)),s=Sf(D)*A+C,a=wf(D)*E+M;break;case xi.R:{o=s=e[f++],l=a=e[f++];var L=e[f++],R=e[f++];m=L*2+R*2;break}case xi.Z:{var _=o-s,y=l-a;m=Math.sqrt(_*_+y*y),s=o,a=l;break}}m>=0&&(c[d++]=m,u+=m)}return this._pathLen=u,u},n.prototype.rebuildPath=function(e,t){var i=this.data,r=this._ux,s=this._uy,a=this._len,o,l,c,u,d,f,h=t<1,p,m,v=0,g=0,_,y=0,S,w;if(!(h&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,m=this._pathLen,_=t*m,!_)))e:for(var x=0;x<a;){var T=i[x++],C=x===1;switch(C&&(c=i[x],u=i[x+1],o=c,l=u),T!==xi.L&&y>0&&(e.lineTo(S,w),y=0),T){case xi.M:o=c=i[x++],l=u=i[x++],e.moveTo(c,u);break;case xi.L:{d=i[x++],f=i[x++];var M=pc(d-c),A=pc(f-u);if(M>r||A>s){if(h){var E=p[g++];if(v+E>_){var I=(_-v)/E;e.lineTo(c*(1-I)+d*I,u*(1-I)+f*I);break e}v+=E}e.lineTo(d,f),c=d,u=f,y=0}else{var P=M*M+A*A;P>y&&(S=d,w=f,y=P)}break}case xi.C:{var D=i[x++],L=i[x++],R=i[x++],B=i[x++],k=i[x++],O=i[x++];if(h){var E=p[g++];if(v+E>_){var I=(_-v)/E;Nx(c,D,R,k,I,_f),Nx(u,L,B,O,I,bf),e.bezierCurveTo(_f[1],bf[1],_f[2],bf[2],_f[3],bf[3]);break e}v+=E}e.bezierCurveTo(D,L,R,B,k,O),c=k,u=O;break}case xi.Q:{var D=i[x++],L=i[x++],R=i[x++],B=i[x++];if(h){var E=p[g++];if(v+E>_){var I=(_-v)/E;Bx(c,D,R,I,_f),Bx(u,L,B,I,bf),e.quadraticCurveTo(_f[1],bf[1],_f[2],bf[2]);break e}v+=E}e.quadraticCurveTo(D,L,R,B),c=R,u=B;break}case xi.A:var U=i[x++],G=i[x++],q=i[x++],W=i[x++],Y=i[x++],J=i[x++],Z=i[x++],ee=!i[x++],me=q>W?q:W,ye=pc(q-W)>.001,Te=Y+J,Ee=!1;if(h){var E=p[g++];v+E>_&&(Te=Y+J*(_-v)/E,Ee=!0),v+=E}if(ye&&e.ellipse?e.ellipse(U,G,q,W,Z,Y,Te,ee):e.arc(U,G,me,Y,Te,ee),Ee)break e;C&&(o=Sf(Y)*q+U,l=wf(Y)*W+G),c=Sf(Te)*q+U,u=wf(Te)*W+G;break;case xi.R:o=c=i[x],l=u=i[x+1],d=i[x++],f=i[x++];var H=i[x++],Q=i[x++];if(h){var E=p[g++];if(v+E>_){var j=_-v;e.moveTo(d,f),e.lineTo(d+_A(j,H),f),j-=H,j>0&&e.lineTo(d+H,f+_A(j,Q)),j-=Q,j>0&&e.lineTo(d+bA(H-j,0),f+Q),j-=H,j>0&&e.lineTo(d,f+bA(Q-j,0));break e}v+=E}e.rect(d,f,H,Q);break;case xi.Z:if(h){var E=p[g++];if(v+E>_){var I=(_-v)/E;e.lineTo(c*(1-I)+o*I,u*(1-I)+l*I);break e}v+=E}e.closePath(),c=o,u=l}}},n.prototype.clone=function(){var e=new n,t=this.data;return e.data=t.slice?t.slice():Array.prototype.slice.call(t),e._len=this._len,e},n.CMD=xi,n.initDefaultProps=function(){var e=n.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),n}();const Wh=u3e;function Mp(n,e,t,i,r,s,a){if(r===0)return!1;var o=r,l=0,c=n;if(a>e+o&&a>i+o||a<e-o&&a<i-o||s>n+o&&s>t+o||s<n-o&&s<t-o)return!1;if(n!==t)l=(e-i)/(n-t),c=(n*i-t*e)/(n-t);else return Math.abs(s-n)<=o/2;var u=l*s-a+c,d=u*u/(l*l+1);return d<=o/2*o/2}function d3e(n,e,t,i,r,s,a,o,l,c,u){if(l===0)return!1;var d=l;if(u>e+d&&u>i+d&&u>s+d&&u>o+d||u<e-d&&u<i-d&&u<s-d&&u<o-d||c>n+d&&c>t+d&&c>r+d&&c>a+d||c<n-d&&c<t-d&&c<r-d&&c<a-d)return!1;var f=ADe(n,e,t,i,r,s,a,o,c,u,null);return f<=d/2}function f3e(n,e,t,i,r,s,a,o,l){if(a===0)return!1;var c=a;if(l>e+c&&l>i+c&&l>s+c||l<e-c&&l<i-c&&l<s-c||o>n+c&&o>t+c&&o>r+c||o<n-c&&o<t-c&&o<r-c)return!1;var u=RDe(n,e,t,i,r,s,o,l,null);return u<=c/2}var xz=Math.PI*2;function yS(n){return n%=xz,n<0&&(n+=xz),n}var s0=Math.PI*2;function h3e(n,e,t,i,r,s,a,o,l){if(a===0)return!1;var c=a;o-=n,l-=e;var u=Math.sqrt(o*o+l*l);if(u-c>t||u+c<t)return!1;if(Math.abs(i-r)%s0<1e-4)return!0;if(s){var d=i;i=yS(r),r=yS(d)}else i=yS(i),r=yS(r);i>r&&(r+=s0);var f=Math.atan2(l,o);return f<0&&(f+=s0),f>=i&&f<=r||f+s0>=i&&f+s0<=r}function xf(n,e,t,i,r,s){if(s>e&&s>i||s<e&&s<i||i===e)return 0;var a=(s-e)/(i-e),o=i<e?1:-1;(a===1||a===0)&&(o=i<e?.5:-.5);var l=a*(t-n)+n;return l===r?1/0:l>r?o:0}var Mu=Wh.CMD,Cf=Math.PI*2,p3e=1e-4;function m3e(n,e){return Math.abs(n-e)<p3e}var Gs=[-1,-1,-1],lo=[-1,-1];function v3e(){var n=lo[0];lo[0]=lo[1],lo[1]=n}function g3e(n,e,t,i,r,s,a,o,l,c){if(c>e&&c>i&&c>s&&c>o||c<e&&c<i&&c<s&&c<o)return 0;var u=cq(e,i,s,o,c,Gs);if(u===0)return 0;for(var d=0,f=-1,h=void 0,p=void 0,m=0;m<u;m++){var v=Gs[m],g=v===0||v===1?.5:1,_=is(n,t,r,a,v);_<l||(f<0&&(f=uq(e,i,s,o,lo),lo[1]<lo[0]&&f>1&&v3e(),h=is(e,i,s,o,lo[0]),f>1&&(p=is(e,i,s,o,lo[1]))),f===2?v<lo[0]?d+=h<e?g:-g:v<lo[1]?d+=p<h?g:-g:d+=o<p?g:-g:v<lo[0]?d+=h<e?g:-g:d+=o<h?g:-g)}return d}function y3e(n,e,t,i,r,s,a,o){if(o>e&&o>i&&o>s||o<e&&o<i&&o<s)return 0;var l=IDe(e,i,s,o,Gs);if(l===0)return 0;var c=dq(e,i,s);if(c>=0&&c<=1){for(var u=0,d=Cs(e,i,s,c),f=0;f<l;f++){var h=Gs[f]===0||Gs[f]===1?.5:1,p=Cs(n,t,r,Gs[f]);p<a||(Gs[f]<c?u+=d<e?h:-h:u+=s<d?h:-h)}return u}else{var h=Gs[0]===0||Gs[0]===1?.5:1,p=Cs(n,t,r,Gs[0]);return p<a?0:s<e?h:-h}}function _3e(n,e,t,i,r,s,a,o){if(o-=e,o>t||o<-t)return 0;var l=Math.sqrt(t*t-o*o);Gs[0]=-l,Gs[1]=l;var c=Math.abs(i-r);if(c<1e-4)return 0;if(c>=Cf-1e-4){i=0,r=Cf;var u=s?1:-1;return a>=Gs[0]+n&&a<=Gs[1]+n?u:0}if(i>r){var d=i;i=r,r=d}i<0&&(i+=Cf,r+=Cf);for(var f=0,h=0;h<2;h++){var p=Gs[h];if(p+n>a){var m=Math.atan2(o,p),u=s?1:-1;m<0&&(m=Cf+m),(m>=i&&m<=r||m+Cf>=i&&m+Cf<=r)&&(m>Math.PI/2&&m<Math.PI*1.5&&(u=-u),f+=u)}}return f}function Bq(n,e,t,i,r){for(var s=n.data,a=n.len(),o=0,l=0,c=0,u=0,d=0,f,h,p=0;p<a;){var m=s[p++],v=p===1;switch(m===Mu.M&&p>1&&(t||(o+=xf(l,c,u,d,i,r))),v&&(l=s[p],c=s[p+1],u=l,d=c),m){case Mu.M:u=s[p++],d=s[p++],l=u,c=d;break;case Mu.L:if(t){if(Mp(l,c,s[p],s[p+1],e,i,r))return!0}else o+=xf(l,c,s[p],s[p+1],i,r)||0;l=s[p++],c=s[p++];break;case Mu.C:if(t){if(d3e(l,c,s[p++],s[p++],s[p++],s[p++],s[p],s[p+1],e,i,r))return!0}else o+=g3e(l,c,s[p++],s[p++],s[p++],s[p++],s[p],s[p+1],i,r)||0;l=s[p++],c=s[p++];break;case Mu.Q:if(t){if(f3e(l,c,s[p++],s[p++],s[p],s[p+1],e,i,r))return!0}else o+=y3e(l,c,s[p++],s[p++],s[p],s[p+1],i,r)||0;l=s[p++],c=s[p++];break;case Mu.A:var g=s[p++],_=s[p++],y=s[p++],S=s[p++],w=s[p++],x=s[p++];p+=1;var T=!!(1-s[p++]);f=Math.cos(w)*y+g,h=Math.sin(w)*S+_,v?(u=f,d=h):o+=xf(l,c,f,h,i,r);var C=(i-g)*S/y+g;if(t){if(h3e(g,_,S,w,w+x,T,e,C,r))return!0}else o+=_3e(g,_,S,w,w+x,T,C,r);l=Math.cos(w+x)*y+g,c=Math.sin(w+x)*S+_;break;case Mu.R:u=l=s[p++],d=c=s[p++];var M=s[p++],A=s[p++];if(f=u+M,h=d+A,t){if(Mp(u,d,f,d,e,i,r)||Mp(f,d,f,h,e,i,r)||Mp(f,h,u,h,e,i,r)||Mp(u,h,u,d,e,i,r))return!0}else o+=xf(f,d,f,h,i,r),o+=xf(u,h,u,d,i,r);break;case Mu.Z:if(t){if(Mp(l,c,u,d,e,i,r))return!0}else o+=xf(l,c,u,d,i,r);l=u,c=d;break}}return!t&&!m3e(c,d)&&(o+=xf(l,c,u,d,i,r)||0),o!==0}function b3e(n,e,t){return Bq(n,0,!1,e,t)}function S3e(n,e,t,i){return Bq(n,e,!0,t,i)}var Fq=nr({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Ih),w3e={style:nr({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DM.style)},xA=g_.concat(["invisible","culling","z","z2","zlevel","parent"]),x3e=function(n){Mn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.update=function(){var t=this;n.prototype.update.call(this);var i=this.style;if(i.decal){var r=this._decalEl=this._decalEl||new e;r.buildPath===e.prototype.buildPath&&(r.buildPath=function(l){t.buildPath(l,t.shape)}),r.silent=!0;var s=r.style;for(var a in i)s[a]!==i[a]&&(s[a]=i[a]);s.fill=i.fill?i.decal:null,s.decal=null,s.shadowColor=null,i.strokeFirst&&(s.stroke=null);for(var o=0;o<xA.length;++o)r[xA[o]]=this[xA[o]];r.__dirty|=Oa}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(t){var i=mr(t);this.shape=this.getDefaultShape();var r=this.getDefaultStyle();r&&this.useStyle(r);for(var s=0;s<i.length;s++){var a=i[s],o=t[a];a==="style"?this.style?Nt(this.style,o):this.useStyle(o):a==="shape"?Nt(this.shape,o):n.prototype.attrKV.call(this,a,o)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(Rn(t)){var i=Fx(t,0);return i>.5?MR:i>.2?tLe:TR}else if(t)return TR}return MR},e.prototype.getInsideTextStroke=function(t){var i=this.style.fill;if(Rn(i)){var r=this.__zr,s=!!(r&&r.isDarkMode()),a=Fx(t,0)<CR;if(s===a)return i}},e.prototype.buildPath=function(t,i,r){},e.prototype.pathUpdated=function(){this.__dirty&=~Mm},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new Wh(!1)},e.prototype.hasStroke=function(){var t=this.style,i=t.stroke;return!(i==null||i==="none"||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,i=t.fill;return i!=null&&i!=="none"},e.prototype.getBoundingRect=function(){var t=this._rect,i=this.style,r=!t;if(r){var s=!1;this.path||(s=!0,this.createPathProxy());var a=this.path;(s||this.__dirty&Mm)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),t=a.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||r){o.copy(t);var l=i.strokeNoScale?this.getLineScale():1,c=i.lineWidth;if(!this.hasFill()){var u=this.strokeContainThreshold;c=Math.max(c,u??4)}l>1e-10&&(o.width+=c/l,o.height+=c/l,o.x-=c/l/2,o.y-=c/l/2)}return o}return t},e.prototype.contain=function(t,i){var r=this.transformCoordToLocal(t,i),s=this.getBoundingRect(),a=this.style;if(t=r[0],i=r[1],s.contain(t,i)){var o=this.path;if(this.hasStroke()){var l=a.lineWidth,c=a.strokeNoScale?this.getLineScale():1;if(c>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),S3e(o,l/c,t,i)))return!0}if(this.hasFill())return b3e(o,t,i)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=Mm,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(t,i){t==="shape"?this.setShape(i):n.prototype.attrKV.call(this,t,i)},e.prototype.setShape=function(t,i){var r=this.shape;return r||(r=this.shape={}),typeof t=="string"?r[t]=i:Nt(r,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&Mm)},e.prototype.createStyle=function(t){return EM(Fq,t)},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var i=this._normalState;t.shape&&!i.shape&&(i.shape=Nt({},this.shape))},e.prototype._applyStateObj=function(t,i,r,s,a,o){n.prototype._applyStateObj.call(this,t,i,r,s,a,o);var l=!(i&&s),c;if(i&&i.shape?a?s?c=i.shape:(c=Nt({},r.shape),Nt(c,i.shape)):(c=Nt({},s?this.shape:r.shape),Nt(c,i.shape)):l&&(c=r.shape),c)if(a){this.shape=Nt({},this.shape);for(var u={},d=mr(c),f=0;f<d.length;f++){var h=d[f];typeof c[h]=="object"?this.shape[h]=c[h]:u[h]=c[h]}this._transitionState(t,{shape:u},o)}else this.shape=c,this.dirtyShape()},e.prototype._mergeStates=function(t){for(var i=n.prototype._mergeStates.call(this,t),r,s=0;s<t.length;s++){var a=t[s];a.shape&&(r=r||{},this._mergeStyle(r,a.shape))}return r&&(i.shape=r),i},e.prototype.getAnimationStyleProps=function(){return w3e},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var i=function(s){Mn(a,s);function a(o){var l=s.call(this,o)||this;return t.init&&t.init.call(l,o),l}return a.prototype.getDefaultStyle=function(){return vi(t.style)},a.prototype.getDefaultShape=function(){return vi(t.shape)},a}(e);for(var r in t)typeof t[r]=="function"&&(i.prototype[r]=t[r]);return i},e.initDefaultProps=function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=Oa|U0|Mm}(),e}(wb);const Ki=x3e;var C3e=nr({strokeFirst:!0,font:Gh,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Fq),zq=function(n){Mn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var t=this.style,i=t.stroke;return i!=null&&i!=="none"&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style,i=t.fill;return i!=null&&i!=="none"},e.prototype.createStyle=function(t){return EM(C3e,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var i=t.text;i!=null?i+="":i="";var r=yq(i,t.font,t.textAlign,t.textBaseline);if(r.x+=t.x||0,r.y+=t.y||0,this.hasStroke()){var s=t.lineWidth;r.x-=s/2,r.y-=s/2,r.width+=s,r.height+=s}this._rect=r}return this._rect},e.initDefaultProps=function(){var t=e.prototype;t.dirtyRectTolerance=10}(),e}(wb);zq.prototype.type="tspan";const PR=zq;var M3e=nr({x:0,y:0},Ih),T3e={style:nr({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DM.style)};function A3e(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var Uq=function(n){Mn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.createStyle=function(t){return EM(M3e,t)},e.prototype._getSize=function(t){var i=this.style,r=i[t];if(r!=null)return r;var s=A3e(i.image)?i.image:this.__image;if(!s)return 0;var a=t==="width"?"height":"width",o=i[a];return o==null?s[t]:s[t]/s[a]*o},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return T3e},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new Oi(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(wb);Uq.prototype.type="image";const wg=Uq;function E3e(n,e){var t=e.x,i=e.y,r=e.width,s=e.height,a=e.r,o,l,c,u;r<0&&(t=t+r,r=-r),s<0&&(i=i+s,s=-s),typeof a=="number"?o=l=c=u=a:a instanceof Array?a.length===1?o=l=c=u=a[0]:a.length===2?(o=c=a[0],l=u=a[1]):a.length===3?(o=a[0],l=u=a[1],c=a[2]):(o=a[0],l=a[1],c=a[2],u=a[3]):o=l=c=u=0;var d;o+l>r&&(d=o+l,o*=r/d,l*=r/d),c+u>r&&(d=c+u,c*=r/d,u*=r/d),l+c>s&&(d=l+c,l*=s/d,c*=s/d),o+u>s&&(d=o+u,o*=s/d,u*=s/d),n.moveTo(t+o,i),n.lineTo(t+r-l,i),l!==0&&n.arc(t+r-l,i+l,l,-Math.PI/2,0),n.lineTo(t+r,i+s-c),c!==0&&n.arc(t+r-c,i+s-c,c,0,Math.PI/2),n.lineTo(t+u,i+s),u!==0&&n.arc(t+u,i+s-u,u,Math.PI/2,Math.PI),n.lineTo(t,i+o),o!==0&&n.arc(t+o,i+o,o,Math.PI,Math.PI*1.5)}var Um=Math.round;function Hq(n,e,t){if(e){var i=e.x1,r=e.x2,s=e.y1,a=e.y2;n.x1=i,n.x2=r,n.y1=s,n.y2=a;var o=t&&t.lineWidth;return o&&(Um(i*2)===Um(r*2)&&(n.x1=n.x2=fh(i,o,!0)),Um(s*2)===Um(a*2)&&(n.y1=n.y2=fh(s,o,!0))),n}}function Vq(n,e,t){if(e){var i=e.x,r=e.y,s=e.width,a=e.height;n.x=i,n.y=r,n.width=s,n.height=a;var o=t&&t.lineWidth;return o&&(n.x=fh(i,o,!0),n.y=fh(r,o,!0),n.width=Math.max(fh(i+s,o,!1)-n.x,s===0?0:1),n.height=Math.max(fh(r+a,o,!1)-n.y,a===0?0:1)),n}}function fh(n,e,t){if(!e)return n;var i=Um(n*2);return(i+Um(e))%2===0?i/2:(i+(t?1:-1))/2}var I3e=function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n}(),R3e={},$q=function(n){Mn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new I3e},e.prototype.buildPath=function(t,i){var r,s,a,o;if(this.subPixelOptimize){var l=Vq(R3e,i,this.style);r=l.x,s=l.y,a=l.width,o=l.height,l.r=i.r,i=l}else r=i.x,s=i.y,a=i.width,o=i.height;i.r?E3e(t,i):t.rect(r,s,a,o)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(Ki);$q.prototype.type="rect";const ya=$q;var Cz={fill:"#000"},Mz=2,P3e={style:nr({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DM.style)},Gq=function(n){Mn(e,n);function e(t){var i=n.call(this)||this;return i.type="text",i._children=[],i._defaultStyle=Cz,i.attr(t),i}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var i=this._children[t];i.zlevel=this.zlevel,i.z=this.z,i.z2=this.z2,i.culling=this.culling,i.cursor=this.cursor,i.invisible=this.invisible}},e.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):n.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(t){var i=this.innerTransformable;return i?i.getLocalTransform(t):n.prototype.getLocalTransform.call(this,t)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,N3e(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var i=0;i<this._children.length;i++)this._children[i].__zr=t},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var i=0;i<this._children.length;i++)this._children[i].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new Oi(0,0,0,0),i=this._children,r=[],s=null,a=0;a<i.length;a++){var o=i[a],l=o.getBoundingRect(),c=o.getLocalTransform(r);c?(t.copy(l),t.applyTransform(c),s=s||t.clone(),s.union(t)):(s=s||l.clone(),s.union(l))}this._rect=s||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||Cz},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,i){if(!i)return t;var r=i.rich,s=t.rich||r&&{};return Nt(t,i),r&&s?(this._mergeRich(s,r),t.rich=s):s&&(t.rich=s),t},e.prototype._mergeRich=function(t,i){for(var r=mr(i),s=0;s<r.length;s++){var a=r[s];t[a]=t[a]||{},Nt(t[a],i[a])}},e.prototype.getAnimationStyleProps=function(){return P3e},e.prototype._getOrCreateChild=function(t){var i=this._children[this._childCursor];return(!i||!(i instanceof t))&&(i=new t),this._children[this._childCursor++]=i,i.__zr=this.__zr,i.parent=this,i},e.prototype._updatePlainTexts=function(){var t=this.style,i=t.font||Gh,r=t.padding,s=Dz(t),a=jLe(s,t),o=CA(t),l=!!t.backgroundColor,c=a.outerHeight,u=a.outerWidth,d=a.contentWidth,f=a.lines,h=a.lineHeight,p=this._defaultStyle,m=t.x||0,v=t.y||0,g=t.align||p.align||"left",_=t.verticalAlign||p.verticalAlign||"top",y=m,S=Tm(v,a.contentHeight,_);if(o||r){var w=V0(m,u,g),x=Tm(v,c,_);o&&this._renderBackground(t,t,w,x,u,c)}S+=h/2,r&&(y=Pz(m,g,r),_==="top"?S+=r[0]:_==="bottom"&&(S-=r[2]));for(var T=0,C=!1,M=Rz("fill"in t?t.fill:(C=!0,p.fill)),A=Iz("stroke"in t?t.stroke:!l&&(!p.autoStroke||C)?(T=Mz,p.stroke):null),E=t.textShadowBlur>0,I=t.width!=null&&(t.overflow==="truncate"||t.overflow==="break"||t.overflow==="breakAll"),P=a.calculatedLineHeight,D=0;D<f.length;D++){var L=this._getOrCreateChild(PR),R=L.createStyle();L.useStyle(R),R.text=f[D],R.x=y,R.y=S,g&&(R.textAlign=g),R.textBaseline="middle",R.opacity=t.opacity,R.strokeFirst=!0,E&&(R.shadowBlur=t.textShadowBlur||0,R.shadowColor=t.textShadowColor||"transparent",R.shadowOffsetX=t.textShadowOffsetX||0,R.shadowOffsetY=t.textShadowOffsetY||0),R.stroke=A,R.fill=M,A&&(R.lineWidth=t.lineWidth||T,R.lineDash=t.lineDash,R.lineDashOffset=t.lineDashOffset||0),R.font=i,Az(R,t),S+=h,I&&L.setBoundingRect(new Oi(V0(R.x,t.width,R.textAlign),Tm(R.y,P,R.textBaseline),d,P))}},e.prototype._updateRichTexts=function(){var t=this.style,i=Dz(t),r=JLe(i,t),s=r.width,a=r.outerWidth,o=r.outerHeight,l=t.padding,c=t.x||0,u=t.y||0,d=this._defaultStyle,f=t.align||d.align,h=t.verticalAlign||d.verticalAlign,p=V0(c,a,f),m=Tm(u,o,h),v=p,g=m;l&&(v+=l[3],g+=l[0]);var _=v+s;CA(t)&&this._renderBackground(t,t,p,m,a,o);for(var y=!!t.backgroundColor,S=0;S<r.lines.length;S++){for(var w=r.lines[S],x=w.tokens,T=x.length,C=w.lineHeight,M=w.width,A=0,E=v,I=_,P=T-1,D=void 0;A<T&&(D=x[A],!D.align||D.align==="left");)this._placeToken(D,t,C,g,E,"left",y),M-=D.width,E+=D.width,A++;for(;P>=0&&(D=x[P],D.align==="right");)this._placeToken(D,t,C,g,I,"right",y),M-=D.width,I-=D.width,P--;for(E+=(s-(E-v)-(_-I)-M)/2;A<=P;)D=x[A],this._placeToken(D,t,C,g,E+D.width/2,"center",y),E+=D.width,A++;g+=C}},e.prototype._placeToken=function(t,i,r,s,a,o,l){var c=i.rich[t.styleName]||{};c.text=t.text;var u=t.verticalAlign,d=s+r/2;u==="top"?d=s+t.height/2:u==="bottom"&&(d=s+r-t.height/2);var f=!t.isLineHolder&&CA(c);f&&this._renderBackground(c,i,o==="right"?a-t.width:o==="center"?a-t.width/2:a,d-t.height/2,t.width,t.height);var h=!!c.backgroundColor,p=t.textPadding;p&&(a=Pz(a,o,p),d-=t.height/2-p[0]-t.innerHeight/2);var m=this._getOrCreateChild(PR),v=m.createStyle();m.useStyle(v);var g=this._defaultStyle,_=!1,y=0,S=Rz("fill"in c?c.fill:"fill"in i?i.fill:(_=!0,g.fill)),w=Iz("stroke"in c?c.stroke:"stroke"in i?i.stroke:!h&&!l&&(!g.autoStroke||_)?(y=Mz,g.stroke):null),x=c.textShadowBlur>0||i.textShadowBlur>0;v.text=t.text,v.x=a,v.y=d,x&&(v.shadowBlur=c.textShadowBlur||i.textShadowBlur||0,v.shadowColor=c.textShadowColor||i.textShadowColor||"transparent",v.shadowOffsetX=c.textShadowOffsetX||i.textShadowOffsetX||0,v.shadowOffsetY=c.textShadowOffsetY||i.textShadowOffsetY||0),v.textAlign=o,v.textBaseline="middle",v.font=t.font||Gh,v.opacity=ly(c.opacity,i.opacity,1),Az(v,c),w&&(v.lineWidth=ly(c.lineWidth,i.lineWidth,y),v.lineDash=ui(c.lineDash,i.lineDash),v.lineDashOffset=i.lineDashOffset||0,v.stroke=w),S&&(v.fill=S);var T=t.contentWidth,C=t.contentHeight;m.setBoundingRect(new Oi(V0(v.x,T,v.textAlign),Tm(v.y,C,v.textBaseline),T,C))},e.prototype._renderBackground=function(t,i,r,s,a,o){var l=t.backgroundColor,c=t.borderWidth,u=t.borderColor,d=l&&l.image,f=l&&!d,h=t.borderRadius,p=this,m,v;if(f||t.lineHeight||c&&u){m=this._getOrCreateChild(ya),m.useStyle(m.createStyle()),m.style.fill=null;var g=m.shape;g.x=r,g.y=s,g.width=a,g.height=o,g.r=h,m.dirtyShape()}if(f){var _=m.style;_.fill=l||null,_.fillOpacity=ui(t.fillOpacity,1)}else if(d){v=this._getOrCreateChild(wg),v.onload=function(){p.dirtyStyle()};var y=v.style;y.image=l.image,y.x=r,y.y=s,y.width=a,y.height=o}if(c&&u){var _=m.style;_.lineWidth=c,_.stroke=u,_.strokeOpacity=ui(t.strokeOpacity,1),_.lineDash=t.borderDash,_.lineDashOffset=t.borderDashOffset||0,m.strokeContainThreshold=0,m.hasFill()&&m.hasStroke()&&(_.strokeFirst=!0,_.lineWidth*=2)}var S=(m||v).style;S.shadowBlur=t.shadowBlur||0,S.shadowColor=t.shadowColor||"transparent",S.shadowOffsetX=t.shadowOffsetX||0,S.shadowOffsetY=t.shadowOffsetY||0,S.opacity=ly(t.opacity,i.opacity,1)},e.makeFont=function(t){var i="";return O3e(t)&&(i=[t.fontStyle,t.fontWeight,k3e(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),i&&Bl(i)||t.textFont||t.font},e}(wb),D3e={left:!0,right:1,center:1},L3e={top:1,bottom:1,middle:1},Tz=["fontStyle","fontWeight","fontSize","fontFamily"];function k3e(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?H3+"px":n+"px"}function Az(n,e){for(var t=0;t<Tz.length;t++){var i=Tz[t],r=e[i];r!=null&&(n[i]=r)}}function O3e(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function N3e(n){return Ez(n),tt(n.rich,Ez),n}function Ez(n){if(n){n.font=Gq.makeFont(n);var e=n.align;e==="middle"&&(e="center"),n.align=e==null||D3e[e]?e:"left";var t=n.verticalAlign;t==="center"&&(t="middle"),n.verticalAlign=t==null||L3e[t]?t:"top";var i=n.padding;i&&(n.padding=XK(n.padding))}}function Iz(n,e){return n==null||e<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function Rz(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function Pz(n,e,t){return e==="right"?n-t[1]:e==="center"?n+t[3]/2-t[1]/2:n+t[3]}function Dz(n){var e=n.text;return e!=null&&(e+=""),e}function CA(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}const ta=Gq;var or=Jr(),B3e=function(n,e,t,i){if(i){var r=or(i);r.dataIndex=t,r.dataType=e,r.seriesIndex=n,i.type==="group"&&i.traverse(function(s){var a=or(s);a.seriesIndex=n,a.dataIndex=t,a.dataType=e})}},Lz=1,kz={},Wq=Jr(),sk=Jr(),Kq=0,ak=1,ok=2,Zl=["emphasis","blur","select"],Vx=["normal","emphasis","blur","select"],F3e=10,z3e=9,Rh="highlight",R1="downplay",hy="select",P1="unselect",py="toggleSelect";function Tp(n){return n!=null&&n!=="none"}var Oz=new _b(100);function Nz(n){if(Rn(n)){var e=Oz.get(n);return e||(e=tz(n,-.1),Oz.put(n,e)),e}else if(AM(n)){var t=Nt({},n);return t.colorStops=hi(n.colorStops,function(i){return{offset:i.offset,color:tz(i.color,-.1)}}),t}return n}function LM(n,e,t){n.onHoverStateChange&&(n.hoverState||0)!==t&&n.onHoverStateChange(e),n.hoverState=t}function qq(n){LM(n,"emphasis",ok)}function Xq(n){n.hoverState===ok&&LM(n,"normal",Kq)}function lk(n){LM(n,"blur",ak)}function Yq(n){n.hoverState===ak&&LM(n,"normal",Kq)}function U3e(n){n.selected=!0}function H3e(n){n.selected=!1}function Bz(n,e,t){e(n,t)}function yu(n,e,t){Bz(n,e,t),n.isGroup&&n.traverse(function(i){Bz(i,e,t)})}function V3e(n,e,t,i){for(var r=n.style,s={},a=0;a<e.length;a++){var o=e[a],l=r[o];s[o]=l??(i&&i[o])}for(var a=0;a<n.animators.length;a++){var c=n.animators[a];c.__fromStateTransition&&c.__fromStateTransition.indexOf(t)<0&&c.targetName==="style"&&c.saveTo(s,e)}return s}function $3e(n,e,t,i){var r=t&&$i(t,"select")>=0,s=!1;if(n instanceof Ki){var a=Wq(n),o=r&&a.selectFill||a.normalFill,l=r&&a.selectStroke||a.normalStroke;if(Tp(o)||Tp(l)){i=i||{};var c=i.style||{};c.fill==="inherit"?(s=!0,i=Nt({},i),c=Nt({},c),c.fill=o):!Tp(c.fill)&&Tp(o)?(s=!0,i=Nt({},i),c=Nt({},c),c.fill=Nz(o)):!Tp(c.stroke)&&Tp(l)&&(s||(i=Nt({},i),c=Nt({},c)),c.stroke=Nz(l)),i.style=c}}if(i&&i.z2==null){s||(i=Nt({},i));var u=n.z2EmphasisLift;i.z2=n.z2+(u??F3e)}return i}function G3e(n,e,t){if(t&&t.z2==null){t=Nt({},t);var i=n.z2SelectLift;t.z2=n.z2+(i??z3e)}return t}function W3e(n,e,t){var i=$i(n.currentStates,e)>=0,r=n.style.opacity,s=i?null:V3e(n,["opacity"],e,{opacity:1});t=t||{};var a=t.style||{};return a.opacity==null&&(t=Nt({},t),a=Nt({opacity:i?r:s.opacity*.1},a),t.style=a),t}function MA(n,e){var t=this.states[n];if(this.style){if(n==="emphasis")return $3e(this,n,e,t);if(n==="blur")return W3e(this,n,t);if(n==="select")return G3e(this,n,t)}return t}function K3e(n){n.stateProxy=MA;var e=n.getTextContent(),t=n.getTextGuideLine();e&&(e.stateProxy=MA),t&&(t.stateProxy=MA)}function Fz(n,e){!Jq(n,e)&&!n.__highByOuter&&yu(n,qq)}function zz(n,e){!Jq(n,e)&&!n.__highByOuter&&yu(n,Xq)}function DR(n,e){n.__highByOuter|=1<<(e||0),yu(n,qq)}function LR(n,e){!(n.__highByOuter&=~(1<<(e||0)))&&yu(n,Xq)}function q3e(n){yu(n,lk)}function jq(n){yu(n,Yq)}function Qq(n){yu(n,U3e)}function Zq(n){yu(n,H3e)}function Jq(n,e){return n.__highDownSilentOnTouch&&e.zrByTouch}function eX(n){var e=n.getModel(),t=[],i=[];e.eachComponent(function(r,s){var a=sk(s),o=r==="series",l=o?n.getViewOfSeriesModel(s):n.getViewOfComponentModel(s);!o&&i.push(l),a.isBlured&&(l.group.traverse(function(c){Yq(c)}),o&&t.push(s)),a.isBlured=!1}),tt(i,function(r){r&&r.toggleBlurSeries&&r.toggleBlurSeries(t,!1,e)})}function kR(n,e,t,i){var r=i.getModel();t=t||"coordinateSystem";function s(c,u){for(var d=0;d<u.length;d++){var f=c.getItemGraphicEl(u[d]);f&&jq(f)}}if(n!=null&&!(!e||e==="none")){var a=r.getSeriesByIndex(n),o=a.coordinateSystem;o&&o.master&&(o=o.master);var l=[];r.eachSeries(function(c){var u=a===c,d=c.coordinateSystem;d&&d.master&&(d=d.master);var f=d&&o?d===o:u;if(!(t==="series"&&!u||t==="coordinateSystem"&&!f||e==="series"&&u)){var h=i.getViewOfSeriesModel(c);if(h.group.traverse(function(v){v.__highByOuter&&u&&e==="self"||lk(v)}),xa(e))s(c.getData(),e);else if(Ln(e))for(var p=mr(e),m=0;m<p.length;m++)s(c.getData(p[m]),e[p[m]]);l.push(c),sk(c).isBlured=!0}}),r.eachComponent(function(c,u){if(c!=="series"){var d=i.getViewOfComponentModel(u);d&&d.toggleBlurSeries&&d.toggleBlurSeries(l,!0,r)}})}}function OR(n,e,t){if(!(n==null||e==null)){var i=t.getModel().getComponent(n,e);if(i){sk(i).isBlured=!0;var r=t.getViewOfComponentModel(i);!r||!r.focusBlurEnabled||r.group.traverse(function(s){lk(s)})}}}function X3e(n,e,t){var i=n.seriesIndex,r=n.getData(e.dataType);if(r){var s=bb(r,e);s=(hn(s)?s[0]:s)||0;var a=r.getItemGraphicEl(s);if(!a)for(var o=r.count(),l=0;!a&&l<o;)a=r.getItemGraphicEl(l++);if(a){var c=or(a);kR(i,c.focus,c.blurScope,t)}else{var u=n.get(["emphasis","focus"]),d=n.get(["emphasis","blurScope"]);u!=null&&kR(i,u,d,t)}}}function ck(n,e,t,i){var r={focusSelf:!1,dispatchers:null};if(n==null||n==="series"||e==null||t==null)return r;var s=i.getModel().getComponent(n,e);if(!s)return r;var a=i.getViewOfComponentModel(s);if(!a||!a.findHighDownDispatchers)return r;for(var o=a.findHighDownDispatchers(t),l,c=0;c<o.length;c++)if(or(o[c]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:o}}function Y3e(n,e,t){var i=or(n),r=ck(i.componentMainType,i.componentIndex,i.componentHighDownName,t),s=r.dispatchers,a=r.focusSelf;s?(a&&OR(i.componentMainType,i.componentIndex,t),tt(s,function(o){return Fz(o,e)})):(kR(i.seriesIndex,i.focus,i.blurScope,t),i.focus==="self"&&OR(i.componentMainType,i.componentIndex,t),Fz(n,e))}function j3e(n,e,t){eX(t);var i=or(n),r=ck(i.componentMainType,i.componentIndex,i.componentHighDownName,t).dispatchers;r?tt(r,function(s){return zz(s,e)}):zz(n,e)}function Q3e(n,e,t){if(FR(e)){var i=e.dataType,r=n.getData(i),s=bb(r,e);hn(s)||(s=[s]),n[e.type===py?"toggleSelect":e.type===hy?"select":"unselect"](s,i)}}function Uz(n){var e=n.getAllData();tt(e,function(t){var i=t.data,r=t.type;i.eachItemGraphicEl(function(s,a){n.isSelected(a,r)?Qq(s):Zq(s)})})}function Z3e(n){var e=[];return n.eachSeries(function(t){var i=t.getAllData();tt(i,function(r){r.data;var s=r.type,a=t.getSelectedDataIndices();if(a.length>0){var o={dataIndex:a,seriesIndex:t.seriesIndex};s!=null&&(o.dataType=s),e.push(o)}})}),e}function NR(n,e,t){tX(n,!0),yu(n,K3e),tke(n,e,t)}function J3e(n){tX(n,!1)}function eke(n,e,t,i){i?J3e(n):NR(n,e,t)}function tke(n,e,t){var i=or(n);e!=null?(i.focus=e,i.blurScope=t):i.focus&&(i.focus=null)}var Hz=["emphasis","blur","select"],nke={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function ike(n,e,t,i){t=t||"itemStyle";for(var r=0;r<Hz.length;r++){var s=Hz[r],a=e.getModel([s,t]),o=n.ensureState(s);o.style=i?i(a):a[nke[t]]()}}function tX(n,e){var t=e===!1,i=n;n.highDownSilentOnTouch&&(i.__highDownSilentOnTouch=n.highDownSilentOnTouch),(!t||i.__highDownDispatcher)&&(i.__highByOuter=i.__highByOuter||0,i.__highDownDispatcher=!t)}function BR(n){return!!(n&&n.__highDownDispatcher)}function rke(n){var e=kz[n];return e==null&&Lz<=32&&(e=kz[n]=Lz++),e}function FR(n){var e=n.type;return e===hy||e===P1||e===py}function Vz(n){var e=n.type;return e===Rh||e===R1}function ske(n){var e=Wq(n);e.normalFill=n.style.fill,e.normalStroke=n.style.stroke;var t=n.states.select||{};e.selectFill=t.style&&t.style.fill||null,e.selectStroke=t.style&&t.style.stroke||null}var Ap=Wh.CMD,ake=[[],[],[]],$z=Math.sqrt,oke=Math.atan2;function lke(n,e){if(e){var t=n.data,i=n.len(),r,s,a,o,l,c,u=Ap.M,d=Ap.C,f=Ap.L,h=Ap.R,p=Ap.A,m=Ap.Q;for(a=0,o=0;a<i;){switch(r=t[a++],o=a,s=0,r){case u:s=1;break;case f:s=1;break;case d:s=3;break;case m:s=2;break;case p:var v=e[4],g=e[5],_=$z(e[0]*e[0]+e[1]*e[1]),y=$z(e[2]*e[2]+e[3]*e[3]),S=oke(-e[1]/y,e[0]/_);t[a]*=_,t[a++]+=v,t[a]*=y,t[a++]+=g,t[a++]*=_,t[a++]*=y,t[a++]+=S,t[a++]+=S,a+=2,o=a;break;case h:c[0]=t[a++],c[1]=t[a++],Gl(c,c,e),t[o++]=c[0],t[o++]=c[1],c[0]+=t[a++],c[1]+=t[a++],Gl(c,c,e),t[o++]=c[0],t[o++]=c[1]}for(l=0;l<s;l++){var w=ake[l];w[0]=t[a++],w[1]=t[a++],Gl(w,w,e),t[o++]=w[0],t[o++]=w[1]}}n.increaseVersion()}}var TA=Math.sqrt,_S=Math.sin,bS=Math.cos,a0=Math.PI;function Gz(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function zR(n,e){return(n[0]*e[0]+n[1]*e[1])/(Gz(n)*Gz(e))}function Wz(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(zR(n,e))}function Kz(n,e,t,i,r,s,a,o,l,c,u){var d=l*(a0/180),f=bS(d)*(n-t)/2+_S(d)*(e-i)/2,h=-1*_S(d)*(n-t)/2+bS(d)*(e-i)/2,p=f*f/(a*a)+h*h/(o*o);p>1&&(a*=TA(p),o*=TA(p));var m=(r===s?-1:1)*TA((a*a*(o*o)-a*a*(h*h)-o*o*(f*f))/(a*a*(h*h)+o*o*(f*f)))||0,v=m*a*h/o,g=m*-o*f/a,_=(n+t)/2+bS(d)*v-_S(d)*g,y=(e+i)/2+_S(d)*v+bS(d)*g,S=Wz([1,0],[(f-v)/a,(h-g)/o]),w=[(f-v)/a,(h-g)/o],x=[(-1*f-v)/a,(-1*h-g)/o],T=Wz(w,x);if(zR(w,x)<=-1&&(T=a0),zR(w,x)>=1&&(T=0),T<0){var C=Math.round(T/a0*1e6)/1e6;T=a0*2+C%2*a0}u.addData(c,_,y,a,o,S,T,d,s)}var cke=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,uke=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function dke(n){var e=new Wh;if(!n)return e;var t=0,i=0,r=t,s=i,a,o=Wh.CMD,l=n.match(cke);if(!l)return e;for(var c=0;c<l.length;c++){for(var u=l[c],d=u.charAt(0),f=void 0,h=u.match(uke)||[],p=h.length,m=0;m<p;m++)h[m]=parseFloat(h[m]);for(var v=0;v<p;){var g=void 0,_=void 0,y=void 0,S=void 0,w=void 0,x=void 0,T=void 0,C=t,M=i,A=void 0,E=void 0;switch(d){case"l":t+=h[v++],i+=h[v++],f=o.L,e.addData(f,t,i);break;case"L":t=h[v++],i=h[v++],f=o.L,e.addData(f,t,i);break;case"m":t+=h[v++],i+=h[v++],f=o.M,e.addData(f,t,i),r=t,s=i,d="l";break;case"M":t=h[v++],i=h[v++],f=o.M,e.addData(f,t,i),r=t,s=i,d="L";break;case"h":t+=h[v++],f=o.L,e.addData(f,t,i);break;case"H":t=h[v++],f=o.L,e.addData(f,t,i);break;case"v":i+=h[v++],f=o.L,e.addData(f,t,i);break;case"V":i=h[v++],f=o.L,e.addData(f,t,i);break;case"C":f=o.C,e.addData(f,h[v++],h[v++],h[v++],h[v++],h[v++],h[v++]),t=h[v-2],i=h[v-1];break;case"c":f=o.C,e.addData(f,h[v++]+t,h[v++]+i,h[v++]+t,h[v++]+i,h[v++]+t,h[v++]+i),t+=h[v-2],i+=h[v-1];break;case"S":g=t,_=i,A=e.len(),E=e.data,a===o.C&&(g+=t-E[A-4],_+=i-E[A-3]),f=o.C,C=h[v++],M=h[v++],t=h[v++],i=h[v++],e.addData(f,g,_,C,M,t,i);break;case"s":g=t,_=i,A=e.len(),E=e.data,a===o.C&&(g+=t-E[A-4],_+=i-E[A-3]),f=o.C,C=t+h[v++],M=i+h[v++],t+=h[v++],i+=h[v++],e.addData(f,g,_,C,M,t,i);break;case"Q":C=h[v++],M=h[v++],t=h[v++],i=h[v++],f=o.Q,e.addData(f,C,M,t,i);break;case"q":C=h[v++]+t,M=h[v++]+i,t+=h[v++],i+=h[v++],f=o.Q,e.addData(f,C,M,t,i);break;case"T":g=t,_=i,A=e.len(),E=e.data,a===o.Q&&(g+=t-E[A-4],_+=i-E[A-3]),t=h[v++],i=h[v++],f=o.Q,e.addData(f,g,_,t,i);break;case"t":g=t,_=i,A=e.len(),E=e.data,a===o.Q&&(g+=t-E[A-4],_+=i-E[A-3]),t+=h[v++],i+=h[v++],f=o.Q,e.addData(f,g,_,t,i);break;case"A":y=h[v++],S=h[v++],w=h[v++],x=h[v++],T=h[v++],C=t,M=i,t=h[v++],i=h[v++],f=o.A,Kz(C,M,t,i,x,T,y,S,w,f,e);break;case"a":y=h[v++],S=h[v++],w=h[v++],x=h[v++],T=h[v++],C=t,M=i,t+=h[v++],i+=h[v++],f=o.A,Kz(C,M,t,i,x,T,y,S,w,f,e);break}}(d==="z"||d==="Z")&&(f=o.Z,e.addData(f),t=r,i=s),a=f}return e.toStatic(),e}var nX=function(n){Mn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.applyTransform=function(t){},e}(Ki);function iX(n){return n.setData!=null}function rX(n,e){var t=dke(n),i=Nt({},e);return i.buildPath=function(r){if(iX(r)){r.setData(t.data);var s=r.getContext();s&&r.rebuildPath(s,1)}else{var s=r;t.rebuildPath(s,1)}},i.applyTransform=function(r){lke(t,r),this.dirtyShape()},i}function fke(n,e){return new nX(rX(n,e))}function hke(n,e){var t=rX(n,e),i=function(r){Mn(s,r);function s(a){var o=r.call(this,a)||this;return o.applyTransform=t.applyTransform,o.buildPath=t.buildPath,o}return s}(nX);return i}function pke(n,e){for(var t=[],i=n.length,r=0;r<i;r++){var s=n[r];t.push(s.getUpdatedPathProxy(!0))}var a=new Ki(e);return a.createPathProxy(),a.buildPath=function(o){if(iX(o)){o.appendPath(t);var l=o.getContext();l&&o.rebuildPath(l,1)}},a}var mke=function(){function n(){this.cx=0,this.cy=0,this.r=0}return n}(),sX=function(n){Mn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new mke},e.prototype.buildPath=function(t,i){t.moveTo(i.cx+i.r,i.cy),t.arc(i.cx,i.cy,i.r,0,Math.PI*2)},e}(Ki);sX.prototype.type="circle";const uk=sX;var vke=function(){function n(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return n}(),aX=function(n){Mn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new vke},e.prototype.buildPath=function(t,i){var r=.5522848,s=i.cx,a=i.cy,o=i.rx,l=i.ry,c=o*r,u=l*r;t.moveTo(s-o,a),t.bezierCurveTo(s-o,a-u,s-c,a-l,s,a-l),t.bezierCurveTo(s+c,a-l,s+o,a-u,s+o,a),t.bezierCurveTo(s+o,a+u,s+c,a+l,s,a+l),t.bezierCurveTo(s-c,a+l,s-o,a+u,s-o,a),t.closePath()},e}(Ki);aX.prototype.type="ellipse";const oX=aX;var lX=Math.PI,AA=lX*2,Mf=Math.sin,Ep=Math.cos,gke=Math.acos,ms=Math.atan2,qz=Math.abs,my=Math.sqrt,$0=Math.max,Ml=Math.min,jo=1e-4;function yke(n,e,t,i,r,s,a,o){var l=t-n,c=i-e,u=a-r,d=o-s,f=d*l-u*c;if(!(f*f<jo))return f=(u*(e-s)-d*(n-r))/f,[n+f*l,e+f*c]}function SS(n,e,t,i,r,s,a){var o=n-t,l=e-i,c=(a?s:-s)/my(o*o+l*l),u=c*l,d=-c*o,f=n+u,h=e+d,p=t+u,m=i+d,v=(f+p)/2,g=(h+m)/2,_=p-f,y=m-h,S=_*_+y*y,w=r-s,x=f*m-p*h,T=(y<0?-1:1)*my($0(0,w*w*S-x*x)),C=(x*y-_*T)/S,M=(-x*_-y*T)/S,A=(x*y+_*T)/S,E=(-x*_+y*T)/S,I=C-v,P=M-g,D=A-v,L=E-g;return I*I+P*P>D*D+L*L&&(C=A,M=E),{cx:C,cy:M,x0:-u,y0:-d,x1:C*(r/w-1),y1:M*(r/w-1)}}function _ke(n){var e;if(hn(n)){var t=n.length;if(!t)return n;t===1?e=[n[0],n[0],0,0]:t===2?e=[n[0],n[0],n[1],n[1]]:t===3?e=n.concat(n[2]):e=n}else e=[n,n,n,n];return e}function bke(n,e){var t,i=$0(e.r,0),r=$0(e.r0||0,0),s=i>0,a=r>0;if(!(!s&&!a)){if(s||(i=r,r=0),r>i){var o=i;i=r,r=o}var l=e.startAngle,c=e.endAngle;if(!(isNaN(l)||isNaN(c))){var u=e.cx,d=e.cy,f=!!e.clockwise,h=qz(c-l),p=h>AA&&h%AA;if(p>jo&&(h=p),!(i>jo))n.moveTo(u,d);else if(h>AA-jo)n.moveTo(u+i*Ep(l),d+i*Mf(l)),n.arc(u,d,i,l,c,!f),r>jo&&(n.moveTo(u+r*Ep(c),d+r*Mf(c)),n.arc(u,d,r,c,l,f));else{var m=void 0,v=void 0,g=void 0,_=void 0,y=void 0,S=void 0,w=void 0,x=void 0,T=void 0,C=void 0,M=void 0,A=void 0,E=void 0,I=void 0,P=void 0,D=void 0,L=i*Ep(l),R=i*Mf(l),B=r*Ep(c),k=r*Mf(c),O=h>jo;if(O){var U=e.cornerRadius;U&&(t=_ke(U),m=t[0],v=t[1],g=t[2],_=t[3]);var G=qz(i-r)/2;if(y=Ml(G,g),S=Ml(G,_),w=Ml(G,m),x=Ml(G,v),M=T=$0(y,S),A=C=$0(w,x),(T>jo||C>jo)&&(E=i*Ep(c),I=i*Mf(c),P=r*Ep(l),D=r*Mf(l),h<lX)){var q=yke(L,R,P,D,E,I,B,k);if(q){var W=L-q[0],Y=R-q[1],J=E-q[0],Z=I-q[1],ee=1/Mf(gke((W*J+Y*Z)/(my(W*W+Y*Y)*my(J*J+Z*Z)))/2),me=my(q[0]*q[0]+q[1]*q[1]);M=Ml(T,(i-me)/(ee+1)),A=Ml(C,(r-me)/(ee-1))}}}if(!O)n.moveTo(u+L,d+R);else if(M>jo){var ye=Ml(g,M),Te=Ml(_,M),Ee=SS(P,D,L,R,i,ye,f),H=SS(E,I,B,k,i,Te,f);n.moveTo(u+Ee.cx+Ee.x0,d+Ee.cy+Ee.y0),M<T&&ye===Te?n.arc(u+Ee.cx,d+Ee.cy,M,ms(Ee.y0,Ee.x0),ms(H.y0,H.x0),!f):(ye>0&&n.arc(u+Ee.cx,d+Ee.cy,ye,ms(Ee.y0,Ee.x0),ms(Ee.y1,Ee.x1),!f),n.arc(u,d,i,ms(Ee.cy+Ee.y1,Ee.cx+Ee.x1),ms(H.cy+H.y1,H.cx+H.x1),!f),Te>0&&n.arc(u+H.cx,d+H.cy,Te,ms(H.y1,H.x1),ms(H.y0,H.x0),!f))}else n.moveTo(u+L,d+R),n.arc(u,d,i,l,c,!f);if(!(r>jo)||!O)n.lineTo(u+B,d+k);else if(A>jo){var ye=Ml(m,A),Te=Ml(v,A),Ee=SS(B,k,E,I,r,-Te,f),H=SS(L,R,P,D,r,-ye,f);n.lineTo(u+Ee.cx+Ee.x0,d+Ee.cy+Ee.y0),A<C&&ye===Te?n.arc(u+Ee.cx,d+Ee.cy,A,ms(Ee.y0,Ee.x0),ms(H.y0,H.x0),!f):(Te>0&&n.arc(u+Ee.cx,d+Ee.cy,Te,ms(Ee.y0,Ee.x0),ms(Ee.y1,Ee.x1),!f),n.arc(u,d,r,ms(Ee.cy+Ee.y1,Ee.cx+Ee.x1),ms(H.cy+H.y1,H.cx+H.x1),f),ye>0&&n.arc(u+H.cx,d+H.cy,ye,ms(H.y1,H.x1),ms(H.y0,H.x0),!f))}else n.lineTo(u+B,d+k),n.arc(u,d,r,c,l,f)}n.closePath()}}}var Ske=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return n}(),cX=function(n){Mn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Ske},e.prototype.buildPath=function(t,i){bke(t,i)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(Ki);cX.prototype.type="sector";const kM=cX;var wke=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return n}(),uX=function(n){Mn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new wke},e.prototype.buildPath=function(t,i){var r=i.cx,s=i.cy,a=Math.PI*2;t.moveTo(r+i.r,s),t.arc(r,s,i.r,0,a,!1),t.moveTo(r+i.r0,s),t.arc(r,s,i.r0,0,a,!0)},e}(Ki);uX.prototype.type="ring";const dX=uX;function xke(n,e,t,i){var r=[],s=[],a=[],o=[],l,c,u,d;if(i){u=[1/0,1/0],d=[-1/0,-1/0];for(var f=0,h=n.length;f<h;f++)Bm(u,u,n[f]),Fm(d,d,n[f]);Bm(u,u,i[0]),Fm(d,d,i[1])}for(var f=0,h=n.length;f<h;f++){var p=n[f];if(t)l=n[f?f-1:h-1],c=n[(f+1)%h];else if(f===0||f===h-1){r.push(GPe(n[f]));continue}else l=n[f-1],c=n[f+1];WPe(s,c,l),GT(s,s,e);var m=dR(p,l),v=dR(p,c),g=m+v;g!==0&&(m/=g,v/=g),GT(a,s,-m),GT(o,s,v);var _=z4([],p,a),y=z4([],p,o);i&&(Fm(_,_,u),Bm(_,_,d),Fm(y,y,u),Bm(y,y,d)),r.push(_),r.push(y)}return t&&r.push(r.shift()),r}function fX(n,e,t){var i=e.smooth,r=e.points;if(r&&r.length>=2){if(i){var s=xke(r,i,t,e.smoothConstraint);n.moveTo(r[0][0],r[0][1]);for(var a=r.length,o=0;o<(t?a:a-1);o++){var l=s[o*2],c=s[o*2+1],u=r[(o+1)%a];n.bezierCurveTo(l[0],l[1],c[0],c[1],u[0],u[1])}}else{n.moveTo(r[0][0],r[0][1]);for(var o=1,d=r.length;o<d;o++)n.lineTo(r[o][0],r[o][1])}t&&n.closePath()}}var Cke=function(){function n(){this.points=null,this.smooth=0,this.smoothConstraint=null}return n}(),hX=function(n){Mn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new Cke},e.prototype.buildPath=function(t,i){fX(t,i,!0)},e}(Ki);hX.prototype.type="polygon";const pX=hX;var Mke=function(){function n(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return n}(),mX=function(n){Mn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Mke},e.prototype.buildPath=function(t,i){fX(t,i,!1)},e}(Ki);mX.prototype.type="polyline";const OM=mX;var Tke={},Ake=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}(),vX=function(n){Mn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Ake},e.prototype.buildPath=function(t,i){var r,s,a,o;if(this.subPixelOptimize){var l=Hq(Tke,i,this.style);r=l.x1,s=l.y1,a=l.x2,o=l.y2}else r=i.x1,s=i.y1,a=i.x2,o=i.y2;var c=i.percent;c!==0&&(t.moveTo(r,s),c<1&&(a=r*(1-c)+a*c,o=s*(1-c)+o*c),t.lineTo(a,o))},e.prototype.pointAt=function(t){var i=this.shape;return[i.x1*(1-t)+i.x2*t,i.y1*(1-t)+i.y2*t]},e}(Ki);vX.prototype.type="line";const xb=vX;var aa=[],Eke=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return n}();function Xz(n,e,t){var i=n.cpx2,r=n.cpy2;return i!=null||r!=null?[(t?j4:is)(n.x1,n.cpx1,n.cpx2,n.x2,e),(t?j4:is)(n.y1,n.cpy1,n.cpy2,n.y2,e)]:[(t?Q4:Cs)(n.x1,n.cpx1,n.x2,e),(t?Q4:Cs)(n.y1,n.cpy1,n.y2,e)]}var gX=function(n){Mn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Eke},e.prototype.buildPath=function(t,i){var r=i.x1,s=i.y1,a=i.x2,o=i.y2,l=i.cpx1,c=i.cpy1,u=i.cpx2,d=i.cpy2,f=i.percent;f!==0&&(t.moveTo(r,s),u==null||d==null?(f<1&&(Bx(r,l,a,f,aa),l=aa[1],a=aa[2],Bx(s,c,o,f,aa),c=aa[1],o=aa[2]),t.quadraticCurveTo(l,c,a,o)):(f<1&&(Nx(r,l,u,a,f,aa),l=aa[1],u=aa[2],a=aa[3],Nx(s,c,d,o,f,aa),c=aa[1],d=aa[2],o=aa[3]),t.bezierCurveTo(l,c,u,d,a,o)))},e.prototype.pointAt=function(t){return Xz(this.shape,t,!1)},e.prototype.tangentAt=function(t){var i=Xz(this.shape,t,!0);return XPe(i,i)},e}(Ki);gX.prototype.type="bezier-curve";const yX=gX;var Ike=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),_X=function(n){Mn(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Ike},e.prototype.buildPath=function(t,i){var r=i.cx,s=i.cy,a=Math.max(i.r,0),o=i.startAngle,l=i.endAngle,c=i.clockwise,u=Math.cos(o),d=Math.sin(o);t.moveTo(u*a+r,d*a+s),t.arc(r,s,a,o,l,!c)},e}(Ki);_X.prototype.type="arc";const dk=_X;var Rke=function(n){Mn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="compound",t}return e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,i=this.shapeChanged(),r=0;r<t.length;r++)i=i||t[r].shapeChanged();i&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],i=this.getGlobalScale(),r=0;r<t.length;r++)t[r].path||t[r].createPathProxy(),t[r].path.setScale(i[0],i[1],t[r].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,i){for(var r=i.paths||[],s=0;s<r.length;s++)r[s].buildPath(t,r[s].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],i=0;i<t.length;i++)t[i].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Ki.prototype.getBoundingRect.call(this)},e}(Ki);const Pke=Rke;var Dke=function(){function n(e){this.colorStops=e||[]}return n.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},n}();const bX=Dke;var Lke=function(n){Mn(e,n);function e(t,i,r,s,a,o){var l=n.call(this,a)||this;return l.x=t??0,l.y=i??0,l.x2=r??1,l.y2=s??0,l.type="linear",l.global=o||!1,l}return e}(bX);const kke=Lke;var Oke=function(n){Mn(e,n);function e(t,i,r,s,a){var o=n.call(this,s)||this;return o.x=t??.5,o.y=i??.5,o.r=r??.5,o.type="radial",o.global=a||!1,o}return e}(bX);const Nke=Oke;var Tf=[0,0],Af=[0,0],wS=new On,xS=new On,Bke=function(){function n(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var i=0;i<4;i++)this._corners[i]=new On;for(var i=0;i<2;i++)this._axes[i]=new On;e&&this.fromBoundingRect(e,t)}return n.prototype.fromBoundingRect=function(e,t){var i=this._corners,r=this._axes,s=e.x,a=e.y,o=s+e.width,l=a+e.height;if(i[0].set(s,a),i[1].set(o,a),i[2].set(o,l),i[3].set(s,l),t)for(var c=0;c<4;c++)i[c].transform(t);On.sub(r[0],i[1],i[0]),On.sub(r[1],i[3],i[0]),r[0].normalize(),r[1].normalize();for(var c=0;c<2;c++)this._origin[c]=r[c].dot(i[0])},n.prototype.intersect=function(e,t){var i=!0,r=!t;return wS.set(1/0,1/0),xS.set(0,0),!this._intersectCheckOneSide(this,e,wS,xS,r,1)&&(i=!1,r)||!this._intersectCheckOneSide(e,this,wS,xS,r,-1)&&(i=!1,r)||r||On.copy(t,i?wS:xS),i},n.prototype._intersectCheckOneSide=function(e,t,i,r,s,a){for(var o=!0,l=0;l<2;l++){var c=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,Tf),this._getProjMinMaxOnAxis(l,t._corners,Af),Tf[1]<Af[0]||Tf[0]>Af[1]){if(o=!1,s)return o;var u=Math.abs(Af[0]-Tf[1]),d=Math.abs(Tf[0]-Af[1]);Math.min(u,d)>r.len()&&(u<d?On.scale(r,c,-u*a):On.scale(r,c,d*a))}else if(i){var u=Math.abs(Af[0]-Tf[1]),d=Math.abs(Tf[0]-Af[1]);Math.min(u,d)<i.len()&&(u<d?On.scale(i,c,u*a):On.scale(i,c,-d*a))}}return o},n.prototype._getProjMinMaxOnAxis=function(e,t,i){for(var r=this._axes[e],s=this._origin,a=t[0].dot(r)+s[e],o=a,l=a,c=1;c<t.length;c++){var u=t[c].dot(r)+s[e];o=Math.min(u,o),l=Math.max(u,l)}i[0]=o,i[1]=l},n}();const $x=Bke;var Fke=[],zke=function(n){Mn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return e.prototype.traverse=function(t,i){t.call(i,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,i){i?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,i){i=i||!1;for(var r=0;r<t.length;r++)this.addDisplayable(t[r],i)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var i=this._cursor;i<this._displayables.length;i++)t&&t(this._displayables[i]);for(var i=0;i<this._temporaryDisplayables.length;i++)t&&t(this._temporaryDisplayables[i])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var i=this._displayables[t];i.parent=this,i.update(),i.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var i=this._temporaryDisplayables[t];i.parent=this,i.update(),i.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new Oi(1/0,1/0,-1/0,-1/0),i=0;i<this._displayables.length;i++){var r=this._displayables[i],s=r.getBoundingRect().clone();r.needLocalTransform()&&s.applyTransform(r.getLocalTransform(Fke)),t.union(s)}this._rect=t}return this._rect},e.prototype.contain=function(t,i){var r=this.transformCoordToLocal(t,i),s=this.getBoundingRect();if(s.contain(r[0],r[1]))for(var a=0;a<this._displayables.length;a++){var o=this._displayables[a];if(o.contain(t,i))return!0}return!1},e}(wb);const Uke=zke;var Hke=Jr();function Vke(n,e,t,i,r){var s;if(e&&e.ecModel){var a=e.ecModel.getUpdatePayload();s=a&&a.animation}var o=e&&e.isAnimationEnabled(),l=n==="update";if(o){var c=void 0,u=void 0,d=void 0;i?(c=ui(i.duration,200),u=ui(i.easing,"cubicOut"),d=0):(c=e.getShallow(l?"animationDurationUpdate":"animationDuration"),u=e.getShallow(l?"animationEasingUpdate":"animationEasing"),d=e.getShallow(l?"animationDelayUpdate":"animationDelay")),s&&(s.duration!=null&&(c=s.duration),s.easing!=null&&(u=s.easing),s.delay!=null&&(d=s.delay)),Ri(d)&&(d=d(t,r)),Ri(c)&&(c=c(t));var f={duration:c||0,delay:d,easing:u};return f}else return null}function fk(n,e,t,i,r,s,a){var o=!1,l;Ri(r)?(a=s,s=r,r=null):Ln(r)&&(s=r.cb,a=r.during,o=r.isFrom,l=r.removeOpt,r=r.dataIndex);var c=n==="leave";c||e.stopAnimation("leave");var u=Vke(n,i,r,c?l||{}:null,i&&i.getAnimationDelayParams?i.getAnimationDelayParams(e,r):null);if(u&&u.duration>0){var d=u.duration,f=u.delay,h=u.easing,p={duration:d,delay:f||0,easing:h,done:s,force:!!s||!!a,setToFinal:!c,scope:n,during:a};o?e.animateFrom(t,p):e.animateTo(t,p)}else e.stopAnimation(),!o&&e.attr(t),a&&a(1),s&&s()}function zv(n,e,t,i,r,s){fk("update",n,e,t,i,r,s)}function D1(n,e,t,i,r,s){fk("enter",n,e,t,i,r,s)}function vy(n){if(!n.__zr)return!0;for(var e=0;e<n.animators.length;e++){var t=n.animators[e];if(t.scope==="leave")return!0}return!1}function SX(n,e,t,i,r,s){vy(n)||fk("leave",n,e,t,i,r,s)}function Yz(n,e,t,i){n.removeTextContent(),n.removeTextGuideLine(),SX(n,{style:{opacity:0}},e,t,i)}function wX(n,e,t){function i(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(r){r.isGroup||Yz(r,e,t,i)}):Yz(n,e,t,i)}function $ke(n){Hke(n).oldStyle=n.style}var Gx=Math.max,Wx=Math.min,UR={};function Gke(n){return Ki.extend(n)}var Wke=hke;function Kke(n,e){return Wke(n,e)}function vl(n,e){UR[n]=e}function qke(n){if(UR.hasOwnProperty(n))return UR[n]}function hk(n,e,t,i){var r=fke(n,e);return t&&(i==="center"&&(t=CX(t,r.getBoundingRect())),MX(r,t)),r}function xX(n,e,t){var i=new wg({style:{image:n,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(r){if(t==="center"){var s={width:r.width,height:r.height};i.setStyle(CX(e,s))}}});return i}function CX(n,e){var t=e.width/e.height,i=n.height*t,r;i<=n.width?r=n.height:(i=n.width,r=i/t);var s=n.x+n.width/2,a=n.y+n.height/2;return{x:s-i/2,y:a-r/2,width:i,height:r}}var Xke=pke;function MX(n,e){if(n.applyTransform){var t=n.getBoundingRect(),i=t.calculateTransform(e);n.applyTransform(i)}}function pk(n,e){return Hq(n,n,{lineWidth:e}),n}function Yke(n){return Vq(n.shape,n.shape,n.style),n}var jke=fh;function Qke(n,e){for(var t=q3([]);n&&n!==e;)av(t,n.getLocalTransform(),t),n=n.parent;return t}function mk(n,e,t){return e&&!xa(e)&&(e=Q3.getLocalTransform(e)),t&&(e=eq([],e)),Gl([],n,e)}function Zke(n,e,t){var i=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),r=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),s=[n==="left"?-i:n==="right"?i:0,n==="top"?-r:n==="bottom"?r:0];return s=mk(s,e,t),Math.abs(s[0])>Math.abs(s[1])?s[0]>0?"right":"left":s[1]>0?"bottom":"top"}function jz(n){return!n.isGroup}function Jke(n){return n.shape!=null}function eOe(n,e,t){if(!n||!e)return;function i(a){var o={};return a.traverse(function(l){jz(l)&&l.anid&&(o[l.anid]=l)}),o}function r(a){var o={x:a.x,y:a.y,rotation:a.rotation};return Jke(a)&&(o.shape=Nt({},a.shape)),o}var s=i(n);e.traverse(function(a){if(jz(a)&&a.anid){var o=s[a.anid];if(o){var l=r(a);a.attr(r(o)),zv(a,l,t,or(a).dataIndex)}}})}function tOe(n,e){return hi(n,function(t){var i=t[0];i=Gx(i,e.x),i=Wx(i,e.x+e.width);var r=t[1];return r=Gx(r,e.y),r=Wx(r,e.y+e.height),[i,r]})}function nOe(n,e){var t=Gx(n.x,e.x),i=Wx(n.x+n.width,e.x+e.width),r=Gx(n.y,e.y),s=Wx(n.y+n.height,e.y+e.height);if(i>=t&&s>=r)return{x:t,y:r,width:i-t,height:s-r}}function vk(n,e,t){var i=Nt({rectHover:!0},e),r=i.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},n)return n.indexOf("image://")===0?(r.image=n.slice(8),nr(r,t),new wg(i)):hk(n.replace("path://",""),i,t,"center")}function iOe(n,e,t,i,r){for(var s=0,a=r[r.length-1];s<r.length;s++){var o=r[s];if(TX(n,e,t,i,o[0],o[1],a[0],a[1]))return!0;a=o}}function TX(n,e,t,i,r,s,a,o){var l=t-n,c=i-e,u=a-r,d=o-s,f=EA(u,d,l,c);if(rOe(f))return!1;var h=n-r,p=e-s,m=EA(h,p,l,c)/f;if(m<0||m>1)return!1;var v=EA(h,p,u,d)/f;return!(v<0||v>1)}function EA(n,e,t,i){return n*i-t*e}function rOe(n){return n<=1e-6&&n>=-1e-6}function gk(n){var e=n.itemTooltipOption,t=n.componentModel,i=n.itemName,r=Rn(e)?{formatter:e}:e,s=t.mainType,a=t.componentIndex,o={componentType:s,name:i,$vars:["name"]};o[s+"Index"]=a;var l=n.formatterParamsExtra;l&&tt(mr(l),function(u){Bv(o,u)||(o[u]=l[u],o.$vars.push(u))});var c=or(n.el);c.componentMainType=s,c.componentIndex=a,c.tooltipConfig={name:i,option:nr({content:i,formatterParams:o},r)}}function Qz(n,e){var t;n.isGroup&&(t=e(n)),t||n.traverse(e)}function AX(n,e){if(n)if(hn(n))for(var t=0;t<n.length;t++)Qz(n[t],e);else Qz(n,e)}vl("circle",uk);vl("ellipse",oX);vl("sector",kM);vl("ring",dX);vl("polygon",pX);vl("polyline",OM);vl("rect",ya);vl("line",xb);vl("bezierCurve",yX);vl("arc",dk);const sOe=Object.freeze(Object.defineProperty({__proto__:null,Arc:dk,BezierCurve:yX,BoundingRect:Oi,Circle:uk,CompoundPath:Pke,Ellipse:oX,Group:Ql,Image:wg,IncrementalDisplayable:Uke,Line:xb,LinearGradient:kke,OrientedBoundingRect:$x,Path:Ki,Point:On,Polygon:pX,Polyline:OM,RadialGradient:Nke,Rect:ya,Ring:dX,Sector:kM,Text:ta,applyTransform:mk,clipPointsByRect:tOe,clipRectByRect:nOe,createIcon:vk,extendPath:Kke,extendShape:Gke,getShapeClass:qke,getTransform:Qke,groupTransition:eOe,initProps:D1,isElementRemoved:vy,lineLineIntersect:TX,linePolygonIntersect:iOe,makeImage:xX,makePath:hk,mergePath:Xke,registerShape:vl,removeElement:SX,removeElementWithFadeOut:wX,resizePath:MX,setTooltipConfig:gk,subPixelOptimize:jke,subPixelOptimizeLine:pk,subPixelOptimizeRect:Yke,transformDirection:Zke,traverseElements:AX,updateProps:zv},Symbol.toStringTag,{value:"Module"}));var NM={};function aOe(n,e){for(var t=0;t<Zl.length;t++){var i=Zl[t],r=e[i],s=n.ensureState(i);s.style=s.style||{},s.style.text=r}var a=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:e.normal}),n.useStates(a,!0)}function Zz(n,e,t){var i=n.labelFetcher,r=n.labelDataIndex,s=n.labelDimIndex,a=e.normal,o;i&&(o=i.getFormattedLabel(r,"normal",null,s,a&&a.get("formatter"),t!=null?{interpolatedValue:t}:null)),o==null&&(o=Ri(n.defaultText)?n.defaultText(r,n,t):n.defaultText);for(var l={normal:o},c=0;c<Zl.length;c++){var u=Zl[c],d=e[u];l[u]=ui(i?i.getFormattedLabel(r,u,null,s,d&&d.get("formatter")):null,o)}return l}function EX(n,e,t,i){t=t||NM;for(var r=n instanceof ta,s=!1,a=0;a<Vx.length;a++){var o=e[Vx[a]];if(o&&o.getShallow("show")){s=!0;break}}var l=r?n:n.getTextContent();if(s){r||(l||(l=new ta,n.setTextContent(l)),n.stateProxy&&(l.stateProxy=n.stateProxy));var c=Zz(t,e),u=e.normal,d=!!u.getShallow("show"),f=Ud(u,i&&i.normal,t,!1,!r);f.text=c.normal,r||n.setTextConfig(Jz(u,t,!1));for(var a=0;a<Zl.length;a++){var h=Zl[a],o=e[h];if(o){var p=l.ensureState(h),m=!!ui(o.getShallow("show"),d);if(m!==d&&(p.ignore=!m),p.style=Ud(o,i&&i[h],t,!0,!r),p.style.text=c[h],!r){var v=n.ensureState(h);v.textConfig=Jz(o,t,!0)}}}l.silent=!!u.getShallow("silent"),l.style.x!=null&&(f.x=l.style.x),l.style.y!=null&&(f.y=l.style.y),l.ignore=!d,l.useStyle(f),l.dirty(),t.enableTextSetter&&(dOe(l).setLabelText=function(g){var _=Zz(t,e,g);aOe(l,_)})}else l&&(l.ignore=!0);n.dirty()}function oOe(n,e){e=e||"label";for(var t={normal:n.getModel(e)},i=0;i<Zl.length;i++){var r=Zl[i];t[r]=n.getModel([r,e])}return t}function Ud(n,e,t,i,r){var s={};return lOe(s,n,t,i,r),e&&Nt(s,e),s}function Jz(n,e,t){e=e||{};var i={},r,s=n.getShallow("rotate"),a=ui(n.getShallow("distance"),t?null:5),o=n.getShallow("offset");return r=n.getShallow("position")||(t?null:"inside"),r==="outside"&&(r=e.defaultOutsidePosition||"top"),r!=null&&(i.position=r),o!=null&&(i.offset=o),s!=null&&(s*=Math.PI/180,i.rotation=s),a!=null&&(i.distance=a),i.outsideFill=n.get("color")==="inherit"?e.inheritColor||null:"auto",i}function lOe(n,e,t,i,r){t=t||NM;var s=e.ecModel,a=s&&s.option.textStyle,o=cOe(e),l;if(o){l={};for(var c in o)if(o.hasOwnProperty(c)){var u=e.getModel(["rich",c]);iU(l[c]={},u,a,t,i,r,!1,!0)}}l&&(n.rich=l);var d=e.get("overflow");d&&(n.overflow=d);var f=e.get("minMargin");f!=null&&(n.margin=f),iU(n,e,a,t,i,r,!0,!1)}function cOe(n){for(var e;n&&n!==n.ecModel;){var t=(n.option||NM).rich;if(t){e=e||{};for(var i=mr(t),r=0;r<i.length;r++){var s=i[r];e[s]=1}}n=n.parentModel}return e}var eU=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],tU=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],nU=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function iU(n,e,t,i,r,s,a,o){t=!r&&t||NM;var l=i&&i.inheritColor,c=e.getShallow("color"),u=e.getShallow("textBorderColor"),d=ui(e.getShallow("opacity"),t.opacity);(c==="inherit"||c==="auto")&&(l?c=l:c=null),(u==="inherit"||u==="auto")&&(l?u=l:u=null),s||(c=c||t.color,u=u||t.textBorderColor),c!=null&&(n.fill=c),u!=null&&(n.stroke=u);var f=ui(e.getShallow("textBorderWidth"),t.textBorderWidth);f!=null&&(n.lineWidth=f);var h=ui(e.getShallow("textBorderType"),t.textBorderType);h!=null&&(n.lineDash=h);var p=ui(e.getShallow("textBorderDashOffset"),t.textBorderDashOffset);p!=null&&(n.lineDashOffset=p),!r&&d==null&&!o&&(d=i&&i.defaultOpacity),d!=null&&(n.opacity=d),!r&&!s&&n.fill==null&&i.inheritColor&&(n.fill=i.inheritColor);for(var m=0;m<eU.length;m++){var v=eU[m],g=ui(e.getShallow(v),t[v]);g!=null&&(n[v]=g)}for(var m=0;m<tU.length;m++){var v=tU[m],g=e.getShallow(v);g!=null&&(n[v]=g)}if(n.verticalAlign==null){var _=e.getShallow("baseline");_!=null&&(n.verticalAlign=_)}if(!a||!i.disableBox){for(var m=0;m<nU.length;m++){var v=nU[m],g=e.getShallow(v);g!=null&&(n[v]=g)}var y=e.getShallow("borderType");y!=null&&(n.borderDash=y),(n.backgroundColor==="auto"||n.backgroundColor==="inherit")&&l&&(n.backgroundColor=l),(n.borderColor==="auto"||n.borderColor==="inherit")&&l&&(n.borderColor=l)}}function uOe(n,e){var t=e&&e.getModel("textStyle");return Bl([n.fontStyle||t&&t.getShallow("fontStyle")||"",n.fontWeight||t&&t.getShallow("fontWeight")||"",(n.fontSize||t&&t.getShallow("fontSize")||12)+"px",n.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var dOe=Jr(),fOe=["textStyle","color"],IA=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],RA=new ta,hOe=function(){function n(){}return n.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(fOe):null)},n.prototype.getFont=function(){return uOe({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},i=0;i<IA.length;i++)t[IA[i]]=this.getShallow(IA[i]);return RA.useStyle(t),RA.update(),RA.getBoundingRect()},n}();const pOe=hOe;var IX=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],mOe=__(IX),vOe=function(){function n(){}return n.prototype.getLineStyle=function(e){return mOe(this,e)},n}(),RX=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],gOe=__(RX),yOe=function(){function n(){}return n.prototype.getItemStyle=function(e,t){return gOe(this,e,t)},n}(),sp=function(){function n(e,t,i){this.parentModel=t,this.ecModel=i,this.option=e}return n.prototype.init=function(e,t,i){},n.prototype.mergeOption=function(e,t){er(this.option,e,!0)},n.prototype.get=function(e,t){return e==null?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},n.prototype.getShallow=function(e,t){var i=this.option,r=i==null?i:i[e];if(r==null&&!t){var s=this.parentModel;s&&(r=s.getShallow(e))}return r},n.prototype.getModel=function(e,t){var i=e!=null,r=i?this.parsePath(e):null,s=i?this._doGet(r):this.option;return t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(r)),new n(s,t,this.ecModel)},n.prototype.isEmpty=function(){return this.option==null},n.prototype.restoreData=function(){},n.prototype.clone=function(){var e=this.constructor;return new e(vi(this.option))},n.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},n.prototype.resolveParentPath=function(e){return e},n.prototype.isAnimationEnabled=function(){if(!Qn.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(e,t){var i=this.option;if(!e)return i;for(var r=0;r<e.length&&!(e[r]&&(i=i&&typeof i=="object"?i[e[r]]:null,i==null));r++);return i==null&&t&&(i=t._doGet(this.resolveParentPath(e),t.parentModel)),i},n}();ik(sp);HLe(sp);gu(sp,vOe);gu(sp,yOe);gu(sp,KLe);gu(sp,pOe);const Ps=sp;var _Oe=Math.round(Math.random()*10);function BM(n){return[n||"",_Oe++].join("_")}function bOe(n){var e={};n.registerSubTypeDefaulter=function(t,i){var r=Fl(t);e[r.main]=i},n.determineSubType=function(t,i){var r=i.type;if(!r){var s=Fl(t).main;n.hasSubTypes(t)&&e[s]&&(r=e[s](i))}return r}}function SOe(n,e){n.topologicalTravel=function(s,a,o,l){if(!s.length)return;var c=t(a),u=c.graph,d=c.noEntryList,f={};for(tt(s,function(_){f[_]=!0});d.length;){var h=d.pop(),p=u[h],m=!!f[h];m&&(o.call(l,h,p.originalDeps.slice()),delete f[h]),tt(p.successor,m?g:v)}tt(f,function(){var _="";throw new Error(_)});function v(_){u[_].entryCount--,u[_].entryCount===0&&d.push(_)}function g(_){f[_]=!0,v(_)}};function t(s){var a={},o=[];return tt(s,function(l){var c=i(a,l),u=c.originalDeps=e(l),d=r(u,s);c.entryCount=d.length,c.entryCount===0&&o.push(l),tt(d,function(f){$i(c.predecessor,f)<0&&c.predecessor.push(f);var h=i(a,f);$i(h.successor,f)<0&&h.successor.push(l)})}),{graph:a,noEntryList:o}}function i(s,a){return s[a]||(s[a]={predecessor:[],successor:[]}),s[a]}function r(s,a){var o=[];return tt(s,function(l){$i(a,l)>=0&&o.push(l)}),o}}function wOe(n,e){return er(er({},n,!0),e,!0)}const xOe={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},COe={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var Kx="ZH",yk="EN",b_=yk,L1={},_k={},PX=Qn.domSupported?function(){var n=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return n.indexOf(Kx)>-1?Kx:b_}():b_;function DX(n,e){n=n.toUpperCase(),_k[n]=new Ps(e),L1[n]=e}function MOe(n){if(Rn(n)){var e=L1[n.toUpperCase()]||{};return n===Kx||n===yk?vi(e):er(vi(e),vi(L1[b_]),!1)}else return er(vi(n),vi(L1[b_]),!1)}function TOe(n){return _k[n]}function AOe(){return _k[b_]}DX(yk,xOe);DX(Kx,COe);function Tu(n,e){return n+="","0000".substr(0,e-n.length)+n}function LX(n,e,t,i){var r=IM(n),s=r[EOe(t)](),a=r[IOe(t)]()+1,o=Math.floor((a-1)/3)+1,l=r[ROe(t)](),c=r["get"+(t?"UTC":"")+"Day"](),u=r[POe(t)](),d=(u-1)%12+1,f=r[DOe(t)](),h=r[LOe(t)](),p=r[kOe(t)](),m=i instanceof Ps?i:TOe(i||PX)||AOe(),v=m.getModel("time"),g=v.get("month"),_=v.get("monthAbbr"),y=v.get("dayOfWeek"),S=v.get("dayOfWeekAbbr");return(e||"").replace(/{yyyy}/g,s+"").replace(/{yy}/g,Tu(s%100+"",2)).replace(/{Q}/g,o+"").replace(/{MMMM}/g,g[a-1]).replace(/{MMM}/g,_[a-1]).replace(/{MM}/g,Tu(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,Tu(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,y[c]).replace(/{ee}/g,S[c]).replace(/{e}/g,c+"").replace(/{HH}/g,Tu(u,2)).replace(/{H}/g,u+"").replace(/{hh}/g,Tu(d+"",2)).replace(/{h}/g,d+"").replace(/{mm}/g,Tu(f,2)).replace(/{m}/g,f+"").replace(/{ss}/g,Tu(h,2)).replace(/{s}/g,h+"").replace(/{SSS}/g,Tu(p,3)).replace(/{S}/g,p+"")}function EOe(n){return n?"getUTCFullYear":"getFullYear"}function IOe(n){return n?"getUTCMonth":"getMonth"}function ROe(n){return n?"getUTCDate":"getDate"}function POe(n){return n?"getUTCHours":"getHours"}function DOe(n){return n?"getUTCMinutes":"getMinutes"}function LOe(n){return n?"getUTCSeconds":"getSeconds"}function kOe(n){return n?"getUTCMilliseconds":"getMilliseconds"}function OOe(n){if(!SLe(n))return Rn(n)?n:"-";var e=(n+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function kX(n,e){return n=(n||"").toLowerCase().replace(/-(.)/g,function(t,i){return i.toUpperCase()}),e&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var FM=XK;function HR(n,e,t){var i="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function r(u){return u&&Bl(u)?u:"-"}function s(u){return!!(u!=null&&!isNaN(u)&&isFinite(u))}var a=e==="time",o=n instanceof Date;if(a||o){var l=a?IM(n):n;if(isNaN(+l)){if(o)return"-"}else return LX(l,i,t)}if(e==="ordinal")return cR(n)?r(n):vr(n)&&s(n)?n+"":"-";var c=Hx(n);return s(c)?OOe(c):cR(n)?r(n):typeof n=="boolean"?n+"":"-"}var rU=["a","b","c","d","e","f","g"],PA=function(n,e){return"{"+n+(e??"")+"}"};function OX(n,e,t){hn(e)||(e=[e]);var i=e.length;if(!i)return"";for(var r=e[0].$vars||[],s=0;s<r.length;s++){var a=rU[s];n=n.replace(PA(a),PA(a,0))}for(var o=0;o<i;o++)for(var l=0;l<r.length;l++){var c=e[o][r[l]];n=n.replace(PA(rU[l],o),t?ho(c):c)}return n}function NOe(n,e){var t=Rn(n)?{color:n,extraCssText:e}:n||{},i=t.color,r=t.type;e=t.extraCssText;var s=t.renderMode||"html";if(!i)return"";if(s==="html")return r==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+ho(i)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+ho(i)+";"+(e||"")+'"></span>';var a=t.markerId||"markerX";return{renderMode:s,content:"{"+a+"|}  ",style:r==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:i}:{width:10,height:10,borderRadius:5,backgroundColor:i}}}function S_(n,e){return e=e||"transparent",Rn(n)?n:Ln(n)&&n.colorStops&&(n.colorStops[0]||{}).color||e}function sU(n,e){if(e==="_blank"||e==="blank"){var t=window.open();t.opener=null,t.location.href=n}else window.open(n,e)}var k1=tt,BOe=["left","right","top","bottom","width","height"],CS=[["width","left","right"],["height","top","bottom"]];function bk(n,e,t,i,r){var s=0,a=0;i==null&&(i=1/0),r==null&&(r=1/0);var o=0;e.eachChild(function(l,c){var u=l.getBoundingRect(),d=e.childAt(c+1),f=d&&d.getBoundingRect(),h,p;if(n==="horizontal"){var m=u.width+(f?-f.x+u.x:0);h=s+m,h>i||l.newline?(s=0,h=m,a+=o+t,o=u.height):o=Math.max(o,u.height)}else{var v=u.height+(f?-f.y+u.y:0);p=a+v,p>r||l.newline?(s+=o+t,a=0,p=v,o=u.width):o=Math.max(o,u.width)}l.newline||(l.x=s,l.y=a,l.markRedraw(),n==="horizontal"?s=h+t:a=p+t)})}var gy=bk;Or(bk,"vertical");Or(bk,"horizontal");function w_(n,e,t){t=FM(t||0);var i=e.width,r=e.height,s=Dr(n.left,i),a=Dr(n.top,r),o=Dr(n.right,i),l=Dr(n.bottom,r),c=Dr(n.width,i),u=Dr(n.height,r),d=t[2]+t[0],f=t[1]+t[3],h=n.aspect;switch(isNaN(c)&&(c=i-o-f-s),isNaN(u)&&(u=r-l-d-a),h!=null&&(isNaN(c)&&isNaN(u)&&(h>i/r?c=i*.8:u=r*.8),isNaN(c)&&(c=h*u),isNaN(u)&&(u=c/h)),isNaN(s)&&(s=i-o-c-f),isNaN(a)&&(a=r-l-u-d),n.left||n.right){case"center":s=i/2-c/2-t[3];break;case"right":s=i-c-f;break}switch(n.top||n.bottom){case"middle":case"center":a=r/2-u/2-t[0];break;case"bottom":a=r-u-d;break}s=s||0,a=a||0,isNaN(c)&&(c=i-f-s-(o||0)),isNaN(u)&&(u=r-d-a-(l||0));var p=new Oi(s+t[3],a+t[0],c,u);return p.margin=t,p}function qx(n){var e=n.layoutMode||n.constructor.layoutMode;return Ln(e)?e:e?{type:e}:null}function x_(n,e,t){var i=t&&t.ignoreSize;!hn(i)&&(i=[i,i]);var r=a(CS[0],0),s=a(CS[1],1);c(CS[0],n,r),c(CS[1],n,s);function a(u,d){var f={},h=0,p={},m=0,v=2;if(k1(u,function(y){p[y]=n[y]}),k1(u,function(y){o(e,y)&&(f[y]=p[y]=e[y]),l(f,y)&&h++,l(p,y)&&m++}),i[d])return l(e,u[1])?p[u[2]]=null:l(e,u[2])&&(p[u[1]]=null),p;if(m===v||!h)return p;if(h>=v)return f;for(var g=0;g<u.length;g++){var _=u[g];if(!o(f,_)&&o(n,_)){f[_]=n[_];break}}return f}function o(u,d){return u.hasOwnProperty(d)}function l(u,d){return u[d]!=null&&u[d]!=="auto"}function c(u,d,f){k1(u,function(h){d[h]=f[h]})}}function Sk(n){return FOe({},n)}function FOe(n,e){return e&&n&&k1(BOe,function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}var zOe=Jr(),xg=function(n){Mn(e,n);function e(t,i,r){var s=n.call(this,t,i,r)||this;return s.uid=BM("ec_cpt_model"),s}return e.prototype.init=function(t,i,r){this.mergeDefaultAndTheme(t,r)},e.prototype.mergeDefaultAndTheme=function(t,i){var r=qx(this),s=r?Sk(t):{},a=i.getTheme();er(t,a.get(this.mainType)),er(t,this.getDefaultOption()),r&&x_(t,s,r)},e.prototype.mergeOption=function(t,i){er(this.option,t,!0);var r=qx(this);r&&x_(this.option,t,r)},e.prototype.optionUpdated=function(t,i){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!FLe(t))return t.defaultOption;var i=zOe(this);if(!i.defaultOption){for(var r=[],s=t;s;){var a=s.prototype.defaultOption;a&&r.push(a),s=s.superClass}for(var o={},l=r.length-1;l>=0;l--)o=er(o,r[l],!0);i.defaultOption=o}return i.defaultOption},e.prototype.getReferringComponents=function(t,i){var r=t+"Index",s=t+"Id";return Sb(this.ecModel,t,{index:this.get(r,!0),id:this.get(s,!0)},i)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0}(),e}(Ps);Dq(xg,Ps);rk(xg);bOe(xg);SOe(xg,UOe);function UOe(n){var e=[];return tt(xg.getClassesByMainType(n),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=hi(e,function(t){return Fl(t).main}),n!=="dataset"&&$i(e,"dataset")<=0&&e.unshift("dataset"),e}const ar=xg;var NX="";typeof navigator<"u"&&(NX=navigator.platform||"");var Ip="rgba(0, 0, 0, 0.2)";const HOe={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Ip,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Ip,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Ip,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Ip,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Ip,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Ip,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:NX.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var BX=di(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),oc="original",Ca="arrayRows",gl="objectRows",lc="keyedColumns",_d="typedArray",FX="unknown",Kc="column",Cg="row",ts={Must:1,Might:2,Not:3},VOe=Jr();function $Oe(n){VOe(n).datasetMap=di()}function GOe(n,e,t){var i={},r=zX(n);if(!r)return i;var s=e.sourceFormat,a=e.dimensionsDefine,o;(s===gl||s===lc)&&tt(a,function(u,d){(Ln(u)?u.name:u)==="name"&&(o=d)});var l=function(){for(var u={},d={},f=[],h=0,p=Math.min(5,t);h<p;h++){var m=HX(e.data,s,e.seriesLayoutBy,a,e.startIndex,h);f.push(m);var v=m===ts.Not;if(v&&u.v==null&&h!==o&&(u.v=h),(u.n==null||u.n===u.v||!v&&f[u.n]===ts.Not)&&(u.n=h),g(u)&&f[u.n]!==ts.Not)return u;v||(m===ts.Might&&d.v==null&&h!==o&&(d.v=h),(d.n==null||d.n===d.v)&&(d.n=h))}function g(_){return _.v!=null&&_.n!=null}return g(u)?u:g(d)?d:null}();if(l){i.value=[l.v];var c=o??l.n;i.itemName=[c],i.seriesName=[c]}return i}function zX(n){var e=n.get("data",!0);if(!e)return Sb(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},nk).models[0]}function WOe(n){return!n.get("transform",!0)&&!n.get("fromTransformResult",!0)?[]:Sb(n.ecModel,"dataset",{index:n.get("fromDatasetIndex",!0),id:n.get("fromDatasetId",!0)},nk).models}function UX(n,e){return HX(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,e)}function HX(n,e,t,i,r,s){var a,o=5;if(Ka(n))return ts.Not;var l,c;if(i){var u=i[s];Ln(u)?(l=u.name,c=u.type):Rn(u)&&(l=u)}if(c!=null)return c==="ordinal"?ts.Must:ts.Not;if(e===Ca){var d=n;if(t===Cg){for(var f=d[s],h=0;h<(f||[]).length&&h<o;h++)if((a=S(f[r+h]))!=null)return a}else for(var h=0;h<d.length&&h<o;h++){var p=d[r+h];if(p&&(a=S(p[s]))!=null)return a}}else if(e===gl){var m=n;if(!l)return ts.Not;for(var h=0;h<m.length&&h<o;h++){var v=m[h];if(v&&(a=S(v[l]))!=null)return a}}else if(e===lc){var g=n;if(!l)return ts.Not;var f=g[l];if(!f||Ka(f))return ts.Not;for(var h=0;h<f.length&&h<o;h++)if((a=S(f[h]))!=null)return a}else if(e===oc)for(var _=n,h=0;h<_.length&&h<o;h++){var v=_[h],y=RM(v);if(!hn(y))return ts.Not;if((a=S(y[s]))!=null)return a}function S(w){var x=Rn(w);if(w!=null&&isFinite(w)&&w!=="")return x?ts.Might:ts.Not;if(x&&w!=="-")return ts.Must}return ts.Not}var KOe=di();function qOe(n,e,t){var i=KOe.get(e);if(!i)return t;var r=i(n);return r?t.concat(r):t}var aU=Jr();Jr();var wk=function(){function n(){}return n.prototype.getColorFromPalette=function(e,t,i){var r=Qs(this.get("color",!0)),s=this.get("colorLayer",!0);return YOe(this,aU,r,s,e,t,i)},n.prototype.clearColorPalette=function(){jOe(this,aU)},n}();function XOe(n,e){for(var t=n.length,i=0;i<t;i++)if(n[i].length>e)return n[i];return n[t-1]}function YOe(n,e,t,i,r,s,a){s=s||n;var o=e(s),l=o.paletteIdx||0,c=o.paletteNameMap=o.paletteNameMap||{};if(c.hasOwnProperty(r))return c[r];var u=a==null||!i?t:XOe(i,a);if(u=u||t,!(!u||!u.length)){var d=u[l];return r&&(c[r]=d),o.paletteIdx=(l+1)%u.length,d}}function jOe(n,e){e(n).paletteIdx=0,e(n).paletteNameMap={}}var MS,o0,oU,lU="\0_ec_inner",QOe=1,VX=function(n){Mn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t,i,r,s,a,o){s=s||{},this.option=null,this._theme=new Ps(s),this._locale=new Ps(a),this._optionManager=o},e.prototype.setOption=function(t,i,r){var s=dU(i);this._optionManager.setOption(t,r,s),this._resetOption(null,s)},e.prototype.resetOption=function(t,i){return this._resetOption(t,dU(i))},e.prototype._resetOption=function(t,i){var r=!1,s=this._optionManager;if(!t||t==="recreate"){var a=s.mountOption(t==="recreate");!this.option||t==="recreate"?oU(this,a):(this.restoreData(),this._mergeOption(a,i)),r=!0}if((t==="timeline"||t==="media")&&this.restoreData(),!t||t==="recreate"||t==="timeline"){var o=s.getTimelineOption(this);o&&(r=!0,this._mergeOption(o,i))}if(!t||t==="recreate"||t==="media"){var l=s.getMediaOption(this);l.length&&tt(l,function(c){r=!0,this._mergeOption(c,i)},this)}return r},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,i){var r=this.option,s=this._componentsMap,a=this._componentsCount,o=[],l=di(),c=i&&i.replaceMergeMainTypeMap;$Oe(this),tt(t,function(d,f){d!=null&&(ar.hasClass(f)?f&&(o.push(f),l.set(f,!0)):r[f]=r[f]==null?vi(d):er(r[f],d,!0))}),c&&c.each(function(d,f){ar.hasClass(f)&&!l.get(f)&&(o.push(f),l.set(f,!0))}),ar.topologicalTravel(o,ar.getAllClassMainTypes(),u,this);function u(d){var f=qOe(this,d,Qs(t[d])),h=s.get(d),p=h?c&&c.get(d)?"replaceMerge":"normalMerge":"replaceAll",m=CLe(h,f,p);PLe(m,d,ar),r[d]=null,s.set(d,null),a.set(d,0);var v=[],g=[],_=0,y;tt(m,function(S,w){var x=S.existing,T=S.newOption;if(!T)x&&(x.mergeOption({},this),x.optionUpdated({},!1));else{var C=d==="series",M=ar.getClass(d,S.keyInfo.subType,!C);if(!M)return;if(d==="tooltip"){if(y)return;y=!0}if(x&&x.constructor===M)x.name=S.keyInfo.name,x.mergeOption(T,this),x.optionUpdated(T,!1);else{var A=Nt({componentIndex:w},S.keyInfo);x=new M(T,this,this,A),Nt(x,A),S.brandNew&&(x.__requireNewView=!0),x.init(T,this,this),x.optionUpdated(null,!0)}}x?(v.push(x.option),g.push(x),_++):(v.push(void 0),g.push(void 0))},this),r[d]=v,s.set(d,g),a.set(d,_),d==="series"&&MS(this)}this._seriesIndices||MS(this)},e.prototype.getOption=function(){var t=vi(this.option);return tt(t,function(i,r){if(ar.hasClass(r)){for(var s=Qs(i),a=s.length,o=!1,l=a-1;l>=0;l--)s[l]&&!y_(s[l])?o=!0:(s[l]=null,!o&&a--);s.length=a,t[r]=s}}),delete t[lU],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,i){var r=this._componentsMap.get(t);if(r){var s=r[i||0];if(s)return s;if(i==null){for(var a=0;a<r.length;a++)if(r[a])return r[a]}}},e.prototype.queryComponents=function(t){var i=t.mainType;if(!i)return[];var r=t.index,s=t.id,a=t.name,o=this._componentsMap.get(i);if(!o||!o.length)return[];var l;return r!=null?(l=[],tt(Qs(r),function(c){o[c]&&l.push(o[c])})):s!=null?l=cU("id",s,o):a!=null?l=cU("name",a,o):l=fo(o,function(c){return!!c}),uU(l,t)},e.prototype.findComponents=function(t){var i=t.query,r=t.mainType,s=o(i),a=s?this.queryComponents(s):fo(this._componentsMap.get(r),function(c){return!!c});return l(uU(a,t));function o(c){var u=r+"Index",d=r+"Id",f=r+"Name";return c&&(c[u]!=null||c[d]!=null||c[f]!=null)?{mainType:r,index:c[u],id:c[d],name:c[f]}:null}function l(c){return t.filter?fo(c,t.filter):c}},e.prototype.eachComponent=function(t,i,r){var s=this._componentsMap;if(Ri(t)){var a=i,o=t;s.each(function(d,f){for(var h=0;d&&h<d.length;h++){var p=d[h];p&&o.call(a,f,p,p.componentIndex)}})}else for(var l=Rn(t)?s.get(t):Ln(t)?this.findComponents(t):null,c=0;l&&c<l.length;c++){var u=l[c];u&&i.call(r,u,u.componentIndex)}},e.prototype.getSeriesByName=function(t){var i=Wl(t,null);return fo(this._componentsMap.get("series"),function(r){return!!r&&i!=null&&r.name===i})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return fo(this._componentsMap.get("series"),function(i){return!!i&&i.subType===t})},e.prototype.getSeries=function(){return fo(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,i){o0(this),tt(this._seriesIndices,function(r){var s=this._componentsMap.get("series")[r];t.call(i,s,r)},this)},e.prototype.eachRawSeries=function(t,i){tt(this._componentsMap.get("series"),function(r){r&&t.call(i,r,r.componentIndex)})},e.prototype.eachSeriesByType=function(t,i,r){o0(this),tt(this._seriesIndices,function(s){var a=this._componentsMap.get("series")[s];a.subType===t&&i.call(r,a,s)},this)},e.prototype.eachRawSeriesByType=function(t,i,r){return tt(this.getSeriesByType(t),i,r)},e.prototype.isSeriesFiltered=function(t){return o0(this),this._seriesIndicesMap.get(t.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,i){o0(this);var r=[];tt(this._seriesIndices,function(s){var a=this._componentsMap.get("series")[s];t.call(i,a,s)&&r.push(s)},this),this._seriesIndices=r,this._seriesIndicesMap=di(r)},e.prototype.restoreData=function(t){MS(this);var i=this._componentsMap,r=[];i.each(function(s,a){ar.hasClass(a)&&r.push(a)}),ar.topologicalTravel(r,ar.getAllClassMainTypes(),function(s){tt(i.get(s),function(a){a&&(s!=="series"||!ZOe(a,t))&&a.restoreData()})})},e.internalField=function(){MS=function(t){var i=t._seriesIndices=[];tt(t._componentsMap.get("series"),function(r){r&&i.push(r.componentIndex)}),t._seriesIndicesMap=di(i)},o0=function(t){},oU=function(t,i){t.option={},t.option[lU]=QOe,t._componentsMap=di({series:[]}),t._componentsCount=di();var r=i.aria;Ln(r)&&r.enabled==null&&(r.enabled=!0),JOe(i,t._theme.option),er(i,HOe,!1),t._mergeOption(i,null)}}(),e}(Ps);function ZOe(n,e){if(e){var t=e.seriesIndex,i=e.seriesId,r=e.seriesName;return t!=null&&n.componentIndex!==t||i!=null&&n.id!==i||r!=null&&n.name!==r}}function JOe(n,e){var t=n.color&&!n.colorLayer;tt(e,function(i,r){r==="colorLayer"&&t||ar.hasClass(r)||(typeof i=="object"?n[r]=n[r]?er(n[r],i,!1):vi(i):n[r]==null&&(n[r]=i))})}function cU(n,e,t){if(hn(e)){var i=di();return tt(e,function(s){if(s!=null){var a=Wl(s,null);a!=null&&i.set(s,!0)}}),fo(t,function(s){return s&&i.get(s[n])})}else{var r=Wl(e,null);return fo(t,function(s){return s&&r!=null&&s[n]===r})}}function uU(n,e){return e.hasOwnProperty("subType")?fo(n,function(t){return t&&t.subType===e.subType}):n}function dU(n){var e=di();return n&&tt(Qs(n.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}gu(VX,wk);const $X=VX;var eNe=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],tNe=function(){function n(e){tt(eNe,function(t){this[t]=Gi(e[t],e)},this)}return n}();const GX=tNe;var DA={},nNe=function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(e,t){var i=[];tt(DA,function(r,s){var a=r.create(e,t);i=i.concat(a||[])}),this._coordinateSystems=i},n.prototype.update=function(e,t){tt(this._coordinateSystems,function(i){i.update&&i.update(e,t)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(e,t){DA[e]=t},n.get=function(e){return DA[e]},n}();const WX=nNe;var iNe=/^(min|max)?(.+)$/,rNe=function(){function n(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return n.prototype.setOption=function(e,t,i){e&&(tt(Qs(e.series),function(a){a&&a.data&&Ka(a.data)&&uR(a.data)}),tt(Qs(e.dataset),function(a){a&&a.source&&Ka(a.source)&&uR(a.source)})),e=vi(e);var r=this._optionBackup,s=sNe(e,t,!r);this._newBaseOption=s.baseOption,r?(s.timelineOptions.length&&(r.timelineOptions=s.timelineOptions),s.mediaList.length&&(r.mediaList=s.mediaList),s.mediaDefault&&(r.mediaDefault=s.mediaDefault)):this._optionBackup=s},n.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],vi(e?t.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(e){var t,i=this._timelineOptions;if(i.length){var r=e.getComponent("timeline");r&&(t=vi(i[r.getCurrentIndex()]))}return t},n.prototype.getMediaOption=function(e){var t=this._api.getWidth(),i=this._api.getHeight(),r=this._mediaList,s=this._mediaDefault,a=[],o=[];if(!r.length&&!s)return o;for(var l=0,c=r.length;l<c;l++)aNe(r[l].query,t,i)&&a.push(l);return!a.length&&s&&(a=[-1]),a.length&&!lNe(a,this._currentMediaIndices)&&(o=hi(a,function(u){return vi(u===-1?s.option:r[u].option)})),this._currentMediaIndices=a,o},n}();function sNe(n,e,t){var i=[],r,s,a=n.baseOption,o=n.timeline,l=n.options,c=n.media,u=!!n.media,d=!!(l||o||a&&a.timeline);a?(s=a,s.timeline||(s.timeline=o)):((d||u)&&(n.options=n.media=null),s=n),u&&hn(c)&&tt(c,function(h){h&&h.option&&(h.query?i.push(h):r||(r=h))}),f(s),tt(l,function(h){return f(h)}),tt(i,function(h){return f(h.option)});function f(h){tt(e,function(p){p(h,t)})}return{baseOption:s,timelineOptions:l||[],mediaDefault:r,mediaList:i}}function aNe(n,e,t){var i={width:e,height:t,aspectratio:e/t},r=!0;return tt(n,function(s,a){var o=a.match(iNe);if(!(!o||!o[1]||!o[2])){var l=o[1],c=o[2].toLowerCase();oNe(i[c],s,l)||(r=!1)}}),r}function oNe(n,e,t){return t==="min"?n>=e:t==="max"?n<=e:n===e}function lNe(n,e){return n.join(",")===e.join(",")}const cNe=rNe;var Ho=tt,C_=Ln,fU=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function LA(n){var e=n&&n.itemStyle;if(e)for(var t=0,i=fU.length;t<i;t++){var r=fU[t],s=e.normal,a=e.emphasis;s&&s[r]&&(n[r]=n[r]||{},n[r].normal?er(n[r].normal,s[r]):n[r].normal=s[r],s[r]=null),a&&a[r]&&(n[r]=n[r]||{},n[r].emphasis?er(n[r].emphasis,a[r]):n[r].emphasis=a[r],a[r]=null)}}function Ms(n,e,t){if(n&&n[e]&&(n[e].normal||n[e].emphasis)){var i=n[e].normal,r=n[e].emphasis;i&&(t?(n[e].normal=n[e].emphasis=null,nr(n[e],i)):n[e]=i),r&&(n.emphasis=n.emphasis||{},n.emphasis[e]=r,r.focus&&(n.emphasis.focus=r.focus),r.blurScope&&(n.emphasis.blurScope=r.blurScope))}}function G0(n){Ms(n,"itemStyle"),Ms(n,"lineStyle"),Ms(n,"areaStyle"),Ms(n,"label"),Ms(n,"labelLine"),Ms(n,"upperLabel"),Ms(n,"edgeLabel")}function fr(n,e){var t=C_(n)&&n[e],i=C_(t)&&t.textStyle;if(i)for(var r=0,s=vz.length;r<s;r++){var a=vz[r];i.hasOwnProperty(a)&&(t[a]=i[a])}}function ao(n){n&&(G0(n),fr(n,"label"),n.emphasis&&fr(n.emphasis,"label"))}function uNe(n){if(C_(n)){LA(n),G0(n),fr(n,"label"),fr(n,"upperLabel"),fr(n,"edgeLabel"),n.emphasis&&(fr(n.emphasis,"label"),fr(n.emphasis,"upperLabel"),fr(n.emphasis,"edgeLabel"));var e=n.markPoint;e&&(LA(e),ao(e));var t=n.markLine;t&&(LA(t),ao(t));var i=n.markArea;i&&ao(i);var r=n.data;if(n.type==="graph"){r=r||n.nodes;var s=n.links||n.edges;if(s&&!Ka(s))for(var a=0;a<s.length;a++)ao(s[a]);tt(n.categories,function(c){G0(c)})}if(r&&!Ka(r))for(var a=0;a<r.length;a++)ao(r[a]);if(e=n.markPoint,e&&e.data)for(var o=e.data,a=0;a<o.length;a++)ao(o[a]);if(t=n.markLine,t&&t.data)for(var l=t.data,a=0;a<l.length;a++)hn(l[a])?(ao(l[a][0]),ao(l[a][1])):ao(l[a]);n.type==="gauge"?(fr(n,"axisLabel"),fr(n,"title"),fr(n,"detail")):n.type==="treemap"?(Ms(n.breadcrumb,"itemStyle"),tt(n.levels,function(c){G0(c)})):n.type==="tree"&&G0(n.leaves)}}function mc(n){return hn(n)?n:n?[n]:[]}function hU(n){return(hn(n)?n[0]:n)||{}}function dNe(n,e){Ho(mc(n.series),function(i){C_(i)&&uNe(i)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),Ho(t,function(i){Ho(mc(n[i]),function(r){r&&(fr(r,"axisLabel"),fr(r.axisPointer,"label"))})}),Ho(mc(n.parallel),function(i){var r=i&&i.parallelAxisDefault;fr(r,"axisLabel"),fr(r&&r.axisPointer,"label")}),Ho(mc(n.calendar),function(i){Ms(i,"itemStyle"),fr(i,"dayLabel"),fr(i,"monthLabel"),fr(i,"yearLabel")}),Ho(mc(n.radar),function(i){fr(i,"name"),i.name&&i.axisName==null&&(i.axisName=i.name,delete i.name),i.nameGap!=null&&i.axisNameGap==null&&(i.axisNameGap=i.nameGap,delete i.nameGap)}),Ho(mc(n.geo),function(i){C_(i)&&(ao(i),Ho(mc(i.regions),function(r){ao(r)}))}),Ho(mc(n.timeline),function(i){ao(i),Ms(i,"label"),Ms(i,"itemStyle"),Ms(i,"controlStyle",!0);var r=i.data;hn(r)&&tt(r,function(s){Ln(s)&&(Ms(s,"label"),Ms(s,"itemStyle"))})}),Ho(mc(n.toolbox),function(i){Ms(i,"iconStyle"),Ho(i.feature,function(r){Ms(r,"iconStyle")})}),fr(hU(n.axisPointer),"label"),fr(hU(n.tooltip).axisPointer,"label")}function fNe(n,e){for(var t=e.split(","),i=n,r=0;r<t.length&&(i=i&&i[t[r]],i!=null);r++);return i}function hNe(n,e,t,i){for(var r=e.split(","),s=n,a,o=0;o<r.length-1;o++)a=r[o],s[a]==null&&(s[a]={}),s=s[a];(i||s[r[o]]==null)&&(s[r[o]]=t)}function pU(n){n&&tt(pNe,function(e){e[0]in n&&!(e[1]in n)&&(n[e[1]]=n[e[0]])})}var pNe=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],mNe=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],kA=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function l0(n){var e=n&&n.itemStyle;if(e)for(var t=0;t<kA.length;t++){var i=kA[t][1],r=kA[t][0];e[i]!=null&&(e[r]=e[i])}}function mU(n){n&&n.alignTo==="edge"&&n.margin!=null&&n.edgeDistance==null&&(n.edgeDistance=n.margin)}function vU(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function vNe(n){n&&n.focusNodeAdjacency!=null&&(n.emphasis=n.emphasis||{},n.emphasis.focus==null&&(n.emphasis.focus="adjacency"))}function KX(n,e){if(n)for(var t=0;t<n.length;t++)e(n[t]),n[t]&&KX(n[t].children,e)}function qX(n,e){dNe(n,e),n.series=Qs(n.series),tt(n.series,function(t){if(Ln(t)){var i=t.type;if(i==="line")t.clipOverflow!=null&&(t.clip=t.clipOverflow);else if(i==="pie"||i==="gauge"){t.clockWise!=null&&(t.clockwise=t.clockWise),mU(t.label);var r=t.data;if(r&&!Ka(r))for(var s=0;s<r.length;s++)mU(r[s]);t.hoverOffset!=null&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if(i==="gauge"){var a=fNe(t,"pointer.color");a!=null&&hNe(t,"itemStyle.color",a)}else if(i==="bar"){l0(t),l0(t.backgroundStyle),l0(t.emphasis);var r=t.data;if(r&&!Ka(r))for(var s=0;s<r.length;s++)typeof r[s]=="object"&&(l0(r[s]),l0(r[s]&&r[s].emphasis))}else if(i==="sunburst"){var o=t.highlightPolicy;o&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=o)),vU(t),KX(t.data,vU)}else i==="graph"||i==="sankey"?vNe(t):i==="map"&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&nr(t,t.mapLocation));t.hoverAnimation!=null&&(t.emphasis=t.emphasis||{},t.emphasis&&t.emphasis.scale==null&&(t.emphasis.scale=t.hoverAnimation)),pU(t)}}),n.dataRange&&(n.visualMap=n.dataRange),tt(mNe,function(t){var i=n[t];i&&(hn(i)||(i=[i]),tt(i,function(r){pU(r)}))})}function gNe(n){var e=di();n.eachSeries(function(t){var i=t.get("stack");if(i){var r=e.get(i)||e.set(i,[]),s=t.getData(),a={stackResultDimension:s.getCalculationInfo("stackResultDimension"),stackedOverDimension:s.getCalculationInfo("stackedOverDimension"),stackedDimension:s.getCalculationInfo("stackedDimension"),stackedByDimension:s.getCalculationInfo("stackedByDimension"),isStackedByIndex:s.getCalculationInfo("isStackedByIndex"),data:s,seriesModel:t};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;r.length&&s.setCalculationInfo("stackedOnSeries",r[r.length-1].seriesModel),r.push(a)}}),e.each(yNe)}function yNe(n){tt(n,function(e,t){var i=[],r=[NaN,NaN],s=[e.stackResultDimension,e.stackedOverDimension],a=e.data,o=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";a.modify(s,function(c,u,d){var f=a.get(e.stackedDimension,d);if(isNaN(f))return r;var h,p;o?p=a.getRawIndex(d):h=a.get(e.stackedByDimension,d);for(var m=NaN,v=t-1;v>=0;v--){var g=n[v];if(o||(p=g.data.rawIndexOf(g.stackedByDimension,h)),p>=0){var _=g.data.getByRawIndex(g.stackResultDimension,p);if(l==="all"||l==="positive"&&_>0||l==="negative"&&_<0||l==="samesign"&&f>=0&&_>0||l==="samesign"&&f<=0&&_<0){f=_Le(f,_),m=_;break}}}return i[0]=f,i[1]=m,i})})}var zM=function(){function n(e){this.data=e.data||(e.sourceFormat===lc?{}:[]),this.sourceFormat=e.sourceFormat||FX,this.seriesLayoutBy=e.seriesLayoutBy||Kc,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var i=0;i<t.length;i++){var r=t[i];r.type==null&&UX(this,i)===ts.Must&&(r.type="ordinal")}}return n}();function xk(n){return n instanceof zM}function VR(n,e,t){t=t||YX(n);var i=e.seriesLayoutBy,r=bNe(n,t,i,e.sourceHeader,e.dimensions),s=new zM({data:n,sourceFormat:t,seriesLayoutBy:i,dimensionsDefine:r.dimensionsDefine,startIndex:r.startIndex,dimensionsDetectedCount:r.dimensionsDetectedCount,metaRawOption:vi(e)});return s}function XX(n){return new zM({data:n,sourceFormat:Ka(n)?_d:oc})}function _Ne(n){return new zM({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:vi(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}function YX(n){var e=FX;if(Ka(n))e=_d;else if(hn(n)){n.length===0&&(e=Ca);for(var t=0,i=n.length;t<i;t++){var r=n[t];if(r!=null){if(hn(r)){e=Ca;break}else if(Ln(r)){e=gl;break}}}}else if(Ln(n)){for(var s in n)if(Bv(n,s)&&xa(n[s])){e=lc;break}}return e}function bNe(n,e,t,i,r){var s,a;if(!n)return{dimensionsDefine:gU(r),startIndex:a,dimensionsDetectedCount:s};if(e===Ca){var o=n;i==="auto"||i==null?yU(function(c){c!=null&&c!=="-"&&(Rn(c)?a==null&&(a=1):a=0)},t,o,10):a=vr(i)?i:i?1:0,!r&&a===1&&(r=[],yU(function(c,u){r[u]=c!=null?c+"":""},t,o,1/0)),s=r?r.length:t===Cg?o.length:o[0]?o[0].length:null}else if(e===gl)r||(r=SNe(n));else if(e===lc)r||(r=[],tt(n,function(c,u){r.push(u)}));else if(e===oc){var l=RM(n[0]);s=hn(l)&&l.length||1}return{startIndex:a,dimensionsDefine:gU(r),dimensionsDetectedCount:s}}function SNe(n){for(var e=0,t;e<n.length&&!(t=n[e++]););if(t)return mr(t)}function gU(n){if(n){var e=di();return hi(n,function(t,i){t=Ln(t)?t:{name:t};var r={name:t.name,displayName:t.displayName,type:t.type};if(r.name==null)return r;r.name+="",r.displayName==null&&(r.displayName=r.name);var s=e.get(r.name);return s?r.name+="-"+s.count++:e.set(r.name,{count:1}),r})}}function yU(n,e,t,i){if(e===Cg)for(var r=0;r<t.length&&r<i;r++)n(t[r]?t[r][0]:null,r);else for(var s=t[0]||[],r=0;r<s.length&&r<i;r++)n(s[r],r)}function jX(n){var e=n.sourceFormat;return e===gl||e===lc}var Ef,If,Rf,_U,bU,QX=function(){function n(e,t){var i=xk(e)?e:XX(e);this._source=i;var r=this._data=i.data;i.sourceFormat===_d&&(this._offset=0,this._dimSize=t,this._data=r),bU(this,r,i)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(e,t){},n.prototype.appendData=function(e){},n.prototype.clean=function(){},n.protoInitialize=function(){var e=n.prototype;e.pure=!1,e.persistent=!0}(),n.internalField=function(){var e;bU=function(a,o,l){var c=l.sourceFormat,u=l.seriesLayoutBy,d=l.startIndex,f=l.dimensionsDefine,h=_U[Ck(c,u)];if(Nt(a,h),c===_d)a.getItem=t,a.count=r,a.fillStorage=i;else{var p=ZX(c,u);a.getItem=Gi(p,null,o,d,f);var m=JX(c,u);a.count=Gi(m,null,o,d,f)}};var t=function(a,o){a=a-this._offset,o=o||[];for(var l=this._data,c=this._dimSize,u=c*a,d=0;d<c;d++)o[d]=l[u+d];return o},i=function(a,o,l,c){for(var u=this._data,d=this._dimSize,f=0;f<d;f++){for(var h=c[f],p=h[0]==null?1/0:h[0],m=h[1]==null?-1/0:h[1],v=o-a,g=l[f],_=0;_<v;_++){var y=u[_*d+f];g[a+_]=y,y<p&&(p=y),y>m&&(m=y)}h[0]=p,h[1]=m}},r=function(){return this._data?this._data.length/this._dimSize:0};_U=(e={},e[Ca+"_"+Kc]={pure:!0,appendData:s},e[Ca+"_"+Cg]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[gl]={pure:!0,appendData:s},e[lc]={pure:!0,appendData:function(a){var o=this._data;tt(a,function(l,c){for(var u=o[c]||(o[c]=[]),d=0;d<(l||[]).length;d++)u.push(l[d])})}},e[oc]={appendData:s},e[_d]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},e);function s(a){for(var o=0;o<a.length;o++)this._data.push(a[o])}}(),n}(),SU=function(n,e,t,i){return n[i]},wNe=(Ef={},Ef[Ca+"_"+Kc]=function(n,e,t,i){return n[i+e]},Ef[Ca+"_"+Cg]=function(n,e,t,i,r){i+=e;for(var s=r||[],a=n,o=0;o<a.length;o++){var l=a[o];s[o]=l?l[i]:null}return s},Ef[gl]=SU,Ef[lc]=function(n,e,t,i,r){for(var s=r||[],a=0;a<t.length;a++){var o=t[a].name,l=n[o];s[a]=l?l[i]:null}return s},Ef[oc]=SU,Ef);function ZX(n,e){var t=wNe[Ck(n,e)];return t}var wU=function(n,e,t){return n.length},xNe=(If={},If[Ca+"_"+Kc]=function(n,e,t){return Math.max(0,n.length-e)},If[Ca+"_"+Cg]=function(n,e,t){var i=n[0];return i?Math.max(0,i.length-e):0},If[gl]=wU,If[lc]=function(n,e,t){var i=t[0].name,r=n[i];return r?r.length:0},If[oc]=wU,If);function JX(n,e){var t=xNe[Ck(n,e)];return t}var OA=function(n,e,t){return n[e]},CNe=(Rf={},Rf[Ca]=OA,Rf[gl]=function(n,e,t){return n[t]},Rf[lc]=OA,Rf[oc]=function(n,e,t){var i=RM(n);return i instanceof Array?i[e]:i},Rf[_d]=OA,Rf);function eY(n){var e=CNe[n];return e}function Ck(n,e){return n===Ca?n+"_"+e:n}function Xx(n,e,t){if(n){var i=n.getRawDataItem(e);if(i!=null){var r=n.getStore(),s=r.getSource().sourceFormat;if(t!=null){var a=n.getDimensionIndex(t),o=r.getDimensionProperty(a);return eY(s)(i,a,o)}else{var l=i;return s===oc&&(l=RM(i)),l}}}}var MNe=/\{@(.+?)\}/g,TNe=function(){function n(){}return n.prototype.getDataParams=function(e,t){var i=this.getData(t),r=this.getRawValue(e,t),s=i.getRawIndex(e),a=i.getName(e),o=i.getRawDataItem(e),l=i.getItemVisual(e,"style"),c=l&&l[i.getItemVisual(e,"drawType")||"fill"],u=l&&l.stroke,d=this.mainType,f=d==="series",h=i.userOutput&&i.userOutput.get();return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:f?this.subType:null,seriesIndex:this.seriesIndex,seriesId:f?this.id:null,seriesName:f?this.name:null,name:a,dataIndex:s,data:o,dataType:t,value:r,color:c,borderColor:u,dimensionNames:h?h.fullDimensions:null,encode:h?h.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(e,t,i,r,s,a){t=t||"normal";var o=this.getData(i),l=this.getDataParams(e,i);if(a&&(l.value=a.interpolatedValue),r!=null&&hn(l.value)&&(l.value=l.value[r]),!s){var c=o.getItemModel(e);s=c.get(t==="normal"?["label","formatter"]:[t,"label","formatter"])}if(Ri(s))return l.status=t,l.dimensionIndex=r,s(l);if(Rn(s)){var u=OX(s,l);return u.replace(MNe,function(d,f){var h=f.length,p=f;p.charAt(0)==="["&&p.charAt(h-1)==="]"&&(p=+p.slice(1,h-1));var m=Xx(o,e,p);if(a&&hn(a.interpolatedValue)){var v=o.getDimensionIndex(p);v>=0&&(m=a.interpolatedValue[v])}return m!=null?m+"":""})}},n.prototype.getRawValue=function(e,t){return Xx(this.getData(t),e)},n.prototype.formatTooltip=function(e,t,i){},n}();function xU(n){var e,t;return Ln(n)?n.type&&(t=n):e=n,{text:e,frag:t}}function yy(n){return new ANe(n)}var ANe=function(){function n(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return n.prototype.perform=function(e){var t=this._upstream,i=e&&e.skip;if(this._dirty&&t){var r=this.context;r.data=r.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var s;this._plan&&!i&&(s=this._plan(this.context));var a=u(this._modBy),o=this._modDataCount||0,l=u(e&&e.modBy),c=e&&e.modDataCount||0;(a!==l||o!==c)&&(s="reset");function u(_){return!(_>=1)&&(_=1),_}var d;(this._dirty||s==="reset")&&(this._dirty=!1,d=this._doReset(i)),this._modBy=l,this._modDataCount=c;var f=e&&e.step;if(t?this._dueEnd=t._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var h=this._dueIndex,p=Math.min(f!=null?this._dueIndex+f:1/0,this._dueEnd);if(!i&&(d||h<p)){var m=this._progress;if(hn(m))for(var v=0;v<m.length;v++)this._doProgress(m[v],h,p,l,c);else this._doProgress(m,h,p,l,c)}this._dueIndex=p;var g=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=g}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(e,t,i,r,s){CU.reset(t,i,r,s),this._callingProgress=e,this._callingProgress({start:t,end:i,count:i-t,next:CU.next},this.context)},n.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var t,i;!e&&this._reset&&(t=this._reset(this.context),t&&t.progress&&(i=t.forceFirstProgress,t=t.progress),hn(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var r=this._downstream;return r&&r.dirty(),i},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},n}(),CU=function(){var n,e,t,i,r,s={reset:function(l,c,u,d){e=l,n=c,t=u,i=d,r=Math.ceil(i/t),s.next=t>1&&i>0?o:a}};return s;function a(){return e<n?e++:null}function o(){var l=e%r*t+Math.ceil(e/r),c=e>=n?null:l<i?l:e;return e++,c}}();function O1(n,e){var t=e&&e.type;return t==="ordinal"?n:(t==="time"&&!vr(n)&&n!=null&&n!=="-"&&(n=+IM(n)),n==null||n===""?NaN:+n)}di({number:function(n){return parseFloat(n)},time:function(n){return+IM(n)},trim:function(n){return Rn(n)?Bl(n):n}});var ENe=function(){function n(e,t){var i=e==="desc";this._resultLT=i?1:-1,t==null&&(t=i?"min":"max"),this._incomparable=t==="min"?-1/0:1/0}return n.prototype.evaluate=function(e,t){var i=vr(e)?e:Hx(e),r=vr(t)?t:Hx(t),s=isNaN(i),a=isNaN(r);if(s&&(i=this._incomparable),a&&(r=this._incomparable),s&&a){var o=Rn(e),l=Rn(t);o&&(i=l?e:0),l&&(r=o?t:0)}return i<r?this._resultLT:i>r?-this._resultLT:0},n}(),INe=function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(e){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(e){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(e,t){},n.prototype.retrieveValueFromItem=function(e,t){},n.prototype.convertValue=function(e,t){return O1(e,t)},n}();function RNe(n,e){var t=new INe,i=n.data,r=t.sourceFormat=n.sourceFormat,s=n.startIndex,a="";n.seriesLayoutBy!==Kc&&ua(a);var o=[],l={},c=n.dimensionsDefine;if(c)tt(c,function(m,v){var g=m.name,_={index:v,name:g,displayName:m.displayName};if(o.push(_),g!=null){var y="";Bv(l,g)&&ua(y),l[g]=_}});else for(var u=0;u<n.dimensionsDetectedCount;u++)o.push({index:u});var d=ZX(r,Kc);e.__isBuiltIn&&(t.getRawDataItem=function(m){return d(i,s,o,m)},t.getRawData=Gi(PNe,null,n)),t.cloneRawData=Gi(DNe,null,n);var f=JX(r,Kc);t.count=Gi(f,null,i,s,o);var h=eY(r);t.retrieveValue=function(m,v){var g=d(i,s,o,m);return p(g,v)};var p=t.retrieveValueFromItem=function(m,v){if(m!=null){var g=o[v];if(g)return h(m,v,g.name)}};return t.getDimensionInfo=Gi(LNe,null,o,l),t.cloneAllDimensionInfo=Gi(kNe,null,o),t}function PNe(n){var e=n.sourceFormat;if(!Mk(e)){var t="";ua(t)}return n.data}function DNe(n){var e=n.sourceFormat,t=n.data;if(!Mk(e)){var i="";ua(i)}if(e===Ca){for(var r=[],s=0,a=t.length;s<a;s++)r.push(t[s].slice());return r}else if(e===gl){for(var r=[],s=0,a=t.length;s<a;s++)r.push(Nt({},t[s]));return r}}function LNe(n,e,t){if(t!=null){if(vr(t)||!isNaN(t)&&!Bv(e,t))return n[t];if(Bv(e,t))return e[t]}}function kNe(n){return vi(n)}var tY=di();function ONe(n){n=vi(n);var e=n.type,t="";e||ua(t);var i=e.split(":");i.length!==2&&ua(t);var r=!1;i[0]==="echarts"&&(e=i[1],r=!0),n.__isBuiltIn=r,tY.set(e,n)}function NNe(n,e,t){var i=Qs(n),r=i.length,s="";r||ua(s);for(var a=0,o=r;a<o;a++){var l=i[a];e=BNe(l,e),a!==o-1&&(e.length=Math.max(e.length,1))}return e}function BNe(n,e,t,i){var r="";e.length||ua(r),Ln(n)||ua(r);var s=n.type,a=tY.get(s);a||ua(r);var o=hi(e,function(c){return RNe(c,a)}),l=Qs(a.transform({upstream:o[0],upstreamList:o,config:vi(n.config)}));return hi(l,function(c,u){var d="";Ln(c)||ua(d),c.data||ua(d);var f=YX(c.data);Mk(f)||ua(d);var h,p=e[0];if(p&&u===0&&!c.dimensions){var m=p.startIndex;m&&(c.data=p.data.slice(0,m).concat(c.data)),h={seriesLayoutBy:Kc,sourceHeader:m,dimensions:p.metaRawOption.dimensions}}else h={seriesLayoutBy:Kc,sourceHeader:0,dimensions:c.dimensions};return VR(c.data,h,null)})}function Mk(n){return n===Ca||n===gl}var UM="undefined",FNe=typeof Uint32Array===UM?Array:Uint32Array,zNe=typeof Uint16Array===UM?Array:Uint16Array,nY=typeof Int32Array===UM?Array:Int32Array,MU=typeof Float64Array===UM?Array:Float64Array,iY={float:MU,int:nY,ordinal:Array,number:Array,time:MU},NA;function c0(n){return n>65535?FNe:zNe}function Rp(){return[1/0,-1/0]}function UNe(n){var e=n.constructor;return e===Array?n.slice():new e(n)}function TU(n,e,t,i,r){var s=iY[t||"float"];if(r){var a=n[e],o=a&&a.length;if(o!==i){for(var l=new s(i),c=0;c<o;c++)l[c]=a[c];n[e]=l}}else n[e]=new s(i)}var $R=function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=di()}return n.prototype.initData=function(e,t,i){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var r=e.getSource(),s=this.defaultDimValueGetter=NA[r.sourceFormat];this._dimValueGetter=i||s,this._rawExtent=[],jX(r),this._dimensions=hi(t,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,e.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(e,t){var i=this._calcDimNameToIdx,r=this._dimensions,s=i.get(e);if(s!=null){if(r[s].type===t)return s}else s=r.length;return r[s]={type:t},i.set(e,s),this._chunks[s]=new iY[t||"float"](this._rawCount),this._rawExtent[s]=Rp(),s},n.prototype.collectOrdinalMeta=function(e,t){var i=this._chunks[e],r=this._dimensions[e],s=this._rawExtent,a=r.ordinalOffset||0,o=i.length;a===0&&(s[e]=Rp());for(var l=s[e],c=a;c<o;c++){var u=i[c]=t.parseAndCollect(i[c]);isNaN(u)||(l[0]=Math.min(u,l[0]),l[1]=Math.max(u,l[1]))}r.ordinalMeta=t,r.ordinalOffset=o,r.type="ordinal"},n.prototype.getOrdinalMeta=function(e){var t=this._dimensions[e],i=t.ordinalMeta;return i},n.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},n.prototype.appendData=function(e){var t=this._provider,i=this.count();t.appendData(e);var r=t.count();return t.persistent||(r+=i),i<r&&this._initDataFromProvider(i,r,!0),[i,r]},n.prototype.appendValues=function(e,t){for(var i=this._chunks,r=this._dimensions,s=r.length,a=this._rawExtent,o=this.count(),l=o+Math.max(e.length,t||0),c=0;c<s;c++){var u=r[c];TU(i,c,u.type,l,!0)}for(var d=[],f=o;f<l;f++)for(var h=f-o,p=0;p<s;p++){var u=r[p],m=NA.arrayRows.call(this,e[h]||d,u.property,h,p);i[p][f]=m;var v=a[p];m<v[0]&&(v[0]=m),m>v[1]&&(v[1]=m)}return this._rawCount=this._count=l,{start:o,end:l}},n.prototype._initDataFromProvider=function(e,t,i){for(var r=this._provider,s=this._chunks,a=this._dimensions,o=a.length,l=this._rawExtent,c=hi(a,function(_){return _.property}),u=0;u<o;u++){var d=a[u];l[u]||(l[u]=Rp()),TU(s,u,d.type,t,i)}if(r.fillStorage)r.fillStorage(e,t,s,l);else for(var f=[],h=e;h<t;h++){f=r.getItem(h,f);for(var p=0;p<o;p++){var m=s[p],v=this._dimValueGetter(f,c[p],h,p);m[h]=v;var g=l[p];v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=t,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var i=this._chunks[e];return i?i[this.getRawIndex(t)]:NaN},n.prototype.getValues=function(e,t){var i=[],r=[];if(t==null){t=e,e=[];for(var s=0;s<this._dimensions.length;s++)r.push(s)}else r=e;for(var s=0,a=r.length;s<a;s++)i.push(this.get(r[s],t));return i},n.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var i=this._chunks[e];return i?i[t]:NaN},n.prototype.getSum=function(e){var t=this._chunks[e],i=0;if(t)for(var r=0,s=this.count();r<s;r++){var a=this.get(e,r);isNaN(a)||(i+=a)}return i},n.prototype.getMedian=function(e){var t=[];this.each([e],function(s){isNaN(s)||t.push(s)});var i=t.sort(function(s,a){return s-a}),r=this.count();return r===0?0:r%2===1?i[(r-1)/2]:(i[r/2]+i[r/2-1])/2},n.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,i=t[e];if(i!=null&&i<this._count&&i===e)return e;for(var r=0,s=this._count-1;r<=s;){var a=(r+s)/2|0;if(t[a]<e)r=a+1;else if(t[a]>e)s=a-1;else return a}return-1},n.prototype.indicesOfNearest=function(e,t,i){var r=this._chunks,s=r[e],a=[];if(!s)return a;i==null&&(i=1/0);for(var o=1/0,l=-1,c=0,u=0,d=this.count();u<d;u++){var f=this.getRawIndex(u),h=t-s[f],p=Math.abs(h);p<=i&&((p<o||p===o&&h>=0&&l<0)&&(o=p,l=h,c=0),h===l&&(a[c++]=u))}return a.length=c,a},n.prototype.getIndices=function(){var e,t=this._indices;if(t){var i=t.constructor,r=this._count;if(i===Array){e=new i(r);for(var s=0;s<r;s++)e[s]=t[s]}else e=new i(t.buffer,0,r)}else{var i=c0(this._rawCount);e=new i(this.count());for(var s=0;s<e.length;s++)e[s]=s}return e},n.prototype.filter=function(e,t){if(!this._count)return this;for(var i=this.clone(),r=i.count(),s=c0(i._rawCount),a=new s(r),o=[],l=e.length,c=0,u=e[0],d=i._chunks,f=0;f<r;f++){var h=void 0,p=i.getRawIndex(f);if(l===0)h=t(f);else if(l===1){var m=d[u][p];h=t(m,f)}else{for(var v=0;v<l;v++)o[v]=d[e[v]][p];o[v]=f,h=t.apply(null,o)}h&&(a[c++]=p)}return c<r&&(i._indices=a),i._count=c,i._extent=[],i._updateGetRawIdx(),i},n.prototype.selectRange=function(e){var t=this.clone(),i=t._count;if(!i)return this;var r=mr(e),s=r.length;if(!s)return this;var a=t.count(),o=c0(t._rawCount),l=new o(a),c=0,u=r[0],d=e[u][0],f=e[u][1],h=t._chunks,p=!1;if(!t._indices){var m=0;if(s===1){for(var v=h[r[0]],g=0;g<i;g++){var _=v[g];(_>=d&&_<=f||isNaN(_))&&(l[c++]=m),m++}p=!0}else if(s===2){for(var v=h[r[0]],y=h[r[1]],S=e[r[1]][0],w=e[r[1]][1],g=0;g<i;g++){var _=v[g],x=y[g];(_>=d&&_<=f||isNaN(_))&&(x>=S&&x<=w||isNaN(x))&&(l[c++]=m),m++}p=!0}}if(!p)if(s===1)for(var g=0;g<a;g++){var T=t.getRawIndex(g),_=h[r[0]][T];(_>=d&&_<=f||isNaN(_))&&(l[c++]=T)}else for(var g=0;g<a;g++){for(var C=!0,T=t.getRawIndex(g),M=0;M<s;M++){var A=r[M],_=h[A][T];(_<e[A][0]||_>e[A][1])&&(C=!1)}C&&(l[c++]=t.getRawIndex(g))}return c<a&&(t._indices=l),t._count=c,t._extent=[],t._updateGetRawIdx(),t},n.prototype.map=function(e,t){var i=this.clone(e);return this._updateDims(i,e,t),i},n.prototype.modify=function(e,t){this._updateDims(this,e,t)},n.prototype._updateDims=function(e,t,i){for(var r=e._chunks,s=[],a=t.length,o=e.count(),l=[],c=e._rawExtent,u=0;u<t.length;u++)c[t[u]]=Rp();for(var d=0;d<o;d++){for(var f=e.getRawIndex(d),h=0;h<a;h++)l[h]=r[t[h]][f];l[a]=d;var p=i&&i.apply(null,l);if(p!=null){typeof p!="object"&&(s[0]=p,p=s);for(var u=0;u<p.length;u++){var m=t[u],v=p[u],g=c[m],_=r[m];_&&(_[f]=v),v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}}}},n.prototype.lttbDownSample=function(e,t){var i=this.clone([e],!0),r=i._chunks,s=r[e],a=this.count(),o=0,l=Math.floor(1/t),c=this.getRawIndex(0),u,d,f,h=new(c0(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));h[o++]=c;for(var p=1;p<a-1;p+=l){for(var m=Math.min(p+l,a-1),v=Math.min(p+l*2,a),g=(v+m)/2,_=0,y=m;y<v;y++){var S=this.getRawIndex(y),w=s[S];isNaN(w)||(_+=w)}_/=v-m;var x=p,T=Math.min(p+l,a),C=p-1,M=s[c];u=-1,f=x;for(var A=-1,E=0,y=x;y<T;y++){var S=this.getRawIndex(y),w=s[S];if(isNaN(w)){E++,A<0&&(A=S);continue}d=Math.abs((C-g)*(w-M)-(C-y)*(_-M)),d>u&&(u=d,f=S)}E>0&&E<T-x&&(h[o++]=Math.min(A,f),f=Math.max(A,f)),h[o++]=f,c=f}return h[o++]=this.getRawIndex(a-1),i._count=o,i._indices=h,i.getRawIndex=this._getRawIdx,i},n.prototype.downSample=function(e,t,i,r){for(var s=this.clone([e],!0),a=s._chunks,o=[],l=Math.floor(1/t),c=a[e],u=this.count(),d=s._rawExtent[e]=Rp(),f=new(c0(this._rawCount))(Math.ceil(u/l)),h=0,p=0;p<u;p+=l){l>u-p&&(l=u-p,o.length=l);for(var m=0;m<l;m++){var v=this.getRawIndex(p+m);o[m]=c[v]}var g=i(o),_=this.getRawIndex(Math.min(p+r(o,g)||0,u-1));c[_]=g,g<d[0]&&(d[0]=g),g>d[1]&&(d[1]=g),f[h++]=_}return s._count=h,s._indices=f,s._updateGetRawIdx(),s},n.prototype.each=function(e,t){if(this._count)for(var i=e.length,r=this._chunks,s=0,a=this.count();s<a;s++){var o=this.getRawIndex(s);switch(i){case 0:t(s);break;case 1:t(r[e[0]][o],s);break;case 2:t(r[e[0]][o],r[e[1]][o],s);break;default:for(var l=0,c=[];l<i;l++)c[l]=r[e[l]][o];c[l]=s,t.apply(null,c)}}},n.prototype.getDataExtent=function(e){var t=this._chunks[e],i=Rp();if(!t)return i;var r=this.count(),s=!this._indices,a;if(s)return this._rawExtent[e].slice();if(a=this._extent[e],a)return a.slice();a=i;for(var o=a[0],l=a[1],c=0;c<r;c++){var u=this.getRawIndex(c),d=t[u];d<o&&(o=d),d>l&&(l=d)}return a=[o,l],this._extent[e]=a,a},n.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var i=[],r=this._chunks,s=0;s<r.length;s++)i.push(r[s][t]);return i},n.prototype.clone=function(e,t){var i=new n,r=this._chunks,s=e&&zd(e,function(o,l){return o[l]=!0,o},{});if(s)for(var a=0;a<r.length;a++)i._chunks[a]=s[a]?UNe(r[a]):r[a];else i._chunks=r;return this._copyCommonProps(i),t||(i._indices=this._cloneIndices()),i._updateGetRawIdx(),i},n.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=vi(this._extent),e._rawExtent=vi(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var i=this._indices.length;t=new e(i);for(var r=0;r<i;r++)t[r]=this._indices[r]}else t=new e(this._indices);return t}return null},n.prototype._getRawIdxIdentity=function(e){return e},n.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=function(){function e(t,i,r,s){return O1(t[s],this._dimensions[s])}NA={arrayRows:e,objectRows:function(t,i,r,s){return O1(t[i],this._dimensions[s])},keyedColumns:e,original:function(t,i,r,s){var a=t&&(t.value==null?t:t.value);return O1(a instanceof Array?a[s]:a,this._dimensions[s])},typedArray:function(t,i,r,s){return t[s]}}}(),n}(),HNe=function(){function n(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,t=this._getUpstreamSourceManagers(),i=!!t.length,r,s;if(TS(e)){var a=e,o=void 0,l=void 0,c=void 0;if(i){var u=t[0];u.prepareSource(),c=u.getSource(),o=c.data,l=c.sourceFormat,s=[u._getVersionSign()]}else o=a.get("data",!0),l=Ka(o)?_d:oc,s=[];var d=this._getSourceMetaRawOption()||{},f=c&&c.metaRawOption||{},h=ui(d.seriesLayoutBy,f.seriesLayoutBy)||null,p=ui(d.sourceHeader,f.sourceHeader),m=ui(d.dimensions,f.dimensions),v=h!==f.seriesLayoutBy||!!p!=!!f.sourceHeader||m;r=v?[VR(o,{seriesLayoutBy:h,sourceHeader:p,dimensions:m},l)]:[]}else{var g=e;if(i){var _=this._applyTransform(t);r=_.sourceList,s=_.upstreamSignList}else{var y=g.get("source",!0);r=[VR(y,this._getSourceMetaRawOption(),null)],s=[]}}this._setLocalSource(r,s)},n.prototype._applyTransform=function(e){var t=this._sourceHost,i=t.get("transform",!0),r=t.get("fromTransformResult",!0);if(r!=null){var s="";e.length!==1&&AU(s)}var a,o=[],l=[];return tt(e,function(c){c.prepareSource();var u=c.getSource(r||0),d="";r!=null&&!u&&AU(d),o.push(u),l.push(c._getVersionSign())}),i?a=NNe(i,o,{datasetIndex:t.componentIndex}):r!=null&&(a=[_Ne(o[0])]),{sourceList:a,upstreamSignList:l}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var i=e[t];if(i._isDirty()||this._upstreamSignList[t]!==i._getVersionSign())return!0}},n.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var i=this._getUpstreamSourceManagers();return i[0]&&i[0].getSource(e)}return t},n.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},n.prototype._innerGetDataStore=function(e,t,i){var r=0,s=this._storeList,a=s[r];a||(a=s[r]={});var o=a[i];if(!o){var l=this._getUpstreamSourceManagers()[0];TS(this._sourceHost)&&l?o=l._innerGetDataStore(e,t,i):(o=new $R,o.initData(new QX(t,e.length),e)),a[i]=o}return o},n.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(TS(e)){var t=zX(e);return t?[t.getSourceManager()]:[]}else return hi(WOe(e),function(i){return i.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,t,i,r;if(TS(e))t=e.get("seriesLayoutBy",!0),i=e.get("sourceHeader",!0),r=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var s=e;t=s.get("seriesLayoutBy",!0),i=s.get("sourceHeader",!0),r=s.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:i,dimensions:r}},n}();function TS(n){return n.mainType==="series"}function AU(n){throw new Error(n)}var rY="line-height:1";function sY(n,e){var t=n.color||"#6e7079",i=n.fontSize||12,r=n.fontWeight||"400",s=n.color||"#464646",a=n.fontSize||14,o=n.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+ho(i+"")+"px;color:"+ho(t)+";font-weight:"+ho(r+""),valueStyle:"font-size:"+ho(a+"")+"px;color:"+ho(s)+";font-weight:"+ho(o+"")}:{nameStyle:{fontSize:i,fill:t,fontWeight:r},valueStyle:{fontSize:a,fill:s,fontWeight:o}}}var VNe=[0,10,20,30],$Ne=["",`
`,`

`,`


`];function M_(n,e){return e.type=n,e}function GR(n){return n.type==="section"}function aY(n){return GR(n)?GNe:WNe}function oY(n){if(GR(n)){var e=0,t=n.blocks.length,i=t>1||t>0&&!n.noHeader;return tt(n.blocks,function(r){var s=oY(r);s>=e&&(e=s+ +(i&&(!s||GR(r)&&!r.noHeader)))}),e}return 0}function GNe(n,e,t,i){var r=e.noHeader,s=KNe(oY(e)),a=[],o=e.blocks||[];nu(!o||hn(o)),o=o||[];var l=n.orderMode;if(e.sortBlocks&&l){o=o.slice();var c={valueAsc:"asc",valueDesc:"desc"};if(Bv(c,l)){var u=new ENe(c[l],null);o.sort(function(p,m){return u.evaluate(p.sortParam,m.sortParam)})}else l==="seriesDesc"&&o.reverse()}tt(o,function(p,m){var v=e.valueFormatter,g=aY(p)(v?Nt(Nt({},n),{valueFormatter:v}):n,p,m>0?s.html:0,i);g!=null&&a.push(g)});var d=n.renderMode==="richText"?a.join(s.richText):WR(a.join(""),r?t:s.html);if(r)return d;var f=HR(e.header,"ordinal",n.useUTC),h=sY(i,n.renderMode).nameStyle;return n.renderMode==="richText"?lY(n,f,h)+s.richText+d:WR('<div style="'+h+";"+rY+';">'+ho(f)+"</div>"+d,t)}function WNe(n,e,t,i){var r=n.renderMode,s=e.noName,a=e.noValue,o=!e.markerType,l=e.name,c=n.useUTC,u=e.valueFormatter||n.valueFormatter||function(S){return S=hn(S)?S:[S],hi(S,function(w,x){return HR(w,hn(h)?h[x]:h,c)})};if(!(s&&a)){var d=o?"":n.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",r),f=s?"":HR(l,"ordinal",c),h=e.valueType,p=a?[]:u(e.value),m=!o||!s,v=!o&&s,g=sY(i,r),_=g.nameStyle,y=g.valueStyle;return r==="richText"?(o?"":d)+(s?"":lY(n,f,_))+(a?"":YNe(n,p,m,v,y)):WR((o?"":d)+(s?"":qNe(f,!o,_))+(a?"":XNe(p,m,v,y)),t)}}function EU(n,e,t,i,r,s){if(n){var a=aY(n),o={useUTC:r,renderMode:t,orderMode:i,markupStyleCreator:e,valueFormatter:n.valueFormatter};return a(o,n,0,s)}}function KNe(n){return{html:VNe[n],richText:$Ne[n]}}function WR(n,e){var t='<div style="clear:both"></div>',i="margin: "+e+"px 0 0";return'<div style="'+i+";"+rY+';">'+n+t+"</div>"}function qNe(n,e,t){var i=e?"margin-left:2px":"";return'<span style="'+t+";"+i+'">'+ho(n)+"</span>"}function XNe(n,e,t,i){var r=t?"10px":"20px",s=e?"float:right;margin-left:"+r:"";return n=hn(n)?n:[n],'<span style="'+s+";"+i+'">'+hi(n,function(a){return ho(a)}).join("&nbsp;&nbsp;")+"</span>"}function lY(n,e,t){return n.markupStyleCreator.wrapRichTextStyle(e,t)}function YNe(n,e,t,i,r){var s=[r],a=i?10:20;return t&&s.push({padding:[0,0,0,a],align:"right"}),n.markupStyleCreator.wrapRichTextStyle(hn(e)?e.join("  "):e,s)}function jNe(n,e){var t=n.getData().getItemVisual(e,"style"),i=t[n.visualDrawType];return S_(i)}function cY(n,e){var t=n.get("padding");return t??(e==="richText"?[8,10]:10)}var BA=function(){function n(){this.richTextStyles={},this._nextStyleNameId=Tq()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(e,t,i){var r=i==="richText"?this._generateStyleName():null,s=NOe({color:t,type:e,renderMode:i,markerId:r});return Rn(s)?s:(this.richTextStyles[r]=s.style,s.content)},n.prototype.wrapRichTextStyle=function(e,t){var i={};hn(t)?tt(t,function(s){return Nt(i,s)}):Nt(i,t);var r=this._generateStyleName();return this.richTextStyles[r]=i,"{"+r+"|"+e+"}"},n}();function QNe(n){var e=n.series,t=n.dataIndex,i=n.multipleSeries,r=e.getData(),s=r.mapDimensionsAll("defaultedTooltip"),a=s.length,o=e.getRawValue(t),l=hn(o),c=jNe(e,t),u,d,f,h;if(a>1||l&&!a){var p=ZNe(o,e,t,s,c);u=p.inlineValues,d=p.inlineValueTypes,f=p.blocks,h=p.inlineValues[0]}else if(a){var m=r.getDimensionInfo(s[0]);h=u=Xx(r,t,s[0]),d=m.type}else h=u=l?o[0]:o;var v=ek(e),g=v&&e.name||"",_=r.getName(t),y=i?g:_;return M_("section",{header:g,noHeader:i||!v,sortParam:h,blocks:[M_("nameValue",{markerType:"item",markerColor:c,name:y,noName:!Bl(y),value:u,valueType:d})].concat(f||[])})}function ZNe(n,e,t,i,r){var s=e.getData(),a=zd(n,function(d,f,h){var p=s.getDimensionInfo(h);return d=d||p&&p.tooltip!==!1&&p.displayName!=null},!1),o=[],l=[],c=[];i.length?tt(i,function(d){u(Xx(s,t,d),d)}):tt(n,u);function u(d,f){var h=s.getDimensionInfo(f);!h||h.otherDims.tooltip===!1||(a?c.push(M_("nameValue",{markerType:"subItem",markerColor:r,name:h.displayName,value:d,valueType:h.type})):(o.push(d),l.push(h.type)))}return{inlineValues:o,inlineValueTypes:l,blocks:c}}var Au=Jr();function AS(n,e){return n.getName(e)||n.getId(e)}var JNe="__universalTransitionEnabled",HM=function(n){Mn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return e.prototype.init=function(t,i,r){this.seriesIndex=this.componentIndex,this.dataTask=yy({count:tBe,reset:nBe}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,r);var s=Au(this).sourceManager=new HNe(this);s.prepareSource();var a=this.getInitialData(t,r);RU(a,this),this.dataTask.context.data=a,Au(this).dataBeforeProcessed=a,IU(this),this._initSelectedMapFromData(a)},e.prototype.mergeDefaultAndTheme=function(t,i){var r=qx(this),s=r?Sk(t):{},a=this.subType;ar.hasClass(a)&&(a+="Series"),er(t,i.getTheme().get(this.subType)),er(t,this.getDefaultOption()),AR(t,"label",["show"]),this.fillDataTextStyle(t.data),r&&x_(t,s,r)},e.prototype.mergeOption=function(t,i){t=er(this.option,t,!0),this.fillDataTextStyle(t.data);var r=qx(this);r&&x_(this.option,t,r);var s=Au(this).sourceManager;s.dirty(),s.prepareSource();var a=this.getInitialData(t,i);RU(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,Au(this).dataBeforeProcessed=a,IU(this),this._initSelectedMapFromData(a)},e.prototype.fillDataTextStyle=function(t){if(t&&!Ka(t))for(var i=["show"],r=0;r<t.length;r++)t[r]&&t[r].label&&AR(t[r],"label",i)},e.prototype.getInitialData=function(t,i){},e.prototype.appendData=function(t){var i=this.getRawData();i.appendData(t.data)},e.prototype.getData=function(t){var i=KR(this);if(i){var r=i.context.data;return t==null?r:r.getLinkedData(t)}else return Au(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var i=KR(this);if(i){var r=i.context;r.outputData=t,i!==this.dataTask&&(r.data=t)}Au(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return di(t)},e.prototype.getSourceManager=function(){return Au(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return Au(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,i,r){return QNe({series:this,dataIndex:t,multipleSeries:i})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(Qn.node&&!(t&&t.ssr))return!1;var i=this.getShallow("animation");return i&&this.getData().count()>this.getShallow("animationThreshold")&&(i=!1),!!i},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,i,r){var s=this.ecModel,a=wk.prototype.getColorFromPalette.call(this,t,i,r);return a||(a=s.getColorFromPalette(t,i,r)),a},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,i){this._innerSelect(this.getData(i),t)},e.prototype.unselect=function(t,i){var r=this.option.selectedMap;if(r){var s=this.option.selectedMode,a=this.getData(i);if(s==="series"||r==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<t.length;o++){var l=t[o],c=AS(a,l);r[c]=!1,this._selectedDataIndicesMap[c]=-1}}},e.prototype.toggleSelect=function(t,i){for(var r=[],s=0;s<t.length;s++)r[0]=t[s],this.isSelected(t[s],i)?this.unselect(r,i):this.select(r,i)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,i=mr(t),r=[],s=0;s<i.length;s++){var a=t[i[s]];a>=0&&r.push(a)}return r},e.prototype.isSelected=function(t,i){var r=this.option.selectedMap;if(!r)return!1;var s=this.getData(i);return(r==="all"||r[AS(s,t)])&&!s.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[JNe])return!0;var t=this.option.universalTransition;return t?t===!0?!0:t&&t.enabled:!1},e.prototype._innerSelect=function(t,i){var r,s,a=this.option,o=a.selectedMode,l=i.length;if(!(!o||!l)){if(o==="series")a.selectedMap="all";else if(o==="multiple"){Ln(a.selectedMap)||(a.selectedMap={});for(var c=a.selectedMap,u=0;u<l;u++){var d=i[u],f=AS(t,d);c[f]=!0,this._selectedDataIndicesMap[f]=t.getRawIndex(d)}}else if(o==="single"||o===!0){var h=i[l-1],f=AS(t,h);a.selectedMap=(r={},r[f]=!0,r),this._selectedDataIndicesMap=(s={},s[f]=t.getRawIndex(h),s)}}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var i=[];t.hasItemOption&&t.each(function(r){var s=t.getRawDataItem(r);s&&s.selected&&i.push(r)}),i.length>0&&this._innerSelect(t,i)}},e.registerClass=function(t){return ar.registerClass(t)},e.protoInitialize=function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"}(),e}(ar);gu(HM,TNe);gu(HM,wk);Dq(HM,ar);function IU(n){var e=n.name;ek(n)||(n.name=eBe(n)||e)}function eBe(n){var e=n.getRawData(),t=e.mapDimensionsAll("seriesName"),i=[];return tt(t,function(r){var s=e.getDimensionInfo(r);s.displayName&&i.push(s.displayName)}),i.join(" ")}function tBe(n){return n.model.getRawData().count()}function nBe(n){var e=n.model;return e.setData(e.getRawData().cloneShallow()),iBe}function iBe(n,e){e.outputData&&n.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function RU(n,e){tt(VPe(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(t){n.wrapMethod(t,Or(rBe,e))})}function rBe(n,e){var t=KR(n);return t&&t.setOutputEnd((e||this).count()),e}function KR(n){var e=(n.ecModel||{}).scheduler,t=e&&e.getPipeline(n.uid);if(t){var i=t.currentTask;if(i){var r=i.agentStubMap;r&&(i=r.get(n.uid))}return i}}const T_=HM;var Tk=function(){function n(){this.group=new Ql,this.uid=BM("viewComponent")}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,i,r){},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,i,r){},n.prototype.updateLayout=function(e,t,i,r){},n.prototype.updateVisual=function(e,t,i,r){},n.prototype.toggleBlurSeries=function(e,t,i){},n.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},n}();ik(Tk);rk(Tk);const Hd=Tk;function sBe(){var n=Jr();return function(e){var t=n(e),i=e.pipelineContext,r=!!t.large,s=!!t.progressiveRender,a=t.large=!!(i&&i.large),o=t.progressiveRender=!!(i&&i.progressiveRender);return(r!==a||s!==o)&&"reset"}}var uY=Jr(),aBe=sBe(),Ak=function(){function n(){this.group=new Ql,this.uid=BM("viewChart"),this.renderTask=yy({plan:oBe,reset:lBe}),this.renderTask.context={view:this}}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,i,r){},n.prototype.highlight=function(e,t,i,r){var s=e.getData(r&&r.dataType);s&&DU(s,r,"emphasis")},n.prototype.downplay=function(e,t,i,r){var s=e.getData(r&&r.dataType);s&&DU(s,r,"normal")},n.prototype.remove=function(e,t){this.group.removeAll()},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,i,r){this.render(e,t,i,r)},n.prototype.updateLayout=function(e,t,i,r){this.render(e,t,i,r)},n.prototype.updateVisual=function(e,t,i,r){this.render(e,t,i,r)},n.prototype.eachRendered=function(e){AX(this.group,e)},n.markUpdateMethod=function(e,t){uY(e).updateMethod=t},n.protoInitialize=function(){var e=n.prototype;e.type="chart"}(),n}();function PU(n,e,t){n&&BR(n)&&(e==="emphasis"?DR:LR)(n,t)}function DU(n,e,t){var i=bb(n,e),r=e&&e.highlightKey!=null?rke(e.highlightKey):null;i!=null?tt(Qs(i),function(s){PU(n.getItemGraphicEl(s),t,r)}):n.eachItemGraphicEl(function(s){PU(s,t,r)})}ik(Ak);rk(Ak);function oBe(n){return aBe(n.model)}function lBe(n){var e=n.model,t=n.ecModel,i=n.api,r=n.payload,s=e.pipelineContext.progressiveRender,a=n.view,o=r&&uY(r).updateMethod,l=s?"incrementalPrepareRender":o&&a[o]?o:"render";return l!=="render"&&a[l](e,t,i,r),cBe[l]}var cBe={incrementalPrepareRender:{progress:function(n,e){e.view.incrementalRender(n,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(n,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}};const lv=Ak;var Yx="\0__throttleOriginMethod",LU="\0__throttleRate",kU="\0__throttleType";function Ek(n,e,t){var i,r=0,s=0,a=null,o,l,c,u;e=e||0;function d(){s=new Date().getTime(),a=null,n.apply(l,c||[])}var f=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];i=new Date().getTime(),l=this,c=h;var m=u||e,v=u||t;u=null,o=i-(v?r:s)-m,clearTimeout(a),v?a=setTimeout(d,m):o>=0?d():a=setTimeout(d,-o),r=i};return f.clear=function(){a&&(clearTimeout(a),a=null)},f.debounceNextCall=function(h){u=h},f}function dY(n,e,t,i){var r=n[e];if(r){var s=r[Yx]||r,a=r[kU],o=r[LU];if(o!==t||a!==i){if(t==null||!i)return n[e]=s;r=n[e]=Ek(s,t,i==="debounce"),r[Yx]=s,r[kU]=i,r[LU]=t}return r}}function qR(n,e){var t=n[e];t&&t[Yx]&&(t.clear&&t.clear(),n[e]=t[Yx])}var OU=Jr(),NU={itemStyle:__(RX,!0),lineStyle:__(IX,!0)},uBe={lineStyle:"stroke",itemStyle:"fill"};function fY(n,e){var t=n.visualStyleMapper||NU[e];return t||(console.warn("Unknown style type '"+e+"'."),NU.itemStyle)}function hY(n,e){var t=n.visualDrawType||uBe[e];return t||(console.warn("Unknown style type '"+e+"'."),"fill")}var dBe={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData(),i=n.visualStyleAccessPath||"itemStyle",r=n.getModel(i),s=fY(n,i),a=s(r),o=r.getShallow("decal");o&&(t.setVisual("decal",o),o.dirty=!0);var l=hY(n,i),c=a[l],u=Ri(c)?c:null,d=a.fill==="auto"||a.stroke==="auto";if(!a[l]||u||d){var f=n.getColorFromPalette(n.name,null,e.getSeriesCount());a[l]||(a[l]=f,t.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||Ri(a.fill)?f:a.fill,a.stroke=a.stroke==="auto"||Ri(a.stroke)?f:a.stroke}if(t.setVisual("style",a),t.setVisual("drawType",l),!e.isSeriesFiltered(n)&&u)return t.setVisual("colorFromPalette",!1),{dataEach:function(h,p){var m=n.getDataParams(p),v=Nt({},a);v[l]=u(m),h.setItemVisual(p,"style",v)}}}},u0=new Ps,fBe={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!(n.ignoreStyleOnData||e.isSeriesFiltered(n))){var t=n.getData(),i=n.visualStyleAccessPath||"itemStyle",r=fY(n,i),s=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(a,o){var l=a.getRawDataItem(o);if(l&&l[i]){u0.option=l[i];var c=r(u0),u=a.ensureUniqueItemVisual(o,"style");Nt(u,c),u0.option.decal&&(a.setItemVisual(o,"decal",u0.option.decal),u0.option.decal.dirty=!0),s in c&&a.setItemVisual(o,"colorFromPalette",!1)}}:null}}}},hBe={performRawSeries:!0,overallReset:function(n){var e=di();n.eachSeries(function(t){var i=t.getColorBy();if(!t.isColorBySeries()){var r=t.type+"-"+i,s=e.get(r);s||(s={},e.set(r,s)),OU(t).scope=s}}),n.eachSeries(function(t){if(!(t.isColorBySeries()||n.isSeriesFiltered(t))){var i=t.getRawData(),r={},s=t.getData(),a=OU(t).scope,o=t.visualStyleAccessPath||"itemStyle",l=hY(t,o);s.each(function(c){var u=s.getRawIndex(c);r[u]=c}),i.each(function(c){var u=r[c],d=s.getItemVisual(u,"colorFromPalette");if(d){var f=s.ensureUniqueItemVisual(u,"style"),h=i.getName(c)||c+"",p=i.count();f[l]=t.getColorFromPalette(h,a,p)}})}})}},ES=Math.PI;function pBe(n,e){e=e||{},nr(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var t=new Ql,i=new ya({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});t.add(i);var r=new ta({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),s=new ya({style:{fill:"none"},textContent:r,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});t.add(s);var a;return e.showSpinner&&(a=new dk({shape:{startAngle:-ES/2,endAngle:-ES/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:ES*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:ES*3/2}).delay(300).start("circularInOut"),t.add(a)),t.resize=function(){var o=r.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,c=(n.getWidth()-l*2-(e.showSpinner&&o?10:0)-o)/2-(e.showSpinner&&o?0:5+o/2)+(e.showSpinner?0:o/2)+(o?0:l),u=n.getHeight()/2;e.showSpinner&&a.setShape({cx:c,cy:u}),s.setShape({x:c-l,y:u-l,width:l*2,height:l*2}),i.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},t.resize(),t}var mBe=function(){function n(e,t,i,r){this._stageTaskMap=di(),this.ecInstance=e,this.api=t,i=this._dataProcessorHandlers=i.slice(),r=this._visualHandlers=r.slice(),this._allHandlers=i.concat(r)}return n.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(i){var r=i.overallTask;r&&r.dirty()})},n.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var i=this._pipelineMap.get(e.__pipeline.id),r=i.context,s=!t&&i.progressiveEnabled&&(!r||r.progressiveRender)&&e.__idxInPipeline>i.blockIndex,a=s?i.step:null,o=r&&r.modDataCount,l=o!=null?Math.ceil(o/a):null;return{step:a,modBy:l,modDataCount:o}}},n.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},n.prototype.updateStreamModes=function(e,t){var i=this._pipelineMap.get(e.uid),r=e.getData(),s=r.count(),a=i.progressiveEnabled&&t.incrementalPrepareRender&&s>=i.threshold,o=e.get("large")&&s>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?s:null;e.pipelineContext=i.context={progressiveRender:a,modDataCount:l,large:o}},n.prototype.restorePipelines=function(e){var t=this,i=t._pipelineMap=di();e.eachSeries(function(r){var s=r.getProgressive(),a=r.uid;i.set(a,{id:a,head:null,tail:null,threshold:r.getProgressiveThreshold(),progressiveEnabled:s&&!(r.preventIncremental&&r.preventIncremental()),blockIndex:-1,step:Math.round(s||700),count:0}),t._pipe(r,r.dataTask)})},n.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),i=this.api;tt(this._allHandlers,function(r){var s=e.get(r.uid)||e.set(r.uid,{}),a="";nu(!(r.reset&&r.overallReset),a),r.reset&&this._createSeriesStageTask(r,s,t,i),r.overallReset&&this._createOverallStageTask(r,s,t,i)},this)},n.prototype.prepareView=function(e,t,i,r){var s=e.renderTask,a=s.context;a.model=t,a.ecModel=i,a.api=r,s.__block=!e.incrementalPrepareRender,this._pipe(t,s)},n.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},n.prototype.performVisualTasks=function(e,t,i){this._performStageTasks(this._visualHandlers,e,t,i)},n.prototype._performStageTasks=function(e,t,i,r){r=r||{};var s=!1,a=this;tt(e,function(l,c){if(!(r.visualType&&r.visualType!==l.visualType)){var u=a._stageTaskMap.get(l.uid),d=u.seriesTaskMap,f=u.overallTask;if(f){var h,p=f.agentStubMap;p.each(function(v){o(r,v)&&(v.dirty(),h=!0)}),h&&f.dirty(),a.updatePayload(f,i);var m=a.getPerformArgs(f,r.block);p.each(function(v){v.perform(m)}),f.perform(m)&&(s=!0)}else d&&d.each(function(v,g){o(r,v)&&v.dirty();var _=a.getPerformArgs(v,r.block);_.skip=!l.performRawSeries&&t.isSeriesFiltered(v.context.model),a.updatePayload(v,i),v.perform(_)&&(s=!0)})}});function o(l,c){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(c.__pipeline.id))}this.unfinished=s||this.unfinished},n.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(i){t=i.dataTask.perform()||t}),this.unfinished=t||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},n.prototype.updatePayload=function(e,t){t!=="remain"&&(e.context.payload=t)},n.prototype._createSeriesStageTask=function(e,t,i,r){var s=this,a=t.seriesTaskMap,o=t.seriesTaskMap=di(),l=e.seriesType,c=e.getTargetSeries;e.createOnAllSeries?i.eachRawSeries(u):l?i.eachRawSeriesByType(l,u):c&&c(i,r).each(u);function u(d){var f=d.uid,h=o.set(f,a&&a.get(f)||yy({plan:bBe,reset:SBe,count:xBe}));h.context={model:d,ecModel:i,api:r,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:s},s._pipe(d,h)}},n.prototype._createOverallStageTask=function(e,t,i,r){var s=this,a=t.overallTask=t.overallTask||yy({reset:vBe});a.context={ecModel:i,api:r,overallReset:e.overallReset,scheduler:s};var o=a.agentStubMap,l=a.agentStubMap=di(),c=e.seriesType,u=e.getTargetSeries,d=!0,f=!1,h="";nu(!e.createOnAllSeries,h),c?i.eachRawSeriesByType(c,p):u?u(i,r).each(p):(d=!1,tt(i.getSeries(),p));function p(m){var v=m.uid,g=l.set(v,o&&o.get(v)||(f=!0,yy({reset:gBe,onDirty:_Be})));g.context={model:m,overallProgress:d},g.agent=a,g.__block=d,s._pipe(m,g)}f&&a.dirty()},n.prototype._pipe=function(e,t){var i=e.uid,r=this._pipelineMap.get(i);!r.head&&(r.head=t),r.tail&&r.tail.pipe(t),r.tail=t,t.__idxInPipeline=r.count++,t.__pipeline=r},n.wrapStageHandler=function(e,t){return Ri(e)&&(e={overallReset:e,seriesType:CBe(e)}),e.uid=BM("stageHandler"),t&&(e.visualType=t),e},n}();function vBe(n){n.overallReset(n.ecModel,n.api,n.payload)}function gBe(n){return n.overallProgress&&yBe}function yBe(){this.agent.dirty(),this.getDownstream().dirty()}function _Be(){this.agent&&this.agent.dirty()}function bBe(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function SBe(n){n.useClearVisual&&n.data.clearAllVisual();var e=n.resetDefines=Qs(n.reset(n.model,n.ecModel,n.api,n.payload));return e.length>1?hi(e,function(t,i){return pY(i)}):wBe}var wBe=pY(0);function pY(n){return function(e,t){var i=t.data,r=t.resetDefines[n];if(r&&r.dataEach)for(var s=e.start;s<e.end;s++)r.dataEach(i,s);else r&&r.progress&&r.progress(e,i)}}function xBe(n){return n.data.count()}function CBe(n){jx=null;try{n(A_,mY)}catch{}return jx}var A_={},mY={},jx;vY(A_,$X);vY(mY,GX);A_.eachSeriesByType=A_.eachRawSeriesByType=function(n){jx=n};A_.eachComponent=function(n){n.mainType==="series"&&n.subType&&(jx=n.subType)};function vY(n,e){for(var t in e.prototype)n[t]=ga}const gY=mBe;var BU=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const MBe={color:BU,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],BU]};var Hs="#B9B8CE",FU="#100C2A",IS=function(){return{axisLine:{lineStyle:{color:Hs}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},zU=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],yY={darkMode:!0,color:zU,backgroundColor:FU,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Hs}},textStyle:{color:Hs},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Hs}},dataZoom:{borderColor:"#71708A",textStyle:{color:Hs},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Hs}},timeline:{lineStyle:{color:Hs},label:{color:Hs},controlStyle:{color:Hs,borderColor:Hs}},calendar:{itemStyle:{color:FU},dayLabel:{color:Hs},monthLabel:{color:Hs},yearLabel:{color:Hs}},timeAxis:IS(),logAxis:IS(),valueAxis:IS(),categoryAxis:IS(),line:{symbol:"circle"},graph:{color:zU},gauge:{title:{color:Hs},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Hs},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};yY.categoryAxis.splitLine.show=!1;const TBe=yY;var ABe=function(){function n(){}return n.prototype.normalizeQuery=function(e){var t={},i={},r={};if(Rn(e)){var s=Fl(e);t.mainType=s.main||null,t.subType=s.sub||null}else{var a=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};tt(e,function(l,c){for(var u=!1,d=0;d<a.length;d++){var f=a[d],h=c.lastIndexOf(f);if(h>0&&h===c.length-f.length){var p=c.slice(0,h);p!=="data"&&(t.mainType=p,t[f.toLowerCase()]=l,u=!0)}}o.hasOwnProperty(c)&&(i[c]=l,u=!0),u||(r[c]=l)})}return{cptQuery:t,dataQuery:i,otherQuery:r}},n.prototype.filter=function(e,t){var i=this.eventInfo;if(!i)return!0;var r=i.targetEl,s=i.packedEvent,a=i.model,o=i.view;if(!a||!o)return!0;var l=t.cptQuery,c=t.dataQuery;return u(l,a,"mainType")&&u(l,a,"subType")&&u(l,a,"index","componentIndex")&&u(l,a,"name")&&u(l,a,"id")&&u(c,s,"name")&&u(c,s,"dataIndex")&&u(c,s,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(e,t.otherQuery,r,s));function u(d,f,h,p){return d[h]==null||f[p||h]===d[h]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n}(),XR=["symbol","symbolSize","symbolRotate","symbolOffset"],UU=XR.concat(["symbolKeepAspect"]),EBe={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData();if(n.legendIcon&&t.setVisual("legendIcon",n.legendIcon),!n.hasSymbolVisual)return;for(var i={},r={},s=!1,a=0;a<XR.length;a++){var o=XR[a],l=n.get(o);Ri(l)?(s=!0,r[o]=l):i[o]=l}if(i.symbol=i.symbol||n.defaultSymbol,t.setVisual(Nt({legendIcon:n.legendIcon||i.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},i)),e.isSeriesFiltered(n))return;var c=mr(r);function u(d,f){for(var h=n.getRawValue(f),p=n.getDataParams(f),m=0;m<c.length;m++){var v=c[m];d.setItemVisual(f,v,r[v](h,p))}}return{dataEach:s?u:null}}},IBe={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!n.hasSymbolVisual||e.isSeriesFiltered(n))return;var t=n.getData();function i(r,s){for(var a=r.getItemModel(s),o=0;o<UU.length;o++){var l=UU[o],c=a.getShallow(l,!0);c!=null&&r.setItemVisual(s,l,c)}}return{dataEach:t.hasItemOption?i:null}}};function RBe(n,e,t){switch(t){case"color":var i=n.getItemVisual(e,"style");return i[n.getVisual("drawType")];case"opacity":return n.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(e,t)}}function PBe(n,e){switch(e){case"color":var t=n.getVisual("style");return t[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(e)}}function DBe(n,e){function t(i,r){var s=[];return i.eachComponent({mainType:"series",subType:n,query:r},function(a){s.push(a.seriesIndex)}),s}tt([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(i){e(i[0],function(r,s,a){r=Nt({},r),a.dispatchAction(Nt(r,{type:i[1],seriesIndex:t(s,r)}))})})}function Pp(n,e,t,i,r){var s=n+e;t.isSilent(s)||i.eachComponent({mainType:"series",subType:"pie"},function(a){for(var o=a.seriesIndex,l=a.option.selectedMap,c=r.selected,u=0;u<c.length;u++)if(c[u].seriesIndex===o){var d=a.getData(),f=bb(d,r.fromActionPayload);t.trigger(s,{type:s,seriesId:a.id,name:hn(f)?d.getName(f[0]):d.getName(f),selected:Rn(l)?l:Nt({},l)})}})}function LBe(n,e,t){n.on("selectchanged",function(i){var r=t.getModel();i.isFromClick?(Pp("map","selectchanged",e,r,i),Pp("pie","selectchanged",e,r,i)):i.fromAction==="select"?(Pp("map","selected",e,r,i),Pp("pie","selected",e,r,i)):i.fromAction==="unselect"&&(Pp("map","unselected",e,r,i),Pp("pie","unselected",e,r,i))})}function W0(n,e,t){for(var i;n&&!(e(n)&&(i=n,t));)n=n.__hostTarget||n.parent;return i}var kBe=Math.round(Math.random()*9),OBe=typeof Object.defineProperty=="function",NBe=function(){function n(){this._id="__ec_inner_"+kBe++}return n.prototype.get=function(e){return this._guard(e)[this._id]},n.prototype.set=function(e,t){var i=this._guard(e);return OBe?Object.defineProperty(i,this._id,{value:t,enumerable:!1,configurable:!0}):i[this._id]=t,this},n.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},n.prototype.has=function(e){return!!this._guard(e)[this._id]},n.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},n}();const BBe=NBe;var FBe=Ki.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,i=e.cy,r=e.width/2,s=e.height/2;n.moveTo(t,i-s),n.lineTo(t+r,i+s),n.lineTo(t-r,i+s),n.closePath()}}),zBe=Ki.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,i=e.cy,r=e.width/2,s=e.height/2;n.moveTo(t,i-s),n.lineTo(t+r,i),n.lineTo(t,i+s),n.lineTo(t-r,i),n.closePath()}}),UBe=Ki.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.x,i=e.y,r=e.width/5*3,s=Math.max(r,e.height),a=r/2,o=a*a/(s-a),l=i-s+a+o,c=Math.asin(o/a),u=Math.cos(c)*a,d=Math.sin(c),f=Math.cos(c),h=a*.6,p=a*.7;n.moveTo(t-u,l+o),n.arc(t,l,a,Math.PI-c,Math.PI*2+c),n.bezierCurveTo(t+u-d*h,l+o+f*h,t,i-p,t,i),n.bezierCurveTo(t,i-p,t-u+d*h,l+o+f*h,t-u,l+o),n.closePath()}}),HBe=Ki.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.height,i=e.width,r=e.x,s=e.y,a=i/3*2;n.moveTo(r,s),n.lineTo(r+a,s+t),n.lineTo(r,s+t/4*3),n.lineTo(r-a,s+t),n.lineTo(r,s),n.closePath()}}),VBe={line:xb,rect:ya,roundRect:ya,square:ya,circle:uk,diamond:zBe,pin:UBe,arrow:HBe,triangle:FBe},$Be={line:function(n,e,t,i,r){r.x1=n,r.y1=e+i/2,r.x2=n+t,r.y2=e+i/2},rect:function(n,e,t,i,r){r.x=n,r.y=e,r.width=t,r.height=i},roundRect:function(n,e,t,i,r){r.x=n,r.y=e,r.width=t,r.height=i,r.r=Math.min(t,i)/4},square:function(n,e,t,i,r){var s=Math.min(t,i);r.x=n,r.y=e,r.width=s,r.height=s},circle:function(n,e,t,i,r){r.cx=n+t/2,r.cy=e+i/2,r.r=Math.min(t,i)/2},diamond:function(n,e,t,i,r){r.cx=n+t/2,r.cy=e+i/2,r.width=t,r.height=i},pin:function(n,e,t,i,r){r.x=n+t/2,r.y=e+i/2,r.width=t,r.height=i},arrow:function(n,e,t,i,r){r.x=n+t/2,r.y=e+i/2,r.width=t,r.height=i},triangle:function(n,e,t,i,r){r.cx=n+t/2,r.cy=e+i/2,r.width=t,r.height=i}},YR={};tt(VBe,function(n,e){YR[e]=new n});var GBe=Ki.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,e,t){var i=_q(n,e,t),r=this.shape;return r&&r.symbolType==="pin"&&e.position==="inside"&&(i.y=t.y+t.height*.4),i},buildPath:function(n,e,t){var i=e.symbolType;if(i!=="none"){var r=YR[i];r||(i="rect",r=YR[i]),$Be[i](e.x,e.y,e.width,e.height,r.shape),r.buildPath(n,r.shape,t)}}});function WBe(n,e){if(this.type!=="image"){var t=this.style;this.__isEmptyBrush?(t.stroke=n,t.fill=e||"#fff",t.lineWidth=2):this.shape.symbolType==="line"?t.stroke=n:t.fill=n,this.markRedraw()}}function Ik(n,e,t,i,r,s,a){var o=n.indexOf("empty")===0;o&&(n=n.substr(5,1).toLowerCase()+n.substr(6));var l;return n.indexOf("image://")===0?l=xX(n.slice(8),new Oi(e,t,i,r),a?"center":"cover"):n.indexOf("path://")===0?l=hk(n.slice(7),{},new Oi(e,t,i,r),a?"center":"cover"):l=new GBe({shape:{symbolType:n,x:e,y:t,width:i,height:r}}),l.__isEmptyBrush=o,l.setColor=WBe,s&&l.setColor(s),l}function KBe(n,e){if(n!=null)return hn(n)||(n=[n,n]),[Dr(n[0],e[0])||0,Dr(ui(n[1],n[0]),e[1])||0]}function hh(n){return isFinite(n)}function qBe(n,e,t){var i=e.x==null?0:e.x,r=e.x2==null?1:e.x2,s=e.y==null?0:e.y,a=e.y2==null?0:e.y2;e.global||(i=i*t.width+t.x,r=r*t.width+t.x,s=s*t.height+t.y,a=a*t.height+t.y),i=hh(i)?i:0,r=hh(r)?r:1,s=hh(s)?s:0,a=hh(a)?a:0;var o=n.createLinearGradient(i,s,r,a);return o}function XBe(n,e,t){var i=t.width,r=t.height,s=Math.min(i,r),a=e.x==null?.5:e.x,o=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(a=a*i+t.x,o=o*r+t.y,l=l*s),a=hh(a)?a:.5,o=hh(o)?o:.5,l=l>=0&&hh(l)?l:.5;var c=n.createRadialGradient(a,o,0,a,o,l);return c}function jR(n,e,t){for(var i=e.type==="radial"?XBe(n,e,t):qBe(n,e,t),r=e.colorStops,s=0;s<r.length;s++)i.addColorStop(r[s].offset,r[s].color);return i}function YBe(n,e){if(n===e||!n&&!e)return!1;if(!n||!e||n.length!==e.length)return!0;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!0;return!1}function RS(n){return parseInt(n,10)}function PS(n,e,t){var i=["width","height"][e],r=["clientWidth","clientHeight"][e],s=["paddingLeft","paddingTop"][e],a=["paddingRight","paddingBottom"][e];if(t[i]!=null&&t[i]!=="auto")return parseFloat(t[i]);var o=document.defaultView.getComputedStyle(n);return(n[r]||RS(o[i])||RS(n.style[i]))-(RS(o[s])||0)-(RS(o[a])||0)|0}function jBe(n,e){return!n||n==="solid"||!(e>0)?null:n==="dashed"?[4*e,2*e]:n==="dotted"?[e]:vr(n)?[n]:hn(n)?n:null}function _Y(n){var e=n.style,t=e.lineDash&&e.lineWidth>0&&jBe(e.lineDash,e.lineWidth),i=e.lineDashOffset;if(t){var r=e.strokeNoScale&&n.getLineScale?n.getLineScale():1;r&&r!==1&&(t=hi(t,function(s){return s/r}),i/=r)}return[t,i]}var QBe=new Wh(!0);function Qx(n){var e=n.stroke;return!(e==null||e==="none"||!(n.lineWidth>0))}function HU(n){return typeof n=="string"&&n!=="none"}function Zx(n){var e=n.fill;return e!=null&&e!=="none"}function VU(n,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.fillOpacity*e.opacity,n.fill(),n.globalAlpha=t}else n.fill()}function $U(n,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.strokeOpacity*e.opacity,n.stroke(),n.globalAlpha=t}else n.stroke()}function QR(n,e,t){var i=Lq(e.image,e.__image,t);if(PM(i)){var r=n.createPattern(i,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&r&&r.setTransform){var s=new DOMMatrix;s.translateSelf(e.x||0,e.y||0),s.rotateSelf(0,0,(e.rotation||0)*$Pe),s.scaleSelf(e.scaleX||1,e.scaleY||1),r.setTransform(s)}return r}}function ZBe(n,e,t,i){var r,s=Qx(t),a=Zx(t),o=t.strokePercent,l=o<1,c=!e.path;(!e.silent||l)&&c&&e.createPathProxy();var u=e.path||QBe,d=e.__dirty;if(!i){var f=t.fill,h=t.stroke,p=a&&!!f.colorStops,m=s&&!!h.colorStops,v=a&&!!f.image,g=s&&!!h.image,_=void 0,y=void 0,S=void 0,w=void 0,x=void 0;(p||m)&&(x=e.getBoundingRect()),p&&(_=d?jR(n,f,x):e.__canvasFillGradient,e.__canvasFillGradient=_),m&&(y=d?jR(n,h,x):e.__canvasStrokeGradient,e.__canvasStrokeGradient=y),v&&(S=d||!e.__canvasFillPattern?QR(n,f,e):e.__canvasFillPattern,e.__canvasFillPattern=S),g&&(w=d||!e.__canvasStrokePattern?QR(n,h,e):e.__canvasStrokePattern,e.__canvasStrokePattern=S),p?n.fillStyle=_:v&&(S?n.fillStyle=S:a=!1),m?n.strokeStyle=y:g&&(w?n.strokeStyle=w:s=!1)}var T=e.getGlobalScale();u.setScale(T[0],T[1],e.segmentIgnoreThreshold);var C,M;n.setLineDash&&t.lineDash&&(r=_Y(e),C=r[0],M=r[1]);var A=!0;(c||d&Mm)&&(u.setDPR(n.dpr),l?u.setContext(null):(u.setContext(n),A=!1),u.reset(),e.buildPath(u,e.shape,i),u.toStatic(),e.pathUpdated()),A&&u.rebuildPath(n,l?o:1),C&&(n.setLineDash(C),n.lineDashOffset=M),i||(t.strokeFirst?(s&&$U(n,t),a&&VU(n,t)):(a&&VU(n,t),s&&$U(n,t))),C&&n.setLineDash([])}function JBe(n,e,t){var i=e.__image=Lq(t.image,e.__image,e,e.onload);if(!(!i||!PM(i))){var r=t.x||0,s=t.y||0,a=e.getWidth(),o=e.getHeight(),l=i.width/i.height;if(a==null&&o!=null?a=o*l:o==null&&a!=null?o=a/l:a==null&&o==null&&(a=i.width,o=i.height),t.sWidth&&t.sHeight){var c=t.sx||0,u=t.sy||0;n.drawImage(i,c,u,t.sWidth,t.sHeight,r,s,a,o)}else if(t.sx&&t.sy){var c=t.sx,u=t.sy,d=a-c,f=o-u;n.drawImage(i,c,u,d,f,r,s,a,o)}else n.drawImage(i,r,s,a,o)}}function eFe(n,e,t){var i,r=t.text;if(r!=null&&(r+=""),r){n.font=t.font||Gh,n.textAlign=t.textAlign,n.textBaseline=t.textBaseline;var s=void 0,a=void 0;n.setLineDash&&t.lineDash&&(i=_Y(e),s=i[0],a=i[1]),s&&(n.setLineDash(s),n.lineDashOffset=a),t.strokeFirst?(Qx(t)&&n.strokeText(r,t.x,t.y),Zx(t)&&n.fillText(r,t.x,t.y)):(Zx(t)&&n.fillText(r,t.x,t.y),Qx(t)&&n.strokeText(r,t.x,t.y)),s&&n.setLineDash([])}}var GU=["shadowBlur","shadowOffsetX","shadowOffsetY"],WU=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bY(n,e,t,i,r){var s=!1;if(!i&&(t=t||{},e===t))return!1;if(i||e.opacity!==t.opacity){da(n,r),s=!0;var a=Math.max(Math.min(e.opacity,1),0);n.globalAlpha=isNaN(a)?Ih.opacity:a}(i||e.blend!==t.blend)&&(s||(da(n,r),s=!0),n.globalCompositeOperation=e.blend||Ih.blend);for(var o=0;o<GU.length;o++){var l=GU[o];(i||e[l]!==t[l])&&(s||(da(n,r),s=!0),n[l]=n.dpr*(e[l]||0))}return(i||e.shadowColor!==t.shadowColor)&&(s||(da(n,r),s=!0),n.shadowColor=e.shadowColor||Ih.shadowColor),s}function KU(n,e,t,i,r){var s=E_(e,r.inHover),a=i?null:t&&E_(t,r.inHover)||{};if(s===a)return!1;var o=bY(n,s,a,i,r);if((i||s.fill!==a.fill)&&(o||(da(n,r),o=!0),HU(s.fill)&&(n.fillStyle=s.fill)),(i||s.stroke!==a.stroke)&&(o||(da(n,r),o=!0),HU(s.stroke)&&(n.strokeStyle=s.stroke)),(i||s.opacity!==a.opacity)&&(o||(da(n,r),o=!0),n.globalAlpha=s.opacity==null?1:s.opacity),e.hasStroke()){var l=s.lineWidth,c=l/(s.strokeNoScale&&e.getLineScale?e.getLineScale():1);n.lineWidth!==c&&(o||(da(n,r),o=!0),n.lineWidth=c)}for(var u=0;u<WU.length;u++){var d=WU[u],f=d[0];(i||s[f]!==a[f])&&(o||(da(n,r),o=!0),n[f]=s[f]||d[1])}return o}function tFe(n,e,t,i,r){return bY(n,E_(e,r.inHover),t&&E_(t,r.inHover),i,r)}function SY(n,e){var t=e.transform,i=n.dpr||1;t?n.setTransform(i*t[0],i*t[1],i*t[2],i*t[3],i*t[4],i*t[5]):n.setTransform(i,0,0,i,0,0)}function nFe(n,e,t){for(var i=!1,r=0;r<n.length;r++){var s=n[r];i=i||s.isZeroArea(),SY(e,s),e.beginPath(),s.buildPath(e,s.shape),e.clip()}t.allClipped=i}function iFe(n,e){return n&&e?n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]||n[4]!==e[4]||n[5]!==e[5]:!(!n&&!e)}var qU=1,XU=2,YU=3,jU=4;function rFe(n){var e=Zx(n),t=Qx(n);return!(n.lineDash||!(+e^+t)||e&&typeof n.fill!="string"||t&&typeof n.stroke!="string"||n.strokePercent<1||n.strokeOpacity<1||n.fillOpacity<1)}function da(n,e){e.batchFill&&n.fill(),e.batchStroke&&n.stroke(),e.batchFill="",e.batchStroke=""}function E_(n,e){return e&&n.__hoverStyle||n.style}function wY(n,e){ph(n,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function ph(n,e,t,i){var r=e.transform;if(!e.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1)){e.__dirty&=~Oa,e.__isRendered=!1;return}var s=e.__clipPaths,a=t.prevElClipPaths,o=!1,l=!1;if((!a||YBe(s,a))&&(a&&a.length&&(da(n,t),n.restore(),l=o=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),s&&s.length&&(da(n,t),n.save(),nFe(s,n,t),o=!0),t.prevElClipPaths=s),t.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var c=t.prevEl;c||(l=o=!0);var u=e instanceof Ki&&e.autoBatch&&rFe(e.style);o||iFe(r,c.transform)?(da(n,t),SY(n,e)):u||da(n,t);var d=E_(e,t.inHover);e instanceof Ki?(t.lastDrawType!==qU&&(l=!0,t.lastDrawType=qU),KU(n,e,c,l,t),(!u||!t.batchFill&&!t.batchStroke)&&n.beginPath(),ZBe(n,e,d,u),u&&(t.batchFill=d.fill||"",t.batchStroke=d.stroke||"")):e instanceof PR?(t.lastDrawType!==YU&&(l=!0,t.lastDrawType=YU),KU(n,e,c,l,t),eFe(n,e,d)):e instanceof wg?(t.lastDrawType!==XU&&(l=!0,t.lastDrawType=XU),tFe(n,e,c,l,t),JBe(n,e,d)):e.getTemporalDisplayables&&(t.lastDrawType!==jU&&(l=!0,t.lastDrawType=jU),sFe(n,e,t)),u&&i&&da(n,t),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),t.prevEl=e,e.__dirty=0,e.__isRendered=!0}function sFe(n,e,t){var i=e.getDisplayables(),r=e.getTemporalDisplayables();n.save();var s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover},a,o;for(a=e.getCursor(),o=i.length;a<o;a++){var l=i[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),ph(n,l,s,a===o-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),s.prevEl=l}for(var c=0,u=r.length;c<u;c++){var l=r[c];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),ph(n,l,s,c===u-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),s.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,n.restore()}var FA=new BBe,QU=new _b(100),ZU=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function ZR(n,e){if(n==="none")return null;var t=e.getDevicePixelRatio(),i=e.getZr(),r=i.painter.type==="svg";n.dirty&&FA.delete(n);var s=FA.get(n);if(s)return s;var a=nr(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var o={repeat:"repeat"};return l(o),o.rotation=a.rotation,o.scaleX=o.scaleY=r?1:1/t,FA.set(n,o),n.dirty=!1,o;function l(c){for(var u=[t],d=!0,f=0;f<ZU.length;++f){var h=a[ZU[f]];if(h!=null&&!hn(h)&&!Rn(h)&&!vr(h)&&typeof h!="boolean"){d=!1;break}u.push(h)}var p;if(d){p=u.join(",")+(r?"-svg":"");var m=QU.get(p);m&&(r?c.svgElement=m:c.image=m)}var v=CY(a.dashArrayX),g=aFe(a.dashArrayY),_=xY(a.symbol),y=oFe(v),S=MY(g),w=!r&&bg.createCanvas(),x=r&&{tag:"g",attrs:{},key:"dcl",children:[]},T=M(),C;w&&(w.width=T.width*t,w.height=T.height*t,C=w.getContext("2d")),A(),d&&QU.put(p,w||x),c.image=w,c.svgElement=x,c.svgWidth=T.width,c.svgHeight=T.height;function M(){for(var E=1,I=0,P=y.length;I<P;++I)E=mz(E,y[I]);for(var D=1,I=0,P=_.length;I<P;++I)D=mz(D,_[I].length);E*=D;var L=S*y.length*_.length;return{width:Math.max(1,Math.min(E,a.maxTileWidth)),height:Math.max(1,Math.min(L,a.maxTileHeight))}}function A(){C&&(C.clearRect(0,0,w.width,w.height),a.backgroundColor&&(C.fillStyle=a.backgroundColor,C.fillRect(0,0,w.width,w.height)));for(var E=0,I=0;I<g.length;++I)E+=g[I];if(E<=0)return;for(var P=-S,D=0,L=0,R=0;P<T.height;){if(D%2===0){for(var B=L/2%_.length,k=0,O=0,U=0;k<T.width*2;){for(var G=0,I=0;I<v[R].length;++I)G+=v[R][I];if(G<=0)break;if(O%2===0){var q=(1-a.symbolSize)*.5,W=k+v[R][O]*q,Y=P+g[D]*q,J=v[R][O]*a.symbolSize,Z=g[D]*a.symbolSize,ee=U/2%_[B].length;me(W,Y,J,Z,_[B][ee])}k+=v[R][O],++U,++O,O===v[R].length&&(O=0)}++R,R===v.length&&(R=0)}P+=g[D],++L,++D,D===g.length&&(D=0)}function me(ye,Te,Ee,H,Q){var j=r?1:t,Pe=Ik(Q,ye*j,Te*j,Ee*j,H*j,a.color,a.symbolKeepAspect);if(r){var we=i.painter.renderOneToVNode(Pe);we&&x.children.push(we)}else wY(C,Pe)}}}}function xY(n){if(!n||n.length===0)return[["rect"]];if(Rn(n))return[[n]];for(var e=!0,t=0;t<n.length;++t)if(!Rn(n[t])){e=!1;break}if(e)return xY([n]);for(var i=[],t=0;t<n.length;++t)Rn(n[t])?i.push([n[t]]):i.push(n[t]);return i}function CY(n){if(!n||n.length===0)return[[0,0]];if(vr(n)){var e=Math.ceil(n);return[[e,e]]}for(var t=!0,i=0;i<n.length;++i)if(!vr(n[i])){t=!1;break}if(t)return CY([n]);for(var r=[],i=0;i<n.length;++i)if(vr(n[i])){var e=Math.ceil(n[i]);r.push([e,e])}else{var e=hi(n[i],function(o){return Math.ceil(o)});e.length%2===1?r.push(e.concat(e)):r.push(e)}return r}function aFe(n){if(!n||typeof n=="object"&&n.length===0)return[0,0];if(vr(n)){var e=Math.ceil(n);return[e,e]}var t=hi(n,function(i){return Math.ceil(i)});return n.length%2?t.concat(t):t}function oFe(n){return hi(n,function(e){return MY(e)})}function MY(n){for(var e=0,t=0;t<n.length;++t)e+=n[t];return n.length%2===1?e*2:e}function lFe(n,e){n.eachRawSeries(function(t){if(!n.isSeriesFiltered(t)){var i=t.getData();i.hasItemVisual()&&i.each(function(a){var o=i.getItemVisual(a,"decal");if(o){var l=i.ensureUniqueItemVisual(a,"style");l.decal=ZR(o,e)}});var r=i.getVisual("decal");if(r){var s=i.getVisual("style");s.decal=ZR(r,e)}}})}var cFe=new ac;const Zo=cFe;var TY={};function uFe(n,e){TY[n]=e}function dFe(n){return TY[n]}var fFe=1,hFe=800,pFe=900,mFe=1e3,vFe=2e3,gFe=5e3,AY=1e3,yFe=1100,Rk=2e3,EY=3e3,_Fe=4e3,VM=4500,bFe=4600,SFe=5e3,wFe=6e3,IY=7e3,xFe={PROCESSOR:{FILTER:mFe,SERIES_FILTER:hFe,STATISTIC:gFe},VISUAL:{LAYOUT:AY,PROGRESSIVE_LAYOUT:yFe,GLOBAL:Rk,CHART:EY,POST_CHART_LAYOUT:bFe,COMPONENT:_Fe,BRUSH:SFe,CHART_ITEM:VM,ARIA:wFe,DECAL:IY}},vs="__flagInMainProcess",oa="__pendingUpdate",zA="__needsUpdateStatus",JU=/^[a-zA-Z0-9_]+$/,UA="__connectUpdateStatus",eH=0,CFe=1,MFe=2;function RY(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.isDisposed()){this.id;return}return DY(this,n,e)}}function PY(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return DY(this,n,e)}}function DY(n,e,t){return t[0]=t[0]&&t[0].toLowerCase(),ac.prototype[e].apply(n,t)}var LY=function(n){Mn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(ac),kY=LY.prototype;kY.on=PY("on");kY.off=PY("off");var Dp,HA,DS,Eu,VA,$A,GA,d0,f0,tH,nH,WA,iH,LS,rH,OY,Qa,sH,NY=function(n){Mn(e,n);function e(t,i,r){var s=n.call(this,new ABe)||this;s._chartsViews=[],s._chartsMap={},s._componentsViews=[],s._componentsMap={},s._pendingActions=[],r=r||{},Rn(i)&&(i=BY[i]),s._dom=t;var a="canvas",o="auto",l=!1,c=s._zr=fz(t,{renderer:r.renderer||a,devicePixelRatio:r.devicePixelRatio,width:r.width,height:r.height,ssr:r.ssr,useDirtyRect:ui(r.useDirtyRect,l),useCoarsePointer:ui(r.useCoarsePointer,o),pointerSize:r.pointerSize});s._ssr=r.ssr,s._throttledZrFlush=Ek(Gi(c.flush,c),17),i=vi(i),i&&qX(i,!0),s._theme=i,s._locale=MOe(r.locale||PX),s._coordSysMgr=new WX;var u=s._api=rH(s);function d(f,h){return f.__prio-h.__prio}return x1(eC,d),x1(JR,d),s._scheduler=new gY(s,u,JR,eC),s._messageCenter=new LY,s._initEvents(),s.resize=Gi(s.resize,s),c.animation.on("frame",s._onframe,s),tH(c,s),nH(c,s),uR(s),s}return e.prototype._onframe=function(){if(!this._disposed){sH(this);var t=this._scheduler;if(this[oa]){var i=this[oa].silent;this[vs]=!0;try{Dp(this),Eu.update.call(this,null,this[oa].updateParams)}catch(l){throw this[vs]=!1,this[oa]=null,l}this._zr.flush(),this[vs]=!1,this[oa]=null,d0.call(this,i),f0.call(this,i)}else if(t.unfinished){var r=fFe,s=this._model,a=this._api;t.unfinished=!1;do{var o=+new Date;t.performSeriesTasks(s),t.performDataProcessorTasks(s),$A(this,s),t.performVisualTasks(s),LS(this,this._model,a,"remain",{}),r-=+new Date-o}while(r>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,i,r){if(!this[vs]){if(this._disposed){this.id;return}var s,a,o;if(Ln(i)&&(r=i.lazyUpdate,s=i.silent,a=i.replaceMerge,o=i.transition,i=i.notMerge),this[vs]=!0,!this._model||i){var l=new cNe(this._api),c=this._theme,u=this._model=new $X;u.scheduler=this._scheduler,u.ssr=this._ssr,u.init(null,null,null,c,this._locale,l)}this._model.setOption(t,{replaceMerge:a},eP);var d={seriesTransition:o,optionChanged:!0};if(r)this[oa]={silent:s,updateParams:d},this[vs]=!1,this.getZr().wakeUp();else{try{Dp(this),Eu.update.call(this,null,d)}catch(f){throw this[oa]=null,this[vs]=!1,f}this._ssr||this._zr.flush(),this[oa]=null,this[vs]=!1,d0.call(this,s),f0.call(this,s)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Qn.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){t=t||{};var i=this._zr.painter;return i.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){t=t||{};var i=this._zr.painter;return i.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){if(Qn.svgSupported){var t=this._zr,i=t.storage.getDisplayList();return tt(i,function(r){r.stopAnimation(null,!0)}),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}t=t||{};var i=t.excludeComponents,r=this._model,s=[],a=this;tt(i,function(l){r.eachComponent({mainType:l},function(c){var u=a._componentsMap[c.__viewId];u.group.ignore||(s.push(u),u.group.ignore=!0)})});var o=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return tt(s,function(l){l.group.ignore=!1}),o},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var i=t.type==="svg",r=this.group,s=Math.min,a=Math.max,o=1/0;if(aH[r]){var l=o,c=o,u=-o,d=-o,f=[],h=t&&t.pixelRatio||this.getDevicePixelRatio();tt(by,function(y,S){if(y.group===r){var w=i?y.getZr().painter.getSvgDom().innerHTML:y.renderToCanvas(vi(t)),x=y.getDom().getBoundingClientRect();l=s(x.left,l),c=s(x.top,c),u=a(x.right,u),d=a(x.bottom,d),f.push({dom:w,left:x.left,top:x.top})}}),l*=h,c*=h,u*=h,d*=h;var p=u-l,m=d-c,v=bg.createCanvas(),g=fz(v,{renderer:i?"svg":"canvas"});if(g.resize({width:p,height:m}),i){var _="";return tt(f,function(y){var S=y.left-l,w=y.top-c;_+='<g transform="translate('+S+","+w+')">'+y.dom+"</g>"}),g.painter.getSvgRoot().innerHTML=_,t.connectedBackgroundColor&&g.painter.setBackgroundColor(t.connectedBackgroundColor),g.refreshImmediately(),g.painter.toDataURL()}else return t.connectedBackgroundColor&&g.add(new ya({shape:{x:0,y:0,width:p,height:m},style:{fill:t.connectedBackgroundColor}})),tt(f,function(y){var S=new wg({style:{x:y.left*h-l,y:y.top*h-c,image:y.dom}});g.add(S)}),g.refreshImmediately(),v.toDataURL("image/"+(t&&t.type||"png"))}else return this.getDataURL(t)},e.prototype.convertToPixel=function(t,i){return VA(this,"convertToPixel",t,i)},e.prototype.convertFromPixel=function(t,i){return VA(this,"convertFromPixel",t,i)},e.prototype.containPixel=function(t,i){if(this._disposed){this.id;return}var r=this._model,s,a=fA(r,t);return tt(a,function(o,l){l.indexOf("Models")>=0&&tt(o,function(c){var u=c.coordinateSystem;if(u&&u.containPoint)s=s||!!u.containPoint(i);else if(l==="seriesModels"){var d=this._chartsMap[c.__viewId];d&&d.containPoint&&(s=s||d.containPoint(i,c))}},this)},this),!!s},e.prototype.getVisual=function(t,i){var r=this._model,s=fA(r,t,{defaultMainType:"series"}),a=s.seriesModel,o=a.getData(),l=s.hasOwnProperty("dataIndexInside")?s.dataIndexInside:s.hasOwnProperty("dataIndex")?o.indexOfRawIndex(s.dataIndex):null;return l!=null?RBe(o,l,i):PBe(o,i)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;tt(TFe,function(i){var r=function(s){var a=t.getModel(),o=s.target,l,c=i==="globalout";if(c?l={}:o&&W0(o,function(p){var m=or(p);if(m&&m.dataIndex!=null){var v=m.dataModel||a.getSeriesByIndex(m.seriesIndex);return l=v&&v.getDataParams(m.dataIndex,m.dataType,o)||{},!0}else if(m.eventData)return l=Nt({},m.eventData),!0},!0),l){var u=l.componentType,d=l.componentIndex;(u==="markLine"||u==="markPoint"||u==="markArea")&&(u="series",d=l.seriesIndex);var f=u&&d!=null&&a.getComponent(u,d),h=f&&t[f.mainType==="series"?"_chartsMap":"_componentsMap"][f.__viewId];l.event=s,l.type=i,t._$eventProcessor.eventInfo={targetEl:o,packedEvent:l,model:f,view:h},t.trigger(i,l)}};r.zrEventfulCallAtLast=!0,t._zr.on(i,r,t)}),tt(_y,function(i,r){t._messageCenter.on(r,function(s){this.trigger(r,s)},t)}),tt(["selectchanged"],function(i){t._messageCenter.on(i,function(r){this.trigger(i,r)},t)}),LBe(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var t=this.getDom();t&&Rq(this.getDom(),Dk,"");var i=this,r=i._api,s=i._model;tt(i._componentsViews,function(a){a.dispose(s,r)}),tt(i._chartsViews,function(a){a.dispose(s,r)}),i._zr.dispose(),i._dom=i._model=i._chartsMap=i._componentsMap=i._chartsViews=i._componentsViews=i._scheduler=i._api=i._zr=i._throttledZrFlush=i._theme=i._coordSysMgr=i._messageCenter=null,delete by[i.id]},e.prototype.resize=function(t){if(!this[vs]){if(this._disposed){this.id;return}this._zr.resize(t);var i=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!i){var r=i.resetOption("media"),s=t&&t.silent;this[oa]&&(s==null&&(s=this[oa].silent),r=!0,this[oa]=null),this[vs]=!0;try{r&&Dp(this),Eu.update.call(this,{type:"resize",animation:Nt({duration:0},t&&t.animation)})}catch(a){throw this[vs]=!1,a}this[vs]=!1,d0.call(this,s),f0.call(this,s)}}},e.prototype.showLoading=function(t,i){if(this._disposed){this.id;return}if(Ln(t)&&(i=t,t=""),t=t||"default",this.hideLoading(),!!tP[t]){var r=tP[t](this._api,i),s=this._zr;this._loadingFX=r,s.add(r)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var i=Nt({},t);return i.type=_y[t.type],i},e.prototype.dispatchAction=function(t,i){if(this._disposed){this.id;return}if(Ln(i)||(i={silent:!!i}),!!Jx[t.type]&&this._model){if(this[vs]){this._pendingActions.push(t);return}var r=i.silent;GA.call(this,t,r);var s=i.flush;s?this._zr.flush():s!==!1&&Qn.browser.weChat&&this._throttledZrFlush(),d0.call(this,r),f0.call(this,r)}},e.prototype.updateLabelLayout=function(){Zo.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var i=t.seriesIndex,r=this.getModel(),s=r.getSeriesByIndex(i);s.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){Dp=function(d){var f=d._scheduler;f.restorePipelines(d._model),f.prepareStageTasks(),HA(d,!0),HA(d,!1),f.plan()},HA=function(d,f){for(var h=d._model,p=d._scheduler,m=f?d._componentsViews:d._chartsViews,v=f?d._componentsMap:d._chartsMap,g=d._zr,_=d._api,y=0;y<m.length;y++)m[y].__alive=!1;f?h.eachComponent(function(x,T){x!=="series"&&S(T)}):h.eachSeries(S);function S(x){var T=x.__requireNewView;x.__requireNewView=!1;var C="_ec_"+x.id+"_"+x.type,M=!T&&v[C];if(!M){var A=Fl(x.type),E=f?Hd.getClass(A.main,A.sub):lv.getClass(A.sub);M=new E,M.init(h,_),v[C]=M,m.push(M),g.add(M.group)}x.__viewId=M.__id=C,M.__alive=!0,M.__model=x,M.group.__ecComponentInfo={mainType:x.mainType,index:x.componentIndex},!f&&p.prepareView(M,x,h,_)}for(var y=0;y<m.length;){var w=m[y];w.__alive?y++:(!f&&w.renderTask.dispose(),g.remove(w.group),w.dispose(h,_),m.splice(y,1),v[w.__id]===w&&delete v[w.__id],w.__id=w.group.__ecComponentInfo=null)}},DS=function(d,f,h,p,m){var v=d._model;if(v.setUpdatePayload(h),!p){tt([].concat(d._componentsViews).concat(d._chartsViews),w);return}var g={};g[p+"Id"]=h[p+"Id"],g[p+"Index"]=h[p+"Index"],g[p+"Name"]=h[p+"Name"];var _={mainType:p,query:g};m&&(_.subType=m);var y=h.excludeSeriesId,S;y!=null&&(S=di(),tt(Qs(y),function(x){var T=Wl(x,null);T!=null&&S.set(T,!0)})),v&&v.eachComponent(_,function(x){var T=S&&S.get(x.id)!=null;if(!T)if(Vz(h))if(x instanceof T_)h.type===Rh&&!h.notBlur&&!x.get(["emphasis","disabled"])&&X3e(x,h,d._api);else{var C=ck(x.mainType,x.componentIndex,h.name,d._api),M=C.focusSelf,A=C.dispatchers;h.type===Rh&&M&&!h.notBlur&&OR(x.mainType,x.componentIndex,d._api),A&&tt(A,function(E){h.type===Rh?DR(E):LR(E)})}else FR(h)&&x instanceof T_&&(Q3e(x,h,d._api),Uz(x),Qa(d))},d),v&&v.eachComponent(_,function(x){var T=S&&S.get(x.id)!=null;T||w(d[p==="series"?"_chartsMap":"_componentsMap"][x.__viewId])},d);function w(x){x&&x.__alive&&x[f]&&x[f](x.__model,v,d._api,h)}},Eu={prepareAndUpdate:function(d){Dp(this),Eu.update.call(this,d,{optionChanged:d.newOption!=null})},update:function(d,f){var h=this._model,p=this._api,m=this._zr,v=this._coordSysMgr,g=this._scheduler;if(h){h.setUpdatePayload(d),g.restoreData(h,d),g.performSeriesTasks(h),v.create(h,p),g.performDataProcessorTasks(h,d),$A(this,h),v.update(h,p),t(h),g.performVisualTasks(h,d),WA(this,h,p,d,f);var _=h.get("backgroundColor")||"transparent",y=h.get("darkMode");m.setBackgroundColor(_),y!=null&&y!=="auto"&&m.setDarkMode(y),Zo.trigger("afterupdate",h,p)}},updateTransform:function(d){var f=this,h=this._model,p=this._api;if(h){h.setUpdatePayload(d);var m=[];h.eachComponent(function(g,_){if(g!=="series"){var y=f.getViewOfComponentModel(_);if(y&&y.__alive)if(y.updateTransform){var S=y.updateTransform(_,h,p,d);S&&S.update&&m.push(y)}else m.push(y)}});var v=di();h.eachSeries(function(g){var _=f._chartsMap[g.__viewId];if(_.updateTransform){var y=_.updateTransform(g,h,p,d);y&&y.update&&v.set(g.uid,1)}else v.set(g.uid,1)}),t(h),this._scheduler.performVisualTasks(h,d,{setDirty:!0,dirtyMap:v}),LS(this,h,p,d,{},v),Zo.trigger("afterupdate",h,p)}},updateView:function(d){var f=this._model;f&&(f.setUpdatePayload(d),lv.markUpdateMethod(d,"updateView"),t(f),this._scheduler.performVisualTasks(f,d,{setDirty:!0}),WA(this,f,this._api,d,{}),Zo.trigger("afterupdate",f,this._api))},updateVisual:function(d){var f=this,h=this._model;h&&(h.setUpdatePayload(d),h.eachSeries(function(p){p.getData().clearAllVisual()}),lv.markUpdateMethod(d,"updateVisual"),t(h),this._scheduler.performVisualTasks(h,d,{visualType:"visual",setDirty:!0}),h.eachComponent(function(p,m){if(p!=="series"){var v=f.getViewOfComponentModel(m);v&&v.__alive&&v.updateVisual(m,h,f._api,d)}}),h.eachSeries(function(p){var m=f._chartsMap[p.__viewId];m.updateVisual(p,h,f._api,d)}),Zo.trigger("afterupdate",h,this._api))},updateLayout:function(d){Eu.update.call(this,d)}},VA=function(d,f,h,p){if(d._disposed){d.id;return}for(var m=d._model,v=d._coordSysMgr.getCoordinateSystems(),g,_=fA(m,h),y=0;y<v.length;y++){var S=v[y];if(S[f]&&(g=S[f](m,_,p))!=null)return g}},$A=function(d,f){var h=d._chartsMap,p=d._scheduler;f.eachSeries(function(m){p.updateStreamModes(m,h[m.__viewId])})},GA=function(d,f){var h=this,p=this.getModel(),m=d.type,v=d.escapeConnect,g=Jx[m],_=g.actionInfo,y=(_.update||"update").split(":"),S=y.pop(),w=y[0]!=null&&Fl(y[0]);this[vs]=!0;var x=[d],T=!1;d.batch&&(T=!0,x=hi(d.batch,function(D){return D=nr(Nt({},D),d),D.batch=null,D}));var C=[],M,A=FR(d),E=Vz(d);if(E&&eX(this._api),tt(x,function(D){if(M=g.action(D,h._model,h._api),M=M||Nt({},D),M.type=_.event||M.type,C.push(M),E){var L=tk(d),R=L.queryOptionMap,B=L.mainTypeSpecified,k=B?R.keys()[0]:"series";DS(h,S,D,k),Qa(h)}else A?(DS(h,S,D,"series"),Qa(h)):w&&DS(h,S,D,w.main,w.sub)}),S!=="none"&&!E&&!A&&!w)try{this[oa]?(Dp(this),Eu.update.call(this,d),this[oa]=null):Eu[S].call(this,d)}catch(D){throw this[vs]=!1,D}if(T?M={type:_.event||m,escapeConnect:v,batch:C}:M=C[0],this[vs]=!1,!f){var I=this._messageCenter;if(I.trigger(M.type,M),A){var P={type:"selectchanged",escapeConnect:v,selected:Z3e(p),isFromClick:d.isFromClick||!1,fromAction:d.type,fromActionPayload:d};I.trigger(P.type,P)}}},d0=function(d){for(var f=this._pendingActions;f.length;){var h=f.shift();GA.call(this,h,d)}},f0=function(d){!d&&this.trigger("updated")},tH=function(d,f){d.on("rendered",function(h){f.trigger("rendered",h),d.animation.isFinished()&&!f[oa]&&!f._scheduler.unfinished&&!f._pendingActions.length&&f.trigger("finished")})},nH=function(d,f){d.on("mouseover",function(h){var p=h.target,m=W0(p,BR);m&&(Y3e(m,h,f._api),Qa(f))}).on("mouseout",function(h){var p=h.target,m=W0(p,BR);m&&(j3e(m,h,f._api),Qa(f))}).on("click",function(h){var p=h.target,m=W0(p,function(_){return or(_).dataIndex!=null},!0);if(m){var v=m.selected?"unselect":"select",g=or(m);f._api.dispatchAction({type:v,dataType:g.dataType,dataIndexInside:g.dataIndex,seriesIndex:g.seriesIndex,isFromClick:!0})}})};function t(d){d.clearColorPalette(),d.eachSeries(function(f){f.clearColorPalette()})}function i(d){var f=[],h=[],p=!1;if(d.eachComponent(function(_,y){var S=y.get("zlevel")||0,w=y.get("z")||0,x=y.getZLevelKey();p=p||!!x,(_==="series"?h:f).push({zlevel:S,z:w,idx:y.componentIndex,type:_,key:x})}),p){var m=f.concat(h),v,g;x1(m,function(_,y){return _.zlevel===y.zlevel?_.z-y.z:_.zlevel-y.zlevel}),tt(m,function(_){var y=d.getComponent(_.type,_.idx),S=_.zlevel,w=_.key;v!=null&&(S=Math.max(v,S)),w?(S===v&&w!==g&&S++,g=w):g&&(S===v&&S++,g=""),v=S,y.setZLevel(S)})}}WA=function(d,f,h,p,m){i(f),iH(d,f,h,p,m),tt(d._chartsViews,function(v){v.__alive=!1}),LS(d,f,h,p,m),tt(d._chartsViews,function(v){v.__alive||v.remove(f,h)})},iH=function(d,f,h,p,m,v){tt(v||d._componentsViews,function(g){var _=g.__model;c(_,g),g.render(_,f,h,p),o(_,g),u(_,g)})},LS=function(d,f,h,p,m,v){var g=d._scheduler;m=Nt(m||{},{updatedSeries:f.getSeries()}),Zo.trigger("series:beforeupdate",f,h,m);var _=!1;f.eachSeries(function(y){var S=d._chartsMap[y.__viewId];S.__alive=!0;var w=S.renderTask;g.updatePayload(w,p),c(y,S),v&&v.get(y.uid)&&w.dirty(),w.perform(g.getPerformArgs(w))&&(_=!0),S.group.silent=!!y.get("silent"),a(y,S),Uz(y)}),g.unfinished=_||g.unfinished,Zo.trigger("series:layoutlabels",f,h,m),Zo.trigger("series:transition",f,h,m),f.eachSeries(function(y){var S=d._chartsMap[y.__viewId];o(y,S),u(y,S)}),s(d,f),Zo.trigger("series:afterupdate",f,h,m)},Qa=function(d){d[zA]=!0,d.getZr().wakeUp()},sH=function(d){d[zA]&&(d.getZr().storage.traverse(function(f){vy(f)||r(f)}),d[zA]=!1)};function r(d){for(var f=[],h=d.currentStates,p=0;p<h.length;p++){var m=h[p];m==="emphasis"||m==="blur"||m==="select"||f.push(m)}d.selected&&d.states.select&&f.push("select"),d.hoverState===ok&&d.states.emphasis?f.push("emphasis"):d.hoverState===ak&&d.states.blur&&f.push("blur"),d.useStates(f)}function s(d,f){var h=d._zr,p=h.storage,m=0;p.traverse(function(v){v.isGroup||m++}),m>f.get("hoverLayerThreshold")&&!Qn.node&&!Qn.worker&&f.eachSeries(function(v){if(!v.preventUsingHoverLayer){var g=d._chartsMap[v.__viewId];g.__alive&&g.eachRendered(function(_){_.states.emphasis&&(_.states.emphasis.hoverLayer=!0)})}})}function a(d,f){var h=d.get("blendMode")||null;f.eachRendered(function(p){p.isGroup||(p.style.blend=h)})}function o(d,f){if(!d.preventAutoZ){var h=d.get("z")||0,p=d.get("zlevel")||0;f.eachRendered(function(m){return l(m,h,p,-1/0),!0})}}function l(d,f,h,p){var m=d.getTextContent(),v=d.getTextGuideLine(),g=d.isGroup;if(g)for(var _=d.childrenRef(),y=0;y<_.length;y++)p=Math.max(l(_[y],f,h,p),p);else d.z=f,d.zlevel=h,p=Math.max(d.z2,p);if(m&&(m.z=f,m.zlevel=h,isFinite(p)&&(m.z2=p+2)),v){var S=d.textGuideLineConfig;v.z=f,v.zlevel=h,isFinite(p)&&(v.z2=p+(S&&S.showAbove?1:-1))}return p}function c(d,f){f.eachRendered(function(h){if(!vy(h)){var p=h.getTextContent(),m=h.getTextGuideLine();h.stateTransition&&(h.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),m&&m.stateTransition&&(m.stateTransition=null),h.hasState()?(h.prevStates=h.currentStates,h.clearStates()):h.prevStates&&(h.prevStates=null)}})}function u(d,f){var h=d.getModel("stateAnimation"),p=d.isAnimationEnabled(),m=h.get("duration"),v=m>0?{duration:m,delay:h.get("delay"),easing:h.get("easing")}:null;f.eachRendered(function(g){if(g.states&&g.states.emphasis){if(vy(g))return;if(g instanceof Ki&&ske(g),g.__dirty){var _=g.prevStates;_&&g.useStates(_)}if(p){g.stateTransition=v;var y=g.getTextContent(),S=g.getTextGuideLine();y&&(y.stateTransition=v),S&&(S.stateTransition=v)}g.__dirty&&r(g)}})}rH=function(d){return new(function(f){Mn(h,f);function h(){return f!==null&&f.apply(this,arguments)||this}return h.prototype.getCoordinateSystems=function(){return d._coordSysMgr.getCoordinateSystems()},h.prototype.getComponentByElement=function(p){for(;p;){var m=p.__ecComponentInfo;if(m!=null)return d._model.getComponent(m.mainType,m.index);p=p.parent}},h.prototype.enterEmphasis=function(p,m){DR(p,m),Qa(d)},h.prototype.leaveEmphasis=function(p,m){LR(p,m),Qa(d)},h.prototype.enterBlur=function(p){q3e(p),Qa(d)},h.prototype.leaveBlur=function(p){jq(p),Qa(d)},h.prototype.enterSelect=function(p){Qq(p),Qa(d)},h.prototype.leaveSelect=function(p){Zq(p),Qa(d)},h.prototype.getModel=function(){return d.getModel()},h.prototype.getViewOfComponentModel=function(p){return d.getViewOfComponentModel(p)},h.prototype.getViewOfSeriesModel=function(p){return d.getViewOfSeriesModel(p)},h}(GX))(d)},OY=function(d){function f(h,p){for(var m=0;m<h.length;m++){var v=h[m];v[UA]=p}}tt(_y,function(h,p){d._messageCenter.on(p,function(m){if(aH[d.group]&&d[UA]!==eH){if(m&&m.escapeConnect)return;var v=d.makeActionFromEvent(m),g=[];tt(by,function(_){_!==d&&_.group===d.group&&g.push(_)}),f(g,eH),tt(g,function(_){_[UA]!==CFe&&_.dispatchAction(v)}),f(g,MFe)}})})}}(),e}(ac),Pk=NY.prototype;Pk.on=RY("on");Pk.off=RY("off");Pk.one=function(n,e,t){var i=this;function r(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];e&&e.apply&&e.apply(this,s),i.off(n,r)}this.on.call(this,n,r,t)};var TFe=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],Jx={},_y={},JR=[],eP=[],eC=[],BY={},tP={},by={},aH={},AFe=+new Date-0,Dk="_echarts_instance_";function EFe(n,e,t){var i=!(t&&t.ssr);if(i){var r=IFe(n);if(r)return r}var s=new NY(n,e,t);return s.id="ec_"+AFe++,by[s.id]=s,i&&Rq(n,Dk,s.id),OY(s),Zo.trigger("afterinit",s),s}function IFe(n){return by[kLe(n,Dk)]}function FY(n,e){BY[n]=e}function zY(n){$i(eP,n)<0&&eP.push(n)}function UY(n,e){kk(JR,n,e,vFe)}function RFe(n){Lk("afterinit",n)}function PFe(n){Lk("afterupdate",n)}function Lk(n,e){Zo.on(n,e)}function Mg(n,e,t){Ri(e)&&(t=e,e="");var i=Ln(n)?n.type:[n,n={event:e}][0];n.event=(n.event||i).toLowerCase(),e=n.event,!_y[e]&&(nu(JU.test(i)&&JU.test(e)),Jx[i]||(Jx[i]={action:t,actionInfo:n}),_y[e]=i)}function DFe(n,e){WX.register(n,e)}function LFe(n,e){kk(eC,n,e,AY,"layout")}function ap(n,e){kk(eC,n,e,EY,"visual")}var oH=[];function kk(n,e,t,i,r){if((Ri(e)||Ln(e))&&(t=e,e=i),!($i(oH,t)>=0)){oH.push(t);var s=gY.wrapStageHandler(t,r);s.__prio=e,s.__raw=t,n.push(s)}}function HY(n,e){tP[n]=e}function kFe(n,e,t){var i=dFe("registerMap");i&&i(n,e,t)}var OFe=ONe;ap(Rk,dBe);ap(VM,fBe);ap(VM,hBe);ap(Rk,EBe);ap(VM,IBe);ap(IY,lFe);zY(qX);UY(pFe,gNe);HY("default",pBe);Mg({type:Rh,event:Rh,update:Rh},ga);Mg({type:R1,event:R1,update:R1},ga);Mg({type:hy,event:hy,update:hy},ga);Mg({type:P1,event:P1,update:P1},ga);Mg({type:py,event:py,update:py},ga);FY("light",MBe);FY("dark",TBe);function h0(n){return n==null?0:n.length||1}function lH(n){return n}var NFe=function(){function n(e,t,i,r,s,a){this._old=e,this._new=t,this._oldKeyGetter=i||lH,this._newKeyGetter=r||lH,this.context=s,this._diffModeMultiple=a==="multiple"}return n.prototype.add=function(e){return this._add=e,this},n.prototype.update=function(e){return this._update=e,this},n.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},n.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},n.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},n.prototype.remove=function(e){return this._remove=e,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var e=this._old,t=this._new,i={},r=new Array(e.length),s=new Array(t.length);this._initIndexMap(e,null,r,"_oldKeyGetter"),this._initIndexMap(t,i,s,"_newKeyGetter");for(var a=0;a<e.length;a++){var o=r[a],l=i[o],c=h0(l);if(c>1){var u=l.shift();l.length===1&&(i[o]=l[0]),this._update&&this._update(u,a)}else c===1?(i[o]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(s,i)},n.prototype._executeMultiple=function(){var e=this._old,t=this._new,i={},r={},s=[],a=[];this._initIndexMap(e,i,s,"_oldKeyGetter"),this._initIndexMap(t,r,a,"_newKeyGetter");for(var o=0;o<s.length;o++){var l=s[o],c=i[l],u=r[l],d=h0(c),f=h0(u);if(d>1&&f===1)this._updateManyToOne&&this._updateManyToOne(u,c),r[l]=null;else if(d===1&&f>1)this._updateOneToMany&&this._updateOneToMany(u,c),r[l]=null;else if(d===1&&f===1)this._update&&this._update(u,c),r[l]=null;else if(d>1&&f>1)this._updateManyToMany&&this._updateManyToMany(u,c),r[l]=null;else if(d>1)for(var h=0;h<d;h++)this._remove&&this._remove(c[h]);else this._remove&&this._remove(c)}this._performRestAdd(a,r)},n.prototype._performRestAdd=function(e,t){for(var i=0;i<e.length;i++){var r=e[i],s=t[r],a=h0(s);if(a>1)for(var o=0;o<a;o++)this._add&&this._add(s[o]);else a===1&&this._add&&this._add(s);t[r]=null}},n.prototype._initIndexMap=function(e,t,i,r){for(var s=this._diffModeMultiple,a=0;a<e.length;a++){var o="_ec_"+this[r](e[a],a);if(s||(i[a]=o),!!t){var l=t[o],c=h0(l);c===0?(t[o]=a,s&&i.push(o)):c===1?t[o]=[l,a]:l.push(a)}}},n}();const BFe=NFe;var FFe=function(){function n(e,t){this._encode=e,this._schema=t}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function zFe(n,e){var t={},i=t.encode={},r=di(),s=[],a=[],o={};tt(n.dimensions,function(f){var h=n.getDimensionInfo(f),p=h.coordDim;if(p){var m=h.coordDimIndex;KA(i,p)[m]=f,h.isExtraCoord||(r.set(p,1),UFe(h.type)&&(s[0]=f),KA(o,p)[m]=n.getDimensionIndex(h.name)),h.defaultTooltip&&a.push(f)}BX.each(function(v,g){var _=KA(i,g),y=h.otherDims[g];y!=null&&y!==!1&&(_[y]=h.name)})});var l=[],c={};r.each(function(f,h){var p=i[h];c[h]=p[0],l=l.concat(p)}),t.dataDimsOnCoord=l,t.dataDimIndicesOnCoord=hi(l,function(f){return n.getDimensionInfo(f).storeDimIndex}),t.encodeFirstDimNotExtra=c;var u=i.label;u&&u.length&&(s=u.slice());var d=i.tooltip;return d&&d.length?a=d.slice():a.length||(a=s.slice()),i.defaultedLabel=s,i.defaultedTooltip=a,t.userOutput=new FFe(o,e),t}function KA(n,e){return n.hasOwnProperty(e)||(n[e]=[]),n[e]}function UFe(n){return!(n==="ordinal"||n==="time")}var HFe=function(){function n(e){this.otherDims={},e!=null&&Nt(this,e)}return n}();const N1=HFe;var VFe=Jr(),$Fe={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},VY=function(){function n(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=GY(this.source)))},n.prototype.getSourceDimensionIndex=function(e){return ui(this._dimNameMap.get(e),-1)},n.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},n.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=jX(this.source),i=!WY(e),r="",s=[],a=0,o=0;a<e;a++){var l=void 0,c=void 0,u=void 0,d=this.dimensions[o];if(d&&d.storeDimIndex===a)l=t?d.name:null,c=d.type,u=d.ordinalMeta,o++;else{var f=this.getSourceDimension(a);f&&(l=t?f.name:null,c=f.type)}s.push({property:l,type:c,ordinalMeta:u}),t&&l!=null&&(!d||!d.isCalculationCoord)&&(r+=i?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),r+="$",r+=$Fe[c]||"f",u&&(r+=u.uid),r+="$"}var h=this.source,p=[h.seriesLayoutBy,h.startIndex,r].join("$$");return{dimensions:s,hash:p}},n.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,i=0;t<this._fullDimCount;t++){var r=void 0,s=this.dimensions[i];if(s&&s.storeDimIndex===t)s.isCalculationCoord||(r=s.name),i++;else{var a=this.getSourceDimension(t);a&&(r=a.name)}e.push(r)}return e},n.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function GFe(n){return n instanceof VY}function $Y(n){for(var e=di(),t=0;t<(n||[]).length;t++){var i=n[t],r=Ln(i)?i.name:i;r!=null&&e.get(r)==null&&e.set(r,t)}return e}function GY(n){var e=VFe(n);return e.dimNameMap||(e.dimNameMap=$Y(n.dimensionsDefine))}function WY(n){return n>30}var p0=Ln,Iu=hi,WFe=typeof Int32Array>"u"?Array:Int32Array,KFe="e\0\0",cH=-1,qFe=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],XFe=["_approximateExtent"],uH,kS,m0,v0,qA,OS,XA,YFe=function(){function n(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var i,r=!1;GFe(e)?(i=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(r=!0,i=e),i=i||["x","y"];for(var s={},a=[],o={},l=!1,c={},u=0;u<i.length;u++){var d=i[u],f=Rn(d)?new N1({name:d}):d instanceof N1?d:new N1(d),h=f.name;f.type=f.type||"float",f.coordDim||(f.coordDim=h,f.coordDimIndex=0);var p=f.otherDims=f.otherDims||{};a.push(h),s[h]=f,c[h]!=null&&(l=!0),f.createInvertedIndices&&(o[h]=[]),p.itemName===0&&(this._nameDimIdx=u),p.itemId===0&&(this._idDimIdx=u),r&&(f.storeDimIndex=u)}if(this.dimensions=a,this._dimInfos=s,this._initGetDimensionInfo(l),this.hostModel=t,this._invertedIndicesMap=o,this._dimOmitted){var m=this._dimIdxToName=di();tt(a,function(v){m.set(s[v].storeDimIndex,v)})}}return n.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var i=this._dimIdxToName.get(t);if(i!=null)return i;var r=this._schema.getSourceDimension(t);if(r)return r.name},n.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var i=this._getDimInfo(e);return i?i.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},n.prototype._recognizeDimIndex=function(e){if(vr(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},n.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},n.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},n.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(i){return t.hasOwnProperty(i)?t[i]:void 0}:function(i){return t[i]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(e,t){var i=this._dimSummary;if(t==null)return i.encodeFirstDimNotExtra[e];var r=i.encode[e];return r?r[t]:null},n.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,i=t.encode[e];return(i||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(e,t,i){var r=this,s;if(e instanceof $R&&(s=e),!s){var a=this.dimensions,o=xk(e)||xa(e)?new QX(e,a.length):e;s=new $R;var l=Iu(a,function(c){return{type:r._dimInfos[c].type,property:c}});s.initData(o,l,i)}this._store=s,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,s.count()),this._dimSummary=zFe(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},n.prototype.appendValues=function(e,t){var i=this._store.appendValues(e,t.length),r=i.start,s=i.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var o=r;o<s;o++){var l=o-r;this._nameList[o]=t[l],a&&XA(this,o)}},n.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,i=0;i<t.length;i++){var r=this._dimInfos[t[i]];r.ordinalMeta&&e.collectOrdinalMeta(r.storeDimIndex,r.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==_d&&!e.fillStorage},n.prototype._doInit=function(e,t){if(!(e>=t)){var i=this._store,r=i.getProvider();this._updateOrdinalMeta();var s=this._nameList,a=this._idList,o=r.getSource().sourceFormat,l=o===oc;if(l&&!r.pure)for(var c=[],u=e;u<t;u++){var d=r.getItem(u,c);if(!this.hasItemOption&&xLe(d)&&(this.hasItemOption=!0),d){var f=d.name;s[u]==null&&f!=null&&(s[u]=Wl(f,null));var h=d.id;a[u]==null&&h!=null&&(a[u]=Wl(h,null))}}if(this._shouldMakeIdFromName())for(var u=e;u<t;u++)XA(this,u);uH(this)}},n.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},n.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},n.prototype.setCalculationInfo=function(e,t){p0(e)?Nt(this._calculationInfo,e):this._calculationInfo[e]=t},n.prototype.getName=function(e){var t=this.getRawIndex(e),i=this._nameList[t];return i==null&&this._nameDimIdx!=null&&(i=m0(this,this._nameDimIdx,t)),i==null&&(i=""),i},n.prototype._getCategory=function(e,t){var i=this._store.get(e,t),r=this._store.getOrdinalMeta(e);return r?r.categories[i]:i},n.prototype.getId=function(e){return kS(this,this.getRawIndex(e))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(e,t){var i=this._store,r=this._dimInfos[e];if(r)return i.get(r.storeDimIndex,t)},n.prototype.getByRawIndex=function(e,t){var i=this._store,r=this._dimInfos[e];if(r)return i.getByRawIndex(r.storeDimIndex,t)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},n.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},n.prototype.getValues=function(e,t){var i=this,r=this._store;return hn(e)?r.getValues(Iu(e,function(s){return i._getStoreDimIndex(s)}),t):r.getValues(e)},n.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,i=0,r=t.length;i<r;i++)if(isNaN(this._store.get(t[i],e)))return!1;return!0},n.prototype.indexOfName=function(e){for(var t=0,i=this._store.count();t<i;t++)if(this.getName(t)===e)return t;return-1},n.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},n.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},n.prototype.rawIndexOf=function(e,t){var i=e&&this._invertedIndicesMap[e],r=i[t];return r==null||isNaN(r)?cH:r},n.prototype.indicesOfNearest=function(e,t,i){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,i)},n.prototype.each=function(e,t,i){Ri(e)&&(i=t,t=e,e=[]);var r=i||this,s=Iu(v0(e),this._getStoreDimIndex,this);this._store.each(s,r?Gi(t,r):t)},n.prototype.filterSelf=function(e,t,i){Ri(e)&&(i=t,t=e,e=[]);var r=i||this,s=Iu(v0(e),this._getStoreDimIndex,this);return this._store=this._store.filter(s,r?Gi(t,r):t),this},n.prototype.selectRange=function(e){var t=this,i={},r=mr(e);return tt(r,function(s){var a=t._getStoreDimIndex(s);i[a]=e[s]}),this._store=this._store.selectRange(i),this},n.prototype.mapArray=function(e,t,i){Ri(e)&&(i=t,t=e,e=[]),i=i||this;var r=[];return this.each(e,function(){r.push(t&&t.apply(this,arguments))},i),r},n.prototype.map=function(e,t,i,r){var s=i||r||this,a=Iu(v0(e),this._getStoreDimIndex,this),o=OS(this);return o._store=this._store.map(a,s?Gi(t,s):t),o},n.prototype.modify=function(e,t,i,r){var s=i||r||this,a=Iu(v0(e),this._getStoreDimIndex,this);this._store.modify(a,s?Gi(t,s):t)},n.prototype.downSample=function(e,t,i,r){var s=OS(this);return s._store=this._store.downSample(this._getStoreDimIndex(e),t,i,r),s},n.prototype.lttbDownSample=function(e,t){var i=OS(this);return i._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),i},n.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},n.prototype.getItemModel=function(e){var t=this.hostModel,i=this.getRawDataItem(e);return new Ps(i,t,t&&t.ecModel)},n.prototype.diff=function(e){var t=this;return new BFe(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(i){return kS(e,i)},function(i){return kS(t,i)})},n.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},n.prototype.setVisual=function(e,t){this._visual=this._visual||{},p0(e)?Nt(this._visual,e):this._visual[e]=t},n.prototype.getItemVisual=function(e,t){var i=this._itemVisuals[e],r=i&&i[t];return r??this.getVisual(t)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(e,t){var i=this._itemVisuals,r=i[e];r||(r=i[e]={});var s=r[t];return s==null&&(s=this.getVisual(t),hn(s)?s=s.slice():p0(s)&&(s=Nt({},s)),r[t]=s),s},n.prototype.setItemVisual=function(e,t,i){var r=this._itemVisuals[e]||{};this._itemVisuals[e]=r,p0(t)?Nt(r,t):r[t]=i},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(e,t){p0(e)?Nt(this._layout,e):this._layout[e]=t},n.prototype.getLayout=function(e){return this._layout[e]},n.prototype.getItemLayout=function(e){return this._itemLayouts[e]},n.prototype.setItemLayout=function(e,t,i){this._itemLayouts[e]=i?Nt(this._itemLayouts[e]||{},t):t},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(e,t){var i=this.hostModel&&this.hostModel.seriesIndex;B3e(i,this.dataType,e,t),this._graphicEls[e]=t},n.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},n.prototype.eachItemGraphicEl=function(e,t){tt(this._graphicEls,function(i,r){i&&e&&e.call(t,i,r)})},n.prototype.cloneShallow=function(e){return e||(e=new n(this._schema?this._schema:Iu(this.dimensions,this._getDimInfo,this),this.hostModel)),qA(e,this),e._store=this._store,e},n.prototype.wrapMethod=function(e,t){var i=this[e];Ri(i)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var r=i.apply(this,arguments);return t.apply(this,[r].concat(W3(arguments)))})},n.internalField=function(){uH=function(e){var t=e._invertedIndicesMap;tt(t,function(i,r){var s=e._dimInfos[r],a=s.ordinalMeta,o=e._store;if(a){i=t[r]=new WFe(a.categories.length);for(var l=0;l<i.length;l++)i[l]=cH;for(var l=0;l<o.count();l++)i[o.get(s.storeDimIndex,l)]=l}})},m0=function(e,t,i){return Wl(e._getCategory(t,i),null)},kS=function(e,t){var i=e._idList[t];return i==null&&e._idDimIdx!=null&&(i=m0(e,e._idDimIdx,t)),i==null&&(i=KFe+t),i},v0=function(e){return hn(e)||(e=e!=null?[e]:[]),e},OS=function(e){var t=new n(e._schema?e._schema:Iu(e.dimensions,e._getDimInfo,e),e.hostModel);return qA(t,e),t},qA=function(e,t){tt(qFe.concat(t.__wrappedMethods||[]),function(i){t.hasOwnProperty(i)&&(e[i]=t[i])}),e.__wrappedMethods=t.__wrappedMethods,tt(XFe,function(i){e[i]=vi(t[i])}),e._calculationInfo=Nt({},t._calculationInfo)},XA=function(e,t){var i=e._nameList,r=e._idList,s=e._nameDimIdx,a=e._idDimIdx,o=i[t],l=r[t];if(o==null&&s!=null&&(i[t]=o=m0(e,s,t)),l==null&&a!=null&&(r[t]=l=m0(e,a,t)),l==null&&o!=null){var c=e._nameRepeatCount,u=c[o]=(c[o]||0)+1;l=o,u>1&&(l+="__ec__"+u),r[t]=l}}}(),n}();const jFe=YFe;function QFe(n,e){xk(n)||(n=XX(n)),e=e||{};var t=e.coordDimensions||[],i=e.dimensionsDefine||n.dimensionsDefine||[],r=di(),s=[],a=JFe(n,t,i,e.dimensionsCount),o=e.canOmitUnusedDimensions&&WY(a),l=i===n.dimensionsDefine,c=l?GY(n):$Y(i),u=e.encodeDefine;!u&&e.encodeDefaulter&&(u=e.encodeDefaulter(n,a));for(var d=di(u),f=new nY(a),h=0;h<f.length;h++)f[h]=-1;function p(M){var A=f[M];if(A<0){var E=i[M],I=Ln(E)?E:{name:E},P=new N1,D=I.name;D!=null&&c.get(D)!=null&&(P.name=P.displayName=D),I.type!=null&&(P.type=I.type),I.displayName!=null&&(P.displayName=I.displayName);var L=s.length;return f[M]=L,P.storeDimIndex=M,s.push(P),P}return s[A]}if(!o)for(var h=0;h<a;h++)p(h);d.each(function(M,A){var E=Qs(M).slice();if(E.length===1&&!Rn(E[0])&&E[0]<0){d.set(A,!1);return}var I=d.set(A,[]);tt(E,function(P,D){var L=Rn(P)?c.get(P):P;L!=null&&L<a&&(I[D]=L,v(p(L),A,D))})});var m=0;tt(t,function(M){var A,E,I,P;if(Rn(M))A=M,P={};else{P=M,A=P.name;var D=P.ordinalMeta;P.ordinalMeta=null,P=Nt({},P),P.ordinalMeta=D,E=P.dimsDef,I=P.otherDims,P.name=P.coordDim=P.coordDimIndex=P.dimsDef=P.otherDims=null}var L=d.get(A);if(L!==!1){if(L=Qs(L),!L.length)for(var R=0;R<(E&&E.length||1);R++){for(;m<a&&p(m).coordDim!=null;)m++;m<a&&L.push(m++)}tt(L,function(B,k){var O=p(B);if(l&&P.type!=null&&(O.type=P.type),v(nr(O,P),A,k),O.name==null&&E){var U=E[k];!Ln(U)&&(U={name:U}),O.name=O.displayName=U.name,O.defaultTooltip=U.defaultTooltip}I&&nr(O.otherDims,I)})}});function v(M,A,E){BX.get(A)!=null?M.otherDims[A]=E:(M.coordDim=A,M.coordDimIndex=E,r.set(A,!0))}var g=e.generateCoord,_=e.generateCoordCount,y=_!=null;_=g?_||1:0;var S=g||"value";function w(M){M.name==null&&(M.name=M.coordDim)}if(o)tt(s,function(M){w(M)}),s.sort(function(M,A){return M.storeDimIndex-A.storeDimIndex});else for(var x=0;x<a;x++){var T=p(x),C=T.coordDim;C==null&&(T.coordDim=e4e(S,r,y),T.coordDimIndex=0,(!g||_<=0)&&(T.isExtraCoord=!0),_--),w(T),T.type==null&&(UX(n,x)===ts.Must||T.isExtraCoord&&(T.otherDims.itemName!=null||T.otherDims.seriesName!=null))&&(T.type="ordinal")}return ZFe(s),new VY({source:n,dimensions:s,fullDimensionCount:a,dimensionOmitted:o})}function ZFe(n){for(var e=di(),t=0;t<n.length;t++){var i=n[t],r=i.name,s=e.get(r)||0;s>0&&(i.name=r+(s-1)),s++,e.set(r,s)}}function JFe(n,e,t,i){var r=Math.max(n.dimensionsDetectedCount||1,e.length,t.length,i||0);return tt(e,function(s){var a;Ln(s)&&(a=s.dimsDef)&&(r=Math.max(r,a.length))}),r}function e4e(n,e,t){if(t||e.hasKey(n)){for(var i=0;e.hasKey(n+i);)i++;n+=i}return e.set(n,!0),n}function KY(n,e){return n.type==="category"?n.scale.getLabel(e):e.value}function t4e(n){var e=n.get("interval");return e??"auto"}function n4e(n){return n.type==="category"&&t4e(n.getLabelModel())===0}var dH=[],i4e={registerPreprocessor:zY,registerProcessor:UY,registerPostInit:RFe,registerPostUpdate:PFe,registerUpdateLifecycle:Lk,registerAction:Mg,registerCoordinateSystem:DFe,registerLayout:LFe,registerVisual:ap,registerTransform:OFe,registerLoading:HY,registerMap:kFe,registerImpl:uFe,PRIORITY:xFe,ComponentModel:ar,ComponentView:Hd,SeriesModel:T_,ChartView:lv,registerComponentModel:function(n){ar.registerClass(n)},registerComponentView:function(n){Hd.registerClass(n)},registerSeriesModel:function(n){T_.registerClass(n)},registerChartView:function(n){lv.registerClass(n)},registerSubTypeDefaulter:function(n,e){ar.registerSubTypeDefaulter(n,e)},registerPainter:function(n,e){hLe(n,e)}};function Uv(n){if(hn(n)){tt(n,function(e){Uv(e)});return}$i(dH,n)>=0||(dH.push(n),Ri(n)&&(n={install:n}),n.install(i4e))}Wh.CMD;function qY(n,e,t,i,r,s,a,o){var l=r-n,c=s-e,u=t-n,d=i-e,f=Math.sqrt(u*u+d*d);u/=f,d/=f;var h=l*u+c*d,p=h/f;o&&(p=Math.min(Math.max(p,0),1)),p*=f;var m=a[0]=n+p*u,v=a[1]=e+p*d;return Math.sqrt((m-r)*(m-r)+(v-s)*(v-s))}var cd=new On,rr=new On,ns=new On,ud=new On,kl=new On,tC=[],Ws=new On;function r4e(n,e){if(e<=180&&e>0){e=e/180*Math.PI,cd.fromArray(n[0]),rr.fromArray(n[1]),ns.fromArray(n[2]),On.sub(ud,cd,rr),On.sub(kl,ns,rr);var t=ud.len(),i=kl.len();if(!(t<.001||i<.001)){ud.scale(1/t),kl.scale(1/i);var r=ud.dot(kl),s=Math.cos(e);if(s<r){var a=qY(rr.x,rr.y,ns.x,ns.y,cd.x,cd.y,tC,!1);Ws.fromArray(tC),Ws.scaleAndAdd(kl,a/Math.tan(Math.PI-e));var o=ns.x!==rr.x?(Ws.x-rr.x)/(ns.x-rr.x):(Ws.y-rr.y)/(ns.y-rr.y);if(isNaN(o))return;o<0?On.copy(Ws,rr):o>1&&On.copy(Ws,ns),Ws.toArray(n[1])}}}}function s4e(n,e,t){if(t<=180&&t>0){t=t/180*Math.PI,cd.fromArray(n[0]),rr.fromArray(n[1]),ns.fromArray(n[2]),On.sub(ud,rr,cd),On.sub(kl,ns,rr);var i=ud.len(),r=kl.len();if(!(i<.001||r<.001)){ud.scale(1/i),kl.scale(1/r);var s=ud.dot(e),a=Math.cos(t);if(s<a){var o=qY(rr.x,rr.y,ns.x,ns.y,cd.x,cd.y,tC,!1);Ws.fromArray(tC);var l=Math.PI/2,c=Math.acos(kl.dot(e)),u=l+c-t;if(u>=l)On.copy(Ws,ns);else{Ws.scaleAndAdd(kl,o/Math.tan(Math.PI/2-u));var d=ns.x!==rr.x?(Ws.x-rr.x)/(ns.x-rr.x):(Ws.y-rr.y)/(ns.y-rr.y);if(isNaN(d))return;d<0?On.copy(Ws,rr):d>1&&On.copy(Ws,ns)}Ws.toArray(n[1])}}}}function fH(n,e,t,i){var r=t==="normal",s=r?n:n.ensureState(t);s.ignore=e;var a=i.get("smooth");a&&a===!0&&(a=.3),s.shape=s.shape||{},a>0&&(s.shape.smooth=a);var o=i.getModel("lineStyle").getLineStyle();r?n.useStyle(o):s.style=o}function a4e(n,e){var t=e.smooth,i=e.points;if(i)if(n.moveTo(i[0][0],i[0][1]),t>0&&i.length>=3){var r=fR(i[0],i[1]),s=fR(i[1],i[2]);if(!r||!s){n.lineTo(i[1][0],i[1][1]),n.lineTo(i[2][0],i[2][1]);return}var a=Math.min(r,s)*t,o=WT([],i[1],i[0],a/r),l=WT([],i[1],i[2],a/s),c=WT([],o,l,.5);n.bezierCurveTo(o[0],o[1],o[0],o[1],c[0],c[1]),n.bezierCurveTo(l[0],l[1],l[0],l[1],i[2][0],i[2][1])}else for(var u=1;u<i.length;u++)n.lineTo(i[u][0],i[u][1])}function o4e(n,e,t){var i=n.getTextGuideLine(),r=n.getTextContent();if(!r){i&&n.removeTextGuideLine();return}for(var s=e.normal,a=s.get("show"),o=r.ignore,l=0;l<Vx.length;l++){var c=Vx[l],u=e[c],d=c==="normal";if(u){var f=u.get("show"),h=d?o:ui(r.states[c]&&r.states[c].ignore,o);if(h||!ui(f,a)){var p=d?i:i&&i.states[c];p&&(p.ignore=!0);continue}i||(i=new OM,n.setTextGuideLine(i),!d&&(o||!a)&&fH(i,!0,"normal",e.normal),n.stateProxy&&(i.stateProxy=n.stateProxy)),fH(i,!1,c,u)}}if(i){nr(i.style,t),i.style.fill=null;var m=s.get("showAbove"),v=n.textGuideLineConfig=n.textGuideLineConfig||{};v.showAbove=m||!1,i.buildPath=a4e}}function l4e(n,e){e=e||"labelLine";for(var t={normal:n.getModel(e)},i=0;i<Zl.length;i++){var r=Zl[i];t[r]=n.getModel([r,e])}return t}function c4e(n){for(var e=[],t=0;t<n.length;t++){var i=n[t];if(!i.defaultAttr.ignore){var r=i.label,s=r.getComputedTransform(),a=r.getBoundingRect(),o=!s||s[1]<1e-5&&s[2]<1e-5,l=r.style.margin||0,c=a.clone();c.applyTransform(s),c.x-=l/2,c.y-=l/2,c.width+=l,c.height+=l;var u=o?new $x(a,s):null;e.push({label:r,labelLine:i.labelLine,rect:c,localRect:a,obb:u,priority:i.priority,defaultAttr:i.defaultAttr,layoutOption:i.computedLayoutOption,axisAligned:o,transform:s})}}return e}function u4e(n,e,t,i,r,s){var a=n.length;if(a<2)return;n.sort(function(C,M){return C.rect[e]-M.rect[e]});for(var o=0,l,c=!1,u=0,d=0;d<a;d++){var f=n[d],h=f.rect;l=h[e]-o,l<0&&(h[e]-=l,f.label[e]-=l,c=!0);var p=Math.max(-l,0);u+=p,o=h[e]+h[t]}u>0&&s&&w(-u/a,0,a);var m=n[0],v=n[a-1],g,_;y(),g<0&&x(-g,.8),_<0&&x(_,.8),y(),S(g,_,1),S(_,g,-1),y(),g<0&&T(-g),_<0&&T(_);function y(){g=m.rect[e]-i,_=r-v.rect[e]-v.rect[t]}function S(C,M,A){if(C<0){var E=Math.min(M,-C);if(E>0){w(E*A,0,a);var I=E+C;I<0&&x(-I*A,1)}else x(-C*A,1)}}function w(C,M,A){C!==0&&(c=!0);for(var E=M;E<A;E++){var I=n[E],P=I.rect;P[e]+=C,I.label[e]+=C}}function x(C,M){for(var A=[],E=0,I=1;I<a;I++){var P=n[I-1].rect,D=Math.max(n[I].rect[e]-P[e]-P[t],0);A.push(D),E+=D}if(E){var L=Math.min(Math.abs(C)/E,M);if(C>0)for(var I=0;I<a-1;I++){var R=A[I]*L;w(R,0,I+1)}else for(var I=a-1;I>0;I--){var R=A[I-1]*L;w(-R,I,a)}}}function T(C){var M=C<0?-1:1;C=Math.abs(C);for(var A=Math.ceil(C/(a-1)),E=0;E<a-1;E++)if(M>0?w(A,0,E+1):w(-A,a-E-1,a),C-=A,C<=0)return}return c}function d4e(n,e,t,i){return u4e(n,"y","height",e,t,i)}function f4e(n){var e=[];n.sort(function(m,v){return v.priority-m.priority});var t=new Oi(0,0,0,0);function i(m){if(!m.ignore){var v=m.ensureState("emphasis");v.ignore==null&&(v.ignore=!1)}m.ignore=!0}for(var r=0;r<n.length;r++){var s=n[r],a=s.axisAligned,o=s.localRect,l=s.transform,c=s.label,u=s.labelLine;t.copy(s.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var d=s.obb,f=!1,h=0;h<e.length;h++){var p=e[h];if(t.intersect(p.rect)){if(a&&p.axisAligned){f=!0;break}if(p.obb||(p.obb=new $x(p.localRect,p.transform)),d||(d=new $x(o,l)),d.intersect(p.obb)){f=!0;break}}}f?(i(c),u&&i(u)):(c.attr("ignore",s.defaultAttr.ignore),u&&u.attr("ignore",s.defaultAttr.labelGuideIgnore),e.push(s))}}function hH(n,e,t){var i=bg.createCanvas(),r=e.getWidth(),s=e.getHeight(),a=i.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=r+"px",a.height=s+"px",i.setAttribute("data-zr-dom-id",n)),i.width=r*t,i.height=s*t,i}var h4e=function(n){Mn(e,n);function e(t,i,r){var s=n.call(this)||this;s.motionBlur=!1,s.lastFrameAlpha=.7,s.dpr=1,s.virtual=!1,s.config={},s.incremental=!1,s.zlevel=0,s.maxRepaintRectCount=5,s.__dirty=!0,s.__firstTimePaint=!0,s.__used=!1,s.__drawIndex=0,s.__startIndex=0,s.__endIndex=0,s.__prevStartIndex=null,s.__prevEndIndex=null;var a;r=r||zx,typeof t=="string"?a=hH(t,i,r):Ln(t)&&(a=t,t=a.id),s.id=t,s.dom=a;var o=a.style;return o&&(QK(a),a.onselectstart=function(){return!1},o.padding="0",o.margin="0",o.borderWidth="0"),s.painter=i,s.dpr=r,s}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=hH("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,i,r,s){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],o=this.maxRepaintRectCount,l=!1,c=new Oi(0,0,0,0);function u(_){if(!(!_.isFinite()||_.isZero()))if(a.length===0){var y=new Oi(0,0,0,0);y.copy(_),a.push(y)}else{for(var S=!1,w=1/0,x=0,T=0;T<a.length;++T){var C=a[T];if(C.intersect(_)){var M=new Oi(0,0,0,0);M.copy(C),M.union(_),a[T]=M,S=!0;break}else if(l){c.copy(_),c.union(C);var A=_.width*_.height,E=C.width*C.height,I=c.width*c.height,P=I-A-E;P<w&&(w=P,x=T)}}if(l&&(a[x].union(_),S=!0),!S){var y=new Oi(0,0,0,0);y.copy(_),a.push(y)}l||(l=a.length>=o)}}for(var d=this.__startIndex;d<this.__endIndex;++d){var f=t[d];if(f){var h=f.shouldBePainted(r,s,!0,!0),p=f.__isRendered&&(f.__dirty&Oa||!h)?f.getPrevPaintRect():null;p&&u(p);var m=h&&(f.__dirty&Oa||!f.__isRendered)?f.getPaintRect():null;m&&u(m)}}for(var d=this.__prevStartIndex;d<this.__prevEndIndex;++d){var f=i[d],h=f.shouldBePainted(r,s,!0,!0);if(f&&(!h||!f.__zr)&&f.__isRendered){var p=f.getPrevPaintRect();p&&u(p)}}var v;do{v=!1;for(var d=0;d<a.length;){if(a[d].isZero()){a.splice(d,1);continue}for(var g=d+1;g<a.length;)a[d].intersect(a[g])?(v=!0,a[d].union(a[g]),a.splice(g,1)):g++;d++}}while(v);return this._paintRects=a,a},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,i){var r=this.dpr,s=this.dom,a=s.style,o=this.domBack;a&&(a.width=t+"px",a.height=i+"px"),s.width=t*r,s.height=i*r,o&&(o.width=t*r,o.height=i*r,r!==1&&this.ctxBack.scale(r,r))},e.prototype.clear=function(t,i,r){var s=this.dom,a=this.ctx,o=s.width,l=s.height;i=i||this.clearColor;var c=this.motionBlur&&!t,u=this.lastFrameAlpha,d=this.dpr,f=this;c&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(s,0,0,o/d,l/d));var h=this.domBack;function p(m,v,g,_){if(a.clearRect(m,v,g,_),i&&i!=="transparent"){var y=void 0;if(AM(i)){var S=i.global||i.__width===g&&i.__height===_;y=S&&i.__canvasGradient||jR(a,i,{x:0,y:0,width:g,height:_}),i.__canvasGradient=y,i.__width=g,i.__height=_}else BPe(i)&&(i.scaleX=i.scaleX||d,i.scaleY=i.scaleY||d,y=QR(a,i,{dirty:function(){f.setUnpainted(),f.__painter.refresh()}}));a.save(),a.fillStyle=y||i,a.fillRect(m,v,g,_),a.restore()}c&&(a.save(),a.globalAlpha=u,a.drawImage(h,m,v,g,_),a.restore())}!r||c?p(0,0,o,l):r.length&&tt(r,function(m){p(m.x*d,m.y*d,m.width*d,m.height*d)})},e}(ac);const YA=h4e;var pH=1e5,Pf=314159,NS=.01,p4e=.001;function m4e(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function v4e(n,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+n+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var g4e=function(){function n(e,t,i,r){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var s=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=i=Nt({},i||{}),this.dpr=i.devicePixelRatio||zx,this._singleCanvas=s,this.root=e;var a=e.style;a&&(QK(e),e.innerHTML=""),this.storage=t;var o=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(s){var u=e,d=u.width,f=u.height;i.width!=null&&(d=i.width),i.height!=null&&(f=i.height),this.dpr=i.devicePixelRatio||1,u.width=d*this.dpr,u.height=f*this.dpr,this._width=d,this._height=f;var h=new YA(u,this,this.dpr);h.__builtin__=!0,h.initContext(),l[Pf]=h,h.zlevel=Pf,o.push(Pf),this._domRoot=e}else{this._width=PS(e,0,i),this._height=PS(e,1,i);var c=this._domRoot=v4e(this._width,this._height);e.appendChild(c)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),i=this._prevDisplayList,r=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,i,e,this._redrawId);for(var s=0;s<r.length;s++){var a=r[s],o=this._layers[a];if(!o.__builtin__&&o.refresh){var l=s===0?this._backgroundColor:null;o.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(e){var t=e.length,i=this._hoverlayer;if(i&&i.clear(),!!t){for(var r={inHover:!0,viewWidth:this._width,viewHeight:this._height},s,a=0;a<t;a++){var o=e[a];o.__inHover&&(i||(i=this._hoverlayer=this.getLayer(pH)),s||(s=i.ctx,s.save()),ph(s,o,r,a===t-1))}s&&s.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(pH)},n.prototype.paintOne=function(e,t){wY(e,t)},n.prototype._paintList=function(e,t,i,r){if(this._redrawId===r){i=i||!1,this._updateLayerStatus(e);var s=this._doPaintList(e,t,i),a=s.finished,o=s.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),o&&this._paintHoverList(e),a)this.eachLayer(function(c){c.afterBrush&&c.afterBrush()});else{var l=this;gR(function(){l._paintList(e,t,i,r)})}}},n.prototype._compositeManually=function(){var e=this.getLayer(Pf).ctx,t=this._domRoot.width,i=this._domRoot.height;e.clearRect(0,0,t,i),this.eachBuiltinLayer(function(r){r.virtual&&e.drawImage(r.dom,0,0,t,i)})},n.prototype._doPaintList=function(e,t,i){for(var r=this,s=[],a=this._opts.useDirtyRect,o=0;o<this._zlevelList.length;o++){var l=this._zlevelList[o],c=this._layers[l];c.__builtin__&&c!==this._hoverlayer&&(c.__dirty||i)&&s.push(c)}for(var u=!0,d=!1,f=function(m){var v=s[m],g=v.ctx,_=a&&v.createRepaintRects(e,t,h._width,h._height),y=i?v.__startIndex:v.__drawIndex,S=!i&&v.incremental&&Date.now,w=S&&Date.now(),x=v.zlevel===h._zlevelList[0]?h._backgroundColor:null;if(v.__startIndex===v.__endIndex)v.clear(!1,x,_);else if(y===v.__startIndex){var T=e[y];(!T.incremental||!T.notClear||i)&&v.clear(!1,x,_)}y===-1&&(console.error("For some unknown reason. drawIndex is -1"),y=v.__startIndex);var C,M=function(P){var D={inHover:!1,allClipped:!1,prevEl:null,viewWidth:r._width,viewHeight:r._height};for(C=y;C<v.__endIndex;C++){var L=e[C];if(L.__inHover&&(d=!0),r._doPaintEl(L,v,a,P,D,C===v.__endIndex-1),S){var R=Date.now()-w;if(R>15)break}}D.prevElClipPaths&&g.restore()};if(_)if(_.length===0)C=v.__endIndex;else for(var A=h.dpr,E=0;E<_.length;++E){var I=_[E];g.save(),g.beginPath(),g.rect(I.x*A,I.y*A,I.width*A,I.height*A),g.clip(),M(I),g.restore()}else g.save(),M(),g.restore();v.__drawIndex=C,v.__drawIndex<v.__endIndex&&(u=!1)},h=this,p=0;p<s.length;p++)f(p);return Qn.wxa&&tt(this._layers,function(m){m&&m.ctx&&m.ctx.draw&&m.ctx.draw()}),{finished:u,needsRefreshHover:d}},n.prototype._doPaintEl=function(e,t,i,r,s,a){var o=t.ctx;if(i){var l=e.getPaintRect();(!r||l&&l.intersect(r))&&(ph(o,e,s,a),e.setPrevPaintRect(l))}else ph(o,e,s,a)},n.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Pf);var i=this._layers[e];return i||(i=new YA("zr_"+e,this,this.dpr),i.zlevel=e,i.__builtin__=!0,this._layerConfig[e]?er(i,this._layerConfig[e],!0):this._layerConfig[e-NS]&&er(i,this._layerConfig[e-NS],!0),t&&(i.virtual=t),this.insertLayer(e,i),i.initContext()),i},n.prototype.insertLayer=function(e,t){var i=this._layers,r=this._zlevelList,s=r.length,a=this._domRoot,o=null,l=-1;if(!i[e]&&m4e(t)){if(s>0&&e>r[0]){for(l=0;l<s-1&&!(r[l]<e&&r[l+1]>e);l++);o=i[r[l]]}if(r.splice(l+1,0,e),i[e]=t,!t.virtual)if(o){var c=o.dom;c.nextSibling?a.insertBefore(t.dom,c.nextSibling):a.appendChild(t.dom)}else a.firstChild?a.insertBefore(t.dom,a.firstChild):a.appendChild(t.dom);t.__painter=this}},n.prototype.eachLayer=function(e,t){for(var i=this._zlevelList,r=0;r<i.length;r++){var s=i[r];e.call(t,this._layers[s],s)}},n.prototype.eachBuiltinLayer=function(e,t){for(var i=this._zlevelList,r=0;r<i.length;r++){var s=i[r],a=this._layers[s];a.__builtin__&&e.call(t,a,s)}},n.prototype.eachOtherLayer=function(e,t){for(var i=this._zlevelList,r=0;r<i.length;r++){var s=i[r],a=this._layers[s];a.__builtin__||e.call(t,a,s)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(d,f){d.__dirty=d.__used=!1});function t(d){s&&(s.__endIndex!==d&&(s.__dirty=!0),s.__endIndex=d)}if(this._singleCanvas)for(var i=1;i<e.length;i++){var r=e[i];if(r.zlevel!==e[i-1].zlevel||r.incremental){this._needsManuallyCompositing=!0;break}}var s=null,a=0,o,l;for(l=0;l<e.length;l++){var r=e[l],c=r.zlevel,u=void 0;o!==c&&(o=c,a=0),r.incremental?(u=this.getLayer(c+p4e,this._needsManuallyCompositing),u.incremental=!0,a=1):u=this.getLayer(c+(a>0?NS:0),this._needsManuallyCompositing),u.__builtin__||G3("ZLevel "+c+" has been used by unkown layer "+u.id),u!==s&&(u.__used=!0,u.__startIndex!==l&&(u.__dirty=!0),u.__startIndex=l,u.incremental?u.__drawIndex=-1:u.__drawIndex=l,t(l),s=u),r.__dirty&Oa&&!r.__inHover&&(u.__dirty=!0,u.incremental&&u.__drawIndex<0&&(u.__drawIndex=l))}t(l),this.eachBuiltinLayer(function(d,f){!d.__used&&d.getElementCount()>0&&(d.__dirty=!0,d.__startIndex=d.__endIndex=d.__drawIndex=0),d.__dirty&&d.__drawIndex<0&&(d.__drawIndex=d.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(e){e.clear()},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e,tt(this._layers,function(t){t.setUnpainted()})},n.prototype.configLayer=function(e,t){if(t){var i=this._layerConfig;i[e]?er(i[e],t,!0):i[e]=t;for(var r=0;r<this._zlevelList.length;r++){var s=this._zlevelList[r];if(s===e||s===e+NS){var a=this._layers[s];er(a,i[e],!0)}}}},n.prototype.delLayer=function(e){var t=this._layers,i=this._zlevelList,r=t[e];r&&(r.dom.parentNode.removeChild(r.dom),delete t[e],i.splice($i(i,e),1))},n.prototype.resize=function(e,t){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var r=this._opts,s=this.root;if(e!=null&&(r.width=e),t!=null&&(r.height=t),e=PS(s,0,r),t=PS(s,1,r),i.style.display="",this._width!==e||t!==this._height){i.style.width=e+"px",i.style.height=t+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(Pf).resize(e,t)}return this},n.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[Pf].dom;var t=new YA("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var i=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var r=t.dom.width,s=t.dom.height;this.eachLayer(function(d){d.__builtin__?i.drawImage(d.dom,0,0,r,s):d.renderToCanvas&&(i.save(),d.renderToCanvas(i),i.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},o=this.storage.getDisplayList(!0),l=0,c=o.length;l<c;l++){var u=o[l];ph(i,u,a,l===c-1)}return t.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}();const y4e=g4e;function _4e(n){n.registerPainter("canvas",y4e)}function BS(n,e,t){var i=n.get("borderRadius");if(i==null)return t?{cornerRadius:0}:null;hn(i)||(i=[i,i,i,i]);var r=Math.abs(e.r||0-e.r0||0);return{cornerRadius:hi(i,function(s){return Fv(s,r)})}}var FS=Math.PI*2,mH=Math.PI/180;function XY(n,e){return w_(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function YY(n,e){var t=XY(n,e),i=n.get("center"),r=n.get("radius");hn(r)||(r=[0,r]);var s=Dr(t.width,e.getWidth()),a=Dr(t.height,e.getHeight()),o=Math.min(s,a),l=Dr(r[0],o/2),c=Dr(r[1],o/2),u,d,f=n.coordinateSystem;if(f){var h=f.dataToPoint(i);u=h[0]||0,d=h[1]||0}else hn(i)||(i=[i,i]),u=Dr(i[0],s)+t.x,d=Dr(i[1],a)+t.y;return{cx:u,cy:d,r0:l,r:c}}function b4e(n,e,t){e.eachSeriesByType(n,function(i){var r=i.getData(),s=r.mapDimension("value"),a=XY(i,t),o=YY(i,t),l=o.cx,c=o.cy,u=o.r,d=o.r0,f=-i.get("startAngle")*mH,h=i.get("minAngle")*mH,p=0;r.each(s,function(A){!isNaN(A)&&p++});var m=r.getSum(s),v=Math.PI/(m||p)*2,g=i.get("clockwise"),_=i.get("roseType"),y=i.get("stillShowZeroSum"),S=r.getDataExtent(s);S[0]=0;var w=FS,x=0,T=f,C=g?1:-1;if(r.setLayout({viewRect:a,r:u}),r.each(s,function(A,E){var I;if(isNaN(A)){r.setItemLayout(E,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:g,cx:l,cy:c,r0:d,r:_?NaN:u});return}_!=="area"?I=m===0&&y?v:A*v:I=FS/p,I<h?(I=h,w-=h):x+=A;var P=T+C*I;r.setItemLayout(E,{angle:I,startAngle:T,endAngle:P,clockwise:g,cx:l,cy:c,r0:d,r:_?mLe(A,S,[d,u]):u}),T=P}),w<FS&&p)if(w<=.001){var M=FS/p;r.each(s,function(A,E){if(!isNaN(A)){var I=r.getItemLayout(E);I.angle=M,I.startAngle=f+C*E*M,I.endAngle=f+C*(E+1)*M}})}else v=w/x,T=f,r.each(s,function(A,E){if(!isNaN(A)){var I=r.getItemLayout(E),P=I.angle===h?h:A*v;I.startAngle=T,I.endAngle=T+C*P,T+=C*P}})})}function S4e(n){return{seriesType:n,reset:function(e,t){var i=t.findComponents({mainType:"legend"});if(!(!i||!i.length)){var r=e.getData();r.filterSelf(function(s){for(var a=r.getName(s),o=0;o<i.length;o++)if(!i[o].isSelected(a))return!1;return!0})}}}}var w4e=Math.PI/180;function vH(n,e,t,i,r,s,a,o,l,c){if(n.length<2)return;function u(m){for(var v=m.rB,g=v*v,_=0;_<m.list.length;_++){var y=m.list[_],S=Math.abs(y.label.y-t),w=i+y.len,x=w*w,T=Math.sqrt((1-Math.abs(S*S/g))*x),C=e+(T+y.len2)*r,M=C-y.label.x,A=y.targetTextWidth-M*r;jY(y,A,!0),y.label.x=C}}function d(m){for(var v={list:[],maxY:0},g={list:[],maxY:0},_=0;_<m.length;_++)if(m[_].labelAlignTo==="none"){var y=m[_],S=y.label.y>t?g:v,w=Math.abs(y.label.y-t);if(w>=S.maxY){var x=y.label.x-e-y.len2*r,T=i+y.len,C=Math.abs(x)<T?Math.sqrt(w*w/(1-x*x/T/T)):T;S.rB=C,S.maxY=w}S.list.push(y)}u(v),u(g)}for(var f=n.length,h=0;h<f;h++)if(n[h].position==="outer"&&n[h].labelAlignTo==="labelLine"){var p=n[h].label.x-c;n[h].linePoints[1][0]+=p,n[h].label.x=c}d4e(n,l,l+a)&&d(n)}function x4e(n,e,t,i,r,s,a,o){for(var l=[],c=[],u=Number.MAX_VALUE,d=-Number.MAX_VALUE,f=0;f<n.length;f++){var h=n[f].label;jA(n[f])||(h.x<e?(u=Math.min(u,h.x),l.push(n[f])):(d=Math.max(d,h.x),c.push(n[f])))}for(var f=0;f<n.length;f++){var p=n[f];if(!jA(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var h=p.label,m=p.linePoints,v=void 0;p.labelAlignTo==="edge"?h.x<e?v=m[2][0]-p.labelDistance-a-p.edgeDistance:v=a+r-p.edgeDistance-m[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?h.x<e?v=u-a-p.bleedMargin:v=a+r-d-p.bleedMargin:h.x<e?v=h.x-a-p.bleedMargin:v=a+r-h.x-p.bleedMargin,p.targetTextWidth=v,jY(p,v)}}vH(c,e,t,i,1,r,s,a,o,d),vH(l,e,t,i,-1,r,s,a,o,u);for(var f=0;f<n.length;f++){var p=n[f];if(!jA(p)&&p.linePoints){var h=p.label,m=p.linePoints,g=p.labelAlignTo==="edge",_=h.style.padding,y=_?_[1]+_[3]:0,S=h.style.backgroundColor?0:y,w=p.rect.width+S,x=m[1][0]-m[2][0];g?h.x<e?m[2][0]=a+p.edgeDistance+w+p.labelDistance:m[2][0]=a+r-p.edgeDistance-w-p.labelDistance:(h.x<e?m[2][0]=h.x+p.labelDistance:m[2][0]=h.x-p.labelDistance,m[1][0]=m[2][0]+x),m[1][1]=m[2][1]=h.y}}}function jY(n,e,t){if(t===void 0&&(t=!1),n.labelStyleWidth==null){var i=n.label,r=i.style,s=n.rect,a=r.backgroundColor,o=r.padding,l=o?o[1]+o[3]:0,c=r.overflow,u=s.width+(a?0:l);if(e<u||t){var d=s.height;if(c&&c.match("break")){i.setStyle("backgroundColor",null),i.setStyle("width",e-l);var f=i.getBoundingRect();i.setStyle("width",Math.ceil(f.width)),i.setStyle("backgroundColor",a)}else{var h=e-l,p=e<u?h:t?h>n.unconstrainedWidth?null:h:null;i.setStyle("width",p)}var m=i.getBoundingRect();s.width=m.width;var v=(i.style.margin||0)+2.1;s.height=m.height+v,s.y-=(s.height-d)/2}}}function jA(n){return n.position==="center"}function C4e(n){var e=n.getData(),t=[],i,r,s=!1,a=(n.get("minShowLabelAngle")||0)*w4e,o=e.getLayout("viewRect"),l=e.getLayout("r"),c=o.width,u=o.x,d=o.y,f=o.height;function h(x){x.ignore=!0}function p(x){if(!x.ignore)return!0;for(var T in x.states)if(x.states[T].ignore===!1)return!0;return!1}e.each(function(x){var T=e.getItemGraphicEl(x),C=T.shape,M=T.getTextContent(),A=T.getTextGuideLine(),E=e.getItemModel(x),I=E.getModel("label"),P=I.get("position")||E.get(["emphasis","label","position"]),D=I.get("distanceToLabelLine"),L=I.get("alignTo"),R=Dr(I.get("edgeDistance"),c),B=I.get("bleedMargin"),k=E.getModel("labelLine"),O=k.get("length");O=Dr(O,c);var U=k.get("length2");if(U=Dr(U,c),Math.abs(C.endAngle-C.startAngle)<a){tt(M.states,h),M.ignore=!0,A&&(tt(A.states,h),A.ignore=!0);return}if(p(M)){var G=(C.startAngle+C.endAngle)/2,q=Math.cos(G),W=Math.sin(G),Y,J,Z,ee;i=C.cx,r=C.cy;var me=P==="inside"||P==="inner";if(P==="center")Y=C.cx,J=C.cy,ee="center";else{var ye=(me?(C.r+C.r0)/2*q:C.r*q)+i,Te=(me?(C.r+C.r0)/2*W:C.r*W)+r;if(Y=ye+q*3,J=Te+W*3,!me){var Ee=ye+q*(O+l-C.r),H=Te+W*(O+l-C.r),Q=Ee+(q<0?-1:1)*U,j=H;L==="edge"?Y=q<0?u+R:u+c-R:Y=Q+(q<0?-D:D),J=j,Z=[[ye,Te],[Ee,H],[Q,j]]}ee=me?"center":L==="edge"?q>0?"right":"left":q>0?"left":"right"}var Pe=Math.PI,we=0,De=I.get("rotate");if(vr(De))we=De*(Pe/180);else if(P==="center")we=0;else if(De==="radial"||De===!0){var Me=q<0?-G+Pe:-G;we=Me}else if(De==="tangential"&&P!=="outside"&&P!=="outer"){var Ae=Math.atan2(q,W);Ae<0&&(Ae=Pe*2+Ae);var Fe=W>0;Fe&&(Ae=Pe+Ae),we=Ae-Pe}if(s=!!we,M.x=Y,M.y=J,M.rotation=we,M.setStyle({verticalAlign:"middle"}),me){M.setStyle({align:ee});var K=M.states.select;K&&(K.x+=M.x,K.y+=M.y)}else{var ne=M.getBoundingRect().clone();ne.applyTransform(M.getComputedTransform());var z=(M.style.margin||0)+2.1;ne.y-=z/2,ne.height+=z,t.push({label:M,labelLine:A,position:P,len:O,len2:U,minTurnAngle:k.get("minTurnAngle"),maxSurfaceAngle:k.get("maxSurfaceAngle"),surfaceNormal:new On(q,W),linePoints:Z,textAlign:ee,labelDistance:D,labelAlignTo:L,edgeDistance:R,bleedMargin:B,rect:ne,unconstrainedWidth:ne.width,labelStyleWidth:M.style.width})}T.setTextConfig({inside:me})}}),!s&&n.get("avoidLabelOverlap")&&x4e(t,i,r,l,c,f,u,d);for(var m=0;m<t.length;m++){var v=t[m],g=v.label,_=v.labelLine,y=isNaN(g.x)||isNaN(g.y);if(g){g.setStyle({align:v.textAlign}),y&&(tt(g.states,h),g.ignore=!0);var S=g.states.select;S&&(S.x+=g.x,S.y+=g.y)}if(_){var w=v.linePoints;y||!w?(tt(_.states,h),_.ignore=!0):(r4e(w,v.minTurnAngle),s4e(w,v.surfaceNormal,v.maxSurfaceAngle),_.setShape({points:w}),g.__hostTarget.textGuideLineConfig={anchor:new On(w[0][0],w[0][1])})}}}var M4e=function(n){Mn(e,n);function e(t,i,r){var s=n.call(this)||this;s.z2=2;var a=new ta;return s.setTextContent(a),s.updateData(t,i,r,!0),s}return e.prototype.updateData=function(t,i,r,s){var a=this,o=t.hostModel,l=t.getItemModel(i),c=l.getModel("emphasis"),u=t.getItemLayout(i),d=Nt(BS(l.getModel("itemStyle"),u,!0),u);if(isNaN(d.startAngle)){a.setShape(d);return}if(s){a.setShape(d);var f=o.getShallow("animationType");o.ecModel.ssr?(D1(a,{scaleX:0,scaleY:0},o,{dataIndex:i,isFrom:!0}),a.originX=d.cx,a.originY=d.cy):f==="scale"?(a.shape.r=u.r0,D1(a,{shape:{r:u.r}},o,i)):r!=null?(a.setShape({startAngle:r,endAngle:r}),D1(a,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},o,i)):(a.shape.endAngle=u.startAngle,zv(a,{shape:{endAngle:u.endAngle}},o,i))}else $ke(a),zv(a,{shape:d},o,i);a.useStyle(t.getItemVisual(i,"style")),ike(a,l);var h=(u.startAngle+u.endAngle)/2,p=o.get("selectedOffset"),m=Math.cos(h)*p,v=Math.sin(h)*p,g=l.getShallow("cursor");g&&a.attr("cursor",g),this._updateLabel(o,t,i),a.ensureState("emphasis").shape=Nt({r:u.r+(c.get("scale")&&c.get("scaleSize")||0)},BS(c.getModel("itemStyle"),u)),Nt(a.ensureState("select"),{x:m,y:v,shape:BS(l.getModel(["select","itemStyle"]),u)}),Nt(a.ensureState("blur"),{shape:BS(l.getModel(["blur","itemStyle"]),u)});var _=a.getTextGuideLine(),y=a.getTextContent();_&&Nt(_.ensureState("select"),{x:m,y:v}),Nt(y.ensureState("select"),{x:m,y:v}),eke(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t,i,r){var s=this,a=i.getItemModel(r),o=a.getModel("labelLine"),l=i.getItemVisual(r,"style"),c=l&&l.fill,u=l&&l.opacity;EX(s,oOe(a),{labelFetcher:i.hostModel,labelDataIndex:r,inheritColor:c,defaultOpacity:u,defaultText:t.getFormattedLabel(r,"normal")||i.getName(r)});var d=s.getTextContent();s.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var f=t.get(["label","position"]);if(f!=="outside"&&f!=="outer")s.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new OM,this.setTextGuideLine(h)),o4e(this,l4e(a),{stroke:c,opacity:ly(o.get(["lineStyle","opacity"]),u,1)})}},e}(kM),T4e=function(n){Mn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,i,r,s){var a=t.getData(),o=this._data,l=this.group,c;if(!o&&a.count()>0){for(var u=a.getItemLayout(0),d=1;isNaN(u&&u.startAngle)&&d<a.count();++d)u=a.getItemLayout(d);u&&(c=u.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),a.count()===0&&t.get("showEmptyCircle")){var f=new kM({shape:YY(t,r)});f.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,l.add(f)}a.diff(o).add(function(h){var p=new M4e(a,h,c);a.setItemGraphicEl(h,p),l.add(p)}).update(function(h,p){var m=o.getItemGraphicEl(p);m.updateData(a,h,c),m.off("click"),l.add(m),a.setItemGraphicEl(h,m)}).remove(function(h){var p=o.getItemGraphicEl(h);wX(p,t,h)}).execute(),C4e(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=a)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,i){var r=i.getData(),s=r.getItemLayout(0);if(s){var a=t[0]-s.cx,o=t[1]-s.cy,l=Math.sqrt(a*a+o*o);return l<=s.r&&l>=s.r0}},e.type="pie",e}(lv);const A4e=T4e;function E4e(n,e,t){e=hn(e)&&{coordDimensions:e}||Nt({encodeDefine:n.getEncode()},e);var i=n.getSource(),r=QFe(i,e).dimensions,s=new jFe(r,n);return s.initData(i,t),s}var I4e=function(){function n(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return n.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},n.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},n.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},n.prototype.getItemVisual=function(e,t){var i=this._getDataWithEncodedVisual();return i.getItemVisual(e,t)},n}();const R4e=I4e;var P4e=Jr(),D4e=function(n){Mn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new R4e(Gi(this.getData,this),Gi(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return E4e(this,{coordDimensions:["value"],encodeDefaulter:Or(GOe,this)})},e.prototype.getDataParams=function(t){var i=this.getData(),r=P4e(i),s=r.seats;if(!s){var a=[];i.each(i.mapDimension("value"),function(l){a.push(l)}),s=r.seats=yLe(a,i.hostModel.get("percentPrecision"))}var o=n.prototype.getDataParams.call(this,t);return o.percent=s[t]||0,o.$vars.push("percent"),o},e.prototype._defaultLabelLine=function(t){AR(t,"labelLine",["show"]);var i=t.labelLine,r=t.emphasis.labelLine;i.show=i.show&&t.label.show,r.show=r.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(T_);const L4e=D4e;function k4e(n){return{seriesType:n,reset:function(e,t){var i=e.getData();i.filterSelf(function(r){var s=i.mapDimension("value"),a=i.get(s,r);return!(vr(a)&&!isNaN(a)&&a<0)})}}}function O4e(n){n.registerChartView(A4e),n.registerSeriesModel(L4e),DBe("pie",n.registerAction),n.registerLayout(Or(b4e,"pie")),n.registerProcessor(S4e("pie")),n.registerProcessor(k4e("pie"))}function gH(n,e,t){t=t||{};var i=n.coordinateSystem,r=e.axis,s={},a=r.getAxesOnZeroOf()[0],o=r.position,l=a?"onZero":o,c=r.dim,u=i.getRect(),d=[u.x,u.x+u.width,u.y,u.y+u.height],f={left:0,right:1,top:0,bottom:1,onZero:2},h=e.get("offset")||0,p=c==="x"?[d[2]-h,d[3]+h]:[d[0]-h,d[1]+h];if(a){var m=a.toGlobalCoord(a.dataToCoord(0));p[f.onZero]=Math.max(Math.min(m,p[1]),p[0])}s.position=[c==="y"?p[f[l]]:d[0],c==="x"?p[f[l]]:d[3]],s.rotation=Math.PI/2*(c==="x"?0:1);var v={top:-1,bottom:1,left:-1,right:1};s.labelDirection=s.tickDirection=s.nameDirection=v[o],s.labelOffset=a?p[f[o]]-p[f.onZero]:0,e.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),m_(t.labelInside,e.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var g=e.get(["axisLabel","rotate"]);return s.labelRotate=l==="top"?-g:g,s.z2=1,s}var dd=Math.PI,Ph=function(){function n(e,t){this.group=new Ql,this.opt=t,this.axisModel=e,nr(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var i=new Ql({x:t.position[0],y:t.position[1],rotation:t.rotation});i.updateTransform(),this._transformGroup=i}return n.prototype.hasBuilder=function(e){return!!yH[e]},n.prototype.add=function(e){yH[e](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(e,t,i){var r=Mq(t-e),s,a;return Ux(r)?(a=i>0?"top":"bottom",s="center"):Ux(r-dd)?(a=i>0?"bottom":"top",s="center"):(a="middle",r>0&&r<dd?s=i>0?"right":"left":s=i>0?"left":"right"),{rotation:r,textAlign:s,textVerticalAlign:a}},n.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},n.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},n}(),yH={axisLine:function(n,e,t,i){var r=e.get(["axisLine","show"]);if(r==="auto"&&n.handleAutoShown&&(r=n.handleAutoShown("axisLine")),!!r){var s=e.axis.getExtent(),a=i.transform,o=[s[0],0],l=[s[1],0],c=o[0]>l[0];a&&(Gl(o,o,a),Gl(l,l,a));var u=Nt({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),d=new xb({shape:{x1:o[0],y1:o[1],x2:l[0],y2:l[1]},style:u,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});pk(d.shape,d.style.lineWidth),d.anid="line",t.add(d);var f=e.get(["axisLine","symbol"]);if(f!=null){var h=e.get(["axisLine","symbolSize"]);Rn(f)&&(f=[f,f]),(Rn(h)||vr(h))&&(h=[h,h]);var p=KBe(e.get(["axisLine","symbolOffset"])||0,h),m=h[0],v=h[1];tt([{rotate:n.rotation+Math.PI/2,offset:p[0],r:0},{rotate:n.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((o[0]-l[0])*(o[0]-l[0])+(o[1]-l[1])*(o[1]-l[1]))}],function(g,_){if(f[_]!=="none"&&f[_]!=null){var y=Ik(f[_],-m/2,-v/2,m,v,u.stroke,!0),S=g.r+g.offset,w=c?l:o;y.attr({rotation:g.rotate,x:w[0]+S*Math.cos(n.rotation),y:w[1]-S*Math.sin(n.rotation),silent:!0,z2:11}),t.add(y)}})}}},axisTickLabel:function(n,e,t,i){var r=F4e(t,i,e,n),s=U4e(t,i,e,n);if(B4e(e,s,r),z4e(t,i,e,n.tickDirection),e.get(["axisLabel","hideOverlap"])){var a=c4e(hi(s,function(o){return{label:o,priority:o.z2,defaultAttr:{ignore:o.ignore}}}));f4e(a)}},axisName:function(n,e,t,i){var r=m_(n.axisName,e.get("name"));if(r){var s=e.get("nameLocation"),a=n.nameDirection,o=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,c=e.axis.getExtent(),u=c[0]>c[1]?-1:1,d=[s==="start"?c[0]-u*l:s==="end"?c[1]+u*l:(c[0]+c[1])/2,bH(s)?n.labelOffset+a*l:0],f,h=e.get("nameRotate");h!=null&&(h=h*dd/180);var p;bH(s)?f=Ph.innerTextLayout(n.rotation,h??n.rotation,a):(f=N4e(n.rotation,s,h||0,c),p=n.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(f.rotation)),!isFinite(p)&&(p=null)));var m=o.getFont(),v=e.get("nameTruncate",!0)||{},g=v.ellipsis,_=m_(n.nameTruncateMaxWidth,v.maxWidth,p),y=new ta({x:d[0],y:d[1],rotation:f.rotation,silent:Ph.isLabelSilent(e),style:Ud(o,{text:r,font:m,overflow:"truncate",width:_,ellipsis:g,fill:o.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:o.get("align")||f.textAlign,verticalAlign:o.get("verticalAlign")||f.textVerticalAlign}),z2:1});if(gk({el:y,componentModel:e,itemName:r}),y.__fullText=r,y.anid="name",e.get("triggerEvent")){var S=Ph.makeAxisEventDataBase(e);S.targetType="axisName",S.name=r,or(y).eventData=S}i.add(y),y.updateTransform(),t.add(y),y.decomposeTransform()}}};function N4e(n,e,t,i){var r=Mq(t-n),s,a,o=i[0]>i[1],l=e==="start"&&!o||e!=="start"&&o;return Ux(r-dd/2)?(a=l?"bottom":"top",s="center"):Ux(r-dd*1.5)?(a=l?"top":"bottom",s="center"):(a="middle",r<dd*1.5&&r>dd/2?s=l?"left":"right":s=l?"right":"left"),{rotation:r,textAlign:s,textVerticalAlign:a}}function B4e(n,e,t){if(!n4e(n.axis)){var i=n.get(["axisLabel","showMinLabel"]),r=n.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var s=e[0],a=e[1],o=e[e.length-1],l=e[e.length-2],c=t[0],u=t[1],d=t[t.length-1],f=t[t.length-2];i===!1?(Za(s),Za(c)):_H(s,a)&&(i?(Za(a),Za(u)):(Za(s),Za(c))),r===!1?(Za(o),Za(d)):_H(l,o)&&(r?(Za(l),Za(f)):(Za(o),Za(d)))}}function Za(n){n&&(n.ignore=!0)}function _H(n,e){var t=n&&n.getBoundingRect().clone(),i=e&&e.getBoundingRect().clone();if(!(!t||!i)){var r=q3([]);return X3(r,r,-n.rotation),t.applyTransform(av([],r,n.getLocalTransform())),i.applyTransform(av([],r,e.getLocalTransform())),t.intersect(i)}}function bH(n){return n==="middle"||n==="center"}function QY(n,e,t,i,r){for(var s=[],a=[],o=[],l=0;l<n.length;l++){var c=n[l].coord;a[0]=c,a[1]=0,o[0]=c,o[1]=t,e&&(Gl(a,a,e),Gl(o,o,e));var u=new xb({shape:{x1:a[0],y1:a[1],x2:o[0],y2:o[1]},style:i,z2:2,autoBatch:!0,silent:!0});pk(u.shape,u.style.lineWidth),u.anid=r+"_"+n[l].tickValue,s.push(u)}return s}function F4e(n,e,t,i){var r=t.axis,s=t.getModel("axisTick"),a=s.get("show");if(a==="auto"&&i.handleAutoShown&&(a=i.handleAutoShown("axisTick")),!(!a||r.scale.isBlank())){for(var o=s.getModel("lineStyle"),l=i.tickDirection*s.get("length"),c=r.getTicksCoords(),u=QY(c,e.transform,l,nr(o.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),d=0;d<u.length;d++)n.add(u[d]);return u}}function z4e(n,e,t,i){var r=t.axis,s=t.getModel("minorTick");if(!(!s.get("show")||r.scale.isBlank())){var a=r.getMinorTicksCoords();if(a.length)for(var o=s.getModel("lineStyle"),l=i*s.get("length"),c=nr(o.getLineStyle(),nr(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),u=0;u<a.length;u++)for(var d=QY(a[u],e.transform,l,c,"minorticks_"+u),f=0;f<d.length;f++)n.add(d[f])}}function U4e(n,e,t,i){var r=t.axis,s=m_(i.axisLabelShow,t.get(["axisLabel","show"]));if(!(!s||r.scale.isBlank())){var a=t.getModel("axisLabel"),o=a.get("margin"),l=r.getViewLabels(),c=(m_(i.labelRotate,a.get("rotate"))||0)*dd/180,u=Ph.innerTextLayout(i.rotation,c,i.labelDirection),d=t.getCategories&&t.getCategories(!0),f=[],h=Ph.isLabelSilent(t),p=t.get("triggerEvent");return tt(l,function(m,v){var g=r.scale.type==="ordinal"?r.scale.getRawOrdinalNumber(m.tickValue):m.tickValue,_=m.formattedLabel,y=m.rawLabel,S=a;if(d&&d[g]){var w=d[g];Ln(w)&&w.textStyle&&(S=new Ps(w.textStyle,a,t.ecModel))}var x=S.getTextColor()||t.get(["axisLine","lineStyle","color"]),T=r.dataToCoord(g),C=new ta({x:T,y:i.labelOffset+i.labelDirection*o,rotation:u.rotation,silent:h,z2:10+(m.level||0),style:Ud(S,{text:_,align:S.getShallow("align",!0)||u.textAlign,verticalAlign:S.getShallow("verticalAlign",!0)||S.getShallow("baseline",!0)||u.textVerticalAlign,fill:Ri(x)?x(r.type==="category"?y:r.type==="value"?g+"":g,v):x})});if(C.anid="label_"+g,p){var M=Ph.makeAxisEventDataBase(t);M.targetType="axisLabel",M.value=y,M.tickIndex=v,r.type==="category"&&(M.dataIndex=g),or(C).eventData=M}e.add(C),C.updateTransform(),f.push(C),n.add(C),C.decomposeTransform()}),f}}const H4e=Ph;function V4e(n,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return $4e(t,n,e),t.seriesInvolved&&W4e(t,n),t}function $4e(n,e,t){var i=e.getComponent("tooltip"),r=e.getComponent("axisPointer"),s=r.get("link",!0)||[],a=[];tt(t.getCoordinateSystems(),function(o){if(!o.axisPointerEnabled)return;var l=I_(o.model),c=n.coordSysAxesInfo[l]={};n.coordSysMap[l]=o;var u=o.model,d=u.getModel("tooltip",i);if(tt(o.getAxes(),Or(m,!1,null)),o.getTooltipAxes&&i&&d.get("show")){var f=d.get("trigger")==="axis",h=d.get(["axisPointer","type"])==="cross",p=o.getTooltipAxes(d.get(["axisPointer","axis"]));(f||h)&&tt(p.baseAxes,Or(m,h?"cross":!0,f)),h&&tt(p.otherAxes,Or(m,"cross",!1))}function m(v,g,_){var y=_.model.getModel("axisPointer",r),S=y.get("show");if(!(!S||S==="auto"&&!v&&!nP(y))){g==null&&(g=y.get("triggerTooltip")),y=v?G4e(_,d,r,e,v,g):y;var w=y.get("snap"),x=y.get("triggerEmphasis"),T=I_(_.model),C=g||w||_.type==="category",M=n.axesInfo[T]={key:T,axis:_,coordSys:o,axisPointerModel:y,triggerTooltip:g,triggerEmphasis:x,involveSeries:C,snap:w,useHandle:nP(y),seriesModels:[],linkGroup:null};c[T]=M,n.seriesInvolved=n.seriesInvolved||C;var A=K4e(s,_);if(A!=null){var E=a[A]||(a[A]={axesInfo:{}});E.axesInfo[T]=M,E.mapper=s[A].mapper,M.linkGroup=E}}}})}function G4e(n,e,t,i,r,s){var a=e.getModel("axisPointer"),o=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};tt(o,function(f){l[f]=vi(a.get(f))}),l.snap=n.type!=="category"&&!!s,a.get("type")==="cross"&&(l.type="line");var c=l.label||(l.label={});if(c.show==null&&(c.show=!1),r==="cross"){var u=a.get(["label","show"]);if(c.show=u??!0,!s){var d=l.lineStyle=a.get("crossStyle");d&&nr(c,d.textStyle)}}return n.model.getModel("axisPointer",new Ps(l,t,i))}function W4e(n,e){e.eachSeries(function(t){var i=t.coordinateSystem,r=t.get(["tooltip","trigger"],!0),s=t.get(["tooltip","show"],!0);!i||r==="none"||r===!1||r==="item"||s===!1||t.get(["axisPointer","show"],!0)===!1||tt(n.coordSysAxesInfo[I_(i.model)],function(a){var o=a.axis;i.getAxis(o.dim)===o&&(a.seriesModels.push(t),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=t.getData().count())})})}function K4e(n,e){for(var t=e.model,i=e.dim,r=0;r<n.length;r++){var s=n[r]||{};if(QA(s[i+"AxisId"],t.id)||QA(s[i+"AxisIndex"],t.componentIndex)||QA(s[i+"AxisName"],t.name))return r}}function QA(n,e){return n==="all"||hn(n)&&$i(n,e)>=0||n===e}function q4e(n){var e=Ok(n);if(e){var t=e.axisPointerModel,i=e.axis.scale,r=t.option,s=t.get("status"),a=t.get("value");a!=null&&(a=i.parse(a));var o=nP(t);s==null&&(r.status=o?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),r.value=a,o&&(r.status=e.axis.scale.isBlank()?"hide":"show")}}function Ok(n){var e=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[I_(n)]}function X4e(n){var e=Ok(n);return e&&e.axisPointerModel}function nP(n){return!!n.get(["handle","show"])}function I_(n){return n.type+"||"+n.id}var SH={},Y4e=function(n){Mn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,r,s){this.axisPointerClass&&q4e(t),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,r,!0)},e.prototype.updateAxisPointer=function(t,i,r,s){this._doUpdateAxisPointerClass(t,r,!1)},e.prototype.remove=function(t,i){var r=this._axisPointer;r&&r.remove(i)},e.prototype.dispose=function(t,i){this._disposeAxisPointer(i),n.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,i,r){var s=e.getAxisPointerClass(this.axisPointerClass);if(s){var a=X4e(t);a?(this._axisPointer||(this._axisPointer=new s)).render(t,a,i,r):this._disposeAxisPointer(i)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,i){SH[t]=i},e.getAxisPointerClass=function(t){return t&&SH[t]},e.type="axis",e}(Hd);const j4e=Y4e;var Zf=Jr(),wH=vi,ZA=Gi,Q4e=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(e,t,i,r){var s=t.get("value"),a=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=i,!(!r&&this._lastValue===s&&this._lastStatus===a)){this._lastValue=s,this._lastStatus=a;var o=this._group,l=this._handle;if(!a||a==="hide"){o&&o.hide(),l&&l.hide();return}o&&o.show(),l&&l.show();var c={};this.makeElOption(c,s,e,t,i);var u=c.graphicKey;u!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=u;var d=this._moveAnimation=this.determineAnimation(e,t);if(!o)o=this._group=new Ql,this.createPointerEl(o,c,e,t),this.createLabelEl(o,c,e,t),i.getZr().add(o);else{var f=Or(xH,t,d);this.updatePointerEl(o,c,f),this.updateLabelEl(o,c,f,t)}MH(o,t,!0),this._renderHandle(s)}},n.prototype.remove=function(e){this.clear(e)},n.prototype.dispose=function(e){this.clear(e)},n.prototype.determineAnimation=function(e,t){var i=t.get("animation"),r=e.axis,s=r.type==="category",a=t.get("snap");if(!a&&!s)return!1;if(i==="auto"||i==null){var o=this.animationThreshold;if(s&&r.getBandWidth()>o)return!0;if(a){var l=Ok(e).seriesDataCount,c=r.getExtent();return Math.abs(c[0]-c[1])/l>o}return!1}return i===!0},n.prototype.makeElOption=function(e,t,i,r,s){},n.prototype.createPointerEl=function(e,t,i,r){var s=t.pointer;if(s){var a=Zf(e).pointerEl=new sOe[s.type](wH(t.pointer));e.add(a)}},n.prototype.createLabelEl=function(e,t,i,r){if(t.label){var s=Zf(e).labelEl=new ta(wH(t.label));e.add(s),CH(s,r)}},n.prototype.updatePointerEl=function(e,t,i){var r=Zf(e).pointerEl;r&&t.pointer&&(r.setStyle(t.pointer.style),i(r,{shape:t.pointer.shape}))},n.prototype.updateLabelEl=function(e,t,i,r){var s=Zf(e).labelEl;s&&(s.setStyle(t.label.style),i(s,{x:t.label.x,y:t.label.y}),CH(s,r))},n.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,i=this._api.getZr(),r=this._handle,s=t.getModel("handle"),a=t.get("status");if(!s.get("show")||!a||a==="hide"){r&&i.remove(r),this._handle=null;return}var o;this._handle||(o=!0,r=this._handle=vk(s.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(c){JK(c.event)},onmousedown:ZA(this._onHandleDragMove,this,0,0),drift:ZA(this._onHandleDragMove,this),ondragend:ZA(this._onHandleDragEnd,this)}),i.add(r)),MH(r,t,!1),r.setStyle(s.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=s.get("size");hn(l)||(l=[l,l]),r.scaleX=l[0]/2,r.scaleY=l[1]/2,dY(this,"_doDispatchAxisPointer",s.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,o)}},n.prototype._moveHandleToValue=function(e,t){xH(this._axisPointerModel,!t&&this._moveAnimation,this._handle,JA(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(e,t){var i=this._handle;if(i){this._dragging=!0;var r=this.updateHandleTransform(JA(i),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=r,i.stopAnimation(),i.attr(JA(r)),Zf(i).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,i=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:i.axis.dim,axisIndex:i.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),i=this._group,r=this._handle;t&&i&&(this._lastGraphicKey=null,i&&t.remove(i),r&&t.remove(r),this._group=null,this._handle=null,this._payloadInfo=null),qR(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(e,t,i){return i=i||0,{x:e[i],y:e[1-i],width:t[i],height:t[1-i]}},n}();function xH(n,e,t,i){ZY(Zf(t).lastProp,i)||(Zf(t).lastProp=i,e?zv(t,i,n):(t.stopAnimation(),t.attr(i)))}function ZY(n,e){if(Ln(n)&&Ln(e)){var t=!0;return tt(e,function(i,r){t=t&&ZY(n[r],i)}),!!t}else return n===e}function CH(n,e){n[e.get(["label","show"])?"show":"hide"]()}function JA(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function MH(n,e,t){var i=e.get("z"),r=e.get("zlevel");n&&n.traverse(function(s){s.type!=="group"&&(i!=null&&(s.z=i),r!=null&&(s.zlevel=r),s.silent=t)})}const Z4e=Q4e;function J4e(n){var e=n.get("type"),t=n.getModel(e+"Style"),i;return e==="line"?(i=t.getLineStyle(),i.fill=null):e==="shadow"&&(i=t.getAreaStyle(),i.stroke=null),i}function eze(n,e,t,i,r){var s=t.get("value"),a=JY(s,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),o=t.getModel("label"),l=FM(o.get("padding")||0),c=o.getFont(),u=yq(a,c),d=r.position,f=u.width+l[1]+l[3],h=u.height+l[0]+l[2],p=r.align;p==="right"&&(d[0]-=f),p==="center"&&(d[0]-=f/2);var m=r.verticalAlign;m==="bottom"&&(d[1]-=h),m==="middle"&&(d[1]-=h/2),tze(d,f,h,i);var v=o.get("backgroundColor");(!v||v==="auto")&&(v=e.get(["axisLine","lineStyle","color"])),n.label={x:d[0],y:d[1],style:Ud(o,{text:a,font:c,fill:o.getTextColor(),padding:l,backgroundColor:v}),z2:10}}function tze(n,e,t,i){var r=i.getWidth(),s=i.getHeight();n[0]=Math.min(n[0]+e,r)-e,n[1]=Math.min(n[1]+t,s)-t,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function JY(n,e,t,i,r){n=e.scale.parse(n);var s=e.scale.getLabel({value:n},{precision:r.precision}),a=r.formatter;if(a){var o={value:KY(e,{value:n}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};tt(i,function(l){var c=t.getSeriesByIndex(l.seriesIndex),u=l.dataIndexInside,d=c&&c.getDataParams(u);d&&o.seriesData.push(d)}),Rn(a)?s=a.replace("{value}",s):Ri(a)&&(s=a(o))}return s}function ej(n,e,t){var i=v_();return X3(i,i,t.rotation),vR(i,i,t.position),mk([n.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],i)}function nze(n,e,t,i,r,s){var a=H4e.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=r.get(["label","margin"]),eze(e,i,r,s,{position:ej(i.axis,n,t),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function ize(n,e,t){return t=t||0,{x1:n[t],y1:n[1-t],x2:e[t],y2:e[1-t]}}function rze(n,e,t){return t=t||0,{x:n[t],y:n[1-t],width:e[t],height:e[1-t]}}var sze=function(n){Mn(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,i,r,s,a){var o=r.axis,l=o.grid,c=s.get("type"),u=TH(l,o).getOtherAxis(o).getGlobalExtent(),d=o.toGlobalCoord(o.dataToCoord(i,!0));if(c&&c!=="none"){var f=J4e(s),h=aze[c](o,d,u);h.style=f,t.graphicKey=h.type,t.pointer=h}var p=gH(l.model,r);nze(i,t,p,r,s,a)},e.prototype.getHandleTransform=function(t,i,r){var s=gH(i.axis.grid.model,i,{labelInside:!1});s.labelMargin=r.get(["handle","margin"]);var a=ej(i.axis,t,s);return{x:a[0],y:a[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,i,r,s){var a=r.axis,o=a.grid,l=a.getGlobalExtent(!0),c=TH(o,a).getOtherAxis(a).getGlobalExtent(),u=a.dim==="x"?0:1,d=[t.x,t.y];d[u]+=i[u],d[u]=Math.min(l[1],d[u]),d[u]=Math.max(l[0],d[u]);var f=(c[1]+c[0])/2,h=[f,f];h[u]=d[u];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:d[0],y:d[1],rotation:t.rotation,cursorPoint:h,tooltipOption:p[u]}},e}(Z4e);function TH(n,e){var t={};return t[e.dim+"AxisIndex"]=e.index,n.getCartesian(t)}var aze={line:function(n,e,t){var i=ize([e,t[0]],[e,t[1]],AH(n));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(n,e,t){var i=Math.max(1,n.getBandWidth()),r=t[1]-t[0];return{type:"Rect",shape:rze([e-i/2,t[0]],[i,r],AH(n))}}};function AH(n){return n.dim==="x"?0:1}const oze=sze;var lze=function(n){Mn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(ar);const cze=lze;var Hc=Jr(),uze=tt;function tj(n,e,t){if(!Qn.node){var i=e.getZr();Hc(i).records||(Hc(i).records={}),dze(i,e);var r=Hc(i).records[n]||(Hc(i).records[n]={});r.handler=t}}function dze(n,e){if(Hc(n).initialized)return;Hc(n).initialized=!0,t("click",Or(EH,"click")),t("mousemove",Or(EH,"mousemove")),t("globalout",hze);function t(i,r){n.on(i,function(s){var a=pze(e);uze(Hc(n).records,function(o){o&&r(o,s,a.dispatchAction)}),fze(a.pendings,e)})}}function fze(n,e){var t=n.showTip.length,i=n.hideTip.length,r;t?r=n.showTip[t-1]:i&&(r=n.hideTip[i-1]),r&&(r.dispatchAction=null,e.dispatchAction(r))}function hze(n,e,t){n.handler("leave",null,t)}function EH(n,e,t,i){e.handler(n,t,i)}function pze(n){var e={showTip:[],hideTip:[]},t=function(i){var r=e[i.type];r?r.push(i):(i.dispatchAction=t,n.dispatchAction(i))};return{dispatchAction:t,pendings:e}}function iP(n,e){if(!Qn.node){var t=e.getZr(),i=(Hc(t).records||{})[n];i&&(Hc(t).records[n]=null)}}var mze=function(n){Mn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,r){var s=i.getComponent("tooltip"),a=t.get("triggerOn")||s&&s.get("triggerOn")||"mousemove|click";tj("axisPointer",r,function(o,l,c){a!=="none"&&(o==="leave"||a.indexOf(o)>=0)&&c({type:"updateAxisPointer",currTrigger:o,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(t,i){iP("axisPointer",i)},e.prototype.dispose=function(t,i){iP("axisPointer",i)},e.type="axisPointer",e}(Hd);const vze=mze;function nj(n,e){var t=[],i=n.seriesIndex,r;if(i==null||!(r=e.getSeriesByIndex(i)))return{point:[]};var s=r.getData(),a=bb(s,n);if(a==null||a<0||hn(a))return{point:[]};var o=s.getItemGraphicEl(a),l=r.coordinateSystem;if(r.getTooltipPosition)t=r.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(n.isStacked){var c=l.getBaseAxis(),u=l.getOtherAxis(c),d=u.dim,f=c.dim,h=d==="x"||d==="radius"?1:0,p=s.mapDimension(f),m=[];m[h]=s.get(p,a),m[1-h]=s.get(s.getCalculationInfo("stackResultDimension"),a),t=l.dataToPoint(m)||[]}else t=l.dataToPoint(s.getValues(hi(l.dimensions,function(g){return s.mapDimension(g)}),a))||[];else if(o){var v=o.getBoundingRect().clone();v.applyTransform(o.transform),t=[v.x+v.width/2,v.y+v.height/2]}return{point:t,el:o}}var IH=Jr();function gze(n,e,t){var i=n.currTrigger,r=[n.x,n.y],s=n,a=n.dispatchAction||Gi(t.dispatchAction,t),o=e.getComponent("axisPointer").coordSysAxesInfo;if(o){B1(r)&&(r=nj({seriesIndex:s.seriesIndex,dataIndex:s.dataIndex},e).point);var l=B1(r),c=s.axesInfo,u=o.axesInfo,d=i==="leave"||B1(r),f={},h={},p={list:[],map:{}},m={showPointer:Or(_ze,h),showTooltip:Or(bze,p)};tt(o.coordSysMap,function(g,_){var y=l||g.containPoint(r);tt(o.coordSysAxesInfo[_],function(S,w){var x=S.axis,T=Cze(c,S);if(!d&&y&&(!c||T)){var C=T&&T.value;C==null&&!l&&(C=x.pointToData(r)),C!=null&&RH(S,C,m,!1,f)}})});var v={};return tt(u,function(g,_){var y=g.linkGroup;y&&!h[_]&&tt(y.axesInfo,function(S,w){var x=h[w];if(S!==g&&x){var T=x.value;y.mapper&&(T=g.axis.scale.parse(y.mapper(T,PH(S),PH(g)))),v[g.key]=T}})}),tt(v,function(g,_){RH(u[_],g,m,!0,f)}),Sze(h,u,f),wze(p,r,n,a),xze(u,a,t),f}}function RH(n,e,t,i,r){var s=n.axis;if(!(s.scale.isBlank()||!s.containData(e))){if(!n.involveSeries){t.showPointer(n,e);return}var a=yze(e,n),o=a.payloadBatch,l=a.snapToValue;o[0]&&r.seriesIndex==null&&Nt(r,o[0]),!i&&n.snap&&s.containData(l)&&l!=null&&(e=l),t.showPointer(n,e,o),t.showTooltip(n,a,l)}}function yze(n,e){var t=e.axis,i=t.dim,r=n,s=[],a=Number.MAX_VALUE,o=-1;return tt(e.seriesModels,function(l,c){var u=l.getData().mapDimensionsAll(i),d,f;if(l.getAxisTooltipData){var h=l.getAxisTooltipData(u,n,t);f=h.dataIndices,d=h.nestestValue}else{if(f=l.getData().indicesOfNearest(u[0],n,t.type==="category"?.5:null),!f.length)return;d=l.getData().get(u[0],f[0])}if(!(d==null||!isFinite(d))){var p=n-d,m=Math.abs(p);m<=a&&((m<a||p>=0&&o<0)&&(a=m,o=p,r=d,s.length=0),tt(f,function(v){s.push({seriesIndex:l.seriesIndex,dataIndexInside:v,dataIndex:l.getData().getRawIndex(v)})}))}}),{payloadBatch:s,snapToValue:r}}function _ze(n,e,t,i){n[e.key]={value:t,payloadBatch:i}}function bze(n,e,t,i){var r=t.payloadBatch,s=e.axis,a=s.model,o=e.axisPointerModel;if(!(!e.triggerTooltip||!r.length)){var l=e.coordSys.model,c=I_(l),u=n.map[c];u||(u=n.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},n.list.push(u)),u.dataByAxis.push({axisDim:s.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:i,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:r.slice()})}}function Sze(n,e,t){var i=t.axesInfo=[];tt(e,function(r,s){var a=r.axisPointerModel.option,o=n[s];o?(!r.useHandle&&(a.status="show"),a.value=o.value,a.seriesDataIndices=(o.payloadBatch||[]).slice()):!r.useHandle&&(a.status="hide"),a.status==="show"&&i.push({axisDim:r.axis.dim,axisIndex:r.axis.model.componentIndex,value:a.value})})}function wze(n,e,t,i){if(B1(e)||!n.list.length){i({type:"hideTip"});return}var r=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:n.list})}function xze(n,e,t){var i=t.getZr(),r="axisPointerLastHighlights",s=IH(i)[r]||{},a=IH(i)[r]={};tt(n,function(c,u){var d=c.axisPointerModel.option;d.status==="show"&&c.triggerEmphasis&&tt(d.seriesDataIndices,function(f){var h=f.seriesIndex+" | "+f.dataIndex;a[h]=f})});var o=[],l=[];tt(s,function(c,u){!a[u]&&l.push(c)}),tt(a,function(c,u){!s[u]&&o.push(c)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),o.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}function Cze(n,e){for(var t=0;t<(n||[]).length;t++){var i=n[t];if(e.axis.dim===i.axisDim&&e.axis.model.componentIndex===i.axisIndex)return i}}function PH(n){var e=n.axis.model,t={},i=t.axisDim=n.axis.dim;return t.axisIndex=t[i+"AxisIndex"]=e.componentIndex,t.axisName=t[i+"AxisName"]=e.name,t.axisId=t[i+"AxisId"]=e.id,t}function B1(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function Mze(n){j4e.registerAxisPointerClass("CartesianAxisPointer",oze),n.registerComponentModel(cze),n.registerComponentView(vze),n.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!hn(t)&&(e.axisPointer.link=[t])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=V4e(e,t)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},gze)}function Tze(n,e){var t=FM(e.get("padding")),i=e.getItemStyle(["color","opacity"]);return i.fill=e.get("backgroundColor"),n=new ya({shape:{x:n.x-t[3],y:n.y-t[0],width:n.width+t[1]+t[3],height:n.height+t[0]+t[2],r:e.get("borderRadius")},style:i,silent:!0,z2:-1}),n}var Aze=function(n){Mn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(ar);const Eze=Aze;function ij(n){var e=n.get("confine");return e!=null?!!e:n.get("renderMode")==="richText"}function rj(n){if(Qn.domSupported){for(var e=document.documentElement.style,t=0,i=n.length;t<i;t++)if(n[t]in e)return n[t]}}var sj=rj(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ize=rj(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function aj(n,e){if(!n)return e;e=kX(e,!0);var t=n.indexOf(e);return n=t===-1?e:"-"+n.slice(0,t)+"-"+e,n.toLowerCase()}function Rze(n,e){var t=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return t?e?t[e]:t:null}var Pze=aj(Ize,"transition"),Nk=aj(sj,"transform"),Dze="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Qn.transform3dSupported?"will-change:transform;":"");function Lze(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function kze(n,e,t){if(!Rn(t)||t==="inside")return"";var i=n.get("backgroundColor"),r=n.get("borderWidth");e=S_(e);var s=Lze(t),a=Math.max(Math.round(r)*1.5,6),o="",l=Nk+":",c;$i(["left","right"],s)>-1?(o+="top:50%",l+="translateY(-50%) rotate("+(c=s==="left"?-225:-45)+"deg)"):(o+="left:50%",l+="translateX(-50%) rotate("+(c=s==="top"?225:45)+"deg)");var u=c*Math.PI/180,d=a+r,f=d*Math.abs(Math.cos(u))+d*Math.abs(Math.sin(u)),h=Math.round(((f-Math.SQRT2*r)/2+Math.SQRT2*r-(f-d)/2)*100)/100;o+=";"+s+":-"+h+"px";var p=e+" solid "+r+"px;",m=["position:absolute;width:"+a+"px;height:"+a+"px;z-index:-1;",o+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+i+";"];return'<div style="'+m.join("")+'"></div>'}function Oze(n,e){var t="cubic-bezier(0.23,1,0.32,1)",i=" "+n/2+"s "+t,r="opacity"+i+",visibility"+i;return e||(i=" "+n+"s "+t,r+=Qn.transformSupported?","+Nk+i:",left"+i+",top"+i),Pze+":"+r}function DH(n,e,t){var i=n.toFixed(0)+"px",r=e.toFixed(0)+"px";if(!Qn.transformSupported)return t?"top:"+r+";left:"+i+";":[["top",r],["left",i]];var s=Qn.transform3dSupported,a="translate"+(s?"3d":"")+"("+i+","+r+(s?",0":"")+")";return t?"top:0;left:0;"+Nk+":"+a+";":[["top",0],["left",0],[sj,a]]}function Nze(n){var e=[],t=n.get("fontSize"),i=n.getTextColor();i&&e.push("color:"+i),e.push("font:"+n.getFont()),t&&e.push("line-height:"+Math.round(t*3/2)+"px");var r=n.get("textShadowColor"),s=n.get("textShadowBlur")||0,a=n.get("textShadowOffsetX")||0,o=n.get("textShadowOffsetY")||0;return r&&s&&e.push("text-shadow:"+a+"px "+o+"px "+s+"px "+r),tt(["decoration","align"],function(l){var c=n.get(l);c&&e.push("text-"+l+":"+c)}),e.join(";")}function Bze(n,e,t){var i=[],r=n.get("transitionDuration"),s=n.get("backgroundColor"),a=n.get("shadowBlur"),o=n.get("shadowColor"),l=n.get("shadowOffsetX"),c=n.get("shadowOffsetY"),u=n.getModel("textStyle"),d=cY(n,"html"),f=l+"px "+c+"px "+a+"px "+o;return i.push("box-shadow:"+f),e&&r&&i.push(Oze(r,t)),s&&i.push("background-color:"+s),tt(["width","color","radius"],function(h){var p="border-"+h,m=kX(p),v=n.get(m);v!=null&&i.push(p+":"+v+(h==="color"?"":"px"))}),i.push(Nze(u)),d!=null&&i.push("padding:"+FM(d).join("px ")+"px"),i.join(";")+";"}function LH(n,e,t,i,r){var s=e&&e.painter;if(t){var a=s&&s.getViewportRoot();a&&eDe(n,a,document.body,i,r)}else{n[0]=i,n[1]=r;var o=s&&s.getViewportRootOffset();o&&(n[0]+=o.offsetLeft,n[1]+=o.offsetTop)}n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var Fze=function(){function n(e,t,i){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,Qn.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var s=this._zr=t.getZr(),a=this._appendToBody=i&&i.appendToBody;LH(this._styleCoord,s,a,t.getWidth()/2,t.getHeight()/2),a?document.body.appendChild(r):e.appendChild(r),this._container=e;var o=this;r.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!o._enterable){var c=s.handler,u=s.painter.getViewportRoot();so(u,l,!0),c.dispatch("mousemove",l)}},r.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return n.prototype.update=function(e){var t=this._container,i=Rze(t,"position"),r=t.style;r.position!=="absolute"&&i!=="absolute"&&(r.position="relative");var s=e.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this.el.className=e.get("className")||""},n.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i=this.el,r=i.style,s=this._styleCoord;i.innerHTML?r.cssText=Dze+Bze(e,!this._firstShow,this._longHide)+DH(s[0],s[1],!0)+("border-color:"+S_(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):r.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(e,t,i,r,s){var a=this.el;if(e==null){a.innerHTML="";return}var o="";if(Rn(s)&&i.get("trigger")==="item"&&!ij(i)&&(o=kze(i,r,s)),Rn(e))a.innerHTML=e+o;else if(e){a.innerHTML="",hn(e)||(e=[e]);for(var l=0;l<e.length;l++)kx(e[l])&&e[l].parentNode!==a&&a.appendChild(e[l]);if(o&&a.childNodes.length){var c=document.createElement("div");c.innerHTML=o,a.appendChild(c)}}},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},n.prototype.moveTo=function(e,t){var i=this._styleCoord;if(LH(i,this._zr,this._appendToBody,e,t),i[0]!=null&&i[1]!=null){var r=this.el.style,s=DH(i[0],i[1]);tt(s,function(a){r[a[0]]=a[1]})}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",Qn.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Gi(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},n}();const zze=Fze;var Uze=function(){function n(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),OH(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return n.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(e,t,i,r,s){var a=this;Ln(e)&&ua(""),this.el&&this._zr.remove(this.el);var o=i.getModel("textStyle");this.el=new ta({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:r,textShadowColor:o.get("textShadowColor"),fill:i.get(["textStyle","color"]),padding:cY(i,"richText"),verticalAlign:"top",align:"left"},z:i.get("z")}),tt(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(c){a.el.style[c]=i.get(c)}),tt(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(c){a.el.style[c]=o.get(c)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),i=kH(e.style);return[t.width+i.left+i.right,t.height+i.top+i.bottom]},n.prototype.moveTo=function(e,t){var i=this.el;if(i){var r=this._styleCoord;OH(r,this._zr,e,t),e=r[0],t=r[1];var s=i.style,a=Ju(s.borderWidth||0),o=kH(s);i.x=e+a+o.left,i.y=t+a+o.top,i.markRedraw()}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Gi(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function Ju(n){return Math.max(0,n)}function kH(n){var e=Ju(n.shadowBlur||0),t=Ju(n.shadowOffsetX||0),i=Ju(n.shadowOffsetY||0);return{left:Ju(e-t),right:Ju(e+t),top:Ju(e-i),bottom:Ju(e+i)}}function OH(n,e,t,i){n[0]=t,n[1]=i,n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}const Hze=Uze;var Vze=new ya({shape:{x:-1,y:-1,width:2,height:2}}),$ze=function(n){Mn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,i){if(!(Qn.node||!i.getDom())){var r=t.getComponent("tooltip"),s=this._renderMode=OLe(r.get("renderMode"));this._tooltipContent=s==="richText"?new Hze(i):new zze(i.getDom(),i,{appendToBody:r.get("appendToBody",!0)})}},e.prototype.render=function(t,i,r){if(!(Qn.node||!r.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=i,this._api=r;var s=this._tooltipContent;s.update(t),s.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?dY(this,"_updatePosition",50,"fixRate"):qR(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,i=t.get("triggerOn");tj("itemTooltip",this._api,Gi(function(r,s,a){i!=="none"&&(i.indexOf(r)>=0?this._tryShow(s,a):r==="leave"&&this._hide(a))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,i=this._ecModel,r=this._api,s=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&s!=="none"&&s!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!r.isDisposed()&&a.manuallyShowTip(t,i,r,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,i,r,s){if(!(s.from===this.uid||Qn.node||!r.getDom())){var a=NH(s,r);this._ticket="";var o=s.dataByCoordSys,l=qze(s,i,r);if(l){var c=l.el.getBoundingRect().clone();c.applyTransform(l.el.transform),this._tryShow({offsetX:c.x+c.width/2,offsetY:c.y+c.height/2,target:l.el,position:s.position,positionDefault:"bottom"},a)}else if(s.tooltip&&s.x!=null&&s.y!=null){var u=Vze;u.x=s.x,u.y=s.y,u.update(),or(u).tooltipConfig={name:null,option:s.tooltip},this._tryShow({offsetX:s.x,offsetY:s.y,target:u},a)}else if(o)this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,dataByCoordSys:o,tooltipOption:s.tooltipOption},a);else if(s.seriesIndex!=null){if(this._manuallyAxisShowTip(t,i,r,s))return;var d=nj(s,i),f=d.point[0],h=d.point[1];f!=null&&h!=null&&this._tryShow({offsetX:f,offsetY:h,target:d.el,position:s.position,positionDefault:"bottom"},a)}else s.x!=null&&s.y!=null&&(r.dispatchAction({type:"updateAxisPointer",x:s.x,y:s.y}),this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,target:r.getZr().findHover(s.x,s.y).target},a))}},e.prototype.manuallyHideTip=function(t,i,r,s){var a=this._tooltipContent;this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,s.from!==this.uid&&this._hide(NH(s,r))},e.prototype._manuallyAxisShowTip=function(t,i,r,s){var a=s.seriesIndex,o=s.dataIndex,l=i.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||o==null||l==null)){var c=i.getSeriesByIndex(a);if(c){var u=c.getData(),d=g0([u.getItemModel(o),c,(c.coordinateSystem||{}).model],this._tooltipModel);if(d.get("trigger")==="axis")return r.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:o,position:s.position}),!0}}},e.prototype._tryShow=function(t,i){var r=t.target,s=this._tooltipModel;if(s){this._lastX=t.offsetX,this._lastY=t.offsetY;var a=t.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,t);else if(r){this._lastDataByCoordSys=null;var o,l;W0(r,function(c){if(or(c).dataIndex!=null)return o=c,!0;if(or(c).tooltipConfig!=null)return l=c,!0},!0),o?this._showSeriesItemTooltip(t,o,i):l?this._showComponentItemTooltip(t,l,i):this._hide(i)}else this._lastDataByCoordSys=null,this._hide(i)}},e.prototype._showOrMove=function(t,i){var r=t.get("showDelay");i=Gi(i,this),clearTimeout(this._showTimout),r>0?this._showTimout=setTimeout(i,r):i()},e.prototype._showAxisTooltip=function(t,i){var r=this._ecModel,s=this._tooltipModel,a=[i.offsetX,i.offsetY],o=g0([i.tooltipOption],s),l=this._renderMode,c=[],u=M_("section",{blocks:[],noHeader:!0}),d=[],f=new BA;tt(t,function(_){tt(_.dataByAxis,function(y){var S=r.getComponent(y.axisDim+"Axis",y.axisIndex),w=y.value;if(!(!S||w==null)){var x=JY(w,S.axis,r,y.seriesDataIndices,y.valueLabelOpt),T=M_("section",{header:x,noHeader:!Bl(x),sortBlocks:!0,blocks:[]});u.blocks.push(T),tt(y.seriesDataIndices,function(C){var M=r.getSeriesByIndex(C.seriesIndex),A=C.dataIndexInside,E=M.getDataParams(A);if(!(E.dataIndex<0)){E.axisDim=y.axisDim,E.axisIndex=y.axisIndex,E.axisType=y.axisType,E.axisId=y.axisId,E.axisValue=KY(S.axis,{value:w}),E.axisValueLabel=x,E.marker=f.makeTooltipMarker("item",S_(E.color),l);var I=xU(M.formatTooltip(A,!0,null)),P=I.frag;if(P){var D=g0([M],s).get("valueFormatter");T.blocks.push(D?Nt({valueFormatter:D},P):P)}I.text&&d.push(I.text),c.push(E)}})}})}),u.blocks.reverse(),d.reverse();var h=i.position,p=o.get("order"),m=EU(u,f,l,p,r.get("useUTC"),o.get("textStyle"));m&&d.unshift(m);var v=l==="richText"?`

`:"<br/>",g=d.join(v);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(t,c)?this._updatePosition(o,h,a[0],a[1],this._tooltipContent,c):this._showTooltipContent(o,g,c,Math.random()+"",a[0],a[1],h,null,f)})},e.prototype._showSeriesItemTooltip=function(t,i,r){var s=this._ecModel,a=or(i),o=a.seriesIndex,l=s.getSeriesByIndex(o),c=a.dataModel||l,u=a.dataIndex,d=a.dataType,f=c.getData(d),h=this._renderMode,p=t.positionDefault,m=g0([f.getItemModel(u),c,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),v=m.get("trigger");if(!(v!=null&&v!=="item")){var g=c.getDataParams(u,d),_=new BA;g.marker=_.makeTooltipMarker("item",S_(g.color),h);var y=xU(c.formatTooltip(u,!1,d)),S=m.get("order"),w=m.get("valueFormatter"),x=y.frag,T=x?EU(w?Nt({valueFormatter:w},x):x,_,h,S,s.get("useUTC"),m.get("textStyle")):y.text,C="item_"+c.name+"_"+u;this._showOrMove(m,function(){this._showTooltipContent(m,T,g,C,t.offsetX,t.offsetY,t.position,t.target,_)}),r({type:"showTip",dataIndexInside:u,dataIndex:f.getRawIndex(u),seriesIndex:o,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,i,r){var s=or(i),a=s.tooltipConfig,o=a.option||{};if(Rn(o)){var l=o;o={content:l,formatter:l}}var c=[o],u=this._ecModel.getComponent(s.componentMainType,s.componentIndex);u&&c.push(u),c.push({formatter:o.content});var d=t.positionDefault,f=g0(c,this._tooltipModel,d?{position:d}:null),h=f.get("content"),p=Math.random()+"",m=new BA;this._showOrMove(f,function(){var v=vi(f.get("formatterParams")||{});this._showTooltipContent(f,h,v,p,t.offsetX,t.offsetY,t.position,i,m)}),r({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,i,r,s,a,o,l,c,u){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var d=this._tooltipContent;d.setEnterable(t.get("enterable"));var f=t.get("formatter");l=l||t.get("position");var h=i,p=this._getNearestPoint([a,o],r,t.get("trigger"),t.get("borderColor")),m=p.color;if(f)if(Rn(f)){var v=t.ecModel.get("useUTC"),g=hn(r)?r[0]:r,_=g&&g.axisType&&g.axisType.indexOf("time")>=0;h=f,_&&(h=LX(g.axisValue,h,v)),h=OX(h,r,!0)}else if(Ri(f)){var y=Gi(function(S,w){S===this._ticket&&(d.setContent(w,u,t,m,l),this._updatePosition(t,l,a,o,d,r,c))},this);this._ticket=s,h=f(r,s,y)}else h=f;d.setContent(h,u,t,m,l),d.show(t,m),this._updatePosition(t,l,a,o,d,r,c)}},e.prototype._getNearestPoint=function(t,i,r,s){if(r==="axis"||hn(i))return{color:s||(this._renderMode==="html"?"#fff":"none")};if(!hn(i))return{color:s||i.color||i.borderColor}},e.prototype._updatePosition=function(t,i,r,s,a,o,l){var c=this._api.getWidth(),u=this._api.getHeight();i=i||t.get("position");var d=a.getSize(),f=t.get("align"),h=t.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),Ri(i)&&(i=i([r,s],o,a.el,p,{viewSize:[c,u],contentSize:d.slice()})),hn(i))r=Dr(i[0],c),s=Dr(i[1],u);else if(Ln(i)){var m=i;m.width=d[0],m.height=d[1];var v=w_(m,{width:c,height:u});r=v.x,s=v.y,f=null,h=null}else if(Rn(i)&&l){var g=Kze(i,p,d,t.get("borderWidth"));r=g[0],s=g[1]}else{var g=Gze(r,s,a,c,u,f?null:20,h?null:20);r=g[0],s=g[1]}if(f&&(r-=BH(f)?d[0]/2:f==="right"?d[0]:0),h&&(s-=BH(h)?d[1]/2:h==="bottom"?d[1]:0),ij(t)){var g=Wze(r,s,a,c,u);r=g[0],s=g[1]}a.moveTo(r,s)},e.prototype._updateContentNotChangedOnAxis=function(t,i){var r=this._lastDataByCoordSys,s=this._cbParamsList,a=!!r&&r.length===t.length;return a&&tt(r,function(o,l){var c=o.dataByAxis||[],u=t[l]||{},d=u.dataByAxis||[];a=a&&c.length===d.length,a&&tt(c,function(f,h){var p=d[h]||{},m=f.seriesDataIndices||[],v=p.seriesDataIndices||[];a=a&&f.value===p.value&&f.axisType===p.axisType&&f.axisId===p.axisId&&m.length===v.length,a&&tt(m,function(g,_){var y=v[_];a=a&&g.seriesIndex===y.seriesIndex&&g.dataIndex===y.dataIndex}),s&&tt(f.seriesDataIndices,function(g){var _=g.seriesIndex,y=i[_],S=s[_];y&&S&&S.data!==y.data&&(a=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=i,!!a},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,i){Qn.node||!i.getDom()||(qR(this,"_updatePosition"),this._tooltipContent.dispose(),iP("itemTooltip",i))},e.type="tooltip",e}(Hd);function g0(n,e,t){var i=e.ecModel,r;t?(r=new Ps(t,i,i),r=new Ps(e.option,r,i)):r=e;for(var s=n.length-1;s>=0;s--){var a=n[s];a&&(a instanceof Ps&&(a=a.get("tooltip",!0)),Rn(a)&&(a={formatter:a}),a&&(r=new Ps(a,r,i)))}return r}function NH(n,e){return n.dispatchAction||Gi(e.dispatchAction,e)}function Gze(n,e,t,i,r,s,a){var o=t.getSize(),l=o[0],c=o[1];return s!=null&&(n+l+s+2>i?n-=l+s:n+=s),a!=null&&(e+c+a>r?e-=c+a:e+=a),[n,e]}function Wze(n,e,t,i,r){var s=t.getSize(),a=s[0],o=s[1];return n=Math.min(n+a,i)-a,e=Math.min(e+o,r)-o,n=Math.max(n,0),e=Math.max(e,0),[n,e]}function Kze(n,e,t,i){var r=t[0],s=t[1],a=Math.ceil(Math.SQRT2*i)+8,o=0,l=0,c=e.width,u=e.height;switch(n){case"inside":o=e.x+c/2-r/2,l=e.y+u/2-s/2;break;case"top":o=e.x+c/2-r/2,l=e.y-s-a;break;case"bottom":o=e.x+c/2-r/2,l=e.y+u+a;break;case"left":o=e.x-r-a,l=e.y+u/2-s/2;break;case"right":o=e.x+c+a,l=e.y+u/2-s/2}return[o,l]}function BH(n){return n==="center"||n==="middle"}function qze(n,e,t){var i=tk(n).queryOptionMap,r=i.keys()[0];if(!(!r||r==="series")){var s=Sb(e,r,i.get(r),{useDefault:!1,enableAll:!1,enableNone:!1}),a=s.models[0];if(a){var o=t.getViewOfComponentModel(a),l;if(o.group.traverse(function(c){var u=or(c).tooltipConfig;if(u&&u.name===n.name)return l=c,!0}),l)return{componentMainType:r,componentIndex:a.componentIndex,el:l}}}}const Xze=$ze;function Yze(n){Uv(Mze),n.registerComponentModel(Eze),n.registerComponentView(Xze),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},ga),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},ga)}var jze=function(n){Mn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(ar),Qze=function(n){Mn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,r){if(this.group.removeAll(),!!t.get("show")){var s=this.group,a=t.getModel("textStyle"),o=t.getModel("subtextStyle"),l=t.get("textAlign"),c=ui(t.get("textBaseline"),t.get("textVerticalAlign")),u=new ta({style:Ud(a,{text:t.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),d=u.getBoundingRect(),f=t.get("subtext"),h=new ta({style:Ud(o,{text:f,fill:o.getTextColor(),y:d.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=t.get("link"),m=t.get("sublink"),v=t.get("triggerEvent",!0);u.silent=!p&&!v,h.silent=!m&&!v,p&&u.on("click",function(){sU(p,"_"+t.get("target"))}),m&&h.on("click",function(){sU(m,"_"+t.get("subtarget"))}),or(u).eventData=or(h).eventData=v?{componentType:"title",componentIndex:t.componentIndex}:null,s.add(u),f&&s.add(h);var g=s.getBoundingRect(),_=t.getBoxLayoutParams();_.width=g.width,_.height=g.height;var y=w_(_,{width:r.getWidth(),height:r.getHeight()},t.get("padding"));l||(l=t.get("left")||t.get("right"),l==="middle"&&(l="center"),l==="right"?y.x+=y.width:l==="center"&&(y.x+=y.width/2)),c||(c=t.get("top")||t.get("bottom"),c==="center"&&(c="middle"),c==="bottom"?y.y+=y.height:c==="middle"&&(y.y+=y.height/2),c=c||"top"),s.x=y.x,s.y=y.y,s.markRedraw();var S={align:l,verticalAlign:c};u.setStyle(S),h.setStyle(S),g=s.getBoundingRect();var w=y.margin,x=t.getItemStyle(["color","opacity"]);x.fill=t.get("backgroundColor");var T=new ya({shape:{x:g.x-w[3],y:g.y-w[0],width:g.width+w[1]+w[3],height:g.height+w[0]+w[2],r:t.get("borderRadius")},style:x,subPixelOptimize:!0,silent:!0});s.add(T)}},e.type="title",e}(Hd);function Zze(n){n.registerComponentModel(jze),n.registerComponentView(Qze)}var Jze=function(n,e){if(e==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},eUe=function(n){Mn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,i,r){this.mergeDefaultAndTheme(t,r),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,i){n.prototype.mergeOption.call(this,t,i),this._updateSelector(t)},e.prototype._updateSelector=function(t){var i=t.selector,r=this.ecModel;i===!0&&(i=t.selector=["all","inverse"]),hn(i)&&tt(i,function(s,a){Rn(s)&&(s={type:s}),i[a]=er(s,Jze(r,s.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var i=!1,r=0;r<t.length;r++){var s=t[r].get("name");if(this.isSelected(s)){this.select(s),i=!0;break}}!i&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var i=[],r=[];t.eachRawSeries(function(l){var c=l.name;r.push(c);var u;if(l.legendVisualProvider){var d=l.legendVisualProvider,f=d.getAllNames();t.isSeriesFiltered(l)||(r=r.concat(f)),f.length?i=i.concat(f):u=!0}else u=!0;u&&ek(l)&&i.push(l.name)}),this._availableNames=r;var s=this.get("data")||i,a=di(),o=hi(s,function(l){return(Rn(l)||vr(l))&&(l={name:l}),a.get(l.name)?null:(a.set(l.name,!0),new Ps(l,this,this.ecModel))},this);this._data=fo(o,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var i=this.option.selected,r=this.get("selectedMode");if(r==="single"){var s=this._data;tt(s,function(a){i[a.get("name")]=!1})}i[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var i=this.option.selected;i.hasOwnProperty(t)||(i[t]=!0),this[i[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,i=this.option.selected;tt(t,function(r){i[r.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,i=this.option.selected;tt(t,function(r){var s=r.get("name",!0);i.hasOwnProperty(s)||(i[s]=!0),i[s]=!i[s]})},e.prototype.isSelected=function(t){var i=this.option.selected;return!(i.hasOwnProperty(t)&&!i[t])&&$i(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(ar);const rP=eUe;var Lp=Or,sP=tt,zS=Ql,tUe=function(n){Mn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new zS),this.group.add(this._selectorGroup=new zS),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,i,r){var s=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var a=t.get("align"),o=t.get("orient");(!a||a==="auto")&&(a=t.get("left")==="right"&&o==="vertical"?"right":"left");var l=t.get("selector",!0),c=t.get("selectorPosition",!0);l&&(!c||c==="auto")&&(c=o==="horizontal"?"end":"start"),this.renderInner(a,t,i,r,l,o,c);var u=t.getBoxLayoutParams(),d={width:r.getWidth(),height:r.getHeight()},f=t.get("padding"),h=w_(u,d,f),p=this.layoutInner(t,a,h,s,l,c),m=w_(nr({width:p.width,height:p.height},u),d,f);this.group.x=m.x-p.x,this.group.y=m.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Tze(p,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,i,r,s,a,o,l){var c=this.getContentGroup(),u=di(),d=i.get("selectedMode"),f=[];r.eachRawSeries(function(h){!h.get("legendHoverLink")&&f.push(h.id)}),sP(i.getData(),function(h,p){var m=h.get("name");if(!this.newlineDisabled&&(m===""||m===`
`)){var v=new zS;v.newline=!0,c.add(v);return}var g=r.getSeriesByName(m)[0];if(!u.get(m))if(g){var _=g.getData(),y=_.getVisual("legendLineStyle")||{},S=_.getVisual("legendIcon"),w=_.getVisual("style"),x=this._createItem(g,m,p,h,i,t,y,w,S,d,s);x.on("click",Lp(FH,m,null,s,f)).on("mouseover",Lp(aP,g.name,null,s,f)).on("mouseout",Lp(oP,g.name,null,s,f)),u.set(m,!0)}else r.eachRawSeries(function(T){if(!u.get(m)&&T.legendVisualProvider){var C=T.legendVisualProvider;if(!C.containName(m))return;var M=C.indexOfName(m),A=C.getItemVisual(M,"style"),E=C.getItemVisual(M,"legendIcon"),I=Eh(A.fill);I&&I[3]===0&&(I[3]=.2,A=Nt(Nt({},A),{fill:Y3(I,"rgba")}));var P=this._createItem(T,m,p,h,i,t,{},A,E,d,s);P.on("click",Lp(FH,null,m,s,f)).on("mouseover",Lp(aP,null,m,s,f)).on("mouseout",Lp(oP,null,m,s,f)),u.set(m,!0)}},this)},this),a&&this._createSelector(a,i,s,o,l)},e.prototype._createSelector=function(t,i,r,s,a){var o=this.getSelectorGroup();sP(t,function(c){var u=c.type,d=new ta({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){r.dispatchAction({type:u==="all"?"legendAllSelect":"legendInverseSelect"})}});o.add(d);var f=i.getModel("selectorLabel"),h=i.getModel(["emphasis","selectorLabel"]);EX(d,{normal:f,emphasis:h},{defaultText:c.title}),NR(d)})},e.prototype._createItem=function(t,i,r,s,a,o,l,c,u,d,f){var h=t.visualDrawType,p=a.get("itemWidth"),m=a.get("itemHeight"),v=a.isSelected(i),g=s.get("symbolRotate"),_=s.get("symbolKeepAspect"),y=s.get("icon");u=y||u||"roundRect";var S=nUe(u,s,l,c,h,v,f),w=new zS,x=s.getModel("textStyle");if(Ri(t.getLegendIcon)&&(!y||y==="inherit"))w.add(t.getLegendIcon({itemWidth:p,itemHeight:m,icon:u,iconRotate:g,itemStyle:S.itemStyle,lineStyle:S.lineStyle,symbolKeepAspect:_}));else{var T=y==="inherit"&&t.getData().getVisual("symbol")?g==="inherit"?t.getData().getVisual("symbolRotate"):g:0;w.add(iUe({itemWidth:p,itemHeight:m,icon:u,iconRotate:T,itemStyle:S.itemStyle,lineStyle:S.lineStyle,symbolKeepAspect:_}))}var C=o==="left"?p+5:-5,M=o,A=a.get("formatter"),E=i;Rn(A)&&A?E=A.replace("{name}",i??""):Ri(A)&&(E=A(i));var I=v?x.getTextColor():s.get("inactiveColor");w.add(new ta({style:Ud(x,{text:E,x:C,y:m/2,fill:I,align:M,verticalAlign:"middle"},{inheritColor:I})}));var P=new ya({shape:w.getBoundingRect(),invisible:!0}),D=s.getModel("tooltip");return D.get("show")&&gk({el:P,componentModel:a,itemName:i,itemTooltipOption:D.option}),w.add(P),w.eachChild(function(L){L.silent=!0}),P.silent=!d,this.getContentGroup().add(w),NR(w),w.__legendDataIndex=r,w},e.prototype.layoutInner=function(t,i,r,s,a,o){var l=this.getContentGroup(),c=this.getSelectorGroup();gy(t.get("orient"),l,t.get("itemGap"),r.width,r.height);var u=l.getBoundingRect(),d=[-u.x,-u.y];if(c.markRedraw(),l.markRedraw(),a){gy("horizontal",c,t.get("selectorItemGap",!0));var f=c.getBoundingRect(),h=[-f.x,-f.y],p=t.get("selectorButtonGap",!0),m=t.getOrient().index,v=m===0?"width":"height",g=m===0?"height":"width",_=m===0?"y":"x";o==="end"?h[m]+=u[v]+p:d[m]+=f[v]+p,h[1-m]+=u[g]/2-f[g]/2,c.x=h[0],c.y=h[1],l.x=d[0],l.y=d[1];var y={x:0,y:0};return y[v]=u[v]+p+f[v],y[g]=Math.max(u[g],f[g]),y[_]=Math.min(0,f[_]+h[1-m]),y}else return l.x=d[0],l.y=d[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(Hd);function nUe(n,e,t,i,r,s,a){function o(v,g){v.lineWidth==="auto"&&(v.lineWidth=g.lineWidth>0?2:0),sP(v,function(_,y){v[y]==="inherit"&&(v[y]=g[y])})}var l=e.getModel("itemStyle"),c=l.getItemStyle(),u=n.lastIndexOf("empty",0)===0?"fill":"stroke",d=l.getShallow("decal");c.decal=!d||d==="inherit"?i.decal:ZR(d,a),c.fill==="inherit"&&(c.fill=i[r]),c.stroke==="inherit"&&(c.stroke=i[u]),c.opacity==="inherit"&&(c.opacity=(r==="fill"?i:t).opacity),o(c,i);var f=e.getModel("lineStyle"),h=f.getLineStyle();if(o(h,t),c.fill==="auto"&&(c.fill=i.fill),c.stroke==="auto"&&(c.stroke=i.fill),h.stroke==="auto"&&(h.stroke=i.fill),!s){var p=e.get("inactiveBorderWidth"),m=c[u];c.lineWidth=p==="auto"?i.lineWidth>0&&m?2:0:c.lineWidth,c.fill=e.get("inactiveColor"),c.stroke=e.get("inactiveBorderColor"),h.stroke=f.get("inactiveColor"),h.lineWidth=f.get("inactiveWidth")}return{itemStyle:c,lineStyle:h}}function iUe(n){var e=n.icon||"roundRect",t=Ik(e,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return t.setStyle(n.itemStyle),t.rotation=(n.iconRotate||0)*Math.PI/180,t.setOrigin([n.itemWidth/2,n.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function FH(n,e,t,i){oP(n,e,t,i),t.dispatchAction({type:"legendToggleSelect",name:n??e}),aP(n,e,t,i)}function oj(n){for(var e=n.getZr().storage.getDisplayList(),t,i=0,r=e.length;i<r&&!(t=e[i].states.emphasis);)i++;return t&&t.hoverLayer}function aP(n,e,t,i){oj(t)||t.dispatchAction({type:"highlight",seriesName:n,name:e,excludeSeriesId:i})}function oP(n,e,t,i){oj(t)||t.dispatchAction({type:"downplay",seriesName:n,name:e,excludeSeriesId:i})}const lj=tUe;function rUe(n){var e=n.findComponents({mainType:"legend"});e&&e.length&&n.filterSeries(function(t){for(var i=0;i<e.length;i++)if(!e[i].isSelected(t.name))return!1;return!0})}function y0(n,e,t){var i={},r=n==="toggleSelected",s;return t.eachComponent("legend",function(a){r&&s!=null?a[s?"select":"unSelect"](e.name):n==="allSelect"||n==="inverseSelect"?a[n]():(a[n](e.name),s=a.isSelected(e.name));var o=a.getData();tt(o,function(l){var c=l.get("name");if(!(c===`
`||c==="")){var u=a.isSelected(c);i.hasOwnProperty(c)?i[c]=i[c]&&u:i[c]=u}})}),n==="allSelect"||n==="inverseSelect"?{selected:i}:{name:e.name,selected:i}}function sUe(n){n.registerAction("legendToggleSelect","legendselectchanged",Or(y0,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",Or(y0,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",Or(y0,"inverseSelect")),n.registerAction("legendSelect","legendselected",Or(y0,"select")),n.registerAction("legendUnSelect","legendunselected",Or(y0,"unSelect"))}function cj(n){n.registerComponentModel(rP),n.registerComponentView(lj),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,rUe),n.registerSubTypeDefaulter("legend",function(){return"plain"}),sUe(n)}var aUe=function(n){Mn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,i,r){var s=Sk(t);n.prototype.init.call(this,t,i,r),zH(this,t,s)},e.prototype.mergeOption=function(t,i){n.prototype.mergeOption.call(this,t,i),zH(this,this.option,t)},e.type="legend.scroll",e.defaultOption=wOe(rP.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(rP);function zH(n,e,t){var i=n.getOrient(),r=[1,1];r[i.index]=0,x_(e,t,{type:"box",ignoreSize:!!r})}const oUe=aUe;var UH=Ql,eE=["width","height"],tE=["x","y"],lUe=function(n){Mn(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new UH),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new UH)},e.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,i,r,s,a,o,l){var c=this;n.prototype.renderInner.call(this,t,i,r,s,a,o,l);var u=this._controllerGroup,d=i.get("pageIconSize",!0),f=hn(d)?d:[d,d];p("pagePrev",0);var h=i.getModel("pageTextStyle");u.add(new ta({name:"pageText",style:{text:"xx/xx",fill:h.getTextColor(),font:h.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(m,v){var g=m+"DataIndex",_=vk(i.get("pageIcons",!0)[i.getOrient().name][v],{onclick:Gi(c._pageGo,c,g,i,s)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});_.name=m,u.add(_)}},e.prototype.layoutInner=function(t,i,r,s,a,o){var l=this.getSelectorGroup(),c=t.getOrient().index,u=eE[c],d=tE[c],f=eE[1-c],h=tE[1-c];a&&gy("horizontal",l,t.get("selectorItemGap",!0));var p=t.get("selectorButtonGap",!0),m=l.getBoundingRect(),v=[-m.x,-m.y],g=vi(r);a&&(g[u]=r[u]-m[u]-p);var _=this._layoutContentAndController(t,s,g,c,u,f,h,d);if(a){if(o==="end")v[c]+=_[u]+p;else{var y=m[u]+p;v[c]-=y,_[d]-=y}_[u]+=m[u]+p,v[1-c]+=_[h]+_[f]/2-m[f]/2,_[f]=Math.max(_[f],m[f]),_[h]=Math.min(_[h],m[h]+v[1-c]),l.x=v[0],l.y=v[1],l.markRedraw()}return _},e.prototype._layoutContentAndController=function(t,i,r,s,a,o,l,c){var u=this.getContentGroup(),d=this._containerGroup,f=this._controllerGroup;gy(t.get("orient"),u,t.get("itemGap"),s?r.width:null,s?null:r.height),gy("horizontal",f,t.get("pageButtonItemGap",!0));var h=u.getBoundingRect(),p=f.getBoundingRect(),m=this._showController=h[a]>r[a],v=[-h.x,-h.y];i||(v[s]=u[c]);var g=[0,0],_=[-p.x,-p.y],y=ui(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(m){var S=t.get("pageButtonPosition",!0);S==="end"?_[s]+=r[a]-p[a]:g[s]+=p[a]+y}_[1-s]+=h[o]/2-p[o]/2,u.setPosition(v),d.setPosition(g),f.setPosition(_);var w={x:0,y:0};if(w[a]=m?r[a]:h[a],w[o]=Math.max(h[o],p[o]),w[l]=Math.min(0,p[l]+_[1-s]),d.__rectSize=r[a],m){var x={x:0,y:0};x[a]=Math.max(r[a]-p[a]-y,0),x[o]=w[o],d.setClipPath(new ya({shape:x})),d.__rectSize=x[a]}else f.eachChild(function(C){C.attr({invisible:!0,silent:!0})});var T=this._getPageInfo(t);return T.pageIndex!=null&&zv(u,{x:T.contentPosition[0],y:T.contentPosition[1]},m?t:null),this._updatePageInfoView(t,T),w},e.prototype._pageGo=function(t,i,r){var s=this._getPageInfo(i)[t];s!=null&&r.dispatchAction({type:"legendScroll",scrollDataIndex:s,legendId:i.id})},e.prototype._updatePageInfoView=function(t,i){var r=this._controllerGroup;tt(["pagePrev","pageNext"],function(u){var d=u+"DataIndex",f=i[d]!=null,h=r.childOfName(u);h&&(h.setStyle("fill",f?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),h.cursor=f?"pointer":"default")});var s=r.childOfName("pageText"),a=t.get("pageFormatter"),o=i.pageIndex,l=o!=null?o+1:0,c=i.pageCount;s&&a&&s.setStyle("text",Rn(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",c==null?"":c+""):a({current:l,total:c}))},e.prototype._getPageInfo=function(t){var i=t.get("scrollDataIndex",!0),r=this.getContentGroup(),s=this._containerGroup.__rectSize,a=t.getOrient().index,o=eE[a],l=tE[a],c=this._findTargetItemIndex(i),u=r.children(),d=u[c],f=u.length,h=f?1:0,p={contentPosition:[r.x,r.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!d)return p;var m=S(d);p.contentPosition[a]=-m.s;for(var v=c+1,g=m,_=m,y=null;v<=f;++v)y=S(u[v]),(!y&&_.e>g.s+s||y&&!w(y,g.s))&&(_.i>g.i?g=_:g=y,g&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=g.i),++p.pageCount)),_=y;for(var v=c-1,g=m,_=m,y=null;v>=-1;--v)y=S(u[v]),(!y||!w(_,y.s))&&g.i<_.i&&(_=g,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=g.i),++p.pageCount,++p.pageIndex),g=y;return p;function S(x){if(x){var T=x.getBoundingRect(),C=T[l]+x[l];return{s:C,e:C+T[o],i:x.__legendDataIndex}}}function w(x,T){return x.e>=T&&x.s<=T+s}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var i,r=this.getContentGroup(),s;return r.eachChild(function(a,o){var l=a.__legendDataIndex;s==null&&l!=null&&(s=o),l===t&&(i=o)}),i??s},e.type="legend.scroll",e}(lj);const cUe=lUe;function uUe(n){n.registerAction("legendScroll","legendscroll",function(e,t){var i=e.scrollDataIndex;i!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(r){r.setScrollDataIndex(i)})})}function dUe(n){Uv(cj),n.registerComponentModel(oUe),n.registerComponentView(cUe),uUe(n)}function fUe(n){Uv(cj),Uv(dUe)}var nE=null;function hUe(n){return nE||(nE=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),nE(n)}var iE=null;function pUe(n){iE||(iE=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),iE(n)}function mUe(n){var e=document.createElement("style");return e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n)),(document.querySelector("head")||document.body).appendChild(e),e}function US(n,e){e===void 0&&(e={});var t=document.createElement(n);return Object.keys(e).forEach(function(i){t[i]=e[i]}),t}function uj(n,e,t){var i=window.getComputedStyle(n,t||null)||{display:"none"};return i[e]}function lP(n){if(!document.documentElement.contains(n))return{detached:!0,rendered:!1};for(var e=n;e!==document;){if(uj(e,"display")==="none")return{detached:!1,rendered:!1};e=e.parentNode}return{detached:!1,rendered:!0}}var vUe='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',cP=0,F1=null;function gUe(n,e){n.__resize_mutation_handler__||(n.__resize_mutation_handler__=bUe.bind(n));var t=n.__resize_listeners__;if(!t){if(n.__resize_listeners__=[],window.ResizeObserver){var i=n.offsetWidth,r=n.offsetHeight,s=new ResizeObserver(function(){!n.__resize_observer_triggered__&&(n.__resize_observer_triggered__=!0,n.offsetWidth===i&&n.offsetHeight===r)||nC(n)}),a=lP(n),o=a.detached,l=a.rendered;n.__resize_observer_triggered__=o===!1&&l===!1,n.__resize_observer__=s,s.observe(n)}else if(n.attachEvent&&n.addEventListener)n.__resize_legacy_resize_handler__=function(){nC(n)},n.attachEvent("onresize",n.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",n.__resize_mutation_handler__);else if(cP||(F1=mUe(vUe)),SUe(n),n.__resize_rendered__=lP(n).rendered,window.MutationObserver){var c=new MutationObserver(n.__resize_mutation_handler__);c.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),n.__resize_mutation_observer__=c}}n.__resize_listeners__.push(e),cP++}function yUe(n,e){var t=n.__resize_listeners__;if(t){if(e&&t.splice(t.indexOf(e),1),!t.length||!e){if(n.detachEvent&&n.removeEventListener){n.detachEvent("onresize",n.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",n.__resize_mutation_handler__);return}n.__resize_observer__?(n.__resize_observer__.unobserve(n),n.__resize_observer__.disconnect(),n.__resize_observer__=null):(n.__resize_mutation_observer__&&(n.__resize_mutation_observer__.disconnect(),n.__resize_mutation_observer__=null),n.removeEventListener("scroll",Bk),n.removeChild(n.__resize_triggers__.triggers),n.__resize_triggers__=null),n.__resize_listeners__=null}!--cP&&F1&&F1.parentNode.removeChild(F1)}}function _Ue(n){var e=n.__resize_last__,t=e.width,i=e.height,r=n.offsetWidth,s=n.offsetHeight;return r!==t||s!==i?{width:r,height:s}:null}function bUe(){var n=lP(this),e=n.rendered,t=n.detached;e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(Fk(this),this.addEventListener("scroll",Bk,!0)),this.__resize_rendered__=e,nC(this))}function Bk(){var n=this;Fk(this),this.__resize_raf__&&pUe(this.__resize_raf__),this.__resize_raf__=hUe(function(){var e=_Ue(n);e&&(n.__resize_last__=e,nC(n))})}function nC(n){!n||!n.__resize_listeners__||n.__resize_listeners__.forEach(function(e){e.call(n,n)})}function SUe(n){var e=uj(n,"position");(!e||e==="static")&&(n.style.position="relative"),n.__resize_old_position__=e,n.__resize_last__={};var t=US("div",{className:"resize-triggers"}),i=US("div",{className:"resize-expand-trigger"}),r=US("div"),s=US("div",{className:"resize-contract-trigger"});i.appendChild(r),t.appendChild(i),t.appendChild(s),n.appendChild(t),n.__resize_triggers__={triggers:t,expand:i,expandChild:r,contract:s},Fk(n),n.addEventListener("scroll",Bk,!0),n.__resize_last__={width:n.offsetWidth,height:n.offsetHeight}}function Fk(n){var e=n.__resize_triggers__,t=e.expand,i=e.expandChild,r=e.contract,s=r.scrollWidth,a=r.scrollHeight,o=t.offsetWidth,l=t.offsetHeight,c=t.scrollWidth,u=t.scrollHeight;r.scrollLeft=s,r.scrollTop=a,i.style.width=o+1+"px",i.style.height=l+1+"px",t.scrollLeft=c,t.scrollTop=u}var Lc=function(){return Lc=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Lc.apply(this,arguments)},wUe=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function xUe(n){return e=Object.create(null),wUe.forEach(function(t){e[t]=function(i){return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(!n.value)throw new Error("ECharts is not initialized yet.");return n.value[i].apply(n.value,r)}}(t)}),e;var e}var CUe={autoresize:[Boolean,Object]},MUe=/^on[^a-z]/,TUe=function(n){return MUe.test(n)};function HS(n,e){var t=b(n);return t&&typeof t=="object"&&"value"in t?t.value||e:t||e}var AUe="ecLoadingOptions",EUe={loading:Boolean,loadingOptions:Object},_0=null,dj="x-vue-echarts",HH=[],b0=[];(function(n,e){if(n&&typeof document<"u"){var t,i=e.prepend===!0?"prepend":"append",r=e.singleTag===!0,s=typeof e.container=="string"?document.querySelector(e.container):document.getElementsByTagName("head")[0];if(r){var a=HH.indexOf(s);a===-1&&(a=HH.push(s)-1,b0[a]={}),t=b0[a]&&b0[a][i]?b0[a][i]:b0[a][i]=o()}else t=o();n.charCodeAt(0)===65279&&(n=n.substring(1)),t.styleSheet?t.styleSheet.cssText+=n:t.appendChild(document.createTextNode(n))}function o(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),e.attributes)for(var c=Object.keys(e.attributes),u=0;u<c.length;u++)l.setAttribute(c[u],e.attributes[c[u]]);var d=i==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(d,l),l}})(`x-vue-echarts,.echarts-inner{display:block;width:100%;height:100%;min-width:0}
`,{});var IUe=function(){if(_0!=null)return _0;if(typeof HTMLElement>"u"||typeof customElements>"u")return _0=!1;try{new Function("tag",`class EChartsElement extends HTMLElement {
  __dispose = null;

  disconnectedCallback() {
    if (this.__dispose) {
      this.__dispose();
      this.__dispose = null;
    }
  }
}

if (customElements.get(tag) == null) {
  customElements.define(tag, EChartsElement);
}
`)(dj)}catch{return _0=!1}return _0=!0}(),RUe="ecTheme",PUe="ecInitOptions",DUe="ecUpdateOptions";ve({name:"echarts",props:Lc(Lc({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},CUe),EUe),emits:{},inheritAttrs:!1,setup:function(n,e){var t=e.attrs,i=Yn(),r=Yn(),s=Yn(),a=Yn(),o=mt(RUe,null),l=mt(PUe,null),c=mt(DUe,null),u=Mr(n),d=u.autoresize,f=u.manualUpdate,h=u.loading,p=u.loadingOptions,m=N(function(){return a.value||n.option||null}),v=N(function(){return n.theme||HS(o,{})}),g=N(function(){return n.initOptions||HS(l,{})}),_=N(function(){return n.updateOptions||HS(c,{})}),y=N(function(){return function(M){var A={};for(var E in M)TUe(E)||(A[E]=M[E]);return A}(t)}),S=jt().proxy.$listeners;function w(M){if(r.value){var A=s.value=EFe(r.value,v.value,g.value);n.group&&(A.group=n.group);var E=S;E||(E={},Object.keys(t).filter(function(P){return P.indexOf("on")===0&&P.length>2}).forEach(function(P){var D=P.charAt(2).toLowerCase()+P.slice(3);D.substring(D.length-4)==="Once"&&(D="~".concat(D.substring(0,D.length-4))),E[D]=t[P]})),Object.keys(E).forEach(function(P){var D=E[P];if(D){var L=P.toLowerCase();L.charAt(0)==="~"&&(L=L.substring(1),D.__once__=!0);var R=A;if(L.indexOf("zr:")===0&&(R=A.getZr(),L=L.substring(3)),D.__once__){delete D.__once__;var B=D;D=function(){for(var k=[],O=0;O<arguments.length;O++)k[O]=arguments[O];B.apply(void 0,k),R.off(L,D)}}R.on(L,D)}}),d.value?Mt(function(){A&&!A.isDisposed()&&A.resize(),I()}):I()}function I(){var P=M||m.value;P&&A.setOption(P,_.value)}}function x(){s.value&&(s.value.dispose(),s.value=void 0)}var T=null;We(f,function(M){typeof T=="function"&&(T(),T=null),M||(T=We(function(){return n.option},function(A,E){A&&(s.value?s.value.setOption(A,Lc({notMerge:A!==E},_.value)):w())},{deep:!0}))},{immediate:!0}),We([v,g],function(){x(),w()},{deep:!0}),zr(function(){n.group&&s.value&&(s.value.group=n.group)});var C=xUe(s);return function(M,A,E){var I=mt(AUe,{}),P=N(function(){return Lc(Lc({},HS(I,{})),E==null?void 0:E.value)});zr(function(){var D=M.value;D&&(A.value?D.showLoading(P.value):D.hideLoading())})}(s,h,p),function(M,A,E){var I=null;We([E,M,A],function(P,D,L){var R=P[0],B=P[1],k=P[2];if(R&&B&&k){var O=k===!0?{}:k,U=O.throttle,G=U===void 0?100:U,q=O.onResize,W=function(){B.resize(),q==null||q()};I=G?Ek(W,G):W,gUe(R,I)}L(function(){R&&I&&yUe(R,I)})})}(s,d,r),Ht(function(){w()}),Un(function(){IUe&&i.value?i.value.__dispose=x:x()}),Lc({chart:s,root:i,inner:r,setOption:function(M,A){n.manualUpdate&&(a.value=M),s.value?s.value.setOption(M,A||{}):w(M)},nonEventAttrs:y},C)},render:function(){var n=Lc({},this.nonEventAttrs);return n.ref="root",n.class=n.class?["echarts"].concat(n.class):"echarts",wt(dj,n,[wt("div",{ref:"inner",class:"echarts-inner"})])}});Uv([_4e,O4e,Zze,Yze,fUe]);const LUe=n=>(VD("data-v-a5ab50df"),n=n(),$D(),n),kUe=LUe(()=>le("h1",{class:"section-title"},"More Results",-1)),OUe=ve({__name:"Table",setup(n){const e=[{model:"Model A",params:"10 B",value_a:"123",value_b:"321"},{model:"Model B",params:"30 B",value_a:"456",value_b:"654"},{model:"Model C",params:"20 B",value_a:"789",value_b:"987"},{model:"Model D",params:"5 B",value_a:"100",value_b:"200"}];return(t,i)=>{const r=yt("el-divider"),s=yt("el-row"),a=yt("el-table-column"),o=yt("el-table"),l=yt("el-tab-pane"),c=yt("el-tabs"),u=yt("el-card"),d=yt("el-col");return F(),ie("div",null,[oe(r),oe(s,{justify:"center"},{default:ge(()=>[kUe]),_:1}),oe(s,{justify:"center"},{default:ge(()=>[oe(d,{xs:24,sm:20,md:16,lg:12,xl:12},{default:ge(()=>[oe(u,{class:"card"},{default:ge(()=>[oe(c,{class:"demo-tabs","model-value":"Method A"},{default:ge(()=>[oe(l,{label:"Method A",name:"Method A"},{default:ge(()=>[oe(o,{data:e,"default-sort":{prop:"value_b",order:"descending"},"scrollbar-always-on":""},{default:ge(()=>[oe(a,{prop:"model",label:"Model",width:"100",sortable:""}),oe(a,{prop:"params",label:"#Params","min-width":"120",sortable:""}),oe(a,{prop:"value_a",label:"Value A","min-width":"120",sortable:""}),oe(a,{prop:"value_b",label:"Value B","min-width":"120",sortable:""})]),_:1})]),_:1}),oe(l,{label:"Method B",name:"Method B"},{default:ge(()=>[Xt(" Method B ")]),_:1}),oe(l,{label:"Method C",name:"Method C"},{default:ge(()=>[Xt(" Method C ")]),_:1}),oe(l,{label:"Method D",name:"Method D"},{default:ge(()=>[Xt(" Method D ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),NUe=sc(OUe,[["__scopeId","data-v-a5ab50df"]]),BUe={data(){return{value1:"",value2:"",folder1:"dataset1",folder2:"dataset2",baseImagePath:"./image_comparison/",comparison1ImagePath:"",comparison2ImagePath:"",comparison1Loading:!0,comparison2Loading:!0,comparison1Error:!1,comparison2Error:!1,options1:["deepfish","NEU-DET","UODD","DIOR","Clipart","Artaxor"],options2:["deepfish","NEU-DET","UODD","DIOR","Clipart","Artaxor"],supportedExtensions:[".png",".jpg",".jpeg"],placeholderImage:'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="150" viewBox="0 0 200 150"><rect width="100%" height="100%" fill="%23f5f5f5"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="%23999" font-family="Arial">No Image</text></svg>'}},beforeMount(){this.handleChange1(this.options1[0]),this.handleChange2(this.options2[0])},methods:{async handleChange1(n){this.comparison1Error=!1,await this.loadImage(n,"folder1")},async handleChange2(n){this.comparison2Error=!1,await this.loadImage(n,"folder2")},async loadImage(n,e){const t=`${e}Loading`.replace("folder","comparison"),i=`${e}ImagePath`.replace("folder","comparison"),r=`${e}Error`.replace("folder","comparison"),s=this[e];this[t]=!0,this[r]=!1;let a="";for(const o of this.supportedExtensions){const l=`${this.baseImagePath}${s}/${n}${o}`;try{if(await this.checkImageExists(l)){a=l;break}}catch{console.warn(`Test load failed for ${l}`)}}if(a){const o=new Image;o.src=a,o.onload=()=>{this[i]=a,this[t]=!1},o.onerror=()=>{console.error(`Failed to load: ${a}`),this[r]=!0,this[i]=this.placeholderImage,this[t]=!1}}else console.error(`No valid image found for ${n} in ${s}`),this[r]=!0,this[i]=this.placeholderImage,this[t]=!1},checkImageExists(n){return new Promise(e=>{const t=new Image;t.onload=()=>e(!0),t.onerror=()=>e(!1),t.src=n})}}},zk=n=>(VD("data-v-baa3f988"),n=n(),$D(),n),FUe=zk(()=>le("h1",{class:"section-title"},"Comparison",-1)),zUe={class:"demo-image"},UUe={class:"block"},HUe={class:"image-container"},VUe={class:"image-error"},$Ue=zk(()=>le("span",null,"Failed to load image",-1)),GUe={key:0,class:"image-status error"},WUe={class:"demonstration"},KUe={class:"demo-image"},qUe={class:"block"},XUe={class:"image-container"},YUe={class:"image-error"},jUe=zk(()=>le("span",null,"Failed to load image",-1)),QUe={key:0,class:"image-status error"},ZUe={class:"demonstration"};function JUe(n,e,t,i,r,s){const a=yt("el-divider"),o=yt("el-row"),l=yt("el-skeleton-item"),c=yt("warning"),u=yt("el-icon"),d=yt("el-image"),f=yt("el-skeleton"),h=yt("el-option"),p=yt("el-select"),m=yt("el-col");return F(),ie("div",null,[oe(a),oe(o,{justify:"center"},{default:ge(()=>[FUe]),_:1}),oe(o,{justify:"center"},{default:ge(()=>[oe(m,null,{default:ge(()=>[oe(o,{justify:"center",gutter:20},{default:ge(()=>[oe(m,{xs:12,sm:10,md:8,lg:6,xl:6},{default:ge(()=>[le("div",zUe,[le("div",UUe,[oe(f,{style:{width:"100%"},loading:r.comparison1Loading,animated:"",throttle:1e3},{template:ge(()=>[oe(l,{variant:"image",style:{width:"100%",height:"100%"}})]),default:ge(()=>[le("div",HUe,[oe(d,{src:r.comparison1ImagePath||r.placeholderImage,style:{width:"100%",height:"100%"},fit:"scale-down"},{error:ge(()=>[le("div",VUe,[oe(u,null,{default:ge(()=>[oe(c)]),_:1}),$Ue])]),_:1},8,["src"]),r.comparison1Error?(F(),ie("div",GUe,"Not Found")):Be("",!0)])]),_:1},8,["loading"]),le("span",WUe,"input: "+rt(r.comparison1ImagePath||"No data"),1)])]),oe(o,{justify:"center"},{default:ge(()=>[oe(p,{class:"select",modelValue:r.value1,"onUpdate:modelValue":e[0]||(e[0]=v=>r.value1=v),placeholder:"Select Dataset 1",size:"large",onChange:s.handleChange1},{default:ge(()=>[(F(!0),ie(bt,null,sn(r.options1,v=>(F(),He(h,{key:v,label:v,value:v},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1})]),_:1}),oe(m,{xs:12,sm:10,md:8,lg:6,xl:6},{default:ge(()=>[le("div",KUe,[le("div",qUe,[oe(f,{style:{width:"100%"},loading:r.comparison2Loading,animated:"",throttle:1e3},{template:ge(()=>[oe(l,{variant:"image",style:{width:"100%",height:"100%"}})]),default:ge(()=>[le("div",XUe,[oe(d,{src:r.comparison2ImagePath||r.placeholderImage,style:{width:"100%",height:"100%"},fit:"scale-down"},{error:ge(()=>[le("div",YUe,[oe(u,null,{default:ge(()=>[oe(c)]),_:1}),jUe])]),_:1},8,["src"]),r.comparison2Error?(F(),ie("div",QUe,"Not Found")):Be("",!0)])]),_:1},8,["loading"]),le("span",ZUe,"input: "+rt(r.comparison2ImagePath||"No data"),1)])]),oe(o,{justify:"center"},{default:ge(()=>[oe(p,{class:"select",modelValue:r.value2,"onUpdate:modelValue":e[1]||(e[1]=v=>r.value2=v),placeholder:"Select Dataset 2",size:"large",onChange:s.handleChange2},{default:ge(()=>[(F(!0),ie(bt,null,sn(r.options2,v=>(F(),He(h,{key:v,label:v,value:v},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const eHe=sc(BUe,[["render",JUe],["__scopeId","data-v-baa3f988"]]),tHe={setup(){Ht(()=>{const n=document.createElement("script");n.src="./twikoo/twikoo.junyaohu.js",n.async=!0;const e=()=>{twikoo.init({envId:"https://blog-comment-nvoz-8o7dxhfbd-junyaohus-projects.vercel.app",el:"#twikoo",region:"",path:location.pathname,lang:"zh-CN"})};n.addEventListener("load",e),document.body.appendChild(n)})}},nHe=le("h1",{class:"section-title"}," Comment",-1),iHe=le("div",{id:"twikoo"},null,-1);function rHe(n,e,t,i,r,s){const a=yt("el-divider"),o=yt("el-row"),l=yt("el-col");return F(),ie("div",null,[oe(a),oe(o,{justify:"center"},{default:ge(()=>[nHe]),_:1}),oe(o,{justify:"center"},{default:ge(()=>[oe(l,{xs:24,sm:24,md:24,lg:16,xl:12},{default:ge(()=>[iHe]),_:1})]),_:1})])}const sHe=sc(tHe,[["render",rHe]]),aHe="/CDFormer/image_comparison/CDFormer.png",oHe=ve({data(){return{tableImage:aHe,imageAlt:"",title:"",caption:"1: 1-shot5-shot10-shotmAP"}}}),lHe={class:"figure-container"},cHe={class:"figure-title"},uHe={class:"image-wrapper"},dHe=["src","alt"],fHe={class:"figure-caption"};function hHe(n,e,t,i,r,s){return F(),ie("div",lHe,[le("h2",cHe,rt(n.title),1),le("div",uHe,[le("img",{src:n.tableImage,alt:n.imageAlt,class:"responsive-image",loading:"lazy"},null,8,dHe)]),le("p",fHe,rt(n.caption),1)])}const pHe=sc(oHe,[["render",hHe],["__scopeId","data-v-bed70899"]]);/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Uk="143",kp={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Op={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},mHe=0,VH=1,vHe=2,fj=1,gHe=2,K0=3,Vd=0,ul=1,$d=2,yHe=1,bd=0,cv=1,$H=2,GH=3,WH=4,_He=5,Am=100,bHe=101,SHe=102,KH=103,qH=104,wHe=200,xHe=201,CHe=202,MHe=203,hj=204,pj=205,THe=206,AHe=207,EHe=208,IHe=209,RHe=210,PHe=0,DHe=1,LHe=2,uP=3,kHe=4,OHe=5,NHe=6,BHe=7,$M=0,FHe=1,zHe=2,qc=0,UHe=1,HHe=2,VHe=3,$He=4,GHe=5,Hk=300,Kh=301,qh=302,R_=303,iC=304,Cb=306,ha=1e3,Nr=1001,P_=1002,qr=1003,rC=1004,sC=1005,wr=1006,Vk=1007,_u=1008,Xh=1009,WHe=1010,KHe=1011,mj=1012,qHe=1013,mh=1014,fd=1015,D_=1016,XHe=1017,YHe=1018,uv=1020,jHe=1021,QHe=1022,So=1023,ZHe=1024,JHe=1025,Dh=1026,Hv=1027,e5e=1028,t5e=1029,n5e=1030,i5e=1031,r5e=1033,z1=33776,rE=33777,U1=33778,H1=33779,XH=35840,YH=35841,jH=35842,QH=35843,vj=36196,ZH=37492,JH=37496,e5=37808,t5=37809,n5=37810,i5=37811,r5=37812,s5=37813,a5=37814,o5=37815,l5=37816,c5=37817,u5=37818,d5=37819,f5=37820,h5=37821,p5=36492,s5e=2200,a5e=2201,o5e=2202,L_=2300,Vv=2301,sE=2302,Hm=2400,Vm=2401,aC=2402,$k=2500,l5e=2501,c5e=1,gj=2,Gd=3e3,Xn=3001,u5e=3200,d5e=3201,op=0,f5e=1,kc="srgb",vh="srgb-linear",aE=7680,h5e=519,dP=35044,m5="300 es",fP=1035;let nf=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}};const gs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let v5=1234567;const dv=Math.PI/180,k_=180/Math.PI;function To(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(gs[n&255]+gs[n>>8&255]+gs[n>>16&255]+gs[n>>24&255]+"-"+gs[e&255]+gs[e>>8&255]+"-"+gs[e>>16&15|64]+gs[e>>24&255]+"-"+gs[t&63|128]+gs[t>>8&255]+"-"+gs[t>>16&255]+gs[t>>24&255]+gs[i&255]+gs[i>>8&255]+gs[i>>16&255]+gs[i>>24&255]).toLowerCase()}function Lr(n,e,t){return Math.max(e,Math.min(t,n))}function Gk(n,e){return(n%e+e)%e}function p5e(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function m5e(n,e,t){return n!==e?(t-n)/(e-n):0}function Sy(n,e,t){return(1-t)*n+t*e}function v5e(n,e,t,i){return Sy(n,e,1-Math.exp(-t*i))}function g5e(n,e=1){return e-Math.abs(Gk(n,e*2)-e)}function y5e(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function _5e(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function b5e(n,e){return n+Math.floor(Math.random()*(e-n+1))}function S5e(n,e){return n+Math.random()*(e-n)}function w5e(n){return n*(.5-Math.random())}function x5e(n){n!==void 0&&(v5=n);let e=v5+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function C5e(n){return n*dv}function M5e(n){return n*k_}function hP(n){return(n&n-1)===0&&n!==0}function yj(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function oC(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function T5e(n,e,t,i,r){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),c=s((e+i)/2),u=a((e+i)/2),d=s((e-i)/2),f=a((e-i)/2),h=s((i-e)/2),p=a((i-e)/2);switch(r){case"XYX":n.set(o*u,l*d,l*f,o*c);break;case"YZY":n.set(l*f,o*u,l*d,o*c);break;case"ZXZ":n.set(l*d,l*f,o*u,o*c);break;case"XZX":n.set(o*u,l*p,l*h,o*c);break;case"YXY":n.set(l*h,o*u,l*p,o*c);break;case"ZYZ":n.set(l*p,l*h,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function A5e(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function E5e(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var Is=Object.freeze({__proto__:null,DEG2RAD:dv,RAD2DEG:k_,generateUUID:To,clamp:Lr,euclideanModulo:Gk,mapLinear:p5e,inverseLerp:m5e,lerp:Sy,damp:v5e,pingpong:g5e,smoothstep:y5e,smootherstep:_5e,randInt:b5e,randFloat:S5e,randFloatSpread:w5e,seededRandom:x5e,degToRad:C5e,radToDeg:M5e,isPowerOfTwo:hP,ceilPowerOfTwo:yj,floorPowerOfTwo:oC,setQuaternionFromProperEuler:T5e,normalize:E5e,denormalize:A5e});let St=class _j{constructor(e=0,t=0){_j.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},wo=class bj{constructor(){bj.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],l=i[6],c=i[1],u=i[4],d=i[7],f=i[2],h=i[5],p=i[8],m=r[0],v=r[3],g=r[6],_=r[1],y=r[4],S=r[7],w=r[2],x=r[5],T=r[8];return s[0]=a*m+o*_+l*w,s[3]=a*v+o*y+l*x,s[6]=a*g+o*S+l*T,s[1]=c*m+u*_+d*w,s[4]=c*v+u*y+d*x,s[7]=c*g+u*S+d*T,s[2]=f*m+h*_+p*w,s[5]=f*v+h*y+p*x,s[8]=f*g+h*S+p*T,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-i*s*u+i*o*l+r*s*c-r*a*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=u*a-o*c,f=o*l-u*s,h=c*s-a*l,p=t*d+i*f+r*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(r*c-u*i)*m,e[2]=(o*i-r*a)*m,e[3]=f*m,e[4]=(u*t-r*l)*m,e[5]=(r*s-o*t)*m,e[6]=h*m,e[7]=(i*l-c*t)*m,e[8]=(a*t-i*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*a+c*o)+a+e,-r*c,r*l,-r*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],a=r[3],o=r[6],l=r[1],c=r[4],u=r[7];return r[0]=t*s+i*l,r[3]=t*a+i*c,r[6]=t*o+i*u,r[1]=-i*s+t*l,r[4]=-i*a+t*c,r[7]=-i*o+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}};function Sj(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}const I5e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function $m(n,e){return new I5e[n](e)}function O_(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Lh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function V1(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const oE={[kc]:{[vh]:Lh},[vh]:{[kc]:V1}},Vo={legacyMode:!0,get workingColorSpace(){return vh},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(oE[e]&&oE[e][t]!==void 0){const i=oE[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},wj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Er={r:0,g:0,b:0},$o={h:0,s:0,l:0},VS={h:0,s:0,l:0};function lE(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function $S(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let zt=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=kc){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Vo.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=vh){return this.r=e,this.g=t,this.b=i,Vo.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=vh){if(e=Gk(e,1),t=Lr(t,0,1),i=Lr(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=lE(a,s,e+1/3),this.g=lE(a,s,e),this.b=lE(a,s,e-1/3)}return Vo.toWorkingColorSpace(this,r),this}setStyle(e,t=kc){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Vo.toWorkingColorSpace(this,t),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Vo.toWorkingColorSpace(this,t),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const l=parseFloat(s[1])/360,c=parseInt(s[2],10)/100,u=parseInt(s[3],10)/100;return i(s[4]),this.setHSL(l,c,u,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Vo.toWorkingColorSpace(this,t),this;if(a===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Vo.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=kc){const i=wj[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Lh(e.r),this.g=Lh(e.g),this.b=Lh(e.b),this}copyLinearToSRGB(e){return this.r=V1(e.r),this.g=V1(e.g),this.b=V1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=kc){return Vo.fromWorkingColorSpace($S(this,Er),e),Lr(Er.r*255,0,255)<<16^Lr(Er.g*255,0,255)<<8^Lr(Er.b*255,0,255)<<0}getHexString(e=kc){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=vh){Vo.fromWorkingColorSpace($S(this,Er),t);const i=Er.r,r=Er.g,s=Er.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const d=a-o;switch(c=u<=.5?d/(a+o):d/(2-a-o),a){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=vh){return Vo.fromWorkingColorSpace($S(this,Er),t),e.r=Er.r,e.g=Er.g,e.b=Er.b,e}getStyle(e=kc){return Vo.fromWorkingColorSpace($S(this,Er),e),e!==kc?`color(${e} ${Er.r} ${Er.g} ${Er.b})`:`rgb(${Er.r*255|0},${Er.g*255|0},${Er.b*255|0})`}offsetHSL(e,t,i){return this.getHSL($o),$o.h+=e,$o.s+=t,$o.l+=i,this.setHSL($o.h,$o.s,$o.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL($o),e.getHSL(VS);const i=Sy($o.h,VS.h,t),r=Sy($o.s,VS.s,t),s=Sy($o.l,VS.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};zt.NAMES=wj;let Np,xj=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Np===void 0&&(Np=O_("canvas")),Np.width=e.width,Np.height=e.height;const i=Np.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Np}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=O_("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Lh(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Lh(t[i]/255)*255):t[i]=Lh(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Gm=class{constructor(e=null){this.isSource=!0,this.uuid=To(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(cE(r[a].image)):s.push(cE(r[a]))}else s=cE(r);i.url=s}return t||(e.images[this.uuid]=i),i}};function cE(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?xj.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let R5e=0,ds=class pP extends nf{constructor(e=pP.DEFAULT_IMAGE,t=pP.DEFAULT_MAPPING,i=Nr,r=Nr,s=wr,a=_u,o=So,l=Xh,c=1,u=Gd){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:R5e++}),this.uuid=To(),this.name="",this.source=new Gm(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new St(0,0),this.repeat=new St(1,1),this.center=new St(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new wo,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Hk)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ha:e.x=e.x-Math.floor(e.x);break;case Nr:e.x=e.x<0?0:1;break;case P_:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ha:e.y=e.y-Math.floor(e.y);break;case Nr:e.y=e.y<0?0:1;break;case P_:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};ds.DEFAULT_IMAGE=null;ds.DEFAULT_MAPPING=Hk;let wi=class Cj{constructor(e=0,t=0,i=0,r=1){Cj.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],h=l[5],p=l[9],m=l[2],v=l[6],g=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-m)<.01&&Math.abs(p-v)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+m)<.1&&Math.abs(p+v)<.1&&Math.abs(c+h+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(c+1)/2,S=(h+1)/2,w=(g+1)/2,x=(u+f)/4,T=(d+m)/4,C=(p+v)/4;return y>S&&y>w?y<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(y),r=x/i,s=T/i):S>w?S<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(S),i=x/r,s=C/r):w<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(w),i=T/s,r=C/s),this.set(i,r,s,t),this}let _=Math.sqrt((v-p)*(v-p)+(d-m)*(d-m)+(f-u)*(f-u));return Math.abs(_)<.001&&(_=1),this.x=(v-p)/_,this.y=(d-m)/_,this.z=(f-u)/_,this.w=Math.acos((c+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Yh=class extends nf{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new wi(0,0,e,t),this.scissorTest=!1,this.viewport=new wi(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new ds(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:wr,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Gm(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Mj=class extends ds{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=qr,this.minFilter=qr,this.wrapR=Nr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},P5e=class extends ds{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=qr,this.minFilter=qr,this.wrapR=Nr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},as=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const f=s[a+0],h=s[a+1],p=s[a+2],m=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(o===1){e[t+0]=f,e[t+1]=h,e[t+2]=p,e[t+3]=m;return}if(d!==m||l!==f||c!==h||u!==p){let v=1-o;const g=l*f+c*h+u*p+d*m,_=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){const w=Math.sqrt(y),x=Math.atan2(w,g*_);v=Math.sin(v*x)/w,o=Math.sin(o*x)/w}const S=o*_;if(l=l*v+f*S,c=c*v+h*S,u=u*v+p*S,d=d*v+m*S,v===1-o){const w=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=w,c*=w,u*=w,d*=w}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[a],f=s[a+1],h=s[a+2],p=s[a+3];return e[t]=o*p+u*d+l*h-c*f,e[t+1]=l*p+u*f+c*d-o*h,e[t+2]=c*p+u*h+o*f-l*d,e[t+3]=u*p-o*d-l*f-c*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(i/2),u=o(r/2),d=o(s/2),f=l(i/2),h=l(r/2),p=l(s/2);switch(a){case"XYZ":this._x=f*u*d+c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d-f*h*p;break;case"YXZ":this._x=f*u*d+c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d+f*h*p;break;case"ZXY":this._x=f*u*d-c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d-f*h*p;break;case"ZYX":this._x=f*u*d-c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d+f*h*p;break;case"YZX":this._x=f*u*d+c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d-f*h*p;break;case"XZY":this._x=f*u*d-c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],d=t[10],f=i+o+d;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(u-l)*h,this._y=(s-c)*h,this._z=(a-r)*h}else if(i>o&&i>d){const h=2*Math.sqrt(1+i-o-d);this._w=(u-l)/h,this._x=.25*h,this._y=(r+a)/h,this._z=(s+c)/h}else if(o>d){const h=2*Math.sqrt(1+o-i-d);this._w=(s-c)/h,this._x=(r+a)/h,this._y=.25*h,this._z=(l+u)/h}else{const h=2*Math.sqrt(1+d-i-o);this._w=(a-r)/h,this._x=(s+c)/h,this._y=(l+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Lr(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+a*o+r*c-s*l,this._y=r*u+a*l+s*o-i*c,this._z=s*u+a*c+i*l-r*o,this._w=a*u-i*o-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const h=1-t;return this._w=h*a+t*this._w,this._x=h*i+t*this._x,this._y=h*r+t*this._y,this._z=h*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),d=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=a*d+this._w*f,this._x=i*d+this._x*f,this._y=r*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},ke=class Tj{constructor(e=0,t=0,i=0){Tj.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(g5.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(g5.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=l*t+a*r-o*i,u=l*i+o*t-s*r,d=l*r+s*i-a*t,f=-s*t-a*i-o*r;return this.x=c*l+f*-s+u*-o-d*-a,this.y=u*l+f*-a+d*-s-c*-o,this.z=d*l+f*-o+c*-a-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return uE.copy(this).projectOnVector(e),this.sub(uE)}reflect(e){return this.sub(uE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Lr(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const uE=new ke,g5=new as;let lp=class{constructor(e=new ke(1/0,1/0,1/0),t=new ke(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],f=e[l+2];u<t&&(t=u),d<i&&(i=d),f<r&&(r=f),u>s&&(s=u),d>a&&(a=d),f>o&&(o=f)}return this.min.set(t,i,r),this.max.set(s,a,o),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),f=e.getZ(l);u<t&&(t=u),d<i&&(i=d),f<r&&(r=f),u>s&&(s=u),d>a&&(a=d),f>o&&(o=f)}return this.min.set(t,i,r),this.max.set(s,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Df.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let a=0,o=s.count;a<o;a++)Df.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Df)}else i.boundingBox===null&&i.computeBoundingBox(),dE.copy(i.boundingBox),dE.applyMatrix4(e.matrixWorld),this.union(dE);const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Df),Df.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(S0),GS.subVectors(this.max,S0),Bp.subVectors(e.a,S0),Fp.subVectors(e.b,S0),zp.subVectors(e.c,S0),Ru.subVectors(Fp,Bp),Pu.subVectors(zp,Fp),Lf.subVectors(Bp,zp);let t=[0,-Ru.z,Ru.y,0,-Pu.z,Pu.y,0,-Lf.z,Lf.y,Ru.z,0,-Ru.x,Pu.z,0,-Pu.x,Lf.z,0,-Lf.x,-Ru.y,Ru.x,0,-Pu.y,Pu.x,0,-Lf.y,Lf.x,0];return!fE(t,Bp,Fp,zp,GS)||(t=[1,0,0,0,1,0,0,0,1],!fE(t,Bp,Fp,zp,GS))?!1:(WS.crossVectors(Ru,Pu),t=[WS.x,WS.y,WS.z],fE(t,Bp,Fp,zp,GS))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Df.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Df).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(vc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),vc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),vc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),vc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),vc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),vc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),vc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),vc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(vc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};const vc=[new ke,new ke,new ke,new ke,new ke,new ke,new ke,new ke],Df=new ke,dE=new lp,Bp=new ke,Fp=new ke,zp=new ke,Ru=new ke,Pu=new ke,Lf=new ke,S0=new ke,GS=new ke,WS=new ke,kf=new ke;function fE(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){kf.fromArray(n,s);const o=r.x*Math.abs(kf.x)+r.y*Math.abs(kf.y)+r.z*Math.abs(kf.z),l=e.dot(kf),c=t.dot(kf),u=i.dot(kf);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const D5e=new lp,y5=new ke,KS=new ke,hE=new ke;let cp=class{constructor(e=new ke,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):D5e.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){hE.subVectors(e,this.center);const t=hE.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.add(hE.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return this.center.equals(e.center)===!0?KS.set(0,0,1).multiplyScalar(e.radius):KS.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(y5.copy(e.center).add(KS)),this.expandByPoint(y5.copy(e.center).sub(KS)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const gc=new ke,pE=new ke,qS=new ke,Du=new ke,mE=new ke,XS=new ke,vE=new ke;let GM=class{constructor(e=new ke,t=new ke(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,gc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=gc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(gc.copy(this.direction).multiplyScalar(t).add(this.origin),gc.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){pE.copy(e).add(t).multiplyScalar(.5),qS.copy(t).sub(e).normalize(),Du.copy(this.origin).sub(pE);const s=e.distanceTo(t)*.5,a=-this.direction.dot(qS),o=Du.dot(this.direction),l=-Du.dot(qS),c=Du.lengthSq(),u=Math.abs(1-a*a);let d,f,h,p;if(u>0)if(d=a*l-o,f=a*o-l,p=s*u,d>=0)if(f>=-p)if(f<=p){const m=1/u;d*=m,f*=m,h=d*(d+a*f+2*o)+f*(a*d+f+2*l)+c}else f=s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+c;else f=-s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+c;else f<=-p?(d=Math.max(0,-(-a*s+o)),f=d>0?-s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+c):f<=p?(d=0,f=Math.min(Math.max(-s,-l),s),h=f*(f+2*l)+c):(d=Math.max(0,-(a*s+o)),f=d>0?s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+c);else f=a>0?-s:s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(qS).multiplyScalar(f).add(pE),h}intersectSphere(e,t){gc.subVectors(e.center,this.origin);const i=gc.dot(this.direction),r=gc.dot(gc)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return o<0&&l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(i=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(i=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,a=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,a=(e.min.y-f.y)*u),i>a||s>r||((s>i||i!==i)&&(i=s),(a<r||r!==r)&&(r=a),d>=0?(o=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(o=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,gc)!==null}intersectTriangle(e,t,i,r,s){mE.subVectors(t,e),XS.subVectors(i,e),vE.crossVectors(mE,XS);let a=this.direction.dot(vE),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Du.subVectors(this.origin,e);const l=o*this.direction.dot(XS.crossVectors(Du,XS));if(l<0)return null;const c=o*this.direction.dot(mE.cross(Du));if(c<0||l+c>a)return null;const u=-o*Du.dot(vE);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},nn=class mP{constructor(){mP.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,a,o,l,c,u,d,f,h,p,m,v){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=a,g[9]=o,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=f,g[3]=h,g[7]=p,g[11]=m,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new mP().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Up.setFromMatrixColumn(e,0).length(),s=1/Up.setFromMatrixColumn(e,1).length(),a=1/Up.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const f=a*u,h=a*d,p=o*u,m=o*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=h+p*c,t[5]=f-m*c,t[9]=-o*l,t[2]=m-f*c,t[6]=p+h*c,t[10]=a*l}else if(e.order==="YXZ"){const f=l*u,h=l*d,p=c*u,m=c*d;t[0]=f+m*o,t[4]=p*o-h,t[8]=a*c,t[1]=a*d,t[5]=a*u,t[9]=-o,t[2]=h*o-p,t[6]=m+f*o,t[10]=a*l}else if(e.order==="ZXY"){const f=l*u,h=l*d,p=c*u,m=c*d;t[0]=f-m*o,t[4]=-a*d,t[8]=p+h*o,t[1]=h+p*o,t[5]=a*u,t[9]=m-f*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const f=a*u,h=a*d,p=o*u,m=o*d;t[0]=l*u,t[4]=p*c-h,t[8]=f*c+m,t[1]=l*d,t[5]=m*c+f,t[9]=h*c-p,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const f=a*l,h=a*c,p=o*l,m=o*c;t[0]=l*u,t[4]=m-f*d,t[8]=p*d+h,t[1]=d,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=h*d+p,t[10]=f-m*d}else if(e.order==="XZY"){const f=a*l,h=a*c,p=o*l,m=o*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=f*d+m,t[5]=a*u,t[9]=h*d-p,t[2]=p*d-h,t[6]=o*u,t[10]=m*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(L5e,e,k5e)}lookAt(e,t,i){const r=this.elements;return Ta.subVectors(e,t),Ta.lengthSq()===0&&(Ta.z=1),Ta.normalize(),Lu.crossVectors(i,Ta),Lu.lengthSq()===0&&(Math.abs(i.z)===1?Ta.x+=1e-4:Ta.z+=1e-4,Ta.normalize(),Lu.crossVectors(i,Ta)),Lu.normalize(),YS.crossVectors(Ta,Lu),r[0]=Lu.x,r[4]=YS.x,r[8]=Ta.x,r[1]=Lu.y,r[5]=YS.y,r[9]=Ta.y,r[2]=Lu.z,r[6]=YS.z,r[10]=Ta.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],l=i[8],c=i[12],u=i[1],d=i[5],f=i[9],h=i[13],p=i[2],m=i[6],v=i[10],g=i[14],_=i[3],y=i[7],S=i[11],w=i[15],x=r[0],T=r[4],C=r[8],M=r[12],A=r[1],E=r[5],I=r[9],P=r[13],D=r[2],L=r[6],R=r[10],B=r[14],k=r[3],O=r[7],U=r[11],G=r[15];return s[0]=a*x+o*A+l*D+c*k,s[4]=a*T+o*E+l*L+c*O,s[8]=a*C+o*I+l*R+c*U,s[12]=a*M+o*P+l*B+c*G,s[1]=u*x+d*A+f*D+h*k,s[5]=u*T+d*E+f*L+h*O,s[9]=u*C+d*I+f*R+h*U,s[13]=u*M+d*P+f*B+h*G,s[2]=p*x+m*A+v*D+g*k,s[6]=p*T+m*E+v*L+g*O,s[10]=p*C+m*I+v*R+g*U,s[14]=p*M+m*P+v*B+g*G,s[3]=_*x+y*A+S*D+w*k,s[7]=_*T+y*E+S*L+w*O,s[11]=_*C+y*I+S*R+w*U,s[15]=_*M+y*P+S*B+w*G,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],h=e[14],p=e[3],m=e[7],v=e[11],g=e[15];return p*(+s*l*d-r*c*d-s*o*f+i*c*f+r*o*h-i*l*h)+m*(+t*l*h-t*c*f+s*a*f-r*a*h+r*c*u-s*l*u)+v*(+t*c*d-t*o*h-s*a*d+i*a*h+s*o*u-i*c*u)+g*(-r*o*u-t*l*d+t*o*f+r*a*d-i*a*f+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],m=e[13],v=e[14],g=e[15],_=d*v*c-m*f*c+m*l*h-o*v*h-d*l*g+o*f*g,y=p*f*c-u*v*c-p*l*h+a*v*h+u*l*g-a*f*g,S=u*m*c-p*d*c+p*o*h-a*m*h-u*o*g+a*d*g,w=p*d*l-u*m*l-p*o*f+a*m*f+u*o*v-a*d*v,x=t*_+i*y+r*S+s*w;if(x===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/x;return e[0]=_*T,e[1]=(m*f*s-d*v*s-m*r*h+i*v*h+d*r*g-i*f*g)*T,e[2]=(o*v*s-m*l*s+m*r*c-i*v*c-o*r*g+i*l*g)*T,e[3]=(d*l*s-o*f*s-d*r*c+i*f*c+o*r*h-i*l*h)*T,e[4]=y*T,e[5]=(u*v*s-p*f*s+p*r*h-t*v*h-u*r*g+t*f*g)*T,e[6]=(p*l*s-a*v*s-p*r*c+t*v*c+a*r*g-t*l*g)*T,e[7]=(a*f*s-u*l*s+u*r*c-t*f*c-a*r*h+t*l*h)*T,e[8]=S*T,e[9]=(p*d*s-u*m*s-p*i*h+t*m*h+u*i*g-t*d*g)*T,e[10]=(a*m*s-p*o*s+p*i*c-t*m*c-a*i*g+t*o*g)*T,e[11]=(u*o*s-a*d*s-u*i*c+t*d*c+a*i*h-t*o*h)*T,e[12]=w*T,e[13]=(u*m*r-p*d*r+p*i*f-t*m*f-u*i*v+t*d*v)*T,e[14]=(p*o*r-a*m*r-p*i*l+t*m*l+a*i*v-t*o*v)*T,e[15]=(a*d*r-u*o*r+u*i*l-t*d*l-a*i*f+t*o*f)*T,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+i,c*o-r*l,c*l+r*o,0,c*o+r*l,u*o+i,u*l-r*a,0,c*l-r*o,u*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,d=o+o,f=s*c,h=s*u,p=s*d,m=a*u,v=a*d,g=o*d,_=l*c,y=l*u,S=l*d,w=i.x,x=i.y,T=i.z;return r[0]=(1-(m+g))*w,r[1]=(h+S)*w,r[2]=(p-y)*w,r[3]=0,r[4]=(h-S)*x,r[5]=(1-(f+g))*x,r[6]=(v+_)*x,r[7]=0,r[8]=(p+y)*T,r[9]=(v-_)*T,r[10]=(1-(f+m))*T,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Up.set(r[0],r[1],r[2]).length();const a=Up.set(r[4],r[5],r[6]).length(),o=Up.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Go.copy(this);const c=1/s,u=1/a,d=1/o;return Go.elements[0]*=c,Go.elements[1]*=c,Go.elements[2]*=c,Go.elements[4]*=u,Go.elements[5]*=u,Go.elements[6]*=u,Go.elements[8]*=d,Go.elements[9]*=d,Go.elements[10]*=d,t.setFromRotationMatrix(Go),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a){const o=this.elements,l=2*s/(t-e),c=2*s/(i-r),u=(t+e)/(t-e),d=(i+r)/(i-r),f=-(a+s)/(a-s),h=-2*a*s/(a-s);return o[0]=l,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=c,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,i,r,s,a){const o=this.elements,l=1/(t-e),c=1/(i-r),u=1/(a-s),d=(t+e)*l,f=(i+r)*c,h=(a+s)*u;return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}};const Up=new ke,Go=new nn,L5e=new ke(0,0,0),k5e=new ke(1,1,1),Lu=new ke,YS=new ke,Ta=new ke,_5=new nn,b5=new as;let Vc=class Aj{constructor(e=0,t=0,i=0,r=Aj.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],c=r[5],u=r[9],d=r[2],f=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(Lr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Lr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Lr(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Lr(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Lr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-Lr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return _5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_5,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return b5.setFromEuler(this),this.setFromQuaternion(b5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}};Vc.DefaultOrder="XYZ";Vc.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];let Wk=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},O5e=0;const S5=new ke,Hp=new as,yc=new nn,jS=new ke,w0=new ke,N5e=new ke,B5e=new as,w5=new ke(1,0,0),x5=new ke(0,1,0),C5=new ke(0,0,1),F5e={type:"added"},M5={type:"removed"};let ji=class vP extends nf{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:O5e++}),this.uuid=To(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=vP.DefaultUp.clone();const e=new ke,t=new Vc,i=new as,r=new ke(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new nn},normalMatrix:{value:new wo}}),this.matrix=new nn,this.matrixWorld=new nn,this.matrixAutoUpdate=vP.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Wk,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Hp.setFromAxisAngle(e,t),this.quaternion.multiply(Hp),this}rotateOnWorldAxis(e,t){return Hp.setFromAxisAngle(e,t),this.quaternion.premultiply(Hp),this}rotateX(e){return this.rotateOnAxis(w5,e)}rotateY(e){return this.rotateOnAxis(x5,e)}rotateZ(e){return this.rotateOnAxis(C5,e)}translateOnAxis(e,t){return S5.copy(e).applyQuaternion(this.quaternion),this.position.add(S5.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(w5,e)}translateY(e){return this.translateOnAxis(x5,e)}translateZ(e){return this.translateOnAxis(C5,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(yc.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?jS.copy(e):jS.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),w0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?yc.lookAt(w0,jS,this.up):yc.lookAt(jS,w0,this.up),this.quaternion.setFromRotationMatrix(yc),r&&(yc.extractRotation(r.matrixWorld),Hp.setFromRotationMatrix(yc),this.quaternion.premultiply(Hp.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(F5e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(M5)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(M5)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),yc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),yc.multiply(e.parent.matrixWorld)),e.applyMatrix4(yc),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(w0,e,N5e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(w0,B5e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),d=a(e.shapes),f=a(e.skeletons),h=a(e.animations),p=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),f.length>0&&(i.skeletons=f),h.length>0&&(i.animations=h),p.length>0&&(i.nodes=p)}return i.object=r,i;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}};ji.DefaultUp=new ke(0,1,0);ji.DefaultMatrixAutoUpdate=!0;const Wo=new ke,_c=new ke,gE=new ke,bc=new ke,Vp=new ke,$p=new ke,T5=new ke,yE=new ke,_E=new ke,bE=new ke;let wy=class Em{constructor(e=new ke,t=new ke,i=new ke){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Wo.subVectors(e,t),r.cross(Wo);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Wo.subVectors(r,t),_c.subVectors(i,t),gE.subVectors(e,t);const a=Wo.dot(Wo),o=Wo.dot(_c),l=Wo.dot(gE),c=_c.dot(_c),u=_c.dot(gE),d=a*c-o*o;if(d===0)return s.set(-2,-1,-1);const f=1/d,h=(c*l-o*u)*f,p=(a*u-o*l)*f;return s.set(1-h-p,p,h)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,bc),bc.x>=0&&bc.y>=0&&bc.x+bc.y<=1}static getUV(e,t,i,r,s,a,o,l){return this.getBarycoord(e,t,i,r,bc),l.set(0,0),l.addScaledVector(s,bc.x),l.addScaledVector(a,bc.y),l.addScaledVector(o,bc.z),l}static isFrontFacing(e,t,i,r){return Wo.subVectors(i,t),_c.subVectors(e,t),Wo.cross(_c).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Wo.subVectors(this.c,this.b),_c.subVectors(this.a,this.b),Wo.cross(_c).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Em.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Em.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return Em.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Em.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Em.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;Vp.subVectors(r,i),$p.subVectors(s,i),yE.subVectors(e,i);const l=Vp.dot(yE),c=$p.dot(yE);if(l<=0&&c<=0)return t.copy(i);_E.subVectors(e,r);const u=Vp.dot(_E),d=$p.dot(_E);if(u>=0&&d<=u)return t.copy(r);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return a=l/(l-u),t.copy(i).addScaledVector(Vp,a);bE.subVectors(e,s);const h=Vp.dot(bE),p=$p.dot(bE);if(p>=0&&h<=p)return t.copy(s);const m=h*c-l*p;if(m<=0&&c>=0&&p<=0)return o=c/(c-p),t.copy(i).addScaledVector($p,o);const v=u*p-h*d;if(v<=0&&d-u>=0&&h-p>=0)return T5.subVectors(s,r),o=(d-u)/(d-u+(h-p)),t.copy(r).addScaledVector(T5,o);const g=1/(v+m+f);return a=m*g,o=f*g,t.copy(i).addScaledVector(Vp,a).addScaledVector($p,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},z5e=0,Cr=class extends nf{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:z5e++}),this.uuid=To(),this.name="",this.type="Material",this.blending=cv,this.side=Vd,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=hj,this.blendDst=pj,this.blendEquation=Am,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=uP,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=h5e,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=aE,this.stencilZFail=aE,this.stencilZPass=aE,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===yHe;continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==cv&&(i.blending=this.blending),this.side!==Vd&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},al=class extends Cr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$M,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};const br=new ke,QS=new St;let lr=class{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=dP,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new zt),t[i++]=a.r,t[i++]=a.g,t[i++]=a.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new St),t[i++]=a.x,t[i++]=a.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new ke),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new wi),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z,t[i++]=a.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)QS.fromBufferAttribute(this,t),QS.applyMatrix3(e),this.setXY(t,QS.x,QS.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)br.fromBufferAttribute(this,t),br.applyMatrix3(e),this.setXYZ(t,br.x,br.y,br.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)br.fromBufferAttribute(this,t),br.applyMatrix4(e),this.setXYZ(t,br.x,br.y,br.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)br.fromBufferAttribute(this,t),br.applyNormalMatrix(e),this.setXYZ(t,br.x,br.y,br.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)br.fromBufferAttribute(this,t),br.transformDirection(e),this.setXYZ(t,br.x,br.y,br.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==dP&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}},Kk=class extends lr{constructor(e,t,i){super(new Uint16Array(e),t,i)}},Ej=class extends lr{constructor(e,t,i){super(new Uint32Array(e),t,i)}},qt=class extends lr{constructor(e,t,i){super(new Float32Array(e),t,i)}},U5e=0;const Ja=new nn,SE=new ji,Gp=new ke,Aa=new lp,x0=new lp,Wr=new ke;let si=class Ij extends nf{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:U5e++}),this.uuid=To(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Sj(e)?Ej:Kk)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new wo().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ja.makeRotationFromQuaternion(e),this.applyMatrix4(Ja),this}rotateX(e){return Ja.makeRotationX(e),this.applyMatrix4(Ja),this}rotateY(e){return Ja.makeRotationY(e),this.applyMatrix4(Ja),this}rotateZ(e){return Ja.makeRotationZ(e),this.applyMatrix4(Ja),this}translate(e,t,i){return Ja.makeTranslation(e,t,i),this.applyMatrix4(Ja),this}scale(e,t,i){return Ja.makeScale(e,t,i),this.applyMatrix4(Ja),this}lookAt(e){return SE.lookAt(e),SE.updateMatrix(),this.applyMatrix4(SE.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Gp).negate(),this.translate(Gp.x,Gp.y,Gp.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new qt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new lp);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ke(-1/0,-1/0,-1/0),new ke(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Aa.setFromBufferAttribute(s),this.morphTargetsRelative?(Wr.addVectors(this.boundingBox.min,Aa.min),this.boundingBox.expandByPoint(Wr),Wr.addVectors(this.boundingBox.max,Aa.max),this.boundingBox.expandByPoint(Wr)):(this.boundingBox.expandByPoint(Aa.min),this.boundingBox.expandByPoint(Aa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new cp);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ke,1/0);return}if(e){const i=this.boundingSphere.center;if(Aa.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];x0.setFromBufferAttribute(o),this.morphTargetsRelative?(Wr.addVectors(Aa.min,x0.min),Aa.expandByPoint(Wr),Wr.addVectors(Aa.max,x0.max),Aa.expandByPoint(Wr)):(Aa.expandByPoint(x0.min),Aa.expandByPoint(x0.max))}Aa.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)Wr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Wr));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)Wr.fromBufferAttribute(o,c),l&&(Gp.fromBufferAttribute(e,c),Wr.add(Gp)),r=Math.max(r,i.distanceToSquared(Wr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,a=t.uv.array,o=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new lr(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let A=0;A<o;A++)c[A]=new ke,u[A]=new ke;const d=new ke,f=new ke,h=new ke,p=new St,m=new St,v=new St,g=new ke,_=new ke;function y(A,E,I){d.fromArray(r,A*3),f.fromArray(r,E*3),h.fromArray(r,I*3),p.fromArray(a,A*2),m.fromArray(a,E*2),v.fromArray(a,I*2),f.sub(d),h.sub(d),m.sub(p),v.sub(p);const P=1/(m.x*v.y-v.x*m.y);isFinite(P)&&(g.copy(f).multiplyScalar(v.y).addScaledVector(h,-m.y).multiplyScalar(P),_.copy(h).multiplyScalar(m.x).addScaledVector(f,-v.x).multiplyScalar(P),c[A].add(g),c[E].add(g),c[I].add(g),u[A].add(_),u[E].add(_),u[I].add(_))}let S=this.groups;S.length===0&&(S=[{start:0,count:i.length}]);for(let A=0,E=S.length;A<E;++A){const I=S[A],P=I.start,D=I.count;for(let L=P,R=P+D;L<R;L+=3)y(i[L+0],i[L+1],i[L+2])}const w=new ke,x=new ke,T=new ke,C=new ke;function M(A){T.fromArray(s,A*3),C.copy(T);const E=c[A];w.copy(E),w.sub(T.multiplyScalar(T.dot(E))).normalize(),x.crossVectors(C,E);const P=x.dot(u[A])<0?-1:1;l[A*4]=w.x,l[A*4+1]=w.y,l[A*4+2]=w.z,l[A*4+3]=P}for(let A=0,E=S.length;A<E;++A){const I=S[A],P=I.start,D=I.count;for(let L=P,R=P+D;L<R;L+=3)M(i[L+0]),M(i[L+1]),M(i[L+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new lr(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let f=0,h=i.count;f<h;f++)i.setXYZ(f,0,0,0);const r=new ke,s=new ke,a=new ke,o=new ke,l=new ke,c=new ke,u=new ke,d=new ke;if(e)for(let f=0,h=e.count;f<h;f+=3){const p=e.getX(f+0),m=e.getX(f+1),v=e.getX(f+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),a.fromBufferAttribute(t,v),u.subVectors(a,s),d.subVectors(r,s),u.cross(d),o.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,v),o.add(u),l.add(u),c.add(u),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(v,c.x,c.y,c.z)}else for(let f=0,h=t.count;f<h;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),a.fromBufferAttribute(t,f+2),u.subVectors(a,s),d.subVectors(r,s),u.cross(d),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(e.attributes[r]===void 0)continue;const a=i[r].array,o=e.attributes[r],l=o.array,c=o.itemSize*t,u=Math.min(l.length,a.length-c);for(let d=0,f=c;d<u;d++,f++)a[f]=l[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Wr.fromBufferAttribute(e,t),Wr.normalize(),e.setXYZ(t,Wr.x,Wr.y,Wr.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,d=o.normalized,f=new c.constructor(l.length*u);let h=0,p=0;for(let m=0,v=l.length;m<v;m++){o.isInterleavedBufferAttribute?h=l[m]*o.data.stride+o.offset:h=l[m]*u;for(let g=0;g<u;g++)f[p++]=c[h++]}return new lr(f,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ij,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=e(l,i);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,d=c.length;u<d;u++){const f=c[u],h=e(f,i);l.push(h)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++){const h=c[d];u.push(h.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let f=0,h=d.length;f<h;f++)u.push(d[f].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}};const A5=new nn,Wp=new GM,wE=new cp,ku=new ke,Ou=new ke,Nu=new ke,xE=new ke,CE=new ke,ME=new ke,ZS=new ke,JS=new ke,ew=new ke,tw=new St,nw=new St,iw=new St,TE=new ke,rw=new ke;let Br=class extends ji{constructor(e=new si,t=new al){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),wE.copy(i.boundingSphere),wE.applyMatrix4(s),e.ray.intersectsSphere(wE)===!1)||(A5.copy(s).invert(),Wp.copy(e.ray).applyMatrix4(A5),i.boundingBox!==null&&Wp.intersectsBox(i.boundingBox)===!1))return;let a;const o=i.index,l=i.attributes.position,c=i.morphAttributes.position,u=i.morphTargetsRelative,d=i.attributes.uv,f=i.attributes.uv2,h=i.groups,p=i.drawRange;if(o!==null)if(Array.isArray(r))for(let m=0,v=h.length;m<v;m++){const g=h[m],_=r[g.materialIndex],y=Math.max(g.start,p.start),S=Math.min(o.count,Math.min(g.start+g.count,p.start+p.count));for(let w=y,x=S;w<x;w+=3){const T=o.getX(w),C=o.getX(w+1),M=o.getX(w+2);a=sw(this,_,e,Wp,l,c,u,d,f,T,C,M),a&&(a.faceIndex=Math.floor(w/3),a.face.materialIndex=g.materialIndex,t.push(a))}}else{const m=Math.max(0,p.start),v=Math.min(o.count,p.start+p.count);for(let g=m,_=v;g<_;g+=3){const y=o.getX(g),S=o.getX(g+1),w=o.getX(g+2);a=sw(this,r,e,Wp,l,c,u,d,f,y,S,w),a&&(a.faceIndex=Math.floor(g/3),t.push(a))}}else if(l!==void 0)if(Array.isArray(r))for(let m=0,v=h.length;m<v;m++){const g=h[m],_=r[g.materialIndex],y=Math.max(g.start,p.start),S=Math.min(l.count,Math.min(g.start+g.count,p.start+p.count));for(let w=y,x=S;w<x;w+=3){const T=w,C=w+1,M=w+2;a=sw(this,_,e,Wp,l,c,u,d,f,T,C,M),a&&(a.faceIndex=Math.floor(w/3),a.face.materialIndex=g.materialIndex,t.push(a))}}else{const m=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);for(let g=m,_=v;g<_;g+=3){const y=g,S=g+1,w=g+2;a=sw(this,r,e,Wp,l,c,u,d,f,y,S,w),a&&(a.faceIndex=Math.floor(g/3),t.push(a))}}}};function H5e(n,e,t,i,r,s,a,o){let l;if(e.side===ul?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side!==$d,o),l===null)return null;rw.copy(o),rw.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(rw);return c<t.near||c>t.far?null:{distance:c,point:rw.clone(),object:n}}function sw(n,e,t,i,r,s,a,o,l,c,u,d){ku.fromBufferAttribute(r,c),Ou.fromBufferAttribute(r,u),Nu.fromBufferAttribute(r,d);const f=n.morphTargetInfluences;if(s&&f){ZS.set(0,0,0),JS.set(0,0,0),ew.set(0,0,0);for(let p=0,m=s.length;p<m;p++){const v=f[p],g=s[p];v!==0&&(xE.fromBufferAttribute(g,c),CE.fromBufferAttribute(g,u),ME.fromBufferAttribute(g,d),a?(ZS.addScaledVector(xE,v),JS.addScaledVector(CE,v),ew.addScaledVector(ME,v)):(ZS.addScaledVector(xE.sub(ku),v),JS.addScaledVector(CE.sub(Ou),v),ew.addScaledVector(ME.sub(Nu),v)))}ku.add(ZS),Ou.add(JS),Nu.add(ew)}n.isSkinnedMesh&&(n.boneTransform(c,ku),n.boneTransform(u,Ou),n.boneTransform(d,Nu));const h=H5e(n,e,t,i,ku,Ou,Nu,TE);if(h){o&&(tw.fromBufferAttribute(o,c),nw.fromBufferAttribute(o,u),iw.fromBufferAttribute(o,d),h.uv=wy.getUV(TE,ku,Ou,Nu,tw,nw,iw,new St)),l&&(tw.fromBufferAttribute(l,c),nw.fromBufferAttribute(l,u),iw.fromBufferAttribute(l,d),h.uv2=wy.getUV(TE,ku,Ou,Nu,tw,nw,iw,new St));const p={a:c,b:u,c:d,normal:new ke,materialIndex:0};wy.getNormal(ku,Ou,Nu,p.normal),h.face=p}return h}let N_=class Rj extends si{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],d=[];let f=0,h=0;p("z","y","x",-1,-1,i,t,e,a,s,0),p("z","y","x",1,-1,i,t,-e,a,s,1),p("x","z","y",1,1,e,i,t,r,a,2),p("x","z","y",1,-1,e,i,-t,r,a,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new qt(c,3)),this.setAttribute("normal",new qt(u,3)),this.setAttribute("uv",new qt(d,2));function p(m,v,g,_,y,S,w,x,T,C,M){const A=S/T,E=w/C,I=S/2,P=w/2,D=x/2,L=T+1,R=C+1;let B=0,k=0;const O=new ke;for(let U=0;U<R;U++){const G=U*E-P;for(let q=0;q<L;q++){const W=q*A-I;O[m]=W*_,O[v]=G*y,O[g]=D,c.push(O.x,O.y,O.z),O[m]=0,O[v]=0,O[g]=x>0?1:-1,u.push(O.x,O.y,O.z),d.push(q/T),d.push(1-U/C),B+=1}}for(let U=0;U<C;U++)for(let G=0;G<T;G++){const q=f+G+L*U,W=f+G+L*(U+1),Y=f+(G+1)+L*(U+1),J=f+(G+1)+L*U;l.push(q,W,J),l.push(W,Y,J),k+=6}o.addGroup(h,k,M),h+=k,f+=B}}static fromJSON(e){return new Rj(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function $v(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function ws(n){const e={};for(let t=0;t<n.length;t++){const i=$v(n[t]);for(const r in i)e[r]=i[r]}return e}function V5e(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const $5e={clone:$v,merge:ws};var G5e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,W5e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;let iu=class extends Cr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=G5e,this.fragmentShader=W5e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=$v(e.uniforms),this.uniformsGroups=V5e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},Pj=class extends ji{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new nn,this.projectionMatrix=new nn,this.projectionMatrixInverse=new nn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},kr=class extends Pj{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=k_*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(dv*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return k_*2*Math.atan(Math.tan(dv*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(dv*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*i/c,r*=a.width/l,i*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Kp=90,qp=1;let K5e=class extends ji{constructor(e,t,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const r=new kr(Kp,qp,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new ke(1,0,0)),this.add(r);const s=new kr(Kp,qp,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new ke(-1,0,0)),this.add(s);const a=new kr(Kp,qp,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new ke(0,1,0)),this.add(a);const o=new kr(Kp,qp,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new ke(0,-1,0)),this.add(o);const l=new kr(Kp,qp,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new ke(0,0,1)),this.add(l);const c=new kr(Kp,qp,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new ke(0,0,-1)),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,a,o,l,c]=this.children,u=e.getRenderTarget(),d=e.toneMapping,f=e.xr.enabled;e.toneMapping=qc,e.xr.enabled=!1;const h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,a),e.setRenderTarget(i,3),e.render(t,o),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=h,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=f,i.texture.needsPMREMUpdate=!0}},qk=class extends ds{constructor(e,t,i,r,s,a,o,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Kh,super(e,t,i,r,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},q5e=class extends Yh{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new qk(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:wr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new N_(5,5,5),s=new iu({name:"CubemapFromEquirect",uniforms:$v(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ul,blending:bd});s.uniforms.tEquirect.value=t;const a=new Br(r,s),o=t.minFilter;return t.minFilter===_u&&(t.minFilter=wr),new K5e(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}};const AE=new ke,X5e=new ke,Y5e=new wo;let $f=class{constructor(e=new ke(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=AE.subVectors(i,t).cross(X5e.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(AE),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Y5e.getNormalMatrix(e),r=this.coplanarPoint(AE).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Xp=new cp,aw=new ke;let Xk=class{constructor(e=new $f,t=new $f,i=new $f,r=new $f,s=new $f,a=new $f){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],c=i[5],u=i[6],d=i[7],f=i[8],h=i[9],p=i[10],m=i[11],v=i[12],g=i[13],_=i[14],y=i[15];return t[0].setComponents(o-r,d-l,m-f,y-v).normalize(),t[1].setComponents(o+r,d+l,m+f,y+v).normalize(),t[2].setComponents(o+s,d+c,m+h,y+g).normalize(),t[3].setComponents(o-s,d-c,m-h,y-g).normalize(),t[4].setComponents(o-a,d-u,m-p,y-_).normalize(),t[5].setComponents(o+a,d+u,m+p,y+_).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Xp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Xp)}intersectsSprite(e){return Xp.center.set(0,0,0),Xp.radius=.7071067811865476,Xp.applyMatrix4(e.matrixWorld),this.intersectsSphere(Xp)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(aw.x=r.normal.x>0?e.max.x:e.min.x,aw.y=r.normal.y>0?e.max.y:e.min.y,aw.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(aw)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function Dj(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function j5e(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,u){const d=c.array,f=c.usage,h=n.createBuffer();n.bindBuffer(u,h),n.bufferData(u,d,f),c.onUploadCallback();let p;if(d instanceof Float32Array)p=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(d instanceof Int16Array)p=5122;else if(d instanceof Uint32Array)p=5125;else if(d instanceof Int32Array)p=5124;else if(d instanceof Int8Array)p=5120;else if(d instanceof Uint8Array)p=5121;else if(d instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:h,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,d){const f=u.array,h=u.updateRange;n.bindBuffer(d,c),h.count===-1?n.bufferSubData(d,0,f):(t?n.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f,h.offset,h.count):n.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f.subarray(h.offset,h.offset+h.count)),h.count=-1)}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function o(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const f=i.get(c);(!f||f.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);d===void 0?i.set(c,r(c,u)):d.version<c.version&&(s(d.buffer,c,u),d.version=c.version)}return{get:a,remove:o,update:l}}let gP=class Lj extends si{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),l=Math.floor(r),c=o+1,u=l+1,d=e/o,f=t/l,h=[],p=[],m=[],v=[];for(let g=0;g<u;g++){const _=g*f-a;for(let y=0;y<c;y++){const S=y*d-s;p.push(S,-_,0),m.push(0,0,1),v.push(y/o),v.push(1-g/l)}}for(let g=0;g<l;g++)for(let _=0;_<o;_++){const y=_+c*g,S=_+c*(g+1),w=_+1+c*(g+1),x=_+1+c*g;h.push(y,S,x),h.push(S,w,x)}this.setIndex(h),this.setAttribute("position",new qt(p,3)),this.setAttribute("normal",new qt(m,3)),this.setAttribute("uv",new qt(v,2))}static fromJSON(e){return new Lj(e.width,e.height,e.widthSegments,e.heightSegments)}};var Q5e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Z5e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,J5e=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,eVe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,tVe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,nVe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,iVe="vec3 transformed = vec3( position );",rVe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,sVe=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,aVe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,oVe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,lVe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,cVe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,uVe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,dVe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,fVe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,hVe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,pVe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,mVe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,vVe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,gVe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,yVe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,_Ve=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,bVe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,SVe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,wVe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,xVe="gl_FragColor = linearToOutputTexel( gl_FragColor );",CVe=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,MVe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,TVe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,AVe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,EVe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,IVe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,RVe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,PVe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,DVe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,LVe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,kVe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,OVe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,NVe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,BVe=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,FVe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,zVe=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,UVe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,HVe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,VVe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,$Ve=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,GVe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,WVe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,KVe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,qVe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,XVe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,YVe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,jVe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,QVe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,ZVe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,JVe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,e$e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,t$e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,n$e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,i$e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,r$e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,s$e=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,a$e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,o$e=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,l$e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,c$e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,u$e=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,d$e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,f$e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,h$e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,p$e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,m$e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,v$e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,g$e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,y$e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,_$e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,b$e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,S$e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,w$e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,x$e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,C$e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,M$e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,T$e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,A$e=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,E$e=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,I$e=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,R$e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,P$e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,D$e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,L$e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,k$e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,O$e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,N$e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,B$e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,F$e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,z$e=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,U$e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,H$e=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,V$e=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,$$e=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,G$e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,W$e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,K$e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,q$e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const X$e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Y$e=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,j$e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Q$e=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Z$e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,J$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,e6e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,t6e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,n6e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,i6e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,r6e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,s6e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,a6e=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,o6e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,l6e=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,c6e=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,u6e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,d6e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,f6e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,h6e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,p6e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,m6e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,v6e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,g6e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,y6e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_6e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,b6e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,S6e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,w6e=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,x6e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,C6e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,M6e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ei={alphamap_fragment:Q5e,alphamap_pars_fragment:Z5e,alphatest_fragment:J5e,alphatest_pars_fragment:eVe,aomap_fragment:tVe,aomap_pars_fragment:nVe,begin_vertex:iVe,beginnormal_vertex:rVe,bsdfs:sVe,iridescence_fragment:aVe,bumpmap_pars_fragment:oVe,clipping_planes_fragment:lVe,clipping_planes_pars_fragment:cVe,clipping_planes_pars_vertex:uVe,clipping_planes_vertex:dVe,color_fragment:fVe,color_pars_fragment:hVe,color_pars_vertex:pVe,color_vertex:mVe,common:vVe,cube_uv_reflection_fragment:gVe,defaultnormal_vertex:yVe,displacementmap_pars_vertex:_Ve,displacementmap_vertex:bVe,emissivemap_fragment:SVe,emissivemap_pars_fragment:wVe,encodings_fragment:xVe,encodings_pars_fragment:CVe,envmap_fragment:MVe,envmap_common_pars_fragment:TVe,envmap_pars_fragment:AVe,envmap_pars_vertex:EVe,envmap_physical_pars_fragment:zVe,envmap_vertex:IVe,fog_vertex:RVe,fog_pars_vertex:PVe,fog_fragment:DVe,fog_pars_fragment:LVe,gradientmap_pars_fragment:kVe,lightmap_fragment:OVe,lightmap_pars_fragment:NVe,lights_lambert_vertex:BVe,lights_pars_begin:FVe,lights_toon_fragment:UVe,lights_toon_pars_fragment:HVe,lights_phong_fragment:VVe,lights_phong_pars_fragment:$Ve,lights_physical_fragment:GVe,lights_physical_pars_fragment:WVe,lights_fragment_begin:KVe,lights_fragment_maps:qVe,lights_fragment_end:XVe,logdepthbuf_fragment:YVe,logdepthbuf_pars_fragment:jVe,logdepthbuf_pars_vertex:QVe,logdepthbuf_vertex:ZVe,map_fragment:JVe,map_pars_fragment:e$e,map_particle_fragment:t$e,map_particle_pars_fragment:n$e,metalnessmap_fragment:i$e,metalnessmap_pars_fragment:r$e,morphcolor_vertex:s$e,morphnormal_vertex:a$e,morphtarget_pars_vertex:o$e,morphtarget_vertex:l$e,normal_fragment_begin:c$e,normal_fragment_maps:u$e,normal_pars_fragment:d$e,normal_pars_vertex:f$e,normal_vertex:h$e,normalmap_pars_fragment:p$e,clearcoat_normal_fragment_begin:m$e,clearcoat_normal_fragment_maps:v$e,clearcoat_pars_fragment:g$e,iridescence_pars_fragment:y$e,output_fragment:_$e,packing:b$e,premultiplied_alpha_fragment:S$e,project_vertex:w$e,dithering_fragment:x$e,dithering_pars_fragment:C$e,roughnessmap_fragment:M$e,roughnessmap_pars_fragment:T$e,shadowmap_pars_fragment:A$e,shadowmap_pars_vertex:E$e,shadowmap_vertex:I$e,shadowmask_pars_fragment:R$e,skinbase_vertex:P$e,skinning_pars_vertex:D$e,skinning_vertex:L$e,skinnormal_vertex:k$e,specularmap_fragment:O$e,specularmap_pars_fragment:N$e,tonemapping_fragment:B$e,tonemapping_pars_fragment:F$e,transmission_fragment:z$e,transmission_pars_fragment:U$e,uv_pars_fragment:H$e,uv_pars_vertex:V$e,uv_vertex:$$e,uv2_pars_fragment:G$e,uv2_pars_vertex:W$e,uv2_vertex:K$e,worldpos_vertex:q$e,background_vert:X$e,background_frag:Y$e,cube_vert:j$e,cube_frag:Q$e,depth_vert:Z$e,depth_frag:J$e,distanceRGBA_vert:e6e,distanceRGBA_frag:t6e,equirect_vert:n6e,equirect_frag:i6e,linedashed_vert:r6e,linedashed_frag:s6e,meshbasic_vert:a6e,meshbasic_frag:o6e,meshlambert_vert:l6e,meshlambert_frag:c6e,meshmatcap_vert:u6e,meshmatcap_frag:d6e,meshnormal_vert:f6e,meshnormal_frag:h6e,meshphong_vert:p6e,meshphong_frag:m6e,meshphysical_vert:v6e,meshphysical_frag:g6e,meshtoon_vert:y6e,meshtoon_frag:_6e,points_vert:b6e,points_frag:S6e,shadow_vert:w6e,shadow_frag:x6e,sprite_vert:C6e,sprite_frag:M6e},Gt={common:{diffuse:{value:new zt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new wo},uv2Transform:{value:new wo},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new St(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new zt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new zt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new wo}},sprite:{diffuse:{value:new zt(16777215)},opacity:{value:1},center:{value:new St(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new wo}}},Il={basic:{uniforms:ws([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.fog]),vertexShader:ei.meshbasic_vert,fragmentShader:ei.meshbasic_frag},lambert:{uniforms:ws([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.fog,Gt.lights,{emissive:{value:new zt(0)}}]),vertexShader:ei.meshlambert_vert,fragmentShader:ei.meshlambert_frag},phong:{uniforms:ws([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.fog,Gt.lights,{emissive:{value:new zt(0)},specular:{value:new zt(1118481)},shininess:{value:30}}]),vertexShader:ei.meshphong_vert,fragmentShader:ei.meshphong_frag},standard:{uniforms:ws([Gt.common,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.roughnessmap,Gt.metalnessmap,Gt.fog,Gt.lights,{emissive:{value:new zt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ei.meshphysical_vert,fragmentShader:ei.meshphysical_frag},toon:{uniforms:ws([Gt.common,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.gradientmap,Gt.fog,Gt.lights,{emissive:{value:new zt(0)}}]),vertexShader:ei.meshtoon_vert,fragmentShader:ei.meshtoon_frag},matcap:{uniforms:ws([Gt.common,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.fog,{matcap:{value:null}}]),vertexShader:ei.meshmatcap_vert,fragmentShader:ei.meshmatcap_frag},points:{uniforms:ws([Gt.points,Gt.fog]),vertexShader:ei.points_vert,fragmentShader:ei.points_frag},dashed:{uniforms:ws([Gt.common,Gt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ei.linedashed_vert,fragmentShader:ei.linedashed_frag},depth:{uniforms:ws([Gt.common,Gt.displacementmap]),vertexShader:ei.depth_vert,fragmentShader:ei.depth_frag},normal:{uniforms:ws([Gt.common,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,{opacity:{value:1}}]),vertexShader:ei.meshnormal_vert,fragmentShader:ei.meshnormal_frag},sprite:{uniforms:ws([Gt.sprite,Gt.fog]),vertexShader:ei.sprite_vert,fragmentShader:ei.sprite_frag},background:{uniforms:{uvTransform:{value:new wo},t2D:{value:null}},vertexShader:ei.background_vert,fragmentShader:ei.background_frag},cube:{uniforms:ws([Gt.envmap,{opacity:{value:1}}]),vertexShader:ei.cube_vert,fragmentShader:ei.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ei.equirect_vert,fragmentShader:ei.equirect_frag},distanceRGBA:{uniforms:ws([Gt.common,Gt.displacementmap,{referencePosition:{value:new ke},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ei.distanceRGBA_vert,fragmentShader:ei.distanceRGBA_frag},shadow:{uniforms:ws([Gt.lights,Gt.fog,{color:{value:new zt(0)},opacity:{value:1}}]),vertexShader:ei.shadow_vert,fragmentShader:ei.shadow_frag}};Il.physical={uniforms:ws([Il.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new St(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new zt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new St},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new zt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new zt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ei.meshphysical_vert,fragmentShader:ei.meshphysical_frag};function T6e(n,e,t,i,r,s){const a=new zt(0);let o=r===!0?0:1,l,c,u=null,d=0,f=null;function h(m,v){let g=!1,_=v.isScene===!0?v.background:null;_&&_.isTexture&&(_=e.get(_));const y=n.xr,S=y.getSession&&y.getSession();S&&S.environmentBlendMode==="additive"&&(_=null),_===null?p(a,o):_&&_.isColor&&(p(_,1),g=!0),(n.autoClear||g)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),_&&(_.isCubeTexture||_.mapping===Cb)?(c===void 0&&(c=new Br(new N_(1,1,1),new iu({name:"BackgroundCubeMaterial",uniforms:$v(Il.cube.uniforms),vertexShader:Il.cube.vertexShader,fragmentShader:Il.cube.fragmentShader,side:ul,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,x,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=_,c.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,(u!==_||d!==_.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,u=_,d=_.version,f=n.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null)):_&&_.isTexture&&(l===void 0&&(l=new Br(new gP(2,2),new iu({name:"BackgroundMaterial",uniforms:$v(Il.background.uniforms),vertexShader:Il.background.vertexShader,fragmentShader:Il.background.fragmentShader,side:Vd,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=_,_.matrixAutoUpdate===!0&&_.updateMatrix(),l.material.uniforms.uvTransform.value.copy(_.matrix),(u!==_||d!==_.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,u=_,d=_.version,f=n.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null))}function p(m,v){t.buffers.color.setClear(m.r,m.g,m.b,v,s)}return{getClearColor:function(){return a},setClearColor:function(m,v=1){a.set(m),o=v,p(a,o)},getClearAlpha:function(){return o},setClearAlpha:function(m){o=m,p(a,o)},render:h}}function A6e(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||s!==null,o={},l=v(null);let c=l,u=!1;function d(D,L,R,B,k){let O=!1;if(a){const U=m(B,R,L);c!==U&&(c=U,h(c.object)),O=g(D,B,R,k),O&&_(D,B,R,k)}else{const U=L.wireframe===!0;(c.geometry!==B.id||c.program!==R.id||c.wireframe!==U)&&(c.geometry=B.id,c.program=R.id,c.wireframe=U,O=!0)}k!==null&&t.update(k,34963),(O||u)&&(u=!1,C(D,L,R,B),k!==null&&n.bindBuffer(34963,t.get(k).buffer))}function f(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function h(D){return i.isWebGL2?n.bindVertexArray(D):s.bindVertexArrayOES(D)}function p(D){return i.isWebGL2?n.deleteVertexArray(D):s.deleteVertexArrayOES(D)}function m(D,L,R){const B=R.wireframe===!0;let k=o[D.id];k===void 0&&(k={},o[D.id]=k);let O=k[L.id];O===void 0&&(O={},k[L.id]=O);let U=O[B];return U===void 0&&(U=v(f()),O[B]=U),U}function v(D){const L=[],R=[],B=[];for(let k=0;k<r;k++)L[k]=0,R[k]=0,B[k]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:R,attributeDivisors:B,object:D,attributes:{},index:null}}function g(D,L,R,B){const k=c.attributes,O=L.attributes;let U=0;const G=R.getAttributes();for(const q in G)if(G[q].location>=0){const Y=k[q];let J=O[q];if(J===void 0&&(q==="instanceMatrix"&&D.instanceMatrix&&(J=D.instanceMatrix),q==="instanceColor"&&D.instanceColor&&(J=D.instanceColor)),Y===void 0||Y.attribute!==J||J&&Y.data!==J.data)return!0;U++}return c.attributesNum!==U||c.index!==B}function _(D,L,R,B){const k={},O=L.attributes;let U=0;const G=R.getAttributes();for(const q in G)if(G[q].location>=0){let Y=O[q];Y===void 0&&(q==="instanceMatrix"&&D.instanceMatrix&&(Y=D.instanceMatrix),q==="instanceColor"&&D.instanceColor&&(Y=D.instanceColor));const J={};J.attribute=Y,Y&&Y.data&&(J.data=Y.data),k[q]=J,U++}c.attributes=k,c.attributesNum=U,c.index=B}function y(){const D=c.newAttributes;for(let L=0,R=D.length;L<R;L++)D[L]=0}function S(D){w(D,0)}function w(D,L){const R=c.newAttributes,B=c.enabledAttributes,k=c.attributeDivisors;R[D]=1,B[D]===0&&(n.enableVertexAttribArray(D),B[D]=1),k[D]!==L&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](D,L),k[D]=L)}function x(){const D=c.newAttributes,L=c.enabledAttributes;for(let R=0,B=L.length;R<B;R++)L[R]!==D[R]&&(n.disableVertexAttribArray(R),L[R]=0)}function T(D,L,R,B,k,O){i.isWebGL2===!0&&(R===5124||R===5125)?n.vertexAttribIPointer(D,L,R,k,O):n.vertexAttribPointer(D,L,R,B,k,O)}function C(D,L,R,B){if(i.isWebGL2===!1&&(D.isInstancedMesh||B.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;y();const k=B.attributes,O=R.getAttributes(),U=L.defaultAttributeValues;for(const G in O){const q=O[G];if(q.location>=0){let W=k[G];if(W===void 0&&(G==="instanceMatrix"&&D.instanceMatrix&&(W=D.instanceMatrix),G==="instanceColor"&&D.instanceColor&&(W=D.instanceColor)),W!==void 0){const Y=W.normalized,J=W.itemSize,Z=t.get(W);if(Z===void 0)continue;const ee=Z.buffer,me=Z.type,ye=Z.bytesPerElement;if(W.isInterleavedBufferAttribute){const Te=W.data,Ee=Te.stride,H=W.offset;if(Te.isInstancedInterleavedBuffer){for(let Q=0;Q<q.locationSize;Q++)w(q.location+Q,Te.meshPerAttribute);D.isInstancedMesh!==!0&&B._maxInstanceCount===void 0&&(B._maxInstanceCount=Te.meshPerAttribute*Te.count)}else for(let Q=0;Q<q.locationSize;Q++)S(q.location+Q);n.bindBuffer(34962,ee);for(let Q=0;Q<q.locationSize;Q++)T(q.location+Q,J/q.locationSize,me,Y,Ee*ye,(H+J/q.locationSize*Q)*ye)}else{if(W.isInstancedBufferAttribute){for(let Te=0;Te<q.locationSize;Te++)w(q.location+Te,W.meshPerAttribute);D.isInstancedMesh!==!0&&B._maxInstanceCount===void 0&&(B._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let Te=0;Te<q.locationSize;Te++)S(q.location+Te);n.bindBuffer(34962,ee);for(let Te=0;Te<q.locationSize;Te++)T(q.location+Te,J/q.locationSize,me,Y,J*ye,J/q.locationSize*Te*ye)}}else if(U!==void 0){const Y=U[G];if(Y!==void 0)switch(Y.length){case 2:n.vertexAttrib2fv(q.location,Y);break;case 3:n.vertexAttrib3fv(q.location,Y);break;case 4:n.vertexAttrib4fv(q.location,Y);break;default:n.vertexAttrib1fv(q.location,Y)}}}}x()}function M(){I();for(const D in o){const L=o[D];for(const R in L){const B=L[R];for(const k in B)p(B[k].object),delete B[k];delete L[R]}delete o[D]}}function A(D){if(o[D.id]===void 0)return;const L=o[D.id];for(const R in L){const B=L[R];for(const k in B)p(B[k].object),delete B[k];delete L[R]}delete o[D.id]}function E(D){for(const L in o){const R=o[L];if(R[D.id]===void 0)continue;const B=R[D.id];for(const k in B)p(B[k].object),delete B[k];delete R[D.id]}}function I(){P(),u=!0,c!==l&&(c=l,h(c.object))}function P(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:I,resetDefaultState:P,dispose:M,releaseStatesOfGeometry:A,releaseStatesOfProgram:E,initAttributes:y,enableAttribute:S,disableUnusedAttributes:x}}function E6e(n,e,t,i){const r=i.isWebGL2;let s;function a(c){s=c}function o(c,u){n.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,d){if(d===0)return;let f,h;if(r)f=n,h="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[h](s,c,u,d),t.update(u,s,d)}this.setMode=a,this.render=o,this.renderInstances=l}function I6e(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const T=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(T){if(T==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";T="mediump"}return T==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const c=a||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,d=n.getParameter(34930),f=n.getParameter(35660),h=n.getParameter(3379),p=n.getParameter(34076),m=n.getParameter(34921),v=n.getParameter(36347),g=n.getParameter(36348),_=n.getParameter(36349),y=f>0,S=a||e.has("OES_texture_float"),w=y&&S,x=a?n.getParameter(36183):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:v,maxVaryings:g,maxFragmentUniforms:_,vertexTextures:y,floatFragmentTextures:S,floatVertexTextures:w,maxSamples:x}}function R6e(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new $f,o=new wo,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f,h){const p=d.length!==0||f||i!==0||r;return r=f,t=u(d,h,0),i=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,f,h){const p=d.clippingPlanes,m=d.clipIntersection,v=d.clipShadows,g=n.get(d);if(!r||p===null||p.length===0||s&&!v)s?u(null):c();else{const _=s?0:i,y=_*4;let S=g.clippingState||null;l.value=S,S=u(p,f,y,h);for(let w=0;w!==y;++w)S[w]=t[w];g.clippingState=S,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,f,h,p){const m=d!==null?d.length:0;let v=null;if(m!==0){if(v=l.value,p!==!0||v===null){const g=h+m*4,_=f.matrixWorldInverse;o.getNormalMatrix(_),(v===null||v.length<g)&&(v=new Float32Array(g));for(let y=0,S=h;y!==m;++y,S+=4)a.copy(d[y]).applyMatrix4(_,o),a.normal.toArray(v,S),v[S+3]=a.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,v}}function P6e(n){let e=new WeakMap;function t(a,o){return o===R_?a.mapping=Kh:o===iC&&(a.mapping=qh),a}function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const o=a.mapping;if(o===R_||o===iC)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new q5e(l.height/2);return c.fromEquirectangularTexture(n,a),e.set(a,c),a.addEventListener("dispose",r),t(c.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}let Tg=class extends Pj{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const Wm=4,E5=[.125,.215,.35,.446,.526,.582],Jf=20,EE=new Tg,I5=new zt;let IE=null;const Gf=(1+Math.sqrt(5))/2,Yp=1/Gf,R5=[new ke(1,1,1),new ke(-1,1,1),new ke(1,1,-1),new ke(-1,1,-1),new ke(0,Gf,Yp),new ke(0,Gf,-Yp),new ke(Yp,0,Gf),new ke(-Yp,0,Gf),new ke(Gf,Yp,0),new ke(-Gf,Yp,0)];let P5=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){IE=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=k5(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=L5(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(IE),e.scissorTest=!1,ow(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Kh||e.mapping===qh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),IE=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:wr,minFilter:wr,generateMipmaps:!1,type:D_,format:So,encoding:Gd,depthBuffer:!1},r=D5(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=D5(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=D6e(s)),this._blurMaterial=L6e(s,e,t)}return r}_compileMaterial(e){const t=new Br(this._lodPlanes[0],e);this._renderer.compile(t,EE)}_sceneToCubeUV(e,t,i,r){const o=new kr(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,f=u.toneMapping;u.getClearColor(I5),u.toneMapping=qc,u.autoClear=!1;const h=new al({name:"PMREM.Background",side:ul,depthWrite:!1,depthTest:!1}),p=new Br(new N_,h);let m=!1;const v=e.background;v?v.isColor&&(h.color.copy(v),e.background=null,m=!0):(h.color.copy(I5),m=!0);for(let g=0;g<6;g++){const _=g%3;_===0?(o.up.set(0,l[g],0),o.lookAt(c[g],0,0)):_===1?(o.up.set(0,0,l[g]),o.lookAt(0,c[g],0)):(o.up.set(0,l[g],0),o.lookAt(0,0,c[g]));const y=this._cubeSize;ow(r,_*y,g>2?y:0,y,y),u.setRenderTarget(r),m&&u.render(p,o),u.render(e,o)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=f,u.autoClear=d,e.background=v}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Kh||e.mapping===qh;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=k5()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=L5());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Br(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;ow(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(a,EE)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=R5[(r-1)%R5.length];this._blur(e,r-1,r,s,a)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Br(this._lodPlanes[r],c),f=c.uniforms,h=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*Jf-1),m=s/p,v=isFinite(s)?1+Math.floor(u*m):Jf;v>Jf&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Jf}`);const g=[];let _=0;for(let T=0;T<Jf;++T){const C=T/m,M=Math.exp(-C*C/2);g.push(M),T===0?_+=M:T<v&&(_+=2*M)}for(let T=0;T<g.length;T++)g[T]=g[T]/_;f.envMap.value=e.texture,f.samples.value=v,f.weights.value=g,f.latitudinal.value=a==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:y}=this;f.dTheta.value=p,f.mipInt.value=y-i;const S=this._sizeLods[r],w=3*S*(r>y-Wm?r-y+Wm:0),x=4*(this._cubeSize-S);ow(t,w,x,3*S,2*S),l.setRenderTarget(t),l.render(d,EE)}};function D6e(n){const e=[],t=[],i=[];let r=n;const s=n-Wm+1+E5.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>n-Wm?l=E5[a-n+Wm-1]:a===0&&(l=0),i.push(l);const c=1/(o-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],h=6,p=6,m=3,v=2,g=1,_=new Float32Array(m*p*h),y=new Float32Array(v*p*h),S=new Float32Array(g*p*h);for(let x=0;x<h;x++){const T=x%3*2/3-1,C=x>2?0:-1,M=[T,C,0,T+2/3,C,0,T+2/3,C+1,0,T,C,0,T+2/3,C+1,0,T,C+1,0];_.set(M,m*p*x),y.set(f,v*p*x);const A=[x,x,x,x,x,x];S.set(A,g*p*x)}const w=new si;w.setAttribute("position",new lr(_,m)),w.setAttribute("uv",new lr(y,v)),w.setAttribute("faceIndex",new lr(S,g)),e.push(w),r>Wm&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function D5(n,e,t){const i=new Yh(n,e,t);return i.texture.mapping=Cb,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function ow(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function L6e(n,e,t){const i=new Float32Array(Jf),r=new ke(0,1,0);return new iu({name:"SphericalGaussianBlur",defines:{n:Jf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Yk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:bd,depthTest:!1,depthWrite:!1})}function L5(){return new iu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Yk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:bd,depthTest:!1,depthWrite:!1})}function k5(){return new iu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Yk(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:bd,depthTest:!1,depthWrite:!1})}function Yk(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function k6e(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,c=l===R_||l===iC,u=l===Kh||l===qh;if(c||u)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let d=e.get(o);return t===null&&(t=new P5(n)),d=c?t.fromEquirectangular(o,d):t.fromCubemap(o,d),e.set(o,d),d.texture}else{if(e.has(o))return e.get(o).texture;{const d=o.image;if(c&&d&&d.height>0||u&&d&&r(d)){t===null&&(t=new P5(n));const f=c?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,f),o.addEventListener("dispose",s),f.texture}else return null}}}return o}function r(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function O6e(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function N6e(n,e,t,i){const r={},s=new WeakMap;function a(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);f.removeEventListener("dispose",a),delete r[f.id];const h=s.get(f);h&&(e.remove(h),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function o(d,f){return r[f.id]===!0||(f.addEventListener("dispose",a),r[f.id]=!0,t.memory.geometries++),f}function l(d){const f=d.attributes;for(const p in f)e.update(f[p],34962);const h=d.morphAttributes;for(const p in h){const m=h[p];for(let v=0,g=m.length;v<g;v++)e.update(m[v],34962)}}function c(d){const f=[],h=d.index,p=d.attributes.position;let m=0;if(h!==null){const _=h.array;m=h.version;for(let y=0,S=_.length;y<S;y+=3){const w=_[y+0],x=_[y+1],T=_[y+2];f.push(w,x,x,T,T,w)}}else{const _=p.array;m=p.version;for(let y=0,S=_.length/3-1;y<S;y+=3){const w=y+0,x=y+1,T=y+2;f.push(w,x,x,T,T,w)}}const v=new(Sj(f)?Ej:Kk)(f,1);v.version=m;const g=s.get(d);g&&e.remove(g),s.set(d,v)}function u(d){const f=s.get(d);if(f){const h=d.index;h!==null&&f.version<h.version&&c(d)}else c(d);return s.get(d)}return{get:o,update:l,getWireframeAttribute:u}}function B6e(n,e,t,i){const r=i.isWebGL2;let s;function a(f){s=f}let o,l;function c(f){o=f.type,l=f.bytesPerElement}function u(f,h){n.drawElements(s,h,o,f*l),t.update(h,s,1)}function d(f,h,p){if(p===0)return;let m,v;if(r)m=n,v="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[v](s,h,o,f*l,p),t.update(h,s,p)}this.setMode=a,this.setIndex=c,this.render=u,this.renderInstances=d}function F6e(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case 4:t.triangles+=o*(s/3);break;case 1:t.lines+=o*(s/2);break;case 3:t.lines+=o*(s-1);break;case 2:t.lines+=o*s;break;case 0:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function z6e(n,e){return n[0]-e[0]}function U6e(n,e){return Math.abs(e[1])-Math.abs(n[1])}function RE(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Uint8Array?t=255:i instanceof Uint16Array?t=65535:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function H6e(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,a=new wi,o=[];for(let c=0;c<8;c++)o[c]=[c,0];function l(c,u,d,f){const h=c.morphTargetInfluences;if(e.isWebGL2===!0){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=p!==void 0?p.length:0;let v=s.get(u);if(v===void 0||v.count!==m){let y=function(){D.dispose(),s.delete(u),u.removeEventListener("dispose",y)};v!==void 0&&v.texture.dispose();const S=u.morphAttributes.position!==void 0,w=u.morphAttributes.normal!==void 0,x=u.morphAttributes.color!==void 0,T=u.morphAttributes.position||[],C=u.morphAttributes.normal||[],M=u.morphAttributes.color||[];let A=0;S===!0&&(A=1),w===!0&&(A=2),x===!0&&(A=3);let E=u.attributes.position.count*A,I=1;E>e.maxTextureSize&&(I=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const P=new Float32Array(E*I*4*m),D=new Mj(P,E,I,m);D.type=fd,D.needsUpdate=!0;const L=A*4;for(let R=0;R<m;R++){const B=T[R],k=C[R],O=M[R],U=E*I*4*R;for(let G=0;G<B.count;G++){const q=G*L;S===!0&&(a.fromBufferAttribute(B,G),B.normalized===!0&&RE(a,B),P[U+q+0]=a.x,P[U+q+1]=a.y,P[U+q+2]=a.z,P[U+q+3]=0),w===!0&&(a.fromBufferAttribute(k,G),k.normalized===!0&&RE(a,k),P[U+q+4]=a.x,P[U+q+5]=a.y,P[U+q+6]=a.z,P[U+q+7]=0),x===!0&&(a.fromBufferAttribute(O,G),O.normalized===!0&&RE(a,O),P[U+q+8]=a.x,P[U+q+9]=a.y,P[U+q+10]=a.z,P[U+q+11]=O.itemSize===4?a.w:1)}}v={count:m,texture:D,size:new St(E,I)},s.set(u,v),u.addEventListener("dispose",y)}let g=0;for(let y=0;y<h.length;y++)g+=h[y];const _=u.morphTargetsRelative?1:1-g;f.getUniforms().setValue(n,"morphTargetBaseInfluence",_),f.getUniforms().setValue(n,"morphTargetInfluences",h),f.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}else{const p=h===void 0?0:h.length;let m=i[u.id];if(m===void 0||m.length!==p){m=[];for(let S=0;S<p;S++)m[S]=[S,0];i[u.id]=m}for(let S=0;S<p;S++){const w=m[S];w[0]=S,w[1]=h[S]}m.sort(U6e);for(let S=0;S<8;S++)S<p&&m[S][1]?(o[S][0]=m[S][0],o[S][1]=m[S][1]):(o[S][0]=Number.MAX_SAFE_INTEGER,o[S][1]=0);o.sort(z6e);const v=u.morphAttributes.position,g=u.morphAttributes.normal;let _=0;for(let S=0;S<8;S++){const w=o[S],x=w[0],T=w[1];x!==Number.MAX_SAFE_INTEGER&&T?(v&&u.getAttribute("morphTarget"+S)!==v[x]&&u.setAttribute("morphTarget"+S,v[x]),g&&u.getAttribute("morphNormal"+S)!==g[x]&&u.setAttribute("morphNormal"+S,g[x]),r[S]=T,_+=T):(v&&u.hasAttribute("morphTarget"+S)===!0&&u.deleteAttribute("morphTarget"+S),g&&u.hasAttribute("morphNormal"+S)===!0&&u.deleteAttribute("morphNormal"+S),r[S]=0)}const y=u.morphTargetsRelative?1:1-_;f.getUniforms().setValue(n,"morphTargetBaseInfluence",y),f.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function V6e(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,d=e.get(l,u);return r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),d}function a(){r=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}const kj=new ds,Oj=new Mj,Nj=new P5e,Bj=new qk,O5=[],N5=[],B5=new Float32Array(16),F5=new Float32Array(9),z5=new Float32Array(4);function Ag(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=O5[r];if(s===void 0&&(s=new Float32Array(r),O5[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function na(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ia(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function WM(n,e){let t=N5[e];t===void 0&&(t=new Int32Array(e),N5[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function $6e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function G6e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(na(t,e))return;n.uniform2fv(this.addr,e),ia(t,e)}}function W6e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(na(t,e))return;n.uniform3fv(this.addr,e),ia(t,e)}}function K6e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(na(t,e))return;n.uniform4fv(this.addr,e),ia(t,e)}}function q6e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(na(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ia(t,e)}else{if(na(t,i))return;z5.set(i),n.uniformMatrix2fv(this.addr,!1,z5),ia(t,i)}}function X6e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(na(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ia(t,e)}else{if(na(t,i))return;F5.set(i),n.uniformMatrix3fv(this.addr,!1,F5),ia(t,i)}}function Y6e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(na(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ia(t,e)}else{if(na(t,i))return;B5.set(i),n.uniformMatrix4fv(this.addr,!1,B5),ia(t,i)}}function j6e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Q6e(n,e){const t=this.cache;na(t,e)||(n.uniform2iv(this.addr,e),ia(t,e))}function Z6e(n,e){const t=this.cache;na(t,e)||(n.uniform3iv(this.addr,e),ia(t,e))}function J6e(n,e){const t=this.cache;na(t,e)||(n.uniform4iv(this.addr,e),ia(t,e))}function e8e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function t8e(n,e){const t=this.cache;na(t,e)||(n.uniform2uiv(this.addr,e),ia(t,e))}function n8e(n,e){const t=this.cache;na(t,e)||(n.uniform3uiv(this.addr,e),ia(t,e))}function i8e(n,e){const t=this.cache;na(t,e)||(n.uniform4uiv(this.addr,e),ia(t,e))}function r8e(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||kj,r)}function s8e(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Nj,r)}function a8e(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||Bj,r)}function o8e(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||Oj,r)}function l8e(n){switch(n){case 5126:return $6e;case 35664:return G6e;case 35665:return W6e;case 35666:return K6e;case 35674:return q6e;case 35675:return X6e;case 35676:return Y6e;case 5124:case 35670:return j6e;case 35667:case 35671:return Q6e;case 35668:case 35672:return Z6e;case 35669:case 35673:return J6e;case 5125:return e8e;case 36294:return t8e;case 36295:return n8e;case 36296:return i8e;case 35678:case 36198:case 36298:case 36306:case 35682:return r8e;case 35679:case 36299:case 36307:return s8e;case 35680:case 36300:case 36308:case 36293:return a8e;case 36289:case 36303:case 36311:case 36292:return o8e}}function c8e(n,e){n.uniform1fv(this.addr,e)}function u8e(n,e){const t=Ag(e,this.size,2);n.uniform2fv(this.addr,t)}function d8e(n,e){const t=Ag(e,this.size,3);n.uniform3fv(this.addr,t)}function f8e(n,e){const t=Ag(e,this.size,4);n.uniform4fv(this.addr,t)}function h8e(n,e){const t=Ag(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function p8e(n,e){const t=Ag(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function m8e(n,e){const t=Ag(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function v8e(n,e){n.uniform1iv(this.addr,e)}function g8e(n,e){n.uniform2iv(this.addr,e)}function y8e(n,e){n.uniform3iv(this.addr,e)}function _8e(n,e){n.uniform4iv(this.addr,e)}function b8e(n,e){n.uniform1uiv(this.addr,e)}function S8e(n,e){n.uniform2uiv(this.addr,e)}function w8e(n,e){n.uniform3uiv(this.addr,e)}function x8e(n,e){n.uniform4uiv(this.addr,e)}function C8e(n,e,t){const i=e.length,r=WM(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2D(e[s]||kj,r[s])}function M8e(n,e,t){const i=e.length,r=WM(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||Nj,r[s])}function T8e(n,e,t){const i=e.length,r=WM(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTextureCube(e[s]||Bj,r[s])}function A8e(n,e,t){const i=e.length,r=WM(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||Oj,r[s])}function E8e(n){switch(n){case 5126:return c8e;case 35664:return u8e;case 35665:return d8e;case 35666:return f8e;case 35674:return h8e;case 35675:return p8e;case 35676:return m8e;case 5124:case 35670:return v8e;case 35667:case 35671:return g8e;case 35668:case 35672:return y8e;case 35669:case 35673:return _8e;case 5125:return b8e;case 36294:return S8e;case 36295:return w8e;case 36296:return x8e;case 35678:case 36198:case 36298:case 36306:case 35682:return C8e;case 35679:case 36299:case 36307:return M8e;case 35680:case 36300:case 36308:case 36293:return T8e;case 36289:case 36303:case 36311:case 36292:return A8e}}let I8e=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=l8e(t.type)}},R8e=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=E8e(t.type)}},P8e=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}};const PE=/(\w+)(\])?(\[|\.)?/g;function U5(n,e){n.seq.push(e),n.map[e.id]=e}function D8e(n,e,t){const i=n.name,r=i.length;for(PE.lastIndex=0;;){const s=PE.exec(i),a=PE.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===r){U5(t,c===void 0?new I8e(o,n,e):new R8e(o,n,e));break}else{let d=t.map[o];d===void 0&&(d=new P8e(o),U5(t,d)),t=d}}}let $1=class{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);D8e(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}};function H5(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let L8e=0;function k8e(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}function O8e(n){switch(n){case Gd:return["Linear","( value )"];case Xn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function V5(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+k8e(n.getShaderSource(e),a)}else return r}function N8e(n,e){const t=O8e(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function B8e(n,e){let t;switch(e){case UHe:t="Linear";break;case HHe:t="Reinhard";break;case VHe:t="OptimizedCineon";break;case $He:t="ACESFilmic";break;case GHe:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function F8e(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(q0).join(`
`)}function z8e(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function U8e(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===35674&&(o=2),s.type===35675&&(o=3),s.type===35676&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function q0(n){return n!==""}function $5(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function G5(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const H8e=/^[ \t]*#include +<([\w\d./]+)>/gm;function yP(n){return n.replace(H8e,V8e)}function V8e(n,e){const t=ei[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return yP(t)}const $8e=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,G8e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function W5(n){return n.replace(G8e,Fj).replace($8e,W8e)}function W8e(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Fj(n,e,t,i)}function Fj(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function K5(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function K8e(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===fj?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===gHe?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===K0&&(e="SHADOWMAP_TYPE_VSM"),e}function q8e(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Kh:case qh:e="ENVMAP_TYPE_CUBE";break;case Cb:e="ENVMAP_TYPE_CUBE_UV";break}return e}function X8e(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case qh:e="ENVMAP_MODE_REFRACTION";break}return e}function Y8e(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case $M:e="ENVMAP_BLENDING_MULTIPLY";break;case FHe:e="ENVMAP_BLENDING_MIX";break;case zHe:e="ENVMAP_BLENDING_ADD";break}return e}function j8e(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function Q8e(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=K8e(t),c=q8e(t),u=X8e(t),d=Y8e(t),f=j8e(t),h=t.isWebGL2?"":F8e(t),p=z8e(s),m=r.createProgram();let v,g,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=[p].filter(q0).join(`
`),v.length>0&&(v+=`
`),g=[h,p].filter(q0).join(`
`),g.length>0&&(g+=`
`)):(v=[K5(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(q0).join(`
`),g=[h,K5(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==qc?"#define TONE_MAPPING":"",t.toneMapping!==qc?ei.tonemapping_pars_fragment:"",t.toneMapping!==qc?B8e("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ei.encodings_pars_fragment,N8e("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(q0).join(`
`)),a=yP(a),a=$5(a,t),a=G5(a,t),o=yP(o),o=$5(o,t),o=G5(o,t),a=W5(a),o=W5(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,g=["#define varying in",t.glslVersion===m5?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===m5?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const y=_+v+a,S=_+g+o,w=H5(r,35633,y),x=H5(r,35632,S);if(r.attachShader(m,w),r.attachShader(m,x),t.index0AttributeName!==void 0?r.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),n.debug.checkShaderErrors){const M=r.getProgramInfoLog(m).trim(),A=r.getShaderInfoLog(w).trim(),E=r.getShaderInfoLog(x).trim();let I=!0,P=!0;if(r.getProgramParameter(m,35714)===!1){I=!1;const D=V5(r,w,"vertex"),L=V5(r,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+`

Program Info Log: `+M+`
`+D+`
`+L)}else M!==""?console.warn("THREE.WebGLProgram: Program Info Log:",M):(A===""||E==="")&&(P=!1);P&&(this.diagnostics={runnable:I,programLog:M,vertexShader:{log:A,prefix:v},fragmentShader:{log:E,prefix:g}})}r.deleteShader(w),r.deleteShader(x);let T;this.getUniforms=function(){return T===void 0&&(T=new $1(r,m)),T};let C;return this.getAttributes=function(){return C===void 0&&(C=U8e(r,m)),C},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=t.shaderName,this.id=L8e++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=x,this}let Z8e=0,J8e=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const i=new eGe(e);t.set(e,i)}return t.get(e)}},eGe=class{constructor(e){this.id=Z8e++,this.code=e,this.usedTimes=0}};function tGe(n,e,t,i,r,s,a){const o=new Wk,l=new J8e,c=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,f=r.vertexTextures;let h=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(C,M,A,E,I){const P=E.fog,D=I.geometry,L=C.isMeshStandardMaterial?E.environment:null,R=(C.isMeshStandardMaterial?t:e).get(C.envMap||L),B=R&&R.mapping===Cb?R.image.height:null,k=p[C.type];C.precision!==null&&(h=r.getMaxPrecision(C.precision),h!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",h,"instead."));const O=D.morphAttributes.position||D.morphAttributes.normal||D.morphAttributes.color,U=O!==void 0?O.length:0;let G=0;D.morphAttributes.position!==void 0&&(G=1),D.morphAttributes.normal!==void 0&&(G=2),D.morphAttributes.color!==void 0&&(G=3);let q,W,Y,J;if(k){const Ee=Il[k];q=Ee.vertexShader,W=Ee.fragmentShader}else q=C.vertexShader,W=C.fragmentShader,l.update(C),Y=l.getVertexShaderID(C),J=l.getFragmentShaderID(C);const Z=n.getRenderTarget(),ee=C.alphaTest>0,me=C.clearcoat>0,ye=C.iridescence>0;return{isWebGL2:u,shaderID:k,shaderName:C.type,vertexShader:q,fragmentShader:W,defines:C.defines,customVertexShaderID:Y,customFragmentShaderID:J,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:h,instancing:I.isInstancedMesh===!0,instancingColor:I.isInstancedMesh===!0&&I.instanceColor!==null,supportsVertexTextures:f,outputEncoding:Z===null?n.outputEncoding:Z.isXRRenderTarget===!0?Z.texture.encoding:Gd,map:!!C.map,matcap:!!C.matcap,envMap:!!R,envMapMode:R&&R.mapping,envMapCubeUVHeight:B,lightMap:!!C.lightMap,aoMap:!!C.aoMap,emissiveMap:!!C.emissiveMap,bumpMap:!!C.bumpMap,normalMap:!!C.normalMap,objectSpaceNormalMap:C.normalMapType===f5e,tangentSpaceNormalMap:C.normalMapType===op,decodeVideoTexture:!!C.map&&C.map.isVideoTexture===!0&&C.map.encoding===Xn,clearcoat:me,clearcoatMap:me&&!!C.clearcoatMap,clearcoatRoughnessMap:me&&!!C.clearcoatRoughnessMap,clearcoatNormalMap:me&&!!C.clearcoatNormalMap,iridescence:ye,iridescenceMap:ye&&!!C.iridescenceMap,iridescenceThicknessMap:ye&&!!C.iridescenceThicknessMap,displacementMap:!!C.displacementMap,roughnessMap:!!C.roughnessMap,metalnessMap:!!C.metalnessMap,specularMap:!!C.specularMap,specularIntensityMap:!!C.specularIntensityMap,specularColorMap:!!C.specularColorMap,opaque:C.transparent===!1&&C.blending===cv,alphaMap:!!C.alphaMap,alphaTest:ee,gradientMap:!!C.gradientMap,sheen:C.sheen>0,sheenColorMap:!!C.sheenColorMap,sheenRoughnessMap:!!C.sheenRoughnessMap,transmission:C.transmission>0,transmissionMap:!!C.transmissionMap,thicknessMap:!!C.thicknessMap,combine:C.combine,vertexTangents:!!C.normalMap&&!!D.attributes.tangent,vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!D.attributes.color&&D.attributes.color.itemSize===4,vertexUvs:!!C.map||!!C.bumpMap||!!C.normalMap||!!C.specularMap||!!C.alphaMap||!!C.emissiveMap||!!C.roughnessMap||!!C.metalnessMap||!!C.clearcoatMap||!!C.clearcoatRoughnessMap||!!C.clearcoatNormalMap||!!C.iridescenceMap||!!C.iridescenceThicknessMap||!!C.displacementMap||!!C.transmissionMap||!!C.thicknessMap||!!C.specularIntensityMap||!!C.specularColorMap||!!C.sheenColorMap||!!C.sheenRoughnessMap,uvsVertexOnly:!(C.map||C.bumpMap||C.normalMap||C.specularMap||C.alphaMap||C.emissiveMap||C.roughnessMap||C.metalnessMap||C.clearcoatNormalMap||C.iridescenceMap||C.iridescenceThicknessMap||C.transmission>0||C.transmissionMap||C.thicknessMap||C.specularIntensityMap||C.specularColorMap||C.sheen>0||C.sheenColorMap||C.sheenRoughnessMap)&&!!C.displacementMap,fog:!!P,useFog:C.fog===!0,fogExp2:P&&P.isFogExp2,flatShading:!!C.flatShading,sizeAttenuation:C.sizeAttenuation,logarithmicDepthBuffer:d,skinning:I.isSkinnedMesh===!0,morphTargets:D.morphAttributes.position!==void 0,morphNormals:D.morphAttributes.normal!==void 0,morphColors:D.morphAttributes.color!==void 0,morphTargetsCount:U,morphTextureStride:G,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&A.length>0,shadowMapType:n.shadowMap.type,toneMapping:C.toneMapped?n.toneMapping:qc,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===$d,flipSided:C.side===ul,useDepthPacking:!!C.depthPacking,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:C.extensions&&C.extensions.derivatives,extensionFragDepth:C.extensions&&C.extensions.fragDepth,extensionDrawBuffers:C.extensions&&C.extensions.drawBuffers,extensionShaderTextureLOD:C.extensions&&C.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()}}function v(C){const M=[];if(C.shaderID?M.push(C.shaderID):(M.push(C.customVertexShaderID),M.push(C.customFragmentShaderID)),C.defines!==void 0)for(const A in C.defines)M.push(A),M.push(C.defines[A]);return C.isRawShaderMaterial===!1&&(g(M,C),_(M,C),M.push(n.outputEncoding)),M.push(C.customProgramCacheKey),M.join()}function g(C,M){C.push(M.precision),C.push(M.outputEncoding),C.push(M.envMapMode),C.push(M.envMapCubeUVHeight),C.push(M.combine),C.push(M.vertexUvs),C.push(M.fogExp2),C.push(M.sizeAttenuation),C.push(M.morphTargetsCount),C.push(M.morphAttributeCount),C.push(M.numDirLights),C.push(M.numPointLights),C.push(M.numSpotLights),C.push(M.numHemiLights),C.push(M.numRectAreaLights),C.push(M.numDirLightShadows),C.push(M.numPointLightShadows),C.push(M.numSpotLightShadows),C.push(M.shadowMapType),C.push(M.toneMapping),C.push(M.numClippingPlanes),C.push(M.numClipIntersection),C.push(M.depthPacking)}function _(C,M){o.disableAll(),M.isWebGL2&&o.enable(0),M.supportsVertexTextures&&o.enable(1),M.instancing&&o.enable(2),M.instancingColor&&o.enable(3),M.map&&o.enable(4),M.matcap&&o.enable(5),M.envMap&&o.enable(6),M.lightMap&&o.enable(7),M.aoMap&&o.enable(8),M.emissiveMap&&o.enable(9),M.bumpMap&&o.enable(10),M.normalMap&&o.enable(11),M.objectSpaceNormalMap&&o.enable(12),M.tangentSpaceNormalMap&&o.enable(13),M.clearcoat&&o.enable(14),M.clearcoatMap&&o.enable(15),M.clearcoatRoughnessMap&&o.enable(16),M.clearcoatNormalMap&&o.enable(17),M.iridescence&&o.enable(18),M.iridescenceMap&&o.enable(19),M.iridescenceThicknessMap&&o.enable(20),M.displacementMap&&o.enable(21),M.specularMap&&o.enable(22),M.roughnessMap&&o.enable(23),M.metalnessMap&&o.enable(24),M.gradientMap&&o.enable(25),M.alphaMap&&o.enable(26),M.alphaTest&&o.enable(27),M.vertexColors&&o.enable(28),M.vertexAlphas&&o.enable(29),M.vertexUvs&&o.enable(30),M.vertexTangents&&o.enable(31),M.uvsVertexOnly&&o.enable(32),M.fog&&o.enable(33),C.push(o.mask),o.disableAll(),M.useFog&&o.enable(0),M.flatShading&&o.enable(1),M.logarithmicDepthBuffer&&o.enable(2),M.skinning&&o.enable(3),M.morphTargets&&o.enable(4),M.morphNormals&&o.enable(5),M.morphColors&&o.enable(6),M.premultipliedAlpha&&o.enable(7),M.shadowMapEnabled&&o.enable(8),M.physicallyCorrectLights&&o.enable(9),M.doubleSided&&o.enable(10),M.flipSided&&o.enable(11),M.useDepthPacking&&o.enable(12),M.dithering&&o.enable(13),M.specularIntensityMap&&o.enable(14),M.specularColorMap&&o.enable(15),M.transmission&&o.enable(16),M.transmissionMap&&o.enable(17),M.thicknessMap&&o.enable(18),M.sheen&&o.enable(19),M.sheenColorMap&&o.enable(20),M.sheenRoughnessMap&&o.enable(21),M.decodeVideoTexture&&o.enable(22),M.opaque&&o.enable(23),C.push(o.mask)}function y(C){const M=p[C.type];let A;if(M){const E=Il[M];A=$5e.clone(E.uniforms)}else A=C.uniforms;return A}function S(C,M){let A;for(let E=0,I=c.length;E<I;E++){const P=c[E];if(P.cacheKey===M){A=P,++A.usedTimes;break}}return A===void 0&&(A=new Q8e(n,M,C,s),c.push(A)),A}function w(C){if(--C.usedTimes===0){const M=c.indexOf(C);c[M]=c[c.length-1],c.pop(),C.destroy()}}function x(C){l.remove(C)}function T(){l.dispose()}return{getParameters:m,getProgramCacheKey:v,getUniforms:y,acquireProgram:S,releaseProgram:w,releaseShaderCache:x,programs:c,dispose:T}}function nGe(){let n=new WeakMap;function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function t(s){n.delete(s)}function i(s,a,o){n.get(s)[a]=o}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function iGe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function q5(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function X5(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(d,f,h,p,m,v){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:f,material:h,groupOrder:p,renderOrder:d.renderOrder,z:m,group:v},n[e]=g):(g.id=d.id,g.object=d,g.geometry=f,g.material=h,g.groupOrder=p,g.renderOrder=d.renderOrder,g.z=m,g.group=v),e++,g}function o(d,f,h,p,m,v){const g=a(d,f,h,p,m,v);h.transmission>0?i.push(g):h.transparent===!0?r.push(g):t.push(g)}function l(d,f,h,p,m,v){const g=a(d,f,h,p,m,v);h.transmission>0?i.unshift(g):h.transparent===!0?r.unshift(g):t.unshift(g)}function c(d,f){t.length>1&&t.sort(d||iGe),i.length>1&&i.sort(f||q5),r.length>1&&r.sort(f||q5)}function u(){for(let d=e,f=n.length;d<f;d++){const h=n[d];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:u,sort:c}}function rGe(){let n=new WeakMap;function e(i,r){let s;return n.has(i)===!1?(s=new X5,n.set(i,[s])):r>=n.get(i).length?(s=new X5,n.get(i).push(s)):s=n.get(i)[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function sGe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ke,color:new zt};break;case"SpotLight":t={position:new ke,direction:new ke,color:new zt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ke,color:new zt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ke,skyColor:new zt,groundColor:new zt};break;case"RectAreaLight":t={color:new zt,position:new ke,halfWidth:new ke,halfHeight:new ke};break}return n[e.id]=t,t}}}function aGe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new St};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new St};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new St,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let oGe=0;function lGe(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function cGe(n,e){const t=new sGe,i=aGe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)r.probe.push(new ke);const s=new ke,a=new nn,o=new nn;function l(u,d){let f=0,h=0,p=0;for(let M=0;M<9;M++)r.probe[M].set(0,0,0);let m=0,v=0,g=0,_=0,y=0,S=0,w=0,x=0;u.sort(lGe);const T=d!==!0?Math.PI:1;for(let M=0,A=u.length;M<A;M++){const E=u[M],I=E.color,P=E.intensity,D=E.distance,L=E.shadow&&E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)f+=I.r*P*T,h+=I.g*P*T,p+=I.b*P*T;else if(E.isLightProbe)for(let R=0;R<9;R++)r.probe[R].addScaledVector(E.sh.coefficients[R],P);else if(E.isDirectionalLight){const R=t.get(E);if(R.color.copy(E.color).multiplyScalar(E.intensity*T),E.castShadow){const B=E.shadow,k=i.get(E);k.shadowBias=B.bias,k.shadowNormalBias=B.normalBias,k.shadowRadius=B.radius,k.shadowMapSize=B.mapSize,r.directionalShadow[m]=k,r.directionalShadowMap[m]=L,r.directionalShadowMatrix[m]=E.shadow.matrix,S++}r.directional[m]=R,m++}else if(E.isSpotLight){const R=t.get(E);if(R.position.setFromMatrixPosition(E.matrixWorld),R.color.copy(I).multiplyScalar(P*T),R.distance=D,R.coneCos=Math.cos(E.angle),R.penumbraCos=Math.cos(E.angle*(1-E.penumbra)),R.decay=E.decay,E.castShadow){const B=E.shadow,k=i.get(E);k.shadowBias=B.bias,k.shadowNormalBias=B.normalBias,k.shadowRadius=B.radius,k.shadowMapSize=B.mapSize,r.spotShadow[g]=k,r.spotShadowMap[g]=L,r.spotShadowMatrix[g]=E.shadow.matrix,x++}r.spot[g]=R,g++}else if(E.isRectAreaLight){const R=t.get(E);R.color.copy(I).multiplyScalar(P),R.halfWidth.set(E.width*.5,0,0),R.halfHeight.set(0,E.height*.5,0),r.rectArea[_]=R,_++}else if(E.isPointLight){const R=t.get(E);if(R.color.copy(E.color).multiplyScalar(E.intensity*T),R.distance=E.distance,R.decay=E.decay,E.castShadow){const B=E.shadow,k=i.get(E);k.shadowBias=B.bias,k.shadowNormalBias=B.normalBias,k.shadowRadius=B.radius,k.shadowMapSize=B.mapSize,k.shadowCameraNear=B.camera.near,k.shadowCameraFar=B.camera.far,r.pointShadow[v]=k,r.pointShadowMap[v]=L,r.pointShadowMatrix[v]=E.shadow.matrix,w++}r.point[v]=R,v++}else if(E.isHemisphereLight){const R=t.get(E);R.skyColor.copy(E.color).multiplyScalar(P*T),R.groundColor.copy(E.groundColor).multiplyScalar(P*T),r.hemi[y]=R,y++}}_>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Gt.LTC_FLOAT_1,r.rectAreaLTC2=Gt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Gt.LTC_HALF_1,r.rectAreaLTC2=Gt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=f,r.ambient[1]=h,r.ambient[2]=p;const C=r.hash;(C.directionalLength!==m||C.pointLength!==v||C.spotLength!==g||C.rectAreaLength!==_||C.hemiLength!==y||C.numDirectionalShadows!==S||C.numPointShadows!==w||C.numSpotShadows!==x)&&(r.directional.length=m,r.spot.length=g,r.rectArea.length=_,r.point.length=v,r.hemi.length=y,r.directionalShadow.length=S,r.directionalShadowMap.length=S,r.pointShadow.length=w,r.pointShadowMap.length=w,r.spotShadow.length=x,r.spotShadowMap.length=x,r.directionalShadowMatrix.length=S,r.pointShadowMatrix.length=w,r.spotShadowMatrix.length=x,C.directionalLength=m,C.pointLength=v,C.spotLength=g,C.rectAreaLength=_,C.hemiLength=y,C.numDirectionalShadows=S,C.numPointShadows=w,C.numSpotShadows=x,r.version=oGe++)}function c(u,d){let f=0,h=0,p=0,m=0,v=0;const g=d.matrixWorldInverse;for(let _=0,y=u.length;_<y;_++){const S=u[_];if(S.isDirectionalLight){const w=r.directional[f];w.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(g),f++}else if(S.isSpotLight){const w=r.spot[p];w.position.setFromMatrixPosition(S.matrixWorld),w.position.applyMatrix4(g),w.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(g),p++}else if(S.isRectAreaLight){const w=r.rectArea[m];w.position.setFromMatrixPosition(S.matrixWorld),w.position.applyMatrix4(g),o.identity(),a.copy(S.matrixWorld),a.premultiply(g),o.extractRotation(a),w.halfWidth.set(S.width*.5,0,0),w.halfHeight.set(0,S.height*.5,0),w.halfWidth.applyMatrix4(o),w.halfHeight.applyMatrix4(o),m++}else if(S.isPointLight){const w=r.point[h];w.position.setFromMatrixPosition(S.matrixWorld),w.position.applyMatrix4(g),h++}else if(S.isHemisphereLight){const w=r.hemi[v];w.direction.setFromMatrixPosition(S.matrixWorld),w.direction.transformDirection(g),v++}}}return{setup:l,setupView:c,state:r}}function Y5(n,e){const t=new cGe(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function a(d){i.push(d)}function o(d){r.push(d)}function l(d){t.setup(i,d)}function c(d){t.setupView(i,d)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:a,pushShadow:o}}function uGe(n,e){let t=new WeakMap;function i(s,a=0){let o;return t.has(s)===!1?(o=new Y5(n,e),t.set(s,[o])):a>=t.get(s).length?(o=new Y5(n,e),t.get(s).push(o)):o=t.get(s)[a],o}function r(){t=new WeakMap}return{get:i,dispose:r}}let zj=class extends Cr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=u5e,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Uj=class extends Cr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ke,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};const dGe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fGe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function hGe(n,e,t){let i=new Xk;const r=new St,s=new St,a=new wi,o=new zj({depthPacking:d5e}),l=new Uj,c={},u=t.maxTextureSize,d={0:ul,1:Vd,2:$d},f=new iu({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new St},radius:{value:4}},vertexShader:dGe,fragmentShader:fGe}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new si;p.setAttribute("position",new lr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Br(p,f),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=fj,this.render=function(S,w,x){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||S.length===0)return;const T=n.getRenderTarget(),C=n.getActiveCubeFace(),M=n.getActiveMipmapLevel(),A=n.state;A.setBlending(bd),A.buffers.color.setClear(1,1,1,1),A.buffers.depth.setTest(!0),A.setScissorTest(!1);for(let E=0,I=S.length;E<I;E++){const P=S[E],D=P.shadow;if(D===void 0){console.warn("THREE.WebGLShadowMap:",P,"has no shadow.");continue}if(D.autoUpdate===!1&&D.needsUpdate===!1)continue;r.copy(D.mapSize);const L=D.getFrameExtents();if(r.multiply(L),s.copy(D.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/L.x),r.x=s.x*L.x,D.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/L.y),r.y=s.y*L.y,D.mapSize.y=s.y)),D.map===null){const B=this.type!==K0?{minFilter:qr,magFilter:qr}:{};D.map=new Yh(r.x,r.y,B),D.map.texture.name=P.name+".shadowMap",D.camera.updateProjectionMatrix()}n.setRenderTarget(D.map),n.clear();const R=D.getViewportCount();for(let B=0;B<R;B++){const k=D.getViewport(B);a.set(s.x*k.x,s.y*k.y,s.x*k.z,s.y*k.w),A.viewport(a),D.updateMatrices(P,B),i=D.getFrustum(),y(w,x,D.camera,P,this.type)}D.isPointLightShadow!==!0&&this.type===K0&&g(D,x),D.needsUpdate=!1}v.needsUpdate=!1,n.setRenderTarget(T,C,M)};function g(S,w){const x=e.update(m);f.defines.VSM_SAMPLES!==S.blurSamples&&(f.defines.VSM_SAMPLES=S.blurSamples,h.defines.VSM_SAMPLES=S.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new Yh(r.x,r.y)),f.uniforms.shadow_pass.value=S.map.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(w,null,x,f,m,null),h.uniforms.shadow_pass.value=S.mapPass.texture,h.uniforms.resolution.value=S.mapSize,h.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(w,null,x,h,m,null)}function _(S,w,x,T,C,M){let A=null;const E=x.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(E!==void 0?A=E:A=x.isPointLight===!0?l:o,n.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0){const I=A.uuid,P=w.uuid;let D=c[I];D===void 0&&(D={},c[I]=D);let L=D[P];L===void 0&&(L=A.clone(),D[P]=L),A=L}return A.visible=w.visible,A.wireframe=w.wireframe,M===K0?A.side=w.shadowSide!==null?w.shadowSide:w.side:A.side=w.shadowSide!==null?w.shadowSide:d[w.side],A.alphaMap=w.alphaMap,A.alphaTest=w.alphaTest,A.clipShadows=w.clipShadows,A.clippingPlanes=w.clippingPlanes,A.clipIntersection=w.clipIntersection,A.displacementMap=w.displacementMap,A.displacementScale=w.displacementScale,A.displacementBias=w.displacementBias,A.wireframeLinewidth=w.wireframeLinewidth,A.linewidth=w.linewidth,x.isPointLight===!0&&A.isMeshDistanceMaterial===!0&&(A.referencePosition.setFromMatrixPosition(x.matrixWorld),A.nearDistance=T,A.farDistance=C),A}function y(S,w,x,T,C){if(S.visible===!1)return;if(S.layers.test(w.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&C===K0)&&(!S.frustumCulled||i.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(x.matrixWorldInverse,S.matrixWorld);const E=e.update(S),I=S.material;if(Array.isArray(I)){const P=E.groups;for(let D=0,L=P.length;D<L;D++){const R=P[D],B=I[R.materialIndex];if(B&&B.visible){const k=_(S,B,T,x.near,x.far,C);n.renderBufferDirect(x,null,E,k,S,R)}}}else if(I.visible){const P=_(S,I,T,x.near,x.far,C);n.renderBufferDirect(x,null,E,P,S,null)}}const A=S.children;for(let E=0,I=A.length;E<I;E++)y(A[E],w,x,T,C)}}function pGe(n,e,t){const i=t.isWebGL2;function r(){let de=!1;const qe=new wi;let fe=null;const Je=new wi(0,0,0,0);return{setMask:function($e){fe!==$e&&!de&&(n.colorMask($e,$e,$e,$e),fe=$e)},setLocked:function($e){de=$e},setClear:function($e,et,ht,st,Rt){Rt===!0&&($e*=st,et*=st,ht*=st),qe.set($e,et,ht,st),Je.equals(qe)===!1&&(n.clearColor($e,et,ht,st),Je.copy(qe))},reset:function(){de=!1,fe=null,Je.set(-1,0,0,0)}}}function s(){let de=!1,qe=null,fe=null,Je=null;return{setTest:function($e){$e?ee(2929):me(2929)},setMask:function($e){qe!==$e&&!de&&(n.depthMask($e),qe=$e)},setFunc:function($e){if(fe!==$e){if($e)switch($e){case PHe:n.depthFunc(512);break;case DHe:n.depthFunc(519);break;case LHe:n.depthFunc(513);break;case uP:n.depthFunc(515);break;case kHe:n.depthFunc(514);break;case OHe:n.depthFunc(518);break;case NHe:n.depthFunc(516);break;case BHe:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);fe=$e}},setLocked:function($e){de=$e},setClear:function($e){Je!==$e&&(n.clearDepth($e),Je=$e)},reset:function(){de=!1,qe=null,fe=null,Je=null}}}function a(){let de=!1,qe=null,fe=null,Je=null,$e=null,et=null,ht=null,st=null,Rt=null;return{setTest:function(Vt){de||(Vt?ee(2960):me(2960))},setMask:function(Vt){qe!==Vt&&!de&&(n.stencilMask(Vt),qe=Vt)},setFunc:function(Vt,Pn,Jt){(fe!==Vt||Je!==Pn||$e!==Jt)&&(n.stencilFunc(Vt,Pn,Jt),fe=Vt,Je=Pn,$e=Jt)},setOp:function(Vt,Pn,Jt){(et!==Vt||ht!==Pn||st!==Jt)&&(n.stencilOp(Vt,Pn,Jt),et=Vt,ht=Pn,st=Jt)},setLocked:function(Vt){de=Vt},setClear:function(Vt){Rt!==Vt&&(n.clearStencil(Vt),Rt=Vt)},reset:function(){de=!1,qe=null,fe=null,Je=null,$e=null,et=null,ht=null,st=null,Rt=null}}}const o=new r,l=new s,c=new a,u=new WeakMap,d=new WeakMap;let f={},h={},p=new WeakMap,m=[],v=null,g=!1,_=null,y=null,S=null,w=null,x=null,T=null,C=null,M=!1,A=null,E=null,I=null,P=null,D=null;const L=n.getParameter(35661);let R=!1,B=0;const k=n.getParameter(7938);k.indexOf("WebGL")!==-1?(B=parseFloat(/^WebGL (\d)/.exec(k)[1]),R=B>=1):k.indexOf("OpenGL ES")!==-1&&(B=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),R=B>=2);let O=null,U={};const G=n.getParameter(3088),q=n.getParameter(2978),W=new wi().fromArray(G),Y=new wi().fromArray(q);function J(de,qe,fe){const Je=new Uint8Array(4),$e=n.createTexture();n.bindTexture(de,$e),n.texParameteri(de,10241,9728),n.texParameteri(de,10240,9728);for(let et=0;et<fe;et++)n.texImage2D(qe+et,0,6408,1,1,0,6408,5121,Je);return $e}const Z={};Z[3553]=J(3553,3553,1),Z[34067]=J(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),c.setClear(0),ee(2929),l.setFunc(uP),we(!1),De(VH),ee(2884),j(bd);function ee(de){f[de]!==!0&&(n.enable(de),f[de]=!0)}function me(de){f[de]!==!1&&(n.disable(de),f[de]=!1)}function ye(de,qe){return h[de]!==qe?(n.bindFramebuffer(de,qe),h[de]=qe,i&&(de===36009&&(h[36160]=qe),de===36160&&(h[36009]=qe)),!0):!1}function Te(de,qe){let fe=m,Je=!1;if(de)if(fe=p.get(qe),fe===void 0&&(fe=[],p.set(qe,fe)),de.isWebGLMultipleRenderTargets){const $e=de.texture;if(fe.length!==$e.length||fe[0]!==36064){for(let et=0,ht=$e.length;et<ht;et++)fe[et]=36064+et;fe.length=$e.length,Je=!0}}else fe[0]!==36064&&(fe[0]=36064,Je=!0);else fe[0]!==1029&&(fe[0]=1029,Je=!0);Je&&(t.isWebGL2?n.drawBuffers(fe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(fe))}function Ee(de){return v!==de?(n.useProgram(de),v=de,!0):!1}const H={[Am]:32774,[bHe]:32778,[SHe]:32779};if(i)H[KH]=32775,H[qH]=32776;else{const de=e.get("EXT_blend_minmax");de!==null&&(H[KH]=de.MIN_EXT,H[qH]=de.MAX_EXT)}const Q={[wHe]:0,[xHe]:1,[CHe]:768,[hj]:770,[RHe]:776,[EHe]:774,[THe]:772,[MHe]:769,[pj]:771,[IHe]:775,[AHe]:773};function j(de,qe,fe,Je,$e,et,ht,st){if(de===bd){g===!0&&(me(3042),g=!1);return}if(g===!1&&(ee(3042),g=!0),de!==_He){if(de!==_||st!==M){if((y!==Am||x!==Am)&&(n.blendEquation(32774),y=Am,x=Am),st)switch(de){case cv:n.blendFuncSeparate(1,771,1,771);break;case $H:n.blendFunc(1,1);break;case GH:n.blendFuncSeparate(0,769,0,1);break;case WH:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}else switch(de){case cv:n.blendFuncSeparate(770,771,1,771);break;case $H:n.blendFunc(770,1);break;case GH:n.blendFuncSeparate(0,769,0,1);break;case WH:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}S=null,w=null,T=null,C=null,_=de,M=st}return}$e=$e||qe,et=et||fe,ht=ht||Je,(qe!==y||$e!==x)&&(n.blendEquationSeparate(H[qe],H[$e]),y=qe,x=$e),(fe!==S||Je!==w||et!==T||ht!==C)&&(n.blendFuncSeparate(Q[fe],Q[Je],Q[et],Q[ht]),S=fe,w=Je,T=et,C=ht),_=de,M=null}function Pe(de,qe){de.side===$d?me(2884):ee(2884);let fe=de.side===ul;qe&&(fe=!fe),we(fe),de.blending===cv&&de.transparent===!1?j(bd):j(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.premultipliedAlpha),l.setFunc(de.depthFunc),l.setTest(de.depthTest),l.setMask(de.depthWrite),o.setMask(de.colorWrite);const Je=de.stencilWrite;c.setTest(Je),Je&&(c.setMask(de.stencilWriteMask),c.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),c.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),Ae(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?ee(32926):me(32926)}function we(de){A!==de&&(de?n.frontFace(2304):n.frontFace(2305),A=de)}function De(de){de!==mHe?(ee(2884),de!==E&&(de===VH?n.cullFace(1029):de===vHe?n.cullFace(1028):n.cullFace(1032))):me(2884),E=de}function Me(de){de!==I&&(R&&n.lineWidth(de),I=de)}function Ae(de,qe,fe){de?(ee(32823),(P!==qe||D!==fe)&&(n.polygonOffset(qe,fe),P=qe,D=fe)):me(32823)}function Fe(de){de?ee(3089):me(3089)}function ne(de){de===void 0&&(de=33984+L-1),O!==de&&(n.activeTexture(de),O=de)}function z(de,qe){O===null&&ne();let fe=U[O];fe===void 0&&(fe={type:void 0,texture:void 0},U[O]=fe),(fe.type!==de||fe.texture!==qe)&&(n.bindTexture(de,qe||Z[de]),fe.type=de,fe.texture=qe)}function K(){const de=U[O];de!==void 0&&de.type!==void 0&&(n.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function ae(){try{n.compressedTexImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function xe(){try{n.texSubImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Le(){try{n.texSubImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Xe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function je(){try{n.texStorage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function he(){try{n.texStorage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ye(){try{n.texImage2D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ke(){try{n.texImage3D.apply(n,arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function V(de){W.equals(de)===!1&&(n.scissor(de.x,de.y,de.z,de.w),W.copy(de))}function re(de){Y.equals(de)===!1&&(n.viewport(de.x,de.y,de.z,de.w),Y.copy(de))}function te(de,qe){let fe=d.get(qe);fe===void 0&&(fe=new WeakMap,d.set(qe,fe));let Je=fe.get(de);Je===void 0&&(Je=n.getUniformBlockIndex(qe,de.name),fe.set(de,Je))}function pe(de,qe){const Je=d.get(qe).get(de);u.get(de)!==Je&&(n.uniformBlockBinding(qe,Je,de.__bindingPointIndex),u.set(de,Je))}function se(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},O=null,U={},h={},p=new WeakMap,m=[],v=null,g=!1,_=null,y=null,S=null,w=null,x=null,T=null,C=null,M=!1,A=null,E=null,I=null,P=null,D=null,W.set(0,0,n.canvas.width,n.canvas.height),Y.set(0,0,n.canvas.width,n.canvas.height),o.reset(),l.reset(),c.reset()}return{buffers:{color:o,depth:l,stencil:c},enable:ee,disable:me,bindFramebuffer:ye,drawBuffers:Te,useProgram:Ee,setBlending:j,setMaterial:Pe,setFlipSided:we,setCullFace:De,setLineWidth:Me,setPolygonOffset:Ae,setScissorTest:Fe,activeTexture:ne,bindTexture:z,unbindTexture:K,compressedTexImage2D:ae,texImage2D:Ye,texImage3D:Ke,updateUBOMapping:te,uniformBlockBinding:pe,texStorage2D:je,texStorage3D:he,texSubImage2D:xe,texSubImage3D:Le,compressedTexSubImage2D:Xe,scissor:V,viewport:re,reset:se}}function mGe(n,e,t,i,r,s,a){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const v=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(z,K){return g?new OffscreenCanvas(z,K):O_("canvas")}function y(z,K,ae,xe){let Le=1;if((z.width>xe||z.height>xe)&&(Le=xe/Math.max(z.width,z.height)),Le<1||K===!0)if(typeof HTMLImageElement<"u"&&z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&z instanceof ImageBitmap){const Xe=K?oC:Math.floor,je=Xe(Le*z.width),he=Xe(Le*z.height);m===void 0&&(m=_(je,he));const Ye=ae?_(je,he):m;return Ye.width=je,Ye.height=he,Ye.getContext("2d").drawImage(z,0,0,je,he),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+z.width+"x"+z.height+") to ("+je+"x"+he+")."),Ye}else return"data"in z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+z.width+"x"+z.height+")."),z;return z}function S(z){return hP(z.width)&&hP(z.height)}function w(z){return o?!1:z.wrapS!==Nr||z.wrapT!==Nr||z.minFilter!==qr&&z.minFilter!==wr}function x(z,K){return z.generateMipmaps&&K&&z.minFilter!==qr&&z.minFilter!==wr}function T(z){n.generateMipmap(z)}function C(z,K,ae,xe,Le=!1){if(o===!1)return K;if(z!==null){if(n[z]!==void 0)return n[z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+z+"'")}let Xe=K;return K===6403&&(ae===5126&&(Xe=33326),ae===5131&&(Xe=33325),ae===5121&&(Xe=33321)),K===33319&&(ae===5126&&(Xe=33328),ae===5131&&(Xe=33327),ae===5121&&(Xe=33323)),K===6408&&(ae===5126&&(Xe=34836),ae===5131&&(Xe=34842),ae===5121&&(Xe=xe===Xn&&Le===!1?35907:32856),ae===32819&&(Xe=32854),ae===32820&&(Xe=32855)),(Xe===33325||Xe===33326||Xe===33327||Xe===33328||Xe===34842||Xe===34836)&&e.get("EXT_color_buffer_float"),Xe}function M(z,K,ae){return x(z,ae)===!0||z.isFramebufferTexture&&z.minFilter!==qr&&z.minFilter!==wr?Math.log2(Math.max(K.width,K.height))+1:z.mipmaps!==void 0&&z.mipmaps.length>0?z.mipmaps.length:z.isCompressedTexture&&Array.isArray(z.image)?K.mipmaps.length:1}function A(z){return z===qr||z===rC||z===sC?9728:9729}function E(z){const K=z.target;K.removeEventListener("dispose",E),P(K),K.isVideoTexture&&p.delete(K)}function I(z){const K=z.target;K.removeEventListener("dispose",I),L(K)}function P(z){const K=i.get(z);if(K.__webglInit===void 0)return;const ae=z.source,xe=v.get(ae);if(xe){const Le=xe[K.__cacheKey];Le.usedTimes--,Le.usedTimes===0&&D(z),Object.keys(xe).length===0&&v.delete(ae)}i.remove(z)}function D(z){const K=i.get(z);n.deleteTexture(K.__webglTexture);const ae=z.source,xe=v.get(ae);delete xe[K.__cacheKey],a.memory.textures--}function L(z){const K=z.texture,ae=i.get(z),xe=i.get(K);if(xe.__webglTexture!==void 0&&(n.deleteTexture(xe.__webglTexture),a.memory.textures--),z.depthTexture&&z.depthTexture.dispose(),z.isWebGLCubeRenderTarget)for(let Le=0;Le<6;Le++)n.deleteFramebuffer(ae.__webglFramebuffer[Le]),ae.__webglDepthbuffer&&n.deleteRenderbuffer(ae.__webglDepthbuffer[Le]);else{if(n.deleteFramebuffer(ae.__webglFramebuffer),ae.__webglDepthbuffer&&n.deleteRenderbuffer(ae.__webglDepthbuffer),ae.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ae.__webglMultisampledFramebuffer),ae.__webglColorRenderbuffer)for(let Le=0;Le<ae.__webglColorRenderbuffer.length;Le++)ae.__webglColorRenderbuffer[Le]&&n.deleteRenderbuffer(ae.__webglColorRenderbuffer[Le]);ae.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ae.__webglDepthRenderbuffer)}if(z.isWebGLMultipleRenderTargets)for(let Le=0,Xe=K.length;Le<Xe;Le++){const je=i.get(K[Le]);je.__webglTexture&&(n.deleteTexture(je.__webglTexture),a.memory.textures--),i.remove(K[Le])}i.remove(K),i.remove(z)}let R=0;function B(){R=0}function k(){const z=R;return z>=l&&console.warn("THREE.WebGLTextures: Trying to use "+z+" texture units while this GPU supports only "+l),R+=1,z}function O(z){const K=[];return K.push(z.wrapS),K.push(z.wrapT),K.push(z.magFilter),K.push(z.minFilter),K.push(z.anisotropy),K.push(z.internalFormat),K.push(z.format),K.push(z.type),K.push(z.generateMipmaps),K.push(z.premultiplyAlpha),K.push(z.flipY),K.push(z.unpackAlignment),K.push(z.encoding),K.join()}function U(z,K){const ae=i.get(z);if(z.isVideoTexture&&Fe(z),z.isRenderTargetTexture===!1&&z.version>0&&ae.__version!==z.version){const xe=z.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{me(ae,z,K);return}}t.activeTexture(33984+K),t.bindTexture(3553,ae.__webglTexture)}function G(z,K){const ae=i.get(z);if(z.version>0&&ae.__version!==z.version){me(ae,z,K);return}t.activeTexture(33984+K),t.bindTexture(35866,ae.__webglTexture)}function q(z,K){const ae=i.get(z);if(z.version>0&&ae.__version!==z.version){me(ae,z,K);return}t.activeTexture(33984+K),t.bindTexture(32879,ae.__webglTexture)}function W(z,K){const ae=i.get(z);if(z.version>0&&ae.__version!==z.version){ye(ae,z,K);return}t.activeTexture(33984+K),t.bindTexture(34067,ae.__webglTexture)}const Y={[ha]:10497,[Nr]:33071,[P_]:33648},J={[qr]:9728,[rC]:9984,[sC]:9986,[wr]:9729,[Vk]:9985,[_u]:9987};function Z(z,K,ae){if(ae?(n.texParameteri(z,10242,Y[K.wrapS]),n.texParameteri(z,10243,Y[K.wrapT]),(z===32879||z===35866)&&n.texParameteri(z,32882,Y[K.wrapR]),n.texParameteri(z,10240,J[K.magFilter]),n.texParameteri(z,10241,J[K.minFilter])):(n.texParameteri(z,10242,33071),n.texParameteri(z,10243,33071),(z===32879||z===35866)&&n.texParameteri(z,32882,33071),(K.wrapS!==Nr||K.wrapT!==Nr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(z,10240,A(K.magFilter)),n.texParameteri(z,10241,A(K.minFilter)),K.minFilter!==qr&&K.minFilter!==wr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const xe=e.get("EXT_texture_filter_anisotropic");if(K.type===fd&&e.has("OES_texture_float_linear")===!1||o===!1&&K.type===D_&&e.has("OES_texture_half_float_linear")===!1)return;(K.anisotropy>1||i.get(K).__currentAnisotropy)&&(n.texParameterf(z,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(K.anisotropy,r.getMaxAnisotropy())),i.get(K).__currentAnisotropy=K.anisotropy)}}function ee(z,K){let ae=!1;z.__webglInit===void 0&&(z.__webglInit=!0,K.addEventListener("dispose",E));const xe=K.source;let Le=v.get(xe);Le===void 0&&(Le={},v.set(xe,Le));const Xe=O(K);if(Xe!==z.__cacheKey){Le[Xe]===void 0&&(Le[Xe]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,ae=!0),Le[Xe].usedTimes++;const je=Le[z.__cacheKey];je!==void 0&&(Le[z.__cacheKey].usedTimes--,je.usedTimes===0&&D(K)),z.__cacheKey=Xe,z.__webglTexture=Le[Xe].texture}return ae}function me(z,K,ae){let xe=3553;K.isDataArrayTexture&&(xe=35866),K.isData3DTexture&&(xe=32879);const Le=ee(z,K),Xe=K.source;if(t.activeTexture(33984+ae),t.bindTexture(xe,z.__webglTexture),Xe.version!==Xe.__currentVersion||Le===!0){n.pixelStorei(37440,K.flipY),n.pixelStorei(37441,K.premultiplyAlpha),n.pixelStorei(3317,K.unpackAlignment),n.pixelStorei(37443,0);const je=w(K)&&S(K.image)===!1;let he=y(K.image,je,!1,u);he=ne(K,he);const Ye=S(he)||o,Ke=s.convert(K.format,K.encoding);let V=s.convert(K.type),re=C(K.internalFormat,Ke,V,K.encoding,K.isVideoTexture);Z(xe,K,Ye);let te;const pe=K.mipmaps,se=o&&K.isVideoTexture!==!0,de=Xe.__currentVersion===void 0||Le===!0,qe=M(K,he,Ye);if(K.isDepthTexture)re=6402,o?K.type===fd?re=36012:K.type===mh?re=33190:K.type===uv?re=35056:re=33189:K.type===fd&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),K.format===Dh&&re===6402&&K.type!==mj&&K.type!==mh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),K.type=mh,V=s.convert(K.type)),K.format===Hv&&re===6402&&(re=34041,K.type!==uv&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),K.type=uv,V=s.convert(K.type))),de&&(se?t.texStorage2D(3553,1,re,he.width,he.height):t.texImage2D(3553,0,re,he.width,he.height,0,Ke,V,null));else if(K.isDataTexture)if(pe.length>0&&Ye){se&&de&&t.texStorage2D(3553,qe,re,pe[0].width,pe[0].height);for(let fe=0,Je=pe.length;fe<Je;fe++)te=pe[fe],se?t.texSubImage2D(3553,fe,0,0,te.width,te.height,Ke,V,te.data):t.texImage2D(3553,fe,re,te.width,te.height,0,Ke,V,te.data);K.generateMipmaps=!1}else se?(de&&t.texStorage2D(3553,qe,re,he.width,he.height),t.texSubImage2D(3553,0,0,0,he.width,he.height,Ke,V,he.data)):t.texImage2D(3553,0,re,he.width,he.height,0,Ke,V,he.data);else if(K.isCompressedTexture){se&&de&&t.texStorage2D(3553,qe,re,pe[0].width,pe[0].height);for(let fe=0,Je=pe.length;fe<Je;fe++)te=pe[fe],K.format!==So?Ke!==null?se?t.compressedTexSubImage2D(3553,fe,0,0,te.width,te.height,Ke,te.data):t.compressedTexImage2D(3553,fe,re,te.width,te.height,0,te.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):se?t.texSubImage2D(3553,fe,0,0,te.width,te.height,Ke,V,te.data):t.texImage2D(3553,fe,re,te.width,te.height,0,Ke,V,te.data)}else if(K.isDataArrayTexture)se?(de&&t.texStorage3D(35866,qe,re,he.width,he.height,he.depth),t.texSubImage3D(35866,0,0,0,0,he.width,he.height,he.depth,Ke,V,he.data)):t.texImage3D(35866,0,re,he.width,he.height,he.depth,0,Ke,V,he.data);else if(K.isData3DTexture)se?(de&&t.texStorage3D(32879,qe,re,he.width,he.height,he.depth),t.texSubImage3D(32879,0,0,0,0,he.width,he.height,he.depth,Ke,V,he.data)):t.texImage3D(32879,0,re,he.width,he.height,he.depth,0,Ke,V,he.data);else if(K.isFramebufferTexture){if(de)if(se)t.texStorage2D(3553,qe,re,he.width,he.height);else{let fe=he.width,Je=he.height;for(let $e=0;$e<qe;$e++)t.texImage2D(3553,$e,re,fe,Je,0,Ke,V,null),fe>>=1,Je>>=1}}else if(pe.length>0&&Ye){se&&de&&t.texStorage2D(3553,qe,re,pe[0].width,pe[0].height);for(let fe=0,Je=pe.length;fe<Je;fe++)te=pe[fe],se?t.texSubImage2D(3553,fe,0,0,Ke,V,te):t.texImage2D(3553,fe,re,Ke,V,te);K.generateMipmaps=!1}else se?(de&&t.texStorage2D(3553,qe,re,he.width,he.height),t.texSubImage2D(3553,0,0,0,Ke,V,he)):t.texImage2D(3553,0,re,Ke,V,he);x(K,Ye)&&T(xe),Xe.__currentVersion=Xe.version,K.onUpdate&&K.onUpdate(K)}z.__version=K.version}function ye(z,K,ae){if(K.image.length!==6)return;const xe=ee(z,K),Le=K.source;if(t.activeTexture(33984+ae),t.bindTexture(34067,z.__webglTexture),Le.version!==Le.__currentVersion||xe===!0){n.pixelStorei(37440,K.flipY),n.pixelStorei(37441,K.premultiplyAlpha),n.pixelStorei(3317,K.unpackAlignment),n.pixelStorei(37443,0);const Xe=K.isCompressedTexture||K.image[0].isCompressedTexture,je=K.image[0]&&K.image[0].isDataTexture,he=[];for(let fe=0;fe<6;fe++)!Xe&&!je?he[fe]=y(K.image[fe],!1,!0,c):he[fe]=je?K.image[fe].image:K.image[fe],he[fe]=ne(K,he[fe]);const Ye=he[0],Ke=S(Ye)||o,V=s.convert(K.format,K.encoding),re=s.convert(K.type),te=C(K.internalFormat,V,re,K.encoding),pe=o&&K.isVideoTexture!==!0,se=Le.__currentVersion===void 0||xe===!0;let de=M(K,Ye,Ke);Z(34067,K,Ke);let qe;if(Xe){pe&&se&&t.texStorage2D(34067,de,te,Ye.width,Ye.height);for(let fe=0;fe<6;fe++){qe=he[fe].mipmaps;for(let Je=0;Je<qe.length;Je++){const $e=qe[Je];K.format!==So?V!==null?pe?t.compressedTexSubImage2D(34069+fe,Je,0,0,$e.width,$e.height,V,$e.data):t.compressedTexImage2D(34069+fe,Je,te,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):pe?t.texSubImage2D(34069+fe,Je,0,0,$e.width,$e.height,V,re,$e.data):t.texImage2D(34069+fe,Je,te,$e.width,$e.height,0,V,re,$e.data)}}}else{qe=K.mipmaps,pe&&se&&(qe.length>0&&de++,t.texStorage2D(34067,de,te,he[0].width,he[0].height));for(let fe=0;fe<6;fe++)if(je){pe?t.texSubImage2D(34069+fe,0,0,0,he[fe].width,he[fe].height,V,re,he[fe].data):t.texImage2D(34069+fe,0,te,he[fe].width,he[fe].height,0,V,re,he[fe].data);for(let Je=0;Je<qe.length;Je++){const et=qe[Je].image[fe].image;pe?t.texSubImage2D(34069+fe,Je+1,0,0,et.width,et.height,V,re,et.data):t.texImage2D(34069+fe,Je+1,te,et.width,et.height,0,V,re,et.data)}}else{pe?t.texSubImage2D(34069+fe,0,0,0,V,re,he[fe]):t.texImage2D(34069+fe,0,te,V,re,he[fe]);for(let Je=0;Je<qe.length;Je++){const $e=qe[Je];pe?t.texSubImage2D(34069+fe,Je+1,0,0,V,re,$e.image[fe]):t.texImage2D(34069+fe,Je+1,te,V,re,$e.image[fe])}}}x(K,Ke)&&T(34067),Le.__currentVersion=Le.version,K.onUpdate&&K.onUpdate(K)}z.__version=K.version}function Te(z,K,ae,xe,Le){const Xe=s.convert(ae.format,ae.encoding),je=s.convert(ae.type),he=C(ae.internalFormat,Xe,je,ae.encoding);i.get(K).__hasExternalTextures||(Le===32879||Le===35866?t.texImage3D(Le,0,he,K.width,K.height,K.depth,0,Xe,je,null):t.texImage2D(Le,0,he,K.width,K.height,0,Xe,je,null)),t.bindFramebuffer(36160,z),Ae(K)?f.framebufferTexture2DMultisampleEXT(36160,xe,Le,i.get(ae).__webglTexture,0,Me(K)):n.framebufferTexture2D(36160,xe,Le,i.get(ae).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ee(z,K,ae){if(n.bindRenderbuffer(36161,z),K.depthBuffer&&!K.stencilBuffer){let xe=33189;if(ae||Ae(K)){const Le=K.depthTexture;Le&&Le.isDepthTexture&&(Le.type===fd?xe=36012:Le.type===mh&&(xe=33190));const Xe=Me(K);Ae(K)?f.renderbufferStorageMultisampleEXT(36161,Xe,xe,K.width,K.height):n.renderbufferStorageMultisample(36161,Xe,xe,K.width,K.height)}else n.renderbufferStorage(36161,xe,K.width,K.height);n.framebufferRenderbuffer(36160,36096,36161,z)}else if(K.depthBuffer&&K.stencilBuffer){const xe=Me(K);ae&&Ae(K)===!1?n.renderbufferStorageMultisample(36161,xe,35056,K.width,K.height):Ae(K)?f.renderbufferStorageMultisampleEXT(36161,xe,35056,K.width,K.height):n.renderbufferStorage(36161,34041,K.width,K.height),n.framebufferRenderbuffer(36160,33306,36161,z)}else{const xe=K.isWebGLMultipleRenderTargets===!0?K.texture:[K.texture];for(let Le=0;Le<xe.length;Le++){const Xe=xe[Le],je=s.convert(Xe.format,Xe.encoding),he=s.convert(Xe.type),Ye=C(Xe.internalFormat,je,he,Xe.encoding),Ke=Me(K);ae&&Ae(K)===!1?n.renderbufferStorageMultisample(36161,Ke,Ye,K.width,K.height):Ae(K)?f.renderbufferStorageMultisampleEXT(36161,Ke,Ye,K.width,K.height):n.renderbufferStorage(36161,Ye,K.width,K.height)}}n.bindRenderbuffer(36161,null)}function H(z,K){if(K&&K.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,z),!(K.depthTexture&&K.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(K.depthTexture).__webglTexture||K.depthTexture.image.width!==K.width||K.depthTexture.image.height!==K.height)&&(K.depthTexture.image.width=K.width,K.depthTexture.image.height=K.height,K.depthTexture.needsUpdate=!0),U(K.depthTexture,0);const xe=i.get(K.depthTexture).__webglTexture,Le=Me(K);if(K.depthTexture.format===Dh)Ae(K)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,xe,0,Le):n.framebufferTexture2D(36160,36096,3553,xe,0);else if(K.depthTexture.format===Hv)Ae(K)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,xe,0,Le):n.framebufferTexture2D(36160,33306,3553,xe,0);else throw new Error("Unknown depthTexture format")}function Q(z){const K=i.get(z),ae=z.isWebGLCubeRenderTarget===!0;if(z.depthTexture&&!K.__autoAllocateDepthBuffer){if(ae)throw new Error("target.depthTexture not supported in Cube render targets");H(K.__webglFramebuffer,z)}else if(ae){K.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)t.bindFramebuffer(36160,K.__webglFramebuffer[xe]),K.__webglDepthbuffer[xe]=n.createRenderbuffer(),Ee(K.__webglDepthbuffer[xe],z,!1)}else t.bindFramebuffer(36160,K.__webglFramebuffer),K.__webglDepthbuffer=n.createRenderbuffer(),Ee(K.__webglDepthbuffer,z,!1);t.bindFramebuffer(36160,null)}function j(z,K,ae){const xe=i.get(z);K!==void 0&&Te(xe.__webglFramebuffer,z,z.texture,36064,3553),ae!==void 0&&Q(z)}function Pe(z){const K=z.texture,ae=i.get(z),xe=i.get(K);z.addEventListener("dispose",I),z.isWebGLMultipleRenderTargets!==!0&&(xe.__webglTexture===void 0&&(xe.__webglTexture=n.createTexture()),xe.__version=K.version,a.memory.textures++);const Le=z.isWebGLCubeRenderTarget===!0,Xe=z.isWebGLMultipleRenderTargets===!0,je=S(z)||o;if(Le){ae.__webglFramebuffer=[];for(let he=0;he<6;he++)ae.__webglFramebuffer[he]=n.createFramebuffer()}else{if(ae.__webglFramebuffer=n.createFramebuffer(),Xe)if(r.drawBuffers){const he=z.texture;for(let Ye=0,Ke=he.length;Ye<Ke;Ye++){const V=i.get(he[Ye]);V.__webglTexture===void 0&&(V.__webglTexture=n.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&z.samples>0&&Ae(z)===!1){const he=Xe?K:[K];ae.__webglMultisampledFramebuffer=n.createFramebuffer(),ae.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ae.__webglMultisampledFramebuffer);for(let Ye=0;Ye<he.length;Ye++){const Ke=he[Ye];ae.__webglColorRenderbuffer[Ye]=n.createRenderbuffer(),n.bindRenderbuffer(36161,ae.__webglColorRenderbuffer[Ye]);const V=s.convert(Ke.format,Ke.encoding),re=s.convert(Ke.type),te=C(Ke.internalFormat,V,re,Ke.encoding),pe=Me(z);n.renderbufferStorageMultisample(36161,pe,te,z.width,z.height),n.framebufferRenderbuffer(36160,36064+Ye,36161,ae.__webglColorRenderbuffer[Ye])}n.bindRenderbuffer(36161,null),z.depthBuffer&&(ae.__webglDepthRenderbuffer=n.createRenderbuffer(),Ee(ae.__webglDepthRenderbuffer,z,!0)),t.bindFramebuffer(36160,null)}}if(Le){t.bindTexture(34067,xe.__webglTexture),Z(34067,K,je);for(let he=0;he<6;he++)Te(ae.__webglFramebuffer[he],z,K,36064,34069+he);x(K,je)&&T(34067),t.unbindTexture()}else if(Xe){const he=z.texture;for(let Ye=0,Ke=he.length;Ye<Ke;Ye++){const V=he[Ye],re=i.get(V);t.bindTexture(3553,re.__webglTexture),Z(3553,V,je),Te(ae.__webglFramebuffer,z,V,36064+Ye,3553),x(V,je)&&T(3553)}t.unbindTexture()}else{let he=3553;(z.isWebGL3DRenderTarget||z.isWebGLArrayRenderTarget)&&(o?he=z.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(he,xe.__webglTexture),Z(he,K,je),Te(ae.__webglFramebuffer,z,K,36064,he),x(K,je)&&T(he),t.unbindTexture()}z.depthBuffer&&Q(z)}function we(z){const K=S(z)||o,ae=z.isWebGLMultipleRenderTargets===!0?z.texture:[z.texture];for(let xe=0,Le=ae.length;xe<Le;xe++){const Xe=ae[xe];if(x(Xe,K)){const je=z.isWebGLCubeRenderTarget?34067:3553,he=i.get(Xe).__webglTexture;t.bindTexture(je,he),T(je),t.unbindTexture()}}}function De(z){if(o&&z.samples>0&&Ae(z)===!1){const K=z.isWebGLMultipleRenderTargets?z.texture:[z.texture],ae=z.width,xe=z.height;let Le=16384;const Xe=[],je=z.stencilBuffer?33306:36096,he=i.get(z),Ye=z.isWebGLMultipleRenderTargets===!0;if(Ye)for(let Ke=0;Ke<K.length;Ke++)t.bindFramebuffer(36160,he.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Ke,36161,null),t.bindFramebuffer(36160,he.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Ke,3553,null,0);t.bindFramebuffer(36008,he.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,he.__webglFramebuffer);for(let Ke=0;Ke<K.length;Ke++){Xe.push(36064+Ke),z.depthBuffer&&Xe.push(je);const V=he.__ignoreDepthValues!==void 0?he.__ignoreDepthValues:!1;if(V===!1&&(z.depthBuffer&&(Le|=256),z.stencilBuffer&&(Le|=1024)),Ye&&n.framebufferRenderbuffer(36008,36064,36161,he.__webglColorRenderbuffer[Ke]),V===!0&&(n.invalidateFramebuffer(36008,[je]),n.invalidateFramebuffer(36009,[je])),Ye){const re=i.get(K[Ke]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,re,0)}n.blitFramebuffer(0,0,ae,xe,0,0,ae,xe,Le,9728),h&&n.invalidateFramebuffer(36008,Xe)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Ye)for(let Ke=0;Ke<K.length;Ke++){t.bindFramebuffer(36160,he.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Ke,36161,he.__webglColorRenderbuffer[Ke]);const V=i.get(K[Ke]).__webglTexture;t.bindFramebuffer(36160,he.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Ke,3553,V,0)}t.bindFramebuffer(36009,he.__webglMultisampledFramebuffer)}}function Me(z){return Math.min(d,z.samples)}function Ae(z){const K=i.get(z);return o&&z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&K.__useRenderToTexture!==!1}function Fe(z){const K=a.render.frame;p.get(z)!==K&&(p.set(z,K),z.update())}function ne(z,K){const ae=z.encoding,xe=z.format,Le=z.type;return z.isCompressedTexture===!0||z.isVideoTexture===!0||z.format===fP||ae!==Gd&&(ae===Xn?o===!1?e.has("EXT_sRGB")===!0&&xe===So?(z.format=fP,z.minFilter=wr,z.generateMipmaps=!1):K=xj.sRGBToLinear(K):(xe!==So||Le!==Xh)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ae)),K}this.allocateTextureUnit=k,this.resetTextureUnits=B,this.setTexture2D=U,this.setTexture2DArray=G,this.setTexture3D=q,this.setTextureCube=W,this.rebindTextures=j,this.setupRenderTarget=Pe,this.updateRenderTargetMipmap=we,this.updateMultisampleRenderTarget=De,this.setupDepthRenderbuffer=Q,this.setupFrameBufferTexture=Te,this.useMultisampledRTT=Ae}function vGe(n,e,t){const i=t.isWebGL2;function r(s,a=null){let o;if(s===Xh)return 5121;if(s===XHe)return 32819;if(s===YHe)return 32820;if(s===WHe)return 5120;if(s===KHe)return 5122;if(s===mj)return 5123;if(s===qHe)return 5124;if(s===mh)return 5125;if(s===fd)return 5126;if(s===D_)return i?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===jHe)return 6406;if(s===So)return 6408;if(s===ZHe)return 6409;if(s===JHe)return 6410;if(s===Dh)return 6402;if(s===Hv)return 34041;if(s===e5e)return 6403;if(s===QHe)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===fP)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===t5e)return 36244;if(s===n5e)return 33319;if(s===i5e)return 33320;if(s===r5e)return 36249;if(s===z1||s===rE||s===U1||s===H1)if(a===Xn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===z1)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===rE)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===U1)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===H1)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===z1)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===rE)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===U1)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===H1)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===XH||s===YH||s===jH||s===QH)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===XH)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===YH)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===jH)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===QH)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===vj)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===ZH||s===JH)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===ZH)return a===Xn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===JH)return a===Xn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===e5||s===t5||s===n5||s===i5||s===r5||s===s5||s===a5||s===o5||s===l5||s===c5||s===u5||s===d5||s===f5||s===h5)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===e5)return a===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===t5)return a===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===n5)return a===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===i5)return a===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===r5)return a===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===s5)return a===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===a5)return a===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===o5)return a===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===l5)return a===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===c5)return a===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===u5)return a===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===d5)return a===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===f5)return a===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===h5)return a===Xn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===p5)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===p5)return a===Xn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===uv?i?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}let gGe=class extends kr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},pa=class extends ji{constructor(){super(),this.isGroup=!0,this.type="Group"}};const yGe={type:"move"};let DE=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new pa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new pa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ke,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ke),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new pa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ke,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ke),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const m of e.hand.values()){const v=t.getJointPose(m,i);if(c.joints[m.jointName]===void 0){const _=new pa;_.matrixAutoUpdate=!1,_.visible=!1,c.joints[m.jointName]=_,c.add(_)}const g=c.joints[m.jointName];v!==null&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=v.radius),g.visible=v!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],f=u.position.distanceTo(d.position),h=.02,p=.005;c.inputState.pinching&&f>h+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=h-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(yGe)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}},_Ge=class extends ds{constructor(e,t,i,r,s,a,o,l,c,u){if(u=u!==void 0?u:Dh,u!==Dh&&u!==Hv)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Dh&&(i=mh),i===void 0&&u===Hv&&(i=uv),super(null,r,s,a,o,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:qr,this.minFilter=l!==void 0?l:qr,this.flipY=!1,this.generateMipmaps=!1}},bGe=class extends nf{constructor(e,t){super();const i=this;let r=null,s=1,a=null,o="local-floor",l=null,c=null,u=null,d=null,f=null,h=null;const p=t.getContextAttributes();let m=null,v=null;const g=[],_=[],y=new kr;y.layers.enable(1),y.viewport=new wi;const S=new kr;S.layers.enable(2),S.viewport=new wi;const w=[y,S],x=new gGe;x.layers.enable(1),x.layers.enable(2);let T=null,C=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(O){let U=g[O];return U===void 0&&(U=new DE,g[O]=U),U.getTargetRaySpace()},this.getControllerGrip=function(O){let U=g[O];return U===void 0&&(U=new DE,g[O]=U),U.getGripSpace()},this.getHand=function(O){let U=g[O];return U===void 0&&(U=new DE,g[O]=U),U.getHandSpace()};function M(O){const U=_.indexOf(O.inputSource);if(U===-1)return;const G=g[U];G!==void 0&&G.dispatchEvent({type:O.type,data:O.inputSource})}function A(){r.removeEventListener("select",M),r.removeEventListener("selectstart",M),r.removeEventListener("selectend",M),r.removeEventListener("squeeze",M),r.removeEventListener("squeezestart",M),r.removeEventListener("squeezeend",M),r.removeEventListener("end",A),r.removeEventListener("inputsourceschange",E);for(let O=0;O<g.length;O++){const U=_[O];U!==null&&(_[O]=null,g[O].disconnect(U))}T=null,C=null,e.setRenderTarget(m),f=null,d=null,u=null,r=null,v=null,k.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(O){s=O,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(O){o=O,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(O){l=O},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return u},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=async function(O){if(r=O,r!==null){if(m=e.getRenderTarget(),r.addEventListener("select",M),r.addEventListener("selectstart",M),r.addEventListener("selectend",M),r.addEventListener("squeeze",M),r.addEventListener("squeezestart",M),r.addEventListener("squeezeend",M),r.addEventListener("end",A),r.addEventListener("inputsourceschange",E),p.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const U={antialias:r.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(r,t,U),r.updateRenderState({baseLayer:f}),v=new Yh(f.framebufferWidth,f.framebufferHeight,{format:So,type:Xh,encoding:e.outputEncoding})}else{let U=null,G=null,q=null;p.depth&&(q=p.stencil?35056:33190,U=p.stencil?Hv:Dh,G=p.stencil?uv:mh);const W={colorFormat:32856,depthFormat:q,scaleFactor:s};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(W),r.updateRenderState({layers:[d]}),v=new Yh(d.textureWidth,d.textureHeight,{format:So,type:Xh,depthTexture:new _Ge(d.textureWidth,d.textureHeight,G,void 0,void 0,void 0,void 0,void 0,void 0,U),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0});const Y=e.properties.get(v);Y.__ignoreDepthValues=d.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(1),l=null,a=await r.requestReferenceSpace(o),k.setContext(r),k.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function E(O){for(let U=0;U<O.removed.length;U++){const G=O.removed[U],q=_.indexOf(G);q>=0&&(_[q]=null,g[q].dispatchEvent({type:"disconnected",data:G}))}for(let U=0;U<O.added.length;U++){const G=O.added[U];let q=_.indexOf(G);if(q===-1){for(let Y=0;Y<g.length;Y++)if(Y>=_.length){_.push(G),q=Y;break}else if(_[Y]===null){_[Y]=G,q=Y;break}if(q===-1)break}const W=g[q];W&&W.dispatchEvent({type:"connected",data:G})}}const I=new ke,P=new ke;function D(O,U,G){I.setFromMatrixPosition(U.matrixWorld),P.setFromMatrixPosition(G.matrixWorld);const q=I.distanceTo(P),W=U.projectionMatrix.elements,Y=G.projectionMatrix.elements,J=W[14]/(W[10]-1),Z=W[14]/(W[10]+1),ee=(W[9]+1)/W[5],me=(W[9]-1)/W[5],ye=(W[8]-1)/W[0],Te=(Y[8]+1)/Y[0],Ee=J*ye,H=J*Te,Q=q/(-ye+Te),j=Q*-ye;U.matrixWorld.decompose(O.position,O.quaternion,O.scale),O.translateX(j),O.translateZ(Q),O.matrixWorld.compose(O.position,O.quaternion,O.scale),O.matrixWorldInverse.copy(O.matrixWorld).invert();const Pe=J+Q,we=Z+Q,De=Ee-j,Me=H+(q-j),Ae=ee*Z/we*Pe,Fe=me*Z/we*Pe;O.projectionMatrix.makePerspective(De,Me,Ae,Fe,Pe,we)}function L(O,U){U===null?O.matrixWorld.copy(O.matrix):O.matrixWorld.multiplyMatrices(U.matrixWorld,O.matrix),O.matrixWorldInverse.copy(O.matrixWorld).invert()}this.updateCamera=function(O){if(r===null)return;x.near=S.near=y.near=O.near,x.far=S.far=y.far=O.far,(T!==x.near||C!==x.far)&&(r.updateRenderState({depthNear:x.near,depthFar:x.far}),T=x.near,C=x.far);const U=O.parent,G=x.cameras;L(x,U);for(let W=0;W<G.length;W++)L(G[W],U);x.matrixWorld.decompose(x.position,x.quaternion,x.scale),O.position.copy(x.position),O.quaternion.copy(x.quaternion),O.scale.copy(x.scale),O.matrix.copy(x.matrix),O.matrixWorld.copy(x.matrixWorld);const q=O.children;for(let W=0,Y=q.length;W<Y;W++)q[W].updateMatrixWorld(!0);G.length===2?D(x,y,S):x.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return x},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(f!==null)return f.fixedFoveation},this.setFoveation=function(O){d!==null&&(d.fixedFoveation=O),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=O)};let R=null;function B(O,U){if(c=U.getViewerPose(l||a),h=U,c!==null){const G=c.views;f!==null&&(e.setRenderTargetFramebuffer(v,f.framebuffer),e.setRenderTarget(v));let q=!1;G.length!==x.cameras.length&&(x.cameras.length=0,q=!0);for(let W=0;W<G.length;W++){const Y=G[W];let J=null;if(f!==null)J=f.getViewport(Y);else{const ee=u.getViewSubImage(d,Y);J=ee.viewport,W===0&&(e.setRenderTargetTextures(v,ee.colorTexture,d.ignoreDepthValues?void 0:ee.depthStencilTexture),e.setRenderTarget(v))}let Z=w[W];Z===void 0&&(Z=new kr,Z.layers.enable(W),Z.viewport=new wi,w[W]=Z),Z.matrix.fromArray(Y.transform.matrix),Z.projectionMatrix.fromArray(Y.projectionMatrix),Z.viewport.set(J.x,J.y,J.width,J.height),W===0&&x.matrix.copy(Z.matrix),q===!0&&x.cameras.push(Z)}}for(let G=0;G<g.length;G++){const q=_[G],W=g[G];q!==null&&W!==void 0&&W.update(q,U,l||a)}R&&R(O,U),h=null}const k=new Dj;k.setAnimationLoop(B),this.setAnimationLoop=function(O){R=O},this.dispose=function(){}}};function SGe(n,e){function t(m,v){m.fogColor.value.copy(v.color),v.isFog?(m.fogNear.value=v.near,m.fogFar.value=v.far):v.isFogExp2&&(m.fogDensity.value=v.density)}function i(m,v,g,_,y){v.isMeshBasicMaterial||v.isMeshLambertMaterial?r(m,v):v.isMeshToonMaterial?(r(m,v),u(m,v)):v.isMeshPhongMaterial?(r(m,v),c(m,v)):v.isMeshStandardMaterial?(r(m,v),d(m,v),v.isMeshPhysicalMaterial&&f(m,v,y)):v.isMeshMatcapMaterial?(r(m,v),h(m,v)):v.isMeshDepthMaterial?r(m,v):v.isMeshDistanceMaterial?(r(m,v),p(m,v)):v.isMeshNormalMaterial?r(m,v):v.isLineBasicMaterial?(s(m,v),v.isLineDashedMaterial&&a(m,v)):v.isPointsMaterial?o(m,v,g,_):v.isSpriteMaterial?l(m,v):v.isShadowMaterial?(m.color.value.copy(v.color),m.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function r(m,v){m.opacity.value=v.opacity,v.color&&m.diffuse.value.copy(v.color),v.emissive&&m.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(m.map.value=v.map),v.alphaMap&&(m.alphaMap.value=v.alphaMap),v.bumpMap&&(m.bumpMap.value=v.bumpMap,m.bumpScale.value=v.bumpScale,v.side===ul&&(m.bumpScale.value*=-1)),v.displacementMap&&(m.displacementMap.value=v.displacementMap,m.displacementScale.value=v.displacementScale,m.displacementBias.value=v.displacementBias),v.emissiveMap&&(m.emissiveMap.value=v.emissiveMap),v.normalMap&&(m.normalMap.value=v.normalMap,m.normalScale.value.copy(v.normalScale),v.side===ul&&m.normalScale.value.negate()),v.specularMap&&(m.specularMap.value=v.specularMap),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);const g=e.get(v).envMap;if(g&&(m.envMap.value=g,m.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=v.reflectivity,m.ior.value=v.ior,m.refractionRatio.value=v.refractionRatio),v.lightMap){m.lightMap.value=v.lightMap;const S=n.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=v.lightMapIntensity*S}v.aoMap&&(m.aoMap.value=v.aoMap,m.aoMapIntensity.value=v.aoMapIntensity);let _;v.map?_=v.map:v.specularMap?_=v.specularMap:v.displacementMap?_=v.displacementMap:v.normalMap?_=v.normalMap:v.bumpMap?_=v.bumpMap:v.roughnessMap?_=v.roughnessMap:v.metalnessMap?_=v.metalnessMap:v.alphaMap?_=v.alphaMap:v.emissiveMap?_=v.emissiveMap:v.clearcoatMap?_=v.clearcoatMap:v.clearcoatNormalMap?_=v.clearcoatNormalMap:v.clearcoatRoughnessMap?_=v.clearcoatRoughnessMap:v.iridescenceMap?_=v.iridescenceMap:v.iridescenceThicknessMap?_=v.iridescenceThicknessMap:v.specularIntensityMap?_=v.specularIntensityMap:v.specularColorMap?_=v.specularColorMap:v.transmissionMap?_=v.transmissionMap:v.thicknessMap?_=v.thicknessMap:v.sheenColorMap?_=v.sheenColorMap:v.sheenRoughnessMap&&(_=v.sheenRoughnessMap),_!==void 0&&(_.isWebGLRenderTarget&&(_=_.texture),_.matrixAutoUpdate===!0&&_.updateMatrix(),m.uvTransform.value.copy(_.matrix));let y;v.aoMap?y=v.aoMap:v.lightMap&&(y=v.lightMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uv2Transform.value.copy(y.matrix))}function s(m,v){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity}function a(m,v){m.dashSize.value=v.dashSize,m.totalSize.value=v.dashSize+v.gapSize,m.scale.value=v.scale}function o(m,v,g,_){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity,m.size.value=v.size*g,m.scale.value=_*.5,v.map&&(m.map.value=v.map),v.alphaMap&&(m.alphaMap.value=v.alphaMap),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);let y;v.map?y=v.map:v.alphaMap&&(y=v.alphaMap),y!==void 0&&(y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix))}function l(m,v){m.diffuse.value.copy(v.color),m.opacity.value=v.opacity,m.rotation.value=v.rotation,v.map&&(m.map.value=v.map),v.alphaMap&&(m.alphaMap.value=v.alphaMap),v.alphaTest>0&&(m.alphaTest.value=v.alphaTest);let g;v.map?g=v.map:v.alphaMap&&(g=v.alphaMap),g!==void 0&&(g.matrixAutoUpdate===!0&&g.updateMatrix(),m.uvTransform.value.copy(g.matrix))}function c(m,v){m.specular.value.copy(v.specular),m.shininess.value=Math.max(v.shininess,1e-4)}function u(m,v){v.gradientMap&&(m.gradientMap.value=v.gradientMap)}function d(m,v){m.roughness.value=v.roughness,m.metalness.value=v.metalness,v.roughnessMap&&(m.roughnessMap.value=v.roughnessMap),v.metalnessMap&&(m.metalnessMap.value=v.metalnessMap),e.get(v).envMap&&(m.envMapIntensity.value=v.envMapIntensity)}function f(m,v,g){m.ior.value=v.ior,v.sheen>0&&(m.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),m.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(m.sheenColorMap.value=v.sheenColorMap),v.sheenRoughnessMap&&(m.sheenRoughnessMap.value=v.sheenRoughnessMap)),v.clearcoat>0&&(m.clearcoat.value=v.clearcoat,m.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(m.clearcoatMap.value=v.clearcoatMap),v.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap),v.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),m.clearcoatNormalMap.value=v.clearcoatNormalMap,v.side===ul&&m.clearcoatNormalScale.value.negate())),v.iridescence>0&&(m.iridescence.value=v.iridescence,m.iridescenceIOR.value=v.iridescenceIOR,m.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(m.iridescenceMap.value=v.iridescenceMap),v.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=v.iridescenceThicknessMap)),v.transmission>0&&(m.transmission.value=v.transmission,m.transmissionSamplerMap.value=g.texture,m.transmissionSamplerSize.value.set(g.width,g.height),v.transmissionMap&&(m.transmissionMap.value=v.transmissionMap),m.thickness.value=v.thickness,v.thicknessMap&&(m.thicknessMap.value=v.thicknessMap),m.attenuationDistance.value=v.attenuationDistance,m.attenuationColor.value.copy(v.attenuationColor)),m.specularIntensity.value=v.specularIntensity,m.specularColor.value.copy(v.specularColor),v.specularIntensityMap&&(m.specularIntensityMap.value=v.specularIntensityMap),v.specularColorMap&&(m.specularColorMap.value=v.specularColorMap)}function h(m,v){v.matcap&&(m.matcap.value=v.matcap)}function p(m,v){m.referencePosition.value.copy(v.referencePosition),m.nearDistance.value=v.nearDistance,m.farDistance.value=v.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function wGe(n,e,t,i){let r={},s={},a=[];const o=t.isWebGL2?n.getParameter(35375):0;function l(_,y){const S=y.program;i.uniformBlockBinding(_,S)}function c(_,y){let S=r[_.id];S===void 0&&(p(_),S=u(_),r[_.id]=S,_.addEventListener("dispose",v));const w=y.program;i.updateUBOMapping(_,w);const x=e.render.frame;s[_.id]!==x&&(f(_),s[_.id]=x)}function u(_){const y=d();_.__bindingPointIndex=y;const S=n.createBuffer(),w=_.__size,x=_.usage;return n.bindBuffer(35345,S),n.bufferData(35345,w,x),n.bindBuffer(35345,null),n.bindBufferBase(35345,y,S),S}function d(){for(let _=0;_<o;_++)if(a.indexOf(_)===-1)return a.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(_){const y=r[_.id],S=_.uniforms,w=_.__cache;n.bindBuffer(35345,y);for(let x=0,T=S.length;x<T;x++){const C=S[x];if(h(C,x,w)===!0){const M=C.value,A=C.__offset;typeof M=="number"?(C.__data[0]=M,n.bufferSubData(35345,A,C.__data)):(C.value.isMatrix3?(C.__data[0]=C.value.elements[0],C.__data[1]=C.value.elements[1],C.__data[2]=C.value.elements[2],C.__data[3]=C.value.elements[0],C.__data[4]=C.value.elements[3],C.__data[5]=C.value.elements[4],C.__data[6]=C.value.elements[5],C.__data[7]=C.value.elements[0],C.__data[8]=C.value.elements[6],C.__data[9]=C.value.elements[7],C.__data[10]=C.value.elements[8],C.__data[11]=C.value.elements[0]):M.toArray(C.__data),n.bufferSubData(35345,A,C.__data))}}n.bindBuffer(35345,null)}function h(_,y,S){const w=_.value;if(S[y]===void 0)return typeof w=="number"?S[y]=w:S[y]=w.clone(),!0;if(typeof w=="number"){if(S[y]!==w)return S[y]=w,!0}else{const x=S[y];if(x.equals(w)===!1)return x.copy(w),!0}return!1}function p(_){const y=_.uniforms;let S=0;const w=16;let x=0;for(let T=0,C=y.length;T<C;T++){const M=y[T],A=m(M);if(M.__data=new Float32Array(A.storage/Float32Array.BYTES_PER_ELEMENT),M.__offset=S,T>0){x=S%w;const E=w-x;x!==0&&E-A.boundary<0&&(S+=w-x,M.__offset=S)}S+=A.storage}return x=S%w,x>0&&(S+=w-x),_.__size=S,_.__cache={},this}function m(_){const y=_.value,S={boundary:0,storage:0};return typeof y=="number"?(S.boundary=4,S.storage=4):y.isVector2?(S.boundary=8,S.storage=8):y.isVector3||y.isColor?(S.boundary=16,S.storage=12):y.isVector4?(S.boundary=16,S.storage=16):y.isMatrix3?(S.boundary=48,S.storage=48):y.isMatrix4?(S.boundary=64,S.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),S}function v(_){const y=_.target;y.removeEventListener("dispose",v);const S=a.indexOf(y.__bindingPointIndex);a.splice(S,1),n.deleteBuffer(r[y.id]),delete r[y.id],delete s[y.id]}function g(){for(const _ in r)n.deleteBuffer(r[_]);a=[],r={},s={}}return{bind:l,update:c,dispose:g}}function xGe(){const n=O_("canvas");return n.style.display="block",n}function Hj(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:xGe(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,r=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,a=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,o=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",c=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let u;t!==null?u=t.getContextAttributes().alpha:u=n.alpha!==void 0?n.alpha:!1;let d=null,f=null;const h=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Gd,this.physicallyCorrectLights=!1,this.toneMapping=qc,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let v=!1,g=0,_=0,y=null,S=-1,w=null;const x=new wi,T=new wi;let C=null,M=e.width,A=e.height,E=1,I=null,P=null;const D=new wi(0,0,M,A),L=new wi(0,0,M,A);let R=!1;const B=new Xk;let k=!1,O=!1,U=null;const G=new nn,q=new St,W=new ke,Y={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function J(){return y===null?E:1}let Z=t;function ee(Oe,lt){for(let dt=0;dt<Oe.length;dt++){const ct=Oe[dt],Ue=e.getContext(ct,lt);if(Ue!==null)return Ue}return null}try{const Oe={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Uk}`),e.addEventListener("webglcontextlost",te,!1),e.addEventListener("webglcontextrestored",pe,!1),e.addEventListener("webglcontextcreationerror",se,!1),Z===null){const lt=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&lt.shift(),Z=ee(lt,Oe),Z===null)throw ee(lt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Z.getShaderPrecisionFormat===void 0&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Oe){throw console.error("THREE.WebGLRenderer: "+Oe.message),Oe}let me,ye,Te,Ee,H,Q,j,Pe,we,De,Me,Ae,Fe,ne,z,K,ae,xe,Le,Xe,je,he,Ye,Ke;function V(){me=new O6e(Z),ye=new I6e(Z,me,n),me.init(ye),he=new vGe(Z,me,ye),Te=new pGe(Z,me,ye),Ee=new F6e,H=new nGe,Q=new mGe(Z,me,Te,H,ye,he,Ee),j=new P6e(m),Pe=new k6e(m),we=new j5e(Z,ye),Ye=new A6e(Z,me,we,ye),De=new N6e(Z,we,Ee,Ye),Me=new V6e(Z,De,we,Ee),Le=new H6e(Z,ye,Q),K=new R6e(H),Ae=new tGe(m,j,Pe,me,ye,Ye,K),Fe=new SGe(m,H),ne=new rGe,z=new uGe(me,ye),xe=new T6e(m,j,Te,Me,u,a),ae=new hGe(m,Me,ye),Ke=new wGe(Z,Ee,ye,Te),Xe=new E6e(Z,me,Ee,ye),je=new B6e(Z,me,Ee,ye),Ee.programs=Ae.programs,m.capabilities=ye,m.extensions=me,m.properties=H,m.renderLists=ne,m.shadowMap=ae,m.state=Te,m.info=Ee}V();const re=new bGe(m,Z);this.xr=re,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const Oe=me.get("WEBGL_lose_context");Oe&&Oe.loseContext()},this.forceContextRestore=function(){const Oe=me.get("WEBGL_lose_context");Oe&&Oe.restoreContext()},this.getPixelRatio=function(){return E},this.setPixelRatio=function(Oe){Oe!==void 0&&(E=Oe,this.setSize(M,A,!1))},this.getSize=function(Oe){return Oe.set(M,A)},this.setSize=function(Oe,lt,dt){if(re.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}M=Oe,A=lt,e.width=Math.floor(Oe*E),e.height=Math.floor(lt*E),dt!==!1&&(e.style.width=Oe+"px",e.style.height=lt+"px"),this.setViewport(0,0,Oe,lt)},this.getDrawingBufferSize=function(Oe){return Oe.set(M*E,A*E).floor()},this.setDrawingBufferSize=function(Oe,lt,dt){M=Oe,A=lt,E=dt,e.width=Math.floor(Oe*dt),e.height=Math.floor(lt*dt),this.setViewport(0,0,Oe,lt)},this.getCurrentViewport=function(Oe){return Oe.copy(x)},this.getViewport=function(Oe){return Oe.copy(D)},this.setViewport=function(Oe,lt,dt,ct){Oe.isVector4?D.set(Oe.x,Oe.y,Oe.z,Oe.w):D.set(Oe,lt,dt,ct),Te.viewport(x.copy(D).multiplyScalar(E).floor())},this.getScissor=function(Oe){return Oe.copy(L)},this.setScissor=function(Oe,lt,dt,ct){Oe.isVector4?L.set(Oe.x,Oe.y,Oe.z,Oe.w):L.set(Oe,lt,dt,ct),Te.scissor(T.copy(L).multiplyScalar(E).floor())},this.getScissorTest=function(){return R},this.setScissorTest=function(Oe){Te.setScissorTest(R=Oe)},this.setOpaqueSort=function(Oe){I=Oe},this.setTransparentSort=function(Oe){P=Oe},this.getClearColor=function(Oe){return Oe.copy(xe.getClearColor())},this.setClearColor=function(){xe.setClearColor.apply(xe,arguments)},this.getClearAlpha=function(){return xe.getClearAlpha()},this.setClearAlpha=function(){xe.setClearAlpha.apply(xe,arguments)},this.clear=function(Oe=!0,lt=!0,dt=!0){let ct=0;Oe&&(ct|=16384),lt&&(ct|=256),dt&&(ct|=1024),Z.clear(ct)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",te,!1),e.removeEventListener("webglcontextrestored",pe,!1),e.removeEventListener("webglcontextcreationerror",se,!1),ne.dispose(),z.dispose(),H.dispose(),j.dispose(),Pe.dispose(),Me.dispose(),Ye.dispose(),Ke.dispose(),Ae.dispose(),re.dispose(),re.removeEventListener("sessionstart",et),re.removeEventListener("sessionend",ht),U&&(U.dispose(),U=null),st.stop()};function te(Oe){Oe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function pe(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1;const Oe=Ee.autoReset,lt=ae.enabled,dt=ae.autoUpdate,ct=ae.needsUpdate,Ue=ae.type;V(),Ee.autoReset=Oe,ae.enabled=lt,ae.autoUpdate=dt,ae.needsUpdate=ct,ae.type=Ue}function se(Oe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Oe.statusMessage)}function de(Oe){const lt=Oe.target;lt.removeEventListener("dispose",de),qe(lt)}function qe(Oe){fe(Oe),H.remove(Oe)}function fe(Oe){const lt=H.get(Oe).programs;lt!==void 0&&(lt.forEach(function(dt){Ae.releaseProgram(dt)}),Oe.isShaderMaterial&&Ae.releaseShaderCache(Oe))}this.renderBufferDirect=function(Oe,lt,dt,ct,Ue,pt){lt===null&&(lt=Y);const Lt=Ue.isMesh&&Ue.matrixWorld.determinant()<0,tn=_l(Oe,lt,dt,ct,Ue);Te.setMaterial(ct,Lt);let ln=dt.index;const Fn=dt.attributes.position;if(ln===null){if(Fn===void 0||Fn.count===0)return}else if(ln.count===0)return;let An=1;ct.wireframe===!0&&(ln=De.getWireframeAttribute(dt),An=2),Ye.setup(Ue,ct,tn,dt,ln);let kn,_e=Xe;ln!==null&&(kn=we.get(ln),_e=je,_e.setIndex(kn));const Qe=ln!==null?ln.count:Fn.count,Ie=dt.drawRange.start*An,Ge=dt.drawRange.count*An,Ve=pt!==null?pt.start*An:0,it=pt!==null?pt.count*An:1/0,It=Math.max(Ie,Ve),Et=Math.min(Qe,Ie+Ge,Ve+it)-1,Ut=Math.max(0,Et-It+1);if(Ut!==0){if(Ue.isMesh)ct.wireframe===!0?(Te.setLineWidth(ct.wireframeLinewidth*J()),_e.setMode(1)):_e.setMode(4);else if(Ue.isLine){let pn=ct.linewidth;pn===void 0&&(pn=1),Te.setLineWidth(pn*J()),Ue.isLineSegments?_e.setMode(1):Ue.isLineLoop?_e.setMode(2):_e.setMode(3)}else Ue.isPoints?_e.setMode(0):Ue.isSprite&&_e.setMode(4);if(Ue.isInstancedMesh)_e.renderInstances(It,Ut,Ue.count);else if(dt.isInstancedBufferGeometry){const pn=Math.min(dt.instanceCount,dt._maxInstanceCount);_e.renderInstances(It,Ut,pn)}else _e.render(It,Ut)}},this.compile=function(Oe,lt){f=z.get(Oe),f.init(),p.push(f),Oe.traverseVisible(function(dt){dt.isLight&&dt.layers.test(lt.layers)&&(f.pushLight(dt),dt.castShadow&&f.pushShadow(dt))}),f.setupLights(m.physicallyCorrectLights),Oe.traverse(function(dt){const ct=dt.material;if(ct)if(Array.isArray(ct))for(let Ue=0;Ue<ct.length;Ue++){const pt=ct[Ue];pi(pt,Oe,dt)}else pi(ct,Oe,dt)}),p.pop(),f=null};let Je=null;function $e(Oe){Je&&Je(Oe)}function et(){st.stop()}function ht(){st.start()}const st=new Dj;st.setAnimationLoop($e),typeof self<"u"&&st.setContext(self),this.setAnimationLoop=function(Oe){Je=Oe,re.setAnimationLoop(Oe),Oe===null?st.stop():st.start()},re.addEventListener("sessionstart",et),re.addEventListener("sessionend",ht),this.render=function(Oe,lt){if(lt!==void 0&&lt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;Oe.autoUpdate===!0&&Oe.updateMatrixWorld(),lt.parent===null&&lt.updateMatrixWorld(),re.enabled===!0&&re.isPresenting===!0&&(re.cameraAutoUpdate===!0&&re.updateCamera(lt),lt=re.getCamera()),Oe.isScene===!0&&Oe.onBeforeRender(m,Oe,lt,y),f=z.get(Oe,p.length),f.init(),p.push(f),G.multiplyMatrices(lt.projectionMatrix,lt.matrixWorldInverse),B.setFromProjectionMatrix(G),O=this.localClippingEnabled,k=K.init(this.clippingPlanes,O,lt),d=ne.get(Oe,h.length),d.init(),h.push(d),Rt(Oe,lt,0,m.sortObjects),d.finish(),m.sortObjects===!0&&d.sort(I,P),k===!0&&K.beginShadows();const dt=f.state.shadowsArray;if(ae.render(dt,Oe,lt),k===!0&&K.endShadows(),this.info.autoReset===!0&&this.info.reset(),xe.render(d,Oe),f.setupLights(m.physicallyCorrectLights),lt.isArrayCamera){const ct=lt.cameras;for(let Ue=0,pt=ct.length;Ue<pt;Ue++){const Lt=ct[Ue];Vt(d,Oe,Lt,Lt.viewport)}}else Vt(d,Oe,lt);y!==null&&(Q.updateMultisampleRenderTarget(y),Q.updateRenderTargetMipmap(y)),Oe.isScene===!0&&Oe.onAfterRender(m,Oe,lt),Ye.resetDefaultState(),S=-1,w=null,p.pop(),p.length>0?f=p[p.length-1]:f=null,h.pop(),h.length>0?d=h[h.length-1]:d=null};function Rt(Oe,lt,dt,ct){if(Oe.visible===!1)return;if(Oe.layers.test(lt.layers)){if(Oe.isGroup)dt=Oe.renderOrder;else if(Oe.isLOD)Oe.autoUpdate===!0&&Oe.update(lt);else if(Oe.isLight)f.pushLight(Oe),Oe.castShadow&&f.pushShadow(Oe);else if(Oe.isSprite){if(!Oe.frustumCulled||B.intersectsSprite(Oe)){ct&&W.setFromMatrixPosition(Oe.matrixWorld).applyMatrix4(G);const Lt=Me.update(Oe),tn=Oe.material;tn.visible&&d.push(Oe,Lt,tn,dt,W.z,null)}}else if((Oe.isMesh||Oe.isLine||Oe.isPoints)&&(Oe.isSkinnedMesh&&Oe.skeleton.frame!==Ee.render.frame&&(Oe.skeleton.update(),Oe.skeleton.frame=Ee.render.frame),!Oe.frustumCulled||B.intersectsObject(Oe))){ct&&W.setFromMatrixPosition(Oe.matrixWorld).applyMatrix4(G);const Lt=Me.update(Oe),tn=Oe.material;if(Array.isArray(tn)){const ln=Lt.groups;for(let Fn=0,An=ln.length;Fn<An;Fn++){const kn=ln[Fn],_e=tn[kn.materialIndex];_e&&_e.visible&&d.push(Oe,Lt,_e,dt,W.z,kn)}}else tn.visible&&d.push(Oe,Lt,tn,dt,W.z,null)}}const pt=Oe.children;for(let Lt=0,tn=pt.length;Lt<tn;Lt++)Rt(pt[Lt],lt,dt,ct)}function Vt(Oe,lt,dt,ct){const Ue=Oe.opaque,pt=Oe.transmissive,Lt=Oe.transparent;f.setupLightsView(dt),pt.length>0&&Pn(Ue,lt,dt),ct&&Te.viewport(x.copy(ct)),Ue.length>0&&Jt(Ue,lt,dt),pt.length>0&&Jt(pt,lt,dt),Lt.length>0&&Jt(Lt,lt,dt),Te.buffers.depth.setTest(!0),Te.buffers.depth.setMask(!0),Te.buffers.color.setMask(!0),Te.setPolygonOffset(!1)}function Pn(Oe,lt,dt){const ct=ye.isWebGL2;U===null&&(U=new Yh(1,1,{generateMipmaps:!0,type:me.has("EXT_color_buffer_half_float")?D_:Xh,minFilter:_u,samples:ct&&s===!0?4:0})),m.getDrawingBufferSize(q),ct?U.setSize(q.x,q.y):U.setSize(oC(q.x),oC(q.y));const Ue=m.getRenderTarget();m.setRenderTarget(U),m.clear();const pt=m.toneMapping;m.toneMapping=qc,Jt(Oe,lt,dt),m.toneMapping=pt,Q.updateMultisampleRenderTarget(U),Q.updateRenderTargetMipmap(U),m.setRenderTarget(Ue)}function Jt(Oe,lt,dt){const ct=lt.isScene===!0?lt.overrideMaterial:null;for(let Ue=0,pt=Oe.length;Ue<pt;Ue++){const Lt=Oe[Ue],tn=Lt.object,ln=Lt.geometry,Fn=ct===null?Lt.material:ct,An=Lt.group;tn.layers.test(dt.layers)&&Ai(tn,lt,dt,ln,Fn,An)}}function Ai(Oe,lt,dt,ct,Ue,pt){Oe.onBeforeRender(m,lt,dt,ct,Ue,pt),Oe.modelViewMatrix.multiplyMatrices(dt.matrixWorldInverse,Oe.matrixWorld),Oe.normalMatrix.getNormalMatrix(Oe.modelViewMatrix),Ue.onBeforeRender(m,lt,dt,ct,Oe,pt),Ue.transparent===!0&&Ue.side===$d?(Ue.side=ul,Ue.needsUpdate=!0,m.renderBufferDirect(dt,lt,ct,Ue,Oe,pt),Ue.side=Vd,Ue.needsUpdate=!0,m.renderBufferDirect(dt,lt,ct,Ue,Oe,pt),Ue.side=$d):m.renderBufferDirect(dt,lt,ct,Ue,Oe,pt),Oe.onAfterRender(m,lt,dt,ct,Ue,pt)}function pi(Oe,lt,dt){lt.isScene!==!0&&(lt=Y);const ct=H.get(Oe),Ue=f.state.lights,pt=f.state.shadowsArray,Lt=Ue.state.version,tn=Ae.getParameters(Oe,Ue.state,pt,lt,dt),ln=Ae.getProgramCacheKey(tn);let Fn=ct.programs;ct.environment=Oe.isMeshStandardMaterial?lt.environment:null,ct.fog=lt.fog,ct.envMap=(Oe.isMeshStandardMaterial?Pe:j).get(Oe.envMap||ct.environment),Fn===void 0&&(Oe.addEventListener("dispose",de),Fn=new Map,ct.programs=Fn);let An=Fn.get(ln);if(An!==void 0){if(ct.currentProgram===An&&ct.lightsStateVersion===Lt)return Xa(Oe,tn),An}else tn.uniforms=Ae.getUniforms(Oe),Oe.onBuild(dt,tn,m),Oe.onBeforeCompile(tn,m),An=Ae.acquireProgram(tn,ln),Fn.set(ln,An),ct.uniforms=tn.uniforms;const kn=ct.uniforms;(!Oe.isShaderMaterial&&!Oe.isRawShaderMaterial||Oe.clipping===!0)&&(kn.clippingPlanes=K.uniform),Xa(Oe,tn),ct.needsLights=Ya(Oe),ct.lightsStateVersion=Lt,ct.needsLights&&(kn.ambientLightColor.value=Ue.state.ambient,kn.lightProbe.value=Ue.state.probe,kn.directionalLights.value=Ue.state.directional,kn.directionalLightShadows.value=Ue.state.directionalShadow,kn.spotLights.value=Ue.state.spot,kn.spotLightShadows.value=Ue.state.spotShadow,kn.rectAreaLights.value=Ue.state.rectArea,kn.ltc_1.value=Ue.state.rectAreaLTC1,kn.ltc_2.value=Ue.state.rectAreaLTC2,kn.pointLights.value=Ue.state.point,kn.pointLightShadows.value=Ue.state.pointShadow,kn.hemisphereLights.value=Ue.state.hemi,kn.directionalShadowMap.value=Ue.state.directionalShadowMap,kn.directionalShadowMatrix.value=Ue.state.directionalShadowMatrix,kn.spotShadowMap.value=Ue.state.spotShadowMap,kn.spotShadowMatrix.value=Ue.state.spotShadowMatrix,kn.pointShadowMap.value=Ue.state.pointShadowMap,kn.pointShadowMatrix.value=Ue.state.pointShadowMatrix);const _e=An.getUniforms(),Qe=$1.seqWithValue(_e.seq,kn);return ct.currentProgram=An,ct.uniformsList=Qe,An}function Xa(Oe,lt){const dt=H.get(Oe);dt.outputEncoding=lt.outputEncoding,dt.instancing=lt.instancing,dt.skinning=lt.skinning,dt.morphTargets=lt.morphTargets,dt.morphNormals=lt.morphNormals,dt.morphColors=lt.morphColors,dt.morphTargetsCount=lt.morphTargetsCount,dt.numClippingPlanes=lt.numClippingPlanes,dt.numIntersection=lt.numClipIntersection,dt.vertexAlphas=lt.vertexAlphas,dt.vertexTangents=lt.vertexTangents,dt.toneMapping=lt.toneMapping}function _l(Oe,lt,dt,ct,Ue){lt.isScene!==!0&&(lt=Y),Q.resetTextureUnits();const pt=lt.fog,Lt=ct.isMeshStandardMaterial?lt.environment:null,tn=y===null?m.outputEncoding:y.isXRRenderTarget===!0?y.texture.encoding:Gd,ln=(ct.isMeshStandardMaterial?Pe:j).get(ct.envMap||Lt),Fn=ct.vertexColors===!0&&!!dt.attributes.color&&dt.attributes.color.itemSize===4,An=!!ct.normalMap&&!!dt.attributes.tangent,kn=!!dt.morphAttributes.position,_e=!!dt.morphAttributes.normal,Qe=!!dt.morphAttributes.color,Ie=ct.toneMapped?m.toneMapping:qc,Ge=dt.morphAttributes.position||dt.morphAttributes.normal||dt.morphAttributes.color,Ve=Ge!==void 0?Ge.length:0,it=H.get(ct),It=f.state.lights;if(k===!0&&(O===!0||Oe!==w)){const $n=Oe===w&&ct.id===S;K.setState(ct,Oe,$n)}let Et=!1;ct.version===it.__version?(it.needsLights&&it.lightsStateVersion!==It.state.version||it.outputEncoding!==tn||Ue.isInstancedMesh&&it.instancing===!1||!Ue.isInstancedMesh&&it.instancing===!0||Ue.isSkinnedMesh&&it.skinning===!1||!Ue.isSkinnedMesh&&it.skinning===!0||it.envMap!==ln||ct.fog===!0&&it.fog!==pt||it.numClippingPlanes!==void 0&&(it.numClippingPlanes!==K.numPlanes||it.numIntersection!==K.numIntersection)||it.vertexAlphas!==Fn||it.vertexTangents!==An||it.morphTargets!==kn||it.morphNormals!==_e||it.morphColors!==Qe||it.toneMapping!==Ie||ye.isWebGL2===!0&&it.morphTargetsCount!==Ve)&&(Et=!0):(Et=!0,it.__version=ct.version);let Ut=it.currentProgram;Et===!0&&(Ut=pi(ct,lt,Ue));let pn=!1,_n=!1,dn=!1;const bn=Ut.getUniforms(),Bn=it.uniforms;if(Te.useProgram(Ut.program)&&(pn=!0,_n=!0,dn=!0),ct.id!==S&&(S=ct.id,_n=!0),pn||w!==Oe){if(bn.setValue(Z,"projectionMatrix",Oe.projectionMatrix),ye.logarithmicDepthBuffer&&bn.setValue(Z,"logDepthBufFC",2/(Math.log(Oe.far+1)/Math.LN2)),w!==Oe&&(w=Oe,_n=!0,dn=!0),ct.isShaderMaterial||ct.isMeshPhongMaterial||ct.isMeshToonMaterial||ct.isMeshStandardMaterial||ct.envMap){const $n=bn.map.cameraPosition;$n!==void 0&&$n.setValue(Z,W.setFromMatrixPosition(Oe.matrixWorld))}(ct.isMeshPhongMaterial||ct.isMeshToonMaterial||ct.isMeshLambertMaterial||ct.isMeshBasicMaterial||ct.isMeshStandardMaterial||ct.isShaderMaterial)&&bn.setValue(Z,"isOrthographic",Oe.isOrthographicCamera===!0),(ct.isMeshPhongMaterial||ct.isMeshToonMaterial||ct.isMeshLambertMaterial||ct.isMeshBasicMaterial||ct.isMeshStandardMaterial||ct.isShaderMaterial||ct.isShadowMaterial||Ue.isSkinnedMesh)&&bn.setValue(Z,"viewMatrix",Oe.matrixWorldInverse)}if(Ue.isSkinnedMesh){bn.setOptional(Z,Ue,"bindMatrix"),bn.setOptional(Z,Ue,"bindMatrixInverse");const $n=Ue.skeleton;$n&&(ye.floatVertexTextures?($n.boneTexture===null&&$n.computeBoneTexture(),bn.setValue(Z,"boneTexture",$n.boneTexture,Q),bn.setValue(Z,"boneTextureSize",$n.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Ni=dt.morphAttributes;if((Ni.position!==void 0||Ni.normal!==void 0||Ni.color!==void 0&&ye.isWebGL2===!0)&&Le.update(Ue,dt,ct,Ut),(_n||it.receiveShadow!==Ue.receiveShadow)&&(it.receiveShadow=Ue.receiveShadow,bn.setValue(Z,"receiveShadow",Ue.receiveShadow)),_n&&(bn.setValue(Z,"toneMappingExposure",m.toneMappingExposure),it.needsLights&&Gr(Bn,dn),pt&&ct.fog===!0&&Fe.refreshFogUniforms(Bn,pt),Fe.refreshMaterialUniforms(Bn,ct,E,A,U),$1.upload(Z,it.uniformsList,Bn,Q)),ct.isShaderMaterial&&ct.uniformsNeedUpdate===!0&&($1.upload(Z,it.uniformsList,Bn,Q),ct.uniformsNeedUpdate=!1),ct.isSpriteMaterial&&bn.setValue(Z,"center",Ue.center),bn.setValue(Z,"modelViewMatrix",Ue.modelViewMatrix),bn.setValue(Z,"normalMatrix",Ue.normalMatrix),bn.setValue(Z,"modelMatrix",Ue.matrixWorld),ct.isShaderMaterial||ct.isRawShaderMaterial){const $n=ct.uniformsGroups;for(let qn=0,mn=$n.length;qn<mn;qn++)if(ye.isWebGL2){const ir=$n[qn];Ke.update(ir,Ut),Ke.bind(ir,Ut)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ut}function Gr(Oe,lt){Oe.ambientLightColor.needsUpdate=lt,Oe.lightProbe.needsUpdate=lt,Oe.directionalLights.needsUpdate=lt,Oe.directionalLightShadows.needsUpdate=lt,Oe.pointLights.needsUpdate=lt,Oe.pointLightShadows.needsUpdate=lt,Oe.spotLights.needsUpdate=lt,Oe.spotLightShadows.needsUpdate=lt,Oe.rectAreaLights.needsUpdate=lt,Oe.hemisphereLights.needsUpdate=lt}function Ya(Oe){return Oe.isMeshLambertMaterial||Oe.isMeshToonMaterial||Oe.isMeshPhongMaterial||Oe.isMeshStandardMaterial||Oe.isShadowMaterial||Oe.isShaderMaterial&&Oe.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(Oe,lt,dt){H.get(Oe.texture).__webglTexture=lt,H.get(Oe.depthTexture).__webglTexture=dt;const ct=H.get(Oe);ct.__hasExternalTextures=!0,ct.__hasExternalTextures&&(ct.__autoAllocateDepthBuffer=dt===void 0,ct.__autoAllocateDepthBuffer||me.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ct.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Oe,lt){const dt=H.get(Oe);dt.__webglFramebuffer=lt,dt.__useDefaultFramebuffer=lt===void 0},this.setRenderTarget=function(Oe,lt=0,dt=0){y=Oe,g=lt,_=dt;let ct=!0;if(Oe){const ln=H.get(Oe);ln.__useDefaultFramebuffer!==void 0?(Te.bindFramebuffer(36160,null),ct=!1):ln.__webglFramebuffer===void 0?Q.setupRenderTarget(Oe):ln.__hasExternalTextures&&Q.rebindTextures(Oe,H.get(Oe.texture).__webglTexture,H.get(Oe.depthTexture).__webglTexture)}let Ue=null,pt=!1,Lt=!1;if(Oe){const ln=Oe.texture;(ln.isData3DTexture||ln.isDataArrayTexture)&&(Lt=!0);const Fn=H.get(Oe).__webglFramebuffer;Oe.isWebGLCubeRenderTarget?(Ue=Fn[lt],pt=!0):ye.isWebGL2&&Oe.samples>0&&Q.useMultisampledRTT(Oe)===!1?Ue=H.get(Oe).__webglMultisampledFramebuffer:Ue=Fn,x.copy(Oe.viewport),T.copy(Oe.scissor),C=Oe.scissorTest}else x.copy(D).multiplyScalar(E).floor(),T.copy(L).multiplyScalar(E).floor(),C=R;if(Te.bindFramebuffer(36160,Ue)&&ye.drawBuffers&&ct&&Te.drawBuffers(Oe,Ue),Te.viewport(x),Te.scissor(T),Te.setScissorTest(C),pt){const ln=H.get(Oe.texture);Z.framebufferTexture2D(36160,36064,34069+lt,ln.__webglTexture,dt)}else if(Lt){const ln=H.get(Oe.texture),Fn=lt||0;Z.framebufferTextureLayer(36160,36064,ln.__webglTexture,dt||0,Fn)}S=-1},this.readRenderTargetPixels=function(Oe,lt,dt,ct,Ue,pt,Lt){if(!(Oe&&Oe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let tn=H.get(Oe).__webglFramebuffer;if(Oe.isWebGLCubeRenderTarget&&Lt!==void 0&&(tn=tn[Lt]),tn){Te.bindFramebuffer(36160,tn);try{const ln=Oe.texture,Fn=ln.format,An=ln.type;if(Fn!==So&&he.convert(Fn)!==Z.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const kn=An===D_&&(me.has("EXT_color_buffer_half_float")||ye.isWebGL2&&me.has("EXT_color_buffer_float"));if(An!==Xh&&he.convert(An)!==Z.getParameter(35738)&&!(An===fd&&(ye.isWebGL2||me.has("OES_texture_float")||me.has("WEBGL_color_buffer_float")))&&!kn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}lt>=0&&lt<=Oe.width-ct&&dt>=0&&dt<=Oe.height-Ue&&Z.readPixels(lt,dt,ct,Ue,he.convert(Fn),he.convert(An),pt)}finally{const ln=y!==null?H.get(y).__webglFramebuffer:null;Te.bindFramebuffer(36160,ln)}}},this.copyFramebufferToTexture=function(Oe,lt,dt=0){const ct=Math.pow(2,-dt),Ue=Math.floor(lt.image.width*ct),pt=Math.floor(lt.image.height*ct);Q.setTexture2D(lt,0),Z.copyTexSubImage2D(3553,dt,0,0,Oe.x,Oe.y,Ue,pt),Te.unbindTexture()},this.copyTextureToTexture=function(Oe,lt,dt,ct=0){const Ue=lt.image.width,pt=lt.image.height,Lt=he.convert(dt.format),tn=he.convert(dt.type);Q.setTexture2D(dt,0),Z.pixelStorei(37440,dt.flipY),Z.pixelStorei(37441,dt.premultiplyAlpha),Z.pixelStorei(3317,dt.unpackAlignment),lt.isDataTexture?Z.texSubImage2D(3553,ct,Oe.x,Oe.y,Ue,pt,Lt,tn,lt.image.data):lt.isCompressedTexture?Z.compressedTexSubImage2D(3553,ct,Oe.x,Oe.y,lt.mipmaps[0].width,lt.mipmaps[0].height,Lt,lt.mipmaps[0].data):Z.texSubImage2D(3553,ct,Oe.x,Oe.y,Lt,tn,lt.image),ct===0&&dt.generateMipmaps&&Z.generateMipmap(3553),Te.unbindTexture()},this.copyTextureToTexture3D=function(Oe,lt,dt,ct,Ue=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const pt=Oe.max.x-Oe.min.x+1,Lt=Oe.max.y-Oe.min.y+1,tn=Oe.max.z-Oe.min.z+1,ln=he.convert(ct.format),Fn=he.convert(ct.type);let An;if(ct.isData3DTexture)Q.setTexture3D(ct,0),An=32879;else if(ct.isDataArrayTexture)Q.setTexture2DArray(ct,0),An=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Z.pixelStorei(37440,ct.flipY),Z.pixelStorei(37441,ct.premultiplyAlpha),Z.pixelStorei(3317,ct.unpackAlignment);const kn=Z.getParameter(3314),_e=Z.getParameter(32878),Qe=Z.getParameter(3316),Ie=Z.getParameter(3315),Ge=Z.getParameter(32877),Ve=dt.isCompressedTexture?dt.mipmaps[0]:dt.image;Z.pixelStorei(3314,Ve.width),Z.pixelStorei(32878,Ve.height),Z.pixelStorei(3316,Oe.min.x),Z.pixelStorei(3315,Oe.min.y),Z.pixelStorei(32877,Oe.min.z),dt.isDataTexture||dt.isData3DTexture?Z.texSubImage3D(An,Ue,lt.x,lt.y,lt.z,pt,Lt,tn,ln,Fn,Ve.data):dt.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Z.compressedTexSubImage3D(An,Ue,lt.x,lt.y,lt.z,pt,Lt,tn,ln,Ve.data)):Z.texSubImage3D(An,Ue,lt.x,lt.y,lt.z,pt,Lt,tn,ln,Fn,Ve),Z.pixelStorei(3314,kn),Z.pixelStorei(32878,_e),Z.pixelStorei(3316,Qe),Z.pixelStorei(3315,Ie),Z.pixelStorei(32877,Ge),Ue===0&&ct.generateMipmaps&&Z.generateMipmap(An),Te.unbindTexture()},this.initTexture=function(Oe){Oe.isCubeTexture?Q.setTextureCube(Oe,0):Oe.isData3DTexture?Q.setTexture3D(Oe,0):Oe.isDataArrayTexture?Q.setTexture2DArray(Oe,0):Q.setTexture2D(Oe,0),Te.unbindTexture()},this.resetState=function(){g=0,_=0,y=null,Te.reset(),Ye.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class CGe extends Hj{}CGe.prototype.isWebGL1Renderer=!0;class jk{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new zt(e),this.density=t}clone(){return new jk(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Qk{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new zt(e),this.near=t,this.far=i}clone(){return new Qk(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}let Zk=class extends ji{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}};class Jk{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=dP,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=To()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=To()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=To()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const zs=new ke;class jh{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)zs.fromBufferAttribute(this,t),zs.applyMatrix4(e),this.setXYZ(t,zs.x,zs.y,zs.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)zs.fromBufferAttribute(this,t),zs.applyNormalMatrix(e),this.setXYZ(t,zs.x,zs.y,zs.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)zs.fromBufferAttribute(this,t),zs.transformDirection(e),this.setXYZ(t,zs.x,zs.y,zs.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new lr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new jh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class eO extends Cr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new zt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let jp;const C0=new ke,Qp=new ke,Zp=new ke,Jp=new St,M0=new St,Vj=new nn,lw=new ke,T0=new ke,cw=new ke,j5=new St,LE=new St,Q5=new St;class G1 extends ji{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",jp===void 0){jp=new si;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Jk(t,5);jp.setIndex([0,1,2,0,2,3]),jp.setAttribute("position",new jh(i,3,0,!1)),jp.setAttribute("uv",new jh(i,2,3,!1))}this.geometry=jp,this.material=e!==void 0?e:new eO,this.center=new St(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Qp.setFromMatrixScale(this.matrixWorld),Vj.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Zp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Qp.multiplyScalar(-Zp.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;uw(lw.set(-.5,-.5,0),Zp,a,Qp,r,s),uw(T0.set(.5,-.5,0),Zp,a,Qp,r,s),uw(cw.set(.5,.5,0),Zp,a,Qp,r,s),j5.set(0,0),LE.set(1,0),Q5.set(1,1);let o=e.ray.intersectTriangle(lw,T0,cw,!1,C0);if(o===null&&(uw(T0.set(-.5,.5,0),Zp,a,Qp,r,s),LE.set(0,1),o=e.ray.intersectTriangle(lw,cw,T0,!1,C0),o===null))return;const l=e.ray.origin.distanceTo(C0);l<e.near||l>e.far||t.push({distance:l,point:C0.clone(),uv:wy.getUV(C0,lw,T0,cw,j5,LE,Q5,new St),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function uw(n,e,t,i,r,s){Jp.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(M0.x=s*Jp.x-r*Jp.y,M0.y=r*Jp.x+s*Jp.y):M0.copy(Jp),n.copy(e),n.x+=M0.x,n.y+=M0.y,n.applyMatrix4(Vj)}const dw=new ke,Z5=new ke;class MGe extends ji{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r&&!(e<t[i].distance);i++);return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){dw.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(dw);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){dw.setFromMatrixPosition(e.matrixWorld),Z5.setFromMatrixPosition(this.matrixWorld);const i=dw.distanceTo(Z5)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s&&i>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}const J5=new ke,eV=new wi,tV=new wi,TGe=new ke,nV=new nn;class KM extends Br{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new nn,this.bindMatrixInverse=new nn}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new wi,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;eV.fromBufferAttribute(r.attributes.skinIndex,e),tV.fromBufferAttribute(r.attributes.skinWeight,e),J5.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=tV.getComponent(s);if(a!==0){const o=eV.getComponent(s);nV.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(TGe.copy(J5).applyMatrix4(nV),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Gv extends ji{constructor(){super(),this.isBone=!0,this.type="Bone"}}let xy=class extends ds{constructor(e=null,t=1,i=1,r,s,a,o,l,c=qr,u=qr,d,f){super(null,a,o,l,c,u,r,s,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};const iV=new nn,AGe=new nn;class Eg{constructor(e=[],t=[]){this.uuid=To(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new nn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new nn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:AGe;iV.multiplyMatrices(o,t[s]),iV.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Eg(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=yj(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new xy(t,e,e,So,fd);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new Gv),this.bones.push(a),this.boneInverses.push(new nn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}let B_=class extends lr{constructor(e,t,i,r=1){typeof i=="number"&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}};const rV=new nn,sV=new nn,fw=[],A0=new Br;class EGe extends Br{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new B_(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(A0.geometry=this.geometry,A0.material=this.material,A0.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,rV),sV.multiplyMatrices(i,rV),A0.matrixWorld=sV,A0.raycast(e,fw);for(let a=0,o=fw.length;a<o;a++){const l=fw[a];l.instanceId=s,l.object=this,t.push(l)}fw.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new B_(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class dl extends Cr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new zt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const aV=new ke,oV=new ke,lV=new nn,kE=new GM,hw=new cp;class Ig extends ji{constructor(e=new si,t=new dl){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)aV.fromBufferAttribute(t,r-1),oV.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=aV.distanceTo(oV);e.setAttribute("lineDistance",new qt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),hw.copy(i.boundingSphere),hw.applyMatrix4(r),hw.radius+=s,e.ray.intersectsSphere(hw)===!1)return;lV.copy(r).invert(),kE.copy(e.ray).applyMatrix4(lV);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=new ke,u=new ke,d=new ke,f=new ke,h=this.isLineSegments?2:1,p=i.index,v=i.attributes.position;if(p!==null){const g=Math.max(0,a.start),_=Math.min(p.count,a.start+a.count);for(let y=g,S=_-1;y<S;y+=h){const w=p.getX(y),x=p.getX(y+1);if(c.fromBufferAttribute(v,w),u.fromBufferAttribute(v,x),kE.distanceSqToSegment(c,u,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const C=e.ray.origin.distanceTo(f);C<e.near||C>e.far||t.push({distance:C,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,a.start),_=Math.min(v.count,a.start+a.count);for(let y=g,S=_-1;y<S;y+=h){if(c.fromBufferAttribute(v,y),u.fromBufferAttribute(v,y+1),kE.distanceSqToSegment(c,u,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const x=e.ray.origin.distanceTo(f);x<e.near||x>e.far||t.push({distance:x,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}const cV=new ke,uV=new ke;class Qh extends Ig{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)cV.fromBufferAttribute(t,r),uV.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+cV.distanceTo(uV);e.setAttribute("lineDistance",new qt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class $j extends Ig{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class gh extends Cr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new zt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const dV=new nn,_P=new GM,pw=new cp,mw=new ke;class Cy extends ji{constructor(e=new si,t=new gh){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),pw.copy(i.boundingSphere),pw.applyMatrix4(r),pw.radius+=s,e.ray.intersectsSphere(pw)===!1)return;dV.copy(r).invert(),_P.copy(e.ray).applyMatrix4(dV);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=i.index,d=i.attributes.position;if(c!==null){const f=Math.max(0,a.start),h=Math.min(c.count,a.start+a.count);for(let p=f,m=h;p<m;p++){const v=c.getX(p);mw.fromBufferAttribute(d,v),fV(mw,v,l,r,e,t,this)}}else{const f=Math.max(0,a.start),h=Math.min(d.count,a.start+a.count);for(let p=f,m=h;p<m;p++)mw.fromBufferAttribute(d,p),fV(mw,p,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function fV(n,e,t,i,r,s,a){const o=_P.distanceSqToPoint(n);if(o<t){const l=new ke;_P.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}class IGe extends ds{constructor(e,t,i,r,s,a,o,l,c,u,d,f){super(null,a,o,l,c,u,r,s,d,f),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class yl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let a;t?a=t:a=e*i[s-1];let o=0,l=s-1,c;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),c=i[r]-a,c<0)o=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===a)return r/(s-1);const u=i[r],f=i[r+1]-u,h=(a-u)/f;return(r+h)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),l=t||(a.isVector2?new St:new ke);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new ke,r=[],s=[],a=[],o=new ke,l=new nn;for(let h=0;h<=e;h++){const p=h/e;r[h]=this.getTangentAt(p,new ke)}s[0]=new ke,a[0]=new ke;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),d=Math.abs(r[0].y),f=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),f<=c&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let h=1;h<=e;h++){if(s[h]=s[h-1].clone(),a[h]=a[h-1].clone(),o.crossVectors(r[h-1],r[h]),o.length()>Number.EPSILON){o.normalize();const p=Math.acos(Lr(r[h-1].dot(r[h]),-1,1));s[h].applyMatrix4(l.makeRotationAxis(o,p))}a[h].crossVectors(r[h],s[h])}if(t===!0){let h=Math.acos(Lr(s[0].dot(s[e]),-1,1));h/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(h=-h);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],h*p)),a[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class tO extends yl{constructor(e=0,t=0,i=1,r=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t){const i=t||new St,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=l-this.aX,h=c-this.aY;l=f*u-h*d+this.aX,c=f*d+h*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class RGe extends tO{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function nO(){let n=0,e=0,t=0,i=0;function r(s,a,o,l){n=s,e=o,t=-3*s+3*a-2*o-l,i=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){r(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,u,d){let f=(a-s)/c-(o-s)/(c+u)+(o-a)/u,h=(o-a)/u-(l-a)/(u+d)+(l-o)/d;f*=u,h*=u,r(a,o,f,h)},calc:function(s){const a=s*s,o=a*s;return n+e*s+t*a+i*o}}}const vw=new ke,OE=new nO,NE=new nO,BE=new nO;class PGe extends yl{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new ke){const i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let c,u;this.closed||o>0?c=r[(o-1)%s]:(vw.subVectors(r[0],r[1]).add(r[0]),c=vw);const d=r[o%s],f=r[(o+1)%s];if(this.closed||o+2<s?u=r[(o+2)%s]:(vw.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=vw),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(d),h),m=Math.pow(d.distanceToSquared(f),h),v=Math.pow(f.distanceToSquared(u),h);m<1e-4&&(m=1),p<1e-4&&(p=m),v<1e-4&&(v=m),OE.initNonuniformCatmullRom(c.x,d.x,f.x,u.x,p,m,v),NE.initNonuniformCatmullRom(c.y,d.y,f.y,u.y,p,m,v),BE.initNonuniformCatmullRom(c.z,d.z,f.z,u.z,p,m,v)}else this.curveType==="catmullrom"&&(OE.initCatmullRom(c.x,d.x,f.x,u.x,this.tension),NE.initCatmullRom(c.y,d.y,f.y,u.y,this.tension),BE.initCatmullRom(c.z,d.z,f.z,u.z,this.tension));return i.set(OE.calc(l),NE.calc(l),BE.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ke().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function hV(n,e,t,i,r){const s=(i-e)*.5,a=(r-t)*.5,o=n*n,l=n*o;return(2*t-2*i+s+a)*l+(-3*t+3*i-2*s-a)*o+s*n+t}function DGe(n,e){const t=1-n;return t*t*e}function LGe(n,e){return 2*(1-n)*n*e}function kGe(n,e){return n*n*e}function My(n,e,t,i){return DGe(n,e)+LGe(n,t)+kGe(n,i)}function OGe(n,e){const t=1-n;return t*t*t*e}function NGe(n,e){const t=1-n;return 3*t*t*n*e}function BGe(n,e){return 3*(1-n)*n*n*e}function FGe(n,e){return n*n*n*e}function Ty(n,e,t,i,r){return OGe(n,e)+NGe(n,t)+BGe(n,i)+FGe(n,r)}class Gj extends yl{constructor(e=new St,t=new St,i=new St,r=new St){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new St){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(Ty(e,r.x,s.x,a.x,o.x),Ty(e,r.y,s.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class zGe extends yl{constructor(e=new ke,t=new ke,i=new ke,r=new ke){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ke){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(Ty(e,r.x,s.x,a.x,o.x),Ty(e,r.y,s.y,a.y,o.y),Ty(e,r.z,s.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class iO extends yl{constructor(e=new St,t=new St){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new St){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new St;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class UGe extends yl{constructor(e=new ke,t=new ke){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ke){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Wj extends yl{constructor(e=new St,t=new St,i=new St){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new St){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(My(e,r.x,s.x,a.x),My(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Kj extends yl{constructor(e=new ke,t=new ke,i=new ke){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ke){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(My(e,r.x,s.x,a.x),My(e,r.y,s.y,a.y),My(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class qj extends yl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new St){const i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,l=r[a===0?a:a-1],c=r[a],u=r[a>r.length-2?r.length-1:a+1],d=r[a>r.length-3?r.length-1:a+2];return i.set(hV(o,l.x,c.x,u.x,d.x),hV(o,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new St().fromArray(r))}return this}}var rO=Object.freeze({__proto__:null,ArcCurve:RGe,CatmullRomCurve3:PGe,CubicBezierCurve:Gj,CubicBezierCurve3:zGe,EllipseCurve:tO,LineCurve:iO,LineCurve3:UGe,QuadraticBezierCurve:Wj,QuadraticBezierCurve3:Kj,SplineCurve:qj});class HGe extends yl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new iO(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,o=this.curves[s],l=o.getLength(),c=l===0?0:1-a/l;return o.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new rO[r.type]().fromJSON(r))}return this}}class bP extends HGe{constructor(e){super(),this.type="Path",this.currentPoint=new St,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new iO(this.currentPoint.clone(),new St(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Wj(this.currentPoint.clone(),new St(e,t),new St(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){const o=new Gj(this.currentPoint.clone(),new St(e,t),new St(i,r),new St(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new qj(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,o,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,a,o,l),this}absellipse(e,t,i,r,s,a,o,l){const c=new tO(e,t,i,r,s,a,o,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class F_ extends si{constructor(e=[new St(0,-.5),new St(.5,0),new St(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Lr(r,0,Math.PI*2);const s=[],a=[],o=[],l=[],c=[],u=1/t,d=new ke,f=new St,h=new ke,p=new ke,m=new ke;let v=0,g=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:v=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,h.x=g*1,h.y=-v,h.z=g*0,m.copy(h),h.normalize(),l.push(h.x,h.y,h.z);break;case e.length-1:l.push(m.x,m.y,m.z);break;default:v=e[_+1].x-e[_].x,g=e[_+1].y-e[_].y,h.x=g*1,h.y=-v,h.z=g*0,p.copy(h),h.x+=m.x,h.y+=m.y,h.z+=m.z,h.normalize(),l.push(h.x,h.y,h.z),m.copy(p)}for(let _=0;_<=t;_++){const y=i+_*u*r,S=Math.sin(y),w=Math.cos(y);for(let x=0;x<=e.length-1;x++){d.x=e[x].x*S,d.y=e[x].y,d.z=e[x].x*w,a.push(d.x,d.y,d.z),f.x=_/t,f.y=x/(e.length-1),o.push(f.x,f.y);const T=l[3*x+0]*S,C=l[3*x+1],M=l[3*x+0]*w;c.push(T,C,M)}}for(let _=0;_<t;_++)for(let y=0;y<e.length-1;y++){const S=y+_*e.length,w=S,x=S+e.length,T=S+e.length+1,C=S+1;s.push(w,x,C),s.push(T,C,x)}this.setIndex(s),this.setAttribute("position",new qt(a,3)),this.setAttribute("uv",new qt(o,2)),this.setAttribute("normal",new qt(c,3))}static fromJSON(e){return new F_(e.points,e.segments,e.phiStart,e.phiLength)}}class lC extends F_{constructor(e=1,t=1,i=4,r=8){const s=new bP;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new lC(e.radius,e.length,e.capSegments,e.radialSegments)}}class cC extends si{constructor(e=1,t=8,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],a=[],o=[],l=[],c=new ke,u=new St;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let d=0,f=3;d<=t;d++,f+=3){const h=i+d/t*r;c.x=e*Math.cos(h),c.y=e*Math.sin(h),a.push(c.x,c.y,c.z),o.push(0,0,1),u.x=(a[f]/e+1)/2,u.y=(a[f+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new qt(a,3)),this.setAttribute("normal",new qt(o,3)),this.setAttribute("uv",new qt(l,2))}static fromJSON(e){return new cC(e.radius,e.segments,e.thetaStart,e.thetaLength)}}let SP=class Xj extends si{constructor(e=1,t=1,i=1,r=8,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],d=[],f=[],h=[];let p=0;const m=[],v=i/2;let g=0;_(),a===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new qt(d,3)),this.setAttribute("normal",new qt(f,3)),this.setAttribute("uv",new qt(h,2));function _(){const S=new ke,w=new ke;let x=0;const T=(t-e)/i;for(let C=0;C<=s;C++){const M=[],A=C/s,E=A*(t-e)+e;for(let I=0;I<=r;I++){const P=I/r,D=P*l+o,L=Math.sin(D),R=Math.cos(D);w.x=E*L,w.y=-A*i+v,w.z=E*R,d.push(w.x,w.y,w.z),S.set(L,T,R).normalize(),f.push(S.x,S.y,S.z),h.push(P,1-A),M.push(p++)}m.push(M)}for(let C=0;C<r;C++)for(let M=0;M<s;M++){const A=m[M][C],E=m[M+1][C],I=m[M+1][C+1],P=m[M][C+1];u.push(A,E,P),u.push(E,I,P),x+=6}c.addGroup(g,x,0),g+=x}function y(S){const w=p,x=new St,T=new ke;let C=0;const M=S===!0?e:t,A=S===!0?1:-1;for(let I=1;I<=r;I++)d.push(0,v*A,0),f.push(0,A,0),h.push(.5,.5),p++;const E=p;for(let I=0;I<=r;I++){const D=I/r*l+o,L=Math.cos(D),R=Math.sin(D);T.x=M*R,T.y=v*A,T.z=M*L,d.push(T.x,T.y,T.z),f.push(0,A,0),x.x=L*.5+.5,x.y=R*.5*A+.5,h.push(x.x,x.y),p++}for(let I=0;I<r;I++){const P=w+I,D=E+I;S===!0?u.push(D,D+1,P):u.push(D+1,D,P),C+=3}c.addGroup(g,C,S===!0?1:2),g+=C}}static fromJSON(e){return new Xj(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},pV=class Yj extends SP{constructor(e=1,t=1,i=8,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,i,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new Yj(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}};class Wd extends si{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],a=[];o(r),c(i),u(),this.setAttribute("position",new qt(s,3)),this.setAttribute("normal",new qt(s.slice(),3)),this.setAttribute("uv",new qt(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(_){const y=new ke,S=new ke,w=new ke;for(let x=0;x<t.length;x+=3)h(t[x+0],y),h(t[x+1],S),h(t[x+2],w),l(y,S,w,_)}function l(_,y,S,w){const x=w+1,T=[];for(let C=0;C<=x;C++){T[C]=[];const M=_.clone().lerp(S,C/x),A=y.clone().lerp(S,C/x),E=x-C;for(let I=0;I<=E;I++)I===0&&C===x?T[C][I]=M:T[C][I]=M.clone().lerp(A,I/E)}for(let C=0;C<x;C++)for(let M=0;M<2*(x-C)-1;M++){const A=Math.floor(M/2);M%2===0?(f(T[C][A+1]),f(T[C+1][A]),f(T[C][A])):(f(T[C][A+1]),f(T[C+1][A+1]),f(T[C+1][A]))}}function c(_){const y=new ke;for(let S=0;S<s.length;S+=3)y.x=s[S+0],y.y=s[S+1],y.z=s[S+2],y.normalize().multiplyScalar(_),s[S+0]=y.x,s[S+1]=y.y,s[S+2]=y.z}function u(){const _=new ke;for(let y=0;y<s.length;y+=3){_.x=s[y+0],_.y=s[y+1],_.z=s[y+2];const S=v(_)/2/Math.PI+.5,w=g(_)/Math.PI+.5;a.push(S,1-w)}p(),d()}function d(){for(let _=0;_<a.length;_+=6){const y=a[_+0],S=a[_+2],w=a[_+4],x=Math.max(y,S,w),T=Math.min(y,S,w);x>.9&&T<.1&&(y<.2&&(a[_+0]+=1),S<.2&&(a[_+2]+=1),w<.2&&(a[_+4]+=1))}}function f(_){s.push(_.x,_.y,_.z)}function h(_,y){const S=_*3;y.x=e[S+0],y.y=e[S+1],y.z=e[S+2]}function p(){const _=new ke,y=new ke,S=new ke,w=new ke,x=new St,T=new St,C=new St;for(let M=0,A=0;M<s.length;M+=9,A+=6){_.set(s[M+0],s[M+1],s[M+2]),y.set(s[M+3],s[M+4],s[M+5]),S.set(s[M+6],s[M+7],s[M+8]),x.set(a[A+0],a[A+1]),T.set(a[A+2],a[A+3]),C.set(a[A+4],a[A+5]),w.copy(_).add(y).add(S).divideScalar(3);const E=v(w);m(x,A+0,_,E),m(T,A+2,y,E),m(C,A+4,S,E)}}function m(_,y,S,w){w<0&&_.x===1&&(a[y]=_.x-1),S.x===0&&S.z===0&&(a[y]=w/2/Math.PI+.5)}function v(_){return Math.atan2(_.z,-_.x)}function g(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}static fromJSON(e){return new Wd(e.vertices,e.indices,e.radius,e.details)}}class uC extends Wd{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uC(e.radius,e.detail)}}const gw=new ke,yw=new ke,FE=new ke,_w=new wy;class VGe extends si{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(dv*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,c=[0,0,0],u=["a","b","c"],d=new Array(3),f={},h=[];for(let p=0;p<l;p+=3){a?(c[0]=a.getX(p),c[1]=a.getX(p+1),c[2]=a.getX(p+2)):(c[0]=p,c[1]=p+1,c[2]=p+2);const{a:m,b:v,c:g}=_w;if(m.fromBufferAttribute(o,c[0]),v.fromBufferAttribute(o,c[1]),g.fromBufferAttribute(o,c[2]),_w.getNormal(FE),d[0]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,d[1]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,d[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let _=0;_<3;_++){const y=(_+1)%3,S=d[_],w=d[y],x=_w[u[_]],T=_w[u[y]],C=`${S}_${w}`,M=`${w}_${S}`;M in f&&f[M]?(FE.dot(f[M].normal)<=s&&(h.push(x.x,x.y,x.z),h.push(T.x,T.y,T.z)),f[M]=null):C in f||(f[C]={index0:c[_],index1:c[y],normal:FE.clone()})}}for(const p in f)if(f[p]){const{index0:m,index1:v}=f[p];gw.fromBufferAttribute(o,m),yw.fromBufferAttribute(o,v),h.push(gw.x,gw.y,gw.z),h.push(yw.x,yw.y,yw.z)}this.setAttribute("position",new qt(h,3))}}}class sO extends bP{constructor(e){super(e),this.uuid=To(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new bP().fromJSON(r))}return this}}const $Ge={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=jj(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,d,f,h;if(i&&(s=XGe(n,e,s,t)),n.length>80*t){o=c=n[0],l=u=n[1];for(let p=t;p<r;p+=t)d=n[p],f=n[p+1],d<o&&(o=d),f<l&&(l=f),d>c&&(c=d),f>u&&(u=f);h=Math.max(c-o,u-l),h=h!==0?1/h:0}return z_(s,a,t,o,l,h),a}};function jj(n,e,t,i,r){let s,a;if(r===sWe(n,e,t,i)>0)for(s=e;s<t;s+=i)a=mV(s,n[s],n[s+1],a);else for(s=t-i;s>=e;s-=i)a=mV(s,n[s],n[s+1],a);return a&&qM(a,a.next)&&(H_(a),a=a.next),a}function Kd(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(qM(t,t.next)||Zi(t.prev,t,t.next)===0)){if(H_(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function z_(n,e,t,i,r,s,a){if(!n)return;!a&&s&&JGe(n,i,r,s);let o=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?WGe(n,i,r,s):GGe(n)){e.push(l.i/t),e.push(n.i/t),e.push(c.i/t),H_(n),n=c.next,o=c.next;continue}if(n=c,n===o){a?a===1?(n=KGe(Kd(n),e,t),z_(n,e,t,i,r,s,2)):a===2&&qGe(n,e,t,i,r,s):z_(Kd(n),e,t,i,r,s,1);break}}}function GGe(n){const e=n.prev,t=n,i=n.next;if(Zi(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(Km(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&Zi(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function WGe(n,e,t,i){const r=n.prev,s=n,a=n.next;if(Zi(r,s,a)>=0)return!1;const o=r.x<s.x?r.x<a.x?r.x:a.x:s.x<a.x?s.x:a.x,l=r.y<s.y?r.y<a.y?r.y:a.y:s.y<a.y?s.y:a.y,c=r.x>s.x?r.x>a.x?r.x:a.x:s.x>a.x?s.x:a.x,u=r.y>s.y?r.y>a.y?r.y:a.y:s.y>a.y?s.y:a.y,d=wP(o,l,e,t,i),f=wP(c,u,e,t,i);let h=n.prevZ,p=n.nextZ;for(;h&&h.z>=d&&p&&p.z<=f;){if(h!==n.prev&&h!==n.next&&Km(r.x,r.y,s.x,s.y,a.x,a.y,h.x,h.y)&&Zi(h.prev,h,h.next)>=0||(h=h.prevZ,p!==n.prev&&p!==n.next&&Km(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&Zi(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;h&&h.z>=d;){if(h!==n.prev&&h!==n.next&&Km(r.x,r.y,s.x,s.y,a.x,a.y,h.x,h.y)&&Zi(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=f;){if(p!==n.prev&&p!==n.next&&Km(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&Zi(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function KGe(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!qM(r,s)&&Qj(r,i,i.next,s)&&U_(r,s)&&U_(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),H_(i),H_(i.next),i=n=s),i=i.next}while(i!==n);return Kd(i)}function qGe(n,e,t,i,r,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&nWe(a,o)){let l=Zj(a,o);a=Kd(a,a.next),l=Kd(l,l.next),z_(a,e,t,i,r,s),z_(l,e,t,i,r,s);return}o=o.next}a=a.next}while(a!==n)}function XGe(n,e,t,i){const r=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;s++)o=e[s]*i,l=s<a-1?e[s+1]*i:n.length,c=jj(n,o,l,i,!1),c===c.next&&(c.steiner=!0),r.push(tWe(c));for(r.sort(YGe),s=0;s<r.length;s++)jGe(r[s],t),t=Kd(t,t.next);return t}function YGe(n,e){return n.x-e.x}function jGe(n,e){if(e=QGe(n,e),e){const t=Zj(e,n);Kd(e,e.next),Kd(t,t.next)}}function QGe(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,a;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const f=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=i&&f>s){if(s=f,f===i){if(r===t.y)return t;if(r===t.next.y)return t.next}a=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!a)return null;if(i===s)return a;const o=a,l=a.x,c=a.y;let u=1/0,d;t=a;do i>=t.x&&t.x>=l&&i!==t.x&&Km(r<c?i:s,r,l,c,r<c?s:i,r,t.x,t.y)&&(d=Math.abs(r-t.y)/(i-t.x),U_(t,n)&&(d<u||d===u&&(t.x>a.x||t.x===a.x&&ZGe(a,t)))&&(a=t,u=d)),t=t.next;while(t!==o);return a}function ZGe(n,e){return Zi(n.prev,n,e.prev)<0&&Zi(e.next,n,n.next)<0}function JGe(n,e,t,i){let r=n;do r.z===null&&(r.z=wP(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,eWe(r)}function eWe(n){let e,t,i,r,s,a,o,l,c=1;do{for(t=n,n=null,s=null,a=0;t;){for(a++,i=t,o=0,e=0;e<c&&(o++,i=i.nextZ,!!i);e++);for(l=c;o>0||l>0&&i;)o!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(a>1);return n}function wP(n,e,t,i,r){return n=32767*(n-t)*r,e=32767*(e-i)*r,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function tWe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Km(n,e,t,i,r,s,a,o){return(r-a)*(e-o)-(n-a)*(s-o)>=0&&(n-a)*(i-o)-(t-a)*(e-o)>=0&&(t-a)*(s-o)-(r-a)*(i-o)>=0}function nWe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!iWe(n,e)&&(U_(n,e)&&U_(e,n)&&rWe(n,e)&&(Zi(n.prev,n,e.prev)||Zi(n,e.prev,e))||qM(n,e)&&Zi(n.prev,n,n.next)>0&&Zi(e.prev,e,e.next)>0)}function Zi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function qM(n,e){return n.x===e.x&&n.y===e.y}function Qj(n,e,t,i){const r=Sw(Zi(n,e,t)),s=Sw(Zi(n,e,i)),a=Sw(Zi(t,i,n)),o=Sw(Zi(t,i,e));return!!(r!==s&&a!==o||r===0&&bw(n,t,e)||s===0&&bw(n,i,e)||a===0&&bw(t,n,i)||o===0&&bw(t,e,i))}function bw(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Sw(n){return n>0?1:n<0?-1:0}function iWe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Qj(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function U_(n,e){return Zi(n.prev,n,n.next)<0?Zi(n,e,n.next)>=0&&Zi(n,n.prev,e)>=0:Zi(n,e,n.prev)<0||Zi(n,n.next,e)<0}function rWe(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function Zj(n,e){const t=new xP(n.i,n.x,n.y),i=new xP(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function mV(n,e,t,i){const r=new xP(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function H_(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function xP(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function sWe(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}class Sd{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Sd.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];vV(e),gV(i,e);let a=e.length;t.forEach(vV);for(let l=0;l<t.length;l++)r.push(a),a+=t[l].length,gV(i,t[l]);const o=$Ge.triangulate(i,r);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function vV(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function gV(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class dC extends si{constructor(e=new sO([new St(.5,.5),new St(-.5,.5),new St(-.5,-.5),new St(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];a(c)}this.setAttribute("position",new qt(r,3)),this.setAttribute("uv",new qt(s,2)),this.computeVertexNormals();function a(o){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,h=t.bevelThickness!==void 0?t.bevelThickness:.2,p=t.bevelSize!==void 0?t.bevelSize:h-.1,m=t.bevelOffset!==void 0?t.bevelOffset:0,v=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,_=t.UVGenerator!==void 0?t.UVGenerator:aWe;let y,S=!1,w,x,T,C;g&&(y=g.getSpacedPoints(u),S=!0,f=!1,w=g.computeFrenetFrames(u,!1),x=new ke,T=new ke,C=new ke),f||(v=0,h=0,p=0,m=0);const M=o.extractPoints(c);let A=M.shape;const E=M.holes;if(!Sd.isClockWise(A)){A=A.reverse();for(let H=0,Q=E.length;H<Q;H++){const j=E[H];Sd.isClockWise(j)&&(E[H]=j.reverse())}}const P=Sd.triangulateShape(A,E),D=A;for(let H=0,Q=E.length;H<Q;H++){const j=E[H];A=A.concat(j)}function L(H,Q,j){return Q||console.error("THREE.ExtrudeGeometry: vec does not exist"),Q.clone().multiplyScalar(j).add(H)}const R=A.length,B=P.length;function k(H,Q,j){let Pe,we,De;const Me=H.x-Q.x,Ae=H.y-Q.y,Fe=j.x-H.x,ne=j.y-H.y,z=Me*Me+Ae*Ae,K=Me*ne-Ae*Fe;if(Math.abs(K)>Number.EPSILON){const ae=Math.sqrt(z),xe=Math.sqrt(Fe*Fe+ne*ne),Le=Q.x-Ae/ae,Xe=Q.y+Me/ae,je=j.x-ne/xe,he=j.y+Fe/xe,Ye=((je-Le)*ne-(he-Xe)*Fe)/(Me*ne-Ae*Fe);Pe=Le+Me*Ye-H.x,we=Xe+Ae*Ye-H.y;const Ke=Pe*Pe+we*we;if(Ke<=2)return new St(Pe,we);De=Math.sqrt(Ke/2)}else{let ae=!1;Me>Number.EPSILON?Fe>Number.EPSILON&&(ae=!0):Me<-Number.EPSILON?Fe<-Number.EPSILON&&(ae=!0):Math.sign(Ae)===Math.sign(ne)&&(ae=!0),ae?(Pe=-Ae,we=Me,De=Math.sqrt(z)):(Pe=Me,we=Ae,De=Math.sqrt(z/2))}return new St(Pe/De,we/De)}const O=[];for(let H=0,Q=D.length,j=Q-1,Pe=H+1;H<Q;H++,j++,Pe++)j===Q&&(j=0),Pe===Q&&(Pe=0),O[H]=k(D[H],D[j],D[Pe]);const U=[];let G,q=O.concat();for(let H=0,Q=E.length;H<Q;H++){const j=E[H];G=[];for(let Pe=0,we=j.length,De=we-1,Me=Pe+1;Pe<we;Pe++,De++,Me++)De===we&&(De=0),Me===we&&(Me=0),G[Pe]=k(j[Pe],j[De],j[Me]);U.push(G),q=q.concat(G)}for(let H=0;H<v;H++){const Q=H/v,j=h*Math.cos(Q*Math.PI/2),Pe=p*Math.sin(Q*Math.PI/2)+m;for(let we=0,De=D.length;we<De;we++){const Me=L(D[we],O[we],Pe);ee(Me.x,Me.y,-j)}for(let we=0,De=E.length;we<De;we++){const Me=E[we];G=U[we];for(let Ae=0,Fe=Me.length;Ae<Fe;Ae++){const ne=L(Me[Ae],G[Ae],Pe);ee(ne.x,ne.y,-j)}}}const W=p+m;for(let H=0;H<R;H++){const Q=f?L(A[H],q[H],W):A[H];S?(T.copy(w.normals[0]).multiplyScalar(Q.x),x.copy(w.binormals[0]).multiplyScalar(Q.y),C.copy(y[0]).add(T).add(x),ee(C.x,C.y,C.z)):ee(Q.x,Q.y,0)}for(let H=1;H<=u;H++)for(let Q=0;Q<R;Q++){const j=f?L(A[Q],q[Q],W):A[Q];S?(T.copy(w.normals[H]).multiplyScalar(j.x),x.copy(w.binormals[H]).multiplyScalar(j.y),C.copy(y[H]).add(T).add(x),ee(C.x,C.y,C.z)):ee(j.x,j.y,d/u*H)}for(let H=v-1;H>=0;H--){const Q=H/v,j=h*Math.cos(Q*Math.PI/2),Pe=p*Math.sin(Q*Math.PI/2)+m;for(let we=0,De=D.length;we<De;we++){const Me=L(D[we],O[we],Pe);ee(Me.x,Me.y,d+j)}for(let we=0,De=E.length;we<De;we++){const Me=E[we];G=U[we];for(let Ae=0,Fe=Me.length;Ae<Fe;Ae++){const ne=L(Me[Ae],G[Ae],Pe);S?ee(ne.x,ne.y+y[u-1].y,y[u-1].x+j):ee(ne.x,ne.y,d+j)}}}Y(),J();function Y(){const H=r.length/3;if(f){let Q=0,j=R*Q;for(let Pe=0;Pe<B;Pe++){const we=P[Pe];me(we[2]+j,we[1]+j,we[0]+j)}Q=u+v*2,j=R*Q;for(let Pe=0;Pe<B;Pe++){const we=P[Pe];me(we[0]+j,we[1]+j,we[2]+j)}}else{for(let Q=0;Q<B;Q++){const j=P[Q];me(j[2],j[1],j[0])}for(let Q=0;Q<B;Q++){const j=P[Q];me(j[0]+R*u,j[1]+R*u,j[2]+R*u)}}i.addGroup(H,r.length/3-H,0)}function J(){const H=r.length/3;let Q=0;Z(D,Q),Q+=D.length;for(let j=0,Pe=E.length;j<Pe;j++){const we=E[j];Z(we,Q),Q+=we.length}i.addGroup(H,r.length/3-H,1)}function Z(H,Q){let j=H.length;for(;--j>=0;){const Pe=j;let we=j-1;we<0&&(we=H.length-1);for(let De=0,Me=u+v*2;De<Me;De++){const Ae=R*De,Fe=R*(De+1),ne=Q+Pe+Ae,z=Q+we+Ae,K=Q+we+Fe,ae=Q+Pe+Fe;ye(ne,z,K,ae)}}}function ee(H,Q,j){l.push(H),l.push(Q),l.push(j)}function me(H,Q,j){Te(H),Te(Q),Te(j);const Pe=r.length/3,we=_.generateTopUV(i,r,Pe-3,Pe-2,Pe-1);Ee(we[0]),Ee(we[1]),Ee(we[2])}function ye(H,Q,j,Pe){Te(H),Te(Q),Te(Pe),Te(Q),Te(j),Te(Pe);const we=r.length/3,De=_.generateSideWallUV(i,r,we-6,we-3,we-2,we-1);Ee(De[0]),Ee(De[1]),Ee(De[3]),Ee(De[1]),Ee(De[2]),Ee(De[3])}function Te(H){r.push(l[H*3+0]),r.push(l[H*3+1]),r.push(l[H*3+2])}function Ee(H){s.push(H.x),s.push(H.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return oWe(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new rO[r.type]().fromJSON(r)),new dC(i,e.options)}}const aWe={generateTopUV:function(n,e,t,i,r){const s=e[t*3],a=e[t*3+1],o=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new St(s,a),new St(o,l),new St(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],d=e[i*3+2],f=e[r*3],h=e[r*3+1],p=e[r*3+2],m=e[s*3],v=e[s*3+1],g=e[s*3+2];return Math.abs(o-u)<Math.abs(a-c)?[new St(a,1-l),new St(c,1-d),new St(f,1-p),new St(m,1-g)]:[new St(o,1-l),new St(u,1-d),new St(h,1-p),new St(v,1-g)]}};function oWe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class fC extends Wd{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new fC(e.radius,e.detail)}}class hC extends Wd{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hC(e.radius,e.detail)}}class pC extends si{constructor(e=.5,t=1,i=8,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const o=[],l=[],c=[],u=[];let d=e;const f=(t-e)/r,h=new ke,p=new St;for(let m=0;m<=r;m++){for(let v=0;v<=i;v++){const g=s+v/i*a;h.x=d*Math.cos(g),h.y=d*Math.sin(g),l.push(h.x,h.y,h.z),c.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,u.push(p.x,p.y)}d+=f}for(let m=0;m<r;m++){const v=m*(i+1);for(let g=0;g<i;g++){const _=g+v,y=_,S=_+i+1,w=_+i+2,x=_+1;o.push(y,S,x),o.push(S,w,x)}}this.setIndex(o),this.setAttribute("position",new qt(l,3)),this.setAttribute("normal",new qt(c,3)),this.setAttribute("uv",new qt(u,2))}static fromJSON(e){return new pC(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class mC extends si{constructor(e=new sO([new St(0,.5),new St(-.5,-.5),new St(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(o,l,u),o+=l,l=0;this.setIndex(i),this.setAttribute("position",new qt(r,3)),this.setAttribute("normal",new qt(s,3)),this.setAttribute("uv",new qt(a,2));function c(u){const d=r.length/3,f=u.extractPoints(t);let h=f.shape;const p=f.holes;Sd.isClockWise(h)===!1&&(h=h.reverse());for(let v=0,g=p.length;v<g;v++){const _=p[v];Sd.isClockWise(_)===!0&&(p[v]=_.reverse())}const m=Sd.triangulateShape(h,p);for(let v=0,g=p.length;v<g;v++){const _=p[v];h=h.concat(_)}for(let v=0,g=h.length;v<g;v++){const _=h[v];r.push(_.x,_.y,0),s.push(0,0,1),a.push(_.x,_.y)}for(let v=0,g=m.length;v<g;v++){const _=m[v],y=_[0]+d,S=_[1]+d,w=_[2]+d;i.push(y,S,w),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return lWe(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];i.push(a)}return new mC(i,e.curveSegments)}}function lWe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}let yV=class Jj extends si{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(a+o,Math.PI);let c=0;const u=[],d=new ke,f=new ke,h=[],p=[],m=[],v=[];for(let g=0;g<=i;g++){const _=[],y=g/i;let S=0;g==0&&a==0?S=.5/t:g==i&&l==Math.PI&&(S=-.5/t);for(let w=0;w<=t;w++){const x=w/t;d.x=-e*Math.cos(r+x*s)*Math.sin(a+y*o),d.y=e*Math.cos(a+y*o),d.z=e*Math.sin(r+x*s)*Math.sin(a+y*o),p.push(d.x,d.y,d.z),f.copy(d).normalize(),m.push(f.x,f.y,f.z),v.push(x+S,1-y),_.push(c++)}u.push(_)}for(let g=0;g<i;g++)for(let _=0;_<t;_++){const y=u[g][_+1],S=u[g][_],w=u[g+1][_],x=u[g+1][_+1];(g!==0||a>0)&&h.push(y,S,x),(g!==i-1||l<Math.PI)&&h.push(S,w,x)}this.setIndex(h),this.setAttribute("position",new qt(p,3)),this.setAttribute("normal",new qt(m,3)),this.setAttribute("uv",new qt(v,2))}static fromJSON(e){return new Jj(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}};class vC extends Wd{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new vC(e.radius,e.detail)}}class gC extends si{constructor(e=1,t=.4,i=8,r=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],o=[],l=[],c=[],u=new ke,d=new ke,f=new ke;for(let h=0;h<=i;h++)for(let p=0;p<=r;p++){const m=p/r*s,v=h/i*Math.PI*2;d.x=(e+t*Math.cos(v))*Math.cos(m),d.y=(e+t*Math.cos(v))*Math.sin(m),d.z=t*Math.sin(v),o.push(d.x,d.y,d.z),u.x=e*Math.cos(m),u.y=e*Math.sin(m),f.subVectors(d,u).normalize(),l.push(f.x,f.y,f.z),c.push(p/r),c.push(h/i)}for(let h=1;h<=i;h++)for(let p=1;p<=r;p++){const m=(r+1)*h+p-1,v=(r+1)*(h-1)+p-1,g=(r+1)*(h-1)+p,_=(r+1)*h+p;a.push(m,v,_),a.push(v,g,_)}this.setIndex(a),this.setAttribute("position",new qt(o,3)),this.setAttribute("normal",new qt(l,3)),this.setAttribute("uv",new qt(c,2))}static fromJSON(e){return new gC(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class yC extends si{constructor(e=1,t=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],c=[],u=[],d=new ke,f=new ke,h=new ke,p=new ke,m=new ke,v=new ke,g=new ke;for(let y=0;y<=i;++y){const S=y/i*s*Math.PI*2;_(S,s,a,e,h),_(S+.01,s,a,e,p),v.subVectors(p,h),g.addVectors(p,h),m.crossVectors(v,g),g.crossVectors(m,v),m.normalize(),g.normalize();for(let w=0;w<=r;++w){const x=w/r*Math.PI*2,T=-t*Math.cos(x),C=t*Math.sin(x);d.x=h.x+(T*g.x+C*m.x),d.y=h.y+(T*g.y+C*m.y),d.z=h.z+(T*g.z+C*m.z),l.push(d.x,d.y,d.z),f.subVectors(d,h).normalize(),c.push(f.x,f.y,f.z),u.push(y/i),u.push(w/r)}}for(let y=1;y<=i;y++)for(let S=1;S<=r;S++){const w=(r+1)*(y-1)+(S-1),x=(r+1)*y+(S-1),T=(r+1)*y+S,C=(r+1)*(y-1)+S;o.push(w,x,C),o.push(x,T,C)}this.setIndex(o),this.setAttribute("position",new qt(l,3)),this.setAttribute("normal",new qt(c,3)),this.setAttribute("uv",new qt(u,2));function _(y,S,w,x,T){const C=Math.cos(y),M=Math.sin(y),A=w/S*y,E=Math.cos(A);T.x=x*(2+E)*.5*C,T.y=x*(2+E)*M*.5,T.z=x*Math.sin(A)*.5}}static fromJSON(e){return new yC(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class _C extends si{constructor(e=new Kj(new ke(-1,-1,0),new ke(-1,1,0),new ke(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new ke,l=new ke,c=new St;let u=new ke;const d=[],f=[],h=[],p=[];m(),this.setIndex(p),this.setAttribute("position",new qt(d,3)),this.setAttribute("normal",new qt(f,3)),this.setAttribute("uv",new qt(h,2));function m(){for(let y=0;y<t;y++)v(y);v(s===!1?t:0),_(),g()}function v(y){u=e.getPointAt(y/t,u);const S=a.normals[y],w=a.binormals[y];for(let x=0;x<=r;x++){const T=x/r*Math.PI*2,C=Math.sin(T),M=-Math.cos(T);l.x=M*S.x+C*w.x,l.y=M*S.y+C*w.y,l.z=M*S.z+C*w.z,l.normalize(),f.push(l.x,l.y,l.z),o.x=u.x+i*l.x,o.y=u.y+i*l.y,o.z=u.z+i*l.z,d.push(o.x,o.y,o.z)}}function g(){for(let y=1;y<=t;y++)for(let S=1;S<=r;S++){const w=(r+1)*(y-1)+(S-1),x=(r+1)*y+(S-1),T=(r+1)*y+S,C=(r+1)*(y-1)+S;p.push(w,x,C),p.push(x,T,C)}}function _(){for(let y=0;y<=t;y++)for(let S=0;S<=r;S++)c.x=y/t,c.y=S/r,h.push(c.x,c.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new _C(new rO[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class cWe extends si{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new ke,s=new ke;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],f=d.start,h=d.count;for(let p=f,m=f+h;p<m;p+=3)for(let v=0;v<3;v++){const g=o.getX(p+v),_=o.getX(p+(v+1)%3);r.fromBufferAttribute(a,g),s.fromBufferAttribute(a,_),_V(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let c=0;c<3;c++){const u=3*o+c,d=3*o+(c+1)%3;r.fromBufferAttribute(a,u),s.fromBufferAttribute(a,d),_V(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new qt(t,3))}}}function _V(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var bV=Object.freeze({__proto__:null,BoxGeometry:N_,BoxBufferGeometry:N_,CapsuleGeometry:lC,CapsuleBufferGeometry:lC,CircleGeometry:cC,CircleBufferGeometry:cC,ConeGeometry:pV,ConeBufferGeometry:pV,CylinderGeometry:SP,CylinderBufferGeometry:SP,DodecahedronGeometry:uC,DodecahedronBufferGeometry:uC,EdgesGeometry:VGe,ExtrudeGeometry:dC,ExtrudeBufferGeometry:dC,IcosahedronGeometry:fC,IcosahedronBufferGeometry:fC,LatheGeometry:F_,LatheBufferGeometry:F_,OctahedronGeometry:hC,OctahedronBufferGeometry:hC,PlaneGeometry:gP,PlaneBufferGeometry:gP,PolyhedronGeometry:Wd,PolyhedronBufferGeometry:Wd,RingGeometry:pC,RingBufferGeometry:pC,ShapeGeometry:mC,ShapeBufferGeometry:mC,SphereGeometry:yV,SphereBufferGeometry:yV,TetrahedronGeometry:vC,TetrahedronBufferGeometry:vC,TorusGeometry:gC,TorusBufferGeometry:gC,TorusKnotGeometry:yC,TorusKnotBufferGeometry:yC,TubeGeometry:_C,TubeBufferGeometry:_C,WireframeGeometry:cWe});class uWe extends Cr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new zt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class dWe extends iu{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Rg extends Cr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new zt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rf extends Rg{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new St(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Lr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new zt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new zt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new zt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Xc extends Cr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new zt(16777215),this.specular=new zt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$M,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class fWe extends Cr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new zt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class hWe extends Cr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class aO extends Cr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=$M,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class pWe extends Cr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new zt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=op,this.normalScale=new St(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mWe extends dl{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Bu(n,e,t){return eQ(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function ww(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function eQ(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function vWe(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function SV(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const o=t[s]*e;for(let l=0;l!==e;++l)r[a++]=n[o+l]}return r}function tQ(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),t.push(a)),s=n[r++];while(s!==void 0)}class Mb{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(i=2,s=o);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const o=i+a>>>1;e<t[o]?a=o:i=o+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class gWe extends Mb{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Hm,endingEnd:Hm}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],l=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case Vm:s=e,o=2*t-i;break;case aC:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Vm:a=e,l=2*i-t;break;case aC:a=1,l=i+r[1]-r[0];break;default:a=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=a*u}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,h=this._weightNext,p=(i-t)/(r-t),m=p*p,v=m*p,g=-f*v+2*f*m-f*p,_=(1+f)*v+(-1.5-2*f)*m+(-.5+f)*p+1,y=(-1-h)*v+(1.5+h)*m+.5*p,S=h*v-h*m;for(let w=0;w!==o;++w)s[w]=g*a[u+w]+_*a[c+w]+y*a[l+w]+S*a[d+w];return s}}class nQ extends Mb{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=(i-t)/(r-t),d=1-u;for(let f=0;f!==o;++f)s[f]=a[c+f]*d+a[l+f]*u;return s}}class yWe extends Mb{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class cc{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ww(t,this.TimeBufferType),this.values=ww(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:ww(e.times,Array),values:ww(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new yWe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new nQ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new gWe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case L_:t=this.InterpolantFactoryMethodDiscrete;break;case Vv:t=this.InterpolantFactoryMethodLinear;break;case sE:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return L_;case this.InterpolantFactoryMethodLinear:return Vv;case this.InterpolantFactoryMethodSmooth:return sE}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=Bu(i,s,a),this.values=Bu(this.values,s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(r!==void 0&&eQ(r))for(let o=0,l=r.length;o!==l;++o){const c=r[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=Bu(this.times),t=Bu(this.values),i=this.getValueSize(),r=this.getInterpolation()===sE,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const c=e[o],u=e[o+1];if(c!==u&&(o!==1||c!==e[0]))if(r)l=!0;else{const d=o*i,f=d-i,h=d+i;for(let p=0;p!==i;++p){const m=t[d+p];if(m!==t[f+p]||m!==t[h+p]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const d=o*i,f=a*i;for(let h=0;h!==i;++h)t[f+h]=t[d+h]}++a}}if(s>0){e[a]=e[s];for(let o=s*i,l=a*i,c=0;c!==i;++c)t[l+c]=t[o+c];++a}return a!==e.length?(this.times=Bu(e,0,a),this.values=Bu(t,0,a*i)):(this.times=e,this.values=t),this}clone(){const e=Bu(this.times,0),t=Bu(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}cc.prototype.TimeBufferType=Float32Array;cc.prototype.ValueBufferType=Float32Array;cc.prototype.DefaultInterpolation=Vv;class Pg extends cc{}Pg.prototype.ValueTypeName="bool";Pg.prototype.ValueBufferType=Array;Pg.prototype.DefaultInterpolation=L_;Pg.prototype.InterpolantFactoryMethodLinear=void 0;Pg.prototype.InterpolantFactoryMethodSmooth=void 0;class iQ extends cc{}iQ.prototype.ValueTypeName="color";class Wv extends cc{}Wv.prototype.ValueTypeName="number";class _We extends Mb{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(i-t)/(r-t);let c=e*o;for(let u=c+o;c!==u;c+=4)as.slerpFlat(s,0,a,c-o,a,c,l);return s}}class ru extends cc{InterpolantFactoryMethodLinear(e){return new _We(this.times,this.values,this.getValueSize(),e)}}ru.prototype.ValueTypeName="quaternion";ru.prototype.DefaultInterpolation=Vv;ru.prototype.InterpolantFactoryMethodSmooth=void 0;class Dg extends cc{}Dg.prototype.ValueTypeName="string";Dg.prototype.ValueBufferType=Array;Dg.prototype.DefaultInterpolation=L_;Dg.prototype.InterpolantFactoryMethodLinear=void 0;Dg.prototype.InterpolantFactoryMethodSmooth=void 0;class qd extends cc{}qd.prototype.ValueTypeName="vector";class Zh{constructor(e,t=-1,i,r=$k){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=To(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,o=i.length;a!==o;++a)t.push(SWe(i[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(cc.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],c=[];l.push((o+s-1)%s,o,(o+1)%s),c.push(0,1,0);const u=vWe(l);l=SV(l,1,u),c=SV(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),a.push(new Wv(".morphTargetInfluences["+t[o].name+"]",l,c).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let f=r[d];f||(r[d]=f=[]),f.push(c)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,f,h,p,m){if(h.length!==0){const v=[],g=[];tQ(h,v,g,p),v.length!==0&&m.push(new d(f,v,g))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const f=c[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const h={};let p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let m=0;m<f[p].morphTargets.length;m++)h[f[p].morphTargets[m]]=-1;for(const m in h){const v=[],g=[];for(let _=0;_!==f[p].morphTargets.length;++_){const y=f[p];v.push(y.time),g.push(y.morphTarget===m?1:0)}r.push(new Wv(".morphTargetInfluence["+m+"]",v,g))}l=h.length*a}else{const h=".bones["+t[d].name+"]";i(qd,h+".position",f,"pos",r),i(ru,h+".quaternion",f,"rot",r),i(qd,h+".scale",f,"scl",r)}}return r.length===0?null:new this(s,l,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function bWe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wv;case"vector":case"vector2":case"vector3":case"vector4":return qd;case"color":return iQ;case"quaternion":return ru;case"bool":case"boolean":return Pg;case"string":return Dg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function SWe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=bWe(n.type);if(n.times===void 0){const t=[],i=[];tQ(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Kv={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class rQ{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){o++,s===!1&&r.onStart!==void 0&&r.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,r.onProgress!==void 0&&r.onProgress(u,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=c.length;d<f;d+=2){const h=c[d],p=c[d+1];if(h.global&&(h.lastIndex=0),h.test(u))return p}return null}}}const sQ=new rQ;class ps{constructor(e){this.manager=e!==void 0?e:sQ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Sc={};class wWe extends Error{constructor(e,t){super(e),this.response=t}}class Os extends ps{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Kv.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Sc[e]!==void 0){Sc[e].push({onLoad:t,onProgress:i,onError:r});return}Sc[e]=[],Sc[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Sc[e],d=c.body.getReader(),f=c.headers.get("Content-Length"),h=f?parseInt(f):0,p=h!==0;let m=0;const v=new ReadableStream({start(g){_();function _(){d.read().then(({done:y,value:S})=>{if(y)g.close();else{m+=S.byteLength;const w=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:h});for(let x=0,T=u.length;x<T;x++){const C=u[x];C.onProgress&&C.onProgress(w)}g.enqueue(S),_()}})}}});return new Response(v)}else throw new wWe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,o));case"json":return c.json();default:if(o===void 0)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),f=d&&d[1]?d[1].toLowerCase():void 0,h=new TextDecoder(f);return c.arrayBuffer().then(p=>h.decode(p))}}}).then(c=>{Kv.add(e,c);const u=Sc[e];delete Sc[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onLoad&&h.onLoad(c)}}).catch(c=>{const u=Sc[e];if(u===void 0)throw this.manager.itemError(e),c;delete Sc[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onError&&h.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class xWe extends ps{constructor(e){super(e)}load(e,t,i,r){const s=this,a=[],o=new IGe,l=new Os(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(f){const h=s.parse(f,!0);a[d]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},c+=1,c===6&&(h.mipmapCount===1&&(o.minFilter=wr),o.image=a,o.format=h.format,o.needsUpdate=!0,t&&t(o))},i,r)}if(Array.isArray(e))for(let d=0,f=e.length;d<f;++d)u(d);else l.load(e,function(d){const f=s.parse(d,!0);if(f.isCubemap){const h=f.mipmaps.length/f.mipmapCount;for(let p=0;p<h;p++){a[p]={mipmaps:[]};for(let m=0;m<f.mipmapCount;m++)a[p].mipmaps.push(f.mipmaps[p*f.mipmapCount+m]),a[p].format=f.format,a[p].width=f.width,a[p].height=f.height}o.image=a}else o.image.width=f.width,o.image.height=f.height,o.mipmaps=f.mipmaps;f.mipmapCount===1&&(o.minFilter=wr),o.format=f.format,o.needsUpdate=!0,t&&t(o)},i,r);return o}}class CP extends ps{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Kv.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=O_("img");function l(){u(),Kv.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class CWe extends ps{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new xy,o=new Os(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){const c=s.parse(l);c&&(c.image!==void 0?a.image=c.image:c.data!==void 0&&(a.image.width=c.width,a.image.height=c.height,a.image.data=c.data),a.wrapS=c.wrapS!==void 0?c.wrapS:Nr,a.wrapT=c.wrapT!==void 0?c.wrapT:Nr,a.magFilter=c.magFilter!==void 0?c.magFilter:wr,a.minFilter=c.minFilter!==void 0?c.minFilter:wr,a.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.encoding!==void 0&&(a.encoding=c.encoding),c.flipY!==void 0&&(a.flipY=c.flipY),c.format!==void 0&&(a.format=c.format),c.type!==void 0&&(a.type=c.type),c.mipmaps!==void 0&&(a.mipmaps=c.mipmaps,a.minFilter=_u),c.mipmapCount===1&&(a.minFilter=wr),c.generateMipmaps!==void 0&&(a.generateMipmaps=c.generateMipmaps),a.needsUpdate=!0,t&&t(a,c))},i,r),a}}class qv extends ps{constructor(e){super(e)}load(e,t,i,r){const s=new ds,a=new CP(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class up extends ji{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new zt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class aQ extends up{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ji.DefaultUp),this.updateMatrix(),this.groundColor=new zt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const wV=new nn,xV=new ke,CV=new ke;class oO{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new St(512,512),this.map=null,this.mapPass=null,this.matrix=new nn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Xk,this._frameExtents=new St(1,1),this._viewportCount=1,this._viewports=[new wi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;xV.setFromMatrixPosition(e.matrixWorld),t.position.copy(xV),CV.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(CV),t.updateMatrixWorld(),wV.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wV),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class MWe extends oO{constructor(){super(new kr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=k_*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class XM extends up{constructor(e,t,i=0,r=Math.PI/3,s=0,a=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ji.DefaultUp),this.updateMatrix(),this.target=new ji,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.shadow=new MWe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const MV=new nn,E0=new ke,zE=new ke;class TWe extends oO{constructor(){super(new kr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new St(4,2),this._viewportCount=6,this._viewports=[new wi(2,1,1,1),new wi(0,1,1,1),new wi(3,1,1,1),new wi(1,1,1,1),new wi(3,0,1,1),new wi(1,0,1,1)],this._cubeDirections=[new ke(1,0,0),new ke(-1,0,0),new ke(0,0,1),new ke(0,0,-1),new ke(0,1,0),new ke(0,-1,0)],this._cubeUps=[new ke(0,1,0),new ke(0,1,0),new ke(0,1,0),new ke(0,1,0),new ke(0,0,1),new ke(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),E0.setFromMatrixPosition(e.matrixWorld),i.position.copy(E0),zE.copy(i.position),zE.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(zE),i.updateMatrixWorld(),r.makeTranslation(-E0.x,-E0.y,-E0.z),MV.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(MV)}}class Jh extends up{constructor(e,t,i=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new TWe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class AWe extends oO{constructor(){super(new Tg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Tb extends up{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ji.DefaultUp),this.updateMatrix(),this.target=new ji,this.shadow=new AWe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class YM extends up{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class EWe extends up{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class IWe{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ke)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(i*s)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*i*s),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class RWe extends up{constructor(e=new IWe,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class lO extends ps{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,a=new Os(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=lO.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new zt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new zt().setHex(a.value);break;case"v2":r.uniforms[s].value=new St().fromArray(a.value);break;case"v3":r.uniforms[s].value=new ke().fromArray(a.value);break;case"v4":r.uniforms[s].value=new wi().fromArray(a.value);break;case"m3":r.uniforms[s].value=new wo().fromArray(a.value);break;case"m4":r.uniforms[s].value=new nn().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.shading!==void 0&&(r.flatShading=e.shading===1),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new St().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new St().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:uWe,SpriteMaterial:eO,RawShaderMaterial:dWe,ShaderMaterial:iu,PointsMaterial:gh,MeshPhysicalMaterial:rf,MeshStandardMaterial:Rg,MeshPhongMaterial:Xc,MeshToonMaterial:fWe,MeshNormalMaterial:hWe,MeshLambertMaterial:aO,MeshDepthMaterial:zj,MeshDistanceMaterial:Uj,MeshBasicMaterial:al,MeshMatcapMaterial:pWe,LineDashedMaterial:mWe,LineBasicMaterial:dl,Material:Cr};return new t[e]}}class ks{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}let PWe=class extends si{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}};class DWe extends ps{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Os(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(h,p){if(t[p]!==void 0)return t[p];const v=h.interleavedBuffers[p],g=s(h,v.buffer),_=$m(v.type,g),y=new Jk(_,v.stride);return y.uuid=v.uuid,t[p]=y,y}function s(h,p){if(i[p]!==void 0)return i[p];const v=h.arrayBuffers[p],g=new Uint32Array(v).buffer;return i[p]=g,g}const a=e.isInstancedBufferGeometry?new PWe:new si,o=e.data.index;if(o!==void 0){const h=$m(o.type,o.array);a.setIndex(new lr(h,1))}const l=e.data.attributes;for(const h in l){const p=l[h];let m;if(p.isInterleavedBufferAttribute){const v=r(e.data,p.data);m=new jh(v,p.itemSize,p.offset,p.normalized)}else{const v=$m(p.type,p.array),g=p.isInstancedBufferAttribute?B_:lr;m=new g(v,p.itemSize,p.normalized)}p.name!==void 0&&(m.name=p.name),p.usage!==void 0&&m.setUsage(p.usage),p.updateRange!==void 0&&(m.updateRange.offset=p.updateRange.offset,m.updateRange.count=p.updateRange.count),a.setAttribute(h,m)}const c=e.data.morphAttributes;if(c)for(const h in c){const p=c[h],m=[];for(let v=0,g=p.length;v<g;v++){const _=p[v];let y;if(_.isInterleavedBufferAttribute){const S=r(e.data,_.data);y=new jh(S,_.itemSize,_.offset,_.normalized)}else{const S=$m(_.type,_.array);y=new lr(S,_.itemSize,_.normalized)}_.name!==void 0&&(y.name=_.name),m.push(y)}a.morphAttributes[h]=m}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let h=0,p=d.length;h!==p;++h){const m=d[h];a.addGroup(m.start,m.count,m.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const h=new ke;f.center!==void 0&&h.fromArray(f.center),a.boundingSphere=new cp(h,f.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class LWe extends ps{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?ks.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new Os(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?ks.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Os(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(c)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,s,l,o,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let d=!1;for(const f in a)if(a[f].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new sO().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new Eg().fromJSON(e[s],r);i[o.uuid]=o}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new DWe;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:l.type in bV?o=bV[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),o.isBufferGeometry===!0&&l.userData!==void 0&&(o.userData=l.userData),i[l.uuid]=o}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new lO;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];if(l.type==="MultiMaterial"){const c=[];for(let u=0;u<l.materials.length;u++){const d=l.materials[u];i[d.uuid]===void 0&&(i[d.uuid]=s.parse(d)),c.push(i[d.uuid])}r[l.uuid]=c}else i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Zh.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function a(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return a(u)}else return l.data?{data:$m(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new rQ(t);s=new CP(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],f=d.url;if(Array.isArray(f)){const h=[];for(let p=0,m=f.length;p<m;p++){const v=f[p],g=o(v);g!==null&&(g instanceof HTMLImageElement?h.push(g):h.push(new xy(g.data,g.width,g.height)))}r[d.uuid]=new Gm(h)}else{const h=o(d.url);r[d.uuid]=new Gm(h)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(l)}else return a.data?{data:$m(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new CP(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,f=c.length;d<f;d++){const h=c[d],p=await s(h);p!==null&&(p instanceof HTMLImageElement?u.push(p):u.push(new xy(p.data,p.width,p.height)))}i[l.uuid]=new Gm(u)}else{const u=await s(l.url);i[l.uuid]=new Gm(u)}}}return i}parseTextures(e,t){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],c=l.data;let u;Array.isArray(c)?(u=new qk,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new xy:u=new ds,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=o.uuid,o.name!==void 0&&(u.name=o.name),o.mapping!==void 0&&(u.mapping=i(o.mapping,kWe)),o.offset!==void 0&&u.offset.fromArray(o.offset),o.repeat!==void 0&&u.repeat.fromArray(o.repeat),o.center!==void 0&&u.center.fromArray(o.center),o.rotation!==void 0&&(u.rotation=o.rotation),o.wrap!==void 0&&(u.wrapS=i(o.wrap[0],TV),u.wrapT=i(o.wrap[1],TV)),o.format!==void 0&&(u.format=o.format),o.type!==void 0&&(u.type=o.type),o.encoding!==void 0&&(u.encoding=o.encoding),o.minFilter!==void 0&&(u.minFilter=i(o.minFilter,AV)),o.magFilter!==void 0&&(u.magFilter=i(o.magFilter,AV)),o.anisotropy!==void 0&&(u.anisotropy=o.anisotropy),o.flipY!==void 0&&(u.flipY=o.flipY),o.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(u.unpackAlignment=o.unpackAlignment),o.userData!==void 0&&(u.userData=o.userData),r[o.uuid]=u}return r}parseObject(e,t,i,r,s){let a;function o(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const h=[];for(let p=0,m=f.length;p<m;p++){const v=f[p];i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),h.push(i[v])}return h}return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),i[f]}}function c(f){return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),r[f]}let u,d;switch(e.type){case"Scene":a=new Zk,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new zt(e.background):a.background=c(e.background)),e.environment!==void 0&&(a.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new Qk(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new jk(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new kr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Tg(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new YM(e.color,e.intensity);break;case"DirectionalLight":a=new Tb(e.color,e.intensity);break;case"PointLight":a=new Jh(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new EWe(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new XM(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new aQ(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new RWe().fromJSON(e);break;case"SkinnedMesh":u=o(e.geometry),d=l(e.material),a=new KM(u,d),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":u=o(e.geometry),d=l(e.material),a=new Br(u,d);break;case"InstancedMesh":u=o(e.geometry),d=l(e.material);const f=e.count,h=e.instanceMatrix,p=e.instanceColor;a=new EGe(u,d,f),a.instanceMatrix=new B_(new Float32Array(h.array),16),p!==void 0&&(a.instanceColor=new B_(new Float32Array(p.array),p.itemSize));break;case"LOD":a=new MGe;break;case"Line":a=new Ig(o(e.geometry),l(e.material));break;case"LineLoop":a=new $j(o(e.geometry),l(e.material));break;case"LineSegments":a=new Qh(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new Cy(o(e.geometry),l(e.material));break;case"Sprite":a=new G1(l(e.material));break;case"Group":a=new pa;break;case"Bone":a=new Gv;break;default:a=new ji}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let h=0;h<f.length;h++)a.add(this.parseObject(f[h],t,i,r,s))}if(e.animations!==void 0){const f=e.animations;for(let h=0;h<f.length;h++){const p=f[h];a.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const f=e.levels;for(let h=0;h<f.length;h++){const p=f[h],m=a.getObjectByProperty("uuid",p.object);m!==void 0&&a.addLevel(m,p.distance)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const kWe={UVMapping:Hk,CubeReflectionMapping:Kh,CubeRefractionMapping:qh,EquirectangularReflectionMapping:R_,EquirectangularRefractionMapping:iC,CubeUVReflectionMapping:Cb},TV={RepeatWrapping:ha,ClampToEdgeWrapping:Nr,MirroredRepeatWrapping:P_},AV={NearestFilter:qr,NearestMipmapNearestFilter:rC,NearestMipmapLinearFilter:sC,LinearFilter:wr,LinearMipmapNearestFilter:Vk,LinearMipmapLinearFilter:_u};class OWe extends ps{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Kv.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Kv.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class NWe{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=EV(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=EV();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function EV(){return(typeof performance>"u"?Date:performance).now()}class BWe{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)i[s+o]=i[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(i,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,a=r;s!==a;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){as.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const a=this._workIndex*s;as.multiplyQuaternionsFlat(e,a,e,t,e,i),as.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,s){const a=1-r;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[i+o]*r}}_lerpAdditive(e,t,i,r,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[i+a]*r}}}const cO="\\[\\]\\.:\\/",FWe=new RegExp("["+cO+"]","g"),uO="[^"+cO+"]",zWe="[^"+cO.replace("\\.","")+"]",UWe=/((?:WC+[\/:])*)/.source.replace("WC",uO),HWe=/(WCOD+)?/.source.replace("WCOD",zWe),VWe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",uO),$We=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",uO),GWe=new RegExp("^"+UWe+HWe+VWe+$We+"$"),WWe=["material","materials","bones"];class KWe{constructor(e,t,i){const r=i||ci.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class ci{constructor(e,t,i){this.path=t,this.parsedPath=i||ci.parseTrackName(t),this.node=ci.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new ci.Composite(e,t,i):new ci(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(FWe,"")}static parseTrackName(e){const t=GWe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);WWe.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=i(o.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=ci.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[r];if(a===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ci.Composite=KWe;ci.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ci.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ci.prototype.GetterByBindingType=[ci.prototype._getValue_direct,ci.prototype._getValue_array,ci.prototype._getValue_arrayElement,ci.prototype._getValue_toArray];ci.prototype.SetterByBindingTypeAndVersioning=[[ci.prototype._setValue_direct,ci.prototype._setValue_direct_setNeedsUpdate,ci.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ci.prototype._setValue_array,ci.prototype._setValue_array_setNeedsUpdate,ci.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ci.prototype._setValue_arrayElement,ci.prototype._setValue_arrayElement_setNeedsUpdate,ci.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ci.prototype._setValue_fromArray,ci.prototype._setValue_fromArray_setNeedsUpdate,ci.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class qWe{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:Hm,endingEnd:Hm};for(let c=0;c!==a;++c){const u=s[c].createInterpolant(null);o[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=a5e,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/a,c[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;if(l<0||i===0)return;this._startTime=null,t=i*l}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case l5e:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(a),c[u].accumulateAdditive(o);break;case $k:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(a),c[u].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===o5e;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===s5e){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Vm,r.endingEnd=Vm):(e?r.endingStart=this.zeroSlopeAtStart?Vm:Hm:r.endingStart=aC,t?r.endingEnd=this.zeroSlopeAtEnd?Vm:Hm:r.endingEnd=aC)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=i,this}}const XWe=new Float32Array(1);class UE extends nf{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const f=r[d],h=f.name;let p=u[h];if(p!==void 0)++p.referenceCount,a[d]=p;else{if(p=a[d],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,h));continue}const m=t&&t._propertyBindings[d].binding.parsedPath;p=new BWe(ci.create(i,h,m),f.ValueTypeName,f.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,h),a[d]=p}o[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=o.actionByRoot,f=(e._localRoot||this._root).uuid;delete d[f],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,o=a[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new nQ(new Float32Array(2),new Float32Array(2),1,XWe),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?Zh.findByName(r,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let c=null;if(i===void 0&&(a!==null?i=a.blendMode:i=$k),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const u=new qWe(this,a,t,i);return this._bindAction(u,c),this._addInactiveAction(u,o,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Zh.findByName(i,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const c=a[o];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const o=i[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}let YWe=class{constructor(e,t,i=0,r=1/0){this.ray=new GM(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Wk,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return MP(e,this,i,t),i.sort(IV),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)MP(e[r],this,i,t);return i.sort(IV),i}};function IV(n,e){return n.distance-e.distance}function MP(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,a=r.length;s<a;s++)MP(r[s],e,t,!0)}}let RV=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Lr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};class jWe extends Qh{constructor(e=10,t=10,i=4473924,r=8947848){i=new zt(i),r=new zt(r);const s=t/2,a=e/t,o=e/2,l=[],c=[];for(let f=0,h=0,p=-o;f<=t;f++,p+=a){l.push(-o,0,p,o,0,p),l.push(p,0,-o,p,0,o);const m=f===s?i:r;m.toArray(c,h),h+=3,m.toArray(c,h),h+=3,m.toArray(c,h),h+=3,m.toArray(c,h),h+=3}const u=new si;u.setAttribute("position",new qt(l,3)),u.setAttribute("color",new qt(c,3));const d=new dl({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}}class QWe extends Qh{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new si;r.setAttribute("position",new qt(t,3)),r.setAttribute("color",new qt(i,3));const s=new dl({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new zt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Uk}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Uk);const PV={type:"change"},HE={type:"start"},DV={type:"end"};let ZWe=class extends nf{constructor(e,t){super(),t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new ke,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:kp.ROTATE,MIDDLE:kp.DOLLY,RIGHT:kp.PAN},this.touches={ONE:Op.ROTATE,TWO:Op.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(he){he.addEventListener("keydown",ne),this._domElementKeyEvents=he},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(PV),i.update(),s=r.NONE},this.update=function(){const he=new ke,Ye=new as().setFromUnitVectors(e.up,new ke(0,1,0)),Ke=Ye.clone().invert(),V=new ke,re=new as,te=2*Math.PI;return function(){const se=i.object.position;he.copy(se).sub(i.target),he.applyQuaternion(Ye),o.setFromVector3(he),i.autoRotate&&s===r.NONE&&M(T()),i.enableDamping?(o.theta+=l.theta*i.dampingFactor,o.phi+=l.phi*i.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let de=i.minAzimuthAngle,qe=i.maxAzimuthAngle;return isFinite(de)&&isFinite(qe)&&(de<-Math.PI?de+=te:de>Math.PI&&(de-=te),qe<-Math.PI?qe+=te:qe>Math.PI&&(qe-=te),de<=qe?o.theta=Math.max(de,Math.min(qe,o.theta)):o.theta=o.theta>(de+qe)/2?Math.max(de,o.theta):Math.min(qe,o.theta)),o.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,o.phi)),o.makeSafe(),o.radius*=c,o.radius=Math.max(i.minDistance,Math.min(i.maxDistance,o.radius)),i.enableDamping===!0?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),he.setFromSpherical(o),he.applyQuaternion(Ke),se.copy(i.target).add(he),i.object.lookAt(i.target),i.enableDamping===!0?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,d||V.distanceToSquared(i.object.position)>a||8*(1-re.dot(i.object.quaternion))>a?(i.dispatchEvent(PV),V.copy(i.object.position),re.copy(i.object.quaternion),d=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",ae),i.domElement.removeEventListener("pointerdown",j),i.domElement.removeEventListener("pointercancel",De),i.domElement.removeEventListener("wheel",Fe),i.domElement.removeEventListener("pointermove",Pe),i.domElement.removeEventListener("pointerup",we),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",ne)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const a=1e-6,o=new RV,l=new RV;let c=1;const u=new ke;let d=!1;const f=new St,h=new St,p=new St,m=new St,v=new St,g=new St,_=new St,y=new St,S=new St,w=[],x={};function T(){return 2*Math.PI/60/60*i.autoRotateSpeed}function C(){return Math.pow(.95,i.zoomSpeed)}function M(he){l.theta-=he}function A(he){l.phi-=he}const E=function(){const he=new ke;return function(Ke,V){he.setFromMatrixColumn(V,0),he.multiplyScalar(-Ke),u.add(he)}}(),I=function(){const he=new ke;return function(Ke,V){i.screenSpacePanning===!0?he.setFromMatrixColumn(V,1):(he.setFromMatrixColumn(V,0),he.crossVectors(i.object.up,he)),he.multiplyScalar(Ke),u.add(he)}}(),P=function(){const he=new ke;return function(Ke,V){const re=i.domElement;if(i.object.isPerspectiveCamera){const te=i.object.position;he.copy(te).sub(i.target);let pe=he.length();pe*=Math.tan(i.object.fov/2*Math.PI/180),E(2*Ke*pe/re.clientHeight,i.object.matrix),I(2*V*pe/re.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(E(Ke*(i.object.right-i.object.left)/i.object.zoom/re.clientWidth,i.object.matrix),I(V*(i.object.top-i.object.bottom)/i.object.zoom/re.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function D(he){i.object.isPerspectiveCamera?c/=he:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*he)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function L(he){i.object.isPerspectiveCamera?c*=he:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/he)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function R(he){f.set(he.clientX,he.clientY)}function B(he){_.set(he.clientX,he.clientY)}function k(he){m.set(he.clientX,he.clientY)}function O(he){h.set(he.clientX,he.clientY),p.subVectors(h,f).multiplyScalar(i.rotateSpeed);const Ye=i.domElement;M(2*Math.PI*p.x/Ye.clientHeight),A(2*Math.PI*p.y/Ye.clientHeight),f.copy(h),i.update()}function U(he){y.set(he.clientX,he.clientY),S.subVectors(y,_),S.y>0?D(C()):S.y<0&&L(C()),_.copy(y),i.update()}function G(he){v.set(he.clientX,he.clientY),g.subVectors(v,m).multiplyScalar(i.panSpeed),P(g.x,g.y),m.copy(v),i.update()}function q(he){he.deltaY<0?L(C()):he.deltaY>0&&D(C()),i.update()}function W(he){let Ye=!1;switch(he.code){case i.keys.UP:P(0,i.keyPanSpeed),Ye=!0;break;case i.keys.BOTTOM:P(0,-i.keyPanSpeed),Ye=!0;break;case i.keys.LEFT:P(i.keyPanSpeed,0),Ye=!0;break;case i.keys.RIGHT:P(-i.keyPanSpeed,0),Ye=!0;break}Ye&&(he.preventDefault(),i.update())}function Y(){if(w.length===1)f.set(w[0].pageX,w[0].pageY);else{const he=.5*(w[0].pageX+w[1].pageX),Ye=.5*(w[0].pageY+w[1].pageY);f.set(he,Ye)}}function J(){if(w.length===1)m.set(w[0].pageX,w[0].pageY);else{const he=.5*(w[0].pageX+w[1].pageX),Ye=.5*(w[0].pageY+w[1].pageY);m.set(he,Ye)}}function Z(){const he=w[0].pageX-w[1].pageX,Ye=w[0].pageY-w[1].pageY,Ke=Math.sqrt(he*he+Ye*Ye);_.set(0,Ke)}function ee(){i.enableZoom&&Z(),i.enablePan&&J()}function me(){i.enableZoom&&Z(),i.enableRotate&&Y()}function ye(he){if(w.length==1)h.set(he.pageX,he.pageY);else{const Ke=je(he),V=.5*(he.pageX+Ke.x),re=.5*(he.pageY+Ke.y);h.set(V,re)}p.subVectors(h,f).multiplyScalar(i.rotateSpeed);const Ye=i.domElement;M(2*Math.PI*p.x/Ye.clientHeight),A(2*Math.PI*p.y/Ye.clientHeight),f.copy(h)}function Te(he){if(w.length===1)v.set(he.pageX,he.pageY);else{const Ye=je(he),Ke=.5*(he.pageX+Ye.x),V=.5*(he.pageY+Ye.y);v.set(Ke,V)}g.subVectors(v,m).multiplyScalar(i.panSpeed),P(g.x,g.y),m.copy(v)}function Ee(he){const Ye=je(he),Ke=he.pageX-Ye.x,V=he.pageY-Ye.y,re=Math.sqrt(Ke*Ke+V*V);y.set(0,re),S.set(0,Math.pow(y.y/_.y,i.zoomSpeed)),D(S.y),_.copy(y)}function H(he){i.enableZoom&&Ee(he),i.enablePan&&Te(he)}function Q(he){i.enableZoom&&Ee(he),i.enableRotate&&ye(he)}function j(he){i.enabled!==!1&&(w.length===0&&(i.domElement.setPointerCapture(he.pointerId),i.domElement.addEventListener("pointermove",Pe),i.domElement.addEventListener("pointerup",we)),xe(he),he.pointerType==="touch"?z(he):Me(he))}function Pe(he){i.enabled!==!1&&(he.pointerType==="touch"?K(he):Ae(he))}function we(he){Le(he),w.length===0&&(i.domElement.releasePointerCapture(he.pointerId),i.domElement.removeEventListener("pointermove",Pe),i.domElement.removeEventListener("pointerup",we)),i.dispatchEvent(DV),s=r.NONE}function De(he){Le(he)}function Me(he){let Ye;switch(he.button){case 0:Ye=i.mouseButtons.LEFT;break;case 1:Ye=i.mouseButtons.MIDDLE;break;case 2:Ye=i.mouseButtons.RIGHT;break;default:Ye=-1}switch(Ye){case kp.DOLLY:if(i.enableZoom===!1)return;B(he),s=r.DOLLY;break;case kp.ROTATE:if(he.ctrlKey||he.metaKey||he.shiftKey){if(i.enablePan===!1)return;k(he),s=r.PAN}else{if(i.enableRotate===!1)return;R(he),s=r.ROTATE}break;case kp.PAN:if(he.ctrlKey||he.metaKey||he.shiftKey){if(i.enableRotate===!1)return;R(he),s=r.ROTATE}else{if(i.enablePan===!1)return;k(he),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(HE)}function Ae(he){switch(s){case r.ROTATE:if(i.enableRotate===!1)return;O(he);break;case r.DOLLY:if(i.enableZoom===!1)return;U(he);break;case r.PAN:if(i.enablePan===!1)return;G(he);break}}function Fe(he){i.enabled===!1||i.enableZoom===!1||s!==r.NONE||(he.preventDefault(),i.dispatchEvent(HE),q(he),i.dispatchEvent(DV))}function ne(he){i.enabled===!1||i.enablePan===!1||W(he)}function z(he){switch(Xe(he),w.length){case 1:switch(i.touches.ONE){case Op.ROTATE:if(i.enableRotate===!1)return;Y(),s=r.TOUCH_ROTATE;break;case Op.PAN:if(i.enablePan===!1)return;J(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case Op.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ee(),s=r.TOUCH_DOLLY_PAN;break;case Op.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;me(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(HE)}function K(he){switch(Xe(he),s){case r.TOUCH_ROTATE:if(i.enableRotate===!1)return;ye(he),i.update();break;case r.TOUCH_PAN:if(i.enablePan===!1)return;Te(he),i.update();break;case r.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;H(he),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Q(he),i.update();break;default:s=r.NONE}}function ae(he){i.enabled!==!1&&he.preventDefault()}function xe(he){w.push(he)}function Le(he){delete x[he.pointerId];for(let Ye=0;Ye<w.length;Ye++)if(w[Ye].pointerId==he.pointerId){w.splice(Ye,1);return}}function Xe(he){let Ye=x[he.pointerId];Ye===void 0&&(Ye=new St,x[he.pointerId]=Ye),Ye.set(he.pageX,he.pageY)}function je(he){const Ye=he.pointerId===w[0].pointerId?w[1]:w[0];return x[Ye.pointerId]}i.domElement.addEventListener("contextmenu",ae),i.domElement.addEventListener("pointerdown",j),i.domElement.addEventListener("pointercancel",De),i.domElement.addEventListener("wheel",Fe,{passive:!1}),this.update()}};var Ay=function(){var n=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(u){u.preventDefault(),i(++n%e.children.length)},!1);function t(u){return e.appendChild(u.dom),u}function i(u){for(var d=0;d<e.children.length;d++)e.children[d].style.display=d===u?"block":"none";n=u}var r=(performance||Date).now(),s=r,a=0,o=t(new Ay.Panel("FPS","#0ff","#002")),l=t(new Ay.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new Ay.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){a++;var u=(performance||Date).now();if(l.update(u-r,200),u>=s+1e3&&(o.update(a*1e3/(u-s),100),s=u,a=0,c)){var d=performance.memory;c.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return u},update:function(){r=this.end()},domElement:e,setMode:i}};Ay.Panel=function(n,e,t){var i=1/0,r=0,s=Math.round,a=s(window.devicePixelRatio||1),o=80*a,l=48*a,c=3*a,u=2*a,d=3*a,f=15*a,h=74*a,p=30*a,m=document.createElement("canvas");m.width=o,m.height=l,m.style.cssText="width:80px;height:48px";var v=m.getContext("2d");return v.font="bold "+9*a+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=t,v.fillRect(0,0,o,l),v.fillStyle=e,v.fillText(n,c,u),v.fillRect(d,f,h,p),v.fillStyle=t,v.globalAlpha=.9,v.fillRect(d,f,h,p),{dom:m,update:function(g,_){i=Math.min(i,g),r=Math.max(r,g),v.fillStyle=t,v.globalAlpha=1,v.fillRect(0,0,o,f),v.fillStyle=e,v.fillText(s(g)+" "+n+" ("+s(i)+"-"+s(r)+")",c,u),v.drawImage(m,d+a,f,h-a,p,d,f,h-a,p),v.fillRect(d+h-a,f,a,p),v.fillStyle=t,v.globalAlpha=.9,v.fillRect(d+h-a,f,a,s((1-g/_)*p))}}};/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var LV={},TP=function(n){return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},oQ=function(n){return new Worker(n)};try{URL.revokeObjectURL(TP(""))}catch{TP=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},oQ=function(e){return new Worker(e,{type:"module"})}}var JWe=function(n,e,t,i,r){var s=oQ(LV[e]||(LV[e]=TP(n)));return s.onerror=function(a){return r(a.error,null)},s.onmessage=function(a){return r(null,a.data)},s.postMessage(t,i),s},li=Uint8Array,Yr=Uint16Array,su=Uint32Array,Lg=new li([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kg=new li([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),V_=new li([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lQ=function(n,e){for(var t=new Yr(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new su(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},cQ=lQ(Lg,2),dO=cQ[0],bC=cQ[1];dO[28]=258,bC[258]=28;var uQ=lQ(kg,0),dQ=uQ[0],AP=uQ[1],$_=new Yr(32768);for(var Wi=0;Wi<32768;++Wi){var Fu=(Wi&43690)>>>1|(Wi&21845)<<1;Fu=(Fu&52428)>>>2|(Fu&13107)<<2,Fu=(Fu&61680)>>>4|(Fu&3855)<<4,$_[Wi]=((Fu&65280)>>>8|(Fu&255)<<8)>>>1}var Ao=function(n,e,t){for(var i=n.length,r=0,s=new Yr(e);r<i;++r)++s[n[r]-1];var a=new Yr(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var o;if(t){o=new Yr(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var c=r<<4|n[r],u=e-n[r],d=a[n[r]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)o[$_[d]>>>l]=c}else for(o=new Yr(i),r=0;r<i;++r)n[r]&&(o[r]=$_[a[n[r]-1]++]>>>15-n[r]);return o},au=new li(288);for(var Wi=0;Wi<144;++Wi)au[Wi]=8;for(var Wi=144;Wi<256;++Wi)au[Wi]=9;for(var Wi=256;Wi<280;++Wi)au[Wi]=7;for(var Wi=280;Wi<288;++Wi)au[Wi]=8;var Xv=new li(32);for(var Wi=0;Wi<32;++Wi)Xv[Wi]=5;var fQ=Ao(au,9,0),hQ=Ao(au,9,1),pQ=Ao(Xv,5,0),mQ=Ao(Xv,5,1),W1=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},ro=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},K1=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Ab=function(n){return(n/8|0)+(n&7&&1)},Eo=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof Yr?Yr:n instanceof su?su:li)(t-e);return i.set(n.subarray(e,t)),i},Eb=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new li(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new li(i*3));var a=function(Z){var ee=e.length;if(Z>ee){var me=new li(Math.max(ee*2,Z));me.set(e),e=me}},o=t.f||0,l=t.p||0,c=t.b||0,u=t.l,d=t.d,f=t.m,h=t.n,p=i*8;do{if(!u){t.f=o=ro(n,l,1);var m=ro(n,l+1,3);if(l+=3,m)if(m==1)u=hQ,d=mQ,f=9,h=5;else if(m==2){var y=ro(n,l,31)+257,S=ro(n,l+10,15)+4,w=y+ro(n,l+5,31)+1;l+=14;for(var x=new li(w),T=new li(19),C=0;C<S;++C)T[V_[C]]=ro(n,l+C*3,7);l+=S*3;for(var M=W1(T),A=(1<<M)-1,E=Ao(T,M,1),C=0;C<w;){var I=E[ro(n,l,A)];l+=I&15;var v=I>>>4;if(v<16)x[C++]=v;else{var P=0,D=0;for(v==16?(D=3+ro(n,l,3),l+=2,P=x[C-1]):v==17?(D=3+ro(n,l,7),l+=3):v==18&&(D=11+ro(n,l,127),l+=7);D--;)x[C++]=P}}var L=x.subarray(0,y),R=x.subarray(y);f=W1(L),h=W1(R),u=Ao(L,f,1),d=Ao(R,h,1)}else throw"invalid block type";else{var v=Ab(l)+4,g=n[v-4]|n[v-3]<<8,_=v+g;if(_>i){if(s)throw"unexpected EOF";break}r&&a(c+g),e.set(n.subarray(v,_),c),t.b=c+=g,t.p=l=_*8;continue}if(l>p){if(s)throw"unexpected EOF";break}}r&&a(c+131072);for(var B=(1<<f)-1,k=(1<<h)-1,O=l;;O=l){var P=u[K1(n,l)&B],U=P>>>4;if(l+=P&15,l>p){if(s)throw"unexpected EOF";break}if(!P)throw"invalid length/literal";if(U<256)e[c++]=U;else if(U==256){O=l,u=null;break}else{var G=U-254;if(U>264){var C=U-257,q=Lg[C];G=ro(n,l,(1<<q)-1)+dO[C],l+=q}var W=d[K1(n,l)&k],Y=W>>>4;if(!W)throw"invalid distance";l+=W&15;var R=dQ[Y];if(Y>3){var q=kg[Y];R+=K1(n,l)&(1<<q)-1,l+=q}if(l>p){if(s)throw"unexpected EOF";break}r&&a(c+131072);for(var J=c+G;c<J;c+=4)e[c]=e[c-R],e[c+1]=e[c+1-R],e[c+2]=e[c+2-R],e[c+3]=e[c+3-R];c=J}}t.l=u,t.p=O,t.b=c,u&&(o=1,t.m=f,t.d=d,t.n=h)}while(!o);return c==e.length?e:Eo(e,0,c)},Tl=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>>8},Im=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>>8,n[i+2]|=t>>>16},q1=function(n,e){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var r=t.length,s=t.slice();if(!r)return[$c,0];if(r==1){var a=new li(t[0].s+1);return a[t[0].s]=1,[a,1]}t.sort(function(w,x){return w.f-x.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],c=0,u=1,d=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};u!=r-1;)o=t[t[c].f<t[d].f?c++:d++],l=t[c!=u&&t[c].f<t[d].f?c++:d++],t[u++]={s:-1,f:o.f+l.f,l:o,r:l};for(var f=s[0].s,i=1;i<r;++i)s[i].s>f&&(f=s[i].s);var h=new Yr(f+1),p=SC(t[u-1],h,0);if(p>e){var i=0,m=0,v=p-e,g=1<<v;for(s.sort(function(x,T){return h[T.s]-h[x.s]||x.f-T.f});i<r;++i){var _=s[i].s;if(h[_]>e)m+=g-(1<<p-h[_]),h[_]=e;else break}for(m>>>=v;m>0;){var y=s[i].s;h[y]<e?m-=1<<e-h[y]++-1:++i}for(;i>=0&&m;--i){var S=s[i].s;h[S]==e&&(--h[S],++m)}p=e}return[new li(h),p]},SC=function(n,e,t){return n.s==-1?Math.max(SC(n.l,e,t+1),SC(n.r,e,t+1)):e[n.s]=t},EP=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Yr(++e),i=0,r=n[0],s=1,a=function(l){t[i++]=l},o=1;o<=e;++o)if(n[o]==r&&o!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(r),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(r);s=1,r=n[o]}return[t.subarray(0,i),e]},Rm=function(n,e){for(var t=0,i=0;i<e.length;++i)t+=n[i]*e[i];return t},Ey=function(n,e,t){var i=t.length,r=Ab(e+2);n[r]=i&255,n[r+1]=i>>>8,n[r+2]=n[r]^255,n[r+3]=n[r+1]^255;for(var s=0;s<i;++s)n[r+s+4]=t[s];return(r+4+i)*8},IP=function(n,e,t,i,r,s,a,o,l,c,u){Tl(e,u++,t),++r[256];for(var d=q1(r,15),f=d[0],h=d[1],p=q1(s,15),m=p[0],v=p[1],g=EP(f),_=g[0],y=g[1],S=EP(m),w=S[0],x=S[1],T=new Yr(19),C=0;C<_.length;++C)T[_[C]&31]++;for(var C=0;C<w.length;++C)T[w[C]&31]++;for(var M=q1(T,7),A=M[0],E=M[1],I=19;I>4&&!A[V_[I-1]];--I);var P=c+5<<3,D=Rm(r,au)+Rm(s,Xv)+a,L=Rm(r,f)+Rm(s,m)+a+14+3*I+Rm(T,A)+(2*T[16]+3*T[17]+7*T[18]);if(P<=D&&P<=L)return Ey(e,u,n.subarray(l,l+c));var R,B,k,O;if(Tl(e,u,1+(L<D)),u+=2,L<D){R=Ao(f,h,0),B=f,k=Ao(m,v,0),O=m;var U=Ao(A,E,0);Tl(e,u,y-257),Tl(e,u+5,x-1),Tl(e,u+10,I-4),u+=14;for(var C=0;C<I;++C)Tl(e,u+3*C,A[V_[C]]);u+=3*I;for(var G=[_,w],q=0;q<2;++q)for(var W=G[q],C=0;C<W.length;++C){var Y=W[C]&31;Tl(e,u,U[Y]),u+=A[Y],Y>15&&(Tl(e,u,W[C]>>>5&127),u+=W[C]>>>12)}}else R=fQ,B=au,k=pQ,O=Xv;for(var C=0;C<o;++C)if(i[C]>255){var Y=i[C]>>>18&31;Im(e,u,R[Y+257]),u+=B[Y+257],Y>7&&(Tl(e,u,i[C]>>>23&31),u+=Lg[Y]);var J=i[C]&31;Im(e,u,k[J]),u+=O[J],J>3&&(Im(e,u,i[C]>>>5&8191),u+=kg[J])}else Im(e,u,R[i[C]]),u+=B[i[C]];return Im(e,u,R[256]),u+B[256]},vQ=new su([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),$c=new li(0),gQ=function(n,e,t,i,r,s){var a=n.length,o=new li(i+a+5*(1+Math.ceil(a/7e3))+r),l=o.subarray(i,o.length-r),c=0;if(!e||a<8)for(var u=0;u<=a;u+=65535){var d=u+65535;d<a?c=Ey(l,c,n.subarray(u,d)):(l[u]=s,c=Ey(l,c,n.subarray(u,a)))}else{for(var f=vQ[e-1],h=f>>>13,p=f&8191,m=(1<<t)-1,v=new Yr(32768),g=new Yr(m+1),_=Math.ceil(t/3),y=2*_,S=function(j){return(n[j]^n[j+1]<<_^n[j+2]<<y)&m},w=new su(25e3),x=new Yr(288),T=new Yr(32),C=0,M=0,u=0,A=0,E=0,I=0;u<a;++u){var P=S(u),D=u&32767,L=g[P];if(v[D]=L,g[P]=D,E<=u){var R=a-u;if((C>7e3||A>24576)&&R>423){c=IP(n,l,0,w,x,T,M,A,I,u-I,c),A=C=M=0,I=u;for(var B=0;B<286;++B)x[B]=0;for(var B=0;B<30;++B)T[B]=0}var k=2,O=0,U=p,G=D-L&32767;if(R>2&&P==S(u-G))for(var q=Math.min(h,R)-1,W=Math.min(32767,u),Y=Math.min(258,R);G<=W&&--U&&D!=L;){if(n[u+k]==n[u+k-G]){for(var J=0;J<Y&&n[u+J]==n[u+J-G];++J);if(J>k){if(k=J,O=G,J>q)break;for(var Z=Math.min(G,J-2),ee=0,B=0;B<Z;++B){var me=u-G+B+32768&32767,ye=v[me],Te=me-ye+32768&32767;Te>ee&&(ee=Te,L=me)}}}D=L,L=v[D],G+=D-L+32768&32767}if(O){w[A++]=268435456|bC[k]<<18|AP[O];var Ee=bC[k]&31,H=AP[O]&31;M+=Lg[Ee]+kg[H],++x[257+Ee],++T[H],E=u+k,++C}else w[A++]=n[u],++x[n[u]]}}c=IP(n,l,s,w,x,T,M,A,I,u-I,c),!s&&c&7&&(c=Ey(l,c+1,$c))}return Eo(o,0,i+Ab(c)+r)},yQ=function(){for(var n=new su(256),e=0;e<256;++e){for(var t=e,i=9;--i;)t=(t&1&&3988292384)^t>>>1;n[e]=t}return n}(),Og=function(){var n=-1;return{p:function(e){for(var t=n,i=0;i<e.length;++i)t=yQ[t&255^e[i]]^t>>>8;n=t},d:function(){return~n}}},fO=function(){var n=1,e=0;return{p:function(t){for(var i=n,r=e,s=t.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)r+=i+=t[a];i=(i&65535)+15*(i>>16),r=(r&65535)+15*(r>>16)}n=i,e=r},d:function(){return n%=65521,e%=65521,(n&255)<<24|n>>>8<<16|(e&255)<<8|e>>>8}}},dp=function(n,e,t,i,r){return gQ(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,t,i,!r)},Ib=function(n,e){var t={};for(var i in n)t[i]=n[i];for(var i in e)t[i]=e[i];return t},kV=function(n,e,t){for(var i=n(),r=n.toString(),s=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/ /g,"").split(","),a=0;a<i.length;++a){var o=i[a],l=s[a];if(typeof o=="function"){e+=";"+l+"=";var c=o.toString();if(o.prototype)if(c.indexOf("[native code]")!=-1){var u=c.indexOf(" ",8)+1;e+=c.slice(u,c.indexOf("(",u))}else{e+=c;for(var d in o.prototype)e+=";"+l+".prototype."+d+"="+o.prototype[d].toString()}else e+=c}else t[l]=o}return[e,t]},xw=[],e9e=function(n){var e=[];for(var t in n)(n[t]instanceof li||n[t]instanceof Yr||n[t]instanceof su)&&e.push((n[t]=new n[t].constructor(n[t])).buffer);return e},_Q=function(n,e,t,i){var r;if(!xw[t]){for(var s="",a={},o=n.length-1,l=0;l<o;++l)r=kV(n[l],s,a),s=r[0],a=r[1];xw[t]=kV(n[o],s,a)}var c=Ib({},xw[t][1]);return JWe(xw[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,c,e9e(c),i)},Ng=function(){return[li,Yr,su,Lg,kg,V_,dO,dQ,hQ,mQ,$_,Ao,W1,ro,K1,Ab,Eo,Eb,Ug,sf,hO]},Bg=function(){return[li,Yr,su,Lg,kg,V_,bC,AP,fQ,au,pQ,Xv,$_,vQ,$c,Ao,Tl,Im,q1,SC,EP,Rm,Ey,IP,Ab,Eo,gQ,dp,Rb,sf]},bQ=function(){return[pO,vO,Mi,Og,yQ]},SQ=function(){return[mO,CQ]},wQ=function(){return[gO,Mi,fO]},xQ=function(){return[MQ]},sf=function(n){return postMessage(n,[n.buffer])},hO=function(n){return n&&n.size&&new li(n.size)},Fg=function(n,e,t,i,r,s){var a=_Q(t,i,r,function(o,l){a.terminate(),s(o,l)});return a.postMessage([n,e],e.consume?[n.buffer]:[]),function(){a.terminate()}},No=function(n){return n.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(e){return n.push(e.data[0],e.data[1])}},zg=function(n,e,t,i,r){var s,a=_Q(n,i,r,function(o,l){o?(a.terminate(),e.ondata.call(e,o)):(l[1]&&a.terminate(),e.ondata.call(e,o,l[0],l[1]))});a.postMessage(t),e.push=function(o,l){if(s)throw"stream finished";if(!e.ondata)throw"no stream handler";a.postMessage([o,s=l],[o.buffer])},e.terminate=function(){a.terminate()}},qs=function(n,e){return n[e]|n[e+1]<<8},pr=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},VE=function(n,e){return pr(n,e)+pr(n,e+4)*4294967296},Mi=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},pO=function(n,e){var t=e.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=e.level<2?4:e.level==9?2:0,n[9]=3,e.mtime!=0&&Mi(n,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){n[3]=8;for(var i=0;i<=t.length;++i)n[i+10]=t.charCodeAt(i)}},mO=function(n){if(n[0]!=31||n[1]!=139||n[2]!=8)throw"invalid gzip data";var e=n[3],t=10;e&4&&(t+=n[10]|(n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},CQ=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},vO=function(n){return 10+(n.filename&&n.filename.length+1||0)},gO=function(n,e){var t=e.level,i=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=i<<6|(i?32-2*i:1)},MQ=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function yO(n,e){return!e&&typeof n=="function"&&(e=n,n={}),this.ondata=e,n}var Jl=function(){function n(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return n.prototype.p=function(e,t){this.ondata(dp(e,this.o,0,0,!t),t)},n.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},n}(),TQ=function(){function n(e,t){zg([Bg,function(){return[No,Jl]}],this,yO.call(this,e,t),function(i){var r=new Jl(i.data);onmessage=No(r)},6)}return n}();function AQ(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Fg(n,e,[Bg],function(i){return sf(Rb(i.data[0],i.data[1]))},0,t)}function Rb(n,e){return dp(n,e||{},0,0)}var _a=function(){function n(e){this.s={},this.p=new li(0),this.ondata=e}return n.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,i=new li(t+e.length);i.set(this.p),i.set(e,t),this.p=i},n.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,i=Eb(this.p,this.o,this.s);this.ondata(Eo(i,t,this.s.b),this.d),this.o=Eo(i,this.s.b-32768),this.s.b=this.o.length,this.p=Eo(this.p,this.s.p/8|0),this.s.p&=7},n.prototype.push=function(e,t){this.e(e),this.c(t)},n}(),_O=function(){function n(e){this.ondata=e,zg([Ng,function(){return[No,_a]}],this,0,function(){var t=new _a;onmessage=No(t)},7)}return n}();function bO(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Fg(n,e,[Ng],function(i){return sf(Ug(i.data[0],hO(i.data[1])))},1,t)}function Ug(n,e){return Eb(n,e)}var wC=function(){function n(e,t){this.c=Og(),this.l=0,this.v=1,Jl.call(this,e,t)}return n.prototype.push=function(e,t){Jl.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var i=dp(e,this.o,this.v&&vO(this.o),t&&8,!t);this.v&&(pO(i,this.o),this.v=0),t&&(Mi(i,i.length-8,this.c.d()),Mi(i,i.length-4,this.l)),this.ondata(i,t)},n}(),OV=function(){function n(e,t){zg([Bg,bQ,function(){return[No,Jl,wC]}],this,yO.call(this,e,t),function(i){var r=new wC(i.data);onmessage=No(r)},8)}return n}();function NV(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Fg(n,e,[Bg,bQ,function(){return[xC]}],function(i){return sf(xC(i.data[0],i.data[1]))},2,t)}function xC(n,e){e||(e={});var t=Og(),i=n.length;t.p(n);var r=dp(n,e,vO(e),8),s=r.length;return pO(r,e),Mi(r,s-8,t.d()),Mi(r,s-4,i),r}var CC=function(){function n(e){this.v=1,_a.call(this,e)}return n.prototype.push=function(e,t){if(_a.prototype.e.call(this,e),this.v){var i=this.p.length>3?mO(this.p):4;if(i>=this.p.length&&!t)return;this.p=this.p.subarray(i),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}_a.prototype.c.call(this,t)},n}(),EQ=function(){function n(e){this.ondata=e,zg([Ng,SQ,function(){return[No,_a,CC]}],this,0,function(){var t=new CC;onmessage=No(t)},9)}return n}();function IQ(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Fg(n,e,[Ng,SQ,function(){return[MC]}],function(i){return sf(MC(i.data[0]))},3,t)}function MC(n,e){return Eb(n.subarray(mO(n),-8),e||new li(CQ(n)))}var RP=function(){function n(e,t){this.c=fO(),this.v=1,Jl.call(this,e,t)}return n.prototype.push=function(e,t){Jl.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e);var i=dp(e,this.o,this.v&&2,t&&4,!t);this.v&&(gO(i,this.o),this.v=0),t&&Mi(i,i.length-4,this.c.d()),this.ondata(i,t)},n}(),t9e=function(){function n(e,t){zg([Bg,wQ,function(){return[No,Jl,RP]}],this,yO.call(this,e,t),function(i){var r=new RP(i.data);onmessage=No(r)},10)}return n}();function n9e(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Fg(n,e,[Bg,wQ,function(){return[PP]}],function(i){return sf(PP(i.data[0],i.data[1]))},4,t)}function PP(n,e){e||(e={});var t=fO();t.p(n);var i=dp(n,e,2,4);return gO(i,e),Mi(i,i.length-4,t.d()),i}var TC=function(){function n(e){this.v=1,_a.call(this,e)}return n.prototype.push=function(e,t){if(_a.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}_a.prototype.c.call(this,t)},n}(),RQ=function(){function n(e){this.ondata=e,zg([Ng,xQ,function(){return[No,_a,TC]}],this,0,function(){var t=new TC;onmessage=No(t)},11)}return n}();function PQ(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Fg(n,e,[Ng,xQ,function(){return[G_]}],function(i){return sf(G_(i.data[0],hO(i.data[1])))},5,t)}function G_(n,e){return Eb((MQ(n),n.subarray(2,-4)),e)}var DQ=function(){function n(e){this.G=CC,this.I=_a,this.Z=TC,this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var i=new li(this.p.length+e.length);i.set(this.p),i.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var r=this,s=function(){r.ondata.apply(r,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(s):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(s):new this.Z(s),this.s.push(this.p,t),this.p=null}}},n}(),i9e=function(){function n(e){this.G=EQ,this.I=_O,this.Z=RQ,this.ondata=e}return n.prototype.push=function(e,t){DQ.prototype.push.call(this,e,t)},n}();function r9e(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return n[0]==31&&n[1]==139&&n[2]==8?IQ(n,e,t):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?bO(n,e,t):PQ(n,e,t)}function s9e(n,e){return n[0]==31&&n[1]==139&&n[2]==8?MC(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?Ug(n,e):G_(n,e)}var SO=function(n,e,t,i){for(var r in n){var s=n[r],a=e+r;s instanceof li?t[a]=[s,i]:Array.isArray(s)?t[a]=[s[0],Ib(i,s[1])]:SO(s,a+"/",t,i)}},BV=typeof TextEncoder<"u"&&new TextEncoder,DP=typeof TextDecoder<"u"&&new TextDecoder,LQ=0;try{DP.decode($c,{stream:!0}),LQ=1}catch{}var kQ=function(n){for(var e="",t=0;;){var i=n[t++],r=(i>127)+(i>223)+(i>239);if(t+r>n.length)return[e,Eo(n,t-1)];r?r==3?(i=((i&15)<<18|(n[t++]&63)<<12|(n[t++]&63)<<6|n[t++]&63)-65536,e+=String.fromCharCode(55296|i>>10,56320|i&1023)):r&1?e+=String.fromCharCode((i&31)<<6|n[t++]&63):e+=String.fromCharCode((i&15)<<12|(n[t++]&63)<<6|n[t++]&63):e+=String.fromCharCode(i)}},a9e=function(){function n(e){this.ondata=e,LQ?this.t=new TextDecoder:this.p=$c}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var i=new li(this.p.length+e.length);i.set(this.p),i.set(e,this.p.length);var r=kQ(i),s=r[0],a=r[1];if(t){if(a.length)throw"invalid utf-8 data";this.p=null}else this.p=a;this.ondata(s,t)},n}(),o9e=function(){function n(e){this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(Xd(e),this.d=t||!1)},n}();function Xd(n,e){if(e){for(var t=new li(n.length),i=0;i<n.length;++i)t[i]=n.charCodeAt(i);return t}if(BV)return BV.encode(n);for(var r=n.length,s=new li(n.length+(n.length>>1)),a=0,o=function(u){s[a++]=u},i=0;i<r;++i){if(a+5>s.length){var l=new li(a+8+(r-i<<1));l.set(s),s=l}var c=n.charCodeAt(i);c<128||e?o(c):c<2048?(o(192|c>>6),o(128|c&63)):c>55295&&c<57344?(c=65536+(c&1047552)|n.charCodeAt(++i)&1023,o(240|c>>18),o(128|c>>12&63),o(128|c>>6&63),o(128|c&63)):(o(224|c>>12),o(128|c>>6&63),o(128|c&63))}return Eo(s,0,a)}function wO(n,e){if(e){for(var t="",i=0;i<n.length;i+=16384)t+=String.fromCharCode.apply(null,n.subarray(i,i+16384));return t}else{if(DP)return DP.decode(n);var r=kQ(n),s=r[0],a=r[1];if(a.length)throw"invalid utf-8 data";return s}}var OQ=function(n){return n==1?3:n<6?2:n==9?1:0},NQ=function(n,e){return e+30+qs(n,e+26)+qs(n,e+28)},BQ=function(n,e,t){var i=qs(n,e+28),r=wO(n.subarray(e+46,e+46+i),!(qs(n,e+8)&2048)),s=e+46+i,a=pr(n,e+20),o=t&&a==4294967295?FQ(n,s):[a,pr(n,e+24),pr(n,e+42)],l=o[0],c=o[1],u=o[2];return[qs(n,e+10),l,c,r,s+qs(n,e+30)+qs(n,e+32),u]},FQ=function(n,e){for(;qs(n,e)!=1;e+=4+qs(n,e+2));return[VE(n,e+12),VE(n,e+4),VE(n,e+20)]},wd=function(n){var e=0;if(n)for(var t in n){var i=n[t].length;if(i>65535)throw"extra field too long";e+=i+4}return e},Yv=function(n,e,t,i,r,s,a,o){var l=i.length,c=t.extra,u=o&&o.length,d=wd(c);Mi(n,e,a!=null?33639248:67324752),e+=4,a!=null&&(n[e++]=20,n[e++]=t.os),n[e]=20,e+=2,n[e++]=t.flag<<1|(s==null&&8),n[e++]=r&&8,n[e++]=t.compression&255,n[e++]=t.compression>>8;var f=new Date(t.mtime==null?Date.now():t.mtime),h=f.getFullYear()-1980;if(h<0||h>119)throw"date not in range 1980-2099";if(Mi(n,e,h<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>>1),e+=4,s!=null&&(Mi(n,e,t.crc),Mi(n,e+4,s),Mi(n,e+8,t.size)),Mi(n,e+12,l),Mi(n,e+14,d),e+=16,a!=null&&(Mi(n,e,u),Mi(n,e+6,t.attrs),Mi(n,e+10,a),e+=14),n.set(i,e),e+=l,d)for(var p in c){var m=c[p],v=m.length;Mi(n,e,+p),Mi(n,e+2,v),n.set(m,e+4),e+=4+v}return u&&(n.set(o,e),e+=u),e},xO=function(n,e,t,i,r){Mi(n,e,101010256),Mi(n,e+8,t),Mi(n,e+10,t),Mi(n,e+12,i),Mi(n,e+16,r)},W_=function(){function n(e){this.filename=e,this.c=Og(),this.size=0,this.compression=0}return n.prototype.process=function(e,t){this.ondata(null,e,t)},n.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},n}(),l9e=function(){function n(e,t){var i=this;t||(t={}),W_.call(this,e),this.d=new Jl(t,function(r,s){i.ondata(null,r,s)}),this.compression=8,this.flag=OQ(t.level)}return n.prototype.process=function(e,t){try{this.d.push(e,t)}catch(i){this.ondata(i,null,t)}},n.prototype.push=function(e,t){W_.prototype.push.call(this,e,t)},n}(),c9e=function(){function n(e,t){var i=this;t||(t={}),W_.call(this,e),this.d=new TQ(t,function(r,s,a){i.ondata(r,s,a)}),this.compression=8,this.flag=OQ(t.level),this.terminate=this.d.terminate}return n.prototype.process=function(e,t){this.d.push(e,t)},n.prototype.push=function(e,t){W_.prototype.push.call(this,e,t)},n}(),u9e=function(){function n(e){this.ondata=e,this.u=[],this.d=1}return n.prototype.add=function(e){var t=this;if(this.d&2)throw"stream finished";var i=Xd(e.filename),r=i.length,s=e.comment,a=s&&Xd(s),o=r!=e.filename.length||a&&s.length!=a.length,l=r+wd(e.extra)+30;if(r>65535)throw"filename too long";var c=new li(l);Yv(c,0,e,i,o);var u=[c],d=function(){for(var v=0,g=u;v<g.length;v++){var _=g[v];t.ondata(null,_,!1)}u=[]},f=this.d;this.d=0;var h=this.u.length,p=Ib(e,{f:i,u:o,o:a,t:function(){e.terminate&&e.terminate()},r:function(){if(d(),f){var v=t.u[h+1];v?v.r():t.d=1}f=1}}),m=0;e.ondata=function(v,g,_){if(v)t.ondata(v,g,_),t.terminate();else if(m+=g.length,u.push(g),_){var y=new li(16);Mi(y,0,134695760),Mi(y,4,e.crc),Mi(y,8,m),Mi(y,12,e.size),u.push(y),p.c=m,p.b=l+m+16,p.crc=e.crc,p.size=e.size,f&&p.r(),f=1}else f&&d()},this.u.push(p)},n.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},n.prototype.e=function(){for(var e=0,t=0,i=0,r=0,s=this.u;r<s.length;r++){var a=s[r];i+=46+a.f.length+wd(a.extra)+(a.o?a.o.length:0)}for(var o=new li(i+22),l=0,c=this.u;l<c.length;l++){var a=c[l];Yv(o,e,a,a.f,a.u,a.c,t,a.o),e+=46+a.f.length+wd(a.extra)+(a.o?a.o.length:0),t+=a.b}xO(o,e,this.u.length,i,t),this.ondata(null,o,!0),this.d=2},n.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var i=t[e];i.t()}this.d=2},n}();function d9e(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";var i={};SO(n,"",i,e);var r=Object.keys(i),s=r.length,a=0,o=0,l=s,c=new Array(s),u=[],d=function(){for(var m=0;m<u.length;++m)u[m]()},f=function(){var m=new li(o+22),v=a,g=o-a;o=0;for(var _=0;_<l;++_){var y=c[_];try{var S=y.c.length;Yv(m,o,y,y.f,y.u,S);var w=30+y.f.length+wd(y.extra),x=o+w;m.set(y.c,x),Yv(m,a,y,y.f,y.u,S,o,y.m),a+=16+w+(y.m?y.m.length:0),o=x+S}catch(T){return t(T,null)}}xO(m,a,c.length,g,v),t(null,m)};s||f();for(var h=function(m){var v=r[m],g=i[v],_=g[0],y=g[1],S=Og(),w=_.length;S.p(_);var x=Xd(v),T=x.length,C=y.comment,M=C&&Xd(C),A=M&&M.length,E=wd(y.extra),I=y.level==0?0:8,P=function(D,L){if(D)d(),t(D,null);else{var R=L.length;c[m]=Ib(y,{size:w,crc:S.d(),c:L,f:x,m:M,u:T!=v.length||M&&C.length!=A,compression:I}),a+=30+T+E+R,o+=76+2*(T+E)+(A||0)+R,--s||f()}};if(T>65535&&P("filename too long",null),!I)P(null,_);else if(w<16e4)try{P(null,Rb(_,y))}catch(D){P(D,null)}else u.push(AQ(_,y,P))},p=0;p<l;++p)h(p);return d}function f9e(n,e){e||(e={});var t={},i=[];SO(n,"",t,e);var r=0,s=0;for(var a in t){var o=t[a],l=o[0],c=o[1],u=c.level==0?0:8,d=Xd(a),f=d.length,h=c.comment,p=h&&Xd(h),m=p&&p.length,v=wd(c.extra);if(f>65535)throw"filename too long";var g=u?Rb(l,c):l,_=g.length,y=Og();y.p(l),i.push(Ib(c,{size:l.length,crc:y.d(),c:g,f:d,m:p,u:f!=a.length||p&&h.length!=m,o:r,compression:u})),r+=30+f+v+_,s+=76+2*(f+v)+(m||0)+_}for(var S=new li(s+22),w=r,x=s-r,T=0;T<i.length;++T){var d=i[T];Yv(S,d.o,d,d.f,d.u,d.c.length);var C=30+d.f.length+wd(d.extra);S.set(d.c,d.o+C),Yv(S,r,d,d.f,d.u,d.c.length,d.o,d.m),r+=16+C+(d.m?d.m.length:0)}return xO(S,r,i.length,x,w),S}var zQ=function(){function n(){}return n.prototype.push=function(e,t){this.ondata(null,e,t)},n.compression=0,n}(),h9e=function(){function n(){var e=this;this.i=new _a(function(t,i){e.ondata(null,t,i)})}return n.prototype.push=function(e,t){try{this.i.push(e,t)}catch(i){this.ondata(i,e,t)}},n.compression=8,n}(),p9e=function(){function n(e,t){var i=this;t<32e4?this.i=new _a(function(r,s){i.ondata(null,r,s)}):(this.i=new _O(function(r,s,a){i.ondata(r,s,a)}),this.terminate=this.i.terminate)}return n.prototype.push=function(e,t){this.i.terminate&&(e=Eo(e,0)),this.i.push(e,t)},n.compression=8,n}(),m9e=function(){function n(e){this.onfile=e,this.k=[],this.o={0:zQ},this.p=$c}return n.prototype.push=function(e,t){var i=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var r=Math.min(this.c,e.length),s=e.subarray(0,r);if(this.c-=r,this.d?this.d.push(s,!this.c):this.k[0].push(s),e=e.subarray(r),e.length)return this.push(e,t)}else{var a=0,o=0,l=void 0,c=void 0;this.p.length?e.length?(c=new li(this.p.length+e.length),c.set(this.p),c.set(e,this.p.length)):c=this.p:c=e;for(var u=c.length,d=this.c,f=d&&this.d,h=function(){var g,_=pr(c,o);if(_==67324752){a=1,l=o,p.d=null,p.c=0;var y=qs(c,o+6),S=qs(c,o+8),w=y&2048,x=y&8,T=qs(c,o+26),C=qs(c,o+28);if(u>o+30+T+C){var M=[];p.k.unshift(M),a=2;var A=pr(c,o+18),E=pr(c,o+22),I=wO(c.subarray(o+30,o+=30+T),!w);A==4294967295?(g=x?[-2]:FQ(c,o),A=g[0],E=g[1]):x&&(A=-1),o+=C,p.c=A;var P,D={name:I,compression:S,start:function(){if(!D.ondata)throw"no callback";if(!A)D.ondata(null,$c,!0);else{var L=i.o[S];if(!L)throw"unknown compression type "+S;P=A<0?new L(I):new L(I,A,E),P.ondata=function(O,U,G){D.ondata(O,U,G)};for(var R=0,B=M;R<B.length;R++){var k=B[R];P.push(k,!1)}i.k[0]==M&&i.c?i.d=P:P.push($c,!0)}},terminate:function(){P&&P.terminate&&P.terminate()}};A>=0&&(D.size=A,D.originalSize=E),p.onfile(D)}return"break"}else if(d){if(_==134695760)return l=o+=12+(d==-2&&8),a=3,p.c=0,"break";if(_==33639248)return l=o-=4,a=3,p.c=0,"break"}},p=this;o<u-4;++o){var m=h();if(m==="break")break}if(this.p=$c,d<0){var v=a?c.subarray(0,l-12-(d==-2&&8)-(pr(c,l-16)==134695760&&4)):c.subarray(0,o);f?f.push(v,!!a):this.k[+(a==2)].push(v)}if(a&2)return this.push(c.subarray(o),t);this.p=c.subarray(o)}if(t){if(this.c)throw"invalid zip file";this.p=null}},n.prototype.register=function(e){this.o[e.compression]=e},n}();function v9e(n,e){if(typeof e!="function")throw"no callback";for(var t=[],i=function(){for(var f=0;f<t.length;++f)t[f]()},r={},s=n.length-22;pr(n,s)!=101010256;--s)if(!s||n.length-s>65558){e("invalid zip file",null);return}var a=qs(n,s+8);a||e(null,{});var o=a,l=pr(n,s+16),c=l==4294967295;if(c){if(s=pr(n,s-12),pr(n,s)!=101075792){e("invalid zip file",null);return}o=a=pr(n,s+32),l=pr(n,s+48)}for(var u=function(f){var h=BQ(n,l,c),p=h[0],m=h[1],v=h[2],g=h[3],_=h[4],y=h[5],S=NQ(n,y);l=_;var w=function(T,C){T?(i(),e(T,null)):(r[g]=C,--a||e(null,r))};if(!p)w(null,Eo(n,S,S+m));else if(p==8){var x=n.subarray(S,S+m);if(m<32e4)try{w(null,Ug(x,new li(v)))}catch(T){w(T,null)}else t.push(bO(x,{size:v},w))}else w("unknown compression type "+p,null)},d=0;d<o;++d)u();return i}function g9e(n){for(var e={},t=n.length-22;pr(n,t)!=101010256;--t)if(!t||n.length-t>65558)throw"invalid zip file";var i=qs(n,t+8);if(!i)return{};var r=pr(n,t+16),s=r==4294967295;if(s){if(t=pr(n,t-12),pr(n,t)!=101075792)throw"invalid zip file";i=pr(n,t+32),r=pr(n,t+48)}for(var a=0;a<i;++a){var o=BQ(n,r,s),l=o[0],c=o[1],u=o[2],d=o[3],f=o[4],h=o[5],p=NQ(n,h);if(r=f,!l)e[d]=Eo(n,p,p+c);else if(l==8)e[d]=Ug(n.subarray(p,p+c),new li(u));else throw"unknown compression type "+l}return e}var y9e=Object.freeze(Object.defineProperty({__proto__:null,Deflate:Jl,AsyncDeflate:TQ,deflate:AQ,deflateSync:Rb,Inflate:_a,AsyncInflate:_O,inflate:bO,inflateSync:Ug,Gzip:wC,AsyncGzip:OV,gzip:NV,gzipSync:xC,Gunzip:CC,AsyncGunzip:EQ,gunzip:IQ,gunzipSync:MC,Zlib:RP,AsyncZlib:t9e,zlib:n9e,zlibSync:PP,Unzlib:TC,AsyncUnzlib:RQ,unzlib:PQ,unzlibSync:G_,compress:NV,AsyncCompress:OV,compressSync:xC,Compress:wC,Decompress:DQ,AsyncDecompress:i9e,decompress:r9e,decompressSync:s9e,DecodeUTF8:a9e,EncodeUTF8:o9e,strToU8:Xd,strFromU8:wO,ZipPassThrough:W_,ZipDeflate:l9e,AsyncZipDeflate:c9e,Zip:u9e,zip:d9e,zipSync:f9e,UnzipPassThrough:zQ,UnzipInflate:h9e,AsyncUnzipInflate:p9e,Unzip:m9e,unzip:v9e,unzipSync:g9e},Symbol.toStringTag,{value:"Module"}));function UQ(n,e,t){const i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let r=n,s=i,a=Math.floor((r+s)/2);for(;e<t[a]||e>=t[a+1];)e<t[a]?s=a:r=a,a=Math.floor((r+s)/2);return a}function _9e(n,e,t,i){const r=[],s=[],a=[];r[0]=1;for(let o=1;o<=t;++o){s[o]=e-i[n+1-o],a[o]=i[n+o]-e;let l=0;for(let c=0;c<o;++c){const u=a[c+1],d=s[o-c],f=r[c]/(u+d);r[c]=l+u*f,l=d*f}r[o]=l}return r}function b9e(n,e,t,i){const r=UQ(n,i,e),s=_9e(r,i,n,e),a=new wi(0,0,0,0);for(let o=0;o<=n;++o){const l=t[r-n+o],c=s[o],u=l.w*c;a.x+=l.x*u,a.y+=l.y*u,a.z+=l.z*u,a.w+=l.w*c}return a}function S9e(n,e,t,i,r){const s=[];for(let d=0;d<=t;++d)s[d]=0;const a=[];for(let d=0;d<=i;++d)a[d]=s.slice(0);const o=[];for(let d=0;d<=t;++d)o[d]=s.slice(0);o[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let d=1;d<=t;++d){l[d]=e-r[n+1-d],c[d]=r[n+d]-e;let f=0;for(let h=0;h<d;++h){const p=c[h+1],m=l[d-h];o[d][h]=p+m;const v=o[h][d-1]/o[d][h];o[h][d]=f+p*v,f=m*v}o[d][d]=f}for(let d=0;d<=t;++d)a[0][d]=o[d][t];for(let d=0;d<=t;++d){let f=0,h=1;const p=[];for(let m=0;m<=t;++m)p[m]=s.slice(0);p[0][0]=1;for(let m=1;m<=i;++m){let v=0;const g=d-m,_=t-m;d>=m&&(p[h][0]=p[f][0]/o[_+1][g],v=p[h][0]*o[g][_]);const y=g>=-1?1:-g,S=d-1<=_?m-1:t-d;for(let x=y;x<=S;++x)p[h][x]=(p[f][x]-p[f][x-1])/o[_+1][g+x],v+=p[h][x]*o[g+x][_];d<=_&&(p[h][m]=-p[f][m-1]/o[_+1][d],v+=p[h][m]*o[d][_]),a[m][d]=v;const w=f;f=h,h=w}}let u=t;for(let d=1;d<=i;++d){for(let f=0;f<=t;++f)a[d][f]*=u;u*=t-d}return a}function w9e(n,e,t,i,r){const s=r<n?r:n,a=[],o=UQ(n,i,e),l=S9e(o,i,n,s,e),c=[];for(let u=0;u<t.length;++u){const d=t[u].clone(),f=d.w;d.x*=f,d.y*=f,d.z*=f,c[u]=d}for(let u=0;u<=s;++u){const d=c[o-n].clone().multiplyScalar(l[u][0]);for(let f=1;f<=n;++f)d.add(c[o-n+f].clone().multiplyScalar(l[u][f]));a[u]=d}for(let u=s+1;u<=r+1;++u)a[u]=new wi(0,0,0);return a}function x9e(n,e){let t=1;for(let r=2;r<=n;++r)t*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=n-e;++r)i*=r;return t/i}function C9e(n){const e=n.length,t=[],i=[];for(let s=0;s<e;++s){const a=n[s];t[s]=new ke(a.x,a.y,a.z),i[s]=a.w}const r=[];for(let s=0;s<e;++s){const a=t[s].clone();for(let o=1;o<=s;++o)a.sub(r[s-o].clone().multiplyScalar(x9e(s,o)*i[o]));r[s]=a.divideScalar(i[0])}return r}function M9e(n,e,t,i,r){const s=w9e(n,e,t,i,r);return C9e(s)}class FV extends yl{constructor(e,t,i,r,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let a=0;a<i.length;++a){const o=i[a];this.controlPoints[a]=new wi(o.x,o.y,o.z,o.w)}}getPoint(e,t=new ke){const i=t,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=b9e(this.degree,this.knots,this.controlPoints,r);return s.w!==1&&s.divideScalar(s.w),i.set(s.x,s.y,s.z)}getTangent(e,t=new ke){const i=t,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=M9e(this.degree,this.knots,this.controlPoints,r,1);return i.copy(s[1]).normalize(),i}}let ti,dr,la;class T9e extends ps{constructor(e){super(e)}load(e,t,i,r){const s=this,a=s.path===""?ks.extractUrlBase(e):s.path,o=new Os(this.manager);o.setPath(s.path),o.setResponseType("arraybuffer"),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(l,a))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e,t){if(D9e(e))ti=new P9e().parse(e);else{const r=GQ(e);if(!L9e(r))throw new Error("THREE.FBXLoader: Unknown format.");if(UV(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+UV(r));ti=new R9e().parse(r)}const i=new qv(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new A9e(i,this.manager).parse(ti)}}class A9e{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){dr=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),r=this.parseDeformers(),s=new E9e().parse(r);return this.parseScene(r,s,i),la}parseConnections(){const e=new Map;return"Connections"in ti&&ti.Connections.connections.forEach(function(i){const r=i[0],s=i[1],a=i[2];e.has(r)||e.set(r,{parents:[],children:[]});const o={ID:s,relationship:a};e.get(r).parents.push(o),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:r,relationship:a};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in ti.Objects){const i=ti.Objects.Video;for(const r in i){const s=i[r],a=parseInt(r);if(e[a]=s.RelativeFilename||s.Filename,"Content"in s){const o=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(o||l){const c=this.parseImage(i[r]);t[s.RelativeFilename||s.Filename]=c}}}}for(const i in e){const r=e[i];t[r]!==void 0?e[i]=t[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const a=new Uint8Array(t);return window.URL.createObjectURL(new Blob([a],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in ti.Objects){const i=ti.Objects.Texture;for(const r in i){const s=this.parseTexture(i[r],e);t.set(parseInt(r),s)}}return t}parseTexture(e,t){const i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,a=r!==void 0?r.value:0,o=s!==void 0?s.value:0;if(i.wrapS=a===0?ha:Nr,i.wrapT=o===0?ha:Nr,"Scaling"in e){const l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}if("Translation"in e){const l=e.Translation.value;i.offset.x=l[0],i.offset.y=l[1]}return i}loadTexture(e,t){let i;const r=this.textureLoader.path,s=dr.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(i=t[s[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let a;const o=e.FileName.slice(-3).toLowerCase();if(o==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),a=new ds):(l.setPath(this.textureLoader.path),a=l.load(i))}else o==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),a=new ds):a=this.textureLoader.load(i);return this.textureLoader.setPath(r),a}parseMaterials(e){const t=new Map;if("Material"in ti.Objects){const i=ti.Objects.Material;for(const r in i){const s=this.parseMaterial(i[r],e);s!==null&&t.set(parseInt(r),s)}}return t}parseMaterial(e,t){const i=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!dr.has(i))return null;const a=this.parseParameters(e,t,i);let o;switch(s.toLowerCase()){case"phong":o=new Xc;break;case"lambert":o=new aO;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),o=new Xc;break}return o.setValues(a),o.name=r,o}parseParameters(e,t,i){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new zt().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new zt().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new zt().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new zt().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new zt().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new zt().fromArray(e.SpecularColor.value));const s=this;return dr.get(i).children.forEach(function(a){const o=a.relationship;switch(o){case"Bump":r.bumpMap=s.getTexture(t,a.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(t,a.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(t,a.ID),r.map!==void 0&&(r.map.encoding=Xn);break;case"DisplacementColor":r.displacementMap=s.getTexture(t,a.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(t,a.ID),r.emissiveMap!==void 0&&(r.emissiveMap.encoding=Xn);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(t,a.ID);break;case"ReflectionColor":r.envMap=s.getTexture(t,a.ID),r.envMap!==void 0&&(r.envMap.mapping=R_,r.envMap.encoding=Xn);break;case"SpecularColor":r.specularMap=s.getTexture(t,a.ID),r.specularMap!==void 0&&(r.specularMap.encoding=Xn);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(t,a.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",o);break}}),r}getTexture(e,t){return"LayeredTexture"in ti.Objects&&t in ti.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=dr.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in ti.Objects){const i=ti.Objects.Deformer;for(const r in i){const s=i[r],a=dr.get(parseInt(r));if(s.attrType==="Skin"){const o=this.parseSkeleton(a,i);o.ID=r,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),o.geometryID=a.parents[0].ID,e[r]=o}else if(s.attrType==="BlendShape"){const o={id:r};o.rawTargets=this.parseMorphTargets(a,i),o.id=r,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=o}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const i=[];return e.children.forEach(function(r){const s=t[r.ID];if(s.attrType!=="Cluster")return;const a={ID:r.ID,indices:[],weights:[],transformLink:new nn().fromArray(s.TransformLink.a)};"Indexes"in s&&(a.indices=s.Indexes.a,a.weights=s.Weights.a),i.push(a)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){const i=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],a=t[s.ID],o={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if(a.attrType!=="BlendShapeChannel")return;o.geoID=dr.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(o)}return i}parseScene(e,t,i){la=new pa;const r=this.parseModels(e.skeletons,t,i),s=ti.Objects.Model,a=this;r.forEach(function(l){const c=s[l.ID];a.setLookAtProperties(l,c),dr.get(l.ID).parents.forEach(function(d){const f=r.get(d.ID);f!==void 0&&f.add(l)}),l.parent===null&&la.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),la.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=VQ(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const o=new I9e().parse();la.children.length===1&&la.children[0].isGroup&&(la.children[0].animations=o,la=la.children[0]),la.animations=o}parseModels(e,t,i){const r=new Map,s=ti.Objects.Model;for(const a in s){const o=parseInt(a),l=s[a],c=dr.get(o);let u=this.buildSkeleton(c,e,o,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,i);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new Gv;break;case"Null":default:u=new pa;break}u.name=l.attrName?ci.sanitizeNodeName(l.attrName):"",u.ID=o}this.getTransformData(u,l),r.set(o,u)}return r}buildSkeleton(e,t,i,r){let s=null;return e.parents.forEach(function(a){for(const o in t){const l=t[o];l.rawBones.forEach(function(c,u){if(c.ID===a.ID){const d=s;s=new Gv,s.matrixWorld.copy(c.transformLink),s.name=r?ci.sanitizeNodeName(r):"",s.ID=i,l.bones[u]=s,d!==null&&s.add(d)}})}}),s}createCamera(e){let t,i;if(e.children.forEach(function(r){const s=ti.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new ji;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let s=1;i.NearPlane!==void 0&&(s=i.NearPlane.value/1e3);let a=1e3;i.FarPlane!==void 0&&(a=i.FarPlane.value/1e3);let o=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(o=i.AspectWidth.value,l=i.AspectHeight.value);const c=o/l;let u=45;i.FieldOfView!==void 0&&(u=i.FieldOfView.value);const d=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:t=new kr(u,c,s,a),d!==null&&t.setFocalLength(d);break;case 1:t=new Tg(-o/2,o/2,l/2,-l/2,s,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new ji;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(r){const s=ti.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new ji;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let s=16777215;i.Color!==void 0&&(s=new zt().fromArray(i.Color.value));let a=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(a=0);let o=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?o=0:o=i.FarAttenuationEnd.value);const l=1;switch(r){case 0:t=new Jh(s,a,o,l);break;case 1:t=new Tb(s,a);break;case 2:let c=Math.PI/3;i.InnerAngle!==void 0&&(c=Is.degToRad(i.InnerAngle.value));let u=0;i.OuterAngle!==void 0&&(u=Is.degToRad(i.OuterAngle.value),u=Math.max(u,1)),t=new XM(s,a,o,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new Jh(s,a);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let r,s=null,a=null;const o=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),i.has(l.ID)&&o.push(i.get(l.ID))}),o.length>1?a=o:o.length>0?a=o[0]:(a=new Xc({color:13421772}),o.push(a)),"color"in s.attributes&&o.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(r=new KM(s,a),r.normalizeSkinWeights()):r=new Br(s,a),r}createCurve(e,t){const i=e.children.reduce(function(s,a){return t.has(a.ID)&&(s=t.get(a.ID)),s},null),r=new dl({color:3342591,linewidth:1});return new Ig(i,r)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=$Q(t.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&dr.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const s=ti.Objects.Model[r.ID];if("Lcl_Translation"in s){const a=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(a),la.add(e.target)):e.lookAt(new ke().fromArray(a))}}})}bindSkeleton(e,t,i){const r=this.parsePoseNodes();for(const s in e){const a=e[s];dr.get(parseInt(a.ID)).parents.forEach(function(l){if(t.has(l.ID)){const c=l.ID;dr.get(c).parents.forEach(function(d){i.has(d.ID)&&i.get(d.ID).bind(new Eg(a.bones),r[d.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in ti.Objects){const t=ti.Objects.Pose;for(const i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){const r=t[i].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new nn().fromArray(s.Matrix.a)}):e[r.Node]=new nn().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in ti&&"AmbientColor"in ti.GlobalSettings){const e=ti.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],r=e[2];if(t!==0||i!==0||r!==0){const s=new zt(t,i,r);la.add(new YM(s,1))}}}}class E9e{parse(e){const t=new Map;if("Geometry"in ti.Objects){const i=ti.Objects.Geometry;for(const r in i){const s=dr.get(parseInt(r)),a=this.parseGeometry(s,i[r],e);t.set(parseInt(r),a)}}return t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const r=i.skeletons,s=[],a=e.parents.map(function(d){return ti.Objects.Model[d.ID]});if(a.length===0)return;const o=e.children.reduce(function(d,f){return r[f.ID]!==void 0&&(d=r[f.ID]),d},null);e.children.forEach(function(d){i.morphTargets[d.ID]!==void 0&&s.push(i.morphTargets[d.ID])});const l=a[0],c={};"RotationOrder"in l&&(c.eulerOrder=$Q(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const u=VQ(c);return this.genGeometry(t,o,s,u)}genGeometry(e,t,i,r){const s=new si;e.attrName&&(s.name=e.attrName);const a=this.parseGeoNode(e,t),o=this.genBuffers(a),l=new qt(o.vertex,3);if(l.applyMatrix4(r),s.setAttribute("position",l),o.colors.length>0&&s.setAttribute("color",new qt(o.colors,3)),t&&(s.setAttribute("skinIndex",new Kk(o.weightsIndices,4)),s.setAttribute("skinWeight",new qt(o.vertexWeights,4)),s.FBX_Deformer=t),o.normal.length>0){const c=new wo().getNormalMatrix(r),u=new qt(o.normal,3);u.applyNormalMatrix(c),s.setAttribute("normal",u)}if(o.uvs.forEach(function(c,u){let d="uv"+(u+1).toString();u===0&&(d="uv"),s.setAttribute(d,new qt(o.uvs[u],2))}),a.material&&a.material.mappingType!=="AllSame"){let c=o.materialIndex[0],u=0;if(o.materialIndex.forEach(function(d,f){d!==c&&(s.addGroup(u,f-u,c),c=d,u=f)}),s.groups.length>0){const d=s.groups[s.groups.length-1],f=d.start+d.count;f!==o.materialIndex.length&&s.addGroup(f,o.materialIndex.length-f,c)}s.groups.length===0&&s.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(s,e,i,r),s}parseGeoNode(e,t){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(r,s){r.indices.forEach(function(a,o){i.weightTable[a]===void 0&&(i.weightTable[a]=[]),i.weightTable[a].push({id:s,weight:r.weights[o]})})})),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,r=0,s=!1,a=[],o=[],l=[],c=[],u=[],d=[];const f=this;return e.vertexIndices.forEach(function(h,p){let m,v=!1;h<0&&(h=h^-1,v=!0);let g=[],_=[];if(a.push(h*3,h*3+1,h*3+2),e.color){const y=Cw(p,i,h,e.color);l.push(y[0],y[1],y[2])}if(e.skeleton){if(e.weightTable[h]!==void 0&&e.weightTable[h].forEach(function(y){_.push(y.weight),g.push(y.id)}),_.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const y=[0,0,0,0],S=[0,0,0,0];_.forEach(function(w,x){let T=w,C=g[x];S.forEach(function(M,A,E){if(T>M){E[A]=T,T=M;const I=y[A];y[A]=C,C=I}})}),g=y,_=S}for(;_.length<4;)_.push(0),g.push(0);for(let y=0;y<4;++y)u.push(_[y]),d.push(g[y])}if(e.normal){const y=Cw(p,i,h,e.normal);o.push(y[0],y[1],y[2])}e.material&&e.material.mappingType!=="AllSame"&&(m=Cw(p,i,h,e.material)[0]),e.uv&&e.uv.forEach(function(y,S){const w=Cw(p,i,h,y);c[S]===void 0&&(c[S]=[]),c[S].push(w[0]),c[S].push(w[1])}),r++,v&&(f.genFace(t,e,a,m,o,l,c,u,d,r),i++,r=0,a=[],o=[],l=[],c=[],u=[],d=[])}),t}genFace(e,t,i,r,s,a,o,l,c,u){for(let d=2;d<u;d++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[(d-1)*3]]),e.vertex.push(t.vertexPositions[i[(d-1)*3+1]]),e.vertex.push(t.vertexPositions[i[(d-1)*3+2]]),e.vertex.push(t.vertexPositions[i[d*3]]),e.vertex.push(t.vertexPositions[i[d*3+1]]),e.vertex.push(t.vertexPositions[i[d*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(d-1)*4]),e.vertexWeights.push(l[(d-1)*4+1]),e.vertexWeights.push(l[(d-1)*4+2]),e.vertexWeights.push(l[(d-1)*4+3]),e.vertexWeights.push(l[d*4]),e.vertexWeights.push(l[d*4+1]),e.vertexWeights.push(l[d*4+2]),e.vertexWeights.push(l[d*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(d-1)*4]),e.weightsIndices.push(c[(d-1)*4+1]),e.weightsIndices.push(c[(d-1)*4+2]),e.weightsIndices.push(c[(d-1)*4+3]),e.weightsIndices.push(c[d*4]),e.weightsIndices.push(c[d*4+1]),e.weightsIndices.push(c[d*4+2]),e.weightsIndices.push(c[d*4+3])),t.color&&(e.colors.push(a[0]),e.colors.push(a[1]),e.colors.push(a[2]),e.colors.push(a[(d-1)*3]),e.colors.push(a[(d-1)*3+1]),e.colors.push(a[(d-1)*3+2]),e.colors.push(a[d*3]),e.colors.push(a[d*3+1]),e.colors.push(a[d*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(d-1)*3]),e.normal.push(s[(d-1)*3+1]),e.normal.push(s[(d-1)*3+2]),e.normal.push(s[d*3]),e.normal.push(s[d*3+1]),e.normal.push(s[d*3+2])),t.uv&&t.uv.forEach(function(f,h){e.uvs[h]===void 0&&(e.uvs[h]=[]),e.uvs[h].push(o[h][0]),e.uvs[h].push(o[h][1]),e.uvs[h].push(o[h][(d-1)*2]),e.uvs[h].push(o[h][(d-1)*2+1]),e.uvs[h].push(o[h][d*2]),e.uvs[h].push(o[h][d*2+1])})}addMorphTargets(e,t,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;i.forEach(function(a){a.rawTargets.forEach(function(o){const l=ti.Objects.Geometry[o.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,r,o.name)})})}genMorphGeometry(e,t,i,r,s){const a=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],o=i.Vertices!==void 0?i.Vertices.a:[],l=i.Indexes!==void 0?i.Indexes.a:[],c=e.attributes.position.count*3,u=new Float32Array(c);for(let p=0;p<l.length;p++){const m=l[p]*3;u[m]=o[p*3],u[m+1]=o[p*3+1],u[m+2]=o[p*3+2]}const d={vertexIndices:a,vertexPositions:u},f=this.genBuffers(d),h=new qt(f.vertex,3);h.name=s||i.attrName,h.applyMatrix4(r),e.morphAttributes.position.push(h)}parseNormals(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a;let s=[];return i==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:t,referenceType:i}}parseUVs(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a;let s=[];return i==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:t,referenceType:i}}parseVertexColors(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a;let s=[];return i==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:t,referenceType:i}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const r=e.Materials.a,s=[];for(let a=0;a<r.length;++a)s.push(a);return{dataSize:1,buffer:r,indices:s,mappingType:t,referenceType:i}}parseNurbsGeometry(e){if(FV===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new si;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new si;const i=t-1,r=e.KnotVector.a,s=[],a=e.Points.a;for(let d=0,f=a.length;d<f;d+=4)s.push(new wi().fromArray(a,d));let o,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){o=i,l=r.length-1-o;for(let d=0;d<i;++d)s.push(s[d])}const u=new FV(i,r,s,o,l).getPoints(s.length*12);return new si().setFromPoints(u)}}class I9e{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const i in t){const r=t[i],s=this.addClip(r);e.push(s)}return e}parseClips(){if(ti.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=ti.Objects.AnimationCurveNode,t=new Map;for(const i in e){const r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=ti.Objects.AnimationCurve;for(const i in t){const r={id:t[i].id,times:t[i].KeyTime.a.map(k9e),values:t[i].KeyValueFloat.a},s=dr.get(r.id);if(s!==void 0){const a=s.parents[0].ID,o=s.parents[0].relationship;o.match(/X/)?e.get(a).curves.x=r:o.match(/Y/)?e.get(a).curves.y=r:o.match(/Z/)?e.get(a).curves.z=r:o.match(/d|DeformPercent/)&&e.has(a)&&(e.get(a).curves.morph=r)}}}parseAnimationLayers(e){const t=ti.Objects.AnimationLayer,i=new Map;for(const r in t){const s=[],a=dr.get(parseInt(r));a!==void 0&&(a.children.forEach(function(l,c){if(e.has(l.ID)){const u=e.get(l.ID);if(u.curves.x!==void 0||u.curves.y!==void 0||u.curves.z!==void 0){if(s[c]===void 0){const d=dr.get(l.ID).parents.filter(function(f){return f.relationship!==void 0})[0].ID;if(d!==void 0){const f=ti.Objects.Model[d.toString()];if(f===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const h={modelName:f.attrName?ci.sanitizeNodeName(f.attrName):"",ID:f.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};la.traverse(function(p){p.ID===f.id&&(h.transform=p.matrix,p.userData.transformData&&(h.eulerOrder=p.userData.transformData.eulerOrder))}),h.transform||(h.transform=new nn),"PreRotation"in f&&(h.preRotation=f.PreRotation.value),"PostRotation"in f&&(h.postRotation=f.PostRotation.value),s[c]=h}}s[c]&&(s[c][u.attr]=u)}else if(u.curves.morph!==void 0){if(s[c]===void 0){const d=dr.get(l.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID,f=dr.get(d).parents[0].ID,h=dr.get(f).parents[0].ID,p=dr.get(h).parents[0].ID,m=ti.Objects.Model[p],v={modelName:m.attrName?ci.sanitizeNodeName(m.attrName):"",morphName:ti.Objects.Deformer[d].attrName};s[c]=v}s[c][u.attr]=u}}}),i.set(parseInt(r),s))}return i}parseAnimStacks(e){const t=ti.Objects.AnimationStack,i={};for(const r in t){const s=dr.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const a=e.get(s[0].ID);i[r]={name:t[r].attrName,layer:a}}return i}addClip(e){let t=[];const i=this;return e.layer.forEach(function(r){t=t.concat(i.generateTracks(r))}),new Zh(e.name,-1,t)}generateTracks(e){const t=[];let i=new ke,r=new as,s=new ke;if(e.transform&&e.transform.decompose(i,r,s),i=i.toArray(),r=new Vc().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");a!==void 0&&t.push(a)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const a=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);a!==void 0&&t.push(a)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");a!==void 0&&t.push(a)}if(e.DeformPercent!==void 0){const a=this.generateMorphTrack(e);a!==void 0&&t.push(a)}return t}generateVectorTrack(e,t,i,r){const s=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(s,t,i);return new qd(e+"."+r,s,a)}generateRotationTrack(e,t,i,r,s,a){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(Is.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(Is.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(Is.degToRad));const o=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(o,t,i);r!==void 0&&(r=r.map(Is.degToRad),r.push(a),r=new Vc().fromArray(r),r=new as().setFromEuler(r)),s!==void 0&&(s=s.map(Is.degToRad),s.push(a),s=new Vc().fromArray(s),s=new as().setFromEuler(s).invert());const c=new as,u=new Vc,d=[];for(let f=0;f<l.length;f+=3)u.set(l[f],l[f+1],l[f+2],a),c.setFromEuler(u),r!==void 0&&c.premultiply(r),s!==void 0&&c.multiply(s),c.toArray(d,f/3*4);return new ru(e+".quaternion",o,d)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,i=t.values.map(function(s){return s/100}),r=la.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Wv(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,r){return i-r}),t.length>1){let i=1,r=t[0];for(let s=1;s<t.length;s++){const a=t[s];a!==r&&(t[i]=a,r=a,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){const r=i,s=[];let a=-1,o=-1,l=-1;return e.forEach(function(c){if(t.x&&(a=t.x.times.indexOf(c)),t.y&&(o=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),a!==-1){const u=t.x.values[a];s.push(u),r[0]=u}else s.push(r[0]);if(o!==-1){const u=t.y.values[o];s.push(u),r[1]=u}else s.push(r[1]);if(l!==-1){const u=t.z.values[l];s.push(u),r[2]=u}else s.push(r[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const i=e.values[t-1],r=e.values[t]-i,s=Math.abs(r);if(s>=180){const a=s/180,o=r/a;let l=i+o;const c=e.times[t-1],d=(e.times[t]-c)/a;let f=c+d;const h=[],p=[];for(;f<e.times[t];)h.push(f),f+=d,p.push(l),l+=o;e.times=HV(e.times,t,h),e.values=HV(e.values,t,p)}}}}class R9e{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new HQ,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,s){const a=r.match(/^[\s\t]*;/),o=r.match(/^[\s\t]*$/);if(a||o)return;const l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):c?t.parseNodeProperty(r,c,i[++s]):u?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:i},a=this.parseNodeAttr(r),o=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,s):i in o?(i==="PoseNode"?o.PoseNode.push(s):o[i].id!==void 0&&(o[i]={},o[i][o[i].id]=o[i]),a.id!==""&&(o[i][a.id]=s)):typeof a.id=="number"?(o[i]={},o[i][a.id]=s):i!=="Properties70"&&(i==="PoseNode"?o[i]=[s]:o[i]=s),typeof a.id=="number"&&(s.id=a.id),a.name!==""&&(s.attrName=a.name),a.type!==""&&(s.attrType=a.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}}parseNodeProperty(e,t,i){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const a=this.getCurrentNode();if(a.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const l=s.split(",").slice(1),c=parseInt(l[0]),u=parseInt(l[1]);let d=s.split(",").slice(3);d=d.map(function(f){return f.trim().replace(/^"/,"")}),r="connections",s=[c,u],N9e(s,d),a[r]===void 0&&(a[r]=[])}r==="Node"&&(a.id=s),r in a&&Array.isArray(a[r])?a[r].push(s):r!=="a"?a[r]=s:a.a=s,this.setCurrentProp(a,r),r==="a"&&s.slice(-1)!==","&&(a.a=GE(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=GE(t.a))}parseNodeSpecialProperty(e,t,i){const r=i.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],a=r[1],o=r[2],l=r[3];let c=r[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=GE(c);break}this.getPrevNode()[s]={type:a,type2:o,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class P9e{parse(e){const t=new zV(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const r=new HQ;for(;!this.endOfContent(t);){const s=this.parseNode(t,i);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},r=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const a=e.getUint8(),o=e.getString(a);if(r===0)return null;const l=[];for(let f=0;f<s;f++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",d=l.length>2?l[2]:"";for(i.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const f=this.parseNode(e,t);f!==null&&this.parseSubNode(o,i,f)}return i.propertyList=l,typeof c=="number"&&(i.id=c),u!==""&&(i.attrName=u),d!==""&&(i.attrType=d),o!==""&&(i.name=o),i}parseSubNode(e,t,i){if(i.singleProperty===!0){const r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if(e==="Connections"&&i.name==="C"){const r=[];i.propertyList.forEach(function(s,a){a!==0&&r.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(s){t[s]=i[s]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],s=i.propertyList[1];const a=i.propertyList[2],o=i.propertyList[3];let l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],t[r]={type:s,type2:a,flag:o,value:l}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),a=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}typeof y9e>"u"&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const o=G_(new Uint8Array(e.getArrayBuffer(a))),l=new zV(o.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class zV{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let r=0;r<e;r++)t[r]=this.getUint8();const i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),ks.decodeText(new Uint8Array(t))}}class HQ{add(e,t){this[e]=t}}function D9e(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===GQ(n,0,e.length)}function L9e(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function i(r){const s=n[r-1];return n=n.slice(t+r),t++,s}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function UV(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function k9e(n){return n/46186158e3}const O9e=[];function Cw(n,e,t,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);const s=r*i.dataSize,a=s+i.dataSize;return B9e(O9e,i.buffer,s,a)}const $E=new Vc,em=new ke;function VQ(n){const e=new nn,t=new nn,i=new nn,r=new nn,s=new nn,a=new nn,o=new nn,l=new nn,c=new nn,u=new nn,d=new nn,f=new nn,h=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(em.fromArray(n.translation)),n.preRotation){const A=n.preRotation.map(Is.degToRad);A.push(n.eulerOrder),t.makeRotationFromEuler($E.fromArray(A))}if(n.rotation){const A=n.rotation.map(Is.degToRad);A.push(n.eulerOrder),i.makeRotationFromEuler($E.fromArray(A))}if(n.postRotation){const A=n.postRotation.map(Is.degToRad);A.push(n.eulerOrder),r.makeRotationFromEuler($E.fromArray(A)),r.invert()}n.scale&&s.scale(em.fromArray(n.scale)),n.scalingOffset&&o.setPosition(em.fromArray(n.scalingOffset)),n.scalingPivot&&a.setPosition(em.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(em.fromArray(n.rotationOffset)),n.rotationPivot&&c.setPosition(em.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(d.copy(n.parentMatrix),u.copy(n.parentMatrixWorld));const p=t.clone().multiply(i).multiply(r),m=new nn;m.extractRotation(u);const v=new nn;v.copyPosition(u);const g=v.clone().invert().multiply(u),_=m.clone().invert().multiply(g),y=s,S=new nn;if(h===0)S.copy(m).multiply(p).multiply(_).multiply(y);else if(h===1)S.copy(m).multiply(_).multiply(p).multiply(y);else{const E=new nn().scale(new ke().setFromMatrixScale(d)).clone().invert(),I=_.clone().multiply(E);S.copy(m).multiply(p).multiply(I).multiply(y)}const w=c.clone().invert(),x=a.clone().invert();let T=e.clone().multiply(l).multiply(c).multiply(t).multiply(i).multiply(r).multiply(w).multiply(o).multiply(a).multiply(s).multiply(x);const C=new nn().copyPosition(T),M=u.clone().multiply(C);return f.copyPosition(M),T=f.clone().multiply(S),T.premultiply(u.invert()),T}function $Q(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function GE(n){return n.split(",").map(function(t){return parseFloat(t)})}function GQ(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),ks.decodeText(new Uint8Array(n,e,t))}function N9e(n,e){for(let t=0,i=n.length,r=e.length;t<r;t++,i++)n[i]=e[t]}function B9e(n,e,t,i){for(let r=t,s=0;r<i;r++,s++)n[s]=e[r];return n}function HV(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}class LP extends CWe{constructor(e){super(e)}parse(e){function t(R){switch(R.image_type){case f:case m:(R.colormap_length>256||R.colormap_size!==24||R.colormap_type!==1)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case h:case p:case v:case g:R.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case d:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',R.image_type)}(R.width<=0||R.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),R.pixel_size!==8&&R.pixel_size!==16&&R.pixel_size!==24&&R.pixel_size!==32&&console.error('THREE.TGALoader: Invalid pixel size "%s".',R.pixel_size)}function i(R,B,k,O,U){let G,q;const W=k.pixel_size>>3,Y=k.width*k.height*W;if(B&&(q=U.subarray(O,O+=k.colormap_length*(k.colormap_size>>3))),R){G=new Uint8Array(Y);let J,Z,ee,me=0;const ye=new Uint8Array(W);for(;me<Y;)if(J=U[O++],Z=(J&127)+1,J&128){for(ee=0;ee<W;++ee)ye[ee]=U[O++];for(ee=0;ee<Z;++ee)G.set(ye,me+ee*W);me+=W*Z}else{for(Z*=W,ee=0;ee<Z;++ee)G[me+ee]=U[O++];me+=Z}}else G=U.subarray(O,O+=B?k.width*k.height:Y);return{pixel_data:G,palettes:q}}function r(R,B,k,O,U,G,q,W,Y){const J=Y;let Z,ee=0,me,ye;const Te=A.width;for(ye=B;ye!==O;ye+=k)for(me=U;me!==q;me+=G,ee++)Z=W[ee],R[(me+Te*ye)*4+3]=255,R[(me+Te*ye)*4+2]=J[Z*3+0],R[(me+Te*ye)*4+1]=J[Z*3+1],R[(me+Te*ye)*4+0]=J[Z*3+2];return R}function s(R,B,k,O,U,G,q,W){let Y,J=0,Z,ee;const me=A.width;for(ee=B;ee!==O;ee+=k)for(Z=U;Z!==q;Z+=G,J+=2)Y=W[J+0]+(W[J+1]<<8),R[(Z+me*ee)*4+0]=(Y&31744)>>7,R[(Z+me*ee)*4+1]=(Y&992)>>2,R[(Z+me*ee)*4+2]=(Y&31)<<3,R[(Z+me*ee)*4+3]=Y&32768?0:255;return R}function a(R,B,k,O,U,G,q,W){let Y=0,J,Z;const ee=A.width;for(Z=B;Z!==O;Z+=k)for(J=U;J!==q;J+=G,Y+=3)R[(J+ee*Z)*4+3]=255,R[(J+ee*Z)*4+2]=W[Y+0],R[(J+ee*Z)*4+1]=W[Y+1],R[(J+ee*Z)*4+0]=W[Y+2];return R}function o(R,B,k,O,U,G,q,W){let Y=0,J,Z;const ee=A.width;for(Z=B;Z!==O;Z+=k)for(J=U;J!==q;J+=G,Y+=4)R[(J+ee*Z)*4+2]=W[Y+0],R[(J+ee*Z)*4+1]=W[Y+1],R[(J+ee*Z)*4+0]=W[Y+2],R[(J+ee*Z)*4+3]=W[Y+3];return R}function l(R,B,k,O,U,G,q,W){let Y,J=0,Z,ee;const me=A.width;for(ee=B;ee!==O;ee+=k)for(Z=U;Z!==q;Z+=G,J++)Y=W[J],R[(Z+me*ee)*4+0]=Y,R[(Z+me*ee)*4+1]=Y,R[(Z+me*ee)*4+2]=Y,R[(Z+me*ee)*4+3]=255;return R}function c(R,B,k,O,U,G,q,W){let Y=0,J,Z;const ee=A.width;for(Z=B;Z!==O;Z+=k)for(J=U;J!==q;J+=G,Y+=2)R[(J+ee*Z)*4+0]=W[Y+0],R[(J+ee*Z)*4+1]=W[Y+0],R[(J+ee*Z)*4+2]=W[Y+0],R[(J+ee*Z)*4+3]=W[Y+1];return R}function u(R,B,k,O,U){let G,q,W,Y,J,Z;switch((A.flags&_)>>y){default:case x:G=0,W=1,J=B,q=0,Y=1,Z=k;break;case S:G=0,W=1,J=B,q=k-1,Y=-1,Z=-1;break;case T:G=B-1,W=-1,J=-1,q=0,Y=1,Z=k;break;case w:G=B-1,W=-1,J=-1,q=k-1,Y=-1,Z=-1;break}if(P)switch(A.pixel_size){case 8:l(R,q,Y,Z,G,W,J,O);break;case 16:c(R,q,Y,Z,G,W,J,O);break;default:console.error("THREE.TGALoader: Format not supported.");break}else switch(A.pixel_size){case 8:r(R,q,Y,Z,G,W,J,O,U);break;case 16:s(R,q,Y,Z,G,W,J,O);break;case 24:a(R,q,Y,Z,G,W,J,O);break;case 32:o(R,q,Y,Z,G,W,J,O);break;default:console.error("THREE.TGALoader: Format not supported.");break}return R}const d=0,f=1,h=2,p=3,m=9,v=10,g=11,_=48,y=4,S=0,w=1,x=2,T=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");let C=0;const M=new Uint8Array(e),A={id_length:M[C++],colormap_type:M[C++],image_type:M[C++],colormap_index:M[C++]|M[C++]<<8,colormap_length:M[C++]|M[C++]<<8,colormap_size:M[C++],origin:[M[C++]|M[C++]<<8,M[C++]|M[C++]<<8],width:M[C++]|M[C++]<<8,height:M[C++]|M[C++]<<8,pixel_size:M[C++],flags:M[C++]};t(A),A.id_length+C>e.length&&console.error("THREE.TGALoader: No data."),C+=A.id_length;let E=!1,I=!1,P=!1;switch(A.image_type){case m:E=!0,I=!0;break;case f:I=!0;break;case v:E=!0;break;case h:break;case g:E=!0,P=!0;break;case p:P=!0;break}const D=new Uint8Array(A.width*A.height*4),L=i(E,I,A,C,M);return u(D,A.width,A.height,L.pixel_data,L.palettes),{data:D,width:A.width,height:A.height,flipY:!0,generateMipmaps:!0,minFilter:_u}}}class F9e extends ps{constructor(e){super(e)}load(e,t,i,r){const s=this,a=s.path===""?ks.extractUrlBase(e):s.path,o=new Os(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(l,a))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e,t){function i(ue,ce){const Se=[],be=ue.childNodes;for(let Ce=0,ft=be.length;Ce<ft;Ce++){const vt=be[Ce];vt.nodeName===ce&&Se.push(vt)}return Se}function r(ue){if(ue.length===0)return[];const ce=ue.trim().split(/\s+/),Se=new Array(ce.length);for(let be=0,Ce=ce.length;be<Ce;be++)Se[be]=ce[be];return Se}function s(ue){if(ue.length===0)return[];const ce=ue.trim().split(/\s+/),Se=new Array(ce.length);for(let be=0,Ce=ce.length;be<Ce;be++)Se[be]=parseFloat(ce[be]);return Se}function a(ue){if(ue.length===0)return[];const ce=ue.trim().split(/\s+/),Se=new Array(ce.length);for(let be=0,Ce=ce.length;be<Ce;be++)Se[be]=parseInt(ce[be]);return Se}function o(ue){return ue.substring(1)}function l(){return"three_default_"+BZ++}function c(ue){return Object.keys(ue).length===0}function u(ue){return{unit:d(i(ue,"unit")[0]),upAxis:f(i(ue,"up_axis")[0])}}function d(ue){return ue!==void 0&&ue.hasAttribute("meter")===!0?parseFloat(ue.getAttribute("meter")):1}function f(ue){return ue!==void 0?ue.textContent:"Y_UP"}function h(ue,ce,Se,be){const Ce=i(ue,ce)[0];if(Ce!==void 0){const ft=i(Ce,Se);for(let vt=0;vt<ft.length;vt++)be(ft[vt])}}function p(ue,ce){for(const Se in ue){const be=ue[Se];be.build=ce(ue[Se])}}function m(ue,ce){return ue.build!==void 0||(ue.build=ce(ue)),ue.build}function v(ue){const ce={sources:{},samplers:{},channels:{}};let Se=!1;for(let be=0,Ce=ue.childNodes.length;be<Ce;be++){const ft=ue.childNodes[be];if(ft.nodeType!==1)continue;let vt;switch(ft.nodeName){case"source":vt=ft.getAttribute("id"),ce.sources[vt]=$e(ft);break;case"sampler":vt=ft.getAttribute("id"),ce.samplers[vt]=g(ft);break;case"channel":vt=ft.getAttribute("target"),ce.channels[vt]=_(ft);break;case"animation":v(ft),Se=!0;break;default:console.log(ft)}}Se===!1&&(Tn.animations[ue.getAttribute("id")||Is.generateUUID()]=ce)}function g(ue){const ce={inputs:{}};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"input":const ft=o(Ce.getAttribute("source")),vt=Ce.getAttribute("semantic");ce.inputs[vt]=ft;break}}return ce}function _(ue){const ce={};let be=ue.getAttribute("target").split("/");const Ce=be.shift();let ft=be.shift();const vt=ft.indexOf("(")!==-1,Qt=ft.indexOf(".")!==-1;if(Qt)be=ft.split("."),ft=be.shift(),ce.member=be.shift();else if(vt){const Bt=ft.split("(");ft=Bt.shift();for(let Zt=0;Zt<Bt.length;Zt++)Bt[Zt]=parseInt(Bt[Zt].replace(/\)/,""));ce.indices=Bt}return ce.id=Ce,ce.sid=ft,ce.arraySyntax=vt,ce.memberSyntax=Qt,ce.sampler=o(ue.getAttribute("source")),ce}function y(ue){const ce=[],Se=ue.channels,be=ue.samplers,Ce=ue.sources;for(const ft in Se)if(Se.hasOwnProperty(ft)){const vt=Se[ft],Qt=be[vt.sampler],Bt=Qt.inputs.INPUT,Zt=Qt.inputs.OUTPUT,vn=Ce[Bt],Dt=Ce[Zt],yn=w(vt,vn,Dt);A(yn,ce)}return ce}function S(ue){return m(Tn.animations[ue],y)}function w(ue,ce,Se){const be=Tn.nodes[ue.id],Ce=Bn(be.id),ft=be.transforms[ue.sid],vt=be.matrix.clone().transpose();let Qt,Bt,Zt,vn,Dt,yn;const an={};switch(ft){case"matrix":for(Zt=0,vn=ce.array.length;Zt<vn;Zt++)if(Qt=ce.array[Zt],Bt=Zt*Se.stride,an[Qt]===void 0&&(an[Qt]={}),ue.arraySyntax===!0){const Qi=Se.array[Bt],Ei=ue.indices[0]+4*ue.indices[1];an[Qt][Ei]=Qi}else for(Dt=0,yn=Se.stride;Dt<yn;Dt++)an[Qt][Dt]=Se.array[Bt+Dt];break;case"translate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',ft);break;case"rotate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',ft);break;case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',ft);break}const Sn=x(an,vt);return{name:Ce.uuid,keyframes:Sn}}function x(ue,ce){const Se=[];for(const Ce in ue)Se.push({time:parseFloat(Ce),value:ue[Ce]});Se.sort(be);for(let Ce=0;Ce<16;Ce++)E(Se,Ce,ce.elements[Ce]);return Se;function be(Ce,ft){return Ce.time-ft.time}}const T=new ke,C=new ke,M=new as;function A(ue,ce){const Se=ue.keyframes,be=ue.name,Ce=[],ft=[],vt=[],Qt=[];for(let Bt=0,Zt=Se.length;Bt<Zt;Bt++){const vn=Se[Bt],Dt=vn.time,yn=vn.value;Ie.fromArray(yn).transpose(),Ie.decompose(T,M,C),Ce.push(Dt),ft.push(T.x,T.y,T.z),vt.push(M.x,M.y,M.z,M.w),Qt.push(C.x,C.y,C.z)}return ft.length>0&&ce.push(new qd(be+".position",Ce,ft)),vt.length>0&&ce.push(new ru(be+".quaternion",Ce,vt)),Qt.length>0&&ce.push(new qd(be+".scale",Ce,Qt)),ce}function E(ue,ce,Se){let be,Ce=!0,ft,vt;for(ft=0,vt=ue.length;ft<vt;ft++)be=ue[ft],be.value[ce]===void 0?be.value[ce]=null:Ce=!1;if(Ce===!0)for(ft=0,vt=ue.length;ft<vt;ft++)be=ue[ft],be.value[ce]=Se;else I(ue,ce)}function I(ue,ce){let Se,be;for(let Ce=0,ft=ue.length;Ce<ft;Ce++){const vt=ue[Ce];if(vt.value[ce]===null){if(Se=P(ue,Ce,ce),be=D(ue,Ce,ce),Se===null){vt.value[ce]=be.value[ce];continue}if(be===null){vt.value[ce]=Se.value[ce];continue}L(vt,Se,be,ce)}}}function P(ue,ce,Se){for(;ce>=0;){const be=ue[ce];if(be.value[Se]!==null)return be;ce--}return null}function D(ue,ce,Se){for(;ce<ue.length;){const be=ue[ce];if(be.value[Se]!==null)return be;ce++}return null}function L(ue,ce,Se,be){if(Se.time-ce.time===0){ue.value[be]=ce.value[be];return}ue.value[be]=(ue.time-ce.time)*(Se.value[be]-ce.value[be])/(Se.time-ce.time)+ce.value[be]}function R(ue){const ce={name:ue.getAttribute("id")||"default",start:parseFloat(ue.getAttribute("start")||0),end:parseFloat(ue.getAttribute("end")||0),animations:[]};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"instance_animation":ce.animations.push(o(Ce.getAttribute("url")));break}}Tn.clips[ue.getAttribute("id")]=ce}function B(ue){const ce=[],Se=ue.name,be=ue.end-ue.start||-1,Ce=ue.animations;for(let ft=0,vt=Ce.length;ft<vt;ft++){const Qt=S(Ce[ft]);for(let Bt=0,Zt=Qt.length;Bt<Zt;Bt++)ce.push(Qt[Bt])}return new Zh(Se,be,ce)}function k(ue){return m(Tn.clips[ue],B)}function O(ue){const ce={};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"skin":ce.id=o(Ce.getAttribute("source")),ce.skin=U(Ce);break;case"morph":ce.id=o(Ce.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");break}}Tn.controllers[ue.getAttribute("id")]=ce}function U(ue){const ce={sources:{}};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"bind_shape_matrix":ce.bindShapeMatrix=s(Ce.textContent);break;case"source":const ft=Ce.getAttribute("id");ce.sources[ft]=$e(Ce);break;case"joints":ce.joints=G(Ce);break;case"vertex_weights":ce.vertexWeights=q(Ce);break}}return ce}function G(ue){const ce={inputs:{}};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"input":const ft=Ce.getAttribute("semantic"),vt=o(Ce.getAttribute("source"));ce.inputs[ft]=vt;break}}return ce}function q(ue){const ce={inputs:{}};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"input":const ft=Ce.getAttribute("semantic"),vt=o(Ce.getAttribute("source")),Qt=parseInt(Ce.getAttribute("offset"));ce.inputs[ft]={id:vt,offset:Qt};break;case"vcount":ce.vcount=a(Ce.textContent);break;case"v":ce.v=a(Ce.textContent);break}}return ce}function W(ue){const ce={id:ue.id},Se=Tn.geometries[ce.id];return ue.skin!==void 0&&(ce.skin=Y(ue.skin),Se.sources.skinIndices=ce.skin.indices,Se.sources.skinWeights=ce.skin.weights),ce}function Y(ue){const Se={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},be=ue.sources,Ce=ue.vertexWeights,ft=Ce.vcount,vt=Ce.v,Qt=Ce.inputs.JOINT.offset,Bt=Ce.inputs.WEIGHT.offset,Zt=ue.sources[ue.joints.inputs.JOINT],vn=ue.sources[ue.joints.inputs.INV_BIND_MATRIX],Dt=be[Ce.inputs.WEIGHT.id].array;let yn=0,an,Sn,gn;for(an=0,gn=ft.length;an<gn;an++){const Ei=ft[an],yi=[];for(Sn=0;Sn<Ei;Sn++){const _i=vt[yn+Qt],fc=vt[yn+Bt],ra=Dt[fc];yi.push({index:_i,weight:ra}),yn+=2}for(yi.sort(Qi),Sn=0;Sn<4;Sn++){const _i=yi[Sn];_i!==void 0?(Se.indices.array.push(_i.index),Se.weights.array.push(_i.weight)):(Se.indices.array.push(0),Se.weights.array.push(0))}}for(ue.bindShapeMatrix?Se.bindMatrix=new nn().fromArray(ue.bindShapeMatrix).transpose():Se.bindMatrix=new nn().identity(),an=0,gn=Zt.array.length;an<gn;an++){const Ei=Zt.array[an],yi=new nn().fromArray(vn.array,an*vn.stride).transpose();Se.joints.push({name:Ei,boneInverse:yi})}return Se;function Qi(Ei,yi){return yi.weight-Ei.weight}}function J(ue){return m(Tn.controllers[ue],W)}function Z(ue){const ce={init_from:i(ue,"init_from")[0].textContent};Tn.images[ue.getAttribute("id")]=ce}function ee(ue){return ue.build!==void 0?ue.build:ue.init_from}function me(ue){const ce=Tn.images[ue];return ce!==void 0?m(ce,ee):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",ue),null)}function ye(ue){const ce={};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"profile_COMMON":ce.profile=Te(Ce);break}}Tn.effects[ue.getAttribute("id")]=ce}function Te(ue){const ce={surfaces:{},samplers:{}};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"newparam":Ee(Ce,ce);break;case"technique":ce.technique=j(Ce);break;case"extra":ce.extra=Fe(Ce);break}}return ce}function Ee(ue,ce){const Se=ue.getAttribute("sid");for(let be=0,Ce=ue.childNodes.length;be<Ce;be++){const ft=ue.childNodes[be];if(ft.nodeType===1)switch(ft.nodeName){case"surface":ce.surfaces[Se]=H(ft);break;case"sampler2D":ce.samplers[Se]=Q(ft);break}}}function H(ue){const ce={};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"init_from":ce.init_from=Ce.textContent;break}}return ce}function Q(ue){const ce={};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"source":ce.source=Ce.textContent;break}}return ce}function j(ue){const ce={};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"constant":case"lambert":case"blinn":case"phong":ce.type=Ce.nodeName,ce.parameters=Pe(Ce);break;case"extra":ce.extra=Fe(Ce);break}}return ce}function Pe(ue){const ce={};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":ce[Ce.nodeName]=we(Ce);break;case"transparent":ce[Ce.nodeName]={opaque:Ce.hasAttribute("opaque")?Ce.getAttribute("opaque"):"A_ONE",data:we(Ce)};break}}return ce}function we(ue){const ce={};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"color":ce[Ce.nodeName]=s(Ce.textContent);break;case"float":ce[Ce.nodeName]=parseFloat(Ce.textContent);break;case"texture":ce[Ce.nodeName]={id:Ce.getAttribute("texture"),extra:De(Ce)};break}}return ce}function De(ue){const ce={technique:{}};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"extra":Me(Ce,ce);break}}return ce}function Me(ue,ce){for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"technique":Ae(Ce,ce);break}}}function Ae(ue,ce){for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":ce.technique[Ce.nodeName]=parseFloat(Ce.textContent);break;case"wrapU":case"wrapV":Ce.textContent.toUpperCase()==="TRUE"?ce.technique[Ce.nodeName]=1:Ce.textContent.toUpperCase()==="FALSE"?ce.technique[Ce.nodeName]=0:ce.technique[Ce.nodeName]=parseInt(Ce.textContent);break;case"bump":ce[Ce.nodeName]=z(Ce);break}}}function Fe(ue){const ce={};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"technique":ce.technique=ne(Ce);break}}return ce}function ne(ue){const ce={};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"double_sided":ce[Ce.nodeName]=parseInt(Ce.textContent);break;case"bump":ce[Ce.nodeName]=z(Ce);break}}return ce}function z(ue){const ce={};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"texture":ce[Ce.nodeName]={id:Ce.getAttribute("texture"),texcoord:Ce.getAttribute("texcoord"),extra:De(Ce)};break}}return ce}function K(ue){return ue}function ae(ue){return m(Tn.effects[ue],K)}function xe(ue){const ce={name:ue.getAttribute("name")};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"instance_effect":ce.url=o(Ce.getAttribute("url"));break}}Tn.materials[ue.getAttribute("id")]=ce}function Le(ue){let ce,Se=ue.slice((ue.lastIndexOf(".")-1>>>0)+2);switch(Se=Se.toLowerCase(),Se){case"tga":ce=Tr;break;default:ce=Bs}return ce}function Xe(ue){const ce=ae(ue.url),Se=ce.profile.technique;let be;switch(Se.type){case"phong":case"blinn":be=new Xc;break;case"lambert":be=new aO;break;default:be=new al;break}be.name=ue.name||"";function Ce(Bt,Zt=null){const vn=ce.profile.samplers[Bt.id];let Dt=null;if(vn!==void 0){const yn=ce.profile.surfaces[vn.source];Dt=me(yn.init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),Dt=me(Bt.id);if(Dt!==null){const yn=Le(Dt);if(yn!==void 0){const an=yn.load(Dt),Sn=Bt.extra;if(Sn!==void 0&&Sn.technique!==void 0&&c(Sn.technique)===!1){const gn=Sn.technique;an.wrapS=gn.wrapU?ha:Nr,an.wrapT=gn.wrapV?ha:Nr,an.offset.set(gn.offsetU||0,gn.offsetV||0),an.repeat.set(gn.repeatU||1,gn.repeatV||1)}else an.wrapS=ha,an.wrapT=ha;return Zt!==null&&(an.encoding=Zt),an}else return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",Dt),null}else return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",Bt.id),null}const ft=Se.parameters;for(const Bt in ft){const Zt=ft[Bt];switch(Bt){case"diffuse":Zt.color&&be.color.fromArray(Zt.color),Zt.texture&&(be.map=Ce(Zt.texture,Xn));break;case"specular":Zt.color&&be.specular&&be.specular.fromArray(Zt.color),Zt.texture&&(be.specularMap=Ce(Zt.texture));break;case"bump":Zt.texture&&(be.normalMap=Ce(Zt.texture));break;case"ambient":Zt.texture&&(be.lightMap=Ce(Zt.texture,Xn));break;case"shininess":Zt.float&&be.shininess&&(be.shininess=Zt.float);break;case"emission":Zt.color&&be.emissive&&be.emissive.fromArray(Zt.color),Zt.texture&&(be.emissiveMap=Ce(Zt.texture,Xn));break}}be.color.convertSRGBToLinear(),be.specular&&be.specular.convertSRGBToLinear(),be.emissive&&be.emissive.convertSRGBToLinear();let vt=ft.transparent,Qt=ft.transparency;if(Qt===void 0&&vt&&(Qt={float:1}),vt===void 0&&Qt&&(vt={opaque:"A_ONE",data:{color:[1,1,1,1]}}),vt&&Qt)if(vt.data.texture)be.transparent=!0;else{const Bt=vt.data.color;switch(vt.opaque){case"A_ONE":be.opacity=Bt[3]*Qt.float;break;case"RGB_ZERO":be.opacity=1-Bt[0]*Qt.float;break;case"A_ZERO":be.opacity=1-Bt[3]*Qt.float;break;case"RGB_ONE":be.opacity=Bt[0]*Qt.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',vt.opaque)}be.opacity<1&&(be.transparent=!0)}if(Se.extra!==void 0&&Se.extra.technique!==void 0){const Bt=Se.extra.technique;for(const Zt in Bt){const vn=Bt[Zt];switch(Zt){case"double_sided":be.side=vn===1?$d:Vd;break;case"bump":be.normalMap=Ce(vn.texture),be.normalScale=new St(1,1);break}}}return be}function je(ue){return m(Tn.materials[ue],Xe)}function he(ue){const ce={name:ue.getAttribute("name")};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"optics":ce.optics=Ye(Ce);break}}Tn.cameras[ue.getAttribute("id")]=ce}function Ye(ue){for(let ce=0;ce<ue.childNodes.length;ce++){const Se=ue.childNodes[ce];switch(Se.nodeName){case"technique_common":return Ke(Se)}}return{}}function Ke(ue){const ce={};for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];switch(be.nodeName){case"perspective":case"orthographic":ce.technique=be.nodeName,ce.parameters=V(be);break}}return ce}function V(ue){const ce={};for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];switch(be.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":ce[be.nodeName]=parseFloat(be.textContent);break}}return ce}function re(ue){let ce;switch(ue.optics.technique){case"perspective":ce=new kr(ue.optics.parameters.yfov,ue.optics.parameters.aspect_ratio,ue.optics.parameters.znear,ue.optics.parameters.zfar);break;case"orthographic":let Se=ue.optics.parameters.ymag,be=ue.optics.parameters.xmag;const Ce=ue.optics.parameters.aspect_ratio;be=be===void 0?Se*Ce:be,Se=Se===void 0?be/Ce:Se,be*=.5,Se*=.5,ce=new Tg(-be,be,Se,-Se,ue.optics.parameters.znear,ue.optics.parameters.zfar);break;default:ce=new kr;break}return ce.name=ue.name||"",ce}function te(ue){const ce=Tn.cameras[ue];return ce!==void 0?m(ce,re):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",ue),null)}function pe(ue){let ce={};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"technique_common":ce=se(Ce);break}}Tn.lights[ue.getAttribute("id")]=ce}function se(ue){const ce={};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"directional":case"point":case"spot":case"ambient":ce.technique=Ce.nodeName,ce.parameters=de(Ce)}}return ce}function de(ue){const ce={};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"color":const ft=s(Ce.textContent);ce.color=new zt().fromArray(ft).convertSRGBToLinear();break;case"falloff_angle":ce.falloffAngle=parseFloat(Ce.textContent);break;case"quadratic_attenuation":const vt=parseFloat(Ce.textContent);ce.distance=vt?Math.sqrt(1/vt):0;break}}return ce}function qe(ue){let ce;switch(ue.technique){case"directional":ce=new Tb;break;case"point":ce=new Jh;break;case"spot":ce=new XM;break;case"ambient":ce=new YM;break}return ue.parameters.color&&ce.color.copy(ue.parameters.color),ue.parameters.distance&&(ce.distance=ue.parameters.distance),ce}function fe(ue){const ce=Tn.lights[ue];return ce!==void 0?m(ce,qe):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",ue),null)}function Je(ue){const ce={name:ue.getAttribute("name"),sources:{},vertices:{},primitives:[]},Se=i(ue,"mesh")[0];if(Se!==void 0){for(let be=0;be<Se.childNodes.length;be++){const Ce=Se.childNodes[be];if(Ce.nodeType!==1)continue;const ft=Ce.getAttribute("id");switch(Ce.nodeName){case"source":ce.sources[ft]=$e(Ce);break;case"vertices":ce.vertices=et(Ce);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",Ce.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":ce.primitives.push(ht(Ce));break;default:console.log(Ce)}}Tn.geometries[ue.getAttribute("id")]=ce}}function $e(ue){const ce={array:[],stride:3};for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];if(be.nodeType===1)switch(be.nodeName){case"float_array":ce.array=s(be.textContent);break;case"Name_array":ce.array=r(be.textContent);break;case"technique_common":const Ce=i(be,"accessor")[0];Ce!==void 0&&(ce.stride=parseInt(Ce.getAttribute("stride")));break}}return ce}function et(ue){const ce={};for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];be.nodeType===1&&(ce[be.getAttribute("semantic")]=o(be.getAttribute("source")))}return ce}function ht(ue){const ce={type:ue.nodeName,material:ue.getAttribute("material"),count:parseInt(ue.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let Se=0,be=ue.childNodes.length;Se<be;Se++){const Ce=ue.childNodes[Se];if(Ce.nodeType===1)switch(Ce.nodeName){case"input":const ft=o(Ce.getAttribute("source")),vt=Ce.getAttribute("semantic"),Qt=parseInt(Ce.getAttribute("offset")),Bt=parseInt(Ce.getAttribute("set")),Zt=Bt>0?vt+Bt:vt;ce.inputs[Zt]={id:ft,offset:Qt},ce.stride=Math.max(ce.stride,Qt+1),vt==="TEXCOORD"&&(ce.hasUV=!0);break;case"vcount":ce.vcount=a(Ce.textContent);break;case"p":ce.p=a(Ce.textContent);break}}return ce}function st(ue){const ce={};for(let Se=0;Se<ue.length;Se++){const be=ue[Se];ce[be.type]===void 0&&(ce[be.type]=[]),ce[be.type].push(be)}return ce}function Rt(ue){let ce=0;for(let Se=0,be=ue.length;Se<be;Se++)ue[Se].hasUV===!0&&ce++;ce>0&&ce<ue.length&&(ue.uvsNeedsFix=!0)}function Vt(ue){const ce={},Se=ue.sources,be=ue.vertices,Ce=ue.primitives;if(Ce.length===0)return{};const ft=st(Ce);for(const vt in ft){const Qt=ft[vt];Rt(Qt),ce[vt]=Pn(Qt,Se,be)}return ce}function Pn(ue,ce,Se){const be={},Ce={array:[],stride:0},ft={array:[],stride:0},vt={array:[],stride:0},Qt={array:[],stride:0},Bt={array:[],stride:0},Zt={array:[],stride:4},vn={array:[],stride:4},Dt=new si,yn=[];let an=0;for(let Sn=0;Sn<ue.length;Sn++){const gn=ue[Sn],Qi=gn.inputs;let Ei=0;switch(gn.type){case"lines":case"linestrips":Ei=gn.count*2;break;case"triangles":Ei=gn.count*3;break;case"polylist":for(let yi=0;yi<gn.count;yi++){const _i=gn.vcount[yi];switch(_i){case 3:Ei+=3;break;case 4:Ei+=6;break;default:Ei+=(_i-2)*3;break}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",gn.type)}Dt.addGroup(an,Ei,Sn),an+=Ei,gn.material&&yn.push(gn.material);for(const yi in Qi){const _i=Qi[yi];switch(yi){case"VERTEX":for(const fc in Se){const ra=Se[fc];switch(fc){case"POSITION":const hp=Ce.array.length;if(Jt(gn,ce[ra],_i.offset,Ce.array),Ce.stride=ce[ra].stride,ce.skinWeights&&ce.skinIndices&&(Jt(gn,ce.skinIndices,_i.offset,Zt.array),Jt(gn,ce.skinWeights,_i.offset,vn.array)),gn.hasUV===!1&&ue.uvsNeedsFix===!0){const FZ=(Ce.array.length-hp)/Ce.stride;for(let ZO=0;ZO<FZ;ZO++)vt.array.push(0,0)}break;case"NORMAL":Jt(gn,ce[ra],_i.offset,ft.array),ft.stride=ce[ra].stride;break;case"COLOR":Jt(gn,ce[ra],_i.offset,Bt.array),Bt.stride=ce[ra].stride;break;case"TEXCOORD":Jt(gn,ce[ra],_i.offset,vt.array),vt.stride=ce[ra].stride;break;case"TEXCOORD1":Jt(gn,ce[ra],_i.offset,Qt.array),vt.stride=ce[ra].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',fc)}}break;case"NORMAL":Jt(gn,ce[_i.id],_i.offset,ft.array),ft.stride=ce[_i.id].stride;break;case"COLOR":Jt(gn,ce[_i.id],_i.offset,Bt.array,!0),Bt.stride=ce[_i.id].stride;break;case"TEXCOORD":Jt(gn,ce[_i.id],_i.offset,vt.array),vt.stride=ce[_i.id].stride;break;case"TEXCOORD1":Jt(gn,ce[_i.id],_i.offset,Qt.array),Qt.stride=ce[_i.id].stride;break}}}return Ce.array.length>0&&Dt.setAttribute("position",new qt(Ce.array,Ce.stride)),ft.array.length>0&&Dt.setAttribute("normal",new qt(ft.array,ft.stride)),Bt.array.length>0&&Dt.setAttribute("color",new qt(Bt.array,Bt.stride)),vt.array.length>0&&Dt.setAttribute("uv",new qt(vt.array,vt.stride)),Qt.array.length>0&&Dt.setAttribute("uv2",new qt(Qt.array,Qt.stride)),Zt.array.length>0&&Dt.setAttribute("skinIndex",new qt(Zt.array,Zt.stride)),vn.array.length>0&&Dt.setAttribute("skinWeight",new qt(vn.array,vn.stride)),be.data=Dt,be.type=ue[0].type,be.materialKeys=yn,be}function Jt(ue,ce,Se,be,Ce=!1){const ft=ue.p,vt=ue.stride,Qt=ue.vcount;function Bt(Dt){let yn=ft[Dt+Se]*vn;const an=yn+vn;for(;yn<an;yn++)be.push(Zt[yn]);if(Ce){const Sn=be.length-vn-1;Ar.setRGB(be[Sn+0],be[Sn+1],be[Sn+2]).convertSRGBToLinear(),be[Sn+0]=Ar.r,be[Sn+1]=Ar.g,be[Sn+2]=Ar.b}}const Zt=ce.array,vn=ce.stride;if(ue.vcount!==void 0){let Dt=0;for(let yn=0,an=Qt.length;yn<an;yn++){const Sn=Qt[yn];if(Sn===4){const gn=Dt+vt*0,Qi=Dt+vt*1,Ei=Dt+vt*2,yi=Dt+vt*3;Bt(gn),Bt(Qi),Bt(yi),Bt(Qi),Bt(Ei),Bt(yi)}else if(Sn===3){const gn=Dt+vt*0,Qi=Dt+vt*1,Ei=Dt+vt*2;Bt(gn),Bt(Qi),Bt(Ei)}else if(Sn>4)for(let gn=1,Qi=Sn-2;gn<=Qi;gn++){const Ei=Dt+vt*0,yi=Dt+vt*gn,_i=Dt+vt*(gn+1);Bt(Ei),Bt(yi),Bt(_i)}Dt+=vt*Sn}}else for(let Dt=0,yn=ft.length;Dt<yn;Dt+=vt)Bt(Dt)}function Ai(ue){return m(Tn.geometries[ue],Vt)}function pi(ue){const ce={name:ue.getAttribute("name")||"",joints:{},links:[]};for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];if(be.nodeType===1)switch(be.nodeName){case"technique_common":Gr(be,ce);break}}Tn.kinematicsModels[ue.getAttribute("id")]=ce}function Xa(ue){return ue.build!==void 0?ue.build:ue}function _l(ue){return m(Tn.kinematicsModels[ue],Xa)}function Gr(ue,ce){for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];if(be.nodeType===1)switch(be.nodeName){case"joint":ce.joints[be.getAttribute("sid")]=Ya(be);break;case"link":ce.links.push(lt(be));break}}}function Ya(ue){let ce;for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];if(be.nodeType===1)switch(be.nodeName){case"prismatic":case"revolute":ce=Oe(be);break}}return ce}function Oe(ue){const ce={sid:ue.getAttribute("sid"),name:ue.getAttribute("name")||"",axis:new ke,limits:{min:0,max:0},type:ue.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];if(be.nodeType===1)switch(be.nodeName){case"axis":const Ce=s(be.textContent);ce.axis.fromArray(Ce);break;case"limits":const ft=be.getElementsByTagName("max")[0],vt=be.getElementsByTagName("min")[0];ce.limits.max=parseFloat(ft.textContent),ce.limits.min=parseFloat(vt.textContent);break}}return ce.limits.min>=ce.limits.max&&(ce.static=!0),ce.middlePosition=(ce.limits.min+ce.limits.max)/2,ce}function lt(ue){const ce={sid:ue.getAttribute("sid"),name:ue.getAttribute("name")||"",attachments:[],transforms:[]};for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];if(be.nodeType===1)switch(be.nodeName){case"attachment_full":ce.attachments.push(dt(be));break;case"matrix":case"translate":case"rotate":ce.transforms.push(ct(be));break}}return ce}function dt(ue){const ce={joint:ue.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];if(be.nodeType===1)switch(be.nodeName){case"link":ce.links.push(lt(be));break;case"matrix":case"translate":case"rotate":ce.transforms.push(ct(be));break}}return ce}function ct(ue){const ce={type:ue.nodeName},Se=s(ue.textContent);switch(ce.type){case"matrix":ce.obj=new nn,ce.obj.fromArray(Se).transpose();break;case"translate":ce.obj=new ke,ce.obj.fromArray(Se);break;case"rotate":ce.obj=new ke,ce.obj.fromArray(Se),ce.angle=Is.degToRad(Se[3]);break}return ce}function Ue(ue){const ce={name:ue.getAttribute("name")||"",rigidBodies:{}};for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];if(be.nodeType===1)switch(be.nodeName){case"rigid_body":ce.rigidBodies[be.getAttribute("name")]={},pt(be,ce.rigidBodies[be.getAttribute("name")]);break}}Tn.physicsModels[ue.getAttribute("id")]=ce}function pt(ue,ce){for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];if(be.nodeType===1)switch(be.nodeName){case"technique_common":Lt(be,ce);break}}}function Lt(ue,ce){for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];if(be.nodeType===1)switch(be.nodeName){case"inertia":ce.inertia=s(be.textContent);break;case"mass":ce.mass=s(be.textContent)[0];break}}}function tn(ue){const ce={bindJointAxis:[]};for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];if(be.nodeType===1)switch(be.nodeName){case"bind_joint_axis":ce.bindJointAxis.push(ln(be));break}}Tn.kinematicsScenes[o(ue.getAttribute("url"))]=ce}function ln(ue){const ce={target:ue.getAttribute("target").split("/").pop()};for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];if(be.nodeType===1)switch(be.nodeName){case"axis":const Ce=be.getElementsByTagName("param")[0];ce.axis=Ce.textContent;const ft=ce.axis.split("inst_").pop().split("axis")[0];ce.jointIndex=ft.substring(0,ft.length-1);break}}return ce}function Fn(ue){return ue.build!==void 0?ue.build:ue}function An(ue){return m(Tn.kinematicsScenes[ue],Fn)}function kn(){const ue=Object.keys(Tn.kinematicsModels)[0],ce=Object.keys(Tn.kinematicsScenes)[0],Se=Object.keys(Tn.visualScenes)[0];if(ue===void 0||ce===void 0)return;const be=_l(ue),Ce=An(ce),ft=mn(Se),vt=Ce.bindJointAxis,Qt={};for(let vn=0,Dt=vt.length;vn<Dt;vn++){const yn=vt[vn],an=mi.querySelector('[sid="'+yn.target+'"]');if(an){const Sn=an.parentElement;Bt(yn.jointIndex,Sn)}}function Bt(vn,Dt){const yn=Dt.getAttribute("name"),an=be.joints[vn];ft.traverse(function(Sn){Sn.name===yn&&(Qt[vn]={object:Sn,transforms:_e(Dt),joint:an,position:an.zeroPosition})})}const Zt=new nn;bl={joints:be&&be.joints,getJointValue:function(vn){const Dt=Qt[vn];if(Dt)return Dt.position;console.warn("THREE.ColladaLoader: Joint "+vn+" doesn't exist.")},setJointValue:function(vn,Dt){const yn=Qt[vn];if(yn){const an=yn.joint;if(Dt>an.limits.max||Dt<an.limits.min)console.warn("THREE.ColladaLoader: Joint "+vn+" value "+Dt+" outside of limits (min: "+an.limits.min+", max: "+an.limits.max+").");else if(an.static)console.warn("THREE.ColladaLoader: Joint "+vn+" is static.");else{const Sn=yn.object,gn=an.axis,Qi=yn.transforms;Ie.identity();for(let Ei=0;Ei<Qi.length;Ei++){const yi=Qi[Ei];if(yi.sid&&yi.sid.indexOf(vn)!==-1)switch(an.type){case"revolute":Ie.multiply(Zt.makeRotationAxis(gn,Is.degToRad(Dt)));break;case"prismatic":Ie.multiply(Zt.makeTranslation(gn.x*Dt,gn.y*Dt,gn.z*Dt));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+an.type);break}else switch(yi.type){case"matrix":Ie.multiply(yi.obj);break;case"translate":Ie.multiply(Zt.makeTranslation(yi.obj.x,yi.obj.y,yi.obj.z));break;case"scale":Ie.scale(yi.obj);break;case"rotate":Ie.multiply(Zt.makeRotationAxis(yi.obj,yi.angle));break}}Sn.matrix.copy(Ie),Sn.matrix.decompose(Sn.position,Sn.quaternion,Sn.scale),Qt[vn].position=Dt}}else console.log("THREE.ColladaLoader: "+vn+" does not exist.")}}}function _e(ue){const ce=[],Se=mi.querySelector('[id="'+ue.id+'"]');for(let be=0;be<Se.childNodes.length;be++){const Ce=Se.childNodes[be];if(Ce.nodeType!==1)continue;let ft,vt;switch(Ce.nodeName){case"matrix":ft=s(Ce.textContent);const Qt=new nn().fromArray(ft).transpose();ce.push({sid:Ce.getAttribute("sid"),type:Ce.nodeName,obj:Qt});break;case"translate":case"scale":ft=s(Ce.textContent),vt=new ke().fromArray(ft),ce.push({sid:Ce.getAttribute("sid"),type:Ce.nodeName,obj:vt});break;case"rotate":ft=s(Ce.textContent),vt=new ke().fromArray(ft);const Bt=Is.degToRad(ft[3]);ce.push({sid:Ce.getAttribute("sid"),type:Ce.nodeName,obj:vt,angle:Bt});break}}return ce}function Qe(ue){const ce=ue.getElementsByTagName("node");for(let Se=0;Se<ce.length;Se++){const be=ce[Se];be.hasAttribute("id")===!1&&be.setAttribute("id",l())}}const Ie=new nn,Ge=new ke;function Ve(ue){const ce={name:ue.getAttribute("name")||"",type:ue.getAttribute("type"),id:ue.getAttribute("id"),sid:ue.getAttribute("sid"),matrix:new nn,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];if(be.nodeType!==1)continue;let Ce;switch(be.nodeName){case"node":ce.nodes.push(be.getAttribute("id")),Ve(be);break;case"instance_camera":ce.instanceCameras.push(o(be.getAttribute("url")));break;case"instance_controller":ce.instanceControllers.push(it(be));break;case"instance_light":ce.instanceLights.push(o(be.getAttribute("url")));break;case"instance_geometry":ce.instanceGeometries.push(it(be));break;case"instance_node":ce.instanceNodes.push(o(be.getAttribute("url")));break;case"matrix":Ce=s(be.textContent),ce.matrix.multiply(Ie.fromArray(Ce).transpose()),ce.transforms[be.getAttribute("sid")]=be.nodeName;break;case"translate":Ce=s(be.textContent),Ge.fromArray(Ce),ce.matrix.multiply(Ie.makeTranslation(Ge.x,Ge.y,Ge.z)),ce.transforms[be.getAttribute("sid")]=be.nodeName;break;case"rotate":Ce=s(be.textContent);const ft=Is.degToRad(Ce[3]);ce.matrix.multiply(Ie.makeRotationAxis(Ge.fromArray(Ce),ft)),ce.transforms[be.getAttribute("sid")]=be.nodeName;break;case"scale":Ce=s(be.textContent),ce.matrix.scale(Ge.fromArray(Ce)),ce.transforms[be.getAttribute("sid")]=be.nodeName;break;case"extra":break;default:console.log(be)}}return bn(ce.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",ce.id):Tn.nodes[ce.id]=ce,ce}function it(ue){const ce={id:o(ue.getAttribute("url")),materials:{},skeletons:[]};for(let Se=0;Se<ue.childNodes.length;Se++){const be=ue.childNodes[Se];switch(be.nodeName){case"bind_material":const Ce=be.getElementsByTagName("instance_material");for(let ft=0;ft<Ce.length;ft++){const vt=Ce[ft],Qt=vt.getAttribute("symbol"),Bt=vt.getAttribute("target");ce.materials[Qt]=o(Bt)}break;case"skeleton":ce.skeletons.push(o(be.textContent));break}}return ce}function It(ue,ce){const Se=[],be=[];let Ce,ft,vt;for(Ce=0;Ce<ue.length;Ce++){const Zt=ue[Ce];let vn;if(bn(Zt))vn=Bn(Zt),Et(vn,ce,Se);else if(qn(Zt)){const yn=Tn.visualScenes[Zt].children;for(let an=0;an<yn.length;an++){const Sn=yn[an];if(Sn.type==="JOINT"){const gn=Bn(Sn.id);Et(gn,ce,Se)}}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",Zt)}for(Ce=0;Ce<ce.length;Ce++)for(ft=0;ft<Se.length;ft++)if(vt=Se[ft],vt.bone.name===ce[Ce].name){be[Ce]=vt,vt.processed=!0;break}for(Ce=0;Ce<Se.length;Ce++)vt=Se[Ce],vt.processed===!1&&(be.push(vt),vt.processed=!0);const Qt=[],Bt=[];for(Ce=0;Ce<be.length;Ce++)vt=be[Ce],Qt.push(vt.bone),Bt.push(vt.boneInverse);return new Eg(Qt,Bt)}function Et(ue,ce,Se){ue.traverse(function(be){if(be.isBone===!0){let Ce;for(let ft=0;ft<ce.length;ft++){const vt=ce[ft];if(vt.name===be.name){Ce=vt.boneInverse;break}}Ce===void 0&&(Ce=new nn),Se.push({bone:be,boneInverse:Ce,processed:!1})}})}function Ut(ue){const ce=[],Se=ue.matrix,be=ue.nodes,Ce=ue.type,ft=ue.instanceCameras,vt=ue.instanceControllers,Qt=ue.instanceLights,Bt=ue.instanceGeometries,Zt=ue.instanceNodes;for(let Dt=0,yn=be.length;Dt<yn;Dt++)ce.push(Bn(be[Dt]));for(let Dt=0,yn=ft.length;Dt<yn;Dt++){const an=te(ft[Dt]);an!==null&&ce.push(an.clone())}for(let Dt=0,yn=vt.length;Dt<yn;Dt++){const an=vt[Dt],Sn=J(an.id),gn=Ai(Sn.id),Qi=dn(gn,an.materials),Ei=an.skeletons,yi=Sn.skin.joints,_i=It(Ei,yi);for(let fc=0,ra=Qi.length;fc<ra;fc++){const hp=Qi[fc];hp.isSkinnedMesh&&(hp.bind(_i,Sn.skin.bindMatrix),hp.normalizeSkinWeights()),ce.push(hp)}}for(let Dt=0,yn=Qt.length;Dt<yn;Dt++){const an=fe(Qt[Dt]);an!==null&&ce.push(an.clone())}for(let Dt=0,yn=Bt.length;Dt<yn;Dt++){const an=Bt[Dt],Sn=Ai(an.id),gn=dn(Sn,an.materials);for(let Qi=0,Ei=gn.length;Qi<Ei;Qi++)ce.push(gn[Qi])}for(let Dt=0,yn=Zt.length;Dt<yn;Dt++)ce.push(Bn(Zt[Dt]).clone());let vn;if(be.length===0&&ce.length===1)vn=ce[0];else{vn=Ce==="JOINT"?new Gv:new pa;for(let Dt=0;Dt<ce.length;Dt++)vn.add(ce[Dt])}return vn.name=Ce==="JOINT"?ue.sid:ue.name,vn.matrix.copy(Se),vn.matrix.decompose(vn.position,vn.quaternion,vn.scale),vn}const pn=new al({color:16711935});function _n(ue,ce){const Se=[];for(let be=0,Ce=ue.length;be<Ce;be++){const ft=ce[ue[be]];ft===void 0?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",ue[be]),Se.push(pn)):Se.push(je(ft))}return Se}function dn(ue,ce){const Se=[];for(const be in ue){const Ce=ue[be],ft=_n(Ce.materialKeys,ce);ft.length===0&&(be==="lines"||be==="linestrips"?ft.push(new dl):ft.push(new Xc));const vt=Ce.data.attributes.skinIndex!==void 0,Qt=ft.length===1?ft[0]:ft;let Bt;switch(be){case"lines":Bt=new Qh(Ce.data,Qt);break;case"linestrips":Bt=new Ig(Ce.data,Qt);break;case"triangles":case"polylist":vt?Bt=new KM(Ce.data,Qt):Bt=new Br(Ce.data,Qt);break}Se.push(Bt)}return Se}function bn(ue){return Tn.nodes[ue]!==void 0}function Bn(ue){return m(Tn.nodes[ue],Ut)}function Ni(ue){const ce={name:ue.getAttribute("name"),children:[]};Qe(ue);const Se=i(ue,"node");for(let be=0;be<Se.length;be++)ce.children.push(Ve(Se[be]));Tn.visualScenes[ue.getAttribute("id")]=ce}function $n(ue){const ce=new pa;ce.name=ue.name;const Se=ue.children;for(let be=0;be<Se.length;be++){const Ce=Se[be];ce.add(Bn(Ce.id))}return ce}function qn(ue){return Tn.visualScenes[ue]!==void 0}function mn(ue){return m(Tn.visualScenes[ue],$n)}function ir(ue){const ce=i(ue,"instance_visual_scene")[0];return mn(o(ce.getAttribute("url")))}function gi(){const ue=Tn.clips;if(c(ue)===!0){if(c(Tn.animations)===!1){const ce=[];for(const Se in Tn.animations){const be=S(Se);for(let Ce=0,ft=be.length;Ce<ft;Ce++)ce.push(be[Ce])}bu.push(new Zh("default",-1,ce))}}else for(const ce in ue)bu.push(k(ce))}function Ma(ue){let ce="";const Se=[ue];for(;Se.length;){const be=Se.shift();be.nodeType===Node.TEXT_NODE?ce+=be.textContent:(ce+=`
`,Se.push.apply(Se,be.childNodes))}return ce.trim()}if(e.length===0)return{scene:new Zk};const uc=new DOMParser().parseFromString(e,"application/xml"),mi=i(uc,"COLLADA")[0],dc=uc.getElementsByTagName("parsererror")[0];if(dc!==void 0){const ue=i(dc,"div")[0];let ce;return ue?ce=ue.textContent:ce=Ma(dc),console.error(`THREE.ColladaLoader: Failed to parse collada file.
`,ce),null}const Bi=mi.getAttribute("version");console.log("THREE.ColladaLoader: File version",Bi);const Ns=u(i(mi,"asset")[0]),Bs=new qv(this.manager);Bs.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);let Tr;LP&&(Tr=new LP(this.manager),Tr.setPath(this.resourcePath||t));const Ar=new zt,bu=[];let bl={},BZ=0;const Tn={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};h(mi,"library_animations","animation",v),h(mi,"library_animation_clips","animation_clip",R),h(mi,"library_controllers","controller",O),h(mi,"library_images","image",Z),h(mi,"library_effects","effect",ye),h(mi,"library_materials","material",xe),h(mi,"library_cameras","camera",he),h(mi,"library_lights","light",pe),h(mi,"library_geometries","geometry",Je),h(mi,"library_nodes","node",Ve),h(mi,"library_visual_scenes","visual_scene",Ni),h(mi,"library_kinematics_models","kinematics_model",pi),h(mi,"library_physics_models","physics_model",Ue),h(mi,"scene","instance_kinematics_scene",tn),p(Tn.animations,y),p(Tn.clips,B),p(Tn.controllers,W),p(Tn.images,ee),p(Tn.effects,K),p(Tn.materials,Xe),p(Tn.cameras,re),p(Tn.lights,qe),p(Tn.geometries,Vt),p(Tn.visualScenes,$n),gi(),kn();const Pb=ir(i(mi,"scene")[0]);return Pb.animations=bu,Ns.upAxis==="Z_UP"&&(console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."),Pb.quaternion.setFromEuler(new Vc(-Math.PI/2,0,0))),Pb.scale.multiplyScalar(Ns.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),bu},kinematics:bl,library:Tn,scene:Pb}}}class z9e extends ps{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new G9e(t)}),this.register(function(t){return new Q9e(t)}),this.register(function(t){return new Z9e(t)}),this.register(function(t){return new K9e(t)}),this.register(function(t){return new q9e(t)}),this.register(function(t){return new X9e(t)}),this.register(function(t){return new Y9e(t)}),this.register(function(t){return new $9e(t)}),this.register(function(t){return new j9e(t)}),this.register(function(t){return new W9e(t)}),this.register(function(t){return new H9e(t)}),this.register(function(t){return new J9e(t)})}load(e,t,i,r){const s=this;let a;this.resourcePath!==""?a=this.resourcePath:this.path!==""?a=this.path:a=ks.extractUrlBase(e),this.manager.itemStart(e);const o=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Os(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,a,function(u){t(u),s.manager.itemEnd(e)},o)}catch(u){o(u)}},i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const a={},o={};if(typeof e=="string")s=e;else if(ks.decodeText(new Uint8Array(e,0,4))===WQ){try{a[ni.KHR_BINARY_GLTF]=new e7e(e)}catch(d){r&&r(d);return}s=a[ni.KHR_BINARY_GLTF].content}else s=ks.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(l.asset===void 0||l.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new h7e(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);o[d.name]=d,a[d.name]=!0}if(l.extensionsUsed)for(let u=0;u<l.extensionsUsed.length;++u){const d=l.extensionsUsed[u],f=l.extensionsRequired||[];switch(d){case ni.KHR_MATERIALS_UNLIT:a[d]=new V9e;break;case ni.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[d]=new i7e;break;case ni.KHR_DRACO_MESH_COMPRESSION:a[d]=new t7e(l,this.dracoLoader);break;case ni.KHR_TEXTURE_TRANSFORM:a[d]=new n7e;break;case ni.KHR_MESH_QUANTIZATION:a[d]=new r7e;break;default:f.indexOf(d)>=0&&o[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(a),c.setPlugins(o),c.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function U9e(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const ni={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class H9e{constructor(e){this.parser=e,this.name=ni.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new zt(16777215);l.color!==void 0&&u.fromArray(l.color);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new Tb(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Jh(u),c.distance=d;break;case"spot":c=new XM(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return i._getNodeRef(t.cache,o,l)})}}class V9e{constructor(){this.name=ni.KHR_MATERIALS_UNLIT}getMaterialType(){return al}extendParams(e,t,i){const r=[];e.color=new zt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Xn))}return Promise.all(r)}}class $9e{constructor(e){this.parser=e,this.name=ni.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class G9e{constructor(e){this.parser=e,this.name=ni.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rf}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new St(o,o)}return Promise.all(s)}}class W9e{constructor(e){this.parser=e,this.name=ni.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rf}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class K9e{constructor(e){this.parser=e,this.name=ni.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rf}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new zt(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];return a.sheenColorFactor!==void 0&&t.sheenColor.fromArray(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",a.sheenColorTexture,Xn)),a.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class q9e{constructor(e){this.parser=e,this.name=ni.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rf}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class X9e{constructor(e){this.parser=e,this.name=ni.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rf}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new zt(o[0],o[1],o[2]),Promise.all(s)}}class Y9e{constructor(e){this.parser=e,this.name=ni.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rf}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class j9e{constructor(e){this.parser=e,this.name=ni.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:rf}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new zt(o[0],o[1],o[2]),a.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",a.specularColorTexture,Xn)),Promise.all(s)}}class Q9e{constructor(e){this.parser=e,this.name=ni.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class Z9e{constructor(e){this.parser=e,this.name=ni.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let l=i.textureLoader;if(o.uri){const c=i.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,a.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class J9e{constructor(e){this.name=ni.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,a.ready]).then(function(o){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,d=r.byteStride,f=new ArrayBuffer(u*d),h=new Uint8Array(o[0],l,c);return a.decodeGltfBuffer(new Uint8Array(f),u,d,h,r.mode,r.filter),f})}else return null}}const WQ="glTF",I0=12,VV={JSON:1313821514,BIN:5130562};class e7e{constructor(e){this.name=ni.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,I0);if(this.header={magic:ks.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==WQ)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-I0,r=new DataView(e,I0);let s=0;for(;s<i;){const a=r.getUint32(s,!0);s+=4;const o=r.getUint32(s,!0);if(s+=4,o===VV.JSON){const l=new Uint8Array(e,I0+s,a);this.content=ks.decodeText(l)}else if(o===VV.BIN){const l=I0+s;this.body=e.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class t7e{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ni.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},c={};for(const u in a){const d=OP[u]||u.toLowerCase();o[d]=a[u]}for(const u in e.attributes){const d=OP[u]||u.toLowerCase();if(a[u]!==void 0){const f=i.accessors[e.attributes[u]],h=K_[f.componentType];c[d]=h,l[d]=f.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d){r.decodeDracoFile(u,function(f){for(const h in f.attributes){const p=f.attributes[h],m=l[h];m!==void 0&&(p.normalized=m)}d(f)},o,c)})})}}class n7e{constructor(){this.name=ni.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class kP extends Rg{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),i=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),o={specular:{value:new zt().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(l){for(const c in o)l.uniforms[c]=o[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(l){o.specular.value=l}},specularMap:{get:function(){return o.specularMap.value},set:function(l){o.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return o.glossiness.value},set:function(l){o.glossiness.value=l}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(l){o.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class i7e{constructor(){this.name=ni.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return kP}extendParams(e,t,i){const r=t.extensions[this.name];e.color=new zt(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const a=r.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(r.diffuseTexture!==void 0&&s.push(i.assignTexture(e,"map",r.diffuseTexture,Xn)),e.emissive=new zt(0,0,0),e.glossiness=r.glossinessFactor!==void 0?r.glossinessFactor:1,e.specular=new zt(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),r.specularGlossinessTexture!==void 0){const a=r.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",a)),s.push(i.assignTexture(e,"specularMap",a,Xn))}return Promise.all(s)}createMaterial(e){const t=new kP(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=op,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t}}class r7e{constructor(){this.name=ni.KHR_MESH_QUANTIZATION}}class KQ extends Mb{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)t[a]=i[s+a];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,c=o*3,u=r-t,d=(i-t)/u,f=d*d,h=f*d,p=e*c,m=p-c,v=-2*h+3*f,g=h-f,_=1-v,y=g-f+d;for(let S=0;S!==o;S++){const w=a[m+S+o],x=a[m+S+l]*u,T=a[p+S+o],C=a[p+S]*u;s[S]=_*w+y*x+v*T+g*C}return s}}const s7e=new as;class a7e extends KQ{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return s7e.fromArray(s).normalize().toArray(s),s}}const wc={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},K_={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},$V={9728:qr,9729:wr,9984:rC,9985:Vk,9986:sC,9987:_u},GV={33071:Nr,33648:P_,10497:ha},WV={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},OP={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},zu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},o7e={CUBICSPLINE:void 0,LINEAR:Vv,STEP:L_},WE={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function l7e(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Rg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Vd})),n.DefaultMaterial}function R0(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Wf(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function c7e(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(r=!0),d.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const a=[],o=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(i){const f=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;a.push(f)}if(r){const f=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;o.push(f)}if(s){const f=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(f)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],f=c[2];return i&&(n.morphAttributes.position=u),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=f),n.morphTargetsRelative=!0,n})}function u7e(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function d7e(n){const e=n.extensions&&n.extensions[ni.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+KV(e.attributes):t=n.indices+":"+KV(n.attributes)+":"+n.mode,t}function KV(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function NP(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function f7e(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class h7e{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new U9e,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new qv(this.options.manager):this.textureLoader=new OWe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Os(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const o={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:i,userData:{}};R0(s,o,r),Wf(o,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const a=t[r].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(i[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[c,u]of a.children.entries())s(u,o.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,a){return i.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[ni.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){i.load(ks.resolveURL(t.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0)return Promise.resolve(null);const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],l=WV[r.type],c=K_[r.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,f=r.byteOffset||0,h=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0;let m,v;if(h&&h!==d){const g=Math.floor(f/h),_="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let y=t.cache.get(_);y||(m=new c(o,g*h,r.count*h/u),y=new Jk(m,h/u),t.cache.add(_,y)),v=new jh(y,l,f%h/u,p)}else o===null?m=new c(r.count*l):m=new c(o,f,r.count*l),v=new lr(m,l,p);if(r.sparse!==void 0){const g=WV.SCALAR,_=K_[r.sparse.indices.componentType],y=r.sparse.indices.byteOffset||0,S=r.sparse.values.byteOffset||0,w=new _(a[1],y,r.sparse.count*g),x=new c(a[2],S,r.sparse.count*l);o!==null&&(v=new lr(v.array.slice(),v.itemSize,v.normalized));for(let T=0,C=w.length;T<C;T++){const M=w[T];if(v.setX(M,x[T*l]),l>=2&&v.setY(M,x[T*l+1]),l>=3&&v.setZ(M,x[T*l+2]),l>=4&&v.setW(M,x[T*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,a=t.images[s];let o=this.textureLoader;if(a.uri){const l=i.manager.getHandler(a.uri);l!==null&&(o=l)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,i){const r=this,s=this.json,a=s.textures[e],o=s.images[t],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,a.name&&(u.name=a.name);const f=(s.samplers||{})[a.sampler]||{};return u.magFilter=$V[f.magFilter]||wr,u.minFilter=$V[f.minFilter]||_u,u.wrapS=GV[f.wrapS]||ha,u.wrapT=GV[f.wrapT]||ha,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const a=r.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",c=!1;if(a.bufferView!==void 0)l=i.getDependency("bufferView",a.bufferView).then(function(d){c=!0;const f=new Blob([d],{type:a.mimeType});return l=o.createObjectURL(f),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(f,h){let p=f;t.isImageBitmapLoader===!0&&(p=function(m){const v=new ds(m);v.needsUpdate=!0,f(v)}),t.load(ks.resolveURL(d,s.path),p,void 0,h)})}).then(function(d){return c===!0&&o.revokeObjectURL(l),d.userData.mimeType=a.mimeType||f7e(a.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(a){if(i.texCoord!==void 0&&i.texCoord!=0&&!(t==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),s.extensions[ni.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[ni.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=s.associations.get(a);a=s.extensions[ni.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,l)}}return r!==void 0&&(a.encoding=r),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new gh,Cr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(o,l)),i=l}else if(e.isLine){const o="LineBasicMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new dl,Cr.prototype.copy.call(l,i),l.color.copy(i.color),this.cache.add(o,l)),i=l}if(r||s||a){let o="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(o+="specular-glossiness:"),r&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=i.clone(),s&&(l.vertexColors=!0),a&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(i))),i=l}i.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return Rg}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let a;const o={},l=s.extensions||{},c=[];if(l[ni.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const d=r[ni.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];a=d.getMaterialType(),c.push(d.extendParams(o,s,t))}else if(l[ni.KHR_MATERIALS_UNLIT]){const d=r[ni.KHR_MATERIALS_UNLIT];a=d.getMaterialType(),c.push(d.extendParams(o,s,t))}else{const d=s.pbrMetallicRoughness||{};if(o.color=new zt(1,1,1),o.opacity=1,Array.isArray(d.baseColorFactor)){const f=d.baseColorFactor;o.color.fromArray(f),o.opacity=f[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",d.baseColorTexture,Xn)),o.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,o.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",d.metallicRoughnessTexture))),a=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=$d);const u=s.alphaMode||WE.OPAQUE;if(u===WE.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,u===WE.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==al&&(c.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new St(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;o.normalScale.set(d,d)}return s.occlusionTexture!==void 0&&a!==al&&(c.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==al&&(o.emissive=new zt().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&a!==al&&c.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,Xn)),Promise.all(c).then(function(){let d;return a===kP?d=r[ni.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):d=new a(o),s.name&&(d.name=s.name),Wf(d,s),t.associations.set(d,{materials:e}),s.extensions&&R0(r,d,s),d})}createUniqueName(e){const t=ci.sanitizeNodeName(e||"");let i=t;for(let r=1;this.nodeNamesUsed[i];++r)i=t+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(o){return i[ni.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return qV(l,o,t)})}const a=[];for(let o=0,l=e.length;o<l;o++){const c=e[o],u=d7e(c),d=r[u];if(d)a.push(d.promise);else{let f;c.extensions&&c.extensions[ni.KHR_DRACO_MESH_COMPRESSION]?f=s(c):f=qV(new si,c,t),r[u]={primitive:c,promise:f},a.push(f)}}return Promise.all(a)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],a=s.primitives,o=[];for(let l=0,c=a.length;l<c;l++){const u=a[l].material===void 0?l7e(this.cache):this.getDependency("material",a[l].material);o.push(u)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let h=0,p=u.length;h<p;h++){const m=u[h],v=a[h];let g;const _=c[h];if(v.mode===wc.TRIANGLES||v.mode===wc.TRIANGLE_STRIP||v.mode===wc.TRIANGLE_FAN||v.mode===void 0)g=s.isSkinnedMesh===!0?new KM(m,_):new Br(m,_),g.isSkinnedMesh===!0&&!g.geometry.attributes.skinWeight.normalized&&g.normalizeSkinWeights(),v.mode===wc.TRIANGLE_STRIP?g.geometry=XV(g.geometry,c5e):v.mode===wc.TRIANGLE_FAN&&(g.geometry=XV(g.geometry,gj));else if(v.mode===wc.LINES)g=new Qh(m,_);else if(v.mode===wc.LINE_STRIP)g=new Ig(m,_);else if(v.mode===wc.LINE_LOOP)g=new $j(m,_);else if(v.mode===wc.POINTS)g=new Cy(m,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(g.geometry.morphAttributes).length>0&&u7e(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),Wf(g,s),v.extensions&&R0(r,g,v),t.assignFinalMaterial(g),d.push(g)}for(let h=0,p=d.length;h<p;h++)t.associations.set(d[h],{meshes:e,primitives:h});if(d.length===1)return d[0];const f=new pa;t.associations.set(f,{meshes:e});for(let h=0,p=d.length;h<p;h++)f.add(d[h]);return f})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new kr(Is.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Tg(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Wf(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],a=[],o=[],l=[];for(let c=0,u=i.channels.length;c<u;c++){const d=i.channels[c],f=i.samplers[d.sampler],h=d.target,p=h.node!==void 0?h.node:h.id,m=i.parameters!==void 0?i.parameters[f.input]:f.input,v=i.parameters!==void 0?i.parameters[f.output]:f.output;r.push(this.getDependency("node",p)),s.push(this.getDependency("accessor",m)),a.push(this.getDependency("accessor",v)),o.push(f),l.push(h)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],f=c[2],h=c[3],p=c[4],m=[];for(let g=0,_=u.length;g<_;g++){const y=u[g],S=d[g],w=f[g],x=h[g],T=p[g];if(y===void 0)continue;y.updateMatrix();let C;switch(zu[T.path]){case zu.weights:C=Wv;break;case zu.rotation:C=ru;break;case zu.position:case zu.scale:default:C=qd;break}const M=y.name?y.name:y.uuid,A=x.interpolation!==void 0?o7e[x.interpolation]:Vv,E=[];zu[T.path]===zu.weights?y.traverse(function(P){P.morphTargetInfluences&&E.push(P.name?P.name:P.uuid)}):E.push(M);let I=w.array;if(w.normalized){const P=NP(I.constructor),D=new Float32Array(I.length);for(let L=0,R=I.length;L<R;L++)D[L]=I[L]*P;I=D}for(let P=0,D=E.length;P<D;P++){const L=new C(E[P]+"."+zu[T.path],S.array,I,A);x.interpolation==="CUBICSPLINE"&&(L.createInterpolant=function(B){const k=this instanceof ru?a7e:KQ;return new k(this.times,this.values,this.getValueSize()/3,B)},L.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(L)}}const v=i.name?i.name:"animation_"+e;return new Zh(v,void 0,m)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const a=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,c=r.weights.length;l<c;l++)o.morphTargetInfluences[l]=r.weights[l]}),a})}loadNode(e){const t=this.json,i=this.extensions,r=this,s=t.nodes[e],a=s.name?r.createUniqueName(s.name):"";return function(){const o=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&o.push(l),s.camera!==void 0&&o.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){o.push(c)}),Promise.all(o)}().then(function(o){let l;if(s.isBone===!0?l=new Gv:o.length>1?l=new pa:o.length===1?l=o[0]:l=new ji,l!==o[0])for(let c=0,u=o.length;c<u;c++)l.add(o[c]);if(s.name&&(l.userData.name=s.name,l.name=a),Wf(l,s),s.extensions&&R0(i,l,s),s.matrix!==void 0){const c=new nn;c.fromArray(s.matrix),l.applyMatrix4(c)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,i=this.extensions,r=this.json.scenes[e],s=this,a=new pa;r.name&&(a.name=s.createUniqueName(r.name)),Wf(a,r),r.extensions&&R0(i,a,r);const o=r.nodes||[],l=[];for(let c=0,u=o.length;c<u;c++)l.push(qQ(o[c],a,t,s));return Promise.all(l).then(function(){const c=u=>{const d=new Map;for(const[f,h]of s.associations)(f instanceof Cr||f instanceof ds)&&d.set(f,h);return u.traverse(f=>{const h=s.associations.get(f);h!=null&&d.set(f,h)}),d};return s.associations=c(a),a})}}function qQ(n,e,t,i){const r=t.nodes[n];return i.getDependency("node",n).then(function(s){if(r.skin===void 0)return s;let a;return i.getDependency("skin",r.skin).then(function(o){a=o;const l=[];for(let c=0,u=a.joints.length;c<u;c++)l.push(i.getDependency("node",a.joints[c]));return Promise.all(l)}).then(function(o){return s.traverse(function(l){if(!l.isMesh)return;const c=[],u=[];for(let d=0,f=o.length;d<f;d++){const h=o[d];if(h){c.push(h);const p=new nn;a.inverseBindMatrices!==void 0&&p.fromArray(a.inverseBindMatrices.array,d*16),u.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',a.joints[d])}l.bind(new Eg(c,u),l.matrixWorld)}),s})}).then(function(s){e.add(s);const a=[];if(r.children){const o=r.children;for(let l=0,c=o.length;l<c;l++){const u=o[l];a.push(qQ(u,s,t,i))}}return Promise.all(a)})}function p7e(n,e,t){const i=e.attributes,r=new lp;if(i.POSITION!==void 0){const o=t.json.accessors[i.POSITION],l=o.min,c=o.max;if(l!==void 0&&c!==void 0){if(r.set(new ke(l[0],l[1],l[2]),new ke(c[0],c[1],c[2])),o.normalized){const u=NP(K_[o.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new ke,l=new ke;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(d.POSITION!==void 0){const f=t.json.accessors[d.POSITION],h=f.min,p=f.max;if(h!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(h[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(h[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(h[2]),Math.abs(p[2]))),f.normalized){const m=NP(K_[f.componentType]);l.multiplyScalar(m)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(o)}n.boundingBox=r;const a=new cp;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=a}function qV(n,e,t){const i=e.attributes,r=[];function s(a,o){return t.getDependency("accessor",a).then(function(l){n.setAttribute(o,l)})}for(const a in i){const o=OP[a]||a.toLowerCase();o in n.attributes||r.push(s(i[a],o))}if(e.indices!==void 0&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(o){n.setIndex(o)});r.push(a)}return Wf(n,e),p7e(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?c7e(n,e.targets,t):n})}function XV(n,e){let t=n.getIndex();if(t===null){const a=[],o=n.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);n.setIndex(a),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(e===gj)for(let a=1;a<=i;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<i;a++)a%2===0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s}const m7e=/^[og]\s*(.+)?/,v7e=/^mtllib /,g7e=/^usemtl /,y7e=/^usemap /,YV=/\s+/,jV=new ke,KE=new ke,QV=new ke,ZV=new ke,eo=new ke,Mw=new zt;function _7e(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}const i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const a=this._finalize(!1);a&&(a.inherited||a.groupCount<=0)&&this.materials.splice(a.index,1);const o={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:a!==void 0?a.smooth:this.smooth,groupStart:a!==void 0?a.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(o),o},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&s.groupEnd===-1&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),s}},i&&i.name&&typeof i.clone=="function"){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseNormalIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseUVIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/2)*2},addVertex:function(e,t,i){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){const r=this.vertices,s=this.object.geometry.normals;jV.fromArray(r,e),KE.fromArray(r,t),QV.fromArray(r,i),eo.subVectors(QV,KE),ZV.subVectors(jV,KE),eo.cross(ZV),eo.normalize(),s.push(eo.x,eo.y,eo.z),s.push(eo.x,eo.y,eo.z),s.push(eo.x,eo.y,eo.z)},addColor:function(e,t,i){const r=this.colors,s=this.object.geometry.colors;r[e]!==void 0&&s.push(r[e+0],r[e+1],r[e+2]),r[t]!==void 0&&s.push(r[t+0],r[t+1],r[t+2]),r[i]!==void 0&&s.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[i+0],r[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,s,a,o,l,c){const u=this.vertices.length;let d=this.parseVertexIndex(e,u),f=this.parseVertexIndex(t,u),h=this.parseVertexIndex(i,u);if(this.addVertex(d,f,h),this.addColor(d,f,h),o!==void 0&&o!==""){const p=this.normals.length;d=this.parseNormalIndex(o,p),f=this.parseNormalIndex(l,p),h=this.parseNormalIndex(c,p),this.addNormal(d,f,h)}else this.addFaceNormal(d,f,h);if(r!==void 0&&r!==""){const p=this.uvs.length;d=this.parseUVIndex(r,p),f=this.parseUVIndex(s,p),h=this.parseUVIndex(a,p),this.addUV(d,f,h),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){const s=this.parseVertexIndex(e[i],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let s=0,a=e.length;s<a;s++)this.addVertexLine(this.parseVertexIndex(e[s],i));for(let s=0,a=t.length;s<a;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return n.startObject("",!1),n}class b7e extends ps{constructor(e){super(e),this.materials=null}load(e,t,i,r){const s=this,a=new Os(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(o))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new _7e;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const i=e.split(`
`);let r=[];for(let o=0,l=i.length;o<l;o++){const c=i[o].trimStart();if(c.length===0)continue;const u=c.charAt(0);if(u!=="#")if(u==="v"){const d=c.split(YV);switch(d[0]){case"v":t.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),d.length>=7?(Mw.setRGB(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6])).convertSRGBToLinear(),t.colors.push(Mw.r,Mw.g,Mw.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":t.uvs.push(parseFloat(d[1]),parseFloat(d[2]));break}}else if(u==="f"){const f=c.slice(1).trim().split(YV),h=[];for(let m=0,v=f.length;m<v;m++){const g=f[m];if(g.length>0){const _=g.split("/");h.push(_)}}const p=h[0];for(let m=1,v=h.length-1;m<v;m++){const g=h[m],_=h[m+1];t.addFace(p[0],g[0],_[0],p[1],g[1],_[1],p[2],g[2],_[2])}}else if(u==="l"){const d=c.substring(1).trim().split(" ");let f=[];const h=[];if(c.indexOf("/")===-1)f=d;else for(let p=0,m=d.length;p<m;p++){const v=d[p].split("/");v[0]!==""&&f.push(v[0]),v[1]!==""&&h.push(v[1])}t.addLineGeometry(f,h)}else if(u==="p"){const f=c.slice(1).trim().split(" ");t.addPointGeometry(f)}else if((r=m7e.exec(c))!==null){const d=(" "+r[0].slice(1).trim()).slice(1);t.startObject(d)}else if(g7e.test(c))t.object.startMaterial(c.substring(7).trim(),t.materialLibraries);else if(v7e.test(c))t.materialLibraries.push(c.substring(7).trim());else if(y7e.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(u==="s"){if(r=c.split(" "),r.length>1){const f=r[1].trim().toLowerCase();t.object.smooth=f!=="0"&&f!=="off"}else t.object.smooth=!0;const d=t.object.currentMaterial();d&&(d.smooth=t.object.smooth)}else{if(c==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}t.finalize();const s=new pa;if(s.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let o=0,l=t.objects.length;o<l;o++){const c=t.objects[o],u=c.geometry,d=c.materials,f=u.type==="Line",h=u.type==="Points";let p=!1;if(u.vertices.length===0)continue;const m=new si;m.setAttribute("position",new qt(u.vertices,3)),u.normals.length>0&&m.setAttribute("normal",new qt(u.normals,3)),u.colors.length>0&&(p=!0,m.setAttribute("color",new qt(u.colors,3))),u.hasUVIndices===!0&&m.setAttribute("uv",new qt(u.uvs,2));const v=[];for(let _=0,y=d.length;_<y;_++){const S=d[_],w=S.name+"_"+S.smooth+"_"+p;let x=t.materials[w];if(this.materials!==null){if(x=this.materials.create(S.name),f&&x&&!(x instanceof dl)){const T=new dl;Cr.prototype.copy.call(T,x),T.color.copy(x.color),x=T}else if(h&&x&&!(x instanceof gh)){const T=new gh({size:10,sizeAttenuation:!1});Cr.prototype.copy.call(T,x),T.color.copy(x.color),T.map=x.map,x=T}}x===void 0&&(f?x=new dl:h?x=new gh({size:1,sizeAttenuation:!1}):x=new Xc,x.name=S.name,x.flatShading=!S.smooth,x.vertexColors=p,t.materials[w]=x),v.push(x)}let g;if(v.length>1){for(let _=0,y=d.length;_<y;_++){const S=d[_];m.addGroup(S.groupStart,S.groupCount,_)}f?g=new Qh(m,v):h?g=new Cy(m,v):g=new Br(m,v)}else f?g=new Qh(m,v[0]):h?g=new Cy(m,v[0]):g=new Br(m,v[0]);g.name=c.name,s.add(g)}else if(t.vertices.length>0){const o=new gh({size:1,sizeAttenuation:!1}),l=new si;l.setAttribute("position",new qt(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(l.setAttribute("color",new qt(t.colors,3)),o.vertexColors=!0);const c=new Cy(l,o);s.add(c)}return s}}class S7e extends xWe{constructor(e){super(e)}parse(e,t){const i={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},r=542327876,s=131072,a=512,o=1024,l=2048,c=4096,u=8192,d=16384,f=32768;function h(J){return J.charCodeAt(0)+(J.charCodeAt(1)<<8)+(J.charCodeAt(2)<<16)+(J.charCodeAt(3)<<24)}function p(J){return String.fromCharCode(J&255,J>>8&255,J>>16&255,J>>24&255)}function m(J,Z,ee,me){const ye=ee*me*4,Te=new Uint8Array(J,Z,ye),Ee=new Uint8Array(ye);let H=0,Q=0;for(let j=0;j<me;j++)for(let Pe=0;Pe<ee;Pe++){const we=Te[Q];Q++;const De=Te[Q];Q++;const Me=Te[Q];Q++;const Ae=Te[Q];Q++,Ee[H]=Me,H++,Ee[H]=De,H++,Ee[H]=we,H++,Ee[H]=Ae,H++}return Ee}const v=h("DXT1"),g=h("DXT3"),_=h("DXT5"),y=h("ETC1"),S=31,w=0,x=1,T=2,C=3,M=4,A=7,E=21,I=22,P=23,D=24,L=25,R=26,B=28,k=new Int32Array(e,0,S);if(k[w]!==r)return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),i;let O;const U=k[E];let G=!1;switch(U){case v:O=8,i.format=z1;break;case g:O=16,i.format=U1;break;case _:O=16,i.format=H1;break;case y:O=8,i.format=vj;break;default:if(k[I]===32&&k[P]&16711680&&k[D]&65280&&k[L]&255&&k[R]&4278190080)G=!0,O=64,i.format=So;else return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",p(U)),i}i.mipmapCount=1,k[T]&s&&t!==!1&&(i.mipmapCount=Math.max(1,k[A]));const q=k[B];if(i.isCubemap=!!(q&a),i.isCubemap&&(!(q&o)||!(q&l)||!(q&c)||!(q&u)||!(q&d)||!(q&f)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),i;i.width=k[M],i.height=k[C];let W=k[x]+4;const Y=i.isCubemap?6:1;for(let J=0;J<Y;J++){let Z=i.width,ee=i.height;for(let me=0;me<i.mipmapCount;me++){let ye,Te;G?(ye=m(e,W,Z,ee),Te=ye.length):(Te=Math.max(4,Z)/4*Math.max(4,ee)/4*O,ye=new Uint8Array(e,W,Te));const Ee={data:ye,width:Z,height:ee};i.mipmaps.push(Ee),W+=Te,Z=Math.max(Z>>1,1),ee=Math.max(ee>>1,1)}}return i}}class w7e{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){o++,s===!1&&r.onStart!==void 0&&r.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,r.onProgress!==void 0&&r.onProgress(u,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=c.length;d<f;d+=2){const h=c[d],p=c[d+1];if(h.global&&(h.lastIndex=0),h.test(u))return p}return null}}}const Tw=new zt;class x7e extends ps{constructor(e){super(e),this.propertyNameMapping={}}load(e,t,i,r){const s=this,a=new Os(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(o))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}setPropertyNameMapping(e){this.propertyNameMapping=e}parse(e){function t(h){const p=/^ply([\s\S]*)end_header(\r\n|\r|\n)/;let m="",v=0;const g=p.exec(h);g!==null&&(m=g[1],v=new Blob([g[0]]).size);const _={comments:[],elements:[],headerLength:v,objInfo:""},y=m.split(/\r\n|\r|\n/);let S;function w(x,T){const C={type:x[0]};return C.type==="list"?(C.name=x[3],C.countType=x[1],C.itemType=x[2]):C.name=x[1],C.name in T&&(C.name=T[C.name]),C}for(let x=0;x<y.length;x++){let T=y[x];if(T=T.trim(),T==="")continue;const C=T.split(/\s+/),M=C.shift();switch(T=C.join(" "),M){case"format":_.format=C[0],_.version=C[1];break;case"comment":_.comments.push(T);break;case"element":S!==void 0&&_.elements.push(S),S={},S.name=C[0],S.count=parseInt(C[1]),S.properties=[];break;case"property":S.properties.push(w(C,f.propertyNameMapping));break;case"obj_info":_.objInfo=T;break;default:console.log("unhandled",M,C)}}return S!==void 0&&_.elements.push(S),_}function i(h,p){switch(p){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(h);case"float":case"double":case"float32":case"float64":return parseFloat(h)}}function r(h,p){const m=p.split(/\s+/),v={};for(let g=0;g<h.length;g++)if(h[g].type==="list"){const _=[],y=i(m.shift(),h[g].countType);for(let S=0;S<y;S++)_.push(i(m.shift(),h[g].itemType));v[h[g].name]=_}else v[h[g].name]=i(m.shift(),h[g].type);return v}function s(h,p){const m={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]};let v;const g=/end_header\s([\s\S]*)$/;let _="";(v=g.exec(h))!==null&&(_=v[1]);const y=_.split(/\r\n|\r|\n/);let S=0,w=0;for(let x=0;x<y.length;x++){let T=y[x];if(T=T.trim(),T==="")continue;w>=p.elements[S].count&&(S++,w=0);const C=r(p.elements[S].properties,T);o(m,p.elements[S].name,C),w++}return a(m)}function a(h){let p=new si;return h.indices.length>0&&p.setIndex(h.indices),p.setAttribute("position",new qt(h.vertices,3)),h.normals.length>0&&p.setAttribute("normal",new qt(h.normals,3)),h.uvs.length>0&&p.setAttribute("uv",new qt(h.uvs,2)),h.colors.length>0&&p.setAttribute("color",new qt(h.colors,3)),h.faceVertexUvs.length>0&&(p=p.toNonIndexed(),p.setAttribute("uv",new qt(h.faceVertexUvs,2))),p.computeBoundingSphere(),p}function o(h,p,m){function v(I){for(let P=0,D=I.length;P<D;P++){const L=I[P];if(L in m)return L}return null}const g=v(["x","px","posx"])||"x",_=v(["y","py","posy"])||"y",y=v(["z","pz","posz"])||"z",S=v(["nx","normalx"]),w=v(["ny","normaly"]),x=v(["nz","normalz"]),T=v(["s","u","texture_u","tx"]),C=v(["t","v","texture_v","ty"]),M=v(["red","diffuse_red","r","diffuse_r"]),A=v(["green","diffuse_green","g","diffuse_g"]),E=v(["blue","diffuse_blue","b","diffuse_b"]);if(p==="vertex")h.vertices.push(m[g],m[_],m[y]),S!==null&&w!==null&&x!==null&&h.normals.push(m[S],m[w],m[x]),T!==null&&C!==null&&h.uvs.push(m[T],m[C]),M!==null&&A!==null&&E!==null&&(Tw.setRGB(m[M]/255,m[A]/255,m[E]/255).convertSRGBToLinear(),h.colors.push(Tw.r,Tw.g,Tw.b));else if(p==="face"){const I=m.vertex_indices||m.vertex_index,P=m.texcoord;I.length===3?(h.indices.push(I[0],I[1],I[2]),P&&P.length===6&&(h.faceVertexUvs.push(P[0],P[1]),h.faceVertexUvs.push(P[2],P[3]),h.faceVertexUvs.push(P[4],P[5]))):I.length===4&&(h.indices.push(I[0],I[1],I[3]),h.indices.push(I[1],I[2],I[3]))}}function l(h,p,m,v){switch(m){case"int8":case"char":return[h.getInt8(p),1];case"uint8":case"uchar":return[h.getUint8(p),1];case"int16":case"short":return[h.getInt16(p,v),2];case"uint16":case"ushort":return[h.getUint16(p,v),2];case"int32":case"int":return[h.getInt32(p,v),4];case"uint32":case"uint":return[h.getUint32(p,v),4];case"float32":case"float":return[h.getFloat32(p,v),4];case"float64":case"double":return[h.getFloat64(p,v),8]}}function c(h,p,m,v){const g={};let _,y=0;for(let S=0;S<m.length;S++)if(m[S].type==="list"){const w=[];_=l(h,p+y,m[S].countType,v);const x=_[0];y+=_[1];for(let T=0;T<x;T++)_=l(h,p+y,m[S].itemType,v),w.push(_[0]),y+=_[1];g[m[S].name]=w}else _=l(h,p+y,m[S].type,v),g[m[S].name]=_[0],y+=_[1];return[g,y]}function u(h,p){const m={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},v=p.format==="binary_little_endian",g=new DataView(h,p.headerLength);let _,y=0;for(let S=0;S<p.elements.length;S++)for(let w=0;w<p.elements[S].count;w++){_=c(g,y,p.elements[S].properties,v),y+=_[1];const x=_[0];o(m,p.elements[S].name,x)}return a(m)}let d;const f=this;if(e instanceof ArrayBuffer){const h=ks.decodeText(new Uint8Array(e)),p=t(h);d=p.format==="ascii"?s(h,p):u(e,p)}else d=s(e,t(e));return d}}class C7e extends ps{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Os(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(o))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){function t(c){const u=new DataView(c),d=32/8*3+32/8*3*3+16/8,f=u.getUint32(80,!0);if(80+32/8+f*d===u.byteLength)return!0;const p=[115,111,108,105,100];for(let m=0;m<5;m++)if(i(p,u,m))return!1;return!0}function i(c,u,d){for(let f=0,h=c.length;f<h;f++)if(c[f]!==u.getUint8(d+f))return!1;return!0}function r(c){const u=new DataView(c),d=u.getUint32(80,!0);let f,h,p,m=!1,v,g,_,y,S;for(let A=0;A<80-10;A++)u.getUint32(A,!1)==1129270351&&u.getUint8(A+4)==82&&u.getUint8(A+5)==61&&(m=!0,v=new Float32Array(d*3*3),g=u.getUint8(A+6)/255,_=u.getUint8(A+7)/255,y=u.getUint8(A+8)/255,S=u.getUint8(A+9)/255);const w=84,x=12*4+2,T=new si,C=new Float32Array(d*3*3),M=new Float32Array(d*3*3);for(let A=0;A<d;A++){const E=w+A*x,I=u.getFloat32(E,!0),P=u.getFloat32(E+4,!0),D=u.getFloat32(E+8,!0);if(m){const L=u.getUint16(E+48,!0);L&32768?(f=g,h=_,p=y):(f=(L&31)/31,h=(L>>5&31)/31,p=(L>>10&31)/31)}for(let L=1;L<=3;L++){const R=E+L*12,B=A*3*3+(L-1)*3;C[B]=u.getFloat32(R,!0),C[B+1]=u.getFloat32(R+4,!0),C[B+2]=u.getFloat32(R+8,!0),M[B]=I,M[B+1]=P,M[B+2]=D,m&&(v[B]=f,v[B+1]=h,v[B+2]=p)}}return T.setAttribute("position",new lr(C,3)),T.setAttribute("normal",new lr(M,3)),m&&(T.setAttribute("color",new lr(v,3)),T.hasColors=!0,T.alpha=S),T}function s(c){const u=new si,d=/solid([\s\S]*?)endsolid/g,f=/facet([\s\S]*?)endfacet/g;let h=0;const p=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,m=new RegExp("vertex"+p+p+p,"g"),v=new RegExp("normal"+p+p+p,"g"),g=[],_=[],y=new ke;let S,w=0,x=0,T=0;for(;(S=d.exec(c))!==null;){x=T;const C=S[0];for(;(S=f.exec(C))!==null;){let E=0,I=0;const P=S[0];for(;(S=v.exec(P))!==null;)y.x=parseFloat(S[1]),y.y=parseFloat(S[2]),y.z=parseFloat(S[3]),I++;for(;(S=m.exec(P))!==null;)g.push(parseFloat(S[1]),parseFloat(S[2]),parseFloat(S[3])),_.push(y.x,y.y,y.z),E++,T++;I!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+h),E!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+h),h++}const M=x,A=T-x;u.addGroup(M,A,w),w++}return u.setAttribute("position",new qt(g,3)),u.setAttribute("normal",new qt(_,3)),u}function a(c){return typeof c!="string"?ks.decodeText(new Uint8Array(c)):c}function o(c){if(typeof c=="string"){const u=new Uint8Array(c.length);for(let d=0;d<c.length;d++)u[d]=c.charCodeAt(d)&255;return u.buffer||u}else return c}const l=o(e);return t(l)?r(l):s(a(e))}}class M7e extends ps{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?ks.extractUrlBase(e):this.path,o=new Os(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(l,a))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const i=e.split(`
`);let r={};const s=/\s+/,a={};for(let l=0;l<i.length;l++){let c=i[l];if(c=c.trim(),c.length===0||c.charAt(0)==="#")continue;const u=c.indexOf(" ");let d=u>=0?c.substring(0,u):c;d=d.toLowerCase();let f=u>=0?c.substring(u+1):"";if(f=f.trim(),d==="newmtl")r={name:f},a[f]=r;else if(d==="ka"||d==="kd"||d==="ks"||d==="ke"){const h=f.split(s,3);r[d]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])]}else r[d]=f}const o=new T7e(this.resourcePath||t,this.materialOptions);return o.setCrossOrigin(this.crossOrigin),o.setManager(this.manager),o.setMaterials(a),o}}class T7e{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:Vd,this.wrap=this.options.wrap!==void 0?this.options.wrap:ha}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const i in e){const r=e[i],s={};t[i]=s;for(const a in r){let o=!0,l=r[a];const c=a.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&l[0]===0&&l[1]===0&&l[2]===0&&(o=!1);break}o&&(s[c]=l)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,i=this.materialsInfo[e],r={name:e,side:this.side};function s(o,l){return typeof l!="string"||l===""?"":/^https?:\/\//i.test(l)?l:o+l}function a(o,l){if(r[o])return;const c=t.getTextureParams(l,r),u=t.loadTexture(s(t.baseUrl,c.url));u.repeat.copy(c.scale),u.offset.copy(c.offset),u.wrapS=t.wrap,u.wrapT=t.wrap,(o==="map"||o==="emissiveMap")&&(u.encoding=Xn),r[o]=u}for(const o in i){const l=i[o];let c;if(l!=="")switch(o.toLowerCase()){case"kd":r.color=new zt().fromArray(l).convertSRGBToLinear();break;case"ks":r.specular=new zt().fromArray(l).convertSRGBToLinear();break;case"ke":r.emissive=new zt().fromArray(l).convertSRGBToLinear();break;case"map_kd":a("map",l);break;case"map_ks":a("specularMap",l);break;case"map_ke":a("emissiveMap",l);break;case"norm":a("normalMap",l);break;case"map_bump":case"bump":a("bumpMap",l);break;case"map_d":a("alphaMap",l),r.transparent=!0;break;case"ns":r.shininess=parseFloat(l);break;case"d":c=parseFloat(l),c<1&&(r.opacity=c,r.transparent=!0);break;case"tr":c=parseFloat(l),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(r.opacity=1-c,r.transparent=!0);break}}return this.materials[e]=new Xc(r),this.materials[e]}getTextureParams(e,t){const i={scale:new St(1,1),offset:new St(0,0)},r=e.split(/\s+/);let s;return s=r.indexOf("-bm"),s>=0&&(t.bumpScale=parseFloat(r[s+1]),r.splice(s,2)),s=r.indexOf("-s"),s>=0&&(i.scale.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),s=r.indexOf("-o"),s>=0&&(i.offset.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),i.url=r.join(" ").trim(),i}loadTexture(e,t,i,r,s){const a=this.manager!==void 0?this.manager:sQ;let o=a.getHandler(e);o===null&&(o=new qv(a)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin);const l=o.load(e,i,r,s);return t!==void 0&&(l.mapping=t),l}}const qE=new WeakMap;class A7e extends ps{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new Os(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,o).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const c=t.attributeTypes[l];c.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=c.name)}const i=JSON.stringify(t);if(qE.has(e)){const l=qE.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(s,a).then(l=>(r=l,new Promise((c,u)=>{r._callbacks[s]={resolve:c,reject:u},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),qE.set(e,{key:i,promise:o}),o}_createGeometry(e){const t=new si;e.index&&t.setIndex(new lr(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,a=r.array,o=r.itemSize;t.setAttribute(s,new lr(a,o))}return t}_loadLibrary(e,t){const i=new Os(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=E7e.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function E7e(){let n,e;onmessage=function(a){const o=a.data;switch(o.type){case"init":n=o.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=o.buffer,c=o.taskConfig;e.then(u=>{const d=u.draco,f=new d.Decoder,h=new d.DecoderBuffer;h.Init(new Int8Array(l),l.byteLength);try{const p=t(d,f,h,c),m=p.attributes.map(v=>v.array.buffer);p.index&&m.push(p.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:p},m)}catch(p){console.error(p),self.postMessage({type:"error",id:o.id,error:p.message})}finally{d.destroy(h),d.destroy(f)}});break}};function t(a,o,l,c){const u=c.attributeIDs,d=c.attributeTypes;let f,h;const p=o.GetEncodedGeometryType(l);if(p===a.TRIANGULAR_MESH)f=new a.Mesh,h=o.DecodeBufferToMesh(l,f);else if(p===a.POINT_CLOUD)f=new a.PointCloud,h=o.DecodeBufferToPointCloud(l,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!h.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+h.error_msg());const m={index:null,attributes:[]};for(const v in u){const g=self[d[v]];let _,y;if(c.useUniqueIDs)y=u[v],_=o.GetAttributeByUniqueId(f,y);else{if(y=o.GetAttributeId(f,a[u[v]]),y===-1)continue;_=o.GetAttribute(f,y)}m.attributes.push(r(a,o,f,v,g,_))}return p===a.TRIANGULAR_MESH&&(m.index=i(a,o,f)),a.destroy(f),m}function i(a,o,l){const u=l.num_faces()*3,d=u*4,f=a._malloc(d);o.GetTrianglesUInt32Array(l,d,f);const h=new Uint32Array(a.HEAPF32.buffer,f,u).slice();return a._free(f),{array:h,itemSize:1}}function r(a,o,l,c,u,d){const f=d.num_components(),p=l.num_points()*f,m=p*u.BYTES_PER_ELEMENT,v=s(a,u),g=a._malloc(m);o.GetAttributeDataArrayForAllPoints(l,d,v,m,g);const _=new u(a.HEAPF32.buffer,g,p).slice();return a._free(g),{name:c,array:_,itemSize:f}}function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}const AC=new lp,Al=new w7e;Al.addHandler(/\.dds$/i,new S7e);Al.addHandler(/\.tga$/i,new LP);function I7e(n){return AC.setFromObject(n),AC.getSize(new ke)}function R7e(n){return AC.setFromObject(n),AC.getCenter(new ke)}function P7e(n){const e=n.split(".");if(e.length<=1)return"";{let t=e.pop();return t=t.toLowerCase(),t}}function D7e(n,e,t,i,r){let s;e?s=e:s=P7e(n),s==="glb"&&(s="gltf");let a={loader:null,getObject:null};switch(s){case"dae":a={loader:new F9e(Al),getObject:o=>o.scene};break;case"fbx":a={loader:new T9e(Al)};break;case"gltf":a={loader:new z9e(Al),getObject:o=>{const l=o.scene;return o.animations&&(l.animations=o.animations),l}},k7e(t,a,r);break;case"obj":a={loader:new b7e(Al)};break;case"ply":a={loader:new x7e(Al),getObject:o=>(o.computeVertexNormals(),new Br(o,i==="MeshStandardMaterial"?new Rg:new al({vertexColors:!0})))};break;case"stl":a={loader:new C7e(Al),getObject:o=>new Br(o,new Xc)};break;case"json":a={loader:new LWe(Al)};break}return a}function L7e(){return new M7e(Al)}function k7e(n,e,t){if(n){const i=new A7e;i.setDecoderPath(t||"assets/draco/gltf/"),i.setDecoderConfig({type:"js"}),e.loader.setDRACOLoader(i)}}const O7e=ve({name:"vue3dLoader"});ve({...O7e,props:{filePath:null,fileType:null,width:null,height:null,position:null,rotation:null,scale:null,lights:{default:()=>[{type:"AmbientLight",color:11184810},{type:"DirectionalLight",position:{x:1,y:1,z:1},color:16777215,intensity:.8}]},cameraPosition:{default:()=>({x:0,y:0,z:0})},cameraRotation:null,cameraUp:null,cameraLookAt:null,backgroundColor:{default:()=>16777215},backgroundAlpha:{default:()=>1},controlsOptions:null,crossOrigin:{default:"anonymous"},requestHeader:null,outputEncoding:{default:()=>"linear"},webGLRendererOptions:{default:()=>({})},mtlPath:{default:""},showFps:{type:Boolean,default:!1},textureImage:{default:""},clearScene:{type:Boolean,default:!1},parallelLoad:{type:Boolean,default:!1},labels:{default:()=>[]},autoPlay:{type:Boolean,default:!0},enableDraco:{type:Boolean,default:!1},dracoDir:null,intersectRecursive:{type:Boolean,default:!1},enableDamping:{type:Boolean},dampingFactor:null,verticalCtrl:{type:[Boolean,Object],default:!1},horizontalCtrl:{type:[Boolean,Object],default:!1},plyMaterial:{default:"MeshStandardMaterial"},enableAxesHelper:{type:Boolean,default:!1},axesHelperSize:{default:100},enableGridHelper:{type:Boolean,default:!1},minDistance:{default:0},maxDistance:{default:1/0},pointLightFollowCamera:{type:Boolean}},emits:["mousedown","mousemove","mouseup","click","dblclick","load","process","error"],setup(n,{expose:e,emit:t}){const i=n;let r=null;const s=new YWe,a=new St,o=new kr(45,1,.1,1e5),l=new NWe;let c=new Zk,u=null,d={},f=[],h=null,p=0,m=null,v=null,g=null,_=null,y=null;const S=X({width:i.width||0,height:i.height||0}),w=X(0),x=X(!1),T=X(!1),C=X(null),M=X(null);Ht(()=>{I()}),Un(()=>{E()}),We([()=>i.autoPlay],()=>{Le()}),We([()=>i.width,()=>i.height],()=>{S.value={width:i.width||0,height:i.height||0}}),We([()=>i.enableAxesHelper,()=>i.axesHelperSize,()=>i.enableGridHelper],()=>{Ye()}),We([()=>i.minDistance,()=>i.maxDistance],()=>{he()}),We([()=>i.filePath,()=>i.fileType,()=>i.mtlPath,()=>i.clearScene,()=>i.backgroundAlpha,()=>i.backgroundColor],V=>{(V[0]||V[1])&&A(),V[2]&&me(),V[3]&&Ae(),(V[4]||V[5])&&Y()},{deep:!0}),We([()=>i.rotation,()=>i.position,()=>i.scale,()=>i.lights],V=>{const re=["rotation","position","scale"];V.forEach((te,pe)=>{pe<3&&te?Fe(re[pe],te):Z()})},{deep:!0}),We([()=>S],()=>{J(!0),Y()},{deep:!0}),We([()=>i.controlsOptions],()=>{ee()},{deep:!0}),We([()=>i.cameraRotation,()=>i.cameraPosition],()=>{J()},{deep:!0}),We([()=>i.labels],()=>{z()},{deep:!0});function A(){E(),I()}function E(){p&&cancelAnimationFrame(p),u&&u.dispose(),d&&Object.keys(d).length>0&&(d.dispose(),d={});const V=C.value;V.removeEventListener("mousedown",R,!1),V.removeEventListener("mousemove",B,!1),V.removeEventListener("mouseup",k,!1),V.removeEventListener("click",O,!1),V.removeEventListener("dblclick",U,!1),window.removeEventListener("resize",L,!1),r=null,c&&c.clear()}function I(){const{filePath:V,outputEncoding:re,webGLRendererOptions:te,showFps:pe,enableDamping:se,dampingFactor:de,labels:qe}=i;V&&typeof V=="object"&&(T.value=!0);const fe=C.value;P(fe),L();const $e=Object.assign({},{antialias:!0,alpha:!0},te,{canvas:M.value});if(!u){u=new Hj($e),u.shadowMap.enabled=!0;const et=re==="linear"?Gd:Xn;u.outputEncoding=et}(!d||Object.keys(d).length<=0)&&(d=new ZWe(o,fe),se&&(d.enableDamping=!0,de!=null&&(d.dampingFactor=de))),he(),Ye(),me(),q(),D(!0),fe.addEventListener("mousedown",R,!1),fe.addEventListener("mouseup",k,!1),fe.addEventListener("click",O,!1),fe.addEventListener("dblclick",U,!1),window.addEventListener("resize",L,!1),pe&&(m=Ay(),fe.appendChild(m.dom)),j(),qe&&qe.length>0&&z()}function P(V){const{width:re,height:te}=i;re&&(V.style.width=`${re}px`),te&&(V.style.height=`${te}px`)}function D(V){const re=C.value;V?re.addEventListener("mousemove",B,!1):re.removeEventListener("mousemove",B,!1)}function L(){const{width:V,height:re}=i;(!V||!re)&&Mt(()=>{const te=C.value;S.value={width:V||te.offsetWidth,height:re||te.offsetHeight}})}function R(V){D(!1);const re=G(V.clientX,V.clientY);t("mousedown",V,re)}function B(V){const re=G(V.clientX,V.clientY);t("mousemove",V,re)}function k(V){const re=G(V.clientX,V.clientY);t("mouseup",V,re),D(!0)}function O(V){const re=G(V.clientX,V.clientY);t("click",V,re)}function U(V){const re=G(V.clientX,V.clientY);t("dblclick",V,re)}function G(V,re){const te=ne();if(!te||!C.value)return null;const pe=C.value.getBoundingClientRect();V-=pe.left,re-=pe.top,a.x=V/S.value.width*2-1,a.y=-(re/S.value.height)*2+1,s.setFromCamera(a,o);const se=s.intersectObject(te,i.intersectRecursive);return(se&&se.length)>0?se[0]:null}function q(){Y(),J(),Z(),ee()}function W(){if(!r)return;const V=T.value?xe(r):null,{position:re,rotation:te,scale:pe}=i;re&&(re instanceof Array?V!=null?r.position.set(re[V].x,re[V].y,re[V].z):r.position.set(0,0,0):r.position.set(re.x,re.y,re.z)),te&&(te instanceof Array?V!=null?r.rotation.set(te[V].x,te[V].y,te[V].z):r.rotation.set(0,0,0):r.rotation.set(te.x,te.y,te.z)),pe&&(pe instanceof Array?V!=null?r.scale.set(pe[V].x,pe[V].y,pe[V].z):r.scale.set(1,1,1):r.scale.set(pe.x,pe.y,pe.z))}function Y(){const{backgroundColor:V,backgroundAlpha:re}=i;u.setSize(S.value.width,S.value.height),u.setPixelRatio(window.devicePixelRatio||1),u.setClearColor(new zt(V).getHex()),u.setClearAlpha(re)}function J(V){const{cameraPosition:re,cameraRotation:te,cameraUp:pe,cameraLookAt:se}=i;if(o.aspect=S.value.width/S.value.height,o.updateProjectionMatrix(),!V)if(!se||!pe){if(!r)return;const de=I7e(r).length();o.position.set(re.x,re.y,re.z),te&&o.rotation.set(te.x,te.y,te.z),re.x===0&&re.y===0&&re.z===0&&(o.position.z=de),o.lookAt(new ke)}else o.position.set(re.x,re.y,re.z),te&&o.rotation.set(te.x,te.y,te.z),o.up.set(pe.x,pe.y,pe.z),o.lookAt(new ke(se.x,se.y,se.z))}function Z(){const{lights:V}=i;c.remove(...f),f=[],V.forEach(re=>{if(!re.type)return;const te=re.type.toLowerCase();let pe=null;if(te==="ambient"||te==="ambientlight"){const se=re.color===0?re.color:re.color||4210752,de=re.intensity===0?re.intensity:re.intensity||1;pe=new YM(se,de)}if(te==="point"||te==="pointlight"){const se=re.color===0?re.color:re.color||16777215,de=re.intensity===0?re.intensity:re.intensity||1,qe=re.distance||0,fe=re.decay===0?re.decay:re.decay||1;pe=new Jh(se,de,qe,fe),re.position&&pe.position.copy(re.position)}if(te==="directional"||te==="directionallight"){const se=re.color===0?re.color:re.color||16777215,de=re.intensity===0?re.intensity:re.intensity||1;pe=new Tb(se,de),re.position&&pe.position.copy(re.position),re.target&&pe.target.copy(re.target)}if(te==="hemisphere"||te==="hemispherelight"){const se=re.skyColor===0?re.skyColor:re.skyColor||16777215,de=re.groundColor===0?re.groundColor:re.groundColor||16777215,qe=re.intensity===0?re.intensity:re.intensity||1;pe=new aQ(se,de,qe),re.position&&pe.position.copy(re.position)}pe&&(f.push(pe),c.add(pe))})}function ee(){const{controlsOptions:V}=i;V&&Object.assign(d,V)}function me(){const{filePath:V,parallelLoad:re}=i;re&&T?V.forEach((te,pe)=>{ye(pe)}):ye()}function ye(V){const{filePath:re,fileType:te,crossOrigin:pe,requestHeader:se,mtlPath:de,enableDraco:qe,dracoDir:fe,plyMaterial:Je}=i;if(!re)return;const $e=V||w.value,et=T.value?re[$e]:re,ht=typeof te=="string"?te:te?te[$e]:"",st=D7e(et,ht,qe,Je,fe);h=st.loader;const Rt=st.getObject?st.getObject:H;if(r&&$e===0&&c.remove(r),se&&h.setRequestHeader(se),pe&&h.setCrossOrigin(pe),de)if(!(typeof de=="object"))Ee(et,Rt,$e);else{if(!de[$e]){Te(et,Rt,$e);return}Ee(et,Rt,$e)}else Te(et,Rt,$e)}function Te(V,re,te){const{textureImage:pe,parallelLoad:se}=i;h.load(V,(...de)=>{if(r=re(...de),Q(r,V),pe){const fe=typeof pe=="string"?pe:pe[te];fe&&Me(r,fe)}t("load",c)},de=>{se||De(de);const qe=w.value+1;t("process",de,qe)},de=>{t("error",de)})}function Ee(V,re,te){const{crossOrigin:pe,requestHeader:se,mtlPath:de}=i,qe=L7e();pe&&qe.setCrossOrigin(pe),se&&qe.setRequestHeader(se);const fe=typeof de=="string"?de:de[te],Je=/^(.*\/)([^/]*)$/.exec(fe),$e=Je[1],et=Je[2];qe.setPath($e).load(et,ht=>{ht.preload(),h.setMaterials(ht),Te(V,re,te)})}function H(V){return V}function Q(V,re){const te=R7e(r);x.value||(c.position.copy(te.negate()),x.value=!0),r=V;let pe=re.split("/");pe=pe[pe.length-1],r.fileName=pe,c.add(r),J(),W(),Le()}function j(){p=requestAnimationFrame(j),we();const V=l.getDelta();v&&v instanceof UE&&v.update(V),v&&v instanceof Array&&v.forEach(re=>{re.update(V)}),d&&d.update(),Pe()}function Pe(){const{pointLightFollowCamera:V}=i;V&&Ke(),u.render(c,o)}function we(){const{showFps:V}=i;V&&m.update()}function De(V){const{filePath:re}=i;Math.floor(V.loaded/V.total*100)===100&&(T.value&&re.length>w.value?Mt(()=>{if(w.value++,w.value===re.length){w.value=0;return}ye()}):w.value=0)}function Me(V,re){g||(g=new qv),V.traverse(te=>{te.isMesh&&g.load(re,pe=>{te.material.map=pe,te.material.needsUpdate=!0},()=>{},pe=>{t("error",pe)})})}function Ae(){c.clear()}function Fe(V,re){const te=ne();if(te){if(T.value){te.children.forEach(pe=>{const se=xe(pe),de=V==="scale"?1:0;re[se]?pe[V].set(re[se].x,re[se].y,re[se].z):pe[V].set(de,de,de)});return}te[V].set(re.x,re.y,re.z)}}function ne(){return T.value?c:r}function z(){const{labels:V}=i;if(!V||V.length<=0)return;K();const re=T.value?c:r,te=se=>(g||(g=new qv),g.load(se)),pe=(se,de)=>{const qe=ae(se,de),fe=new ds(qe);return fe.needsUpdate=!0,fe};V.forEach(se=>{const de=se.image?te(se.image):pe(se.text,se.textStyle||{}),qe=new eO({map:de,color:se.spriteMaterialColor||16777215}),fe=new G1(qe);se.scale?fe.scale.set(se.scale.x||1,se.scale.y||1,se.scale.z||0):fe.scale.set(1,1,0),se.position&&fe.position.set(se.position.x,se.position.y,se.position.z),se.sid&&(fe.sid=se.sid),re.add(fe)})}function K(){const V=c.children;for(let re=V.length-1;re>=0;re--){const te=V[re];te&&(te instanceof pa&&te.children&&(c.children[re].children=te.children.map(pe=>pe instanceof G1?null:pe).filter(pe=>pe)),te instanceof G1&&c.remove(te))}}function ae(V,re){const te=(Rt,Vt,Pn,Jt,Ai,pi)=>{Rt.beginPath(),Rt.moveTo(Vt+pi,Pn),Rt.lineTo(Vt+Jt-pi,Pn),Rt.quadraticCurveTo(Vt+Jt,Pn,Vt+Jt,Pn+pi),Rt.lineTo(Vt+Jt,Pn+Ai-pi),Rt.quadraticCurveTo(Vt+Jt,Pn+Ai,Vt+Jt-pi,Pn+Ai),Rt.lineTo(Vt+pi,Pn+Ai),Rt.quadraticCurveTo(Vt,Pn+Ai,Vt,Pn+Ai-pi),Rt.lineTo(Vt,Pn+pi),Rt.quadraticCurveTo(Vt,Pn,Vt+pi,Pn),Rt.closePath(),Rt.fill(),Rt.stroke()},pe=re.fontFamily||"Arial",se=re.fontSize===0||re.fontSize?re.fontSize:18,de=re.color||"#ffffff",qe=re.fontWeight||"normal",fe=re.borderWidth===0||re.borderWidth?re.borderWidth:4,Je=re.borderColor||"rgba(0,0,0,1)",$e=re.borderRadius===0||re.borderRadius?re.borderRadius:4,et=re.backgroundColor||"rgba(255, 255, 255, 1)",ht=document.createElement("canvas"),st=ht.getContext("2d");if(st){st.font=`${qe} ${se}px ${pe}`;const Vt=st.measureText(V).width;st.fillStyle=et,st.strokeStyle=Je,st.lineWidth=fe,te(st,fe/2,fe/2,Vt+fe,se*1.4+fe,$e),st.fillStyle=de,st.fillText(V,fe,se+fe)}return ht}function xe(V){const{filePath:re}=i;let te;return re instanceof Array&&(te=re.map((pe,se)=>{if(pe.indexOf(V.fileName)>-1)return se}).filter(pe=>pe!=null)[0]),te}function Le(){const V=ne();if(V){if(T.value){je(V);return}Xe(V)}}function Xe(V){const{autoPlay:re}=i;v=new UE(V),V.animations&&V.animations.length>0&&V.animations.forEach(te=>{if(te){const pe=v.clipAction(te);re?pe.play():pe.stop()}})}function je(V){const{autoPlay:re}=i;v=[],V.children.forEach((te,pe)=>{v.push(new UE(te)),te.animations&&te.animations.length>0&&te.animations.forEach(se=>{if(se){const de=v[pe].clipAction(se);re?de.play():de.stop()}})})}function he(){if(!d)return;const{verticalCtrl:V,horizontalCtrl:re,minDistance:te,maxDistance:pe}=i;V&&typeof V=="boolean"&&(d.minAzimuthAngle=-2*Math.PI,d.maxAzimuthAngle=-2*Math.PI),V&&typeof V=="object"&&(d.minAzimuthAngle=V.min,d.maxAzimuthAngle=V.max),re&&typeof re=="boolean"&&(d.minPolarAngle=1,d.maxPolarAngle=1),re&&typeof re=="object"&&(d.minPolarAngle=re.min,d.maxPolarAngle=re.max),te!=0&&typeof te=="number"&&(d.minDistance=te),pe!=1/0&&typeof pe=="number"&&(d.maxDistance=pe)}function Ye(){const{enableAxesHelper:V,enableGridHelper:re,axesHelperSize:te}=i;V?(_=new QWe(te),c.add(_)):_&&c.remove(_),re?(y=new jWe(2e3,100),c.add(y)):y&&c.remove(y)}function Ke(){const V=o.position.clone();c.children.forEach(re=>{re instanceof Jh&&re.position.set(V.x,V.y,V.z)})}return e({camera:o,scene:c}),(V,re)=>(F(),ie("div",{ref_key:"containerElement",ref:C,class:"viewer-container"},[le("canvas",{ref_key:"canvasElement",ref:M,class:"viewer-canvas"},null,512)],512))}});/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const CO="171",tm={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},nm={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},N7e=0,JV=1,B7e=2,XQ=1,F7e=2,Rc=3,ec=0,ba=1,yo=2,xd=0,Cd=1,e$=2,t$=3,n$=4,YQ=5,eh=100,z7e=101,U7e=102,H7e=103,V7e=104,$7e=200,G7e=201,W7e=202,K7e=203,q_=204,X_=205,q7e=206,X7e=207,Y7e=208,j7e=209,Q7e=210,Z7e=211,J7e=212,eKe=213,tKe=214,BP=0,FP=1,zP=2,jv=3,UP=4,HP=5,VP=6,$P=7,jQ=0,nKe=1,iKe=2,Md=0,rKe=1,sKe=2,aKe=3,oKe=4,lKe=5,cKe=6,uKe=7,QQ=300,Qv=301,Zv=302,GP=303,WP=304,jM=306,KP=1e3,yh=1001,qP=1002,Va=1003,dKe=1004,Aw=1005,zl=1006,XE=1007,_h=1008,tc=1009,ZQ=1010,JQ=1011,Y_=1012,MO=1013,xo=1014,ol=1015,Hg=1016,TO=1017,AO=1018,Jv=1020,eZ=35902,tZ=1021,nZ=1022,Ys=1023,iZ=1024,rZ=1025,kh=1026,eg=1027,sZ=1028,QM=1029,EO=1030,IO=1031,fv=1033,X1=33776,Y1=33777,j1=33778,Q1=33779,XP=35840,YP=35841,jP=35842,QP=35843,ZP=36196,JP=37492,eD=37496,tD=37808,nD=37809,iD=37810,rD=37811,sD=37812,aD=37813,oD=37814,lD=37815,cD=37816,uD=37817,dD=37818,fD=37819,hD=37820,pD=37821,Z1=36492,mD=36494,vD=36495,aZ=36283,gD=36284,yD=36285,_D=36286,fKe=3200,hKe=3201,pKe=0,mKe=1,rd="",uo="srgb",tg="srgb-linear",EC="linear",Di="srgb",im=7680,i$=519,vKe=512,gKe=513,yKe=514,oZ=515,_Ke=516,bKe=517,SKe=518,wKe=519,r$=35044,xKe=35048,s$="300 es",Gc=2e3,IC=2001;class fp{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const ys=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let a$=1234567;const Iy=Math.PI/180,j_=180/Math.PI;function Vg(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ys[n&255]+ys[n>>8&255]+ys[n>>16&255]+ys[n>>24&255]+"-"+ys[e&255]+ys[e>>8&255]+"-"+ys[e>>16&15|64]+ys[e>>24&255]+"-"+ys[t&63|128]+ys[t>>8&255]+"-"+ys[t>>16&255]+ys[t>>24&255]+ys[i&255]+ys[i>>8&255]+ys[i>>16&255]+ys[i>>24&255]).toLowerCase()}function Gn(n,e,t){return Math.max(e,Math.min(t,n))}function RO(n,e){return(n%e+e)%e}function CKe(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function MKe(n,e,t){return n!==e?(t-n)/(e-n):0}function Ry(n,e,t){return(1-t)*n+t*e}function TKe(n,e,t,i){return Ry(n,e,1-Math.exp(-t*i))}function AKe(n,e=1){return e-Math.abs(RO(n,e*2)-e)}function EKe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function IKe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function RKe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function PKe(n,e){return n+Math.random()*(e-n)}function DKe(n){return n*(.5-Math.random())}function LKe(n){n!==void 0&&(a$=n);let e=a$+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function kKe(n){return n*Iy}function OKe(n){return n*j_}function NKe(n){return(n&n-1)===0&&n!==0}function BKe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function FKe(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function zKe(n,e,t,i,r){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),c=s((e+i)/2),u=a((e+i)/2),d=s((e-i)/2),f=a((e-i)/2),h=s((i-e)/2),p=a((i-e)/2);switch(r){case"XYX":n.set(o*u,l*d,l*f,o*c);break;case"YZY":n.set(l*f,o*u,l*d,o*c);break;case"ZXZ":n.set(l*d,l*f,o*u,o*c);break;case"XZX":n.set(o*u,l*p,l*h,o*c);break;case"YXY":n.set(l*h,o*u,l*p,o*c);break;case"ZYZ":n.set(l*p,l*h,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Pm(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Vs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const lZ={DEG2RAD:Iy,RAD2DEG:j_,generateUUID:Vg,clamp:Gn,euclideanModulo:RO,mapLinear:CKe,inverseLerp:MKe,lerp:Ry,damp:TKe,pingpong:AKe,smoothstep:EKe,smootherstep:IKe,randInt:RKe,randFloat:PKe,randFloatSpread:DKe,seededRandom:LKe,degToRad:kKe,radToDeg:OKe,isPowerOfTwo:NKe,ceilPowerOfTwo:BKe,floorPowerOfTwo:FKe,setQuaternionFromProperEuler:zKe,normalize:Vs,denormalize:Pm};class on{constructor(e=0,t=0){on.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Gn(this.x,e.x,t.x),this.y=Gn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Gn(this.x,e,t),this.y=Gn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Gn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Gn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class En{constructor(e,t,i,r,s,a,o,l,c){En.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,c)}set(e,t,i,r,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],l=i[6],c=i[1],u=i[4],d=i[7],f=i[2],h=i[5],p=i[8],m=r[0],v=r[3],g=r[6],_=r[1],y=r[4],S=r[7],w=r[2],x=r[5],T=r[8];return s[0]=a*m+o*_+l*w,s[3]=a*v+o*y+l*x,s[6]=a*g+o*S+l*T,s[1]=c*m+u*_+d*w,s[4]=c*v+u*y+d*x,s[7]=c*g+u*S+d*T,s[2]=f*m+h*_+p*w,s[5]=f*v+h*y+p*x,s[8]=f*g+h*S+p*T,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-i*s*u+i*o*l+r*s*c-r*a*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=u*a-o*c,f=o*l-u*s,h=c*s-a*l,p=t*d+i*f+r*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(r*c-u*i)*m,e[2]=(o*i-r*a)*m,e[3]=f*m,e[4]=(u*t-r*l)*m,e[5]=(r*s-o*t)*m,e[6]=h*m,e[7]=(i*l-c*t)*m,e[8]=(a*t-i*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*a+c*o)+a+e,-r*c,r*l,-r*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(YE.makeScale(e,t)),this}rotate(e){return this.premultiply(YE.makeRotation(-e)),this}translate(e,t){return this.premultiply(YE.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const YE=new En;function cZ(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function RC(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function UKe(){const n=RC("canvas");return n.style.display="block",n}const o$={};function Dm(n){n in o$||(o$[n]=!0,console.warn(n))}function HKe(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function VKe(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function $Ke(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const l$=new En().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),c$=new En().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function GKe(){const n={enabled:!0,workingColorSpace:tg,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Di&&(r.r=Yc(r.r),r.g=Yc(r.g),r.b=Yc(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Di&&(r.r=hv(r.r),r.g=hv(r.g),r.b=hv(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===rd?EC:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[tg]:{primaries:e,whitePoint:i,transfer:EC,toXYZ:l$,fromXYZ:c$,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:uo},outputColorSpaceConfig:{drawingBufferColorSpace:uo}},[uo]:{primaries:e,whitePoint:i,transfer:Di,toXYZ:l$,fromXYZ:c$,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:uo}}}),n}const bi=GKe();function Yc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function hv(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let rm;class WKe{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{rm===void 0&&(rm=RC("canvas")),rm.width=e.width,rm.height=e.height;const i=rm.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=rm}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=RC("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Yc(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Yc(t[i]/255)*255):t[i]=Yc(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let KKe=0;class uZ{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:KKe++}),this.uuid=Vg(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(jE(r[a].image)):s.push(jE(r[a]))}else s=jE(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function jE(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?WKe.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let qKe=0;class Zs extends fp{constructor(e=Zs.DEFAULT_IMAGE,t=Zs.DEFAULT_MAPPING,i=yh,r=yh,s=zl,a=_h,o=Ys,l=tc,c=Zs.DEFAULT_ANISOTROPY,u=rd){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:qKe++}),this.uuid=Vg(),this.name="",this.source=new uZ(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new on(0,0),this.repeat=new on(1,1),this.center=new on(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new En,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==QQ)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case KP:e.x=e.x-Math.floor(e.x);break;case yh:e.x=e.x<0?0:1;break;case qP:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case KP:e.y=e.y-Math.floor(e.y);break;case yh:e.y=e.y<0?0:1;break;case qP:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Zs.DEFAULT_IMAGE=null;Zs.DEFAULT_MAPPING=QQ;Zs.DEFAULT_ANISOTROPY=1;class Xi{constructor(e=0,t=0,i=0,r=1){Xi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],h=l[5],p=l[9],m=l[2],v=l[6],g=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-m)<.01&&Math.abs(p-v)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+m)<.1&&Math.abs(p+v)<.1&&Math.abs(c+h+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(c+1)/2,S=(h+1)/2,w=(g+1)/2,x=(u+f)/4,T=(d+m)/4,C=(p+v)/4;return y>S&&y>w?y<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(y),r=x/i,s=T/i):S>w?S<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(S),i=x/r,s=C/r):w<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(w),i=T/s,r=C/s),this.set(i,r,s,t),this}let _=Math.sqrt((v-p)*(v-p)+(d-m)*(d-m)+(f-u)*(f-u));return Math.abs(_)<.001&&(_=1),this.x=(v-p)/_,this.y=(d-m)/_,this.z=(f-u)/_,this.w=Math.acos((c+h+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Gn(this.x,e.x,t.x),this.y=Gn(this.y,e.y,t.y),this.z=Gn(this.z,e.z,t.z),this.w=Gn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Gn(this.x,e,t),this.y=Gn(this.y,e,t),this.z=Gn(this.z,e,t),this.w=Gn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Gn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class XKe extends fp{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Xi(0,0,e,t),this.scissorTest=!1,this.viewport=new Xi(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:zl,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new Zs(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new uZ(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Yd extends XKe{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class dZ extends Zs{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Va,this.minFilter=Va,this.wrapR=yh,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class YKe extends Zs{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Va,this.minFilter=Va,this.wrapR=yh,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ji{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const f=s[a+0],h=s[a+1],p=s[a+2],m=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(o===1){e[t+0]=f,e[t+1]=h,e[t+2]=p,e[t+3]=m;return}if(d!==m||l!==f||c!==h||u!==p){let v=1-o;const g=l*f+c*h+u*p+d*m,_=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){const w=Math.sqrt(y),x=Math.atan2(w,g*_);v=Math.sin(v*x)/w,o=Math.sin(o*x)/w}const S=o*_;if(l=l*v+f*S,c=c*v+h*S,u=u*v+p*S,d=d*v+m*S,v===1-o){const w=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=w,c*=w,u*=w,d*=w}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[a],f=s[a+1],h=s[a+2],p=s[a+3];return e[t]=o*p+u*d+l*h-c*f,e[t+1]=l*p+u*f+c*d-o*h,e[t+2]=c*p+u*h+o*f-l*d,e[t+3]=u*p-o*d-l*f-c*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(i/2),u=o(r/2),d=o(s/2),f=l(i/2),h=l(r/2),p=l(s/2);switch(a){case"XYZ":this._x=f*u*d+c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d-f*h*p;break;case"YXZ":this._x=f*u*d+c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d+f*h*p;break;case"ZXY":this._x=f*u*d-c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d-f*h*p;break;case"ZYX":this._x=f*u*d-c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d+f*h*p;break;case"YZX":this._x=f*u*d+c*h*p,this._y=c*h*d+f*u*p,this._z=c*u*p-f*h*d,this._w=c*u*d-f*h*p;break;case"XZY":this._x=f*u*d-c*h*p,this._y=c*h*d-f*u*p,this._z=c*u*p+f*h*d,this._w=c*u*d+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],d=t[10],f=i+o+d;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(u-l)*h,this._y=(s-c)*h,this._z=(a-r)*h}else if(i>o&&i>d){const h=2*Math.sqrt(1+i-o-d);this._w=(u-l)/h,this._x=.25*h,this._y=(r+a)/h,this._z=(s+c)/h}else if(o>d){const h=2*Math.sqrt(1+o-i-d);this._w=(s-c)/h,this._x=(r+a)/h,this._y=.25*h,this._z=(l+u)/h}else{const h=2*Math.sqrt(1+d-i-o);this._w=(a-r)/h,this._x=(s+c)/h,this._y=(l+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Gn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+a*o+r*c-s*l,this._y=r*u+a*l+s*o-i*c,this._z=s*u+a*c+i*l-r*o,this._w=a*u-i*o-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const h=1-t;return this._w=h*a+t*this._w,this._x=h*i+t*this._x,this._y=h*r+t*this._y,this._z=h*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),d=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=a*d+this._w*f,this._x=i*d+this._x*f,this._y=r*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ze{constructor(e=0,t=0,i=0){ze.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(u$.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(u$.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=2*(a*r-o*i),u=2*(o*t-s*r),d=2*(s*i-a*t);return this.x=t+l*c+a*d-o*u,this.y=i+l*u+o*c-s*d,this.z=r+l*d+s*u-a*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Gn(this.x,e.x,t.x),this.y=Gn(this.y,e.y,t.y),this.z=Gn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Gn(this.x,e,t),this.y=Gn(this.y,e,t),this.z=Gn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Gn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return QE.copy(this).projectOnVector(e),this.sub(QE)}reflect(e){return this.sub(QE.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Gn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const QE=new ze,u$=new Ji;class Ul{constructor(e=new ze(1/0,1/0,1/0),t=new ze(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Ko.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Ko.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ko.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Ko):Ko.fromBufferAttribute(s,a),Ko.applyMatrix4(e.matrixWorld),this.expandByPoint(Ko);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Ew.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Ew.copy(i.boundingBox)),Ew.applyMatrix4(e.matrixWorld),this.union(Ew)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ko),Ko.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(P0),Iw.subVectors(this.max,P0),sm.subVectors(e.a,P0),am.subVectors(e.b,P0),om.subVectors(e.c,P0),Uu.subVectors(am,sm),Hu.subVectors(om,am),Of.subVectors(sm,om);let t=[0,-Uu.z,Uu.y,0,-Hu.z,Hu.y,0,-Of.z,Of.y,Uu.z,0,-Uu.x,Hu.z,0,-Hu.x,Of.z,0,-Of.x,-Uu.y,Uu.x,0,-Hu.y,Hu.x,0,-Of.y,Of.x,0];return!ZE(t,sm,am,om,Iw)||(t=[1,0,0,0,1,0,0,0,1],!ZE(t,sm,am,om,Iw))?!1:(Rw.crossVectors(Uu,Hu),t=[Rw.x,Rw.y,Rw.z],ZE(t,sm,am,om,Iw))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ko).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ko).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(xc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),xc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),xc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),xc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),xc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),xc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),xc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),xc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(xc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const xc=[new ze,new ze,new ze,new ze,new ze,new ze,new ze,new ze],Ko=new ze,Ew=new Ul,sm=new ze,am=new ze,om=new ze,Uu=new ze,Hu=new ze,Of=new ze,P0=new ze,Iw=new ze,Rw=new ze,Nf=new ze;function ZE(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){Nf.fromArray(n,s);const o=r.x*Math.abs(Nf.x)+r.y*Math.abs(Nf.y)+r.z*Math.abs(Nf.z),l=e.dot(Nf),c=t.dot(Nf),u=i.dot(Nf);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const jKe=new Ul,D0=new ze,JE=new ze;class PO{constructor(e=new ze,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):jKe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;D0.subVectors(e,this.center);const t=D0.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(D0,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(JE.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(D0.copy(e.center).add(JE)),this.expandByPoint(D0.copy(e.center).sub(JE))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Cc=new ze,e2=new ze,Pw=new ze,Vu=new ze,t2=new ze,Dw=new ze,n2=new ze;let fZ=class{constructor(e=new ze,t=new ze(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Cc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Cc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Cc.copy(this.origin).addScaledVector(this.direction,t),Cc.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){e2.copy(e).add(t).multiplyScalar(.5),Pw.copy(t).sub(e).normalize(),Vu.copy(this.origin).sub(e2);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Pw),o=Vu.dot(this.direction),l=-Vu.dot(Pw),c=Vu.lengthSq(),u=Math.abs(1-a*a);let d,f,h,p;if(u>0)if(d=a*l-o,f=a*o-l,p=s*u,d>=0)if(f>=-p)if(f<=p){const m=1/u;d*=m,f*=m,h=d*(d+a*f+2*o)+f*(a*d+f+2*l)+c}else f=s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+c;else f=-s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+c;else f<=-p?(d=Math.max(0,-(-a*s+o)),f=d>0?-s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+c):f<=p?(d=0,f=Math.min(Math.max(-s,-l),s),h=f*(f+2*l)+c):(d=Math.max(0,-(a*s+o)),f=d>0?s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+c);else f=a>0?-s:s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(e2).addScaledVector(Pw,f),h}intersectSphere(e,t){Cc.subVectors(e.center,this.origin);const i=Cc.dot(this.direction),r=Cc.dot(Cc)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(i=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(i=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,a=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,a=(e.min.y-f.y)*u),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),d>=0?(o=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(o=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Cc)!==null}intersectTriangle(e,t,i,r,s){t2.subVectors(t,e),Dw.subVectors(i,e),n2.crossVectors(t2,Dw);let a=this.direction.dot(n2),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Vu.subVectors(this.origin,e);const l=o*this.direction.dot(Dw.crossVectors(Vu,Dw));if(l<0)return null;const c=o*this.direction.dot(t2.cross(Vu));if(c<0||l+c>a)return null;const u=-o*Vu.dot(n2);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}};class In{constructor(e,t,i,r,s,a,o,l,c,u,d,f,h,p,m,v){In.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,c,u,d,f,h,p,m,v)}set(e,t,i,r,s,a,o,l,c,u,d,f,h,p,m,v){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=a,g[9]=o,g[13]=l,g[2]=c,g[6]=u,g[10]=d,g[14]=f,g[3]=h,g[7]=p,g[11]=m,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new In().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/lm.setFromMatrixColumn(e,0).length(),s=1/lm.setFromMatrixColumn(e,1).length(),a=1/lm.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const f=a*u,h=a*d,p=o*u,m=o*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=h+p*c,t[5]=f-m*c,t[9]=-o*l,t[2]=m-f*c,t[6]=p+h*c,t[10]=a*l}else if(e.order==="YXZ"){const f=l*u,h=l*d,p=c*u,m=c*d;t[0]=f+m*o,t[4]=p*o-h,t[8]=a*c,t[1]=a*d,t[5]=a*u,t[9]=-o,t[2]=h*o-p,t[6]=m+f*o,t[10]=a*l}else if(e.order==="ZXY"){const f=l*u,h=l*d,p=c*u,m=c*d;t[0]=f-m*o,t[4]=-a*d,t[8]=p+h*o,t[1]=h+p*o,t[5]=a*u,t[9]=m-f*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const f=a*u,h=a*d,p=o*u,m=o*d;t[0]=l*u,t[4]=p*c-h,t[8]=f*c+m,t[1]=l*d,t[5]=m*c+f,t[9]=h*c-p,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const f=a*l,h=a*c,p=o*l,m=o*c;t[0]=l*u,t[4]=m-f*d,t[8]=p*d+h,t[1]=d,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=h*d+p,t[10]=f-m*d}else if(e.order==="XZY"){const f=a*l,h=a*c,p=o*l,m=o*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=f*d+m,t[5]=a*u,t[9]=h*d-p,t[2]=p*d-h,t[6]=o*u,t[10]=m*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(QKe,e,ZKe)}lookAt(e,t,i){const r=this.elements;return Ea.subVectors(e,t),Ea.lengthSq()===0&&(Ea.z=1),Ea.normalize(),$u.crossVectors(i,Ea),$u.lengthSq()===0&&(Math.abs(i.z)===1?Ea.x+=1e-4:Ea.z+=1e-4,Ea.normalize(),$u.crossVectors(i,Ea)),$u.normalize(),Lw.crossVectors(Ea,$u),r[0]=$u.x,r[4]=Lw.x,r[8]=Ea.x,r[1]=$u.y,r[5]=Lw.y,r[9]=Ea.y,r[2]=$u.z,r[6]=Lw.z,r[10]=Ea.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],l=i[8],c=i[12],u=i[1],d=i[5],f=i[9],h=i[13],p=i[2],m=i[6],v=i[10],g=i[14],_=i[3],y=i[7],S=i[11],w=i[15],x=r[0],T=r[4],C=r[8],M=r[12],A=r[1],E=r[5],I=r[9],P=r[13],D=r[2],L=r[6],R=r[10],B=r[14],k=r[3],O=r[7],U=r[11],G=r[15];return s[0]=a*x+o*A+l*D+c*k,s[4]=a*T+o*E+l*L+c*O,s[8]=a*C+o*I+l*R+c*U,s[12]=a*M+o*P+l*B+c*G,s[1]=u*x+d*A+f*D+h*k,s[5]=u*T+d*E+f*L+h*O,s[9]=u*C+d*I+f*R+h*U,s[13]=u*M+d*P+f*B+h*G,s[2]=p*x+m*A+v*D+g*k,s[6]=p*T+m*E+v*L+g*O,s[10]=p*C+m*I+v*R+g*U,s[14]=p*M+m*P+v*B+g*G,s[3]=_*x+y*A+S*D+w*k,s[7]=_*T+y*E+S*L+w*O,s[11]=_*C+y*I+S*R+w*U,s[15]=_*M+y*P+S*B+w*G,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],h=e[14],p=e[3],m=e[7],v=e[11],g=e[15];return p*(+s*l*d-r*c*d-s*o*f+i*c*f+r*o*h-i*l*h)+m*(+t*l*h-t*c*f+s*a*f-r*a*h+r*c*u-s*l*u)+v*(+t*c*d-t*o*h-s*a*d+i*a*h+s*o*u-i*c*u)+g*(-r*o*u-t*l*d+t*o*f+r*a*d-i*a*f+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],m=e[13],v=e[14],g=e[15],_=d*v*c-m*f*c+m*l*h-o*v*h-d*l*g+o*f*g,y=p*f*c-u*v*c-p*l*h+a*v*h+u*l*g-a*f*g,S=u*m*c-p*d*c+p*o*h-a*m*h-u*o*g+a*d*g,w=p*d*l-u*m*l-p*o*f+a*m*f+u*o*v-a*d*v,x=t*_+i*y+r*S+s*w;if(x===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/x;return e[0]=_*T,e[1]=(m*f*s-d*v*s-m*r*h+i*v*h+d*r*g-i*f*g)*T,e[2]=(o*v*s-m*l*s+m*r*c-i*v*c-o*r*g+i*l*g)*T,e[3]=(d*l*s-o*f*s-d*r*c+i*f*c+o*r*h-i*l*h)*T,e[4]=y*T,e[5]=(u*v*s-p*f*s+p*r*h-t*v*h-u*r*g+t*f*g)*T,e[6]=(p*l*s-a*v*s-p*r*c+t*v*c+a*r*g-t*l*g)*T,e[7]=(a*f*s-u*l*s+u*r*c-t*f*c-a*r*h+t*l*h)*T,e[8]=S*T,e[9]=(p*d*s-u*m*s-p*i*h+t*m*h+u*i*g-t*d*g)*T,e[10]=(a*m*s-p*o*s+p*i*c-t*m*c-a*i*g+t*o*g)*T,e[11]=(u*o*s-a*d*s-u*i*c+t*d*c+a*i*h-t*o*h)*T,e[12]=w*T,e[13]=(u*m*r-p*d*r+p*i*f-t*m*f-u*i*v+t*d*v)*T,e[14]=(p*o*r-a*m*r-p*i*l+t*m*l+a*i*v-t*o*v)*T,e[15]=(a*d*r-u*o*r+u*i*l-t*d*l-a*i*f+t*o*f)*T,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+i,c*o-r*l,c*l+r*o,0,c*o+r*l,u*o+i,u*l-r*a,0,c*l-r*o,u*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,d=o+o,f=s*c,h=s*u,p=s*d,m=a*u,v=a*d,g=o*d,_=l*c,y=l*u,S=l*d,w=i.x,x=i.y,T=i.z;return r[0]=(1-(m+g))*w,r[1]=(h+S)*w,r[2]=(p-y)*w,r[3]=0,r[4]=(h-S)*x,r[5]=(1-(f+g))*x,r[6]=(v+_)*x,r[7]=0,r[8]=(p+y)*T,r[9]=(v-_)*T,r[10]=(1-(f+m))*T,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=lm.set(r[0],r[1],r[2]).length();const a=lm.set(r[4],r[5],r[6]).length(),o=lm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],qo.copy(this);const c=1/s,u=1/a,d=1/o;return qo.elements[0]*=c,qo.elements[1]*=c,qo.elements[2]*=c,qo.elements[4]*=u,qo.elements[5]*=u,qo.elements[6]*=u,qo.elements[8]*=d,qo.elements[9]*=d,qo.elements[10]*=d,t.setFromRotationMatrix(qo),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a,o=Gc){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),d=(t+e)/(t-e),f=(i+r)/(i-r);let h,p;if(o===Gc)h=-(a+s)/(a-s),p=-2*a*s/(a-s);else if(o===IC)h=-a/(a-s),p=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=h,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,a,o=Gc){const l=this.elements,c=1/(t-e),u=1/(i-r),d=1/(a-s),f=(t+e)*c,h=(i+r)*u;let p,m;if(o===Gc)p=(a+s)*d,m=-2*d;else if(o===IC)p=s*d,m=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-h,l[2]=0,l[6]=0,l[10]=m,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const lm=new ze,qo=new In,QKe=new ze(0,0,0),ZKe=new ze(1,1,1),$u=new ze,Lw=new ze,Ea=new ze,d$=new In,f$=new Ji;class ou{constructor(e=0,t=0,i=0,r=ou.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],c=r[5],u=r[9],d=r[2],f=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(Gn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Gn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Gn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Gn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(Gn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-Gn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return d$.makeRotationFromQuaternion(e),this.setFromRotationMatrix(d$,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return f$.setFromEuler(this),this.setFromQuaternion(f$,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ou.DEFAULT_ORDER="XYZ";class hZ{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let JKe=0;const h$=new ze,cm=new Ji,Mc=new In,kw=new ze,L0=new ze,eqe=new ze,tqe=new Ji,p$=new ze(1,0,0),m$=new ze(0,1,0),v$=new ze(0,0,1),g$={type:"added"},nqe={type:"removed"},um={type:"childadded",child:null},i2={type:"childremoved",child:null};class Fr extends fp{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:JKe++}),this.uuid=Vg(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Fr.DEFAULT_UP.clone();const e=new ze,t=new ou,i=new Ji,r=new ze(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new In},normalMatrix:{value:new En}}),this.matrix=new In,this.matrixWorld=new In,this.matrixAutoUpdate=Fr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Fr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new hZ,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return cm.setFromAxisAngle(e,t),this.quaternion.multiply(cm),this}rotateOnWorldAxis(e,t){return cm.setFromAxisAngle(e,t),this.quaternion.premultiply(cm),this}rotateX(e){return this.rotateOnAxis(p$,e)}rotateY(e){return this.rotateOnAxis(m$,e)}rotateZ(e){return this.rotateOnAxis(v$,e)}translateOnAxis(e,t){return h$.copy(e).applyQuaternion(this.quaternion),this.position.add(h$.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(p$,e)}translateY(e){return this.translateOnAxis(m$,e)}translateZ(e){return this.translateOnAxis(v$,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Mc.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?kw.copy(e):kw.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),L0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Mc.lookAt(L0,kw,this.up):Mc.lookAt(kw,L0,this.up),this.quaternion.setFromRotationMatrix(Mc),r&&(Mc.extractRotation(r.matrixWorld),cm.setFromRotationMatrix(Mc),this.quaternion.premultiply(cm.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(g$),um.child=e,this.dispatchEvent(um),um.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(nqe),i2.child=e,this.dispatchEvent(i2),i2.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Mc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Mc.multiply(e.parent.matrixWorld)),e.applyMatrix4(Mc),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(g$),um.child=e,this.dispatchEvent(um),um.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(L0,e,eqe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(L0,tqe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),d=a(e.shapes),f=a(e.skeletons),h=a(e.animations),p=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),f.length>0&&(i.skeletons=f),h.length>0&&(i.animations=h),p.length>0&&(i.nodes=p)}return i.object=r,i;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Fr.DEFAULT_UP=new ze(0,1,0);Fr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Fr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Xo=new ze,Tc=new ze,r2=new ze,Ac=new ze,dm=new ze,fm=new ze,y$=new ze,s2=new ze,a2=new ze,o2=new ze,l2=new Xi,c2=new Xi,u2=new Xi;class tl{constructor(e=new ze,t=new ze,i=new ze){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Xo.subVectors(e,t),r.cross(Xo);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Xo.subVectors(r,t),Tc.subVectors(i,t),r2.subVectors(e,t);const a=Xo.dot(Xo),o=Xo.dot(Tc),l=Xo.dot(r2),c=Tc.dot(Tc),u=Tc.dot(r2),d=a*c-o*o;if(d===0)return s.set(0,0,0),null;const f=1/d,h=(c*l-o*u)*f,p=(a*u-o*l)*f;return s.set(1-h-p,p,h)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ac)===null?!1:Ac.x>=0&&Ac.y>=0&&Ac.x+Ac.y<=1}static getInterpolation(e,t,i,r,s,a,o,l){return this.getBarycoord(e,t,i,r,Ac)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Ac.x),l.addScaledVector(a,Ac.y),l.addScaledVector(o,Ac.z),l)}static getInterpolatedAttribute(e,t,i,r,s,a){return l2.setScalar(0),c2.setScalar(0),u2.setScalar(0),l2.fromBufferAttribute(e,t),c2.fromBufferAttribute(e,i),u2.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(l2,s.x),a.addScaledVector(c2,s.y),a.addScaledVector(u2,s.z),a}static isFrontFacing(e,t,i,r){return Xo.subVectors(i,t),Tc.subVectors(e,t),Xo.cross(Tc).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Xo.subVectors(this.c,this.b),Tc.subVectors(this.a,this.b),Xo.cross(Tc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return tl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return tl.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return tl.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return tl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return tl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;dm.subVectors(r,i),fm.subVectors(s,i),s2.subVectors(e,i);const l=dm.dot(s2),c=fm.dot(s2);if(l<=0&&c<=0)return t.copy(i);a2.subVectors(e,r);const u=dm.dot(a2),d=fm.dot(a2);if(u>=0&&d<=u)return t.copy(r);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return a=l/(l-u),t.copy(i).addScaledVector(dm,a);o2.subVectors(e,s);const h=dm.dot(o2),p=fm.dot(o2);if(p>=0&&h<=p)return t.copy(s);const m=h*c-l*p;if(m<=0&&c>=0&&p<=0)return o=c/(c-p),t.copy(i).addScaledVector(fm,o);const v=u*p-h*d;if(v<=0&&d-u>=0&&h-p>=0)return y$.subVectors(s,r),o=(d-u)/(d-u+(h-p)),t.copy(r).addScaledVector(y$,o);const g=1/(v+m+f);return a=m*g,o=f*g,t.copy(i).addScaledVector(dm,a).addScaledVector(fm,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const pZ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Gu={h:0,s:0,l:0},Ow={h:0,s:0,l:0};function d2(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Si{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=uo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,bi.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=bi.workingColorSpace){return this.r=e,this.g=t,this.b=i,bi.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=bi.workingColorSpace){if(e=RO(e,1),t=Gn(t,0,1),i=Gn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=d2(a,s,e+1/3),this.g=d2(a,s,e),this.b=d2(a,s,e-1/3)}return bi.toWorkingColorSpace(this,r),this}setStyle(e,t=uo){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=uo){const i=pZ[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Yc(e.r),this.g=Yc(e.g),this.b=Yc(e.b),this}copyLinearToSRGB(e){return this.r=hv(e.r),this.g=hv(e.g),this.b=hv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=uo){return bi.fromWorkingColorSpace(_s.copy(this),e),Math.round(Gn(_s.r*255,0,255))*65536+Math.round(Gn(_s.g*255,0,255))*256+Math.round(Gn(_s.b*255,0,255))}getHexString(e=uo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=bi.workingColorSpace){bi.fromWorkingColorSpace(_s.copy(this),t);const i=_s.r,r=_s.g,s=_s.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let l,c;const u=(o+a)/2;if(o===a)l=0,c=0;else{const d=a-o;switch(c=u<=.5?d/(a+o):d/(2-a-o),a){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=bi.workingColorSpace){return bi.fromWorkingColorSpace(_s.copy(this),t),e.r=_s.r,e.g=_s.g,e.b=_s.b,e}getStyle(e=uo){bi.fromWorkingColorSpace(_s.copy(this),e);const t=_s.r,i=_s.g,r=_s.b;return e!==uo?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Gu),this.setHSL(Gu.h+e,Gu.s+t,Gu.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Gu),e.getHSL(Ow);const i=Ry(Gu.h,Ow.h,t),r=Ry(Gu.s,Ow.s,t),s=Ry(Gu.l,Ow.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _s=new Si;Si.NAMES=pZ;let iqe=0;class ZM extends fp{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iqe++}),this.uuid=Vg(),this.name="",this.type="Material",this.blending=Cd,this.side=ec,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=q_,this.blendDst=X_,this.blendEquation=eh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Si(0,0,0),this.blendAlpha=0,this.depthFunc=jv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=i$,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=im,this.stencilZFail=im,this.stencilZPass=im,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Cd&&(i.blending=this.blending),this.side!==ec&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==q_&&(i.blendSrc=this.blendSrc),this.blendDst!==X_&&(i.blendDst=this.blendDst),this.blendEquation!==eh&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==jv&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==i$&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==im&&(i.stencilFail=this.stencilFail),this.stencilZFail!==im&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==im&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class ep extends ZM{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Si(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ou,this.combine=jQ,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Uc=rqe();function rqe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function sqe(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Gn(n,-65504,65504),Uc.floatView[0]=n;const e=Uc.uint32View[0],t=e>>23&511;return Uc.baseTable[t]+((e&8388607)>>Uc.shiftTable[t])}function aqe(n){const e=n>>10;return Uc.uint32View[0]=Uc.mantissaTable[Uc.offsetTable[e]+(n&1023)]+Uc.exponentTable[e],Uc.floatView[0]}const Q_={toHalfFloat:sqe,fromHalfFloat:aqe},Sr=new ze,Nw=new on;class Io{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=r$,this.updateRanges=[],this.gpuType=ol,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Nw.fromBufferAttribute(this,t),Nw.applyMatrix3(e),this.setXY(t,Nw.x,Nw.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Sr.fromBufferAttribute(this,t),Sr.applyMatrix3(e),this.setXYZ(t,Sr.x,Sr.y,Sr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Sr.fromBufferAttribute(this,t),Sr.applyMatrix4(e),this.setXYZ(t,Sr.x,Sr.y,Sr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Sr.fromBufferAttribute(this,t),Sr.applyNormalMatrix(e),this.setXYZ(t,Sr.x,Sr.y,Sr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Sr.fromBufferAttribute(this,t),Sr.transformDirection(e),this.setXYZ(t,Sr.x,Sr.y,Sr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Pm(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Vs(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Pm(t,this.array)),t}setX(e,t){return this.normalized&&(t=Vs(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Pm(t,this.array)),t}setY(e,t){return this.normalized&&(t=Vs(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Pm(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Vs(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Pm(t,this.array)),t}setW(e,t){return this.normalized&&(t=Vs(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Vs(t,this.array),i=Vs(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Vs(t,this.array),i=Vs(i,this.array),r=Vs(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Vs(t,this.array),i=Vs(i,this.array),r=Vs(r,this.array),s=Vs(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==r$&&(e.usage=this.usage),e}}class mZ extends Io{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class vZ extends Io{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class $a extends Io{constructor(e,t,i){super(new Float32Array(e),t,i)}}let oqe=0;const to=new In,f2=new Fr,hm=new ze,Ia=new Ul,k0=new Ul,Kr=new ze;class zo extends fp{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:oqe++}),this.uuid=Vg(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(cZ(e)?vZ:mZ)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new En().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return to.makeRotationFromQuaternion(e),this.applyMatrix4(to),this}rotateX(e){return to.makeRotationX(e),this.applyMatrix4(to),this}rotateY(e){return to.makeRotationY(e),this.applyMatrix4(to),this}rotateZ(e){return to.makeRotationZ(e),this.applyMatrix4(to),this}translate(e,t,i){return to.makeTranslation(e,t,i),this.applyMatrix4(to),this}scale(e,t,i){return to.makeScale(e,t,i),this.applyMatrix4(to),this}lookAt(e){return f2.lookAt(e),f2.updateMatrix(),this.applyMatrix4(f2.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(hm).negate(),this.translate(hm.x,hm.y,hm.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new $a(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ul);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ze(-1/0,-1/0,-1/0),new ze(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Ia.setFromBufferAttribute(s),this.morphTargetsRelative?(Kr.addVectors(this.boundingBox.min,Ia.min),this.boundingBox.expandByPoint(Kr),Kr.addVectors(this.boundingBox.max,Ia.max),this.boundingBox.expandByPoint(Kr)):(this.boundingBox.expandByPoint(Ia.min),this.boundingBox.expandByPoint(Ia.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new PO);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ze,1/0);return}if(e){const i=this.boundingSphere.center;if(Ia.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];k0.setFromBufferAttribute(o),this.morphTargetsRelative?(Kr.addVectors(Ia.min,k0.min),Ia.expandByPoint(Kr),Kr.addVectors(Ia.max,k0.max),Ia.expandByPoint(Kr)):(Ia.expandByPoint(k0.min),Ia.expandByPoint(k0.max))}Ia.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)Kr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Kr));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)Kr.fromBufferAttribute(o,c),l&&(hm.fromBufferAttribute(e,c),Kr.add(hm)),r=Math.max(r,i.distanceToSquared(Kr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Io(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let C=0;C<i.count;C++)o[C]=new ze,l[C]=new ze;const c=new ze,u=new ze,d=new ze,f=new on,h=new on,p=new on,m=new ze,v=new ze;function g(C,M,A){c.fromBufferAttribute(i,C),u.fromBufferAttribute(i,M),d.fromBufferAttribute(i,A),f.fromBufferAttribute(s,C),h.fromBufferAttribute(s,M),p.fromBufferAttribute(s,A),u.sub(c),d.sub(c),h.sub(f),p.sub(f);const E=1/(h.x*p.y-p.x*h.y);isFinite(E)&&(m.copy(u).multiplyScalar(p.y).addScaledVector(d,-h.y).multiplyScalar(E),v.copy(d).multiplyScalar(h.x).addScaledVector(u,-p.x).multiplyScalar(E),o[C].add(m),o[M].add(m),o[A].add(m),l[C].add(v),l[M].add(v),l[A].add(v))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let C=0,M=_.length;C<M;++C){const A=_[C],E=A.start,I=A.count;for(let P=E,D=E+I;P<D;P+=3)g(e.getX(P+0),e.getX(P+1),e.getX(P+2))}const y=new ze,S=new ze,w=new ze,x=new ze;function T(C){w.fromBufferAttribute(r,C),x.copy(w);const M=o[C];y.copy(M),y.sub(w.multiplyScalar(w.dot(M))).normalize(),S.crossVectors(x,M);const E=S.dot(l[C])<0?-1:1;a.setXYZW(C,y.x,y.y,y.z,E)}for(let C=0,M=_.length;C<M;++C){const A=_[C],E=A.start,I=A.count;for(let P=E,D=E+I;P<D;P+=3)T(e.getX(P+0)),T(e.getX(P+1)),T(e.getX(P+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Io(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let f=0,h=i.count;f<h;f++)i.setXYZ(f,0,0,0);const r=new ze,s=new ze,a=new ze,o=new ze,l=new ze,c=new ze,u=new ze,d=new ze;if(e)for(let f=0,h=e.count;f<h;f+=3){const p=e.getX(f+0),m=e.getX(f+1),v=e.getX(f+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),a.fromBufferAttribute(t,v),u.subVectors(a,s),d.subVectors(r,s),u.cross(d),o.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,v),o.add(u),l.add(u),c.add(u),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(v,c.x,c.y,c.z)}else for(let f=0,h=t.count;f<h;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),a.fromBufferAttribute(t,f+2),u.subVectors(a,s),d.subVectors(r,s),u.cross(d),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Kr.fromBufferAttribute(e,t),Kr.normalize(),e.setXYZ(t,Kr.x,Kr.y,Kr.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,d=o.normalized,f=new c.constructor(l.length*u);let h=0,p=0;for(let m=0,v=l.length;m<v;m++){o.isInterleavedBufferAttribute?h=l[m]*o.data.stride+o.offset:h=l[m]*u;for(let g=0;g<u;g++)f[p++]=c[h++]}return new Io(f,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new zo,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=e(l,i);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,d=c.length;u<d;u++){const f=c[u],h=e(f,i);l.push(h)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++){const h=c[d];u.push(h.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let f=0,h=d.length;f<h;f++)u.push(d[f].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const d=a[c];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _$=new In,Bf=new fZ,Bw=new PO,b$=new ze,Fw=new ze,zw=new ze,Uw=new ze,h2=new ze,Hw=new ze,S$=new ze,Vw=new ze;class hr extends Fr{constructor(e=new zo,t=new ep){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){Hw.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=o[l],d=s[l];u!==0&&(h2.fromBufferAttribute(d,e),a?Hw.addScaledVector(h2,u):Hw.addScaledVector(h2.sub(t),u))}t.add(Hw)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Bw.copy(i.boundingSphere),Bw.applyMatrix4(s),Bf.copy(e.ray).recast(e.near),!(Bw.containsPoint(Bf.origin)===!1&&(Bf.intersectSphere(Bw,b$)===null||Bf.origin.distanceToSquared(b$)>(e.far-e.near)**2))&&(_$.copy(s).invert(),Bf.copy(e.ray).applyMatrix4(_$),!(i.boundingBox!==null&&Bf.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Bf)))}_computeIntersections(e,t,i){let r;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,f=s.groups,h=s.drawRange;if(o!==null)if(Array.isArray(a))for(let p=0,m=f.length;p<m;p++){const v=f[p],g=a[v.materialIndex],_=Math.max(v.start,h.start),y=Math.min(o.count,Math.min(v.start+v.count,h.start+h.count));for(let S=_,w=y;S<w;S+=3){const x=o.getX(S),T=o.getX(S+1),C=o.getX(S+2);r=$w(this,g,e,i,c,u,d,x,T,C),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=v.materialIndex,t.push(r))}}else{const p=Math.max(0,h.start),m=Math.min(o.count,h.start+h.count);for(let v=p,g=m;v<g;v+=3){const _=o.getX(v),y=o.getX(v+1),S=o.getX(v+2);r=$w(this,a,e,i,c,u,d,_,y,S),r&&(r.faceIndex=Math.floor(v/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(a))for(let p=0,m=f.length;p<m;p++){const v=f[p],g=a[v.materialIndex],_=Math.max(v.start,h.start),y=Math.min(l.count,Math.min(v.start+v.count,h.start+h.count));for(let S=_,w=y;S<w;S+=3){const x=S,T=S+1,C=S+2;r=$w(this,g,e,i,c,u,d,x,T,C),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=v.materialIndex,t.push(r))}}else{const p=Math.max(0,h.start),m=Math.min(l.count,h.start+h.count);for(let v=p,g=m;v<g;v+=3){const _=v,y=v+1,S=v+2;r=$w(this,a,e,i,c,u,d,_,y,S),r&&(r.faceIndex=Math.floor(v/3),t.push(r))}}}}function lqe(n,e,t,i,r,s,a,o){let l;if(e.side===ba?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side===ec,o),l===null)return null;Vw.copy(o),Vw.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Vw);return c<t.near||c>t.far?null:{distance:c,point:Vw.clone(),object:n}}function $w(n,e,t,i,r,s,a,o,l,c){n.getVertexPosition(o,Fw),n.getVertexPosition(l,zw),n.getVertexPosition(c,Uw);const u=lqe(n,e,t,i,Fw,zw,Uw,S$);if(u){const d=new ze;tl.getBarycoord(S$,Fw,zw,Uw,d),r&&(u.uv=tl.getInterpolatedAttribute(r,o,l,c,d,new on)),s&&(u.uv1=tl.getInterpolatedAttribute(s,o,l,c,d,new on)),a&&(u.normal=tl.getInterpolatedAttribute(a,o,l,c,d,new ze),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const f={a:o,b:l,c,normal:new ze,materialIndex:0};tl.getNormal(Fw,zw,Uw,f.normal),u.face=f,u.barycoord=d}return u}class $g extends zo{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],d=[];let f=0,h=0;p("z","y","x",-1,-1,i,t,e,a,s,0),p("z","y","x",1,-1,i,t,-e,a,s,1),p("x","z","y",1,1,e,i,t,r,a,2),p("x","z","y",1,-1,e,i,-t,r,a,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new $a(c,3)),this.setAttribute("normal",new $a(u,3)),this.setAttribute("uv",new $a(d,2));function p(m,v,g,_,y,S,w,x,T,C,M){const A=S/T,E=w/C,I=S/2,P=w/2,D=x/2,L=T+1,R=C+1;let B=0,k=0;const O=new ze;for(let U=0;U<R;U++){const G=U*E-P;for(let q=0;q<L;q++){const W=q*A-I;O[m]=W*_,O[v]=G*y,O[g]=D,c.push(O.x,O.y,O.z),O[m]=0,O[v]=0,O[g]=x>0?1:-1,u.push(O.x,O.y,O.z),d.push(q/T),d.push(1-U/C),B+=1}}for(let U=0;U<C;U++)for(let G=0;G<T;G++){const q=f+G+L*U,W=f+G+L*(U+1),Y=f+(G+1)+L*(U+1),J=f+(G+1)+L*U;l.push(q,W,J),l.push(W,Y,J),k+=6}o.addGroup(h,k,M),h+=k,f+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $g(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ng(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function $s(n){const e={};for(let t=0;t<n.length;t++){const i=ng(n[t]);for(const r in i)e[r]=i[r]}return e}function cqe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function gZ(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:bi.workingColorSpace}const uqe={clone:ng,merge:$s};var dqe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fqe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ga extends ZM{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=dqe,this.fragmentShader=fqe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ng(e.uniforms),this.uniformsGroups=cqe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class yZ extends Fr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new In,this.projectionMatrix=new In,this.projectionMatrixInverse=new In,this.coordinateSystem=Gc}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Wu=new ze,w$=new on,x$=new on;class go extends yZ{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=j_*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Iy*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return j_*2*Math.atan(Math.tan(Iy*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Wu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Wu.x,Wu.y).multiplyScalar(-e/Wu.z),Wu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Wu.x,Wu.y).multiplyScalar(-e/Wu.z)}getViewSize(e,t){return this.getViewBounds(e,w$,x$),t.subVectors(x$,w$)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Iy*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*i/c,r*=a.width/l,i*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const pm=-90,mm=1;class hqe extends Fr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new go(pm,mm,e,t);r.layers=this.layers,this.add(r);const s=new go(pm,mm,e,t);s.layers=this.layers,this.add(s);const a=new go(pm,mm,e,t);a.layers=this.layers,this.add(a);const o=new go(pm,mm,e,t);o.layers=this.layers,this.add(o);const l=new go(pm,mm,e,t);l.layers=this.layers,this.add(l);const c=new go(pm,mm,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,a,o,l]=t;for(const c of t)this.remove(c);if(e===Gc)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===IC)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,c,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,a),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=m,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,f,h),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class _Z extends Zs{constructor(e,t,i,r,s,a,o,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Qv,super(e,t,i,r,s,a,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class pqe extends Yd{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new _Z(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:zl}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new $g(5,5,5),s=new Ga({name:"CubemapFromEquirect",uniforms:ng(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ba,blending:xd});s.uniforms.tEquirect.value=t;const a=new hr(r,s),o=t.minFilter;return t.minFilter===_h&&(t.minFilter=zl),new hqe(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}class mqe extends Fr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ou,this.environmentIntensity=1,this.environmentRotation=new ou,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Ku extends Zs{constructor(e=null,t=1,i=1,r,s,a,o,l,c=Va,u=Va,d,f){super(null,a,o,l,c,u,r,s,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class vqe extends Io{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const p2=new ze,gqe=new ze,yqe=new En;class td{constructor(e=new ze(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=p2.subVectors(i,t).cross(gqe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(p2),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||yqe.getNormalMatrix(e),r=this.coplanarPoint(p2).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ff=new PO,Gw=new ze;class bZ{constructor(e=new td,t=new td,i=new td,r=new td,s=new td,a=new td){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Gc){const i=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],l=r[3],c=r[4],u=r[5],d=r[6],f=r[7],h=r[8],p=r[9],m=r[10],v=r[11],g=r[12],_=r[13],y=r[14],S=r[15];if(i[0].setComponents(l-s,f-c,v-h,S-g).normalize(),i[1].setComponents(l+s,f+c,v+h,S+g).normalize(),i[2].setComponents(l+a,f+u,v+p,S+_).normalize(),i[3].setComponents(l-a,f-u,v-p,S-_).normalize(),i[4].setComponents(l-o,f-d,v-m,S-y).normalize(),t===Gc)i[5].setComponents(l+o,f+d,v+m,S+y).normalize();else if(t===IC)i[5].setComponents(o,d,m,y).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ff.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ff.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ff)}intersectsSprite(e){return Ff.center.set(0,0,0),Ff.radius=.7071067811865476,Ff.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ff)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Gw.x=r.normal.x>0?e.max.x:e.min.x,Gw.y=r.normal.y>0?e.max.y:e.min.y,Gw.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Gw)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class Ww extends Fr{constructor(){super(),this.isGroup=!0,this.type="Group"}}class DO extends Zs{constructor(e,t,i,r,s,a,o,l,c,u=kh){if(u!==kh&&u!==eg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===kh&&(i=xo),i===void 0&&u===eg&&(i=Jv),super(null,r,s,a,o,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:Va,this.minFilter=l!==void 0?l:Va,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Z_ extends zo{constructor(e=1,t=1,i=1,r=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],d=[],f=[],h=[];let p=0;const m=[],v=i/2;let g=0;_(),a===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new $a(d,3)),this.setAttribute("normal",new $a(f,3)),this.setAttribute("uv",new $a(h,2));function _(){const S=new ze,w=new ze;let x=0;const T=(t-e)/i;for(let C=0;C<=s;C++){const M=[],A=C/s,E=A*(t-e)+e;for(let I=0;I<=r;I++){const P=I/r,D=P*l+o,L=Math.sin(D),R=Math.cos(D);w.x=E*L,w.y=-A*i+v,w.z=E*R,d.push(w.x,w.y,w.z),S.set(L,T,R).normalize(),f.push(S.x,S.y,S.z),h.push(P,1-A),M.push(p++)}m.push(M)}for(let C=0;C<r;C++)for(let M=0;M<s;M++){const A=m[M][C],E=m[M+1][C],I=m[M+1][C+1],P=m[M][C+1];(e>0||M!==0)&&(u.push(A,E,P),x+=3),(t>0||M!==s-1)&&(u.push(E,I,P),x+=3)}c.addGroup(g,x,0),g+=x}function y(S){const w=p,x=new on,T=new ze;let C=0;const M=S===!0?e:t,A=S===!0?1:-1;for(let I=1;I<=r;I++)d.push(0,v*A,0),f.push(0,A,0),h.push(.5,.5),p++;const E=p;for(let I=0;I<=r;I++){const D=I/r*l+o,L=Math.cos(D),R=Math.sin(D);T.x=M*R,T.y=v*A,T.z=M*L,d.push(T.x,T.y,T.z),f.push(0,A,0),x.x=L*.5+.5,x.y=R*.5*A+.5,h.push(x.x,x.y),p++}for(let I=0;I<r;I++){const P=w+I,D=E+I;S===!0?u.push(D,D+1,P):u.push(D+1,D,P),C+=3}c.addGroup(g,C,S===!0?1:2),g+=C}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Z_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class LO extends Z_{constructor(e=1,t=1,i=32,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,i,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new LO(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ig extends zo{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),l=Math.floor(r),c=o+1,u=l+1,d=e/o,f=t/l,h=[],p=[],m=[],v=[];for(let g=0;g<u;g++){const _=g*f-a;for(let y=0;y<c;y++){const S=y*d-s;p.push(S,-_,0),m.push(0,0,1),v.push(y/o),v.push(1-g/l)}}for(let g=0;g<l;g++)for(let _=0;_<o;_++){const y=_+c*g,S=_+c*(g+1),w=_+1+c*(g+1),x=_+1+c*g;h.push(y,S,x),h.push(S,w,x)}this.setIndex(h),this.setAttribute("position",new $a(p,3)),this.setAttribute("normal",new $a(m,3)),this.setAttribute("uv",new $a(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ig(e.width,e.height,e.widthSegments,e.heightSegments)}}class PC extends zo{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(a+o,Math.PI);let c=0;const u=[],d=new ze,f=new ze,h=[],p=[],m=[],v=[];for(let g=0;g<=i;g++){const _=[],y=g/i;let S=0;g===0&&a===0?S=.5/t:g===i&&l===Math.PI&&(S=-.5/t);for(let w=0;w<=t;w++){const x=w/t;d.x=-e*Math.cos(r+x*s)*Math.sin(a+y*o),d.y=e*Math.cos(a+y*o),d.z=e*Math.sin(r+x*s)*Math.sin(a+y*o),p.push(d.x,d.y,d.z),f.copy(d).normalize(),m.push(f.x,f.y,f.z),v.push(x+S,1-y),_.push(c++)}u.push(_)}for(let g=0;g<i;g++)for(let _=0;_<t;_++){const y=u[g][_+1],S=u[g][_],w=u[g+1][_],x=u[g+1][_+1];(g!==0||a>0)&&h.push(y,S,x),(g!==i-1||l<Math.PI)&&h.push(S,w,x)}this.setIndex(h),this.setAttribute("position",new $a(p,3)),this.setAttribute("normal",new $a(m,3)),this.setAttribute("uv",new $a(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PC(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class _qe extends ZM{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=fKe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class bqe extends ZM{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class kO extends yZ{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class Sqe extends zo{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class wqe extends go{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class C${constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Gn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Gn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}function M$(n,e,t,i){const r=xqe(i);switch(t){case tZ:return n*e;case iZ:return n*e;case rZ:return n*e*2;case sZ:return n*e/r.components*r.byteLength;case QM:return n*e/r.components*r.byteLength;case EO:return n*e*2/r.components*r.byteLength;case IO:return n*e*2/r.components*r.byteLength;case nZ:return n*e*3/r.components*r.byteLength;case Ys:return n*e*4/r.components*r.byteLength;case fv:return n*e*4/r.components*r.byteLength;case X1:case Y1:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case j1:case Q1:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case YP:case QP:return Math.max(n,16)*Math.max(e,8)/4;case XP:case jP:return Math.max(n,8)*Math.max(e,8)/2;case ZP:case JP:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case eD:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case tD:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case nD:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case iD:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case rD:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case sD:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case aD:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case oD:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case lD:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case cD:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case uD:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case dD:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case fD:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case hD:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case pD:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Z1:case mD:case vD:return Math.ceil(n/4)*Math.ceil(e/4)*16;case aZ:case gD:return Math.ceil(n/4)*Math.ceil(e/4)*8;case yD:case _D:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function xqe(n){switch(n){case tc:case ZQ:return{byteLength:1,components:1};case Y_:case JQ:case Hg:return{byteLength:2,components:1};case TO:case AO:return{byteLength:2,components:4};case xo:case MO:case ol:return{byteLength:4,components:1};case eZ:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:CO}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=CO);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function SZ(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Cqe(n){const e=new WeakMap;function t(o,l){const c=o.array,u=o.usage,d=c.byteLength,f=n.createBuffer();n.bindBuffer(l,f),n.bufferData(l,c,u),o.onUploadCallback();let h;if(c instanceof Float32Array)h=n.FLOAT;else if(c instanceof Uint16Array)o.isFloat16BufferAttribute?h=n.HALF_FLOAT:h=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)h=n.SHORT;else if(c instanceof Uint32Array)h=n.UNSIGNED_INT;else if(c instanceof Int32Array)h=n.INT;else if(c instanceof Int8Array)h=n.BYTE;else if(c instanceof Uint8Array)h=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)h=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:h,bytesPerElement:c.BYTES_PER_ELEMENT,version:o.version,size:d}}function i(o,l,c){const u=l.array,d=l.updateRanges;if(n.bindBuffer(c,o),d.length===0)n.bufferSubData(c,0,u);else{d.sort((h,p)=>h.start-p.start);let f=0;for(let h=1;h<d.length;h++){const p=d[f],m=d[h];m.start<=p.start+p.count+1?p.count=Math.max(p.count,m.start+m.count-p.start):(++f,d[f]=m)}d.length=f+1;for(let h=0,p=d.length;h<p;h++){const m=d[h];n.bufferSubData(c,m.start*u.BYTES_PER_ELEMENT,u,m.start,m.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const u=e.get(o);(!u||u.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const c=e.get(o);if(c===void 0)e.set(o,t(o,l));else if(c.version<o.version){if(c.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,o,l),c.version=o.version}}return{get:r,remove:s,update:a}}var Mqe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Tqe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Aqe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Eqe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Iqe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Rqe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Pqe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Dqe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Lqe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,kqe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Oqe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Nqe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Bqe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Fqe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,zqe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Uqe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Hqe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Vqe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,$qe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Gqe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Wqe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Kqe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,qqe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Xqe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Yqe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,jqe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Qqe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Zqe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Jqe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,eXe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,tXe="gl_FragColor = linearToOutputTexel( gl_FragColor );",nXe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,iXe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,rXe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,sXe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,aXe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,oXe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,lXe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,cXe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,uXe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,dXe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,fXe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,hXe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,pXe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,mXe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,vXe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,gXe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,yXe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,_Xe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,bXe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,SXe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,wXe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,xXe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,CXe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,MXe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,TXe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,AXe=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,EXe=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,IXe=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,RXe=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,PXe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,DXe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,LXe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,kXe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,OXe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,NXe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,BXe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,FXe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,zXe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,UXe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,HXe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,VXe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,$Xe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,GXe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,WXe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,KXe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,qXe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,XXe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,YXe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,jXe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,QXe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,ZXe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,JXe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,eYe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,tYe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,nYe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,iYe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,rYe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,sYe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,aYe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,oYe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,lYe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,cYe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,uYe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,dYe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,fYe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,hYe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,pYe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,mYe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,vYe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,gYe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,yYe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,_Ye=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,bYe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,SYe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,wYe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,xYe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const CYe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,MYe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,TYe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,AYe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EYe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,IYe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,RYe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,PYe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,DYe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,LYe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,kYe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,OYe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,NYe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,BYe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,FYe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,zYe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UYe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HYe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VYe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,$Ye=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GYe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,WYe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,KYe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qYe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XYe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,YYe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jYe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QYe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZYe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,JYe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,eje=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tje=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,nje=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ije=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Hn={alphahash_fragment:Mqe,alphahash_pars_fragment:Tqe,alphamap_fragment:Aqe,alphamap_pars_fragment:Eqe,alphatest_fragment:Iqe,alphatest_pars_fragment:Rqe,aomap_fragment:Pqe,aomap_pars_fragment:Dqe,batching_pars_vertex:Lqe,batching_vertex:kqe,begin_vertex:Oqe,beginnormal_vertex:Nqe,bsdfs:Bqe,iridescence_fragment:Fqe,bumpmap_pars_fragment:zqe,clipping_planes_fragment:Uqe,clipping_planes_pars_fragment:Hqe,clipping_planes_pars_vertex:Vqe,clipping_planes_vertex:$qe,color_fragment:Gqe,color_pars_fragment:Wqe,color_pars_vertex:Kqe,color_vertex:qqe,common:Xqe,cube_uv_reflection_fragment:Yqe,defaultnormal_vertex:jqe,displacementmap_pars_vertex:Qqe,displacementmap_vertex:Zqe,emissivemap_fragment:Jqe,emissivemap_pars_fragment:eXe,colorspace_fragment:tXe,colorspace_pars_fragment:nXe,envmap_fragment:iXe,envmap_common_pars_fragment:rXe,envmap_pars_fragment:sXe,envmap_pars_vertex:aXe,envmap_physical_pars_fragment:gXe,envmap_vertex:oXe,fog_vertex:lXe,fog_pars_vertex:cXe,fog_fragment:uXe,fog_pars_fragment:dXe,gradientmap_pars_fragment:fXe,lightmap_pars_fragment:hXe,lights_lambert_fragment:pXe,lights_lambert_pars_fragment:mXe,lights_pars_begin:vXe,lights_toon_fragment:yXe,lights_toon_pars_fragment:_Xe,lights_phong_fragment:bXe,lights_phong_pars_fragment:SXe,lights_physical_fragment:wXe,lights_physical_pars_fragment:xXe,lights_fragment_begin:CXe,lights_fragment_maps:MXe,lights_fragment_end:TXe,logdepthbuf_fragment:AXe,logdepthbuf_pars_fragment:EXe,logdepthbuf_pars_vertex:IXe,logdepthbuf_vertex:RXe,map_fragment:PXe,map_pars_fragment:DXe,map_particle_fragment:LXe,map_particle_pars_fragment:kXe,metalnessmap_fragment:OXe,metalnessmap_pars_fragment:NXe,morphinstance_vertex:BXe,morphcolor_vertex:FXe,morphnormal_vertex:zXe,morphtarget_pars_vertex:UXe,morphtarget_vertex:HXe,normal_fragment_begin:VXe,normal_fragment_maps:$Xe,normal_pars_fragment:GXe,normal_pars_vertex:WXe,normal_vertex:KXe,normalmap_pars_fragment:qXe,clearcoat_normal_fragment_begin:XXe,clearcoat_normal_fragment_maps:YXe,clearcoat_pars_fragment:jXe,iridescence_pars_fragment:QXe,opaque_fragment:ZXe,packing:JXe,premultiplied_alpha_fragment:eYe,project_vertex:tYe,dithering_fragment:nYe,dithering_pars_fragment:iYe,roughnessmap_fragment:rYe,roughnessmap_pars_fragment:sYe,shadowmap_pars_fragment:aYe,shadowmap_pars_vertex:oYe,shadowmap_vertex:lYe,shadowmask_pars_fragment:cYe,skinbase_vertex:uYe,skinning_pars_vertex:dYe,skinning_vertex:fYe,skinnormal_vertex:hYe,specularmap_fragment:pYe,specularmap_pars_fragment:mYe,tonemapping_fragment:vYe,tonemapping_pars_fragment:gYe,transmission_fragment:yYe,transmission_pars_fragment:_Ye,uv_pars_fragment:bYe,uv_pars_vertex:SYe,uv_vertex:wYe,worldpos_vertex:xYe,background_vert:CYe,background_frag:MYe,backgroundCube_vert:TYe,backgroundCube_frag:AYe,cube_vert:EYe,cube_frag:IYe,depth_vert:RYe,depth_frag:PYe,distanceRGBA_vert:DYe,distanceRGBA_frag:LYe,equirect_vert:kYe,equirect_frag:OYe,linedashed_vert:NYe,linedashed_frag:BYe,meshbasic_vert:FYe,meshbasic_frag:zYe,meshlambert_vert:UYe,meshlambert_frag:HYe,meshmatcap_vert:VYe,meshmatcap_frag:$Ye,meshnormal_vert:GYe,meshnormal_frag:WYe,meshphong_vert:KYe,meshphong_frag:qYe,meshphysical_vert:XYe,meshphysical_frag:YYe,meshtoon_vert:jYe,meshtoon_frag:QYe,points_vert:ZYe,points_frag:JYe,shadow_vert:eje,shadow_frag:tje,sprite_vert:nje,sprite_frag:ije},$t={common:{diffuse:{value:new Si(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new En},alphaMap:{value:null},alphaMapTransform:{value:new En},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new En}},envmap:{envMap:{value:null},envMapRotation:{value:new En},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new En}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new En}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new En},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new En},normalScale:{value:new on(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new En},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new En}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new En}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new En}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Si(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Si(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new En},alphaTest:{value:0},uvTransform:{value:new En}},sprite:{diffuse:{value:new Si(16777215)},opacity:{value:1},center:{value:new on(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new En},alphaMap:{value:null},alphaMapTransform:{value:new En},alphaTest:{value:0}}},Rl={basic:{uniforms:$s([$t.common,$t.specularmap,$t.envmap,$t.aomap,$t.lightmap,$t.fog]),vertexShader:Hn.meshbasic_vert,fragmentShader:Hn.meshbasic_frag},lambert:{uniforms:$s([$t.common,$t.specularmap,$t.envmap,$t.aomap,$t.lightmap,$t.emissivemap,$t.bumpmap,$t.normalmap,$t.displacementmap,$t.fog,$t.lights,{emissive:{value:new Si(0)}}]),vertexShader:Hn.meshlambert_vert,fragmentShader:Hn.meshlambert_frag},phong:{uniforms:$s([$t.common,$t.specularmap,$t.envmap,$t.aomap,$t.lightmap,$t.emissivemap,$t.bumpmap,$t.normalmap,$t.displacementmap,$t.fog,$t.lights,{emissive:{value:new Si(0)},specular:{value:new Si(1118481)},shininess:{value:30}}]),vertexShader:Hn.meshphong_vert,fragmentShader:Hn.meshphong_frag},standard:{uniforms:$s([$t.common,$t.envmap,$t.aomap,$t.lightmap,$t.emissivemap,$t.bumpmap,$t.normalmap,$t.displacementmap,$t.roughnessmap,$t.metalnessmap,$t.fog,$t.lights,{emissive:{value:new Si(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Hn.meshphysical_vert,fragmentShader:Hn.meshphysical_frag},toon:{uniforms:$s([$t.common,$t.aomap,$t.lightmap,$t.emissivemap,$t.bumpmap,$t.normalmap,$t.displacementmap,$t.gradientmap,$t.fog,$t.lights,{emissive:{value:new Si(0)}}]),vertexShader:Hn.meshtoon_vert,fragmentShader:Hn.meshtoon_frag},matcap:{uniforms:$s([$t.common,$t.bumpmap,$t.normalmap,$t.displacementmap,$t.fog,{matcap:{value:null}}]),vertexShader:Hn.meshmatcap_vert,fragmentShader:Hn.meshmatcap_frag},points:{uniforms:$s([$t.points,$t.fog]),vertexShader:Hn.points_vert,fragmentShader:Hn.points_frag},dashed:{uniforms:$s([$t.common,$t.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Hn.linedashed_vert,fragmentShader:Hn.linedashed_frag},depth:{uniforms:$s([$t.common,$t.displacementmap]),vertexShader:Hn.depth_vert,fragmentShader:Hn.depth_frag},normal:{uniforms:$s([$t.common,$t.bumpmap,$t.normalmap,$t.displacementmap,{opacity:{value:1}}]),vertexShader:Hn.meshnormal_vert,fragmentShader:Hn.meshnormal_frag},sprite:{uniforms:$s([$t.sprite,$t.fog]),vertexShader:Hn.sprite_vert,fragmentShader:Hn.sprite_frag},background:{uniforms:{uvTransform:{value:new En},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Hn.background_vert,fragmentShader:Hn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new En}},vertexShader:Hn.backgroundCube_vert,fragmentShader:Hn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Hn.cube_vert,fragmentShader:Hn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Hn.equirect_vert,fragmentShader:Hn.equirect_frag},distanceRGBA:{uniforms:$s([$t.common,$t.displacementmap,{referencePosition:{value:new ze},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Hn.distanceRGBA_vert,fragmentShader:Hn.distanceRGBA_frag},shadow:{uniforms:$s([$t.lights,$t.fog,{color:{value:new Si(0)},opacity:{value:1}}]),vertexShader:Hn.shadow_vert,fragmentShader:Hn.shadow_frag}};Rl.physical={uniforms:$s([Rl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new En},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new En},clearcoatNormalScale:{value:new on(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new En},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new En},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new En},sheen:{value:0},sheenColor:{value:new Si(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new En},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new En},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new En},transmissionSamplerSize:{value:new on},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new En},attenuationDistance:{value:0},attenuationColor:{value:new Si(0)},specularColor:{value:new Si(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new En},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new En},anisotropyVector:{value:new on},anisotropyMap:{value:null},anisotropyMapTransform:{value:new En}}]),vertexShader:Hn.meshphysical_vert,fragmentShader:Hn.meshphysical_frag};const Kw={r:0,b:0,g:0},zf=new ou,rje=new In;function sje(n,e,t,i,r,s,a){const o=new Si(0);let l=s===!0?0:1,c,u,d=null,f=0,h=null;function p(y){let S=y.isScene===!0?y.background:null;return S&&S.isTexture&&(S=(y.backgroundBlurriness>0?t:e).get(S)),S}function m(y){let S=!1;const w=p(y);w===null?g(o,l):w&&w.isColor&&(g(w,1),S=!0);const x=n.xr.getEnvironmentBlendMode();x==="additive"?i.buffers.color.setClear(0,0,0,1,a):x==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||S)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function v(y,S){const w=p(S);w&&(w.isCubeTexture||w.mapping===jM)?(u===void 0&&(u=new hr(new $g(1,1,1),new Ga({name:"BackgroundCubeMaterial",uniforms:ng(Rl.backgroundCube.uniforms),vertexShader:Rl.backgroundCube.vertexShader,fragmentShader:Rl.backgroundCube.fragmentShader,side:ba,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(x,T,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),zf.copy(S.backgroundRotation),zf.x*=-1,zf.y*=-1,zf.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(zf.y*=-1,zf.z*=-1),u.material.uniforms.envMap.value=w,u.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(rje.makeRotationFromEuler(zf)),u.material.toneMapped=bi.getTransfer(w.colorSpace)!==Di,(d!==w||f!==w.version||h!==n.toneMapping)&&(u.material.needsUpdate=!0,d=w,f=w.version,h=n.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null)):w&&w.isTexture&&(c===void 0&&(c=new hr(new ig(2,2),new Ga({name:"BackgroundMaterial",uniforms:ng(Rl.background.uniforms),vertexShader:Rl.background.vertexShader,fragmentShader:Rl.background.fragmentShader,side:ec,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,c.material.toneMapped=bi.getTransfer(w.colorSpace)!==Di,w.matrixAutoUpdate===!0&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(d!==w||f!==w.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,d=w,f=w.version,h=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}function g(y,S){y.getRGB(Kw,gZ(n)),i.buffers.color.setClear(Kw.r,Kw.g,Kw.b,S,a)}function _(){u!==void 0&&(u.geometry.dispose(),u.material.dispose()),c!==void 0&&(c.geometry.dispose(),c.material.dispose())}return{getClearColor:function(){return o},setClearColor:function(y,S=1){o.set(y),l=S,g(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,g(o,l)},render:m,addToRenderList:v,dispose:_}}function aje(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=f(null);let s=r,a=!1;function o(A,E,I,P,D){let L=!1;const R=d(P,I,E);s!==R&&(s=R,c(s.object)),L=h(A,P,I,D),L&&p(A,P,I,D),D!==null&&e.update(D,n.ELEMENT_ARRAY_BUFFER),(L||a)&&(a=!1,S(A,E,I,P),D!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(D).buffer))}function l(){return n.createVertexArray()}function c(A){return n.bindVertexArray(A)}function u(A){return n.deleteVertexArray(A)}function d(A,E,I){const P=I.wireframe===!0;let D=i[A.id];D===void 0&&(D={},i[A.id]=D);let L=D[E.id];L===void 0&&(L={},D[E.id]=L);let R=L[P];return R===void 0&&(R=f(l()),L[P]=R),R}function f(A){const E=[],I=[],P=[];for(let D=0;D<t;D++)E[D]=0,I[D]=0,P[D]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:E,enabledAttributes:I,attributeDivisors:P,object:A,attributes:{},index:null}}function h(A,E,I,P){const D=s.attributes,L=E.attributes;let R=0;const B=I.getAttributes();for(const k in B)if(B[k].location>=0){const U=D[k];let G=L[k];if(G===void 0&&(k==="instanceMatrix"&&A.instanceMatrix&&(G=A.instanceMatrix),k==="instanceColor"&&A.instanceColor&&(G=A.instanceColor)),U===void 0||U.attribute!==G||G&&U.data!==G.data)return!0;R++}return s.attributesNum!==R||s.index!==P}function p(A,E,I,P){const D={},L=E.attributes;let R=0;const B=I.getAttributes();for(const k in B)if(B[k].location>=0){let U=L[k];U===void 0&&(k==="instanceMatrix"&&A.instanceMatrix&&(U=A.instanceMatrix),k==="instanceColor"&&A.instanceColor&&(U=A.instanceColor));const G={};G.attribute=U,U&&U.data&&(G.data=U.data),D[k]=G,R++}s.attributes=D,s.attributesNum=R,s.index=P}function m(){const A=s.newAttributes;for(let E=0,I=A.length;E<I;E++)A[E]=0}function v(A){g(A,0)}function g(A,E){const I=s.newAttributes,P=s.enabledAttributes,D=s.attributeDivisors;I[A]=1,P[A]===0&&(n.enableVertexAttribArray(A),P[A]=1),D[A]!==E&&(n.vertexAttribDivisor(A,E),D[A]=E)}function _(){const A=s.newAttributes,E=s.enabledAttributes;for(let I=0,P=E.length;I<P;I++)E[I]!==A[I]&&(n.disableVertexAttribArray(I),E[I]=0)}function y(A,E,I,P,D,L,R){R===!0?n.vertexAttribIPointer(A,E,I,D,L):n.vertexAttribPointer(A,E,I,P,D,L)}function S(A,E,I,P){m();const D=P.attributes,L=I.getAttributes(),R=E.defaultAttributeValues;for(const B in L){const k=L[B];if(k.location>=0){let O=D[B];if(O===void 0&&(B==="instanceMatrix"&&A.instanceMatrix&&(O=A.instanceMatrix),B==="instanceColor"&&A.instanceColor&&(O=A.instanceColor)),O!==void 0){const U=O.normalized,G=O.itemSize,q=e.get(O);if(q===void 0)continue;const W=q.buffer,Y=q.type,J=q.bytesPerElement,Z=Y===n.INT||Y===n.UNSIGNED_INT||O.gpuType===MO;if(O.isInterleavedBufferAttribute){const ee=O.data,me=ee.stride,ye=O.offset;if(ee.isInstancedInterleavedBuffer){for(let Te=0;Te<k.locationSize;Te++)g(k.location+Te,ee.meshPerAttribute);A.isInstancedMesh!==!0&&P._maxInstanceCount===void 0&&(P._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let Te=0;Te<k.locationSize;Te++)v(k.location+Te);n.bindBuffer(n.ARRAY_BUFFER,W);for(let Te=0;Te<k.locationSize;Te++)y(k.location+Te,G/k.locationSize,Y,U,me*J,(ye+G/k.locationSize*Te)*J,Z)}else{if(O.isInstancedBufferAttribute){for(let ee=0;ee<k.locationSize;ee++)g(k.location+ee,O.meshPerAttribute);A.isInstancedMesh!==!0&&P._maxInstanceCount===void 0&&(P._maxInstanceCount=O.meshPerAttribute*O.count)}else for(let ee=0;ee<k.locationSize;ee++)v(k.location+ee);n.bindBuffer(n.ARRAY_BUFFER,W);for(let ee=0;ee<k.locationSize;ee++)y(k.location+ee,G/k.locationSize,Y,U,G*J,G/k.locationSize*ee*J,Z)}}else if(R!==void 0){const U=R[B];if(U!==void 0)switch(U.length){case 2:n.vertexAttrib2fv(k.location,U);break;case 3:n.vertexAttrib3fv(k.location,U);break;case 4:n.vertexAttrib4fv(k.location,U);break;default:n.vertexAttrib1fv(k.location,U)}}}}_()}function w(){C();for(const A in i){const E=i[A];for(const I in E){const P=E[I];for(const D in P)u(P[D].object),delete P[D];delete E[I]}delete i[A]}}function x(A){if(i[A.id]===void 0)return;const E=i[A.id];for(const I in E){const P=E[I];for(const D in P)u(P[D].object),delete P[D];delete E[I]}delete i[A.id]}function T(A){for(const E in i){const I=i[E];if(I[A.id]===void 0)continue;const P=I[A.id];for(const D in P)u(P[D].object),delete P[D];delete I[A.id]}}function C(){M(),a=!0,s!==r&&(s=r,c(s.object))}function M(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:C,resetDefaultState:M,dispose:w,releaseStatesOfGeometry:x,releaseStatesOfProgram:T,initAttributes:m,enableAttribute:v,disableUnusedAttributes:_}}function oje(n,e,t){let i;function r(c){i=c}function s(c,u){n.drawArrays(i,c,u),t.update(u,i,1)}function a(c,u,d){d!==0&&(n.drawArraysInstanced(i,c,u,d),t.update(u,i,d))}function o(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,d);let h=0;for(let p=0;p<d;p++)h+=u[p];t.update(h,i,1)}function l(c,u,d,f){if(d===0)return;const h=e.get("WEBGL_multi_draw");if(h===null)for(let p=0;p<c.length;p++)a(c[p],u[p],f[p]);else{h.multiDrawArraysInstancedWEBGL(i,c,0,u,0,f,0,d);let p=0;for(let m=0;m<d;m++)p+=u[m]*f[m];t.update(p,i,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function lje(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const T=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(T){return!(T!==Ys&&i.convert(T)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(T){const C=T===Hg&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(T!==tc&&i.convert(T)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&T!==ol&&!C)}function l(T){if(T==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";T="mediump"}return T==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=t.logarithmicDepthBuffer===!0,f=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),g=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),y=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=p>0,x=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:f,maxTextures:h,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:g,maxVertexUniforms:_,maxVaryings:y,maxFragmentUniforms:S,vertexTextures:w,maxSamples:x}}function cje(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new td,o=new En,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const h=d.length!==0||f||i!==0||r;return r=f,i=d.length,h},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,f){t=u(d,f,0)},this.setState=function(d,f,h){const p=d.clippingPlanes,m=d.clipIntersection,v=d.clipShadows,g=n.get(d);if(!r||p===null||p.length===0||s&&!v)s?u(null):c();else{const _=s?0:i,y=_*4;let S=g.clippingState||null;l.value=S,S=u(p,f,y,h);for(let w=0;w!==y;++w)S[w]=t[w];g.clippingState=S,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,f,h,p){const m=d!==null?d.length:0;let v=null;if(m!==0){if(v=l.value,p!==!0||v===null){const g=h+m*4,_=f.matrixWorldInverse;o.getNormalMatrix(_),(v===null||v.length<g)&&(v=new Float32Array(g));for(let y=0,S=h;y!==m;++y,S+=4)a.copy(d[y]).applyMatrix4(_,o),a.normal.toArray(v,S),v[S+3]=a.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,v}}function uje(n){let e=new WeakMap;function t(a,o){return o===GP?a.mapping=Qv:o===WP&&(a.mapping=Zv),a}function i(a){if(a&&a.isTexture){const o=a.mapping;if(o===GP||o===WP)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=new pqe(l.height);return c.fromEquirectangularTexture(n,a),e.set(a,c),a.addEventListener("dispose",r),t(c.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const qm=4,T$=[.125,.215,.35,.446,.526,.582],th=20,m2=new kO,A$=new Si;let v2=null,g2=0,y2=0,_2=!1;const Kf=(1+Math.sqrt(5))/2,vm=1/Kf,E$=[new ze(-Kf,vm,0),new ze(Kf,vm,0),new ze(-vm,0,Kf),new ze(vm,0,Kf),new ze(0,Kf,-vm),new ze(0,Kf,vm),new ze(-1,1,-1),new ze(1,1,-1),new ze(-1,1,1),new ze(1,1,1)];class I${constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){v2=this._renderer.getRenderTarget(),g2=this._renderer.getActiveCubeFace(),y2=this._renderer.getActiveMipmapLevel(),_2=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=D$(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=P$(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(v2,g2,y2),this._renderer.xr.enabled=_2,e.scissorTest=!1,qw(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Qv||e.mapping===Zv?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),v2=this._renderer.getRenderTarget(),g2=this._renderer.getActiveCubeFace(),y2=this._renderer.getActiveMipmapLevel(),_2=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:zl,minFilter:zl,generateMipmaps:!1,type:Hg,format:Ys,colorSpace:tg,depthBuffer:!1},r=R$(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=R$(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=dje(s)),this._blurMaterial=fje(s,e,t)}return r}_compileMaterial(e){const t=new hr(this._lodPlanes[0],e);this._renderer.compile(t,m2)}_sceneToCubeUV(e,t,i,r){const o=new go(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,f=u.toneMapping;u.getClearColor(A$),u.toneMapping=Md,u.autoClear=!1;const h=new ep({name:"PMREM.Background",side:ba,depthWrite:!1,depthTest:!1}),p=new hr(new $g,h);let m=!1;const v=e.background;v?v.isColor&&(h.color.copy(v),e.background=null,m=!0):(h.color.copy(A$),m=!0);for(let g=0;g<6;g++){const _=g%3;_===0?(o.up.set(0,l[g],0),o.lookAt(c[g],0,0)):_===1?(o.up.set(0,0,l[g]),o.lookAt(0,c[g],0)):(o.up.set(0,l[g],0),o.lookAt(0,0,c[g]));const y=this._cubeSize;qw(r,_*y,g>2?y:0,y,y),u.setRenderTarget(r),m&&u.render(p,o),u.render(e,o)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=f,u.autoClear=d,e.background=v}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Qv||e.mapping===Zv;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=D$()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=P$());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new hr(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;qw(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(a,m2)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=E$[(r-s-1)%E$.length];this._blur(e,s-1,s,a,o)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new hr(this._lodPlanes[r],c),f=c.uniforms,h=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*th-1),m=s/p,v=isFinite(s)?1+Math.floor(u*m):th;v>th&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${th}`);const g=[];let _=0;for(let T=0;T<th;++T){const C=T/m,M=Math.exp(-C*C/2);g.push(M),T===0?_+=M:T<v&&(_+=2*M)}for(let T=0;T<g.length;T++)g[T]=g[T]/_;f.envMap.value=e.texture,f.samples.value=v,f.weights.value=g,f.latitudinal.value=a==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:y}=this;f.dTheta.value=p,f.mipInt.value=y-i;const S=this._sizeLods[r],w=3*S*(r>y-qm?r-y+qm:0),x=4*(this._cubeSize-S);qw(t,w,x,3*S,2*S),l.setRenderTarget(t),l.render(d,m2)}}function dje(n){const e=[],t=[],i=[];let r=n;const s=n-qm+1+T$.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>n-qm?l=T$[a-n+qm-1]:a===0&&(l=0),i.push(l);const c=1/(o-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],h=6,p=6,m=3,v=2,g=1,_=new Float32Array(m*p*h),y=new Float32Array(v*p*h),S=new Float32Array(g*p*h);for(let x=0;x<h;x++){const T=x%3*2/3-1,C=x>2?0:-1,M=[T,C,0,T+2/3,C,0,T+2/3,C+1,0,T,C,0,T+2/3,C+1,0,T,C+1,0];_.set(M,m*p*x),y.set(f,v*p*x);const A=[x,x,x,x,x,x];S.set(A,g*p*x)}const w=new zo;w.setAttribute("position",new Io(_,m)),w.setAttribute("uv",new Io(y,v)),w.setAttribute("faceIndex",new Io(S,g)),e.push(w),r>qm&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function R$(n,e,t){const i=new Yd(n,e,t);return i.texture.mapping=jM,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function qw(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function fje(n,e,t){const i=new Float32Array(th),r=new ze(0,1,0);return new Ga({name:"SphericalGaussianBlur",defines:{n:th,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:OO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:xd,depthTest:!1,depthWrite:!1})}function P$(){return new Ga({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:OO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:xd,depthTest:!1,depthWrite:!1})}function D$(){return new Ga({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:OO(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:xd,depthTest:!1,depthWrite:!1})}function OO(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function hje(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,c=l===GP||l===WP,u=l===Qv||l===Zv;if(c||u){let d=e.get(o);const f=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==f)return t===null&&(t=new I$(n)),d=c?t.fromEquirectangular(o,d):t.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const h=o.image;return c&&h&&h.height>0||u&&h&&r(h)?(t===null&&(t=new I$(n)),d=c?t.fromEquirectangular(o):t.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",s),d.texture):null}}}return o}function r(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function pje(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&Dm("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function mje(n,e,t,i){const r={},s=new WeakMap;function a(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);f.removeEventListener("dispose",a),delete r[f.id];const h=s.get(f);h&&(e.remove(h),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function o(d,f){return r[f.id]===!0||(f.addEventListener("dispose",a),r[f.id]=!0,t.memory.geometries++),f}function l(d){const f=d.attributes;for(const h in f)e.update(f[h],n.ARRAY_BUFFER)}function c(d){const f=[],h=d.index,p=d.attributes.position;let m=0;if(h!==null){const _=h.array;m=h.version;for(let y=0,S=_.length;y<S;y+=3){const w=_[y+0],x=_[y+1],T=_[y+2];f.push(w,x,x,T,T,w)}}else if(p!==void 0){const _=p.array;m=p.version;for(let y=0,S=_.length/3-1;y<S;y+=3){const w=y+0,x=y+1,T=y+2;f.push(w,x,x,T,T,w)}}else return;const v=new(cZ(f)?vZ:mZ)(f,1);v.version=m;const g=s.get(d);g&&e.remove(g),s.set(d,v)}function u(d){const f=s.get(d);if(f){const h=d.index;h!==null&&f.version<h.version&&c(d)}else c(d);return s.get(d)}return{get:o,update:l,getWireframeAttribute:u}}function vje(n,e,t){let i;function r(f){i=f}let s,a;function o(f){s=f.type,a=f.bytesPerElement}function l(f,h){n.drawElements(i,h,s,f*a),t.update(h,i,1)}function c(f,h,p){p!==0&&(n.drawElementsInstanced(i,h,s,f*a,p),t.update(h,i,p))}function u(f,h,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,h,0,s,f,0,p);let v=0;for(let g=0;g<p;g++)v+=h[g];t.update(v,i,1)}function d(f,h,p,m){if(p===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let g=0;g<f.length;g++)c(f[g]/a,h[g],m[g]);else{v.multiDrawElementsInstancedWEBGL(i,h,0,s,f,0,m,0,p);let g=0;for(let _=0;_<p;_++)g+=h[_]*m[_];t.update(g,i,1)}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function gje(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(s/3);break;case n.LINES:t.lines+=o*(s/2);break;case n.LINE_STRIP:t.lines+=o*(s-1);break;case n.LINE_LOOP:t.lines+=o*s;break;case n.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function yje(n,e,t){const i=new WeakMap,r=new Xi;function s(a,o,l){const c=a.morphTargetInfluences,u=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=u!==void 0?u.length:0;let f=i.get(o);if(f===void 0||f.count!==d){let A=function(){C.dispose(),i.delete(o),o.removeEventListener("dispose",A)};var h=A;f!==void 0&&f.texture.dispose();const p=o.morphAttributes.position!==void 0,m=o.morphAttributes.normal!==void 0,v=o.morphAttributes.color!==void 0,g=o.morphAttributes.position||[],_=o.morphAttributes.normal||[],y=o.morphAttributes.color||[];let S=0;p===!0&&(S=1),m===!0&&(S=2),v===!0&&(S=3);let w=o.attributes.position.count*S,x=1;w>e.maxTextureSize&&(x=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const T=new Float32Array(w*x*4*d),C=new dZ(T,w,x,d);C.type=ol,C.needsUpdate=!0;const M=S*4;for(let E=0;E<d;E++){const I=g[E],P=_[E],D=y[E],L=w*x*4*E;for(let R=0;R<I.count;R++){const B=R*M;p===!0&&(r.fromBufferAttribute(I,R),T[L+B+0]=r.x,T[L+B+1]=r.y,T[L+B+2]=r.z,T[L+B+3]=0),m===!0&&(r.fromBufferAttribute(P,R),T[L+B+4]=r.x,T[L+B+5]=r.y,T[L+B+6]=r.z,T[L+B+7]=0),v===!0&&(r.fromBufferAttribute(D,R),T[L+B+8]=r.x,T[L+B+9]=r.y,T[L+B+10]=r.z,T[L+B+11]=D.itemSize===4?r.w:1)}}f={count:d,texture:C,size:new on(w,x)},i.set(o,f),o.addEventListener("dispose",A)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let p=0;for(let v=0;v<c.length;v++)p+=c[v];const m=o.morphTargetsRelative?1:1-p;l.getUniforms().setValue(n,"morphTargetBaseInfluence",m),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:s}}function _je(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,d=e.get(l,u);if(r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;r.get(f)!==c&&(f.update(),r.set(f,c))}return d}function a(){r=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}const wZ=new Zs,L$=new DO(1,1),xZ=new dZ,CZ=new YKe,MZ=new _Z,k$=[],O$=[],N$=new Float32Array(16),B$=new Float32Array(9),F$=new Float32Array(4);function Gg(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=k$[r];if(s===void 0&&(s=new Float32Array(r),k$[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function Vr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function $r(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function JM(n,e){let t=O$[e];t===void 0&&(t=new Int32Array(e),O$[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function bje(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Sje(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vr(t,e))return;n.uniform2fv(this.addr,e),$r(t,e)}}function wje(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Vr(t,e))return;n.uniform3fv(this.addr,e),$r(t,e)}}function xje(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vr(t,e))return;n.uniform4fv(this.addr,e),$r(t,e)}}function Cje(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Vr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),$r(t,e)}else{if(Vr(t,i))return;F$.set(i),n.uniformMatrix2fv(this.addr,!1,F$),$r(t,i)}}function Mje(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Vr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),$r(t,e)}else{if(Vr(t,i))return;B$.set(i),n.uniformMatrix3fv(this.addr,!1,B$),$r(t,i)}}function Tje(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Vr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),$r(t,e)}else{if(Vr(t,i))return;N$.set(i),n.uniformMatrix4fv(this.addr,!1,N$),$r(t,i)}}function Aje(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Eje(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vr(t,e))return;n.uniform2iv(this.addr,e),$r(t,e)}}function Ije(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Vr(t,e))return;n.uniform3iv(this.addr,e),$r(t,e)}}function Rje(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vr(t,e))return;n.uniform4iv(this.addr,e),$r(t,e)}}function Pje(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Dje(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Vr(t,e))return;n.uniform2uiv(this.addr,e),$r(t,e)}}function Lje(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Vr(t,e))return;n.uniform3uiv(this.addr,e),$r(t,e)}}function kje(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Vr(t,e))return;n.uniform4uiv(this.addr,e),$r(t,e)}}function Oje(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(L$.compareFunction=oZ,s=L$):s=wZ,t.setTexture2D(e||s,r)}function Nje(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||CZ,r)}function Bje(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||MZ,r)}function Fje(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||xZ,r)}function zje(n){switch(n){case 5126:return bje;case 35664:return Sje;case 35665:return wje;case 35666:return xje;case 35674:return Cje;case 35675:return Mje;case 35676:return Tje;case 5124:case 35670:return Aje;case 35667:case 35671:return Eje;case 35668:case 35672:return Ije;case 35669:case 35673:return Rje;case 5125:return Pje;case 36294:return Dje;case 36295:return Lje;case 36296:return kje;case 35678:case 36198:case 36298:case 36306:case 35682:return Oje;case 35679:case 36299:case 36307:return Nje;case 35680:case 36300:case 36308:case 36293:return Bje;case 36289:case 36303:case 36311:case 36292:return Fje}}function Uje(n,e){n.uniform1fv(this.addr,e)}function Hje(n,e){const t=Gg(e,this.size,2);n.uniform2fv(this.addr,t)}function Vje(n,e){const t=Gg(e,this.size,3);n.uniform3fv(this.addr,t)}function $je(n,e){const t=Gg(e,this.size,4);n.uniform4fv(this.addr,t)}function Gje(n,e){const t=Gg(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Wje(n,e){const t=Gg(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Kje(n,e){const t=Gg(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function qje(n,e){n.uniform1iv(this.addr,e)}function Xje(n,e){n.uniform2iv(this.addr,e)}function Yje(n,e){n.uniform3iv(this.addr,e)}function jje(n,e){n.uniform4iv(this.addr,e)}function Qje(n,e){n.uniform1uiv(this.addr,e)}function Zje(n,e){n.uniform2uiv(this.addr,e)}function Jje(n,e){n.uniform3uiv(this.addr,e)}function eQe(n,e){n.uniform4uiv(this.addr,e)}function tQe(n,e,t){const i=this.cache,r=e.length,s=JM(t,r);Vr(i,s)||(n.uniform1iv(this.addr,s),$r(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||wZ,s[a])}function nQe(n,e,t){const i=this.cache,r=e.length,s=JM(t,r);Vr(i,s)||(n.uniform1iv(this.addr,s),$r(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||CZ,s[a])}function iQe(n,e,t){const i=this.cache,r=e.length,s=JM(t,r);Vr(i,s)||(n.uniform1iv(this.addr,s),$r(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||MZ,s[a])}function rQe(n,e,t){const i=this.cache,r=e.length,s=JM(t,r);Vr(i,s)||(n.uniform1iv(this.addr,s),$r(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||xZ,s[a])}function sQe(n){switch(n){case 5126:return Uje;case 35664:return Hje;case 35665:return Vje;case 35666:return $je;case 35674:return Gje;case 35675:return Wje;case 35676:return Kje;case 5124:case 35670:return qje;case 35667:case 35671:return Xje;case 35668:case 35672:return Yje;case 35669:case 35673:return jje;case 5125:return Qje;case 36294:return Zje;case 36295:return Jje;case 36296:return eQe;case 35678:case 36198:case 36298:case 36306:case 35682:return tQe;case 35679:case 36299:case 36307:return nQe;case 35680:case 36300:case 36308:case 36293:return iQe;case 36289:case 36303:case 36311:case 36292:return rQe}}class aQe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=zje(t.type)}}class oQe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=sQe(t.type)}}class lQe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}}const b2=/(\w+)(\])?(\[|\.)?/g;function z$(n,e){n.seq.push(e),n.map[e.id]=e}function cQe(n,e,t){const i=n.name,r=i.length;for(b2.lastIndex=0;;){const s=b2.exec(i),a=b2.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===r){z$(t,c===void 0?new aQe(o,n,e):new oQe(o,n,e));break}else{let d=t.map[o];d===void 0&&(d=new lQe(o),z$(t,d)),t=d}}}class J1{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);cQe(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function U$(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const uQe=37297;let dQe=0;function fQe(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}const H$=new En;function hQe(n){bi._getMatrix(H$,bi.workingColorSpace,n);const e=`mat3( ${H$.elements.map(t=>t.toFixed(4))} )`;switch(bi.getTransfer(n)){case EC:return[e,"LinearTransferOETF"];case Di:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function V$(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+fQe(n.getShaderSource(e),a)}else return r}function pQe(n,e){const t=hQe(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function mQe(n,e){let t;switch(e){case rKe:t="Linear";break;case sKe:t="Reinhard";break;case aKe:t="Cineon";break;case oKe:t="ACESFilmic";break;case cKe:t="AgX";break;case uKe:t="Neutral";break;case lKe:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Xw=new ze;function vQe(){bi.getLuminanceCoefficients(Xw);const n=Xw.x.toFixed(4),e=Xw.y.toFixed(4),t=Xw.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function gQe(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(X0).join(`
`)}function yQe(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function _Qe(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===n.FLOAT_MAT2&&(o=2),s.type===n.FLOAT_MAT3&&(o=3),s.type===n.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function X0(n){return n!==""}function $$(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function G$(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const bQe=/^[ \t]*#include +<([\w\d./]+)>/gm;function bD(n){return n.replace(bQe,wQe)}const SQe=new Map;function wQe(n,e){let t=Hn[e];if(t===void 0){const i=SQe.get(e);if(i!==void 0)t=Hn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return bD(t)}const xQe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function W$(n){return n.replace(xQe,CQe)}function CQe(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function K$(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function MQe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===XQ?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===F7e?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Rc&&(e="SHADOWMAP_TYPE_VSM"),e}function TQe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Qv:case Zv:e="ENVMAP_TYPE_CUBE";break;case jM:e="ENVMAP_TYPE_CUBE_UV";break}return e}function AQe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Zv:e="ENVMAP_MODE_REFRACTION";break}return e}function EQe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case jQ:e="ENVMAP_BLENDING_MULTIPLY";break;case nKe:e="ENVMAP_BLENDING_MIX";break;case iKe:e="ENVMAP_BLENDING_ADD";break}return e}function IQe(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function RQe(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=MQe(t),c=TQe(t),u=AQe(t),d=EQe(t),f=IQe(t),h=gQe(t),p=yQe(s),m=r.createProgram();let v,g,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(X0).join(`
`),v.length>0&&(v+=`
`),g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(X0).join(`
`),g.length>0&&(g+=`
`)):(v=[K$(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(X0).join(`
`),g=[K$(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Md?"#define TONE_MAPPING":"",t.toneMapping!==Md?Hn.tonemapping_pars_fragment:"",t.toneMapping!==Md?mQe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Hn.colorspace_pars_fragment,pQe("linearToOutputTexel",t.outputColorSpace),vQe(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(X0).join(`
`)),a=bD(a),a=$$(a,t),a=G$(a,t),o=bD(o),o=$$(o,t),o=G$(o,t),a=W$(a),o=W$(o),t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,v=[h,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,g=["#define varying in",t.glslVersion===s$?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===s$?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const y=_+v+a,S=_+g+o,w=U$(r,r.VERTEX_SHADER,y),x=U$(r,r.FRAGMENT_SHADER,S);r.attachShader(m,w),r.attachShader(m,x),t.index0AttributeName!==void 0?r.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m);function T(E){if(n.debug.checkShaderErrors){const I=r.getProgramInfoLog(m).trim(),P=r.getShaderInfoLog(w).trim(),D=r.getShaderInfoLog(x).trim();let L=!0,R=!0;if(r.getProgramParameter(m,r.LINK_STATUS)===!1)if(L=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,m,w,x);else{const B=V$(r,w,"vertex"),k=V$(r,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+`

Material Name: `+E.name+`
Material Type: `+E.type+`

Program Info Log: `+I+`
`+B+`
`+k)}else I!==""?console.warn("THREE.WebGLProgram: Program Info Log:",I):(P===""||D==="")&&(R=!1);R&&(E.diagnostics={runnable:L,programLog:I,vertexShader:{log:P,prefix:v},fragmentShader:{log:D,prefix:g}})}r.deleteShader(w),r.deleteShader(x),C=new J1(r,m),M=_Qe(r,m)}let C;this.getUniforms=function(){return C===void 0&&T(this),C};let M;this.getAttributes=function(){return M===void 0&&T(this),M};let A=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return A===!1&&(A=r.getProgramParameter(m,uQe)),A},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=dQe++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=x,this}let PQe=0;class DQe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new LQe(e),t.set(e,i)),i}}class LQe{constructor(e){this.id=PQe++,this.code=e,this.usedTimes=0}}function kQe(n,e,t,i,r,s,a){const o=new hZ,l=new DQe,c=new Set,u=[],d=r.logarithmicDepthBuffer,f=r.vertexTextures;let h=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(M){return c.add(M),M===0?"uv":`uv${M}`}function v(M,A,E,I,P){const D=I.fog,L=P.geometry,R=M.isMeshStandardMaterial?I.environment:null,B=(M.isMeshStandardMaterial?t:e).get(M.envMap||R),k=B&&B.mapping===jM?B.image.height:null,O=p[M.type];M.precision!==null&&(h=r.getMaxPrecision(M.precision),h!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",h,"instead."));const U=L.morphAttributes.position||L.morphAttributes.normal||L.morphAttributes.color,G=U!==void 0?U.length:0;let q=0;L.morphAttributes.position!==void 0&&(q=1),L.morphAttributes.normal!==void 0&&(q=2),L.morphAttributes.color!==void 0&&(q=3);let W,Y,J,Z;if(O){const Jt=Rl[O];W=Jt.vertexShader,Y=Jt.fragmentShader}else W=M.vertexShader,Y=M.fragmentShader,l.update(M),J=l.getVertexShaderID(M),Z=l.getFragmentShaderID(M);const ee=n.getRenderTarget(),me=n.state.buffers.depth.getReversed(),ye=P.isInstancedMesh===!0,Te=P.isBatchedMesh===!0,Ee=!!M.map,H=!!M.matcap,Q=!!B,j=!!M.aoMap,Pe=!!M.lightMap,we=!!M.bumpMap,De=!!M.normalMap,Me=!!M.displacementMap,Ae=!!M.emissiveMap,Fe=!!M.metalnessMap,ne=!!M.roughnessMap,z=M.anisotropy>0,K=M.clearcoat>0,ae=M.dispersion>0,xe=M.iridescence>0,Le=M.sheen>0,Xe=M.transmission>0,je=z&&!!M.anisotropyMap,he=K&&!!M.clearcoatMap,Ye=K&&!!M.clearcoatNormalMap,Ke=K&&!!M.clearcoatRoughnessMap,V=xe&&!!M.iridescenceMap,re=xe&&!!M.iridescenceThicknessMap,te=Le&&!!M.sheenColorMap,pe=Le&&!!M.sheenRoughnessMap,se=!!M.specularMap,de=!!M.specularColorMap,qe=!!M.specularIntensityMap,fe=Xe&&!!M.transmissionMap,Je=Xe&&!!M.thicknessMap,$e=!!M.gradientMap,et=!!M.alphaMap,ht=M.alphaTest>0,st=!!M.alphaHash,Rt=!!M.extensions;let Vt=Md;M.toneMapped&&(ee===null||ee.isXRRenderTarget===!0)&&(Vt=n.toneMapping);const Pn={shaderID:O,shaderType:M.type,shaderName:M.name,vertexShader:W,fragmentShader:Y,defines:M.defines,customVertexShaderID:J,customFragmentShaderID:Z,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:h,batching:Te,batchingColor:Te&&P._colorsTexture!==null,instancing:ye,instancingColor:ye&&P.instanceColor!==null,instancingMorph:ye&&P.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:ee===null?n.outputColorSpace:ee.isXRRenderTarget===!0?ee.texture.colorSpace:tg,alphaToCoverage:!!M.alphaToCoverage,map:Ee,matcap:H,envMap:Q,envMapMode:Q&&B.mapping,envMapCubeUVHeight:k,aoMap:j,lightMap:Pe,bumpMap:we,normalMap:De,displacementMap:f&&Me,emissiveMap:Ae,normalMapObjectSpace:De&&M.normalMapType===mKe,normalMapTangentSpace:De&&M.normalMapType===pKe,metalnessMap:Fe,roughnessMap:ne,anisotropy:z,anisotropyMap:je,clearcoat:K,clearcoatMap:he,clearcoatNormalMap:Ye,clearcoatRoughnessMap:Ke,dispersion:ae,iridescence:xe,iridescenceMap:V,iridescenceThicknessMap:re,sheen:Le,sheenColorMap:te,sheenRoughnessMap:pe,specularMap:se,specularColorMap:de,specularIntensityMap:qe,transmission:Xe,transmissionMap:fe,thicknessMap:Je,gradientMap:$e,opaque:M.transparent===!1&&M.blending===Cd&&M.alphaToCoverage===!1,alphaMap:et,alphaTest:ht,alphaHash:st,combine:M.combine,mapUv:Ee&&m(M.map.channel),aoMapUv:j&&m(M.aoMap.channel),lightMapUv:Pe&&m(M.lightMap.channel),bumpMapUv:we&&m(M.bumpMap.channel),normalMapUv:De&&m(M.normalMap.channel),displacementMapUv:Me&&m(M.displacementMap.channel),emissiveMapUv:Ae&&m(M.emissiveMap.channel),metalnessMapUv:Fe&&m(M.metalnessMap.channel),roughnessMapUv:ne&&m(M.roughnessMap.channel),anisotropyMapUv:je&&m(M.anisotropyMap.channel),clearcoatMapUv:he&&m(M.clearcoatMap.channel),clearcoatNormalMapUv:Ye&&m(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ke&&m(M.clearcoatRoughnessMap.channel),iridescenceMapUv:V&&m(M.iridescenceMap.channel),iridescenceThicknessMapUv:re&&m(M.iridescenceThicknessMap.channel),sheenColorMapUv:te&&m(M.sheenColorMap.channel),sheenRoughnessMapUv:pe&&m(M.sheenRoughnessMap.channel),specularMapUv:se&&m(M.specularMap.channel),specularColorMapUv:de&&m(M.specularColorMap.channel),specularIntensityMapUv:qe&&m(M.specularIntensityMap.channel),transmissionMapUv:fe&&m(M.transmissionMap.channel),thicknessMapUv:Je&&m(M.thicknessMap.channel),alphaMapUv:et&&m(M.alphaMap.channel),vertexTangents:!!L.attributes.tangent&&(De||z),vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!L.attributes.color&&L.attributes.color.itemSize===4,pointsUvs:P.isPoints===!0&&!!L.attributes.uv&&(Ee||et),fog:!!D,useFog:M.fog===!0,fogExp2:!!D&&D.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:me,skinning:P.isSkinnedMesh===!0,morphTargets:L.morphAttributes.position!==void 0,morphNormals:L.morphAttributes.normal!==void 0,morphColors:L.morphAttributes.color!==void 0,morphTargetsCount:G,morphTextureStride:q,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numLightProbes:A.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&E.length>0,shadowMapType:n.shadowMap.type,toneMapping:Vt,decodeVideoTexture:Ee&&M.map.isVideoTexture===!0&&bi.getTransfer(M.map.colorSpace)===Di,decodeVideoTextureEmissive:Ae&&M.emissiveMap.isVideoTexture===!0&&bi.getTransfer(M.emissiveMap.colorSpace)===Di,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===yo,flipSided:M.side===ba,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionClipCullDistance:Rt&&M.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Rt&&M.extensions.multiDraw===!0||Te)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:M.customProgramCacheKey()};return Pn.vertexUv1s=c.has(1),Pn.vertexUv2s=c.has(2),Pn.vertexUv3s=c.has(3),c.clear(),Pn}function g(M){const A=[];if(M.shaderID?A.push(M.shaderID):(A.push(M.customVertexShaderID),A.push(M.customFragmentShaderID)),M.defines!==void 0)for(const E in M.defines)A.push(E),A.push(M.defines[E]);return M.isRawShaderMaterial===!1&&(_(A,M),y(A,M),A.push(n.outputColorSpace)),A.push(M.customProgramCacheKey),A.join()}function _(M,A){M.push(A.precision),M.push(A.outputColorSpace),M.push(A.envMapMode),M.push(A.envMapCubeUVHeight),M.push(A.mapUv),M.push(A.alphaMapUv),M.push(A.lightMapUv),M.push(A.aoMapUv),M.push(A.bumpMapUv),M.push(A.normalMapUv),M.push(A.displacementMapUv),M.push(A.emissiveMapUv),M.push(A.metalnessMapUv),M.push(A.roughnessMapUv),M.push(A.anisotropyMapUv),M.push(A.clearcoatMapUv),M.push(A.clearcoatNormalMapUv),M.push(A.clearcoatRoughnessMapUv),M.push(A.iridescenceMapUv),M.push(A.iridescenceThicknessMapUv),M.push(A.sheenColorMapUv),M.push(A.sheenRoughnessMapUv),M.push(A.specularMapUv),M.push(A.specularColorMapUv),M.push(A.specularIntensityMapUv),M.push(A.transmissionMapUv),M.push(A.thicknessMapUv),M.push(A.combine),M.push(A.fogExp2),M.push(A.sizeAttenuation),M.push(A.morphTargetsCount),M.push(A.morphAttributeCount),M.push(A.numDirLights),M.push(A.numPointLights),M.push(A.numSpotLights),M.push(A.numSpotLightMaps),M.push(A.numHemiLights),M.push(A.numRectAreaLights),M.push(A.numDirLightShadows),M.push(A.numPointLightShadows),M.push(A.numSpotLightShadows),M.push(A.numSpotLightShadowsWithMaps),M.push(A.numLightProbes),M.push(A.shadowMapType),M.push(A.toneMapping),M.push(A.numClippingPlanes),M.push(A.numClipIntersection),M.push(A.depthPacking)}function y(M,A){o.disableAll(),A.supportsVertexTextures&&o.enable(0),A.instancing&&o.enable(1),A.instancingColor&&o.enable(2),A.instancingMorph&&o.enable(3),A.matcap&&o.enable(4),A.envMap&&o.enable(5),A.normalMapObjectSpace&&o.enable(6),A.normalMapTangentSpace&&o.enable(7),A.clearcoat&&o.enable(8),A.iridescence&&o.enable(9),A.alphaTest&&o.enable(10),A.vertexColors&&o.enable(11),A.vertexAlphas&&o.enable(12),A.vertexUv1s&&o.enable(13),A.vertexUv2s&&o.enable(14),A.vertexUv3s&&o.enable(15),A.vertexTangents&&o.enable(16),A.anisotropy&&o.enable(17),A.alphaHash&&o.enable(18),A.batching&&o.enable(19),A.dispersion&&o.enable(20),A.batchingColor&&o.enable(21),M.push(o.mask),o.disableAll(),A.fog&&o.enable(0),A.useFog&&o.enable(1),A.flatShading&&o.enable(2),A.logarithmicDepthBuffer&&o.enable(3),A.reverseDepthBuffer&&o.enable(4),A.skinning&&o.enable(5),A.morphTargets&&o.enable(6),A.morphNormals&&o.enable(7),A.morphColors&&o.enable(8),A.premultipliedAlpha&&o.enable(9),A.shadowMapEnabled&&o.enable(10),A.doubleSided&&o.enable(11),A.flipSided&&o.enable(12),A.useDepthPacking&&o.enable(13),A.dithering&&o.enable(14),A.transmission&&o.enable(15),A.sheen&&o.enable(16),A.opaque&&o.enable(17),A.pointsUvs&&o.enable(18),A.decodeVideoTexture&&o.enable(19),A.decodeVideoTextureEmissive&&o.enable(20),A.alphaToCoverage&&o.enable(21),M.push(o.mask)}function S(M){const A=p[M.type];let E;if(A){const I=Rl[A];E=uqe.clone(I.uniforms)}else E=M.uniforms;return E}function w(M,A){let E;for(let I=0,P=u.length;I<P;I++){const D=u[I];if(D.cacheKey===A){E=D,++E.usedTimes;break}}return E===void 0&&(E=new RQe(n,A,M,s),u.push(E)),E}function x(M){if(--M.usedTimes===0){const A=u.indexOf(M);u[A]=u[u.length-1],u.pop(),M.destroy()}}function T(M){l.remove(M)}function C(){l.dispose()}return{getParameters:v,getProgramCacheKey:g,getUniforms:S,acquireProgram:w,releaseProgram:x,releaseShaderCache:T,programs:u,dispose:C}}function OQe(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let o=n.get(a);return o===void 0&&(o={},n.set(a,o)),o}function i(a){n.delete(a)}function r(a,o,l){n.get(a)[o]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function NQe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function q$(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function X$(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(d,f,h,p,m,v){let g=n[e];return g===void 0?(g={id:d.id,object:d,geometry:f,material:h,groupOrder:p,renderOrder:d.renderOrder,z:m,group:v},n[e]=g):(g.id=d.id,g.object=d,g.geometry=f,g.material=h,g.groupOrder=p,g.renderOrder=d.renderOrder,g.z=m,g.group=v),e++,g}function o(d,f,h,p,m,v){const g=a(d,f,h,p,m,v);h.transmission>0?i.push(g):h.transparent===!0?r.push(g):t.push(g)}function l(d,f,h,p,m,v){const g=a(d,f,h,p,m,v);h.transmission>0?i.unshift(g):h.transparent===!0?r.unshift(g):t.unshift(g)}function c(d,f){t.length>1&&t.sort(d||NQe),i.length>1&&i.sort(f||q$),r.length>1&&r.sort(f||q$)}function u(){for(let d=e,f=n.length;d<f;d++){const h=n[d];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:u,sort:c}}function BQe(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new X$,n.set(i,[a])):r>=s.length?(a=new X$,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function FQe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ze,color:new Si};break;case"SpotLight":t={position:new ze,direction:new ze,color:new Si,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ze,color:new Si,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ze,skyColor:new Si,groundColor:new Si};break;case"RectAreaLight":t={color:new Si,position:new ze,halfWidth:new ze,halfHeight:new ze};break}return n[e.id]=t,t}}}function zQe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new on};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new on};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new on,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let UQe=0;function HQe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function VQe(n){const e=new FQe,t=zQe(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new ze);const r=new ze,s=new In,a=new In;function o(c){let u=0,d=0,f=0;for(let M=0;M<9;M++)i.probe[M].set(0,0,0);let h=0,p=0,m=0,v=0,g=0,_=0,y=0,S=0,w=0,x=0,T=0;c.sort(HQe);for(let M=0,A=c.length;M<A;M++){const E=c[M],I=E.color,P=E.intensity,D=E.distance,L=E.shadow&&E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)u+=I.r*P,d+=I.g*P,f+=I.b*P;else if(E.isLightProbe){for(let R=0;R<9;R++)i.probe[R].addScaledVector(E.sh.coefficients[R],P);T++}else if(E.isDirectionalLight){const R=e.get(E);if(R.color.copy(E.color).multiplyScalar(E.intensity),E.castShadow){const B=E.shadow,k=t.get(E);k.shadowIntensity=B.intensity,k.shadowBias=B.bias,k.shadowNormalBias=B.normalBias,k.shadowRadius=B.radius,k.shadowMapSize=B.mapSize,i.directionalShadow[h]=k,i.directionalShadowMap[h]=L,i.directionalShadowMatrix[h]=E.shadow.matrix,_++}i.directional[h]=R,h++}else if(E.isSpotLight){const R=e.get(E);R.position.setFromMatrixPosition(E.matrixWorld),R.color.copy(I).multiplyScalar(P),R.distance=D,R.coneCos=Math.cos(E.angle),R.penumbraCos=Math.cos(E.angle*(1-E.penumbra)),R.decay=E.decay,i.spot[m]=R;const B=E.shadow;if(E.map&&(i.spotLightMap[w]=E.map,w++,B.updateMatrices(E),E.castShadow&&x++),i.spotLightMatrix[m]=B.matrix,E.castShadow){const k=t.get(E);k.shadowIntensity=B.intensity,k.shadowBias=B.bias,k.shadowNormalBias=B.normalBias,k.shadowRadius=B.radius,k.shadowMapSize=B.mapSize,i.spotShadow[m]=k,i.spotShadowMap[m]=L,S++}m++}else if(E.isRectAreaLight){const R=e.get(E);R.color.copy(I).multiplyScalar(P),R.halfWidth.set(E.width*.5,0,0),R.halfHeight.set(0,E.height*.5,0),i.rectArea[v]=R,v++}else if(E.isPointLight){const R=e.get(E);if(R.color.copy(E.color).multiplyScalar(E.intensity),R.distance=E.distance,R.decay=E.decay,E.castShadow){const B=E.shadow,k=t.get(E);k.shadowIntensity=B.intensity,k.shadowBias=B.bias,k.shadowNormalBias=B.normalBias,k.shadowRadius=B.radius,k.shadowMapSize=B.mapSize,k.shadowCameraNear=B.camera.near,k.shadowCameraFar=B.camera.far,i.pointShadow[p]=k,i.pointShadowMap[p]=L,i.pointShadowMatrix[p]=E.shadow.matrix,y++}i.point[p]=R,p++}else if(E.isHemisphereLight){const R=e.get(E);R.skyColor.copy(E.color).multiplyScalar(P),R.groundColor.copy(E.groundColor).multiplyScalar(P),i.hemi[g]=R,g++}}v>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=$t.LTC_FLOAT_1,i.rectAreaLTC2=$t.LTC_FLOAT_2):(i.rectAreaLTC1=$t.LTC_HALF_1,i.rectAreaLTC2=$t.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=f;const C=i.hash;(C.directionalLength!==h||C.pointLength!==p||C.spotLength!==m||C.rectAreaLength!==v||C.hemiLength!==g||C.numDirectionalShadows!==_||C.numPointShadows!==y||C.numSpotShadows!==S||C.numSpotMaps!==w||C.numLightProbes!==T)&&(i.directional.length=h,i.spot.length=m,i.rectArea.length=v,i.point.length=p,i.hemi.length=g,i.directionalShadow.length=_,i.directionalShadowMap.length=_,i.pointShadow.length=y,i.pointShadowMap.length=y,i.spotShadow.length=S,i.spotShadowMap.length=S,i.directionalShadowMatrix.length=_,i.pointShadowMatrix.length=y,i.spotLightMatrix.length=S+w-x,i.spotLightMap.length=w,i.numSpotLightShadowsWithMaps=x,i.numLightProbes=T,C.directionalLength=h,C.pointLength=p,C.spotLength=m,C.rectAreaLength=v,C.hemiLength=g,C.numDirectionalShadows=_,C.numPointShadows=y,C.numSpotShadows=S,C.numSpotMaps=w,C.numLightProbes=T,i.version=UQe++)}function l(c,u){let d=0,f=0,h=0,p=0,m=0;const v=u.matrixWorldInverse;for(let g=0,_=c.length;g<_;g++){const y=c[g];if(y.isDirectionalLight){const S=i.directional[d];S.direction.setFromMatrixPosition(y.matrixWorld),r.setFromMatrixPosition(y.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(v),d++}else if(y.isSpotLight){const S=i.spot[h];S.position.setFromMatrixPosition(y.matrixWorld),S.position.applyMatrix4(v),S.direction.setFromMatrixPosition(y.matrixWorld),r.setFromMatrixPosition(y.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(v),h++}else if(y.isRectAreaLight){const S=i.rectArea[p];S.position.setFromMatrixPosition(y.matrixWorld),S.position.applyMatrix4(v),a.identity(),s.copy(y.matrixWorld),s.premultiply(v),a.extractRotation(s),S.halfWidth.set(y.width*.5,0,0),S.halfHeight.set(0,y.height*.5,0),S.halfWidth.applyMatrix4(a),S.halfHeight.applyMatrix4(a),p++}else if(y.isPointLight){const S=i.point[f];S.position.setFromMatrixPosition(y.matrixWorld),S.position.applyMatrix4(v),f++}else if(y.isHemisphereLight){const S=i.hemi[m];S.direction.setFromMatrixPosition(y.matrixWorld),S.direction.transformDirection(v),m++}}}return{setup:o,setupView:l,state:i}}function Y$(n){const e=new VQe(n),t=[],i=[];function r(u){c.camera=u,t.length=0,i.length=0}function s(u){t.push(u)}function a(u){i.push(u)}function o(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function $Qe(n){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let o;return a===void 0?(o=new Y$(n),e.set(r,[o])):s>=a.length?(o=new Y$(n),a.push(o)):o=a[s],o}function i(){e=new WeakMap}return{get:t,dispose:i}}const GQe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,WQe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function KQe(n,e,t){let i=new bZ;const r=new on,s=new on,a=new Xi,o=new _qe({depthPacking:hKe}),l=new bqe,c={},u=t.maxTextureSize,d={[ec]:ba,[ba]:ec,[yo]:yo},f=new Ga({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new on},radius:{value:4}},vertexShader:GQe,fragmentShader:WQe}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new zo;p.setAttribute("position",new Io(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new hr(p,f),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=XQ;let g=this.type;this.render=function(x,T,C){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||x.length===0)return;const M=n.getRenderTarget(),A=n.getActiveCubeFace(),E=n.getActiveMipmapLevel(),I=n.state;I.setBlending(xd),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);const P=g!==Rc&&this.type===Rc,D=g===Rc&&this.type!==Rc;for(let L=0,R=x.length;L<R;L++){const B=x[L],k=B.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",B,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;r.copy(k.mapSize);const O=k.getFrameExtents();if(r.multiply(O),s.copy(k.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/O.x),r.x=s.x*O.x,k.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/O.y),r.y=s.y*O.y,k.mapSize.y=s.y)),k.map===null||P===!0||D===!0){const G=this.type!==Rc?{minFilter:Va,magFilter:Va}:{};k.map!==null&&k.map.dispose(),k.map=new Yd(r.x,r.y,G),k.map.texture.name=B.name+".shadowMap",k.camera.updateProjectionMatrix()}n.setRenderTarget(k.map),n.clear();const U=k.getViewportCount();for(let G=0;G<U;G++){const q=k.getViewport(G);a.set(s.x*q.x,s.y*q.y,s.x*q.z,s.y*q.w),I.viewport(a),k.updateMatrices(B,G),i=k.getFrustum(),S(T,C,k.camera,B,this.type)}k.isPointLightShadow!==!0&&this.type===Rc&&_(k,C),k.needsUpdate=!1}g=this.type,v.needsUpdate=!1,n.setRenderTarget(M,A,E)};function _(x,T){const C=e.update(m);f.defines.VSM_SAMPLES!==x.blurSamples&&(f.defines.VSM_SAMPLES=x.blurSamples,h.defines.VSM_SAMPLES=x.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new Yd(r.x,r.y)),f.uniforms.shadow_pass.value=x.map.texture,f.uniforms.resolution.value=x.mapSize,f.uniforms.radius.value=x.radius,n.setRenderTarget(x.mapPass),n.clear(),n.renderBufferDirect(T,null,C,f,m,null),h.uniforms.shadow_pass.value=x.mapPass.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,n.setRenderTarget(x.map),n.clear(),n.renderBufferDirect(T,null,C,h,m,null)}function y(x,T,C,M){let A=null;const E=C.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(E!==void 0)A=E;else if(A=C.isPointLight===!0?l:o,n.localClippingEnabled&&T.clipShadows===!0&&Array.isArray(T.clippingPlanes)&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0||T.map&&T.alphaTest>0){const I=A.uuid,P=T.uuid;let D=c[I];D===void 0&&(D={},c[I]=D);let L=D[P];L===void 0&&(L=A.clone(),D[P]=L,T.addEventListener("dispose",w)),A=L}if(A.visible=T.visible,A.wireframe=T.wireframe,M===Rc?A.side=T.shadowSide!==null?T.shadowSide:T.side:A.side=T.shadowSide!==null?T.shadowSide:d[T.side],A.alphaMap=T.alphaMap,A.alphaTest=T.alphaTest,A.map=T.map,A.clipShadows=T.clipShadows,A.clippingPlanes=T.clippingPlanes,A.clipIntersection=T.clipIntersection,A.displacementMap=T.displacementMap,A.displacementScale=T.displacementScale,A.displacementBias=T.displacementBias,A.wireframeLinewidth=T.wireframeLinewidth,A.linewidth=T.linewidth,C.isPointLight===!0&&A.isMeshDistanceMaterial===!0){const I=n.properties.get(A);I.light=C}return A}function S(x,T,C,M,A){if(x.visible===!1)return;if(x.layers.test(T.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&A===Rc)&&(!x.frustumCulled||i.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(C.matrixWorldInverse,x.matrixWorld);const P=e.update(x),D=x.material;if(Array.isArray(D)){const L=P.groups;for(let R=0,B=L.length;R<B;R++){const k=L[R],O=D[k.materialIndex];if(O&&O.visible){const U=y(x,O,M,A);x.onBeforeShadow(n,x,T,C,P,U,k),n.renderBufferDirect(C,null,P,U,x,k),x.onAfterShadow(n,x,T,C,P,U,k)}}}else if(D.visible){const L=y(x,D,M,A);x.onBeforeShadow(n,x,T,C,P,L,null),n.renderBufferDirect(C,null,P,L,x,null),x.onAfterShadow(n,x,T,C,P,L,null)}}const I=x.children;for(let P=0,D=I.length;P<D;P++)S(I[P],T,C,M,A)}function w(x){x.target.removeEventListener("dispose",w);for(const C in c){const M=c[C],A=x.target.uuid;A in M&&(M[A].dispose(),delete M[A])}}}const qQe={[BP]:FP,[zP]:VP,[UP]:$P,[jv]:HP,[FP]:BP,[VP]:zP,[$P]:UP,[HP]:jv};function XQe(n,e){function t(){let fe=!1;const Je=new Xi;let $e=null;const et=new Xi(0,0,0,0);return{setMask:function(ht){$e!==ht&&!fe&&(n.colorMask(ht,ht,ht,ht),$e=ht)},setLocked:function(ht){fe=ht},setClear:function(ht,st,Rt,Vt,Pn){Pn===!0&&(ht*=Vt,st*=Vt,Rt*=Vt),Je.set(ht,st,Rt,Vt),et.equals(Je)===!1&&(n.clearColor(ht,st,Rt,Vt),et.copy(Je))},reset:function(){fe=!1,$e=null,et.set(-1,0,0,0)}}}function i(){let fe=!1,Je=!1,$e=null,et=null,ht=null;return{setReversed:function(st){if(Je!==st){const Rt=e.get("EXT_clip_control");Je?Rt.clipControlEXT(Rt.LOWER_LEFT_EXT,Rt.ZERO_TO_ONE_EXT):Rt.clipControlEXT(Rt.LOWER_LEFT_EXT,Rt.NEGATIVE_ONE_TO_ONE_EXT);const Vt=ht;ht=null,this.setClear(Vt)}Je=st},getReversed:function(){return Je},setTest:function(st){st?ee(n.DEPTH_TEST):me(n.DEPTH_TEST)},setMask:function(st){$e!==st&&!fe&&(n.depthMask(st),$e=st)},setFunc:function(st){if(Je&&(st=qQe[st]),et!==st){switch(st){case BP:n.depthFunc(n.NEVER);break;case FP:n.depthFunc(n.ALWAYS);break;case zP:n.depthFunc(n.LESS);break;case jv:n.depthFunc(n.LEQUAL);break;case UP:n.depthFunc(n.EQUAL);break;case HP:n.depthFunc(n.GEQUAL);break;case VP:n.depthFunc(n.GREATER);break;case $P:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}et=st}},setLocked:function(st){fe=st},setClear:function(st){ht!==st&&(Je&&(st=1-st),n.clearDepth(st),ht=st)},reset:function(){fe=!1,$e=null,et=null,ht=null,Je=!1}}}function r(){let fe=!1,Je=null,$e=null,et=null,ht=null,st=null,Rt=null,Vt=null,Pn=null;return{setTest:function(Jt){fe||(Jt?ee(n.STENCIL_TEST):me(n.STENCIL_TEST))},setMask:function(Jt){Je!==Jt&&!fe&&(n.stencilMask(Jt),Je=Jt)},setFunc:function(Jt,Ai,pi){($e!==Jt||et!==Ai||ht!==pi)&&(n.stencilFunc(Jt,Ai,pi),$e=Jt,et=Ai,ht=pi)},setOp:function(Jt,Ai,pi){(st!==Jt||Rt!==Ai||Vt!==pi)&&(n.stencilOp(Jt,Ai,pi),st=Jt,Rt=Ai,Vt=pi)},setLocked:function(Jt){fe=Jt},setClear:function(Jt){Pn!==Jt&&(n.clearStencil(Jt),Pn=Jt)},reset:function(){fe=!1,Je=null,$e=null,et=null,ht=null,st=null,Rt=null,Vt=null,Pn=null}}}const s=new t,a=new i,o=new r,l=new WeakMap,c=new WeakMap;let u={},d={},f=new WeakMap,h=[],p=null,m=!1,v=null,g=null,_=null,y=null,S=null,w=null,x=null,T=new Si(0,0,0),C=0,M=!1,A=null,E=null,I=null,P=null,D=null;const L=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let R=!1,B=0;const k=n.getParameter(n.VERSION);k.indexOf("WebGL")!==-1?(B=parseFloat(/^WebGL (\d)/.exec(k)[1]),R=B>=1):k.indexOf("OpenGL ES")!==-1&&(B=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),R=B>=2);let O=null,U={};const G=n.getParameter(n.SCISSOR_BOX),q=n.getParameter(n.VIEWPORT),W=new Xi().fromArray(G),Y=new Xi().fromArray(q);function J(fe,Je,$e,et){const ht=new Uint8Array(4),st=n.createTexture();n.bindTexture(fe,st),n.texParameteri(fe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(fe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Rt=0;Rt<$e;Rt++)fe===n.TEXTURE_3D||fe===n.TEXTURE_2D_ARRAY?n.texImage3D(Je,0,n.RGBA,1,1,et,0,n.RGBA,n.UNSIGNED_BYTE,ht):n.texImage2D(Je+Rt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ht);return st}const Z={};Z[n.TEXTURE_2D]=J(n.TEXTURE_2D,n.TEXTURE_2D,1),Z[n.TEXTURE_CUBE_MAP]=J(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Z[n.TEXTURE_2D_ARRAY]=J(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Z[n.TEXTURE_3D]=J(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),ee(n.DEPTH_TEST),a.setFunc(jv),we(!1),De(JV),ee(n.CULL_FACE),j(xd);function ee(fe){u[fe]!==!0&&(n.enable(fe),u[fe]=!0)}function me(fe){u[fe]!==!1&&(n.disable(fe),u[fe]=!1)}function ye(fe,Je){return d[fe]!==Je?(n.bindFramebuffer(fe,Je),d[fe]=Je,fe===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Je),fe===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Je),!0):!1}function Te(fe,Je){let $e=h,et=!1;if(fe){$e=f.get(Je),$e===void 0&&($e=[],f.set(Je,$e));const ht=fe.textures;if($e.length!==ht.length||$e[0]!==n.COLOR_ATTACHMENT0){for(let st=0,Rt=ht.length;st<Rt;st++)$e[st]=n.COLOR_ATTACHMENT0+st;$e.length=ht.length,et=!0}}else $e[0]!==n.BACK&&($e[0]=n.BACK,et=!0);et&&n.drawBuffers($e)}function Ee(fe){return p!==fe?(n.useProgram(fe),p=fe,!0):!1}const H={[eh]:n.FUNC_ADD,[z7e]:n.FUNC_SUBTRACT,[U7e]:n.FUNC_REVERSE_SUBTRACT};H[H7e]=n.MIN,H[V7e]=n.MAX;const Q={[$7e]:n.ZERO,[G7e]:n.ONE,[W7e]:n.SRC_COLOR,[q_]:n.SRC_ALPHA,[Q7e]:n.SRC_ALPHA_SATURATE,[Y7e]:n.DST_COLOR,[q7e]:n.DST_ALPHA,[K7e]:n.ONE_MINUS_SRC_COLOR,[X_]:n.ONE_MINUS_SRC_ALPHA,[j7e]:n.ONE_MINUS_DST_COLOR,[X7e]:n.ONE_MINUS_DST_ALPHA,[Z7e]:n.CONSTANT_COLOR,[J7e]:n.ONE_MINUS_CONSTANT_COLOR,[eKe]:n.CONSTANT_ALPHA,[tKe]:n.ONE_MINUS_CONSTANT_ALPHA};function j(fe,Je,$e,et,ht,st,Rt,Vt,Pn,Jt){if(fe===xd){m===!0&&(me(n.BLEND),m=!1);return}if(m===!1&&(ee(n.BLEND),m=!0),fe!==YQ){if(fe!==v||Jt!==M){if((g!==eh||S!==eh)&&(n.blendEquation(n.FUNC_ADD),g=eh,S=eh),Jt)switch(fe){case Cd:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case e$:n.blendFunc(n.ONE,n.ONE);break;case t$:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case n$:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe);break}else switch(fe){case Cd:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case e$:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case t$:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case n$:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",fe);break}_=null,y=null,w=null,x=null,T.set(0,0,0),C=0,v=fe,M=Jt}return}ht=ht||Je,st=st||$e,Rt=Rt||et,(Je!==g||ht!==S)&&(n.blendEquationSeparate(H[Je],H[ht]),g=Je,S=ht),($e!==_||et!==y||st!==w||Rt!==x)&&(n.blendFuncSeparate(Q[$e],Q[et],Q[st],Q[Rt]),_=$e,y=et,w=st,x=Rt),(Vt.equals(T)===!1||Pn!==C)&&(n.blendColor(Vt.r,Vt.g,Vt.b,Pn),T.copy(Vt),C=Pn),v=fe,M=!1}function Pe(fe,Je){fe.side===yo?me(n.CULL_FACE):ee(n.CULL_FACE);let $e=fe.side===ba;Je&&($e=!$e),we($e),fe.blending===Cd&&fe.transparent===!1?j(xd):j(fe.blending,fe.blendEquation,fe.blendSrc,fe.blendDst,fe.blendEquationAlpha,fe.blendSrcAlpha,fe.blendDstAlpha,fe.blendColor,fe.blendAlpha,fe.premultipliedAlpha),a.setFunc(fe.depthFunc),a.setTest(fe.depthTest),a.setMask(fe.depthWrite),s.setMask(fe.colorWrite);const et=fe.stencilWrite;o.setTest(et),et&&(o.setMask(fe.stencilWriteMask),o.setFunc(fe.stencilFunc,fe.stencilRef,fe.stencilFuncMask),o.setOp(fe.stencilFail,fe.stencilZFail,fe.stencilZPass)),Ae(fe.polygonOffset,fe.polygonOffsetFactor,fe.polygonOffsetUnits),fe.alphaToCoverage===!0?ee(n.SAMPLE_ALPHA_TO_COVERAGE):me(n.SAMPLE_ALPHA_TO_COVERAGE)}function we(fe){A!==fe&&(fe?n.frontFace(n.CW):n.frontFace(n.CCW),A=fe)}function De(fe){fe!==N7e?(ee(n.CULL_FACE),fe!==E&&(fe===JV?n.cullFace(n.BACK):fe===B7e?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):me(n.CULL_FACE),E=fe}function Me(fe){fe!==I&&(R&&n.lineWidth(fe),I=fe)}function Ae(fe,Je,$e){fe?(ee(n.POLYGON_OFFSET_FILL),(P!==Je||D!==$e)&&(n.polygonOffset(Je,$e),P=Je,D=$e)):me(n.POLYGON_OFFSET_FILL)}function Fe(fe){fe?ee(n.SCISSOR_TEST):me(n.SCISSOR_TEST)}function ne(fe){fe===void 0&&(fe=n.TEXTURE0+L-1),O!==fe&&(n.activeTexture(fe),O=fe)}function z(fe,Je,$e){$e===void 0&&(O===null?$e=n.TEXTURE0+L-1:$e=O);let et=U[$e];et===void 0&&(et={type:void 0,texture:void 0},U[$e]=et),(et.type!==fe||et.texture!==Je)&&(O!==$e&&(n.activeTexture($e),O=$e),n.bindTexture(fe,Je||Z[fe]),et.type=fe,et.texture=Je)}function K(){const fe=U[O];fe!==void 0&&fe.type!==void 0&&(n.bindTexture(fe.type,null),fe.type=void 0,fe.texture=void 0)}function ae(){try{n.compressedTexImage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function xe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Le(){try{n.texSubImage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Xe(){try{n.texSubImage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function je(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function he(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ye(){try{n.texStorage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function Ke(){try{n.texStorage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function V(){try{n.texImage2D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function re(){try{n.texImage3D.apply(n,arguments)}catch(fe){console.error("THREE.WebGLState:",fe)}}function te(fe){W.equals(fe)===!1&&(n.scissor(fe.x,fe.y,fe.z,fe.w),W.copy(fe))}function pe(fe){Y.equals(fe)===!1&&(n.viewport(fe.x,fe.y,fe.z,fe.w),Y.copy(fe))}function se(fe,Je){let $e=c.get(Je);$e===void 0&&($e=new WeakMap,c.set(Je,$e));let et=$e.get(fe);et===void 0&&(et=n.getUniformBlockIndex(Je,fe.name),$e.set(fe,et))}function de(fe,Je){const et=c.get(Je).get(fe);l.get(Je)!==et&&(n.uniformBlockBinding(Je,et,fe.__bindingPointIndex),l.set(Je,et))}function qe(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},O=null,U={},d={},f=new WeakMap,h=[],p=null,m=!1,v=null,g=null,_=null,y=null,S=null,w=null,x=null,T=new Si(0,0,0),C=0,M=!1,A=null,E=null,I=null,P=null,D=null,W.set(0,0,n.canvas.width,n.canvas.height),Y.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:ee,disable:me,bindFramebuffer:ye,drawBuffers:Te,useProgram:Ee,setBlending:j,setMaterial:Pe,setFlipSided:we,setCullFace:De,setLineWidth:Me,setPolygonOffset:Ae,setScissorTest:Fe,activeTexture:ne,bindTexture:z,unbindTexture:K,compressedTexImage2D:ae,compressedTexImage3D:xe,texImage2D:V,texImage3D:re,updateUBOMapping:se,uniformBlockBinding:de,texStorage2D:Ye,texStorage3D:Ke,texSubImage2D:Le,texSubImage3D:Xe,compressedTexSubImage2D:je,compressedTexSubImage3D:he,scissor:te,viewport:pe,reset:qe}}function YQe(n,e,t,i,r,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new on,u=new WeakMap;let d;const f=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(ne,z){return h?new OffscreenCanvas(ne,z):RC("canvas")}function m(ne,z,K){let ae=1;const xe=Fe(ne);if((xe.width>K||xe.height>K)&&(ae=K/Math.max(xe.width,xe.height)),ae<1)if(typeof HTMLImageElement<"u"&&ne instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ne instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ne instanceof ImageBitmap||typeof VideoFrame<"u"&&ne instanceof VideoFrame){const Le=Math.floor(ae*xe.width),Xe=Math.floor(ae*xe.height);d===void 0&&(d=p(Le,Xe));const je=z?p(Le,Xe):d;return je.width=Le,je.height=Xe,je.getContext("2d").drawImage(ne,0,0,Le,Xe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+xe.width+"x"+xe.height+") to ("+Le+"x"+Xe+")."),je}else return"data"in ne&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+xe.width+"x"+xe.height+")."),ne;return ne}function v(ne){return ne.generateMipmaps}function g(ne){n.generateMipmap(ne)}function _(ne){return ne.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:ne.isWebGL3DRenderTarget?n.TEXTURE_3D:ne.isWebGLArrayRenderTarget||ne.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function y(ne,z,K,ae,xe=!1){if(ne!==null){if(n[ne]!==void 0)return n[ne];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ne+"'")}let Le=z;if(z===n.RED&&(K===n.FLOAT&&(Le=n.R32F),K===n.HALF_FLOAT&&(Le=n.R16F),K===n.UNSIGNED_BYTE&&(Le=n.R8)),z===n.RED_INTEGER&&(K===n.UNSIGNED_BYTE&&(Le=n.R8UI),K===n.UNSIGNED_SHORT&&(Le=n.R16UI),K===n.UNSIGNED_INT&&(Le=n.R32UI),K===n.BYTE&&(Le=n.R8I),K===n.SHORT&&(Le=n.R16I),K===n.INT&&(Le=n.R32I)),z===n.RG&&(K===n.FLOAT&&(Le=n.RG32F),K===n.HALF_FLOAT&&(Le=n.RG16F),K===n.UNSIGNED_BYTE&&(Le=n.RG8)),z===n.RG_INTEGER&&(K===n.UNSIGNED_BYTE&&(Le=n.RG8UI),K===n.UNSIGNED_SHORT&&(Le=n.RG16UI),K===n.UNSIGNED_INT&&(Le=n.RG32UI),K===n.BYTE&&(Le=n.RG8I),K===n.SHORT&&(Le=n.RG16I),K===n.INT&&(Le=n.RG32I)),z===n.RGB_INTEGER&&(K===n.UNSIGNED_BYTE&&(Le=n.RGB8UI),K===n.UNSIGNED_SHORT&&(Le=n.RGB16UI),K===n.UNSIGNED_INT&&(Le=n.RGB32UI),K===n.BYTE&&(Le=n.RGB8I),K===n.SHORT&&(Le=n.RGB16I),K===n.INT&&(Le=n.RGB32I)),z===n.RGBA_INTEGER&&(K===n.UNSIGNED_BYTE&&(Le=n.RGBA8UI),K===n.UNSIGNED_SHORT&&(Le=n.RGBA16UI),K===n.UNSIGNED_INT&&(Le=n.RGBA32UI),K===n.BYTE&&(Le=n.RGBA8I),K===n.SHORT&&(Le=n.RGBA16I),K===n.INT&&(Le=n.RGBA32I)),z===n.RGB&&K===n.UNSIGNED_INT_5_9_9_9_REV&&(Le=n.RGB9_E5),z===n.RGBA){const Xe=xe?EC:bi.getTransfer(ae);K===n.FLOAT&&(Le=n.RGBA32F),K===n.HALF_FLOAT&&(Le=n.RGBA16F),K===n.UNSIGNED_BYTE&&(Le=Xe===Di?n.SRGB8_ALPHA8:n.RGBA8),K===n.UNSIGNED_SHORT_4_4_4_4&&(Le=n.RGBA4),K===n.UNSIGNED_SHORT_5_5_5_1&&(Le=n.RGB5_A1)}return(Le===n.R16F||Le===n.R32F||Le===n.RG16F||Le===n.RG32F||Le===n.RGBA16F||Le===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Le}function S(ne,z){let K;return ne?z===null||z===xo||z===Jv?K=n.DEPTH24_STENCIL8:z===ol?K=n.DEPTH32F_STENCIL8:z===Y_&&(K=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):z===null||z===xo||z===Jv?K=n.DEPTH_COMPONENT24:z===ol?K=n.DEPTH_COMPONENT32F:z===Y_&&(K=n.DEPTH_COMPONENT16),K}function w(ne,z){return v(ne)===!0||ne.isFramebufferTexture&&ne.minFilter!==Va&&ne.minFilter!==zl?Math.log2(Math.max(z.width,z.height))+1:ne.mipmaps!==void 0&&ne.mipmaps.length>0?ne.mipmaps.length:ne.isCompressedTexture&&Array.isArray(ne.image)?z.mipmaps.length:1}function x(ne){const z=ne.target;z.removeEventListener("dispose",x),C(z),z.isVideoTexture&&u.delete(z)}function T(ne){const z=ne.target;z.removeEventListener("dispose",T),A(z)}function C(ne){const z=i.get(ne);if(z.__webglInit===void 0)return;const K=ne.source,ae=f.get(K);if(ae){const xe=ae[z.__cacheKey];xe.usedTimes--,xe.usedTimes===0&&M(ne),Object.keys(ae).length===0&&f.delete(K)}i.remove(ne)}function M(ne){const z=i.get(ne);n.deleteTexture(z.__webglTexture);const K=ne.source,ae=f.get(K);delete ae[z.__cacheKey],a.memory.textures--}function A(ne){const z=i.get(ne);if(ne.depthTexture&&(ne.depthTexture.dispose(),i.remove(ne.depthTexture)),ne.isWebGLCubeRenderTarget)for(let ae=0;ae<6;ae++){if(Array.isArray(z.__webglFramebuffer[ae]))for(let xe=0;xe<z.__webglFramebuffer[ae].length;xe++)n.deleteFramebuffer(z.__webglFramebuffer[ae][xe]);else n.deleteFramebuffer(z.__webglFramebuffer[ae]);z.__webglDepthbuffer&&n.deleteRenderbuffer(z.__webglDepthbuffer[ae])}else{if(Array.isArray(z.__webglFramebuffer))for(let ae=0;ae<z.__webglFramebuffer.length;ae++)n.deleteFramebuffer(z.__webglFramebuffer[ae]);else n.deleteFramebuffer(z.__webglFramebuffer);if(z.__webglDepthbuffer&&n.deleteRenderbuffer(z.__webglDepthbuffer),z.__webglMultisampledFramebuffer&&n.deleteFramebuffer(z.__webglMultisampledFramebuffer),z.__webglColorRenderbuffer)for(let ae=0;ae<z.__webglColorRenderbuffer.length;ae++)z.__webglColorRenderbuffer[ae]&&n.deleteRenderbuffer(z.__webglColorRenderbuffer[ae]);z.__webglDepthRenderbuffer&&n.deleteRenderbuffer(z.__webglDepthRenderbuffer)}const K=ne.textures;for(let ae=0,xe=K.length;ae<xe;ae++){const Le=i.get(K[ae]);Le.__webglTexture&&(n.deleteTexture(Le.__webglTexture),a.memory.textures--),i.remove(K[ae])}i.remove(ne)}let E=0;function I(){E=0}function P(){const ne=E;return ne>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ne+" texture units while this GPU supports only "+r.maxTextures),E+=1,ne}function D(ne){const z=[];return z.push(ne.wrapS),z.push(ne.wrapT),z.push(ne.wrapR||0),z.push(ne.magFilter),z.push(ne.minFilter),z.push(ne.anisotropy),z.push(ne.internalFormat),z.push(ne.format),z.push(ne.type),z.push(ne.generateMipmaps),z.push(ne.premultiplyAlpha),z.push(ne.flipY),z.push(ne.unpackAlignment),z.push(ne.colorSpace),z.join()}function L(ne,z){const K=i.get(ne);if(ne.isVideoTexture&&Me(ne),ne.isRenderTargetTexture===!1&&ne.version>0&&K.__version!==ne.version){const ae=ne.image;if(ae===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ae.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Y(K,ne,z);return}}t.bindTexture(n.TEXTURE_2D,K.__webglTexture,n.TEXTURE0+z)}function R(ne,z){const K=i.get(ne);if(ne.version>0&&K.__version!==ne.version){Y(K,ne,z);return}t.bindTexture(n.TEXTURE_2D_ARRAY,K.__webglTexture,n.TEXTURE0+z)}function B(ne,z){const K=i.get(ne);if(ne.version>0&&K.__version!==ne.version){Y(K,ne,z);return}t.bindTexture(n.TEXTURE_3D,K.__webglTexture,n.TEXTURE0+z)}function k(ne,z){const K=i.get(ne);if(ne.version>0&&K.__version!==ne.version){J(K,ne,z);return}t.bindTexture(n.TEXTURE_CUBE_MAP,K.__webglTexture,n.TEXTURE0+z)}const O={[KP]:n.REPEAT,[yh]:n.CLAMP_TO_EDGE,[qP]:n.MIRRORED_REPEAT},U={[Va]:n.NEAREST,[dKe]:n.NEAREST_MIPMAP_NEAREST,[Aw]:n.NEAREST_MIPMAP_LINEAR,[zl]:n.LINEAR,[XE]:n.LINEAR_MIPMAP_NEAREST,[_h]:n.LINEAR_MIPMAP_LINEAR},G={[vKe]:n.NEVER,[wKe]:n.ALWAYS,[gKe]:n.LESS,[oZ]:n.LEQUAL,[yKe]:n.EQUAL,[SKe]:n.GEQUAL,[_Ke]:n.GREATER,[bKe]:n.NOTEQUAL};function q(ne,z){if(z.type===ol&&e.has("OES_texture_float_linear")===!1&&(z.magFilter===zl||z.magFilter===XE||z.magFilter===Aw||z.magFilter===_h||z.minFilter===zl||z.minFilter===XE||z.minFilter===Aw||z.minFilter===_h)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(ne,n.TEXTURE_WRAP_S,O[z.wrapS]),n.texParameteri(ne,n.TEXTURE_WRAP_T,O[z.wrapT]),(ne===n.TEXTURE_3D||ne===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ne,n.TEXTURE_WRAP_R,O[z.wrapR]),n.texParameteri(ne,n.TEXTURE_MAG_FILTER,U[z.magFilter]),n.texParameteri(ne,n.TEXTURE_MIN_FILTER,U[z.minFilter]),z.compareFunction&&(n.texParameteri(ne,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ne,n.TEXTURE_COMPARE_FUNC,G[z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(z.magFilter===Va||z.minFilter!==Aw&&z.minFilter!==_h||z.type===ol&&e.has("OES_texture_float_linear")===!1)return;if(z.anisotropy>1||i.get(z).__currentAnisotropy){const K=e.get("EXT_texture_filter_anisotropic");n.texParameterf(ne,K.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(z.anisotropy,r.getMaxAnisotropy())),i.get(z).__currentAnisotropy=z.anisotropy}}}function W(ne,z){let K=!1;ne.__webglInit===void 0&&(ne.__webglInit=!0,z.addEventListener("dispose",x));const ae=z.source;let xe=f.get(ae);xe===void 0&&(xe={},f.set(ae,xe));const Le=D(z);if(Le!==ne.__cacheKey){xe[Le]===void 0&&(xe[Le]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,K=!0),xe[Le].usedTimes++;const Xe=xe[ne.__cacheKey];Xe!==void 0&&(xe[ne.__cacheKey].usedTimes--,Xe.usedTimes===0&&M(z)),ne.__cacheKey=Le,ne.__webglTexture=xe[Le].texture}return K}function Y(ne,z,K){let ae=n.TEXTURE_2D;(z.isDataArrayTexture||z.isCompressedArrayTexture)&&(ae=n.TEXTURE_2D_ARRAY),z.isData3DTexture&&(ae=n.TEXTURE_3D);const xe=W(ne,z),Le=z.source;t.bindTexture(ae,ne.__webglTexture,n.TEXTURE0+K);const Xe=i.get(Le);if(Le.version!==Xe.__version||xe===!0){t.activeTexture(n.TEXTURE0+K);const je=bi.getPrimaries(bi.workingColorSpace),he=z.colorSpace===rd?null:bi.getPrimaries(z.colorSpace),Ye=z.colorSpace===rd||je===he?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ye);let Ke=m(z.image,!1,r.maxTextureSize);Ke=Ae(z,Ke);const V=s.convert(z.format,z.colorSpace),re=s.convert(z.type);let te=y(z.internalFormat,V,re,z.colorSpace,z.isVideoTexture);q(ae,z);let pe;const se=z.mipmaps,de=z.isVideoTexture!==!0,qe=Xe.__version===void 0||xe===!0,fe=Le.dataReady,Je=w(z,Ke);if(z.isDepthTexture)te=S(z.format===eg,z.type),qe&&(de?t.texStorage2D(n.TEXTURE_2D,1,te,Ke.width,Ke.height):t.texImage2D(n.TEXTURE_2D,0,te,Ke.width,Ke.height,0,V,re,null));else if(z.isDataTexture)if(se.length>0){de&&qe&&t.texStorage2D(n.TEXTURE_2D,Je,te,se[0].width,se[0].height);for(let $e=0,et=se.length;$e<et;$e++)pe=se[$e],de?fe&&t.texSubImage2D(n.TEXTURE_2D,$e,0,0,pe.width,pe.height,V,re,pe.data):t.texImage2D(n.TEXTURE_2D,$e,te,pe.width,pe.height,0,V,re,pe.data);z.generateMipmaps=!1}else de?(qe&&t.texStorage2D(n.TEXTURE_2D,Je,te,Ke.width,Ke.height),fe&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ke.width,Ke.height,V,re,Ke.data)):t.texImage2D(n.TEXTURE_2D,0,te,Ke.width,Ke.height,0,V,re,Ke.data);else if(z.isCompressedTexture)if(z.isCompressedArrayTexture){de&&qe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Je,te,se[0].width,se[0].height,Ke.depth);for(let $e=0,et=se.length;$e<et;$e++)if(pe=se[$e],z.format!==Ys)if(V!==null)if(de){if(fe)if(z.layerUpdates.size>0){const ht=M$(pe.width,pe.height,z.format,z.type);for(const st of z.layerUpdates){const Rt=pe.data.subarray(st*ht/pe.data.BYTES_PER_ELEMENT,(st+1)*ht/pe.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,$e,0,0,st,pe.width,pe.height,1,V,Rt)}z.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,$e,0,0,0,pe.width,pe.height,Ke.depth,V,pe.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,$e,te,pe.width,pe.height,Ke.depth,0,pe.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else de?fe&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,$e,0,0,0,pe.width,pe.height,Ke.depth,V,re,pe.data):t.texImage3D(n.TEXTURE_2D_ARRAY,$e,te,pe.width,pe.height,Ke.depth,0,V,re,pe.data)}else{de&&qe&&t.texStorage2D(n.TEXTURE_2D,Je,te,se[0].width,se[0].height);for(let $e=0,et=se.length;$e<et;$e++)pe=se[$e],z.format!==Ys?V!==null?de?fe&&t.compressedTexSubImage2D(n.TEXTURE_2D,$e,0,0,pe.width,pe.height,V,pe.data):t.compressedTexImage2D(n.TEXTURE_2D,$e,te,pe.width,pe.height,0,pe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):de?fe&&t.texSubImage2D(n.TEXTURE_2D,$e,0,0,pe.width,pe.height,V,re,pe.data):t.texImage2D(n.TEXTURE_2D,$e,te,pe.width,pe.height,0,V,re,pe.data)}else if(z.isDataArrayTexture)if(de){if(qe&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Je,te,Ke.width,Ke.height,Ke.depth),fe)if(z.layerUpdates.size>0){const $e=M$(Ke.width,Ke.height,z.format,z.type);for(const et of z.layerUpdates){const ht=Ke.data.subarray(et*$e/Ke.data.BYTES_PER_ELEMENT,(et+1)*$e/Ke.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,et,Ke.width,Ke.height,1,V,re,ht)}z.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ke.width,Ke.height,Ke.depth,V,re,Ke.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,te,Ke.width,Ke.height,Ke.depth,0,V,re,Ke.data);else if(z.isData3DTexture)de?(qe&&t.texStorage3D(n.TEXTURE_3D,Je,te,Ke.width,Ke.height,Ke.depth),fe&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ke.width,Ke.height,Ke.depth,V,re,Ke.data)):t.texImage3D(n.TEXTURE_3D,0,te,Ke.width,Ke.height,Ke.depth,0,V,re,Ke.data);else if(z.isFramebufferTexture){if(qe)if(de)t.texStorage2D(n.TEXTURE_2D,Je,te,Ke.width,Ke.height);else{let $e=Ke.width,et=Ke.height;for(let ht=0;ht<Je;ht++)t.texImage2D(n.TEXTURE_2D,ht,te,$e,et,0,V,re,null),$e>>=1,et>>=1}}else if(se.length>0){if(de&&qe){const $e=Fe(se[0]);t.texStorage2D(n.TEXTURE_2D,Je,te,$e.width,$e.height)}for(let $e=0,et=se.length;$e<et;$e++)pe=se[$e],de?fe&&t.texSubImage2D(n.TEXTURE_2D,$e,0,0,V,re,pe):t.texImage2D(n.TEXTURE_2D,$e,te,V,re,pe);z.generateMipmaps=!1}else if(de){if(qe){const $e=Fe(Ke);t.texStorage2D(n.TEXTURE_2D,Je,te,$e.width,$e.height)}fe&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,V,re,Ke)}else t.texImage2D(n.TEXTURE_2D,0,te,V,re,Ke);v(z)&&g(ae),Xe.__version=Le.version,z.onUpdate&&z.onUpdate(z)}ne.__version=z.version}function J(ne,z,K){if(z.image.length!==6)return;const ae=W(ne,z),xe=z.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ne.__webglTexture,n.TEXTURE0+K);const Le=i.get(xe);if(xe.version!==Le.__version||ae===!0){t.activeTexture(n.TEXTURE0+K);const Xe=bi.getPrimaries(bi.workingColorSpace),je=z.colorSpace===rd?null:bi.getPrimaries(z.colorSpace),he=z.colorSpace===rd||Xe===je?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,he);const Ye=z.isCompressedTexture||z.image[0].isCompressedTexture,Ke=z.image[0]&&z.image[0].isDataTexture,V=[];for(let et=0;et<6;et++)!Ye&&!Ke?V[et]=m(z.image[et],!0,r.maxCubemapSize):V[et]=Ke?z.image[et].image:z.image[et],V[et]=Ae(z,V[et]);const re=V[0],te=s.convert(z.format,z.colorSpace),pe=s.convert(z.type),se=y(z.internalFormat,te,pe,z.colorSpace),de=z.isVideoTexture!==!0,qe=Le.__version===void 0||ae===!0,fe=xe.dataReady;let Je=w(z,re);q(n.TEXTURE_CUBE_MAP,z);let $e;if(Ye){de&&qe&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Je,se,re.width,re.height);for(let et=0;et<6;et++){$e=V[et].mipmaps;for(let ht=0;ht<$e.length;ht++){const st=$e[ht];z.format!==Ys?te!==null?de?fe&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ht,0,0,st.width,st.height,te,st.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ht,se,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):de?fe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ht,0,0,st.width,st.height,te,pe,st.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ht,se,st.width,st.height,0,te,pe,st.data)}}}else{if($e=z.mipmaps,de&&qe){$e.length>0&&Je++;const et=Fe(V[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Je,se,et.width,et.height)}for(let et=0;et<6;et++)if(Ke){de?fe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,0,0,V[et].width,V[et].height,te,pe,V[et].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,se,V[et].width,V[et].height,0,te,pe,V[et].data);for(let ht=0;ht<$e.length;ht++){const Rt=$e[ht].image[et].image;de?fe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ht+1,0,0,Rt.width,Rt.height,te,pe,Rt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ht+1,se,Rt.width,Rt.height,0,te,pe,Rt.data)}}else{de?fe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,0,0,te,pe,V[et]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,0,se,te,pe,V[et]);for(let ht=0;ht<$e.length;ht++){const st=$e[ht];de?fe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ht+1,0,0,te,pe,st.image[et]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+et,ht+1,se,te,pe,st.image[et])}}}v(z)&&g(n.TEXTURE_CUBE_MAP),Le.__version=xe.version,z.onUpdate&&z.onUpdate(z)}ne.__version=z.version}function Z(ne,z,K,ae,xe,Le){const Xe=s.convert(K.format,K.colorSpace),je=s.convert(K.type),he=y(K.internalFormat,Xe,je,K.colorSpace),Ye=i.get(z),Ke=i.get(K);if(Ke.__renderTarget=z,!Ye.__hasExternalTextures){const V=Math.max(1,z.width>>Le),re=Math.max(1,z.height>>Le);xe===n.TEXTURE_3D||xe===n.TEXTURE_2D_ARRAY?t.texImage3D(xe,Le,he,V,re,z.depth,0,Xe,je,null):t.texImage2D(xe,Le,he,V,re,0,Xe,je,null)}t.bindFramebuffer(n.FRAMEBUFFER,ne),De(z)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ae,xe,Ke.__webglTexture,0,we(z)):(xe===n.TEXTURE_2D||xe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&xe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ae,xe,Ke.__webglTexture,Le),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ee(ne,z,K){if(n.bindRenderbuffer(n.RENDERBUFFER,ne),z.depthBuffer){const ae=z.depthTexture,xe=ae&&ae.isDepthTexture?ae.type:null,Le=S(z.stencilBuffer,xe),Xe=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,je=we(z);De(z)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,je,Le,z.width,z.height):K?n.renderbufferStorageMultisample(n.RENDERBUFFER,je,Le,z.width,z.height):n.renderbufferStorage(n.RENDERBUFFER,Le,z.width,z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Xe,n.RENDERBUFFER,ne)}else{const ae=z.textures;for(let xe=0;xe<ae.length;xe++){const Le=ae[xe],Xe=s.convert(Le.format,Le.colorSpace),je=s.convert(Le.type),he=y(Le.internalFormat,Xe,je,Le.colorSpace),Ye=we(z);K&&De(z)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ye,he,z.width,z.height):De(z)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ye,he,z.width,z.height):n.renderbufferStorage(n.RENDERBUFFER,he,z.width,z.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function me(ne,z){if(z&&z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,ne),!(z.depthTexture&&z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ae=i.get(z.depthTexture);ae.__renderTarget=z,(!ae.__webglTexture||z.depthTexture.image.width!==z.width||z.depthTexture.image.height!==z.height)&&(z.depthTexture.image.width=z.width,z.depthTexture.image.height=z.height,z.depthTexture.needsUpdate=!0),L(z.depthTexture,0);const xe=ae.__webglTexture,Le=we(z);if(z.depthTexture.format===kh)De(z)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,xe,0,Le):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,xe,0);else if(z.depthTexture.format===eg)De(z)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,xe,0,Le):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,xe,0);else throw new Error("Unknown depthTexture format")}function ye(ne){const z=i.get(ne),K=ne.isWebGLCubeRenderTarget===!0;if(z.__boundDepthTexture!==ne.depthTexture){const ae=ne.depthTexture;if(z.__depthDisposeCallback&&z.__depthDisposeCallback(),ae){const xe=()=>{delete z.__boundDepthTexture,delete z.__depthDisposeCallback,ae.removeEventListener("dispose",xe)};ae.addEventListener("dispose",xe),z.__depthDisposeCallback=xe}z.__boundDepthTexture=ae}if(ne.depthTexture&&!z.__autoAllocateDepthBuffer){if(K)throw new Error("target.depthTexture not supported in Cube render targets");me(z.__webglFramebuffer,ne)}else if(K){z.__webglDepthbuffer=[];for(let ae=0;ae<6;ae++)if(t.bindFramebuffer(n.FRAMEBUFFER,z.__webglFramebuffer[ae]),z.__webglDepthbuffer[ae]===void 0)z.__webglDepthbuffer[ae]=n.createRenderbuffer(),ee(z.__webglDepthbuffer[ae],ne,!1);else{const xe=ne.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Le=z.__webglDepthbuffer[ae];n.bindRenderbuffer(n.RENDERBUFFER,Le),n.framebufferRenderbuffer(n.FRAMEBUFFER,xe,n.RENDERBUFFER,Le)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,z.__webglFramebuffer),z.__webglDepthbuffer===void 0)z.__webglDepthbuffer=n.createRenderbuffer(),ee(z.__webglDepthbuffer,ne,!1);else{const ae=ne.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,xe=z.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,xe),n.framebufferRenderbuffer(n.FRAMEBUFFER,ae,n.RENDERBUFFER,xe)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Te(ne,z,K){const ae=i.get(ne);z!==void 0&&Z(ae.__webglFramebuffer,ne,ne.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),K!==void 0&&ye(ne)}function Ee(ne){const z=ne.texture,K=i.get(ne),ae=i.get(z);ne.addEventListener("dispose",T);const xe=ne.textures,Le=ne.isWebGLCubeRenderTarget===!0,Xe=xe.length>1;if(Xe||(ae.__webglTexture===void 0&&(ae.__webglTexture=n.createTexture()),ae.__version=z.version,a.memory.textures++),Le){K.__webglFramebuffer=[];for(let je=0;je<6;je++)if(z.mipmaps&&z.mipmaps.length>0){K.__webglFramebuffer[je]=[];for(let he=0;he<z.mipmaps.length;he++)K.__webglFramebuffer[je][he]=n.createFramebuffer()}else K.__webglFramebuffer[je]=n.createFramebuffer()}else{if(z.mipmaps&&z.mipmaps.length>0){K.__webglFramebuffer=[];for(let je=0;je<z.mipmaps.length;je++)K.__webglFramebuffer[je]=n.createFramebuffer()}else K.__webglFramebuffer=n.createFramebuffer();if(Xe)for(let je=0,he=xe.length;je<he;je++){const Ye=i.get(xe[je]);Ye.__webglTexture===void 0&&(Ye.__webglTexture=n.createTexture(),a.memory.textures++)}if(ne.samples>0&&De(ne)===!1){K.__webglMultisampledFramebuffer=n.createFramebuffer(),K.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,K.__webglMultisampledFramebuffer);for(let je=0;je<xe.length;je++){const he=xe[je];K.__webglColorRenderbuffer[je]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,K.__webglColorRenderbuffer[je]);const Ye=s.convert(he.format,he.colorSpace),Ke=s.convert(he.type),V=y(he.internalFormat,Ye,Ke,he.colorSpace,ne.isXRRenderTarget===!0),re=we(ne);n.renderbufferStorageMultisample(n.RENDERBUFFER,re,V,ne.width,ne.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+je,n.RENDERBUFFER,K.__webglColorRenderbuffer[je])}n.bindRenderbuffer(n.RENDERBUFFER,null),ne.depthBuffer&&(K.__webglDepthRenderbuffer=n.createRenderbuffer(),ee(K.__webglDepthRenderbuffer,ne,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Le){t.bindTexture(n.TEXTURE_CUBE_MAP,ae.__webglTexture),q(n.TEXTURE_CUBE_MAP,z);for(let je=0;je<6;je++)if(z.mipmaps&&z.mipmaps.length>0)for(let he=0;he<z.mipmaps.length;he++)Z(K.__webglFramebuffer[je][he],ne,z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+je,he);else Z(K.__webglFramebuffer[je],ne,z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+je,0);v(z)&&g(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Xe){for(let je=0,he=xe.length;je<he;je++){const Ye=xe[je],Ke=i.get(Ye);t.bindTexture(n.TEXTURE_2D,Ke.__webglTexture),q(n.TEXTURE_2D,Ye),Z(K.__webglFramebuffer,ne,Ye,n.COLOR_ATTACHMENT0+je,n.TEXTURE_2D,0),v(Ye)&&g(n.TEXTURE_2D)}t.unbindTexture()}else{let je=n.TEXTURE_2D;if((ne.isWebGL3DRenderTarget||ne.isWebGLArrayRenderTarget)&&(je=ne.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(je,ae.__webglTexture),q(je,z),z.mipmaps&&z.mipmaps.length>0)for(let he=0;he<z.mipmaps.length;he++)Z(K.__webglFramebuffer[he],ne,z,n.COLOR_ATTACHMENT0,je,he);else Z(K.__webglFramebuffer,ne,z,n.COLOR_ATTACHMENT0,je,0);v(z)&&g(je),t.unbindTexture()}ne.depthBuffer&&ye(ne)}function H(ne){const z=ne.textures;for(let K=0,ae=z.length;K<ae;K++){const xe=z[K];if(v(xe)){const Le=_(ne),Xe=i.get(xe).__webglTexture;t.bindTexture(Le,Xe),g(Le),t.unbindTexture()}}}const Q=[],j=[];function Pe(ne){if(ne.samples>0){if(De(ne)===!1){const z=ne.textures,K=ne.width,ae=ne.height;let xe=n.COLOR_BUFFER_BIT;const Le=ne.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Xe=i.get(ne),je=z.length>1;if(je)for(let he=0;he<z.length;he++)t.bindFramebuffer(n.FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+he,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Xe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+he,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Xe.__webglFramebuffer);for(let he=0;he<z.length;he++){if(ne.resolveDepthBuffer&&(ne.depthBuffer&&(xe|=n.DEPTH_BUFFER_BIT),ne.stencilBuffer&&ne.resolveStencilBuffer&&(xe|=n.STENCIL_BUFFER_BIT)),je){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Xe.__webglColorRenderbuffer[he]);const Ye=i.get(z[he]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ye,0)}n.blitFramebuffer(0,0,K,ae,0,0,K,ae,xe,n.NEAREST),l===!0&&(Q.length=0,j.length=0,Q.push(n.COLOR_ATTACHMENT0+he),ne.depthBuffer&&ne.resolveDepthBuffer===!1&&(Q.push(Le),j.push(Le),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,j)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Q))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),je)for(let he=0;he<z.length;he++){t.bindFramebuffer(n.FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+he,n.RENDERBUFFER,Xe.__webglColorRenderbuffer[he]);const Ye=i.get(z[he]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Xe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+he,n.TEXTURE_2D,Ye,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Xe.__webglMultisampledFramebuffer)}else if(ne.depthBuffer&&ne.resolveDepthBuffer===!1&&l){const z=ne.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[z])}}}function we(ne){return Math.min(r.maxSamples,ne.samples)}function De(ne){const z=i.get(ne);return ne.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&z.__useRenderToTexture!==!1}function Me(ne){const z=a.render.frame;u.get(ne)!==z&&(u.set(ne,z),ne.update())}function Ae(ne,z){const K=ne.colorSpace,ae=ne.format,xe=ne.type;return ne.isCompressedTexture===!0||ne.isVideoTexture===!0||K!==tg&&K!==rd&&(bi.getTransfer(K)===Di?(ae!==Ys||xe!==tc)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",K)),z}function Fe(ne){return typeof HTMLImageElement<"u"&&ne instanceof HTMLImageElement?(c.width=ne.naturalWidth||ne.width,c.height=ne.naturalHeight||ne.height):typeof VideoFrame<"u"&&ne instanceof VideoFrame?(c.width=ne.displayWidth,c.height=ne.displayHeight):(c.width=ne.width,c.height=ne.height),c}this.allocateTextureUnit=P,this.resetTextureUnits=I,this.setTexture2D=L,this.setTexture2DArray=R,this.setTexture3D=B,this.setTextureCube=k,this.rebindTextures=Te,this.setupRenderTarget=Ee,this.updateRenderTargetMipmap=H,this.updateMultisampleRenderTarget=Pe,this.setupDepthRenderbuffer=ye,this.setupFrameBufferTexture=Z,this.useMultisampledRTT=De}function TZ(n,e){function t(i,r=rd){let s;const a=bi.getTransfer(r);if(i===tc)return n.UNSIGNED_BYTE;if(i===TO)return n.UNSIGNED_SHORT_4_4_4_4;if(i===AO)return n.UNSIGNED_SHORT_5_5_5_1;if(i===eZ)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===ZQ)return n.BYTE;if(i===JQ)return n.SHORT;if(i===Y_)return n.UNSIGNED_SHORT;if(i===MO)return n.INT;if(i===xo)return n.UNSIGNED_INT;if(i===ol)return n.FLOAT;if(i===Hg)return n.HALF_FLOAT;if(i===tZ)return n.ALPHA;if(i===nZ)return n.RGB;if(i===Ys)return n.RGBA;if(i===iZ)return n.LUMINANCE;if(i===rZ)return n.LUMINANCE_ALPHA;if(i===kh)return n.DEPTH_COMPONENT;if(i===eg)return n.DEPTH_STENCIL;if(i===sZ)return n.RED;if(i===QM)return n.RED_INTEGER;if(i===EO)return n.RG;if(i===IO)return n.RG_INTEGER;if(i===fv)return n.RGBA_INTEGER;if(i===X1||i===Y1||i===j1||i===Q1)if(a===Di)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===X1)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Y1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===j1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Q1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===X1)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Y1)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===j1)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Q1)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===XP||i===YP||i===jP||i===QP)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===XP)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===YP)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===jP)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===QP)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===ZP||i===JP||i===eD)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===ZP||i===JP)return a===Di?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===eD)return a===Di?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===tD||i===nD||i===iD||i===rD||i===sD||i===aD||i===oD||i===lD||i===cD||i===uD||i===dD||i===fD||i===hD||i===pD)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===tD)return a===Di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===nD)return a===Di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===iD)return a===Di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===rD)return a===Di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===sD)return a===Di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===aD)return a===Di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===oD)return a===Di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===lD)return a===Di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===cD)return a===Di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===uD)return a===Di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===dD)return a===Di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===fD)return a===Di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===hD)return a===Di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===pD)return a===Di?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Z1||i===mD||i===vD)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Z1)return a===Di?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===mD)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===vD)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===aZ||i===gD||i===yD||i===_D)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Z1)return s.COMPRESSED_RED_RGTC1_EXT;if(i===gD)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===yD)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===_D)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Jv?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const jQe={type:"move"};class S2{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ww,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ww,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ze,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ze),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ww,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ze,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ze),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){a=!0;for(const m of e.hand.values()){const v=t.getJointPose(m,i),g=this._getHandJoint(c,m);v!==null&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=v.radius),g.visible=v!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],f=u.position.distanceTo(d.position),h=.02,p=.005;c.inputState.pinching&&f>h+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=h-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(jQe)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Ww;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const QQe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,ZQe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class JQe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new Zs,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Ga({vertexShader:QQe,fragmentShader:ZQe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new hr(new ig(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class eZe extends fp{constructor(e,t){super();const i=this;let r=null,s=1,a=null,o="local-floor",l=1,c=null,u=null,d=null,f=null,h=null,p=null;const m=new JQe,v=t.getContextAttributes();let g=null,_=null;const y=[],S=[],w=new on;let x=null;const T=new go;T.viewport=new Xi;const C=new go;C.viewport=new Xi;const M=[T,C],A=new wqe;let E=null,I=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Y){let J=y[Y];return J===void 0&&(J=new S2,y[Y]=J),J.getTargetRaySpace()},this.getControllerGrip=function(Y){let J=y[Y];return J===void 0&&(J=new S2,y[Y]=J),J.getGripSpace()},this.getHand=function(Y){let J=y[Y];return J===void 0&&(J=new S2,y[Y]=J),J.getHandSpace()};function P(Y){const J=S.indexOf(Y.inputSource);if(J===-1)return;const Z=y[J];Z!==void 0&&(Z.update(Y.inputSource,Y.frame,c||a),Z.dispatchEvent({type:Y.type,data:Y.inputSource}))}function D(){r.removeEventListener("select",P),r.removeEventListener("selectstart",P),r.removeEventListener("selectend",P),r.removeEventListener("squeeze",P),r.removeEventListener("squeezestart",P),r.removeEventListener("squeezeend",P),r.removeEventListener("end",D),r.removeEventListener("inputsourceschange",L);for(let Y=0;Y<y.length;Y++){const J=S[Y];J!==null&&(S[Y]=null,y[Y].disconnect(J))}E=null,I=null,m.reset(),e.setRenderTarget(g),h=null,f=null,d=null,r=null,_=null,W.stop(),i.isPresenting=!1,e.setPixelRatio(x),e.setSize(w.width,w.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Y){s=Y,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Y){o=Y,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||a},this.setReferenceSpace=function(Y){c=Y},this.getBaseLayer=function(){return f!==null?f:h},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(Y){if(r=Y,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",P),r.addEventListener("selectstart",P),r.addEventListener("selectend",P),r.addEventListener("squeeze",P),r.addEventListener("squeezestart",P),r.addEventListener("squeezeend",P),r.addEventListener("end",D),r.addEventListener("inputsourceschange",L),v.xrCompatible!==!0&&await t.makeXRCompatible(),x=e.getPixelRatio(),e.getSize(w),r.renderState.layers===void 0){const J={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(r,t,J),r.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),_=new Yd(h.framebufferWidth,h.framebufferHeight,{format:Ys,type:tc,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let J=null,Z=null,ee=null;v.depth&&(ee=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,J=v.stencil?eg:kh,Z=v.stencil?Jv:xo);const me={colorFormat:t.RGBA8,depthFormat:ee,scaleFactor:s};d=new XRWebGLBinding(r,t),f=d.createProjectionLayer(me),r.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),_=new Yd(f.textureWidth,f.textureHeight,{format:Ys,type:tc,depthTexture:new DO(f.textureWidth,f.textureHeight,Z,void 0,void 0,void 0,void 0,void 0,void 0,J),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,a=await r.requestReferenceSpace(o),W.setContext(r),W.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};function L(Y){for(let J=0;J<Y.removed.length;J++){const Z=Y.removed[J],ee=S.indexOf(Z);ee>=0&&(S[ee]=null,y[ee].disconnect(Z))}for(let J=0;J<Y.added.length;J++){const Z=Y.added[J];let ee=S.indexOf(Z);if(ee===-1){for(let ye=0;ye<y.length;ye++)if(ye>=S.length){S.push(Z),ee=ye;break}else if(S[ye]===null){S[ye]=Z,ee=ye;break}if(ee===-1)break}const me=y[ee];me&&me.connect(Z)}}const R=new ze,B=new ze;function k(Y,J,Z){R.setFromMatrixPosition(J.matrixWorld),B.setFromMatrixPosition(Z.matrixWorld);const ee=R.distanceTo(B),me=J.projectionMatrix.elements,ye=Z.projectionMatrix.elements,Te=me[14]/(me[10]-1),Ee=me[14]/(me[10]+1),H=(me[9]+1)/me[5],Q=(me[9]-1)/me[5],j=(me[8]-1)/me[0],Pe=(ye[8]+1)/ye[0],we=Te*j,De=Te*Pe,Me=ee/(-j+Pe),Ae=Me*-j;if(J.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Y.translateX(Ae),Y.translateZ(Me),Y.matrixWorld.compose(Y.position,Y.quaternion,Y.scale),Y.matrixWorldInverse.copy(Y.matrixWorld).invert(),me[10]===-1)Y.projectionMatrix.copy(J.projectionMatrix),Y.projectionMatrixInverse.copy(J.projectionMatrixInverse);else{const Fe=Te+Me,ne=Ee+Me,z=we-Ae,K=De+(ee-Ae),ae=H*Ee/ne*Fe,xe=Q*Ee/ne*Fe;Y.projectionMatrix.makePerspective(z,K,ae,xe,Fe,ne),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert()}}function O(Y,J){J===null?Y.matrixWorld.copy(Y.matrix):Y.matrixWorld.multiplyMatrices(J.matrixWorld,Y.matrix),Y.matrixWorldInverse.copy(Y.matrixWorld).invert()}this.updateCamera=function(Y){if(r===null)return;let J=Y.near,Z=Y.far;m.texture!==null&&(m.depthNear>0&&(J=m.depthNear),m.depthFar>0&&(Z=m.depthFar)),A.near=C.near=T.near=J,A.far=C.far=T.far=Z,(E!==A.near||I!==A.far)&&(r.updateRenderState({depthNear:A.near,depthFar:A.far}),E=A.near,I=A.far),T.layers.mask=Y.layers.mask|2,C.layers.mask=Y.layers.mask|4,A.layers.mask=T.layers.mask|C.layers.mask;const ee=Y.parent,me=A.cameras;O(A,ee);for(let ye=0;ye<me.length;ye++)O(me[ye],ee);me.length===2?k(A,T,C):A.projectionMatrix.copy(T.projectionMatrix),U(Y,A,ee)};function U(Y,J,Z){Z===null?Y.matrix.copy(J.matrixWorld):(Y.matrix.copy(Z.matrixWorld),Y.matrix.invert(),Y.matrix.multiply(J.matrixWorld)),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.updateMatrixWorld(!0),Y.projectionMatrix.copy(J.projectionMatrix),Y.projectionMatrixInverse.copy(J.projectionMatrixInverse),Y.isPerspectiveCamera&&(Y.fov=j_*2*Math.atan(1/Y.projectionMatrix.elements[5]),Y.zoom=1)}this.getCamera=function(){return A},this.getFoveation=function(){if(!(f===null&&h===null))return l},this.setFoveation=function(Y){l=Y,f!==null&&(f.fixedFoveation=Y),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=Y)},this.hasDepthSensing=function(){return m.texture!==null},this.getDepthSensingMesh=function(){return m.getMesh(A)};let G=null;function q(Y,J){if(u=J.getViewerPose(c||a),p=J,u!==null){const Z=u.views;h!==null&&(e.setRenderTargetFramebuffer(_,h.framebuffer),e.setRenderTarget(_));let ee=!1;Z.length!==A.cameras.length&&(A.cameras.length=0,ee=!0);for(let ye=0;ye<Z.length;ye++){const Te=Z[ye];let Ee=null;if(h!==null)Ee=h.getViewport(Te);else{const Q=d.getViewSubImage(f,Te);Ee=Q.viewport,ye===0&&(e.setRenderTargetTextures(_,Q.colorTexture,f.ignoreDepthValues?void 0:Q.depthStencilTexture),e.setRenderTarget(_))}let H=M[ye];H===void 0&&(H=new go,H.layers.enable(ye),H.viewport=new Xi,M[ye]=H),H.matrix.fromArray(Te.transform.matrix),H.matrix.decompose(H.position,H.quaternion,H.scale),H.projectionMatrix.fromArray(Te.projectionMatrix),H.projectionMatrixInverse.copy(H.projectionMatrix).invert(),H.viewport.set(Ee.x,Ee.y,Ee.width,Ee.height),ye===0&&(A.matrix.copy(H.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),ee===!0&&A.cameras.push(H)}const me=r.enabledFeatures;if(me&&me.includes("depth-sensing")){const ye=d.getDepthInformation(Z[0]);ye&&ye.isValid&&ye.texture&&m.init(e,ye,r.renderState)}}for(let Z=0;Z<y.length;Z++){const ee=S[Z],me=y[Z];ee!==null&&me!==void 0&&me.update(ee,J,c||a)}G&&G(Y,J),J.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:J}),p=null}const W=new SZ;W.setAnimationLoop(q),this.setAnimationLoop=function(Y){G=Y},this.dispose=function(){}}}const Uf=new ou,tZe=new In;function nZe(n,e){function t(v,g){v.matrixAutoUpdate===!0&&v.updateMatrix(),g.value.copy(v.matrix)}function i(v,g){g.color.getRGB(v.fogColor.value,gZ(n)),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)}function r(v,g,_,y,S){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(v,g):g.isMeshToonMaterial?(s(v,g),d(v,g)):g.isMeshPhongMaterial?(s(v,g),u(v,g)):g.isMeshStandardMaterial?(s(v,g),f(v,g),g.isMeshPhysicalMaterial&&h(v,g,S)):g.isMeshMatcapMaterial?(s(v,g),p(v,g)):g.isMeshDepthMaterial?s(v,g):g.isMeshDistanceMaterial?(s(v,g),m(v,g)):g.isMeshNormalMaterial?s(v,g):g.isLineBasicMaterial?(a(v,g),g.isLineDashedMaterial&&o(v,g)):g.isPointsMaterial?l(v,g,_,y):g.isSpriteMaterial?c(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map,t(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.bumpMap&&(v.bumpMap.value=g.bumpMap,t(g.bumpMap,v.bumpMapTransform),v.bumpScale.value=g.bumpScale,g.side===ba&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,t(g.normalMap,v.normalMapTransform),v.normalScale.value.copy(g.normalScale),g.side===ba&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,t(g.displacementMap,v.displacementMapTransform),v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,v.emissiveMapTransform)),g.specularMap&&(v.specularMap.value=g.specularMap,t(g.specularMap,v.specularMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);const _=e.get(g),y=_.envMap,S=_.envMapRotation;y&&(v.envMap.value=y,Uf.copy(S),Uf.x*=-1,Uf.y*=-1,Uf.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(Uf.y*=-1,Uf.z*=-1),v.envMapRotation.value.setFromMatrix4(tZe.makeRotationFromEuler(Uf)),v.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=g.reflectivity,v.ior.value=g.ior,v.refractionRatio.value=g.refractionRatio),g.lightMap&&(v.lightMap.value=g.lightMap,v.lightMapIntensity.value=g.lightMapIntensity,t(g.lightMap,v.lightMapTransform)),g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,v.aoMapTransform))}function a(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,g.map&&(v.map.value=g.map,t(g.map,v.mapTransform))}function o(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}function l(v,g,_,y){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*_,v.scale.value=y*.5,g.map&&(v.map.value=g.map,t(g.map,v.uvTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function c(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map,t(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}function u(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4)}function d(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap)}function f(v,g){v.metalness.value=g.metalness,g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,v.metalnessMapTransform)),v.roughness.value=g.roughness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,v.roughnessMapTransform)),g.envMap&&(v.envMapIntensity.value=g.envMapIntensity)}function h(v,g,_){v.ior.value=g.ior,g.sheen>0&&(v.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),v.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(v.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,v.sheenColorMapTransform)),g.sheenRoughnessMap&&(v.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,v.sheenRoughnessMapTransform))),g.clearcoat>0&&(v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,v.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(v.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===ba&&v.clearcoatNormalScale.value.negate())),g.dispersion>0&&(v.dispersion.value=g.dispersion),g.iridescence>0&&(v.iridescence.value=g.iridescence,v.iridescenceIOR.value=g.iridescenceIOR,v.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(v.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,v.iridescenceMapTransform)),g.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),g.transmission>0&&(v.transmission.value=g.transmission,v.transmissionSamplerMap.value=_.texture,v.transmissionSamplerSize.value.set(_.width,_.height),g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,v.transmissionMapTransform)),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=g.attenuationDistance,v.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(v.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(v.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=g.specularIntensity,v.specularColor.value.copy(g.specularColor),g.specularColorMap&&(v.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,v.specularColorMapTransform)),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,v.specularIntensityMapTransform))}function p(v,g){g.matcap&&(v.matcap.value=g.matcap)}function m(v,g){const _=e.get(g).light;v.referencePosition.value.setFromMatrixPosition(_.matrixWorld),v.nearDistance.value=_.shadow.camera.near,v.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function iZe(n,e,t,i){let r={},s={},a=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,y){const S=y.program;i.uniformBlockBinding(_,S)}function c(_,y){let S=r[_.id];S===void 0&&(p(_),S=u(_),r[_.id]=S,_.addEventListener("dispose",v));const w=y.program;i.updateUBOMapping(_,w);const x=e.render.frame;s[_.id]!==x&&(f(_),s[_.id]=x)}function u(_){const y=d();_.__bindingPointIndex=y;const S=n.createBuffer(),w=_.__size,x=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,S),n.bufferData(n.UNIFORM_BUFFER,w,x),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,y,S),S}function d(){for(let _=0;_<o;_++)if(a.indexOf(_)===-1)return a.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(_){const y=r[_.id],S=_.uniforms,w=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,y);for(let x=0,T=S.length;x<T;x++){const C=Array.isArray(S[x])?S[x]:[S[x]];for(let M=0,A=C.length;M<A;M++){const E=C[M];if(h(E,x,M,w)===!0){const I=E.__offset,P=Array.isArray(E.value)?E.value:[E.value];let D=0;for(let L=0;L<P.length;L++){const R=P[L],B=m(R);typeof R=="number"||typeof R=="boolean"?(E.__data[0]=R,n.bufferSubData(n.UNIFORM_BUFFER,I+D,E.__data)):R.isMatrix3?(E.__data[0]=R.elements[0],E.__data[1]=R.elements[1],E.__data[2]=R.elements[2],E.__data[3]=0,E.__data[4]=R.elements[3],E.__data[5]=R.elements[4],E.__data[6]=R.elements[5],E.__data[7]=0,E.__data[8]=R.elements[6],E.__data[9]=R.elements[7],E.__data[10]=R.elements[8],E.__data[11]=0):(R.toArray(E.__data,D),D+=B.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,I,E.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function h(_,y,S,w){const x=_.value,T=y+"_"+S;if(w[T]===void 0)return typeof x=="number"||typeof x=="boolean"?w[T]=x:w[T]=x.clone(),!0;{const C=w[T];if(typeof x=="number"||typeof x=="boolean"){if(C!==x)return w[T]=x,!0}else if(C.equals(x)===!1)return C.copy(x),!0}return!1}function p(_){const y=_.uniforms;let S=0;const w=16;for(let T=0,C=y.length;T<C;T++){const M=Array.isArray(y[T])?y[T]:[y[T]];for(let A=0,E=M.length;A<E;A++){const I=M[A],P=Array.isArray(I.value)?I.value:[I.value];for(let D=0,L=P.length;D<L;D++){const R=P[D],B=m(R),k=S%w,O=k%B.boundary,U=k+O;S+=O,U!==0&&w-U<B.storage&&(S+=w-U),I.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),I.__offset=S,S+=B.storage}}}const x=S%w;return x>0&&(S+=w-x),_.__size=S,_.__cache={},this}function m(_){const y={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(y.boundary=4,y.storage=4):_.isVector2?(y.boundary=8,y.storage=8):_.isVector3||_.isColor?(y.boundary=16,y.storage=12):_.isVector4?(y.boundary=16,y.storage=16):_.isMatrix3?(y.boundary=48,y.storage=48):_.isMatrix4?(y.boundary=64,y.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),y}function v(_){const y=_.target;y.removeEventListener("dispose",v);const S=a.indexOf(y.__bindingPointIndex);a.splice(S,1),n.deleteBuffer(r[y.id]),delete r[y.id],delete s[y.id]}function g(){for(const _ in r)n.deleteBuffer(r[_]);a=[],r={},s={}}return{bind:l,update:c,dispose:g}}class rZe{constructor(e={}){const{canvas:t=UKe(),context:i=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let h;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=i.getContextAttributes().alpha}else h=a;const p=new Uint32Array(4),m=new Int32Array(4);let v=null,g=null;const _=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=uo,this.toneMapping=Md,this.toneMappingExposure=1;const S=this;let w=!1,x=0,T=0,C=null,M=-1,A=null;const E=new Xi,I=new Xi;let P=null;const D=new Si(0);let L=0,R=t.width,B=t.height,k=1,O=null,U=null;const G=new Xi(0,0,R,B),q=new Xi(0,0,R,B);let W=!1;const Y=new bZ;let J=!1,Z=!1;const ee=new In,me=new In,ye=new ze,Te=new Xi,Ee={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let H=!1;function Q(){return C===null?k:1}let j=i;function Pe(_e,Qe){return t.getContext(_e,Qe)}try{const _e={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${CO}`),t.addEventListener("webglcontextlost",et,!1),t.addEventListener("webglcontextrestored",ht,!1),t.addEventListener("webglcontextcreationerror",st,!1),j===null){const Qe="webgl2";if(j=Pe(Qe,_e),j===null)throw Pe(Qe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(_e){throw console.error("THREE.WebGLRenderer: "+_e.message),_e}let we,De,Me,Ae,Fe,ne,z,K,ae,xe,Le,Xe,je,he,Ye,Ke,V,re,te,pe,se,de,qe,fe;function Je(){we=new pje(j),we.init(),de=new TZ(j,we),De=new lje(j,we,e,de),Me=new XQe(j,we),De.reverseDepthBuffer&&f&&Me.buffers.depth.setReversed(!0),Ae=new gje(j),Fe=new OQe,ne=new YQe(j,we,Me,Fe,De,de,Ae),z=new uje(S),K=new hje(S),ae=new Cqe(j),qe=new aje(j,ae),xe=new mje(j,ae,Ae,qe),Le=new _je(j,xe,ae,Ae),te=new yje(j,De,ne),Ke=new cje(Fe),Xe=new kQe(S,z,K,we,De,qe,Ke),je=new nZe(S,Fe),he=new BQe,Ye=new $Qe(we),re=new sje(S,z,K,Me,Le,h,l),V=new KQe(S,Le,De),fe=new iZe(j,Ae,De,Me),pe=new oje(j,we,Ae),se=new vje(j,we,Ae),Ae.programs=Xe.programs,S.capabilities=De,S.extensions=we,S.properties=Fe,S.renderLists=he,S.shadowMap=V,S.state=Me,S.info=Ae}Je();const $e=new eZe(S,j);this.xr=$e,this.getContext=function(){return j},this.getContextAttributes=function(){return j.getContextAttributes()},this.forceContextLoss=function(){const _e=we.get("WEBGL_lose_context");_e&&_e.loseContext()},this.forceContextRestore=function(){const _e=we.get("WEBGL_lose_context");_e&&_e.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(_e){_e!==void 0&&(k=_e,this.setSize(R,B,!1))},this.getSize=function(_e){return _e.set(R,B)},this.setSize=function(_e,Qe,Ie=!0){if($e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}R=_e,B=Qe,t.width=Math.floor(_e*k),t.height=Math.floor(Qe*k),Ie===!0&&(t.style.width=_e+"px",t.style.height=Qe+"px"),this.setViewport(0,0,_e,Qe)},this.getDrawingBufferSize=function(_e){return _e.set(R*k,B*k).floor()},this.setDrawingBufferSize=function(_e,Qe,Ie){R=_e,B=Qe,k=Ie,t.width=Math.floor(_e*Ie),t.height=Math.floor(Qe*Ie),this.setViewport(0,0,_e,Qe)},this.getCurrentViewport=function(_e){return _e.copy(E)},this.getViewport=function(_e){return _e.copy(G)},this.setViewport=function(_e,Qe,Ie,Ge){_e.isVector4?G.set(_e.x,_e.y,_e.z,_e.w):G.set(_e,Qe,Ie,Ge),Me.viewport(E.copy(G).multiplyScalar(k).round())},this.getScissor=function(_e){return _e.copy(q)},this.setScissor=function(_e,Qe,Ie,Ge){_e.isVector4?q.set(_e.x,_e.y,_e.z,_e.w):q.set(_e,Qe,Ie,Ge),Me.scissor(I.copy(q).multiplyScalar(k).round())},this.getScissorTest=function(){return W},this.setScissorTest=function(_e){Me.setScissorTest(W=_e)},this.setOpaqueSort=function(_e){O=_e},this.setTransparentSort=function(_e){U=_e},this.getClearColor=function(_e){return _e.copy(re.getClearColor())},this.setClearColor=function(){re.setClearColor.apply(re,arguments)},this.getClearAlpha=function(){return re.getClearAlpha()},this.setClearAlpha=function(){re.setClearAlpha.apply(re,arguments)},this.clear=function(_e=!0,Qe=!0,Ie=!0){let Ge=0;if(_e){let Ve=!1;if(C!==null){const it=C.texture.format;Ve=it===fv||it===IO||it===QM}if(Ve){const it=C.texture.type,It=it===tc||it===xo||it===Y_||it===Jv||it===TO||it===AO,Et=re.getClearColor(),Ut=re.getClearAlpha(),pn=Et.r,_n=Et.g,dn=Et.b;It?(p[0]=pn,p[1]=_n,p[2]=dn,p[3]=Ut,j.clearBufferuiv(j.COLOR,0,p)):(m[0]=pn,m[1]=_n,m[2]=dn,m[3]=Ut,j.clearBufferiv(j.COLOR,0,m))}else Ge|=j.COLOR_BUFFER_BIT}Qe&&(Ge|=j.DEPTH_BUFFER_BIT),Ie&&(Ge|=j.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),j.clear(Ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",et,!1),t.removeEventListener("webglcontextrestored",ht,!1),t.removeEventListener("webglcontextcreationerror",st,!1),re.dispose(),he.dispose(),Ye.dispose(),Fe.dispose(),z.dispose(),K.dispose(),Le.dispose(),qe.dispose(),fe.dispose(),Xe.dispose(),$e.dispose(),$e.removeEventListener("sessionstart",Xa),$e.removeEventListener("sessionend",_l),Gr.stop()};function et(_e){_e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function ht(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const _e=Ae.autoReset,Qe=V.enabled,Ie=V.autoUpdate,Ge=V.needsUpdate,Ve=V.type;Je(),Ae.autoReset=_e,V.enabled=Qe,V.autoUpdate=Ie,V.needsUpdate=Ge,V.type=Ve}function st(_e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",_e.statusMessage)}function Rt(_e){const Qe=_e.target;Qe.removeEventListener("dispose",Rt),Vt(Qe)}function Vt(_e){Pn(_e),Fe.remove(_e)}function Pn(_e){const Qe=Fe.get(_e).programs;Qe!==void 0&&(Qe.forEach(function(Ie){Xe.releaseProgram(Ie)}),_e.isShaderMaterial&&Xe.releaseShaderCache(_e))}this.renderBufferDirect=function(_e,Qe,Ie,Ge,Ve,it){Qe===null&&(Qe=Ee);const It=Ve.isMesh&&Ve.matrixWorld.determinant()<0,Et=tn(_e,Qe,Ie,Ge,Ve);Me.setMaterial(Ge,It);let Ut=Ie.index,pn=1;if(Ge.wireframe===!0){if(Ut=xe.getWireframeAttribute(Ie),Ut===void 0)return;pn=2}const _n=Ie.drawRange,dn=Ie.attributes.position;let bn=_n.start*pn,Bn=(_n.start+_n.count)*pn;it!==null&&(bn=Math.max(bn,it.start*pn),Bn=Math.min(Bn,(it.start+it.count)*pn)),Ut!==null?(bn=Math.max(bn,0),Bn=Math.min(Bn,Ut.count)):dn!=null&&(bn=Math.max(bn,0),Bn=Math.min(Bn,dn.count));const Ni=Bn-bn;if(Ni<0||Ni===1/0)return;qe.setup(Ve,Ge,Et,Ie,Ut);let $n,qn=pe;if(Ut!==null&&($n=ae.get(Ut),qn=se,qn.setIndex($n)),Ve.isMesh)Ge.wireframe===!0?(Me.setLineWidth(Ge.wireframeLinewidth*Q()),qn.setMode(j.LINES)):qn.setMode(j.TRIANGLES);else if(Ve.isLine){let mn=Ge.linewidth;mn===void 0&&(mn=1),Me.setLineWidth(mn*Q()),Ve.isLineSegments?qn.setMode(j.LINES):Ve.isLineLoop?qn.setMode(j.LINE_LOOP):qn.setMode(j.LINE_STRIP)}else Ve.isPoints?qn.setMode(j.POINTS):Ve.isSprite&&qn.setMode(j.TRIANGLES);if(Ve.isBatchedMesh)if(Ve._multiDrawInstances!==null)qn.renderMultiDrawInstances(Ve._multiDrawStarts,Ve._multiDrawCounts,Ve._multiDrawCount,Ve._multiDrawInstances);else if(we.get("WEBGL_multi_draw"))qn.renderMultiDraw(Ve._multiDrawStarts,Ve._multiDrawCounts,Ve._multiDrawCount);else{const mn=Ve._multiDrawStarts,ir=Ve._multiDrawCounts,gi=Ve._multiDrawCount,Ma=Ut?ae.get(Ut).bytesPerElement:1,uc=Fe.get(Ge).currentProgram.getUniforms();for(let mi=0;mi<gi;mi++)uc.setValue(j,"_gl_DrawID",mi),qn.render(mn[mi]/Ma,ir[mi])}else if(Ve.isInstancedMesh)qn.renderInstances(bn,Ni,Ve.count);else if(Ie.isInstancedBufferGeometry){const mn=Ie._maxInstanceCount!==void 0?Ie._maxInstanceCount:1/0,ir=Math.min(Ie.instanceCount,mn);qn.renderInstances(bn,Ni,ir)}else qn.render(bn,Ni)};function Jt(_e,Qe,Ie){_e.transparent===!0&&_e.side===yo&&_e.forceSinglePass===!1?(_e.side=ba,_e.needsUpdate=!0,Ue(_e,Qe,Ie),_e.side=ec,_e.needsUpdate=!0,Ue(_e,Qe,Ie),_e.side=yo):Ue(_e,Qe,Ie)}this.compile=function(_e,Qe,Ie=null){Ie===null&&(Ie=_e),g=Ye.get(Ie),g.init(Qe),y.push(g),Ie.traverseVisible(function(Ve){Ve.isLight&&Ve.layers.test(Qe.layers)&&(g.pushLight(Ve),Ve.castShadow&&g.pushShadow(Ve))}),_e!==Ie&&_e.traverseVisible(function(Ve){Ve.isLight&&Ve.layers.test(Qe.layers)&&(g.pushLight(Ve),Ve.castShadow&&g.pushShadow(Ve))}),g.setupLights();const Ge=new Set;return _e.traverse(function(Ve){if(!(Ve.isMesh||Ve.isPoints||Ve.isLine||Ve.isSprite))return;const it=Ve.material;if(it)if(Array.isArray(it))for(let It=0;It<it.length;It++){const Et=it[It];Jt(Et,Ie,Ve),Ge.add(Et)}else Jt(it,Ie,Ve),Ge.add(it)}),y.pop(),g=null,Ge},this.compileAsync=function(_e,Qe,Ie=null){const Ge=this.compile(_e,Qe,Ie);return new Promise(Ve=>{function it(){if(Ge.forEach(function(It){Fe.get(It).currentProgram.isReady()&&Ge.delete(It)}),Ge.size===0){Ve(_e);return}setTimeout(it,10)}we.get("KHR_parallel_shader_compile")!==null?it():setTimeout(it,10)})};let Ai=null;function pi(_e){Ai&&Ai(_e)}function Xa(){Gr.stop()}function _l(){Gr.start()}const Gr=new SZ;Gr.setAnimationLoop(pi),typeof self<"u"&&Gr.setContext(self),this.setAnimationLoop=function(_e){Ai=_e,$e.setAnimationLoop(_e),_e===null?Gr.stop():Gr.start()},$e.addEventListener("sessionstart",Xa),$e.addEventListener("sessionend",_l),this.render=function(_e,Qe){if(Qe!==void 0&&Qe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;if(_e.matrixWorldAutoUpdate===!0&&_e.updateMatrixWorld(),Qe.parent===null&&Qe.matrixWorldAutoUpdate===!0&&Qe.updateMatrixWorld(),$e.enabled===!0&&$e.isPresenting===!0&&($e.cameraAutoUpdate===!0&&$e.updateCamera(Qe),Qe=$e.getCamera()),_e.isScene===!0&&_e.onBeforeRender(S,_e,Qe,C),g=Ye.get(_e,y.length),g.init(Qe),y.push(g),me.multiplyMatrices(Qe.projectionMatrix,Qe.matrixWorldInverse),Y.setFromProjectionMatrix(me),Z=this.localClippingEnabled,J=Ke.init(this.clippingPlanes,Z),v=he.get(_e,_.length),v.init(),_.push(v),$e.enabled===!0&&$e.isPresenting===!0){const it=S.xr.getDepthSensingMesh();it!==null&&Ya(it,Qe,-1/0,S.sortObjects)}Ya(_e,Qe,0,S.sortObjects),v.finish(),S.sortObjects===!0&&v.sort(O,U),H=$e.enabled===!1||$e.isPresenting===!1||$e.hasDepthSensing()===!1,H&&re.addToRenderList(v,_e),this.info.render.frame++,J===!0&&Ke.beginShadows();const Ie=g.state.shadowsArray;V.render(Ie,_e,Qe),J===!0&&Ke.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ge=v.opaque,Ve=v.transmissive;if(g.setupLights(),Qe.isArrayCamera){const it=Qe.cameras;if(Ve.length>0)for(let It=0,Et=it.length;It<Et;It++){const Ut=it[It];lt(Ge,Ve,_e,Ut)}H&&re.render(_e);for(let It=0,Et=it.length;It<Et;It++){const Ut=it[It];Oe(v,_e,Ut,Ut.viewport)}}else Ve.length>0&&lt(Ge,Ve,_e,Qe),H&&re.render(_e),Oe(v,_e,Qe);C!==null&&(ne.updateMultisampleRenderTarget(C),ne.updateRenderTargetMipmap(C)),_e.isScene===!0&&_e.onAfterRender(S,_e,Qe),qe.resetDefaultState(),M=-1,A=null,y.pop(),y.length>0?(g=y[y.length-1],J===!0&&Ke.setGlobalState(S.clippingPlanes,g.state.camera)):g=null,_.pop(),_.length>0?v=_[_.length-1]:v=null};function Ya(_e,Qe,Ie,Ge){if(_e.visible===!1)return;if(_e.layers.test(Qe.layers)){if(_e.isGroup)Ie=_e.renderOrder;else if(_e.isLOD)_e.autoUpdate===!0&&_e.update(Qe);else if(_e.isLight)g.pushLight(_e),_e.castShadow&&g.pushShadow(_e);else if(_e.isSprite){if(!_e.frustumCulled||Y.intersectsSprite(_e)){Ge&&Te.setFromMatrixPosition(_e.matrixWorld).applyMatrix4(me);const It=Le.update(_e),Et=_e.material;Et.visible&&v.push(_e,It,Et,Ie,Te.z,null)}}else if((_e.isMesh||_e.isLine||_e.isPoints)&&(!_e.frustumCulled||Y.intersectsObject(_e))){const It=Le.update(_e),Et=_e.material;if(Ge&&(_e.boundingSphere!==void 0?(_e.boundingSphere===null&&_e.computeBoundingSphere(),Te.copy(_e.boundingSphere.center)):(It.boundingSphere===null&&It.computeBoundingSphere(),Te.copy(It.boundingSphere.center)),Te.applyMatrix4(_e.matrixWorld).applyMatrix4(me)),Array.isArray(Et)){const Ut=It.groups;for(let pn=0,_n=Ut.length;pn<_n;pn++){const dn=Ut[pn],bn=Et[dn.materialIndex];bn&&bn.visible&&v.push(_e,It,bn,Ie,Te.z,dn)}}else Et.visible&&v.push(_e,It,Et,Ie,Te.z,null)}}const it=_e.children;for(let It=0,Et=it.length;It<Et;It++)Ya(it[It],Qe,Ie,Ge)}function Oe(_e,Qe,Ie,Ge){const Ve=_e.opaque,it=_e.transmissive,It=_e.transparent;g.setupLightsView(Ie),J===!0&&Ke.setGlobalState(S.clippingPlanes,Ie),Ge&&Me.viewport(E.copy(Ge)),Ve.length>0&&dt(Ve,Qe,Ie),it.length>0&&dt(it,Qe,Ie),It.length>0&&dt(It,Qe,Ie),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function lt(_e,Qe,Ie,Ge){if((Ie.isScene===!0?Ie.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[Ge.id]===void 0&&(g.state.transmissionRenderTarget[Ge.id]=new Yd(1,1,{generateMipmaps:!0,type:we.has("EXT_color_buffer_half_float")||we.has("EXT_color_buffer_float")?Hg:tc,minFilter:_h,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:bi.workingColorSpace}));const it=g.state.transmissionRenderTarget[Ge.id],It=Ge.viewport||E;it.setSize(It.z,It.w);const Et=S.getRenderTarget();S.setRenderTarget(it),S.getClearColor(D),L=S.getClearAlpha(),L<1&&S.setClearColor(16777215,.5),S.clear(),H&&re.render(Ie);const Ut=S.toneMapping;S.toneMapping=Md;const pn=Ge.viewport;if(Ge.viewport!==void 0&&(Ge.viewport=void 0),g.setupLightsView(Ge),J===!0&&Ke.setGlobalState(S.clippingPlanes,Ge),dt(_e,Ie,Ge),ne.updateMultisampleRenderTarget(it),ne.updateRenderTargetMipmap(it),we.has("WEBGL_multisampled_render_to_texture")===!1){let _n=!1;for(let dn=0,bn=Qe.length;dn<bn;dn++){const Bn=Qe[dn],Ni=Bn.object,$n=Bn.geometry,qn=Bn.material,mn=Bn.group;if(qn.side===yo&&Ni.layers.test(Ge.layers)){const ir=qn.side;qn.side=ba,qn.needsUpdate=!0,ct(Ni,Ie,Ge,$n,qn,mn),qn.side=ir,qn.needsUpdate=!0,_n=!0}}_n===!0&&(ne.updateMultisampleRenderTarget(it),ne.updateRenderTargetMipmap(it))}S.setRenderTarget(Et),S.setClearColor(D,L),pn!==void 0&&(Ge.viewport=pn),S.toneMapping=Ut}function dt(_e,Qe,Ie){const Ge=Qe.isScene===!0?Qe.overrideMaterial:null;for(let Ve=0,it=_e.length;Ve<it;Ve++){const It=_e[Ve],Et=It.object,Ut=It.geometry,pn=Ge===null?It.material:Ge,_n=It.group;Et.layers.test(Ie.layers)&&ct(Et,Qe,Ie,Ut,pn,_n)}}function ct(_e,Qe,Ie,Ge,Ve,it){_e.onBeforeRender(S,Qe,Ie,Ge,Ve,it),_e.modelViewMatrix.multiplyMatrices(Ie.matrixWorldInverse,_e.matrixWorld),_e.normalMatrix.getNormalMatrix(_e.modelViewMatrix),Ve.onBeforeRender(S,Qe,Ie,Ge,_e,it),Ve.transparent===!0&&Ve.side===yo&&Ve.forceSinglePass===!1?(Ve.side=ba,Ve.needsUpdate=!0,S.renderBufferDirect(Ie,Qe,Ge,Ve,_e,it),Ve.side=ec,Ve.needsUpdate=!0,S.renderBufferDirect(Ie,Qe,Ge,Ve,_e,it),Ve.side=yo):S.renderBufferDirect(Ie,Qe,Ge,Ve,_e,it),_e.onAfterRender(S,Qe,Ie,Ge,Ve,it)}function Ue(_e,Qe,Ie){Qe.isScene!==!0&&(Qe=Ee);const Ge=Fe.get(_e),Ve=g.state.lights,it=g.state.shadowsArray,It=Ve.state.version,Et=Xe.getParameters(_e,Ve.state,it,Qe,Ie),Ut=Xe.getProgramCacheKey(Et);let pn=Ge.programs;Ge.environment=_e.isMeshStandardMaterial?Qe.environment:null,Ge.fog=Qe.fog,Ge.envMap=(_e.isMeshStandardMaterial?K:z).get(_e.envMap||Ge.environment),Ge.envMapRotation=Ge.environment!==null&&_e.envMap===null?Qe.environmentRotation:_e.envMapRotation,pn===void 0&&(_e.addEventListener("dispose",Rt),pn=new Map,Ge.programs=pn);let _n=pn.get(Ut);if(_n!==void 0){if(Ge.currentProgram===_n&&Ge.lightsStateVersion===It)return Lt(_e,Et),_n}else Et.uniforms=Xe.getUniforms(_e),_e.onBeforeCompile(Et,S),_n=Xe.acquireProgram(Et,Ut),pn.set(Ut,_n),Ge.uniforms=Et.uniforms;const dn=Ge.uniforms;return(!_e.isShaderMaterial&&!_e.isRawShaderMaterial||_e.clipping===!0)&&(dn.clippingPlanes=Ke.uniform),Lt(_e,Et),Ge.needsLights=Fn(_e),Ge.lightsStateVersion=It,Ge.needsLights&&(dn.ambientLightColor.value=Ve.state.ambient,dn.lightProbe.value=Ve.state.probe,dn.directionalLights.value=Ve.state.directional,dn.directionalLightShadows.value=Ve.state.directionalShadow,dn.spotLights.value=Ve.state.spot,dn.spotLightShadows.value=Ve.state.spotShadow,dn.rectAreaLights.value=Ve.state.rectArea,dn.ltc_1.value=Ve.state.rectAreaLTC1,dn.ltc_2.value=Ve.state.rectAreaLTC2,dn.pointLights.value=Ve.state.point,dn.pointLightShadows.value=Ve.state.pointShadow,dn.hemisphereLights.value=Ve.state.hemi,dn.directionalShadowMap.value=Ve.state.directionalShadowMap,dn.directionalShadowMatrix.value=Ve.state.directionalShadowMatrix,dn.spotShadowMap.value=Ve.state.spotShadowMap,dn.spotLightMatrix.value=Ve.state.spotLightMatrix,dn.spotLightMap.value=Ve.state.spotLightMap,dn.pointShadowMap.value=Ve.state.pointShadowMap,dn.pointShadowMatrix.value=Ve.state.pointShadowMatrix),Ge.currentProgram=_n,Ge.uniformsList=null,_n}function pt(_e){if(_e.uniformsList===null){const Qe=_e.currentProgram.getUniforms();_e.uniformsList=J1.seqWithValue(Qe.seq,_e.uniforms)}return _e.uniformsList}function Lt(_e,Qe){const Ie=Fe.get(_e);Ie.outputColorSpace=Qe.outputColorSpace,Ie.batching=Qe.batching,Ie.batchingColor=Qe.batchingColor,Ie.instancing=Qe.instancing,Ie.instancingColor=Qe.instancingColor,Ie.instancingMorph=Qe.instancingMorph,Ie.skinning=Qe.skinning,Ie.morphTargets=Qe.morphTargets,Ie.morphNormals=Qe.morphNormals,Ie.morphColors=Qe.morphColors,Ie.morphTargetsCount=Qe.morphTargetsCount,Ie.numClippingPlanes=Qe.numClippingPlanes,Ie.numIntersection=Qe.numClipIntersection,Ie.vertexAlphas=Qe.vertexAlphas,Ie.vertexTangents=Qe.vertexTangents,Ie.toneMapping=Qe.toneMapping}function tn(_e,Qe,Ie,Ge,Ve){Qe.isScene!==!0&&(Qe=Ee),ne.resetTextureUnits();const it=Qe.fog,It=Ge.isMeshStandardMaterial?Qe.environment:null,Et=C===null?S.outputColorSpace:C.isXRRenderTarget===!0?C.texture.colorSpace:tg,Ut=(Ge.isMeshStandardMaterial?K:z).get(Ge.envMap||It),pn=Ge.vertexColors===!0&&!!Ie.attributes.color&&Ie.attributes.color.itemSize===4,_n=!!Ie.attributes.tangent&&(!!Ge.normalMap||Ge.anisotropy>0),dn=!!Ie.morphAttributes.position,bn=!!Ie.morphAttributes.normal,Bn=!!Ie.morphAttributes.color;let Ni=Md;Ge.toneMapped&&(C===null||C.isXRRenderTarget===!0)&&(Ni=S.toneMapping);const $n=Ie.morphAttributes.position||Ie.morphAttributes.normal||Ie.morphAttributes.color,qn=$n!==void 0?$n.length:0,mn=Fe.get(Ge),ir=g.state.lights;if(J===!0&&(Z===!0||_e!==A)){const Tr=_e===A&&Ge.id===M;Ke.setState(Ge,_e,Tr)}let gi=!1;Ge.version===mn.__version?(mn.needsLights&&mn.lightsStateVersion!==ir.state.version||mn.outputColorSpace!==Et||Ve.isBatchedMesh&&mn.batching===!1||!Ve.isBatchedMesh&&mn.batching===!0||Ve.isBatchedMesh&&mn.batchingColor===!0&&Ve.colorTexture===null||Ve.isBatchedMesh&&mn.batchingColor===!1&&Ve.colorTexture!==null||Ve.isInstancedMesh&&mn.instancing===!1||!Ve.isInstancedMesh&&mn.instancing===!0||Ve.isSkinnedMesh&&mn.skinning===!1||!Ve.isSkinnedMesh&&mn.skinning===!0||Ve.isInstancedMesh&&mn.instancingColor===!0&&Ve.instanceColor===null||Ve.isInstancedMesh&&mn.instancingColor===!1&&Ve.instanceColor!==null||Ve.isInstancedMesh&&mn.instancingMorph===!0&&Ve.morphTexture===null||Ve.isInstancedMesh&&mn.instancingMorph===!1&&Ve.morphTexture!==null||mn.envMap!==Ut||Ge.fog===!0&&mn.fog!==it||mn.numClippingPlanes!==void 0&&(mn.numClippingPlanes!==Ke.numPlanes||mn.numIntersection!==Ke.numIntersection)||mn.vertexAlphas!==pn||mn.vertexTangents!==_n||mn.morphTargets!==dn||mn.morphNormals!==bn||mn.morphColors!==Bn||mn.toneMapping!==Ni||mn.morphTargetsCount!==qn)&&(gi=!0):(gi=!0,mn.__version=Ge.version);let Ma=mn.currentProgram;gi===!0&&(Ma=Ue(Ge,Qe,Ve));let uc=!1,mi=!1,dc=!1;const Bi=Ma.getUniforms(),Ns=mn.uniforms;if(Me.useProgram(Ma.program)&&(uc=!0,mi=!0,dc=!0),Ge.id!==M&&(M=Ge.id,mi=!0),uc||A!==_e){Me.buffers.depth.getReversed()?(ee.copy(_e.projectionMatrix),VKe(ee),$Ke(ee),Bi.setValue(j,"projectionMatrix",ee)):Bi.setValue(j,"projectionMatrix",_e.projectionMatrix),Bi.setValue(j,"viewMatrix",_e.matrixWorldInverse);const Ar=Bi.map.cameraPosition;Ar!==void 0&&Ar.setValue(j,ye.setFromMatrixPosition(_e.matrixWorld)),De.logarithmicDepthBuffer&&Bi.setValue(j,"logDepthBufFC",2/(Math.log(_e.far+1)/Math.LN2)),(Ge.isMeshPhongMaterial||Ge.isMeshToonMaterial||Ge.isMeshLambertMaterial||Ge.isMeshBasicMaterial||Ge.isMeshStandardMaterial||Ge.isShaderMaterial)&&Bi.setValue(j,"isOrthographic",_e.isOrthographicCamera===!0),A!==_e&&(A=_e,mi=!0,dc=!0)}if(Ve.isSkinnedMesh){Bi.setOptional(j,Ve,"bindMatrix"),Bi.setOptional(j,Ve,"bindMatrixInverse");const Tr=Ve.skeleton;Tr&&(Tr.boneTexture===null&&Tr.computeBoneTexture(),Bi.setValue(j,"boneTexture",Tr.boneTexture,ne))}Ve.isBatchedMesh&&(Bi.setOptional(j,Ve,"batchingTexture"),Bi.setValue(j,"batchingTexture",Ve._matricesTexture,ne),Bi.setOptional(j,Ve,"batchingIdTexture"),Bi.setValue(j,"batchingIdTexture",Ve._indirectTexture,ne),Bi.setOptional(j,Ve,"batchingColorTexture"),Ve._colorsTexture!==null&&Bi.setValue(j,"batchingColorTexture",Ve._colorsTexture,ne));const Bs=Ie.morphAttributes;if((Bs.position!==void 0||Bs.normal!==void 0||Bs.color!==void 0)&&te.update(Ve,Ie,Ma),(mi||mn.receiveShadow!==Ve.receiveShadow)&&(mn.receiveShadow=Ve.receiveShadow,Bi.setValue(j,"receiveShadow",Ve.receiveShadow)),Ge.isMeshGouraudMaterial&&Ge.envMap!==null&&(Ns.envMap.value=Ut,Ns.flipEnvMap.value=Ut.isCubeTexture&&Ut.isRenderTargetTexture===!1?-1:1),Ge.isMeshStandardMaterial&&Ge.envMap===null&&Qe.environment!==null&&(Ns.envMapIntensity.value=Qe.environmentIntensity),mi&&(Bi.setValue(j,"toneMappingExposure",S.toneMappingExposure),mn.needsLights&&ln(Ns,dc),it&&Ge.fog===!0&&je.refreshFogUniforms(Ns,it),je.refreshMaterialUniforms(Ns,Ge,k,B,g.state.transmissionRenderTarget[_e.id]),J1.upload(j,pt(mn),Ns,ne)),Ge.isShaderMaterial&&Ge.uniformsNeedUpdate===!0&&(J1.upload(j,pt(mn),Ns,ne),Ge.uniformsNeedUpdate=!1),Ge.isSpriteMaterial&&Bi.setValue(j,"center",Ve.center),Bi.setValue(j,"modelViewMatrix",Ve.modelViewMatrix),Bi.setValue(j,"normalMatrix",Ve.normalMatrix),Bi.setValue(j,"modelMatrix",Ve.matrixWorld),Ge.isShaderMaterial||Ge.isRawShaderMaterial){const Tr=Ge.uniformsGroups;for(let Ar=0,bu=Tr.length;Ar<bu;Ar++){const bl=Tr[Ar];fe.update(bl,Ma),fe.bind(bl,Ma)}}return Ma}function ln(_e,Qe){_e.ambientLightColor.needsUpdate=Qe,_e.lightProbe.needsUpdate=Qe,_e.directionalLights.needsUpdate=Qe,_e.directionalLightShadows.needsUpdate=Qe,_e.pointLights.needsUpdate=Qe,_e.pointLightShadows.needsUpdate=Qe,_e.spotLights.needsUpdate=Qe,_e.spotLightShadows.needsUpdate=Qe,_e.rectAreaLights.needsUpdate=Qe,_e.hemisphereLights.needsUpdate=Qe}function Fn(_e){return _e.isMeshLambertMaterial||_e.isMeshToonMaterial||_e.isMeshPhongMaterial||_e.isMeshStandardMaterial||_e.isShadowMaterial||_e.isShaderMaterial&&_e.lights===!0}this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(_e,Qe,Ie){Fe.get(_e.texture).__webglTexture=Qe,Fe.get(_e.depthTexture).__webglTexture=Ie;const Ge=Fe.get(_e);Ge.__hasExternalTextures=!0,Ge.__autoAllocateDepthBuffer=Ie===void 0,Ge.__autoAllocateDepthBuffer||we.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ge.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(_e,Qe){const Ie=Fe.get(_e);Ie.__webglFramebuffer=Qe,Ie.__useDefaultFramebuffer=Qe===void 0},this.setRenderTarget=function(_e,Qe=0,Ie=0){C=_e,x=Qe,T=Ie;let Ge=!0,Ve=null,it=!1,It=!1;if(_e){const Ut=Fe.get(_e);if(Ut.__useDefaultFramebuffer!==void 0)Me.bindFramebuffer(j.FRAMEBUFFER,null),Ge=!1;else if(Ut.__webglFramebuffer===void 0)ne.setupRenderTarget(_e);else if(Ut.__hasExternalTextures)ne.rebindTextures(_e,Fe.get(_e.texture).__webglTexture,Fe.get(_e.depthTexture).__webglTexture);else if(_e.depthBuffer){const dn=_e.depthTexture;if(Ut.__boundDepthTexture!==dn){if(dn!==null&&Fe.has(dn)&&(_e.width!==dn.image.width||_e.height!==dn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ne.setupDepthRenderbuffer(_e)}}const pn=_e.texture;(pn.isData3DTexture||pn.isDataArrayTexture||pn.isCompressedArrayTexture)&&(It=!0);const _n=Fe.get(_e).__webglFramebuffer;_e.isWebGLCubeRenderTarget?(Array.isArray(_n[Qe])?Ve=_n[Qe][Ie]:Ve=_n[Qe],it=!0):_e.samples>0&&ne.useMultisampledRTT(_e)===!1?Ve=Fe.get(_e).__webglMultisampledFramebuffer:Array.isArray(_n)?Ve=_n[Ie]:Ve=_n,E.copy(_e.viewport),I.copy(_e.scissor),P=_e.scissorTest}else E.copy(G).multiplyScalar(k).floor(),I.copy(q).multiplyScalar(k).floor(),P=W;if(Me.bindFramebuffer(j.FRAMEBUFFER,Ve)&&Ge&&Me.drawBuffers(_e,Ve),Me.viewport(E),Me.scissor(I),Me.setScissorTest(P),it){const Ut=Fe.get(_e.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,Ut.__webglTexture,Ie)}else if(It){const Ut=Fe.get(_e.texture),pn=Qe||0;j.framebufferTextureLayer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,Ut.__webglTexture,Ie||0,pn)}M=-1},this.readRenderTargetPixels=function(_e,Qe,Ie,Ge,Ve,it,It){if(!(_e&&_e.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Et=Fe.get(_e).__webglFramebuffer;if(_e.isWebGLCubeRenderTarget&&It!==void 0&&(Et=Et[It]),Et){Me.bindFramebuffer(j.FRAMEBUFFER,Et);try{const Ut=_e.texture,pn=Ut.format,_n=Ut.type;if(!De.textureFormatReadable(pn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!De.textureTypeReadable(_n)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Qe>=0&&Qe<=_e.width-Ge&&Ie>=0&&Ie<=_e.height-Ve&&j.readPixels(Qe,Ie,Ge,Ve,de.convert(pn),de.convert(_n),it)}finally{const Ut=C!==null?Fe.get(C).__webglFramebuffer:null;Me.bindFramebuffer(j.FRAMEBUFFER,Ut)}}},this.readRenderTargetPixelsAsync=async function(_e,Qe,Ie,Ge,Ve,it,It){if(!(_e&&_e.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Et=Fe.get(_e).__webglFramebuffer;if(_e.isWebGLCubeRenderTarget&&It!==void 0&&(Et=Et[It]),Et){const Ut=_e.texture,pn=Ut.format,_n=Ut.type;if(!De.textureFormatReadable(pn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!De.textureTypeReadable(_n))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Qe>=0&&Qe<=_e.width-Ge&&Ie>=0&&Ie<=_e.height-Ve){Me.bindFramebuffer(j.FRAMEBUFFER,Et);const dn=j.createBuffer();j.bindBuffer(j.PIXEL_PACK_BUFFER,dn),j.bufferData(j.PIXEL_PACK_BUFFER,it.byteLength,j.STREAM_READ),j.readPixels(Qe,Ie,Ge,Ve,de.convert(pn),de.convert(_n),0);const bn=C!==null?Fe.get(C).__webglFramebuffer:null;Me.bindFramebuffer(j.FRAMEBUFFER,bn);const Bn=j.fenceSync(j.SYNC_GPU_COMMANDS_COMPLETE,0);return j.flush(),await HKe(j,Bn,4),j.bindBuffer(j.PIXEL_PACK_BUFFER,dn),j.getBufferSubData(j.PIXEL_PACK_BUFFER,0,it),j.deleteBuffer(dn),j.deleteSync(Bn),it}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(_e,Qe=null,Ie=0){_e.isTexture!==!0&&(Dm("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Qe=arguments[0]||null,_e=arguments[1]);const Ge=Math.pow(2,-Ie),Ve=Math.floor(_e.image.width*Ge),it=Math.floor(_e.image.height*Ge),It=Qe!==null?Qe.x:0,Et=Qe!==null?Qe.y:0;ne.setTexture2D(_e,0),j.copyTexSubImage2D(j.TEXTURE_2D,Ie,0,0,It,Et,Ve,it),Me.unbindTexture()};const An=j.createFramebuffer(),kn=j.createFramebuffer();this.copyTextureToTexture=function(_e,Qe,Ie=null,Ge=null,Ve=0,it=null){_e.isTexture!==!0&&(Dm("WebGLRenderer: copyTextureToTexture function signature has changed."),Ge=arguments[0]||null,_e=arguments[1],Qe=arguments[2],it=arguments[3]||0,Ie=null),it===null&&(Ve!==0?(Dm("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),it=Ve,Ve=0):it=0);let It,Et,Ut,pn,_n,dn,bn,Bn,Ni;const $n=_e.isCompressedTexture?_e.mipmaps[it]:_e.image;if(Ie!==null)It=Ie.max.x-Ie.min.x,Et=Ie.max.y-Ie.min.y,Ut=Ie.isBox3?Ie.max.z-Ie.min.z:1,pn=Ie.min.x,_n=Ie.min.y,dn=Ie.isBox3?Ie.min.z:0;else{const Bs=Math.pow(2,-Ve);It=Math.floor($n.width*Bs),Et=Math.floor($n.height*Bs),_e.isDataArrayTexture?Ut=$n.depth:_e.isData3DTexture?Ut=Math.floor($n.depth*Bs):Ut=1,pn=0,_n=0,dn=0}Ge!==null?(bn=Ge.x,Bn=Ge.y,Ni=Ge.z):(bn=0,Bn=0,Ni=0);const qn=de.convert(Qe.format),mn=de.convert(Qe.type);let ir;Qe.isData3DTexture?(ne.setTexture3D(Qe,0),ir=j.TEXTURE_3D):Qe.isDataArrayTexture||Qe.isCompressedArrayTexture?(ne.setTexture2DArray(Qe,0),ir=j.TEXTURE_2D_ARRAY):(ne.setTexture2D(Qe,0),ir=j.TEXTURE_2D),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,Qe.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Qe.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,Qe.unpackAlignment);const gi=j.getParameter(j.UNPACK_ROW_LENGTH),Ma=j.getParameter(j.UNPACK_IMAGE_HEIGHT),uc=j.getParameter(j.UNPACK_SKIP_PIXELS),mi=j.getParameter(j.UNPACK_SKIP_ROWS),dc=j.getParameter(j.UNPACK_SKIP_IMAGES);j.pixelStorei(j.UNPACK_ROW_LENGTH,$n.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,$n.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,pn),j.pixelStorei(j.UNPACK_SKIP_ROWS,_n),j.pixelStorei(j.UNPACK_SKIP_IMAGES,dn);const Bi=_e.isDataArrayTexture||_e.isData3DTexture,Ns=Qe.isDataArrayTexture||Qe.isData3DTexture;if(_e.isDepthTexture){const Bs=Fe.get(_e),Tr=Fe.get(Qe),Ar=Fe.get(Bs.__renderTarget),bu=Fe.get(Tr.__renderTarget);Me.bindFramebuffer(j.READ_FRAMEBUFFER,Ar.__webglFramebuffer),Me.bindFramebuffer(j.DRAW_FRAMEBUFFER,bu.__webglFramebuffer);for(let bl=0;bl<Ut;bl++)Bi&&(j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,Fe.get(_e).__webglTexture,Ve,dn+bl),j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,Fe.get(Qe).__webglTexture,it,Ni+bl)),j.blitFramebuffer(pn,_n,It,Et,bn,Bn,It,Et,j.DEPTH_BUFFER_BIT,j.NEAREST);Me.bindFramebuffer(j.READ_FRAMEBUFFER,null),Me.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else if(Ve!==0||_e.isRenderTargetTexture||Fe.has(_e)){const Bs=Fe.get(_e),Tr=Fe.get(Qe);Me.bindFramebuffer(j.READ_FRAMEBUFFER,An),Me.bindFramebuffer(j.DRAW_FRAMEBUFFER,kn);for(let Ar=0;Ar<Ut;Ar++)Bi?j.framebufferTextureLayer(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,Bs.__webglTexture,Ve,dn+Ar):j.framebufferTexture2D(j.READ_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,Bs.__webglTexture,Ve),Ns?j.framebufferTextureLayer(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,Tr.__webglTexture,it,Ni+Ar):j.framebufferTexture2D(j.DRAW_FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_2D,Tr.__webglTexture,it),Ve!==0?j.blitFramebuffer(pn,_n,It,Et,bn,Bn,It,Et,j.COLOR_BUFFER_BIT,j.NEAREST):Ns?j.copyTexSubImage3D(ir,it,bn,Bn,Ni+Ar,pn,_n,It,Et):j.copyTexSubImage2D(ir,it,bn,Bn,pn,_n,It,Et);Me.bindFramebuffer(j.READ_FRAMEBUFFER,null),Me.bindFramebuffer(j.DRAW_FRAMEBUFFER,null)}else Ns?_e.isDataTexture||_e.isData3DTexture?j.texSubImage3D(ir,it,bn,Bn,Ni,It,Et,Ut,qn,mn,$n.data):Qe.isCompressedArrayTexture?j.compressedTexSubImage3D(ir,it,bn,Bn,Ni,It,Et,Ut,qn,$n.data):j.texSubImage3D(ir,it,bn,Bn,Ni,It,Et,Ut,qn,mn,$n):_e.isDataTexture?j.texSubImage2D(j.TEXTURE_2D,it,bn,Bn,It,Et,qn,mn,$n.data):_e.isCompressedTexture?j.compressedTexSubImage2D(j.TEXTURE_2D,it,bn,Bn,$n.width,$n.height,qn,$n.data):j.texSubImage2D(j.TEXTURE_2D,it,bn,Bn,It,Et,qn,mn,$n);j.pixelStorei(j.UNPACK_ROW_LENGTH,gi),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,Ma),j.pixelStorei(j.UNPACK_SKIP_PIXELS,uc),j.pixelStorei(j.UNPACK_SKIP_ROWS,mi),j.pixelStorei(j.UNPACK_SKIP_IMAGES,dc),it===0&&Qe.generateMipmaps&&j.generateMipmap(ir),Me.unbindTexture()},this.copyTextureToTexture3D=function(_e,Qe,Ie=null,Ge=null,Ve=0){return _e.isTexture!==!0&&(Dm("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Ie=arguments[0]||null,Ge=arguments[1]||null,_e=arguments[2],Qe=arguments[3],Ve=arguments[4]||0),Dm('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(_e,Qe,Ie,Ge,Ve)},this.initRenderTarget=function(_e){Fe.get(_e).__webglFramebuffer===void 0&&ne.setupRenderTarget(_e)},this.initTexture=function(_e){_e.isCubeTexture?ne.setTextureCube(_e,0):_e.isData3DTexture?ne.setTexture3D(_e,0):_e.isDataArrayTexture||_e.isCompressedArrayTexture?ne.setTexture2DArray(_e,0):ne.setTexture2D(_e,0),Me.unbindTexture()},this.resetState=function(){x=0,T=0,C=null,Me.reset(),qe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Gc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=bi._getDrawingBufferColorSpace(e),t.unpackColorSpace=bi._getUnpackColorSpace()}}const ih=class ih{constructor(e,t){let i,r;this.promise=new Promise((c,u)=>{i=c,r=u});const s=i.bind(this),a=r.bind(this),o=(...c)=>{s(...c)},l=c=>{a(c)};e(o.bind(this),l.bind(this)),this.abortHandler=t,this.id=ih.idGen++}then(e){return new ih((t,i)=>{this.promise=this.promise.then((...r)=>{const s=e(...r);s instanceof Promise||s instanceof ih?s.then((...a)=>{t(...a)}):t(s)}).catch(r=>{i(r)})},this.abortHandler)}catch(e){return new ih(t=>{this.promise=this.promise.then((...i)=>{t(...i)}).catch(e)},this.abortHandler)}abort(e){this.abortHandler&&this.abortHandler(e)}};kt(ih,"idGen",0);let J_=ih;class ex extends Error{constructor(e){super(e)}}(function(){const n=new Float32Array(1),e=new Int32Array(n.buffer);return function(t){n[0]=t;const i=e[0];let r=i>>16&32768,s=i>>12&2047;const a=i>>23&255;return a<103?r:a>142?(r|=31744,r|=(a==255?0:1)&&i&8388607,r):a<113?(s|=2048,r|=(s>>114-a)+(s>>113-a&1),r):(r|=a-112<<10|s>>1,r+=s&1,r)}})();const w2=function(){const n=new Float32Array(1),e=new Int32Array(n.buffer);return function(t){return n[0]=t,e[0]}}(),sZe=function(n,e){return n[e]+(n[e+1]<<8)+(n[e+2]<<16)+(n[e+3]<<24)},NO=function(n,e,t=!0,i){const r=new AbortController,s=r.signal;let a=!1;const o=l=>{r.abort(l),a=!0};return new J_((l,c)=>{const u={signal:s};i&&(u.headers=i),fetch(n,u).then(async d=>{if(!d.ok){const g=await d.text();c(new Error(`Fetch failed: ${d.status} ${d.statusText} ${g}`));return}const f=d.body.getReader();let h=0,p=d.headers.get("Content-Length"),m=p?parseInt(p):void 0;const v=[];for(;!a;)try{const{value:g,done:_}=await f.read();if(_){if(e&&e(100,"100%",g,m),t){const w=new Blob(v).arrayBuffer();l(w)}else l();break}h+=g.length;let y,S;m!==void 0&&(y=h/m*100,S=`${y.toFixed(2)}%`),t&&v.push(g),e&&e(y,S,g,m)}catch(g){c(g);return}}).catch(d=>{c(new ex(d))})},o)},os=function(n,e,t){return Math.max(Math.min(n,t),e)},gm=function(){return performance.now()/1e3},Lm=n=>{if(n.geometry&&(n.geometry.dispose(),n.geometry=null),n.material&&(n.material.dispose(),n.material=null),n.children)for(let e of n.children)Lm(e)},ll=(n,e)=>new Promise(t=>{window.setTimeout(()=>{t(n())},e?1:50)}),pv=(n=0)=>{switch(n){case 1:return 9;case 2:return 24}return 0},BO=()=>{let n,e;return{promise:new Promise((i,r)=>{n=i,e=r}),resolve:n,reject:e}},x2=n=>{let e,t;return n||(n=()=>{}),{promise:new J_((r,s)=>{e=r,t=s},n),resolve:e,reject:t}};class aZe{constructor(e,t,i){this.major=e,this.minor=t,this.patch=i}toString(){return`${this.major}_${this.minor}_${this.patch}`}}function FO(){const n=navigator.userAgent;return n.indexOf("iPhone")>0||n.indexOf("iPad")>0}function AZ(){if(FO()){const n=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return new aZe(parseInt(n[1]||0,10),parseInt(n[2]||0,10),parseInt(n[3]||0,10))}else return null}const oZe=14,Oy=class Oy{constructor(e=0){this.sphericalHarmonicsDegree=e,this.sphericalHarmonicsCount=pv(this.sphericalHarmonicsDegree),this.componentCount=this.sphericalHarmonicsCount+oZe,this.defaultSphericalHarmonics=new Array(this.sphericalHarmonicsCount).fill(0),this.splats=[],this.splatCount=0}static createSplat(e=0){const t=[0,0,0,1,1,1,1,0,0,0,0,0,0,0];let i=pv(e);for(let r=0;r<i;r++)t.push(0);return t}addSplat(e){this.splats.push(e),this.splatCount++}getSplat(e){return this.splats[e]}addDefaultSplat(){const e=Oy.createSplat(this.sphericalHarmonicsDegree);return this.addSplat(e),e}addSplatFromComonents(e,t,i,r,s,a,o,l,c,u,d,f,h,p,...m){const v=[e,t,i,r,s,a,o,l,c,u,d,f,h,p,...this.defaultSphericalHarmonics];for(let g=0;g<m.length&&g<this.sphericalHarmonicsCount;g++)v[g]=m[g];return this.addSplat(v),v}addSplatFromArray(e,t){const i=e.splats[t],r=Oy.createSplat(this.sphericalHarmonicsDegree);for(let s=0;s<this.componentCount&&s<i.length;s++)r[s]=i[s];this.addSplat(r)}};kt(Oy,"OFFSET",{X:0,Y:1,Z:2,SCALE0:3,SCALE1:4,SCALE2:5,ROTATION0:6,ROTATION1:7,ROTATION2:8,ROTATION3:9,FDC0:10,FDC1:11,FDC2:12,OPACITY:13,FRC0:14,FRC1:15,FRC2:16,FRC3:17,FRC4:18,FRC5:19,FRC6:20,FRC7:21,FRC8:22,FRC9:23,FRC10:24,FRC11:25,FRC12:26,FRC13:27,FRC14:28,FRC15:29,FRC16:30,FRC17:31,FRC18:32,FRC19:33,FRC20:34,FRC21:35,FRC22:36,FRC23:37});let cn=Oy;class ii{}kt(ii,"DefaultSplatSortDistanceMapPrecision",16),kt(ii,"MemoryPageSize",65536),kt(ii,"BytesPerFloat",4),kt(ii,"BytesPerInt",4),kt(ii,"MaxScenes",32),kt(ii,"ProgressiveLoadSectionSize",262144),kt(ii,"ProgressiveLoadSectionDelayDuration",15),kt(ii,"SphericalHarmonics8BitCompressionRange",3);const lZe=ii.SphericalHarmonics8BitCompressionRange,qu=lZe/2,Ir=Q_.toHalfFloat.bind(Q_),zO=Q_.fromHalfFloat.bind(Q_),qi=(n,e,t=!1,i,r)=>{if(e===0)return n;if(e===1||e===2&&!t)return Q_.fromHalfFloat(n);if(e===2)return UO(n,i,r)},Py=(n,e,t)=>{n=os(n,e,t);const i=t-e;return os(Math.floor((n-e)/i*255),0,255)},UO=(n,e,t)=>{const i=t-e;return n/255*i+e},EZ=(n,e,t)=>Py(zO(n,e,t)),cZe=(n,e,t)=>Ir(UO(n,e,t)),Ci=(n,e,t,i=!1)=>t===0?n.getFloat32(e*4,!0):t===1||t===2&&!i?n.getUint16(e*2,!0):n.getUint8(e,!0),uZe=function(){const n=e=>e;return function(e,t,i,r=!1){if(t===i)return e;let s=n;return t===2&&r?i===1?s=cZe:i==0&&(s=UO):t===2||t===1?i===0?s=zO:i==2&&(r?s=EZ:s=n):t===0&&(i===1?s=Ir:i==2&&(r?s=Py:s=Ir)),s(e)}}(),ym=(n,e,t,i,r=0)=>{const s=new Uint8Array(n,e),a=new Uint8Array(t,i);for(let o=0;o<r;o++)a[o]=s[o]},gt=class gt{constructor(e,t=!0){kt(this,"getSplatScaleAndRotation",function(){const e=new In,t=new In,i=new In,r=new ze,s=new ze,a=new Ji;return function(o,l,c,u,d){const f=this.globalSplatIndexToSectionMap[o],h=this.sections[f],p=o-h.splatCountOffset,m=h.bytesPerSplat*p+gt.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,v=new DataView(this.bufferData,h.dataBase+m);s.set(qi(Ci(v,0,this.compressionLevel),this.compressionLevel),qi(Ci(v,1,this.compressionLevel),this.compressionLevel),qi(Ci(v,2,this.compressionLevel),this.compressionLevel)),d&&(d.x!==void 0&&(s.x=d.x),d.y!==void 0&&(s.y=d.y),d.z!==void 0&&(s.z=d.z)),a.set(qi(Ci(v,4,this.compressionLevel),this.compressionLevel),qi(Ci(v,5,this.compressionLevel),this.compressionLevel),qi(Ci(v,6,this.compressionLevel),this.compressionLevel),qi(Ci(v,3,this.compressionLevel),this.compressionLevel)),u?(e.makeScale(s.x,s.y,s.z),t.makeRotationFromQuaternion(a),i.copy(e).multiply(t).multiply(u),i.decompose(r,c,l)):(l.copy(s),c.copy(a))}}());kt(this,"fillSplatScaleRotationArray",function(){const e=new In,t=new In,i=new In,r=new ze,s=new Ji,a=new ze,o=l=>{const c=l.w<0?-1:1;l.x*=c,l.y*=c,l.z*=c,l.w*=c};return function(l,c,u,d,f,h,p,m){const v=this.splatCount;d=d||0,f=f||v-1,h===void 0&&(h=d);const g=(_,y)=>(y===void 0&&(y=this.compressionLevel),uZe(_,y,p));for(let _=d;_<=f;_++){const y=this.globalSplatIndexToSectionMap[_],S=this.sections[y],w=_-S.splatCountOffset,x=S.bytesPerSplat*w+gt.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,T=(_-d+h)*gt.ScaleComponentCount,C=(_-d+h)*gt.RotationComponentCount,M=new DataView(this.bufferData,S.dataBase+x),A=m&&m.x!==void 0?m.x:Ci(M,0,this.compressionLevel),E=m&&m.y!==void 0?m.y:Ci(M,1,this.compressionLevel),I=m&&m.z!==void 0?m.z:Ci(M,2,this.compressionLevel),P=Ci(M,3,this.compressionLevel),D=Ci(M,4,this.compressionLevel),L=Ci(M,5,this.compressionLevel),R=Ci(M,6,this.compressionLevel);r.set(qi(A,this.compressionLevel),qi(E,this.compressionLevel),qi(I,this.compressionLevel)),s.set(qi(D,this.compressionLevel),qi(L,this.compressionLevel),qi(R,this.compressionLevel),qi(P,this.compressionLevel)).normalize(),u&&(a.set(0,0,0),e.makeScale(r.x,r.y,r.z),t.makeRotationFromQuaternion(s),i.identity().premultiply(e).premultiply(t),i.premultiply(u),i.decompose(a,s,r),s.normalize()),o(s),l&&(l[T]=g(r.x,0),l[T+1]=g(r.y,0),l[T+2]=g(r.z,0)),c&&(c[C]=g(s.x,0),c[C+1]=g(s.y,0),c[C+2]=g(s.z,0),c[C+3]=g(s.w,0))}}}());kt(this,"fillSphericalHarmonicsArray",function(){for(let D=0;D<15;D++)new ze;const e=new En,t=new In,i=new ze,r=new ze,s=new Ji,a=[],o=[],l=[],c=[],u=[],d=[],f=[],h=[],p=[],m=[],v=[],g=[],_=[],y=[],S=[],w=[],x=[],T=[],C=D=>D,M=(D,L,R,B)=>{D[0]=L,D[1]=R,D[2]=B},A=(D,L,R,B,k)=>{D[0]=Ci(L,B,k,!0),D[1]=Ci(L,B+R,k,!0),D[2]=Ci(L,B+R+R,k,!0)},E=(D,L)=>{L[0]=D[0],L[1]=D[1],L[2]=D[2]},I=(D,L,R,B)=>{L[R]=B(D[0]),L[R+1]=B(D[1]),L[R+2]=B(D[2])},P=(D,L,R,B,k)=>(L[0]=qi(D[0],R,!0,B,k),L[1]=qi(D[1],R,!0,B,k),L[2]=qi(D[2],R,!0,B,k),L);return function(D,L,R,B,k,O,U){const G=this.splatCount;B=B||0,k=k||G-1,O===void 0&&(O=B),R&&L>=1&&(t.copy(R),t.decompose(i,s,r),s.normalize(),t.makeRotationFromQuaternion(s),e.setFromMatrix4(t),M(a,e.elements[4],-e.elements[7],e.elements[1]),M(o,-e.elements[5],e.elements[8],-e.elements[2]),M(l,e.elements[3],-e.elements[6],e.elements[0]));const q=Y=>EZ(Y,this.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff),W=Y=>Py(Y,this.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff);for(let Y=B;Y<=k;Y++){const J=this.globalSplatIndexToSectionMap[Y],Z=this.sections[J];L=Math.min(L,Z.sphericalHarmonicsDegree);const ee=pv(L),me=Y-Z.splatCountOffset,ye=Z.bytesPerSplat*me+gt.CompressionLevels[this.compressionLevel].SphericalHarmonicsOffsetBytes,Te=new DataView(this.bufferData,Z.dataBase+ye),Ee=(Y-B+O)*ee;let H=R?0:this.compressionLevel,Q=C;H!==U&&(H===1?U===0?Q=zO:U==2&&(Q=q):H===0&&(U===1?Q=Ir:U==2&&(Q=W)));const j=this.minSphericalHarmonicsCoeff,Pe=this.maxSphericalHarmonicsCoeff;L>=1&&(A(p,Te,3,0,this.compressionLevel),A(m,Te,3,1,this.compressionLevel),A(v,Te,3,2,this.compressionLevel),R?(P(p,p,this.compressionLevel,j,Pe),P(m,m,this.compressionLevel,j,Pe),P(v,v,this.compressionLevel,j,Pe),gt.rotateSphericalHarmonics3(p,m,v,a,o,l,y,S,w)):(E(p,y),E(m,S),E(v,w)),I(y,D,Ee,Q),I(S,D,Ee+3,Q),I(w,D,Ee+6,Q),L>=2&&(A(p,Te,5,9,this.compressionLevel),A(m,Te,5,10,this.compressionLevel),A(v,Te,5,11,this.compressionLevel),A(g,Te,5,12,this.compressionLevel),A(_,Te,5,13,this.compressionLevel),R?(P(p,p,this.compressionLevel,j,Pe),P(m,m,this.compressionLevel,j,Pe),P(v,v,this.compressionLevel,j,Pe),P(g,g,this.compressionLevel,j,Pe),P(_,_,this.compressionLevel,j,Pe),gt.rotateSphericalHarmonics5(p,m,v,g,_,a,o,l,c,u,d,f,h,y,S,w,x,T)):(E(p,y),E(m,S),E(v,w),E(g,x),E(_,T)),I(y,D,Ee+9,Q),I(S,D,Ee+12,Q),I(w,D,Ee+15,Q),I(x,D,Ee+18,Q),I(T,D,Ee+21,Q)))}}}());this.constructFromBuffer(e,t)}getSplatCount(){return this.splatCount}getMaxSplatCount(){return this.maxSplatCount}getMinSphericalHarmonicsDegree(){let e=0;for(let t=0;t<this.sections.length;t++){const i=this.sections[t];(t===0||i.sphericalHarmonicsDegree<e)&&(e=i.sphericalHarmonicsDegree)}return e}getBucketIndex(e,t){let i;const r=e.fullBucketCount*e.bucketSize;if(t<r)i=Math.floor(t/e.bucketSize);else{let s=r;i=e.fullBucketCount;let a=0;for(;s<e.splatCount;){let o=e.partiallyFilledBucketLengths[a];if(t>=s&&t<s+o)break;s+=o,i++,a++}}return i}getSplatCenter(e,t,i){const r=this.globalSplatIndexToSectionMap[e],s=this.sections[r],a=e-s.splatCountOffset,o=s.bytesPerSplat*a,l=new DataView(this.bufferData,s.dataBase+o),c=Ci(l,0,this.compressionLevel),u=Ci(l,1,this.compressionLevel),d=Ci(l,2,this.compressionLevel);if(this.compressionLevel>=1){const h=this.getBucketIndex(s,a)*gt.BucketStorageSizeFloats,p=s.compressionScaleFactor,m=s.compressionScaleRange;t.x=(c-m)*p+s.bucketArray[h],t.y=(u-m)*p+s.bucketArray[h+1],t.z=(d-m)*p+s.bucketArray[h+2]}else t.x=c,t.y=u,t.z=d;i&&t.applyMatrix4(i)}getSplatColor(e,t){const i=this.globalSplatIndexToSectionMap[e],r=this.sections[i],s=e-r.splatCountOffset,a=r.bytesPerSplat*s+gt.CompressionLevels[this.compressionLevel].ColorOffsetBytes,o=new Uint8Array(this.bufferData,r.dataBase+a,4);t.set(o[0],o[1],o[2],o[3])}fillSplatCenterArray(e,t,i,r,s){const a=this.splatCount;i=i||0,r=r||a-1,s===void 0&&(s=i);const o=new ze;for(let l=i;l<=r;l++){const c=this.globalSplatIndexToSectionMap[l],u=this.sections[c],d=l-u.splatCountOffset,f=(l-i+s)*gt.CenterComponentCount,h=u.bytesPerSplat*d,p=new DataView(this.bufferData,u.dataBase+h),m=Ci(p,0,this.compressionLevel),v=Ci(p,1,this.compressionLevel),g=Ci(p,2,this.compressionLevel);if(this.compressionLevel>=1){const y=this.getBucketIndex(u,d)*gt.BucketStorageSizeFloats,S=u.compressionScaleFactor,w=u.compressionScaleRange;o.x=(m-w)*S+u.bucketArray[y],o.y=(v-w)*S+u.bucketArray[y+1],o.z=(g-w)*S+u.bucketArray[y+2]}else o.x=m,o.y=v,o.z=g;t&&o.applyMatrix4(t),e[f]=o.x,e[f+1]=o.y,e[f+2]=o.z}}fillSplatCovarianceArray(e,t,i,r,s,a){const o=this.splatCount,l=new ze,c=new Ji;i=i||0,r=r||o-1,s===void 0&&(s=i);for(let u=i;u<=r;u++){const d=this.globalSplatIndexToSectionMap[u],f=this.sections[d],h=u-f.splatCountOffset,p=(u-i+s)*gt.CovarianceComponentCount,m=f.bytesPerSplat*h+gt.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,v=new DataView(this.bufferData,f.dataBase+m);l.set(qi(Ci(v,0,this.compressionLevel),this.compressionLevel),qi(Ci(v,1,this.compressionLevel),this.compressionLevel),qi(Ci(v,2,this.compressionLevel),this.compressionLevel)),c.set(qi(Ci(v,4,this.compressionLevel),this.compressionLevel),qi(Ci(v,5,this.compressionLevel),this.compressionLevel),qi(Ci(v,6,this.compressionLevel),this.compressionLevel),qi(Ci(v,3,this.compressionLevel),this.compressionLevel)),gt.computeCovariance(l,c,t,e,p,a)}}fillSplatColorArray(e,t,i,r,s){const a=this.splatCount;i=i||0,r=r||a-1,s===void 0&&(s=i);for(let o=i;o<=r;o++){const l=this.globalSplatIndexToSectionMap[o],c=this.sections[l],u=o-c.splatCountOffset,d=(o-i+s)*gt.ColorComponentCount,f=c.bytesPerSplat*u+gt.CompressionLevels[this.compressionLevel].ColorOffsetBytes,h=new Uint8Array(this.bufferData,c.dataBase+f);let p=h[3];p=p>=t?p:0,e[d]=h[0],e[d+1]=h[1],e[d+2]=h[2],e[d+3]=p}}static parseHeader(e){const t=new Uint8Array(e,0,gt.HeaderSizeBytes),i=new Uint16Array(e,0,gt.HeaderSizeBytes/2),r=new Uint32Array(e,0,gt.HeaderSizeBytes/4),s=new Float32Array(e,0,gt.HeaderSizeBytes/4),a=t[0],o=t[1],l=r[1],c=r[2],u=r[3],d=r[4],f=i[10],h=new ze(s[6],s[7],s[8]),p=s[9]||-qu,m=s[10]||qu;return{versionMajor:a,versionMinor:o,maxSectionCount:l,sectionCount:c,maxSplatCount:u,splatCount:d,compressionLevel:f,sceneCenter:h,minSphericalHarmonicsCoeff:p,maxSphericalHarmonicsCoeff:m}}static writeHeaderCountsToBuffer(e,t,i){const r=new Uint32Array(i,0,gt.HeaderSizeBytes/4);r[2]=e,r[4]=t}static writeHeaderToBuffer(e,t){const i=new Uint8Array(t,0,gt.HeaderSizeBytes),r=new Uint16Array(t,0,gt.HeaderSizeBytes/2),s=new Uint32Array(t,0,gt.HeaderSizeBytes/4),a=new Float32Array(t,0,gt.HeaderSizeBytes/4);i[0]=e.versionMajor,i[1]=e.versionMinor,i[2]=0,i[3]=0,s[1]=e.maxSectionCount,s[2]=e.sectionCount,s[3]=e.maxSplatCount,s[4]=e.splatCount,r[10]=e.compressionLevel,a[6]=e.sceneCenter.x,a[7]=e.sceneCenter.y,a[8]=e.sceneCenter.z,a[9]=e.minSphericalHarmonicsCoeff||-qu,a[10]=e.maxSphericalHarmonicsCoeff||qu}static parseSectionHeaders(e,t,i=0,r){const s=e.compressionLevel,a=e.maxSectionCount,o=new Uint16Array(t,i,a*gt.SectionHeaderSizeBytes/2),l=new Uint32Array(t,i,a*gt.SectionHeaderSizeBytes/4),c=new Float32Array(t,i,a*gt.SectionHeaderSizeBytes/4),u=[];let d=0,f=d/2,h=d/4,p=gt.HeaderSizeBytes+e.maxSectionCount*gt.SectionHeaderSizeBytes,m=0;for(let v=0;v<a;v++){const g=l[h+1],_=l[h+2],y=l[h+3],S=c[h+4],w=S/2,x=o[f+10],T=l[h+6]||gt.CompressionLevels[s].ScaleRange,C=l[h+8],M=l[h+9],A=M*4,E=x*y+A,I=o[f+20],{bytesPerSplat:P}=gt.calculateComponentStorage(s,I),D=P*g,L=D+E,R={bytesPerSplat:P,splatCountOffset:m,splatCount:r?g:0,maxSplatCount:g,bucketSize:_,bucketCount:y,bucketBlockSize:S,halfBucketBlockSize:w,bucketStorageSizeBytes:x,bucketsStorageSizeBytes:E,splatDataStorageSizeBytes:D,storageSizeBytes:L,compressionScaleRange:T,compressionScaleFactor:w/T,base:p,bucketsBase:p+A,dataBase:p+E,fullBucketCount:C,partiallyFilledBucketCount:M,sphericalHarmonicsDegree:I};u[v]=R,p+=L,d+=gt.SectionHeaderSizeBytes,f=d/2,h=d/4,m+=g}return u}static writeSectionHeaderToBuffer(e,t,i,r=0){const s=new Uint16Array(i,r,gt.SectionHeaderSizeBytes/2),a=new Uint32Array(i,r,gt.SectionHeaderSizeBytes/4),o=new Float32Array(i,r,gt.SectionHeaderSizeBytes/4);a[0]=e.splatCount,a[1]=e.maxSplatCount,a[2]=t>=1?e.bucketSize:0,a[3]=t>=1?e.bucketCount:0,o[4]=t>=1?e.bucketBlockSize:0,s[10]=t>=1?gt.BucketStorageSizeBytes:0,a[6]=t>=1?e.compressionScaleRange:0,a[7]=e.storageSizeBytes,a[8]=t>=1?e.fullBucketCount:0,a[9]=t>=1?e.partiallyFilledBucketCount:0,s[20]=e.sphericalHarmonicsDegree}static writeSectionHeaderSplatCountToBuffer(e,t,i=0){const r=new Uint32Array(t,i,gt.SectionHeaderSizeBytes/4);r[0]=e}constructFromBuffer(e,t){this.bufferData=e,this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSectionMap=[];const i=gt.parseHeader(this.bufferData);this.versionMajor=i.versionMajor,this.versionMinor=i.versionMinor,this.maxSectionCount=i.maxSectionCount,this.sectionCount=t?i.maxSectionCount:0,this.maxSplatCount=i.maxSplatCount,this.splatCount=t?i.maxSplatCount:0,this.compressionLevel=i.compressionLevel,this.sceneCenter=new ze().copy(i.sceneCenter),this.minSphericalHarmonicsCoeff=i.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff=i.maxSphericalHarmonicsCoeff,this.sections=gt.parseSectionHeaders(i,this.bufferData,gt.HeaderSizeBytes,t),this.linkBufferArrays(),this.buildMaps()}static calculateComponentStorage(e,t){const i=gt.CompressionLevels[e].BytesPerCenter,r=gt.CompressionLevels[e].BytesPerScale,s=gt.CompressionLevels[e].BytesPerRotation,a=gt.CompressionLevels[e].BytesPerColor,o=pv(t),l=gt.CompressionLevels[e].BytesPerSphericalHarmonicsComponent*o,c=i+r+s+a+l;return{bytesPerCenter:i,bytesPerScale:r,bytesPerRotation:s,bytesPerColor:a,sphericalHarmonicsComponentsPerSplat:o,sphericalHarmonicsBytesPerSplat:l,bytesPerSplat:c}}linkBufferArrays(){for(let e=0;e<this.maxSectionCount;e++){const t=this.sections[e];t.bucketArray=new Float32Array(this.bufferData,t.bucketsBase,t.bucketCount*gt.BucketStorageSizeFloats),t.partiallyFilledBucketCount>0&&(t.partiallyFilledBucketLengths=new Uint32Array(this.bufferData,t.base,t.partiallyFilledBucketCount))}}buildMaps(){let e=0;for(let t=0;t<this.maxSectionCount;t++){const i=this.sections[t];for(let r=0;r<i.maxSplatCount;r++){const s=e+r;this.globalSplatIndexToLocalSplatIndexMap[s]=r,this.globalSplatIndexToSectionMap[s]=t}e+=i.maxSplatCount}}updateLoadedCounts(e,t){gt.writeHeaderCountsToBuffer(e,t,this.bufferData),this.sectionCount=e,this.splatCount=t}updateSectionLoadedCounts(e,t){const i=gt.HeaderSizeBytes+gt.SectionHeaderSizeBytes*e;gt.writeSectionHeaderSplatCountToBuffer(t,this.bufferData,i),this.sections[e].splatCount=t}static generateFromUncompressedSplatArrays(e,t,i,r,s,a,o=[]){let l=0;for(let w=0;w<e.length;w++){const x=e[w];l=Math.max(x.sphericalHarmonicsDegree,l)}let c,u;for(let w=0;w<e.length;w++){const x=e[w];for(let T=0;T<x.splats.length;T++){const C=x.splats[T];for(let M=cn.OFFSET.FRC0;M<cn.OFFSET.FRC23&&M<C.length;M++)(!c||C[M]<c)&&(c=C[M]),(!u||C[M]>u)&&(u=C[M])}}c=c||-qu,u=u||qu;const{bytesPerSplat:d}=gt.calculateComponentStorage(i,l),f=gt.CompressionLevels[i].ScaleRange,h=[],p=[];let m=0;for(let w=0;w<e.length;w++){const x=e[w],T=new cn(l);for(let J=0;J<x.splatCount;J++){const Z=x.splats[J];(Z[cn.OFFSET.OPACITY]||0)>=t&&T.addSplat(Z)}const C=o[w]||{},M=(C.blockSizeFactor||1)*(s||gt.BucketBlockSize),A=Math.ceil((C.bucketSizeFactor||1)*(a||gt.BucketSize)),E=gt.computeBucketsForUncompressedSplatArray(T,M,A),I=E.fullBuckets.length,P=E.partiallyFullBuckets.map(J=>J.splats.length),D=P.length,L=[...E.fullBuckets,...E.partiallyFullBuckets],R=T.splats.length*d,B=D*4,k=i>=1?L.length*gt.BucketStorageSizeBytes+B:0,O=R+k,U=new ArrayBuffer(O),G=f/(M*.5),q=new ze;let W=0;for(let J=0;J<L.length;J++){const Z=L[J];q.fromArray(Z.center);for(let ee=0;ee<Z.splats.length;ee++){let me=Z.splats[ee];const ye=T.splats[me],Te=k+W*d;gt.writeSplatDataToSectionBuffer(ye,U,Te,i,l,q,G,f,c,u),W++}}if(m+=W,i>=1){const J=new Uint32Array(U,0,P.length*4);for(let ee=0;ee<P.length;ee++)J[ee]=P[ee];const Z=new Float32Array(U,B,L.length*gt.BucketStorageSizeFloats);for(let ee=0;ee<L.length;ee++){const me=L[ee],ye=ee*3;Z[ye]=me.center[0],Z[ye+1]=me.center[1],Z[ye+2]=me.center[2]}}h.push(U);const Y=new ArrayBuffer(gt.SectionHeaderSizeBytes);gt.writeSectionHeaderToBuffer({maxSplatCount:W,splatCount:W,bucketSize:A,bucketCount:L.length,bucketBlockSize:M,compressionScaleRange:f,storageSizeBytes:O,fullBucketCount:I,partiallyFilledBucketCount:D,sphericalHarmonicsDegree:l},i,Y,0),p.push(Y)}let v=0;for(let w of h)v+=w.byteLength;const g=gt.HeaderSizeBytes+gt.SectionHeaderSizeBytes*h.length+v,_=new ArrayBuffer(g);gt.writeHeaderToBuffer({versionMajor:0,versionMinor:1,maxSectionCount:h.length,sectionCount:h.length,maxSplatCount:m,splatCount:m,compressionLevel:i,sceneCenter:r,minSphericalHarmonicsCoeff:c,maxSphericalHarmonicsCoeff:u},_);let y=gt.HeaderSizeBytes;for(let w of p)new Uint8Array(_,y,gt.SectionHeaderSizeBytes).set(new Uint8Array(w)),y+=gt.SectionHeaderSizeBytes;for(let w of h)new Uint8Array(_,y,w.byteLength).set(new Uint8Array(w)),y+=w.byteLength;return new gt(_)}static computeBucketsForUncompressedSplatArray(e,t,i){let r=e.splatCount;const s=t/2,a=new ze,o=new ze;for(let m=0;m<r;m++){const v=e.splats[m],g=[v[cn.OFFSET.X],v[cn.OFFSET.Y],v[cn.OFFSET.Z]];(m===0||g[0]<a.x)&&(a.x=g[0]),(m===0||g[0]>o.x)&&(o.x=g[0]),(m===0||g[1]<a.y)&&(a.y=g[1]),(m===0||g[1]>o.y)&&(o.y=g[1]),(m===0||g[2]<a.z)&&(a.z=g[2]),(m===0||g[2]>o.z)&&(o.z=g[2])}const l=new ze().copy(o).sub(a),c=Math.ceil(l.y/t),u=Math.ceil(l.z/t),d=new ze,f=[],h={};for(let m=0;m<r;m++){const v=e.splats[m],g=[v[cn.OFFSET.X],v[cn.OFFSET.Y],v[cn.OFFSET.Z]],_=Math.floor((g[0]-a.x)/t),y=Math.floor((g[1]-a.y)/t),S=Math.floor((g[2]-a.z)/t);d.x=_*t+a.x+s,d.y=y*t+a.y+s,d.z=S*t+a.z+s;const w=_*(c*u)+y*u+S;let x=h[w];x||(h[w]=x={splats:[],center:d.toArray()}),x.splats.push(m),x.splats.length>=i&&(f.push(x),h[w]=null)}const p=[];for(let m in h)if(h.hasOwnProperty(m)){const v=h[m];v&&p.push(v)}return{fullBuckets:f,partiallyFullBuckets:p}}};kt(gt,"CurrentMajorVersion",0),kt(gt,"CurrentMinorVersion",1),kt(gt,"CenterComponentCount",3),kt(gt,"ScaleComponentCount",3),kt(gt,"RotationComponentCount",4),kt(gt,"ColorComponentCount",4),kt(gt,"CovarianceComponentCount",6),kt(gt,"SplatScaleOffsetFloat",3),kt(gt,"SplatRotationOffsetFloat",6),kt(gt,"CompressionLevels",{0:{BytesPerCenter:12,BytesPerScale:12,BytesPerRotation:16,BytesPerColor:4,ScaleOffsetBytes:12,RotationffsetBytes:24,ColorOffsetBytes:40,SphericalHarmonicsOffsetBytes:44,ScaleRange:1,BytesPerSphericalHarmonicsComponent:4,SphericalHarmonicsOffsetFloat:11,SphericalHarmonicsDegrees:{0:{BytesPerSplat:44},1:{BytesPerSplat:80},2:{BytesPerSplat:140}}},1:{BytesPerCenter:6,BytesPerScale:6,BytesPerRotation:8,BytesPerColor:4,ScaleOffsetBytes:6,RotationffsetBytes:12,ColorOffsetBytes:20,SphericalHarmonicsOffsetBytes:24,ScaleRange:32767,BytesPerSphericalHarmonicsComponent:2,SphericalHarmonicsOffsetFloat:12,SphericalHarmonicsDegrees:{0:{BytesPerSplat:24},1:{BytesPerSplat:42},2:{BytesPerSplat:72}}},2:{BytesPerCenter:6,BytesPerScale:6,BytesPerRotation:8,BytesPerColor:4,ScaleOffsetBytes:6,RotationffsetBytes:12,ColorOffsetBytes:20,SphericalHarmonicsOffsetBytes:24,ScaleRange:32767,BytesPerSphericalHarmonicsComponent:1,SphericalHarmonicsOffsetFloat:12,SphericalHarmonicsDegrees:{0:{BytesPerSplat:24},1:{BytesPerSplat:33},2:{BytesPerSplat:48}}}}),kt(gt,"CovarianceSizeFloats",6),kt(gt,"HeaderSizeBytes",4096),kt(gt,"SectionHeaderSizeBytes",1024),kt(gt,"BucketStorageSizeBytes",12),kt(gt,"BucketStorageSizeFloats",3),kt(gt,"BucketBlockSize",5),kt(gt,"BucketSize",256),kt(gt,"computeCovariance",function(){const e=new In,t=new En,i=new En,r=new En,s=new En,a=new En,o=new En;return function(l,c,u,d,f=0,h){e.makeScale(l.x,l.y,l.z),t.setFromMatrix4(e),e.makeRotationFromQuaternion(c),i.setFromMatrix4(e),r.copy(i).multiply(t),s.copy(r).transpose().premultiply(r),u&&(a.setFromMatrix4(u),o.copy(a).transpose(),s.multiply(o),s.premultiply(a)),h>=1?(d[f]=Ir(s.elements[0]),d[f+1]=Ir(s.elements[3]),d[f+2]=Ir(s.elements[6]),d[f+3]=Ir(s.elements[4]),d[f+4]=Ir(s.elements[7]),d[f+5]=Ir(s.elements[8])):(d[f]=s.elements[0],d[f+1]=s.elements[3],d[f+2]=s.elements[6],d[f+3]=s.elements[4],d[f+4]=s.elements[7],d[f+5]=s.elements[8])}}()),kt(gt,"dot3",(e,t,i,r,s)=>{s[0]=s[1]=s[2]=0;const a=r[0],o=r[1],l=r[2];gt.addInto3(e[0]*a,e[1]*a,e[2]*a,s),gt.addInto3(t[0]*o,t[1]*o,t[2]*o,s),gt.addInto3(i[0]*l,i[1]*l,i[2]*l,s)}),kt(gt,"addInto3",(e,t,i,r)=>{r[0]=r[0]+e,r[1]=r[1]+t,r[2]=r[2]+i}),kt(gt,"dot5",(e,t,i,r,s,a,o)=>{o[0]=o[1]=o[2]=0;const l=a[0],c=a[1],u=a[2],d=a[3],f=a[4];gt.addInto3(e[0]*l,e[1]*l,e[2]*l,o),gt.addInto3(t[0]*c,t[1]*c,t[2]*c,o),gt.addInto3(i[0]*u,i[1]*u,i[2]*u,o),gt.addInto3(r[0]*d,r[1]*d,r[2]*d,o),gt.addInto3(s[0]*f,s[1]*f,s[2]*f,o)}),kt(gt,"rotateSphericalHarmonics3",(e,t,i,r,s,a,o,l,c)=>{gt.dot3(e,t,i,r,o),gt.dot3(e,t,i,s,l),gt.dot3(e,t,i,a,c)}),kt(gt,"rotateSphericalHarmonics5",(e,t,i,r,s,a,o,l,c,u,d,f,h,p,m,v,g,_)=>{const y=Math.sqrt(.25),S=Math.sqrt(3/4),w=Math.sqrt(1/3),x=Math.sqrt(4/3),T=Math.sqrt(1/12);c[0]=y*(l[2]*a[0]+l[0]*a[2]+(a[2]*l[0]+a[0]*l[2])),c[1]=l[1]*a[0]+a[1]*l[0],c[2]=S*(l[1]*a[1]+a[1]*l[1]),c[3]=l[1]*a[2]+a[1]*l[2],c[4]=y*(l[2]*a[2]-l[0]*a[0]+(a[2]*l[2]-a[0]*l[0])),gt.dot5(e,t,i,r,s,c,p),u[0]=y*(o[2]*a[0]+o[0]*a[2]+(a[2]*o[0]+a[0]*o[2])),u[1]=o[1]*a[0]+a[1]*o[0],u[2]=S*(o[1]*a[1]+a[1]*o[1]),u[3]=o[1]*a[2]+a[1]*o[2],u[4]=y*(o[2]*a[2]-o[0]*a[0]+(a[2]*o[2]-a[0]*o[0])),gt.dot5(e,t,i,r,s,u,m),d[0]=w*(o[2]*o[0]+o[0]*o[2])+-T*(l[2]*l[0]+l[0]*l[2]+(a[2]*a[0]+a[0]*a[2])),d[1]=x*o[1]*o[0]+-w*(l[1]*l[0]+a[1]*a[0]),d[2]=o[1]*o[1]+-y*(l[1]*l[1]+a[1]*a[1]),d[3]=x*o[1]*o[2]+-w*(l[1]*l[2]+a[1]*a[2]),d[4]=w*(o[2]*o[2]-o[0]*o[0])+-T*(l[2]*l[2]-l[0]*l[0]+(a[2]*a[2]-a[0]*a[0])),gt.dot5(e,t,i,r,s,d,v),f[0]=y*(o[2]*l[0]+o[0]*l[2]+(l[2]*o[0]+l[0]*o[2])),f[1]=o[1]*l[0]+l[1]*o[0],f[2]=S*(o[1]*l[1]+l[1]*o[1]),f[3]=o[1]*l[2]+l[1]*o[2],f[4]=y*(o[2]*l[2]-o[0]*l[0]+(l[2]*o[2]-l[0]*o[0])),gt.dot5(e,t,i,r,s,f,g),h[0]=y*(l[2]*l[0]+l[0]*l[2]-(a[2]*a[0]+a[0]*a[2])),h[1]=l[1]*l[0]-a[1]*a[0],h[2]=S*(l[1]*l[1]-a[1]*a[1]),h[3]=l[1]*l[2]-a[1]*a[2],h[4]=y*(l[2]*l[2]-l[0]*l[0]-(a[2]*a[2]-a[0]*a[0])),gt.dot5(e,t,i,r,s,h,_)}),kt(gt,"writeSplatDataToSectionBuffer",function(){const e=new ArrayBuffer(12),t=new ArrayBuffer(12),i=new ArrayBuffer(16),r=new ArrayBuffer(4),s=new ArrayBuffer(256),a=new Ji,o=new ze,l=new ze,{X:c,Y:u,Z:d,SCALE0:f,SCALE1:h,SCALE2:p,ROTATION0:m,ROTATION1:v,ROTATION2:g,ROTATION3:_,FDC0:y,FDC1:S,FDC2:w,OPACITY:x,FRC0:T,FRC9:C}=cn.OFFSET,M=(A,E,I)=>{const P=I*2+1;return A=Math.round(A*E)+I,os(A,0,P)};return function(A,E,I,P,D,L,R,B,k=-qu,O=qu){const U=pv(D),G=gt.CompressionLevels[P].BytesPerCenter,q=gt.CompressionLevels[P].BytesPerScale,W=gt.CompressionLevels[P].BytesPerRotation,Y=gt.CompressionLevels[P].BytesPerColor,J=I,Z=J+G,ee=Z+q,me=ee+W,ye=me+Y;if(A[m]!==void 0?(a.set(A[m],A[v],A[g],A[_]),a.normalize()):a.set(1,0,0,0),A[f]!==void 0?o.set(A[f]||0,A[h]||0,A[p]||0):o.set(0,0,0),P===0){const Ee=new Float32Array(E,J,gt.CenterComponentCount),H=new Float32Array(E,ee,gt.RotationComponentCount),Q=new Float32Array(E,Z,gt.ScaleComponentCount);if(H.set([a.x,a.y,a.z,a.w]),Q.set([o.x,o.y,o.z]),Ee.set([A[c],A[u],A[d]]),D>0){const j=new Float32Array(E,ye,U);if(D>=1){for(let Pe=0;Pe<9;Pe++)j[Pe]=A[T+Pe]||0;if(D>=2)for(let Pe=0;Pe<15;Pe++)j[Pe+9]=A[C+Pe]||0}}}else{const Ee=new Uint16Array(e,0,gt.CenterComponentCount),H=new Uint16Array(i,0,gt.RotationComponentCount),Q=new Uint16Array(t,0,gt.ScaleComponentCount);if(H.set([Ir(a.x),Ir(a.y),Ir(a.z),Ir(a.w)]),Q.set([Ir(o.x),Ir(o.y),Ir(o.z)]),l.set(A[c],A[u],A[d]).sub(L),l.x=M(l.x,R,B),l.y=M(l.y,R,B),l.z=M(l.z,R,B),Ee.set([l.x,l.y,l.z]),D>0){const j=P===1?Uint16Array:Uint8Array,Pe=P===1?2:1,we=new j(s,0,U);if(D>=1){for(let Me=0;Me<9;Me++){const Ae=A[T+Me]||0;we[Me]=P===1?Ir(Ae):Py(Ae,k,O)}const De=9*Pe;if(ym(we.buffer,0,E,ye,De),D>=2){for(let Me=0;Me<15;Me++){const Ae=A[C+Me]||0;we[Me+9]=P===1?Ir(Ae):Py(Ae,k,O)}ym(we.buffer,De,E,ye+De,15*Pe)}}}ym(Ee.buffer,0,E,J,6),ym(Q.buffer,0,E,Z,6),ym(H.buffer,0,E,ee,8)}const Te=new Uint8ClampedArray(r,0,4);Te.set([A[y]||0,A[S]||0,A[w]||0]),Te[3]=A[x]||0,ym(Te.buffer,0,E,me,4)}}());let fn=gt;const j$=new Uint8Array([112,108,121,10]),Q$=new Uint8Array([10,101,110,100,95,104,101,97,100,101,114,10]),C2="end_header",M2=new Map([["char",Int8Array],["uchar",Uint8Array],["short",Int16Array],["ushort",Uint16Array],["int",Int32Array],["uint",Uint32Array],["float",Float32Array],["double",Float64Array]]),Hl=(n,e)=>{const t=(1<<e)-1;return(n&t)/t},Z$=(n,e)=>{n.x=Hl(e>>>21,11),n.y=Hl(e>>>11,10),n.z=Hl(e,11)},dZe=(n,e)=>{n.x=Hl(e>>>24,8),n.y=Hl(e>>>16,8),n.z=Hl(e>>>8,8),n.w=Hl(e,8)},fZe=(n,e)=>{const t=1/(Math.sqrt(2)*.5),i=(Hl(e>>>20,10)-.5)*t,r=(Hl(e>>>10,10)-.5)*t,s=(Hl(e,10)-.5)*t,a=Math.sqrt(1-(i*i+r*r+s*s));switch(e>>>30){case 0:n.set(a,i,r,s);break;case 1:n.set(i,a,r,s);break;case 2:n.set(i,r,a,s);break;case 3:n.set(i,r,s,a);break}},_m=(n,e,t)=>n*(1-t)+e*t,bs=(n,e)=>{var t;return(t=n.properties.find(i=>i.name===e&&i.storage))==null?void 0:t.storage},xs=class xs{static decodeHeaderText(e){let t,i,r;const s=e.split(`
`).filter(l=>!l.startsWith("comment "));let a=0,o=!1;for(let l=1;l<s.length;++l){const c=s[l].split(" ");switch(c[0]){case"format":if(c[1]!=="binary_little_endian")throw new Error("Unsupported ply format");break;case"element":t={name:c[1],count:parseInt(c[2],10),properties:[],storageSizeBytes:0},t.name==="chunk"?i=t:t.name==="vertex"&&(r=t);break;case"property":{if(!M2.has(c[1]))throw new Error(`Unrecognized property data type '${c[1]}' in ply header`);const u=M2.get(c[1]),d=u.BYTES_PER_ELEMENT*t.count;t.name==="vertex"&&(a+=u.BYTES_PER_ELEMENT),t.properties.push({type:c[1],name:c[2],storage:null,byteSize:u.BYTES_PER_ELEMENT,storageSizeByes:d}),t.storageSizeBytes+=d;break}case C2:o=!0;break;default:throw new Error(`Unrecognized header value '${c[0]}' in ply header`)}if(o)break}return{chunkElement:i,vertexElement:r,bytesPerSplat:a,headerSizeBytes:e.indexOf(C2)+C2.length+1,sphericalHarmonicsDegree:0}}static decodeHeader(e){const t=(u,d)=>{const f=u.length-d.length;let h,p;for(h=0;h<=f;++h){for(p=0;p<d.length&&u[h+p]===d[p];++p);if(p===d.length)return h}return-1},i=(u,d)=>{if(u.length<d.length)return!1;for(let f=0;f<d.length;++f)if(u[f]!==d[f])return!1;return!0};let r=new Uint8Array(e),s;if(r.length>=j$.length&&!i(r,j$))throw new Error("Invalid PLY header");if(s=t(r,Q$),s===-1)throw new Error("End of PLY header not found");const a=new TextDecoder("ascii").decode(r.slice(0,s)),{chunkElement:o,vertexElement:l,bytesPerSplat:c}=xs.decodeHeaderText(a);return{headerSizeBytes:s+Q$.length,bytesPerSplat:c,chunkElement:o,vertexElement:l}}static readElementData(e,t,i,r,s,a=null){let o=t instanceof DataView?t:new DataView(t);r=r||0,s=s||e.count-1;for(let l=r;l<=s;++l)for(let c=0;c<e.properties.length;++c){const u=e.properties[c],d=M2.get(u.type),f=d.BYTES_PER_ELEMENT*e.count;if((!u.storage||u.storage.byteLength<f)&&(!a||a(u.name))&&(u.storage=new d(e.count)),u.storage)switch(u.type){case"char":u.storage[l]=o.getInt8(i);break;case"uchar":u.storage[l]=o.getUint8(i);break;case"short":u.storage[l]=o.getInt16(i,!0);break;case"ushort":u.storage[l]=o.getUint16(i,!0);break;case"int":u.storage[l]=o.getInt32(i,!0);break;case"uint":u.storage[l]=o.getUint32(i,!0);break;case"float":u.storage[l]=o.getFloat32(i,!0);break;case"double":u.storage[l]=o.getFloat64(i,!0);break}i+=u.byteSize}return i}static readPly(e,t=null){const i=xs.decodeHeader(e);let r=xs.readElementData(i.chunkElement,e,i.headerSizeBytes,null,null,t);return xs.readElementData(i.vertexElement,e,r,null,null,t),{chunkElement:i.chunkElement,vertexElement:i.vertexElement}}static getElementStorageArrays(e,t){const i=bs(e,"min_x"),r=bs(e,"min_y"),s=bs(e,"min_z"),a=bs(e,"max_x"),o=bs(e,"max_y"),l=bs(e,"max_z"),c=bs(e,"min_scale_x"),u=bs(e,"min_scale_y"),d=bs(e,"min_scale_z"),f=bs(e,"max_scale_x"),h=bs(e,"max_scale_y"),p=bs(e,"max_scale_z"),m=bs(t,"packed_position"),v=bs(t,"packed_rotation"),g=bs(t,"packed_scale"),_=bs(t,"packed_color");return{positionExtremes:{minX:i,maxX:a,minY:r,maxY:o,minZ:s,maxZ:l},scaleExtremes:{minScaleX:c,maxScaleX:f,minScaleY:u,maxScaleY:h,minScaleZ:d,maxScaleZ:p},position:m,rotation:v,scale:g,color:_}}static parseToUncompressedSplatBufferSection(e,t,i,r,s,a,o,l,c,u=null){xs.readElementData(t,a,o,i,r,u);const d=fn.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat,{positionExtremes:f,scaleExtremes:h,position:p,rotation:m,scale:v,color:g}=xs.getElementStorageArrays(e,t),_=cn.createSplat();for(let y=i;y<=r;++y){xs.decompressSplat(y,s,p,f,v,h,m,g,_);const S=y*d+c;fn.writeSplatDataToSectionBuffer(_,l,S,0,0)}}static parseToUncompressedSplatArraySection(e,t,i,r,s,a,o,l,c=null){xs.readElementData(t,a,o,i,r,c);const{positionExtremes:u,scaleExtremes:d,position:f,rotation:h,scale:p,color:m}=xs.getElementStorageArrays(e,t);for(let v=i;v<=r;++v){const g=cn.createSplat();xs.decompressSplat(v,s,f,u,p,d,h,m,g),l.addSplat(g)}}static parseToUncompressedSplatArray(e){const{chunkElement:t,vertexElement:i}=xs.readPly(e),r=new cn,{positionExtremes:s,scaleExtremes:a,position:o,rotation:l,scale:c,color:u}=xs.getElementStorageArrays(t,i);for(let f=0;f<i.count;++f){r.addDefaultSplat();const h=r.getSplat(r.splatCount-1);xs.decompressSplat(f,0,o,s,c,a,l,u,h)}return new In().identity(),r}};kt(xs,"decompressSplat",function(){const e=new ze,t=new Ji,i=new ze,r=new Xi,s=cn.OFFSET;return function(a,o,l,c,u,d,f,h,p){p=p||cn.createSplat();const m=Math.floor((o+a)/256);return Z$(e,l[a]),fZe(t,f[a]),Z$(i,u[a]),dZe(r,h[a]),p[s.X]=_m(c.minX[m],c.maxX[m],e.x),p[s.Y]=_m(c.minY[m],c.maxY[m],e.y),p[s.Z]=_m(c.minZ[m],c.maxZ[m],e.z),p[s.ROTATION0]=t.x,p[s.ROTATION1]=t.y,p[s.ROTATION2]=t.z,p[s.ROTATION3]=t.w,p[s.SCALE0]=Math.exp(_m(d.minScaleX[m],d.maxScaleX[m],i.x)),p[s.SCALE1]=Math.exp(_m(d.minScaleY[m],d.maxScaleY[m],i.y)),p[s.SCALE2]=Math.exp(_m(d.minScaleZ[m],d.maxScaleZ[m],i.z)),p[s.FDC0]=os(Math.floor(r.x*255),0,255),p[s.FDC1]=os(Math.floor(r.y*255),0,255),p[s.FDC2]=os(Math.floor(r.z*255),0,255),p[s.OPACITY]=os(Math.floor(r.w*255),0,255),p}}());let bh=xs;const Td={INRIAV1:0,INRIAV2:1,PlayCanvasCompressed:2},[IZ,HO,VO,$O,GO,WO,KO]=[0,1,2,3,4,5,6],J$={double:IZ,int:HO,uint:VO,float:$O,short:GO,ushort:WO,uchar:KO},hZe={[IZ]:8,[HO]:4,[VO]:4,[$O]:4,[GO]:2,[WO]:2,[KO]:1},Pa=class Pa{constructor(){}decodeSectionHeader(e,t,i=0){const r=[];let s=!1,a=-1,o=0,l=!1,c=null;const u=[],d=[],f=[],h={};for(let g=i;g<e.length;g++){const _=e[g].trim();if(_.startsWith("element"))if(s){a--;break}else{s=!0,i=g,a=g;const y=_.split(" ");let S=0;for(let w of y){const x=w.trim();x.length>0&&(S++,S===2?c=x:S===3&&(o=parseInt(x)))}}else if(_.startsWith("property")){const y=_.match(/(\w+)\s+(\w+)\s+(\w+)/);if(y){const S=y[2],w=y[3];f.push(w);const x=t[w];h[w]=S;const T=J$[S];x!==void 0&&(u.push(x),d[x]=T)}}if(_===Pa.HeaderEndToken){l=!0;break}s&&(r.push(_),a++)}const p=[];let m=0;for(let g of f){const _=h[g];if(h.hasOwnProperty(g)){const y=t[g];y!==void 0&&(p[y]=m)}m+=hZe[J$[_]]}const v=this.decodeSphericalHarmonicsFromSectionHeader(f,t);return{headerLines:r,headerStartLine:i,headerEndLine:a,fieldTypes:d,fieldIds:u,fieldOffsets:p,bytesPerVertex:m,vertexCount:o,dataSizeBytes:m*o,endOfHeader:l,sectionName:c,sphericalHarmonicsDegree:v.degree,sphericalHarmonicsCoefficientsPerChannel:v.coefficientsPerChannel,sphericalHarmonicsDegree1Fields:v.degree1Fields,sphericalHarmonicsDegree2Fields:v.degree2Fields}}decodeSphericalHarmonicsFromSectionHeader(e,t){let i=0,r=0;for(let l of e)l.startsWith("f_rest")&&i++;r=i/3;let s=0;r>=3&&(s=1),r>=8&&(s=2);let a=[],o=[];for(let l=0;l<3;l++){if(s>=1)for(let c=0;c<3;c++)a.push(t["f_rest_"+(c+r*l)]);if(s>=2)for(let c=0;c<5;c++)o.push(t["f_rest_"+(c+r*l+3)])}return{degree:s,coefficientsPerChannel:r,degree1Fields:a,degree2Fields:o}}static getHeaderSectionNames(e){const t=[];for(let i of e)if(i.startsWith("element")){const r=i.split(" ");let s=0;for(let a of r){const o=a.trim();o.length>0&&(s++,s===2&&t.push(o))}}return t}static checkTextForEndHeader(e){return!!e.includes(Pa.HeaderEndToken)}static checkBufferForEndHeader(e,t,i,r){const s=new Uint8Array(e,Math.max(0,t-i),i),a=r.decode(s);return Pa.checkTextForEndHeader(a)}static extractHeaderFromBufferToText(e){const t=new TextDecoder;let i=0,r="";const s=100;for(;;){if(i+s>=e.byteLength)throw new Error("End of file reached while searching for end of header");const a=new Uint8Array(e,i,s);if(r+=t.decode(a),i+=s,Pa.checkBufferForEndHeader(e,i,s*2,t))break}return r}readHeaderFromBuffer(e){const t=new TextDecoder;let i=0,r="";const s=100;for(;;){if(i+s>=e.byteLength)throw new Error("End of file reached while searching for end of header");const a=new Uint8Array(e,i,s);if(r+=t.decode(a),i+=s,Pa.checkBufferForEndHeader(e,i,s*2,t))break}return r}static convertHeaderTextToLines(e){const t=e.split(`
`),i=[];for(let r=0;r<t.length;r++){const s=t[r].trim();if(i.push(s),s===Pa.HeaderEndToken)break}return i}static determineHeaderFormatFromHeaderText(e){const t=Pa.convertHeaderTextToLines(e);let i=Td.INRIAV1;for(let r=0;r<t.length;r++){const s=t[r].trim();if(s.startsWith("element chunk")||s.match(/[A-Za-z]*packed_[A-Za-z]*/))i=Td.PlayCanvasCompressed;else if(s.startsWith("element codebook_centers"))i=Td.INRIAV2;else if(s===Pa.HeaderEndToken)break}return i}static determineHeaderFormatFromPlyBuffer(e){const t=Pa.extractHeaderFromBufferToText(e);return Pa.determineHeaderFormatFromHeaderText(t)}static readVertex(e,t,i,r,s,a,o=!0){const l=i*t.bytesPerVertex+r,c=t.fieldOffsets,u=t.fieldTypes;for(let d of s){const f=u[d];f===$O?a[d]=e.getFloat32(l+c[d],!0):f===GO?a[d]=e.getInt16(l+c[d],!0):f===WO?a[d]=e.getUint16(l+c[d],!0):f===HO?a[d]=e.getInt32(l+c[d],!0):f===VO?a[d]=e.getUint32(l+c[d],!0):f===KO&&(o?a[d]=e.getUint8(l+c[d])/255:a[d]=e.getUint8(l+c[d]))}}};kt(Pa,"HeaderEndToken","end_header");let rs=Pa;const RZ=["scale_0","scale_1","scale_2","rot_0","rot_1","rot_2","rot_3","x","y","z","f_dc_0","f_dc_1","f_dc_2","opacity","red","green","blue","f_rest_0"],pZe=RZ.map((n,e)=>e),[e6,mZe,vZe,gZe,yZe,_Ze,bZe,SZe,wZe,xZe,t6,CZe,MZe,n6,i6,TZe,AZe,EZe]=pZe,rh=class rh{constructor(){this.plyParserutils=new rs}decodeHeaderLines(e){let t=0;e.forEach(u=>{u.includes("f_rest_")&&t++});let i=0;t>=45?i=45:t>=24?i=24:t>=9&&(i=9);let s=Array.from(Array(Math.max(i-1,0))).map((u,d)=>`f_rest_${d+1}`);const a=[...RZ,...s],o=a.map((u,d)=>d),l=o.reduce((u,d)=>(u[a[d]]=d,u),{}),c=this.plyParserutils.decodeSectionHeader(e,l,0);return c.splatCount=c.vertexCount,c.bytesPerSplat=c.bytesPerVertex,c.fieldsToReadIndexes=o,c}decodeHeaderText(e){const t=rs.convertHeaderTextToLines(e),i=this.decodeHeaderLines(t);return i.headerText=e,i.headerSizeBytes=e.indexOf(rs.HeaderEndToken)+rs.HeaderEndToken.length+1,i}decodeHeaderFromBuffer(e){const t=this.plyParserutils.readHeaderFromBuffer(e);return this.decodeHeaderText(t)}findSplatData(e,t){return new DataView(e,t.headerSizeBytes)}parseToUncompressedSplatBufferSection(e,t,i,r,s,a,o,l=0){l=Math.min(l,e.sphericalHarmonicsDegree);const c=fn.CompressionLevels[0].SphericalHarmonicsDegrees[l].BytesPerSplat;for(let u=t;u<=i;u++){const d=rh.parseToUncompressedSplat(r,u,e,s,l),f=u*c+o;fn.writeSplatDataToSectionBuffer(d,a,f,0,l)}}parseToUncompressedSplatArraySection(e,t,i,r,s,a,o=0){o=Math.min(o,e.sphericalHarmonicsDegree);for(let l=t;l<=i;l++){const c=rh.parseToUncompressedSplat(r,l,e,s,o);a.addSplat(c)}}decodeSectionSplatData(e,t,i,r){r=Math.min(r,i.sphericalHarmonicsDegree);const s=new cn(r);for(let a=0;a<t;a++){const o=rh.parseToUncompressedSplat(e,a,i,0,r);s.addSplat(o)}return s}static readSplat(e,t,i,r,s){return rs.readVertex(e,t,i,r,t.fieldsToReadIndexes,s,!0)}parseToUncompressedSplatArray(e,t=0){const i=this.decodeHeaderFromBuffer(e),r=i.splatCount,s=this.findSplatData(e,i);return this.decodeSectionSplatData(s,r,i,t)}};kt(rh,"parseToUncompressedSplat",function(){let e=[];const t=new Ji,i=cn.OFFSET.X,r=cn.OFFSET.Y,s=cn.OFFSET.Z,a=cn.OFFSET.SCALE0,o=cn.OFFSET.SCALE1,l=cn.OFFSET.SCALE2,c=cn.OFFSET.ROTATION0,u=cn.OFFSET.ROTATION1,d=cn.OFFSET.ROTATION2,f=cn.OFFSET.ROTATION3,h=cn.OFFSET.FDC0,p=cn.OFFSET.FDC1,m=cn.OFFSET.FDC2,v=cn.OFFSET.OPACITY,g=[];for(let _=0;_<45;_++)g[_]=cn.OFFSET.FRC0+_;return function(_,y,S,w=0,x=0){x=Math.min(x,S.sphericalHarmonicsDegree),rh.readSplat(_,S,y,w,e);const T=cn.createSplat(x);if(e[e6]!==void 0?(T[a]=Math.exp(e[e6]),T[o]=Math.exp(e[mZe]),T[l]=Math.exp(e[vZe])):(T[a]=.01,T[o]=.01,T[l]=.01),e[t6]!==void 0){const C=.28209479177387814;T[h]=(.5+C*e[t6])*255,T[p]=(.5+C*e[CZe])*255,T[m]=(.5+C*e[MZe])*255}else e[i6]!==void 0?(T[h]=e[i6]*255,T[p]=e[TZe]*255,T[m]=e[AZe]*255):(T[h]=0,T[p]=0,T[m]=0);if(e[n6]!==void 0&&(T[v]=1/(1+Math.exp(-e[n6]))*255),T[h]=os(Math.floor(T[h]),0,255),T[p]=os(Math.floor(T[p]),0,255),T[m]=os(Math.floor(T[m]),0,255),T[v]=os(Math.floor(T[v]),0,255),x>=1&&e[EZe]!==void 0){for(let C=0;C<9;C++)T[g[C]]=e[S.sphericalHarmonicsDegree1Fields[C]];if(x>=2)for(let C=0;C<15;C++)T[g[9+C]]=e[S.sphericalHarmonicsDegree2Fields[C]]}return t.set(e[gZe],e[yZe],e[_Ze],e[bZe]),t.normalize(),T[c]=t.x,T[u]=t.y,T[d]=t.z,T[f]=t.w,T[i]=e[SZe],T[r]=e[wZe],T[s]=e[xZe],T}}());let DC=rh;const PZ=["features_dc","features_rest_0","features_rest_1","features_rest_2","features_rest_3","features_rest_4","features_rest_5","features_rest_6","features_rest_7","features_rest_8","features_rest_9","features_rest_10","features_rest_11","features_rest_12","features_rest_13","features_rest_14","opacity","scaling","rotation_re","rotation_im"],Yw=PZ.map((n,e)=>e),[jw,IZe,RZe,r6,Qw,PZe,T2]=[0,1,4,16,17,18,19],DZ=["scale_0","scale_1","scale_2","rot_0","rot_1","rot_2","rot_3","x","y","z","f_dc_0","f_dc_1","f_dc_2","opacity","red","green","blue","f_rest_0","f_rest_1","f_rest_2","f_rest_3","f_rest_4","f_rest_5","f_rest_6","f_rest_7","f_rest_8","f_rest_9","f_rest_10","f_rest_11","f_rest_12","f_rest_13","f_rest_14","f_rest_15","f_rest_16","f_rest_17","f_rest_18","f_rest_19","f_rest_20","f_rest_21","f_rest_22","f_rest_23","f_rest_24","f_rest_25","f_rest_26","f_rest_27","f_rest_28","f_rest_29","f_rest_30","f_rest_31","f_rest_32","f_rest_33","f_rest_34","f_rest_35","f_rest_36","f_rest_37","f_rest_38","f_rest_39","f_rest_40","f_rest_41","f_rest_42","f_rest_43","f_rest_44","f_rest_45"],SD=DZ.map((n,e)=>e),[s6,DZe,LZe,kZe,OZe,NZe,BZe,FZe,zZe,UZe,wD,LZ,kZ,a6]=SD,o6=wD,HZe=LZ,VZe=kZ,Zw=n=>{const e=(31744&n)>>10,t=1023&n;return(n>>15?-1:1)*(e?e===31?t?NaN:1/0:Math.pow(2,e-15)*(1+t/1024):t/1024*6103515625e-14)},Ny=class Ny{constructor(){this.plyParserutils=new rs}decodeSectionHeadersFromHeaderLines(e){const t=SD.reduce((u,d)=>(u[DZ[d]]=d,u),{}),i=Yw.reduce((u,d)=>(u[PZ[d]]=d,u),{}),r=rs.getHeaderSectionNames(e);let s;for(let u=0;u<r.length;u++)r[u]==="codebook_centers"&&(s=u);let a=0,o=!1;const l=[];let c=0;for(;!o;){let u;c===s?u=this.plyParserutils.decodeSectionHeader(e,i,a):u=this.plyParserutils.decodeSectionHeader(e,t,a),o=u.endOfHeader,a=u.headerEndLine+1,o||(u.splatCount=u.vertexCount,u.bytesPerSplat=u.bytesPerVertex),l.push(u),c++}return l}decodeSectionHeadersFromHeaderText(e){const t=rs.convertHeaderTextToLines(e);return this.decodeSectionHeadersFromHeaderLines(t)}getSplatCountFromSectionHeaders(e){let t=0;for(let i of e)i.sectionName!=="codebook_centers"&&(t+=i.vertexCount);return t}decodeHeaderFromHeaderText(e){const t=e.indexOf(rs.HeaderEndToken)+rs.HeaderEndToken.length+1,i=this.decodeSectionHeadersFromHeaderText(e),r=this.getSplatCountFromSectionHeaders(i);return{headerSizeBytes:t,sectionHeaders:i,splatCount:r}}decodeHeaderFromBuffer(e){const t=this.plyParserutils.readHeaderFromBuffer(e);return this.decodeHeaderFromHeaderText(t)}findVertexData(e,t,i){let r=t.headerSizeBytes;for(let s=0;s<i&&s<t.sectionHeaders.length;s++){const a=t.sectionHeaders[s];r+=a.dataSizeBytes}return new DataView(e,r,t.sectionHeaders[i].dataSizeBytes)}decodeCodeBook(e,t){const i=[],r=[];for(let s=0;s<t.vertexCount;s++){rs.readVertex(e,t,s,0,Yw,i);for(let a of Yw){const o=Yw[a];let l=r[o];l||(r[o]=l=[]),l.push(i[a])}}for(let s=0;s<r.length;s++){const a=r[s],o=.28209479177387814;for(let l=0;l<a.length;l++){const c=Zw(a[l]);s===r6?a[l]=Math.round(1/(1+Math.exp(-c))*255):s===jw?a[l]=Math.round((.5+o*c)*255):s===Qw?a[l]=Math.exp(c):a[l]=c}}return r}decodeSectionSplatData(e,t,i,r,s){s=Math.min(s,i.sphericalHarmonicsDegree);const a=new cn(s);for(let o=0;o<t;o++){const l=Ny.parseToUncompressedSplat(e,o,i,r,0,s);a.addSplat(l)}return a}static readSplat(e,t,i,r,s){return rs.readVertex(e,t,i,r,SD,s,!1)}parseToUncompressedSplatArray(e,t=0){const i=[],r=this.decodeHeaderFromBuffer(e,t);let s;for(let o=0;o<r.sectionHeaders.length;o++){const l=r.sectionHeaders[o];if(l.sectionName==="codebook_centers"){const c=this.findVertexData(e,r,o);s=this.decodeCodeBook(c,l)}}for(let o=0;o<r.sectionHeaders.length;o++){const l=r.sectionHeaders[o];if(l.sectionName!=="codebook_centers"){const c=l.vertexCount,u=this.findVertexData(e,r,o),d=this.decodeSectionSplatData(u,c,l,s,t);i.push(d)}}const a=new cn(t);for(let o of i)for(let l of o.splats)a.addSplat(l);return a}};kt(Ny,"parseToUncompressedSplat",function(){let e=[];const t=new Ji,i=cn.OFFSET.X,r=cn.OFFSET.Y,s=cn.OFFSET.Z,a=cn.OFFSET.SCALE0,o=cn.OFFSET.SCALE1,l=cn.OFFSET.SCALE2,c=cn.OFFSET.ROTATION0,u=cn.OFFSET.ROTATION1,d=cn.OFFSET.ROTATION2,f=cn.OFFSET.ROTATION3,h=cn.OFFSET.FDC0,p=cn.OFFSET.FDC1,m=cn.OFFSET.FDC2,v=cn.OFFSET.OPACITY,g=[];for(let _=0;_<45;_++)g[_]=cn.OFFSET.FRC0+_;return function(_,y,S,w,x=0,T=0){T=Math.min(T,S.sphericalHarmonicsDegree),Ny.readSplat(_,S,y,x,e);const C=cn.createSplat(T);if(e[s6]!==void 0?(C[a]=w[Qw][e[s6]],C[o]=w[Qw][e[DZe]],C[l]=w[Qw][e[LZe]]):(C[a]=.01,C[o]=.01,C[l]=.01),e[wD]!==void 0?(C[h]=w[jw][e[wD]],C[p]=w[jw][e[LZ]],C[m]=w[jw][e[kZ]]):e[o6]!==void 0?(C[h]=e[o6]*255,C[p]=e[HZe]*255,C[m]=e[VZe]*255):(C[h]=0,C[p]=0,C[m]=0),e[a6]!==void 0&&(C[v]=w[r6][e[a6]]),C[h]=os(Math.floor(C[h]),0,255),C[p]=os(Math.floor(C[p]),0,255),C[m]=os(Math.floor(C[m]),0,255),C[v]=os(Math.floor(C[v]),0,255),T>=1&&S.sphericalHarmonicsDegree>=1){for(let P=0;P<9;P++){const D=w[IZe+P%3];C[g[P]]=D[e[S.sphericalHarmonicsDegree1Fields[P]]]}if(T>=2&&S.sphericalHarmonicsDegree>=2)for(let P=0;P<15;P++){const D=w[RZe+P%5];C[g[9+P]]=D[e[S.sphericalHarmonicsDegree2Fields[P]]]}}const M=w[PZe][e[kZe]],A=w[T2][e[OZe]],E=w[T2][e[NZe]],I=w[T2][e[BZe]];return t.set(M,A,E,I),t.normalize(),C[c]=t.x,C[u]=t.y,C[d]=t.z,C[f]=t.w,C[i]=Zw(e[FZe]),C[r]=Zw(e[zZe]),C[s]=Zw(e[UZe]),C}}());let xD=Ny;class $Ze{static parseToUncompressedSplatArray(e,t=0){const i=rs.determineHeaderFormatFromPlyBuffer(e);if(i===Td.PlayCanvasCompressed)return bh.parseToUncompressedSplatArray(e);if(i===Td.INRIAV1)return new DC().parseToUncompressedSplatArray(e,t);if(i===Td.INRIAV2)return new xD().parseToUncompressedSplatArray(e,t)}}class qO{constructor(e,t,i,r){this.sectionCount=e,this.sectionFilters=t,this.groupingParameters=i,this.partitionGenerator=r}partitionUncompressedSplatArray(e){let t,i,r;if(this.partitionGenerator){const a=this.partitionGenerator(e);t=a.groupingParameters,i=a.sectionCount,r=a.sectionFilters}else t=this.groupingParameters,i=this.sectionCount,r=this.sectionFilters;const s=[];for(let a=0;a<i;a++){const o=new cn(e.sphericalHarmonicsDegree),l=r[a];for(let c=0;c<e.splatCount;c++)l(c)&&o.addSplat(e.splats[c]);s.push(o)}return{splatArrays:s,parameters:t}}static getStandardPartitioner(e=0,t=new ze,i=fn.BucketBlockSize,r=fn.BucketSize){const s=a=>{const o=cn.OFFSET.X,l=cn.OFFSET.Y,c=cn.OFFSET.Z;e<=0&&(e=a.splatCount);const u=new ze,d=.5,f=g=>{g.x=Math.floor(g.x/d)*d,g.y=Math.floor(g.y/d)*d,g.z=Math.floor(g.z/d)*d};a.splats.forEach(g=>{u.set(g[o],g[l],g[c]).sub(t),f(u),g.centerDist=u.lengthSq()}),a.splats.sort((g,_)=>{let y=g.centerDist,S=_.centerDist;return y>S?1:-1});const h=[],p=[];e=Math.min(a.splatCount,e);const m=Math.ceil(a.splatCount/e);let v=0;for(let g=0;g<m;g++){let _=v;h.push(y=>y>=_&&y<_+e),p.push({blocksSize:i,bucketSize:r}),v+=e}return{sectionCount:h.length,sectionFilters:h,groupingParameters:p}};return new qO(void 0,void 0,void 0,s)}}class eT{constructor(e,t,i,r,s,a,o){this.splatPartitioner=e,this.alphaRemovalThreshold=t,this.compressionLevel=i,this.sectionSize=r,this.sceneCenter=s?new ze().copy(s):void 0,this.blockSize=a,this.bucketSize=o}generateFromUncompressedSplatArray(e){const t=this.splatPartitioner.partitionUncompressedSplatArray(e);return fn.generateFromUncompressedSplatArrays(t.splatArrays,this.alphaRemovalThreshold,this.compressionLevel,this.sceneCenter,this.blockSize,this.bucketSize,t.parameters)}static getStandardGenerator(e=1,t=1,i=0,r=new ze,s=fn.BucketBlockSize,a=fn.BucketSize){const o=qO.getStandardPartitioner(i,r,s,a);return new eT(o,e,t,i,r,s,a)}}const Pr={Downloading:0,Processing:1,Done:2};class XO extends Error{constructor(e){super(e)}}const sr={DirectToSplatBuffer:0,DirectToSplatArray:1,DownloadBeforeProcessing:2};function l6(n,e){let t=0;for(let r of n)t+=r.sizeBytes;(!e||e.byteLength<t)&&(e=new ArrayBuffer(t));let i=0;for(let r of n)new Uint8Array(e,i,r.sizeBytes).set(r.data),i+=r.sizeBytes;return e}function c6(n,e,t,i,r,s,a,o){return e?eT.getStandardGenerator(t,i,r,s,a,o).generateFromUncompressedSplatArray(n):fn.generateFromUncompressedSplatArrays([n],t,0,new ze)}class YO{static loadFromURL(e,t,i,r,s,a,o=!0,l=0,c,u,d,f,h){let p=i?sr.DirectToSplatBuffer:sr.DirectToSplatArray;o&&(p=sr.DirectToSplatArray);const m=ii.ProgressiveLoadSectionSize,v=fn.HeaderSizeBytes+fn.SectionHeaderSizeBytes,g=1;let _,y,S,w,x=0,T=0,C=!1,M=!1,A=!1;const E=BO();let I=0,P=0,D=0,L="",R=null,B=[],k;const O=new TextDecoder,U=new DC,G=(q,W,Y)=>{const J=q>=100;if(Y&&(B.push({data:Y,sizeBytes:Y.byteLength,startBytes:D,endBytes:D+Y.byteLength}),D+=Y.byteLength),p===sr.DownloadBeforeProcessing)J&&E.resolve(B);else{if(C){if(A&&!M){const Z=R.headerSizeBytes+R.chunkElement.storageSizeBytes;w=l6(B,w),w.byteLength>=Z&&(bh.readElementData(R.chunkElement,w,R.headerSizeBytes),I=Z,P=Z,M=!0)}}else if(L+=O.decode(Y),rs.checkTextForEndHeader(L)){const Z=rs.determineHeaderFormatFromHeaderText(L);if(Z===Td.INRIAV1)R=U.decodeHeaderText(L),x=R.splatCount,M=!0,A=!1;else if(Z===Td.PlayCanvasCompressed)R=bh.decodeHeaderText(L),x=R.vertexElement.count,A=!0;else{if(i)throw new XO("PlyLoader.loadFromURL() -> Selected Ply format cannot be directly loaded.");p=sr.DownloadBeforeProcessing;return}l=Math.min(l,R.sphericalHarmonicsDegree);const ee=fn.CompressionLevels[0].SphericalHarmonicsDegrees[l],me=v+ee.BytesPerSplat*x;p===sr.DirectToSplatBuffer?(y=new ArrayBuffer(me),fn.writeHeaderToBuffer({versionMajor:fn.CurrentMajorVersion,versionMinor:fn.CurrentMinorVersion,maxSectionCount:g,sectionCount:g,maxSplatCount:x,splatCount:T,compressionLevel:0,sceneCenter:new ze},y)):k=new cn(l),I=R.headerSizeBytes,P=R.headerSizeBytes,C=!0}if(C&&M){if(B.length>0&&(_=l6(B,_),D-I>m||J)){const ee=D-P,me=Math.floor(ee/R.bytesPerSplat),ye=me*R.bytesPerSplat,Te=ee-ye,Ee=T+me,H=P-B[0].startBytes,Q=new DataView(_,H,ye),j=fn.CompressionLevels[0].SphericalHarmonicsDegrees[l],Pe=T*j.BytesPerSplat+v;if(p===sr.DirectToSplatBuffer?A?bh.parseToUncompressedSplatBufferSection(R.chunkElement,R.vertexElement,0,me-1,T,Q,0,y,Pe):U.parseToUncompressedSplatBufferSection(R,0,me-1,Q,0,y,Pe,l):A?bh.parseToUncompressedSplatArraySection(R.chunkElement,R.vertexElement,0,me-1,T,Q,0,k):U.parseToUncompressedSplatArraySection(R,0,me-1,Q,0,k,l),T=Ee,p===sr.DirectToSplatBuffer&&(S||(fn.writeSectionHeaderToBuffer({maxSplatCount:x,splatCount:T,bucketSize:0,bucketCount:0,bucketBlockSize:0,compressionScaleRange:0,storageSizeBytes:0,fullBucketCount:0,partiallyFilledBucketCount:0,sphericalHarmonicsDegree:l},0,y,fn.HeaderSizeBytes),S=new fn(y,!1)),S.updateLoadedCounts(1,T),r&&r(S,J)),I+=m,P+=ye,Te===0)B=[];else{let we=[],De=0;for(let Me=B.length-1;Me>=0;Me--){const Ae=B[Me];if(De+=Ae.sizeBytes,we.unshift(Ae),De>=Te)break}B=we}}J&&(p===sr.DirectToSplatBuffer?E.resolve(S):E.resolve(k))}}t&&t(q,W,Pr.Downloading)};return t&&t(0,"0%",Pr.Downloading),NO(e,G,!1,c).then(()=>(t&&t(0,"0%",Pr.Processing),E.promise.then(q=>{if(t&&t(100,"100%",Pr.Done),p===sr.DownloadBeforeProcessing){const W=B.map(Y=>Y.data);return new Blob(W).arrayBuffer().then(Y=>YO.loadFromFileData(Y,s,a,o,l,u,d,f,h))}else return p===sr.DirectToSplatBuffer?q:ll(()=>c6(q,o,s,a,u,d,f,h))})))}static loadFromFileData(e,t,i,r,s=0,a,o,l,c){return ll(()=>$Ze.parseToUncompressedSplatArray(e,s)).then(u=>c6(u,r,t,i,a,o,l,c))}}const Ii=class Ii{static parseToUncompressedSplatBufferSection(e,t,i,r,s,a){const o=fn.CompressionLevels[0].BytesPerCenter,l=fn.CompressionLevels[0].BytesPerScale,c=fn.CompressionLevels[0].BytesPerRotation,u=fn.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat;for(let d=e;d<=t;d++){const f=d*Ii.RowSizeBytes+r,h=new Float32Array(i,f,3),p=new Float32Array(i,f+Ii.CenterSizeBytes,3),m=new Uint8Array(i,f+Ii.CenterSizeBytes+Ii.ScaleSizeBytes,4),v=new Uint8Array(i,f+Ii.CenterSizeBytes+Ii.ScaleSizeBytes+Ii.RotationSizeBytes,4),g=new Ji((v[1]-128)/128,(v[2]-128)/128,(v[3]-128)/128,(v[0]-128)/128);g.normalize();const _=d*u+a,y=new Float32Array(s,_,3),S=new Float32Array(s,_+o,3),w=new Float32Array(s,_+o+l,4),x=new Uint8Array(s,_+o+l+c,4);y[0]=h[0],y[1]=h[1],y[2]=h[2],S[0]=p[0],S[1]=p[1],S[2]=p[2],w[0]=g.w,w[1]=g.x,w[2]=g.y,w[3]=g.z,x[0]=m[0],x[1]=m[1],x[2]=m[2],x[3]=m[3]}}static parseToUncompressedSplatArraySection(e,t,i,r,s){for(let a=e;a<=t;a++){const o=a*Ii.RowSizeBytes+r,l=new Float32Array(i,o,3),c=new Float32Array(i,o+Ii.CenterSizeBytes,3),u=new Uint8Array(i,o+Ii.CenterSizeBytes+Ii.ScaleSizeBytes,4),d=new Uint8Array(i,o+Ii.CenterSizeBytes+Ii.ScaleSizeBytes+Ii.RotationSizeBytes,4),f=new Ji((d[1]-128)/128,(d[2]-128)/128,(d[3]-128)/128,(d[0]-128)/128);f.normalize(),s.addSplatFromComonents(l[0],l[1],l[2],c[0],c[1],c[2],f.w,f.x,f.y,f.z,u[0],u[1],u[2],u[3])}}static parseStandardSplatToUncompressedSplatArray(e){const t=e.byteLength/Ii.RowSizeBytes,i=new cn;for(let r=0;r<t;r++){const s=r*Ii.RowSizeBytes,a=new Float32Array(e,s,3),o=new Float32Array(e,s+Ii.CenterSizeBytes,3),l=new Uint8Array(e,s+Ii.CenterSizeBytes+Ii.ScaleSizeBytes,4),c=new Uint8Array(e,s+Ii.CenterSizeBytes+Ii.ScaleSizeBytes+Ii.ColorSizeBytes,4),u=new Ji((c[1]-128)/128,(c[2]-128)/128,(c[3]-128)/128,(c[0]-128)/128);u.normalize(),i.addSplatFromComonents(a[0],a[1],a[2],o[0],o[1],o[2],u.w,u.x,u.y,u.z,l[0],l[1],l[2],l[3])}return i}};kt(Ii,"RowSizeBytes",32),kt(Ii,"CenterSizeBytes",12),kt(Ii,"ScaleSizeBytes",12),kt(Ii,"RotationSizeBytes",4),kt(Ii,"ColorSizeBytes",4);let nh=Ii;function u6(n,e,t,i,r,s,a,o){return e?eT.getStandardGenerator(t,i,r,s,a,o).generateFromUncompressedSplatArray(n):fn.generateFromUncompressedSplatArrays([n],t,0,new ze)}class jO{static loadFromURL(e,t,i,r,s,a,o=!0,l,c,u,d,f){let h=i?sr.DirectToSplatBuffer:sr.DirectToSplatArray;o&&(h=sr.DirectToSplatArray);const p=fn.HeaderSizeBytes+fn.SectionHeaderSizeBytes,m=ii.ProgressiveLoadSectionSize,v=1;let g,_,y,S=0,w=0,x;const T=BO();let C=0,M=0,A=[];const E=(I,P,D,L)=>{const R=I>=100;if(D&&A.push(D),h===sr.DownloadBeforeProcessing){R&&T.resolve(A);return}if(!L){if(i)throw new XO("Cannon directly load .splat because no file size info is available.");h=sr.DownloadBeforeProcessing;return}if(!g){S=L/nh.RowSizeBytes,g=new ArrayBuffer(L);const B=fn.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat,k=p+B*S;h===sr.DirectToSplatBuffer?(_=new ArrayBuffer(k),fn.writeHeaderToBuffer({versionMajor:fn.CurrentMajorVersion,versionMinor:fn.CurrentMinorVersion,maxSectionCount:v,sectionCount:v,maxSplatCount:S,splatCount:w,compressionLevel:0,sceneCenter:new ze},_)):x=new cn(0)}if(D){new Uint8Array(g,M,D.byteLength).set(new Uint8Array(D)),M+=D.byteLength;const B=M-C;if(B>m||R){const O=(R?B:m)/nh.RowSizeBytes,U=w+O;h===sr.DirectToSplatBuffer?nh.parseToUncompressedSplatBufferSection(w,U-1,g,0,_,p):nh.parseToUncompressedSplatArraySection(w,U-1,g,0,x),w=U,h===sr.DirectToSplatBuffer&&(y||(fn.writeSectionHeaderToBuffer({maxSplatCount:S,splatCount:w,bucketSize:0,bucketCount:0,bucketBlockSize:0,compressionScaleRange:0,storageSizeBytes:0,fullBucketCount:0,partiallyFilledBucketCount:0},0,_,fn.HeaderSizeBytes),y=new fn(_,!1)),y.updateLoadedCounts(1,w),r&&r(y,R)),C+=m}}R&&(h===sr.DirectToSplatBuffer?T.resolve(y):T.resolve(x)),t&&t(I,P,Pr.Downloading)};return t&&t(0,"0%",Pr.Downloading),NO(e,E,!1,l).then(()=>(t&&t(0,"0%",Pr.Processing),T.promise.then(I=>(t&&t(100,"100%",Pr.Done),h===sr.DownloadBeforeProcessing?new Blob(A).arrayBuffer().then(P=>jO.loadFromFileData(P,s,a,o,c,u,d,f)):h===sr.DirectToSplatBuffer?I:ll(()=>u6(I,o,s,a,c,u,d,f))))))}static loadFromFileData(e,t,i,r,s,a,o,l){return ll(()=>{const c=nh.parseStandardSplatToUncompressedSplatArray(e);return u6(c,r,t,i,s,a,o,l)})}}const Xm=class Xm{static checkVersion(e){const t=fn.CurrentMajorVersion,i=fn.CurrentMinorVersion,r=fn.parseHeader(e);if(r.versionMajor===t&&r.versionMinor>=i||r.versionMajor>t)return!0;throw new Error(`KSplat version not supported: v${r.versionMajor}.${r.versionMinor}. Minimum required: v${t}.${i}`)}static loadFromURL(e,t,i,r,s){let a,o,l,c,u=!1,d=!1,f,h=[],p=!1,m=!1,v=0,g=0,_=0,y=!1,S=!1,w=!1,x=[];const T=BO(),C=()=>{!u&&!d&&v>=fn.HeaderSizeBytes&&(d=!0,new Blob(x).arrayBuffer().then(L=>{l=new ArrayBuffer(fn.HeaderSizeBytes),new Uint8Array(l).set(new Uint8Array(L,0,fn.HeaderSizeBytes)),Xm.checkVersion(l),d=!1,u=!0,c=fn.parseHeader(l),window.setTimeout(()=>{E()},1)}))};let M=0;const A=()=>{M===0&&(M++,window.setTimeout(()=>{M--,I()},1))},E=()=>{const D=()=>{m=!0,new Blob(x).arrayBuffer().then(R=>{m=!1,p=!0,f=new ArrayBuffer(c.maxSectionCount*fn.SectionHeaderSizeBytes),new Uint8Array(f).set(new Uint8Array(R,fn.HeaderSizeBytes,c.maxSectionCount*fn.SectionHeaderSizeBytes)),h=fn.parseSectionHeaders(c,f,0,!1);let B=0;for(let O=0;O<c.maxSectionCount;O++)B+=h[O].storageSizeBytes;const k=fn.HeaderSizeBytes+c.maxSectionCount*fn.SectionHeaderSizeBytes+B;if(!a){a=new ArrayBuffer(k);let O=0;for(let U=0;U<x.length;U++){const G=x[U];new Uint8Array(a,O,G.byteLength).set(new Uint8Array(G)),O+=G.byteLength}}_=fn.HeaderSizeBytes+fn.SectionHeaderSizeBytes*c.maxSectionCount;for(let O=0;O<=h.length&&O<c.maxSectionCount;O++)_+=h[O].storageSizeBytes;A()})};!m&&!p&&u&&v>=fn.HeaderSizeBytes+fn.SectionHeaderSizeBytes*c.maxSectionCount&&D()},I=()=>{if(w)return;w=!0;const D=()=>{if(w=!1,p){if(S)return;if(y=v>=_,v-g>ii.ProgressiveLoadSectionSize||y){g+=ii.ProgressiveLoadSectionSize,S=g>=_,o||(o=new fn(a,!1));const R=fn.HeaderSizeBytes+fn.SectionHeaderSizeBytes*c.maxSectionCount;let B=0,k=0,O=0;for(let q=0;q<c.maxSectionCount;q++){const W=h[q],Y=B+W.partiallyFilledBucketCount*4+W.bucketStorageSizeBytes*W.bucketCount,J=R+Y;if(g>=J){k++;const Z=g-J,ye=fn.CompressionLevels[c.compressionLevel].SphericalHarmonicsDegrees[W.sphericalHarmonicsDegree].BytesPerSplat;let Te=Math.floor(Z/ye);Te=Math.min(Te,W.maxSplatCount),O+=Te,o.updateLoadedCounts(k,O),o.updateSectionLoadedCounts(q,Te)}else break;B+=W.storageSizeBytes}r(o,S);const U=g/_*100,G=U.toFixed(2)+"%";t&&t(U,G,Pr.Downloading),S?T.resolve(o):I()}}};window.setTimeout(D,ii.ProgressiveLoadSectionDelayDuration)};return NO(e,(D,L,R)=>{R&&(x.push(R),a&&new Uint8Array(a,v,R.byteLength).set(new Uint8Array(R)),v+=R.byteLength),i?(C(),E(),I()):t&&t(D,L,Pr.Downloading)},!i,s).then(D=>(t&&t(0,"0%",Pr.Processing),(i?T.promise:Xm.loadFromFileData(D)).then(R=>(t&&t(100,"100%",Pr.Done),R))))}static loadFromFileData(e){return ll(()=>(Xm.checkVersion(e),new fn(e)))}};kt(Xm,"downloadFile",function(){let e;return function(t,i){const r=new Blob([t.bufferData],{type:"application/octet-stream"});e||(e=document.createElement("a"),document.body.appendChild(e)),e.download=i,e.href=URL.createObjectURL(r),e.click()}}());let CD=Xm;const Nc={Splat:0,KSplat:1,Ply:2},d6=n=>n.endsWith(".ply")?Nc.Ply:n.endsWith(".splat")?Nc.Splat:n.endsWith(".ksplat")?Nc.KSplat:null,f6={type:"change"},A2={type:"start"},h6={type:"end"},Jw=new fZ,p6=new td,GZe=Math.cos(70*lZ.DEG2RAD);class e1 extends fp{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new ze,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"KeyA",UP:"KeyW",RIGHT:"KeyD",BOTTOM:"KeyS"},this.mouseButtons={LEFT:tm.ROTATE,MIDDLE:tm.DOLLY,RIGHT:tm.PAN},this.touches={ONE:nm.ROTATE,TWO:nm.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(V){V.addEventListener("keydown",ae),this._domElementKeyEvents=V},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ae),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,this.clearDampedRotation(),this.clearDampedPan(),i.object.updateProjectionMatrix(),i.dispatchEvent(f6),i.update(),s=r.NONE},this.clearDampedRotation=function(){l.theta=0,l.phi=0},this.clearDampedPan=function(){u.set(0,0,0)},this.update=function(){const V=new ze,re=new Ji().setFromUnitVectors(e.up,new ze(0,1,0)),te=re.clone().invert(),pe=new ze,se=new Ji,de=new ze,qe=2*Math.PI;return function(){re.setFromUnitVectors(e.up,new ze(0,1,0)),te.copy(re).invert();const Je=i.object.position;V.copy(Je).sub(i.target),V.applyQuaternion(re),o.setFromVector3(V),i.autoRotate&&s===r.NONE&&E(M()),i.enableDamping?(o.theta+=l.theta*i.dampingFactor,o.phi+=l.phi*i.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let $e=i.minAzimuthAngle,et=i.maxAzimuthAngle;isFinite($e)&&isFinite(et)&&($e<-Math.PI?$e+=qe:$e>Math.PI&&($e-=qe),et<-Math.PI?et+=qe:et>Math.PI&&(et-=qe),$e<=et?o.theta=Math.max($e,Math.min(et,o.theta)):o.theta=o.theta>($e+et)/2?Math.max($e,o.theta):Math.min(et,o.theta)),o.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,o.phi)),o.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),i.zoomToCursor&&x||i.object.isOrthographicCamera?o.radius=O(o.radius):o.radius=O(o.radius*c),V.setFromSpherical(o),V.applyQuaternion(te),Je.copy(i.target).add(V),i.object.lookAt(i.target),i.enableDamping===!0?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0));let ht=!1;if(i.zoomToCursor&&x){let st=null;if(i.object.isPerspectiveCamera){const Rt=V.length();st=O(Rt*c);const Vt=Rt-st;i.object.position.addScaledVector(S,Vt),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Rt=new ze(w.x,w.y,0);Rt.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/c)),i.object.updateProjectionMatrix(),ht=!0;const Vt=new ze(w.x,w.y,0);Vt.unproject(i.object),i.object.position.sub(Vt).add(Rt),i.object.updateMatrixWorld(),st=V.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;st!==null&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(st).add(i.object.position):(Jw.origin.copy(i.object.position),Jw.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Jw.direction))<GZe?e.lookAt(i.target):(p6.setFromNormalAndCoplanarPoint(i.object.up,i.target),Jw.intersectPlane(p6,i.target))))}else i.object.isOrthographicCamera&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/c)),i.object.updateProjectionMatrix(),ht=!0);return c=1,x=!1,ht||pe.distanceToSquared(i.object.position)>a||8*(1-se.dot(i.object.quaternion))>a||de.distanceToSquared(i.target)>0?(i.dispatchEvent(f6),pe.copy(i.object.position),se.copy(i.object.quaternion),de.copy(i.target),ht=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",Xe),i.domElement.removeEventListener("pointerdown",Me),i.domElement.removeEventListener("pointercancel",Fe),i.domElement.removeEventListener("wheel",K),i.domElement.removeEventListener("pointermove",Ae),i.domElement.removeEventListener("pointerup",Fe),i._domElementKeyEvents!==null&&(i._domElementKeyEvents.removeEventListener("keydown",ae),i._domElementKeyEvents=null)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const a=1e-6,o=new C$,l=new C$;let c=1;const u=new ze,d=new on,f=new on,h=new on,p=new on,m=new on,v=new on,g=new on,_=new on,y=new on,S=new ze,w=new on;let x=!1;const T=[],C={};function M(){return 2*Math.PI/60/60*i.autoRotateSpeed}function A(){return Math.pow(.95,i.zoomSpeed)}function E(V){l.theta-=V}function I(V){l.phi-=V}const P=function(){const V=new ze;return function(te,pe){V.setFromMatrixColumn(pe,0),V.multiplyScalar(-te),u.add(V)}}(),D=function(){const V=new ze;return function(te,pe){i.screenSpacePanning===!0?V.setFromMatrixColumn(pe,1):(V.setFromMatrixColumn(pe,0),V.crossVectors(i.object.up,V)),V.multiplyScalar(te),u.add(V)}}(),L=function(){const V=new ze;return function(te,pe){const se=i.domElement;if(i.object.isPerspectiveCamera){const de=i.object.position;V.copy(de).sub(i.target);let qe=V.length();qe*=Math.tan(i.object.fov/2*Math.PI/180),P(2*te*qe/se.clientHeight,i.object.matrix),D(2*pe*qe/se.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(P(te*(i.object.right-i.object.left)/i.object.zoom/se.clientWidth,i.object.matrix),D(pe*(i.object.top-i.object.bottom)/i.object.zoom/se.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function R(V){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?c/=V:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function B(V){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?c*=V:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function k(V){if(!i.zoomToCursor)return;x=!0;const re=i.domElement.getBoundingClientRect(),te=V.clientX-re.left,pe=V.clientY-re.top,se=re.width,de=re.height;w.x=te/se*2-1,w.y=-(pe/de)*2+1,S.set(w.x,w.y,1).unproject(e).sub(e.position).normalize()}function O(V){return Math.max(i.minDistance,Math.min(i.maxDistance,V))}function U(V){d.set(V.clientX,V.clientY)}function G(V){k(V),g.set(V.clientX,V.clientY)}function q(V){p.set(V.clientX,V.clientY)}function W(V){f.set(V.clientX,V.clientY),h.subVectors(f,d).multiplyScalar(i.rotateSpeed);const re=i.domElement;E(2*Math.PI*h.x/re.clientHeight),I(2*Math.PI*h.y/re.clientHeight),d.copy(f),i.update()}function Y(V){_.set(V.clientX,V.clientY),y.subVectors(_,g),y.y>0?R(A()):y.y<0&&B(A()),g.copy(_),i.update()}function J(V){m.set(V.clientX,V.clientY),v.subVectors(m,p).multiplyScalar(i.panSpeed),L(v.x,v.y),p.copy(m),i.update()}function Z(V){k(V),V.deltaY<0?B(A()):V.deltaY>0&&R(A()),i.update()}function ee(V){let re=!1;switch(V.code){case i.keys.UP:V.ctrlKey||V.metaKey||V.shiftKey?I(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):L(0,i.keyPanSpeed),re=!0;break;case i.keys.BOTTOM:V.ctrlKey||V.metaKey||V.shiftKey?I(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):L(0,-i.keyPanSpeed),re=!0;break;case i.keys.LEFT:V.ctrlKey||V.metaKey||V.shiftKey?E(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):L(i.keyPanSpeed,0),re=!0;break;case i.keys.RIGHT:V.ctrlKey||V.metaKey||V.shiftKey?E(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):L(-i.keyPanSpeed,0),re=!0;break}re&&(V.preventDefault(),i.update())}function me(){if(T.length===1)d.set(T[0].pageX,T[0].pageY);else{const V=.5*(T[0].pageX+T[1].pageX),re=.5*(T[0].pageY+T[1].pageY);d.set(V,re)}}function ye(){if(T.length===1)p.set(T[0].pageX,T[0].pageY);else{const V=.5*(T[0].pageX+T[1].pageX),re=.5*(T[0].pageY+T[1].pageY);p.set(V,re)}}function Te(){const V=T[0].pageX-T[1].pageX,re=T[0].pageY-T[1].pageY,te=Math.sqrt(V*V+re*re);g.set(0,te)}function Ee(){i.enableZoom&&Te(),i.enablePan&&ye()}function H(){i.enableZoom&&Te(),i.enableRotate&&me()}function Q(V){if(T.length==1)f.set(V.pageX,V.pageY);else{const te=Ke(V),pe=.5*(V.pageX+te.x),se=.5*(V.pageY+te.y);f.set(pe,se)}h.subVectors(f,d).multiplyScalar(i.rotateSpeed);const re=i.domElement;E(2*Math.PI*h.x/re.clientHeight),I(2*Math.PI*h.y/re.clientHeight),d.copy(f)}function j(V){if(T.length===1)m.set(V.pageX,V.pageY);else{const re=Ke(V),te=.5*(V.pageX+re.x),pe=.5*(V.pageY+re.y);m.set(te,pe)}v.subVectors(m,p).multiplyScalar(i.panSpeed),L(v.x,v.y),p.copy(m)}function Pe(V){const re=Ke(V),te=V.pageX-re.x,pe=V.pageY-re.y,se=Math.sqrt(te*te+pe*pe);_.set(0,se),y.set(0,Math.pow(_.y/g.y,i.zoomSpeed)),R(y.y),g.copy(_)}function we(V){i.enableZoom&&Pe(V),i.enablePan&&j(V)}function De(V){i.enableZoom&&Pe(V),i.enableRotate&&Q(V)}function Me(V){i.enabled!==!1&&(T.length===0&&(i.domElement.setPointerCapture(V.pointerId),i.domElement.addEventListener("pointermove",Ae),i.domElement.addEventListener("pointerup",Fe)),je(V),V.pointerType==="touch"?xe(V):ne(V))}function Ae(V){i.enabled!==!1&&(V.pointerType==="touch"?Le(V):z(V))}function Fe(V){he(V),T.length===0&&(i.domElement.releasePointerCapture(V.pointerId),i.domElement.removeEventListener("pointermove",Ae),i.domElement.removeEventListener("pointerup",Fe)),i.dispatchEvent(h6),s=r.NONE}function ne(V){let re;switch(V.button){case 0:re=i.mouseButtons.LEFT;break;case 1:re=i.mouseButtons.MIDDLE;break;case 2:re=i.mouseButtons.RIGHT;break;default:re=-1}switch(re){case tm.DOLLY:if(i.enableZoom===!1)return;G(V),s=r.DOLLY;break;case tm.ROTATE:if(V.ctrlKey||V.metaKey||V.shiftKey){if(i.enablePan===!1)return;q(V),s=r.PAN}else{if(i.enableRotate===!1)return;U(V),s=r.ROTATE}break;case tm.PAN:if(V.ctrlKey||V.metaKey||V.shiftKey){if(i.enableRotate===!1)return;U(V),s=r.ROTATE}else{if(i.enablePan===!1)return;q(V),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(A2)}function z(V){switch(s){case r.ROTATE:if(i.enableRotate===!1)return;W(V);break;case r.DOLLY:if(i.enableZoom===!1)return;Y(V);break;case r.PAN:if(i.enablePan===!1)return;J(V);break}}function K(V){i.enabled===!1||i.enableZoom===!1||s!==r.NONE||(V.preventDefault(),i.dispatchEvent(A2),Z(V),i.dispatchEvent(h6))}function ae(V){i.enabled===!1||i.enablePan===!1||ee(V)}function xe(V){switch(Ye(V),T.length){case 1:switch(i.touches.ONE){case nm.ROTATE:if(i.enableRotate===!1)return;me(),s=r.TOUCH_ROTATE;break;case nm.PAN:if(i.enablePan===!1)return;ye(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case nm.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ee(),s=r.TOUCH_DOLLY_PAN;break;case nm.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;H(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(A2)}function Le(V){switch(Ye(V),s){case r.TOUCH_ROTATE:if(i.enableRotate===!1)return;Q(V),i.update();break;case r.TOUCH_PAN:if(i.enablePan===!1)return;j(V),i.update();break;case r.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;we(V),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;De(V),i.update();break;default:s=r.NONE}}function Xe(V){i.enabled!==!1&&V.preventDefault()}function je(V){T.push(V)}function he(V){delete C[V.pointerId];for(let re=0;re<T.length;re++)if(T[re].pointerId==V.pointerId){T.splice(re,1);return}}function Ye(V){let re=C[V.pointerId];re===void 0&&(re=new on,C[V.pointerId]=re),re.set(V.pageX,V.pageY)}function Ke(V){const re=V.pointerId===T[0].pointerId?T[1]:T[0];return C[re.pointerId]}i.domElement.addEventListener("contextmenu",Xe),i.domElement.addEventListener("pointerdown",Me),i.domElement.addEventListener("pointercancel",Fe),i.domElement.addEventListener("wheel",K,{passive:!1}),this.update()}}const WZe=(n,e,t,i,r)=>{const s=performance.now();let a=n.style.display==="none"?0:parseFloat(n.style.opacity);isNaN(a)&&(a=1);const o=window.setInterval(()=>{const c=performance.now()-s;let u=Math.min(c/i,1);u>.999&&(u=1);let d;e?(d=(1-u)*a,d<1e-4&&(d=0)):d=(1-a)*u+a,d>0?(n.style.display=t,n.style.opacity=d):n.style.display="none",u>=1&&(r&&r(),window.clearInterval(o))},16);return o},KZe=500,OC=class OC{constructor(e,t){this.taskIDGen=0,this.elementID=OC.elementIDGen++,this.tasks=[],this.message=e||"Loading...",this.container=t||document.body,this.spinnerContainerOuter=document.createElement("div"),this.spinnerContainerOuter.className=`spinnerOuterContainer${this.elementID}`,this.spinnerContainerOuter.style.display="none",this.spinnerContainerPrimary=document.createElement("div"),this.spinnerContainerPrimary.className=`spinnerContainerPrimary${this.elementID}`,this.spinnerPrimary=document.createElement("div"),this.spinnerPrimary.classList.add(`spinner${this.elementID}`,`spinnerPrimary${this.elementID}`),this.messageContainerPrimary=document.createElement("div"),this.messageContainerPrimary.classList.add(`messageContainer${this.elementID}`,`messageContainerPrimary${this.elementID}`),this.messageContainerPrimary.innerHTML=this.message,this.spinnerContainerMin=document.createElement("div"),this.spinnerContainerMin.className=`spinnerContainerMin${this.elementID}`,this.spinnerMin=document.createElement("div"),this.spinnerMin.classList.add(`spinner${this.elementID}`,`spinnerMin${this.elementID}`),this.messageContainerMin=document.createElement("div"),this.messageContainerMin.classList.add(`messageContainer${this.elementID}`,`messageContainerMin${this.elementID}`),this.messageContainerMin.innerHTML=this.message,this.spinnerContainerPrimary.appendChild(this.spinnerPrimary),this.spinnerContainerPrimary.appendChild(this.messageContainerPrimary),this.spinnerContainerOuter.appendChild(this.spinnerContainerPrimary),this.spinnerContainerMin.appendChild(this.spinnerMin),this.spinnerContainerMin.appendChild(this.messageContainerMin),this.spinnerContainerOuter.appendChild(this.spinnerContainerMin);const i=document.createElement("style");i.innerHTML=`

            .spinnerOuterContainer${this.elementID} {
                width: 100%;
                height: 100%;
                margin: 0;
                top: 0;
                left: 0;
                position: absolute;
                pointer-events: none;
            }

            .messageContainer${this.elementID} {
                height: 20px;
                font-family: arial;
                font-size: 12pt;
                color: #ffffff;
                text-align: center;
                vertical-align: middle;
            }

            .spinner${this.elementID} {
                padding: 15px;
                background: #07e8d6;
                z-index:99999;
            
                aspect-ratio: 1;
                border-radius: 50%;
                --_m: 
                    conic-gradient(#0000,#000),
                    linear-gradient(#000 0 0) content-box;
                -webkit-mask: var(--_m);
                    mask: var(--_m);
                -webkit-mask-composite: source-out;
                    mask-composite: subtract;
                box-sizing: border-box;
                animation: load 1s linear infinite;
            }

            .spinnerContainerPrimary${this.elementID} {
                z-index:99999;
                background-color: rgba(128, 128, 128, 0.75);
                border: #666666 1px solid;
                border-radius: 5px;
                padding-top: 20px;
                padding-bottom: 10px;
                margin: 0;
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-80px, -80px);
                width: 180px;
                pointer-events: auto;
            }

            .spinnerPrimary${this.elementID} {
                width: 120px;
                margin-left: 30px;
            }

            .messageContainerPrimary${this.elementID} {
                padding-top: 15px;
            }

            .spinnerContainerMin${this.elementID} {
                z-index:99999;
                background-color: rgba(128, 128, 128, 0.75);
                border: #666666 1px solid;
                border-radius: 5px;
                padding-top: 20px;
                padding-bottom: 15px;
                margin: 0;
                position: absolute;
                bottom: 50px;
                left: 50%;
                transform: translate(-50%, 0);
                display: flex;
                flex-direction: left;
                pointer-events: auto;
                min-width: 250px;
            }

            .messageContainerMin${this.elementID} {
                margin-right: 15px;
            }

            .spinnerMin${this.elementID} {
                width: 50px;
                height: 50px;
                margin-left: 15px;
                margin-right: 25px;
            }

            .messageContainerMin${this.elementID} {
                padding-top: 15px;
            }
            
            @keyframes load {
                to{transform: rotate(1turn)}
            }

        `,this.spinnerContainerOuter.appendChild(i),this.container.appendChild(this.spinnerContainerOuter),this.setMinimized(!1,!0),this.fadeTransitions=[]}addTask(e){const t={message:e,id:this.taskIDGen++};return this.tasks.push(t),this.update(),t.id}removeTask(e){let t=0;for(let i of this.tasks){if(i.id===e){this.tasks.splice(t,1);break}t++}this.update()}removeAllTasks(){this.tasks=[],this.update()}setMessageForTask(e,t){for(let i of this.tasks)if(i.id===e){i.message=t;break}this.update()}update(){this.tasks.length>0?(this.show(),this.setMessage(this.tasks[this.tasks.length-1].message)):this.hide()}show(){this.spinnerContainerOuter.style.display="block",this.visible=!0}hide(){this.spinnerContainerOuter.style.display="none",this.visible=!1}setContainer(e){this.container&&this.spinnerContainerOuter.parentElement===this.container&&this.container.removeChild(this.spinnerContainerOuter),e&&(this.container=e,this.container.appendChild(this.spinnerContainerOuter),this.spinnerContainerOuter.style.zIndex=this.container.style.zIndex+1)}setMinimized(e,t){const i=(r,s,a,o,l)=>{a?r.style.display=s?o:"none":this.fadeTransitions[l]=WZe(r,!s,o,KZe,()=>{this.fadeTransitions[l]=null})};i(this.spinnerContainerPrimary,!e,t,"block",0),i(this.spinnerContainerMin,e,t,"flex",1),this.minimized=e}setMessage(e){this.messageContainerPrimary.innerHTML=e,this.messageContainerMin.innerHTML=e}};kt(OC,"elementIDGen",0);let MD=OC;class qZe{constructor(e){this.idGen=0,this.tasks=[],this.container=e||document.body,this.progressBarContainerOuter=document.createElement("div"),this.progressBarContainerOuter.className="progressBarOuterContainer",this.progressBarContainerOuter.style.display="none",this.progressBarBox=document.createElement("div"),this.progressBarBox.className="progressBarBox",this.progressBarBackground=document.createElement("div"),this.progressBarBackground.className="progressBarBackground",this.progressBar=document.createElement("div"),this.progressBar.className="progressBar",this.progressBarBackground.appendChild(this.progressBar),this.progressBarBox.appendChild(this.progressBarBackground),this.progressBarContainerOuter.appendChild(this.progressBarBox);const t=document.createElement("style");t.innerHTML=`

            .progressBarOuterContainer {
                width: 100%;
                height: 100%;
                margin: 0;
                top: 0;
                left: 0;
                position: absolute;
                pointer-events: none;
            }

            .progressBarBox {
                z-index:99999;
                padding: 7px 9px 5px 7px;
                background-color: rgba(190, 190, 190, 0.75);
                border: #555555 1px solid;
                border-radius: 15px;
                margin: 0;
                position: absolute;
                bottom: 50px;
                left: 50%;
                transform: translate(-50%, 0);
                width: 180px;
                height: 30px;
                pointer-events: auto;
            }

            .progressBarBackground {
                width: 100%;
                height: 25px;
                border-radius:10px;
                background-color: rgba(128, 128, 128, 0.75);
                border: #444444 1px solid;
                box-shadow: inset 0 0 10px #333333;
            }

            .progressBar {
                height: 25px;
                width: 0px;
                border-radius:10px;
                background-color: rgba(0, 200, 0, 0.75);
                box-shadow: inset 0 0 10px #003300;
            }

        `,this.progressBarContainerOuter.appendChild(t),this.container.appendChild(this.progressBarContainerOuter)}show(){this.progressBarContainerOuter.style.display="block"}hide(){this.progressBarContainerOuter.style.display="none"}setProgress(e){this.progressBar.style.width=e+"%"}setContainer(e){this.container&&this.progressBarContainerOuter.parentElement===this.container&&this.container.removeChild(this.progressBarContainerOuter),e&&(this.container=e,this.container.appendChild(this.progressBarContainerOuter),this.progressBarContainerOuter.style.zIndex=this.container.style.zIndex+1)}}class XZe{constructor(e){kt(this,"update",function(e,t,i,r,s,a,o,l,c,u,d,f,h,p){const m=`${t.x.toFixed(5)}, ${t.y.toFixed(5)}, ${t.z.toFixed(5)}`;if(this.infoCells.cameraPosition.innerHTML!==m&&(this.infoCells.cameraPosition.innerHTML=m),i){const g=i,_=`${g.x.toFixed(5)}, ${g.y.toFixed(5)}, ${g.z.toFixed(5)}`;this.infoCells.cameraLookAt.innerHTML!==_&&(this.infoCells.cameraLookAt.innerHTML=_)}const v=`${r.x.toFixed(5)}, ${r.y.toFixed(5)}, ${r.z.toFixed(5)}`;if(this.infoCells.cameraUp.innerHTML!==v&&(this.infoCells.cameraUp.innerHTML=v),this.infoCells.orthographicCamera.innerHTML=s?"Orthographic":"Perspective",a){const g=a,_=`${g.x.toFixed(5)}, ${g.y.toFixed(5)}, ${g.z.toFixed(5)}`;this.infoCells.cursorPosition.innerHTML=_}else this.infoCells.cursorPosition.innerHTML="N/A";this.infoCells.fps.innerHTML=o,this.infoCells.renderWindow.innerHTML=`${e.x} x ${e.y}`,this.infoCells.renderSplatCount.innerHTML=`${c} splats out of ${l} (${u.toFixed(2)}%)`,this.infoCells.sortTime.innerHTML=`${d.toFixed(3)} ms`,this.infoCells.focalAdjustment.innerHTML=`${f.toFixed(3)}`,this.infoCells.splatScale.innerHTML=`${h.toFixed(3)}`,this.infoCells.pointCloudMode.innerHTML=`${p}`});this.container=e||document.body,this.infoCells={};const t=[["Camera position","cameraPosition"],["Camera look-at","cameraLookAt"],["Camera up","cameraUp"],["Camera mode","orthographicCamera"],["Cursor position","cursorPosition"],["FPS","fps"],["Rendering:","renderSplatCount"],["Sort time","sortTime"],["Render window","renderWindow"],["Focal adjustment","focalAdjustment"],["Splat scale","splatScale"],["Point cloud mode","pointCloudMode"]];this.infoPanelContainer=document.createElement("div");const i=document.createElement("style");i.innerHTML=`

            .infoPanel {
                width: 430px;
                padding: 10px;
                background-color: rgba(50, 50, 50, 0.85);
                border: #555555 2px solid;
                color: #dddddd;
                border-radius: 10px;
                z-index: 9999;
                font-family: arial;
                font-size: 11pt;
                text-align: left;
                margin: 0;
                top: 10px;
                left:10px;
                position: absolute;
                pointer-events: auto;
            }

            .info-panel-cell {
                margin-bottom: 5px;
                padding-bottom: 2px;
            }

            .label-cell {
                font-weight: bold;
                font-size: 12pt;
                width: 140px;
            }

        `,this.infoPanelContainer.append(i),this.infoPanel=document.createElement("div"),this.infoPanel.className="infoPanel";const r=document.createElement("div");r.style.display="table";for(let s of t){const a=document.createElement("div");a.style.display="table-row",a.className="info-panel-row";const o=document.createElement("div");o.style.display="table-cell",o.innerHTML=`${s[0]}: `,o.classList.add("info-panel-cell","label-cell");const l=document.createElement("div");l.style.display="table-cell",l.style.width="10px",l.innerHTML=" ",l.className="info-panel-cell";const c=document.createElement("div");c.style.display="table-cell",c.innerHTML="",c.className="info-panel-cell",this.infoCells[s[1]]=c,a.appendChild(o),a.appendChild(l),a.appendChild(c),r.appendChild(a)}this.infoPanel.appendChild(r),this.infoPanelContainer.append(this.infoPanel),this.infoPanelContainer.style.display="none",this.container.appendChild(this.infoPanelContainer),this.visible=!1}setContainer(e){this.container&&this.infoPanelContainer.parentElement===this.container&&this.container.removeChild(this.infoPanelContainer),e&&(this.container=e,this.container.appendChild(this.infoPanelContainer),this.infoPanelContainer.style.zIndex=this.container.style.zIndex+1)}show(){this.infoPanelContainer.style.display="block",this.visible=!0}hide(){this.infoPanelContainer.style.display="none",this.visible=!1}}const m6=new ze;class YZe extends Fr{constructor(e=new ze(0,0,1),t=new ze(0,0,0),i=1,r=.1,s=16776960,a=i*.2,o=a*.2){super(),this.type="ArrowHelper";const l=new Z_(r,r,i,32);l.translate(0,i/2,0);const c=new Z_(0,o,a,32);c.translate(0,i,0),this.position.copy(t),this.line=new hr(l,new ep({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new hr(c,new ep({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{m6.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(m6,t)}}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Dy{constructor(e){kt(this,"updateFocusMarker",function(){const e=new ze,t=new In,i=new ze;return function(r,s,a){t.copy(s.matrixWorld).invert(),e.copy(r).applyMatrix4(t),e.normalize().multiplyScalar(10),e.applyMatrix4(s.matrixWorld),i.copy(s.position).sub(r);const o=i.length();this.focusMarker.position.copy(r),this.focusMarker.scale.set(o,o,o),this.focusMarker.material.uniforms.realFocusPosition.value.copy(r),this.focusMarker.material.uniforms.viewport.value.copy(a),this.focusMarker.material.uniformsNeedUpdate=!0}}());kt(this,"positionAndOrientControlPlane",function(){const e=new Ji,t=new ze(0,1,0);return function(i,r){e.setFromUnitVectors(t,r),this.controlPlane.position.copy(i),this.controlPlane.quaternion.copy(e)}}());this.threeScene=e,this.splatRenderTarget=null,this.renderTargetCopyQuad=null,this.renderTargetCopyCamera=null,this.meshCursor=null,this.focusMarker=null,this.controlPlane=null,this.debugRoot=null,this.secondaryDebugRoot=null}updateSplatRenderTargetForRenderDimensions(e,t){this.destroySplatRendertarget(),this.splatRenderTarget=new Yd(e,t,{format:Ys,stencilBuffer:!1,depthBuffer:!0}),this.splatRenderTarget.depthTexture=new DO(e,t),this.splatRenderTarget.depthTexture.format=kh,this.splatRenderTarget.depthTexture.type=xo}destroySplatRendertarget(){this.splatRenderTarget&&(this.splatRenderTarget=null)}setupRenderTargetCopyObjects(){const e={sourceColorTexture:{type:"t",value:null},sourceDepthTexture:{type:"t",value:null}},t=new Ga({vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = vec4( position.xy, 0.0, 1.0 );    
                }
            `,fragmentShader:`
                #include <common>
                #include <packing>
                varying vec2 vUv;
                uniform sampler2D sourceColorTexture;
                uniform sampler2D sourceDepthTexture;
                void main() {
                    vec4 color = texture2D(sourceColorTexture, vUv);
                    float fragDepth = texture2D(sourceDepthTexture, vUv).x;
                    gl_FragDepth = fragDepth;
                    gl_FragColor = vec4(color.rgb, color.a * 2.0);
              }
            `,uniforms:e,depthWrite:!1,depthTest:!1,transparent:!0,blending:YQ,blendSrc:q_,blendSrcAlpha:q_,blendDst:X_,blendDstAlpha:X_});t.extensions.fragDepth=!0,this.renderTargetCopyQuad=new hr(new ig(2,2),t),this.renderTargetCopyCamera=new kO(-1,1,1,-1,0,1)}destroyRenderTargetCopyObjects(){this.renderTargetCopyQuad&&(Lm(this.renderTargetCopyQuad),this.renderTargetCopyQuad=null)}setupMeshCursor(){if(!this.meshCursor){const e=new LO(.5,1.5,32),t=new ep({color:16777215}),i=new hr(e,t);i.rotation.set(0,0,Math.PI),i.position.set(0,1,0);const r=new hr(e,t);r.position.set(0,-1,0);const s=new hr(e,t);s.rotation.set(0,0,Math.PI/2),s.position.set(1,0,0);const a=new hr(e,t);a.rotation.set(0,0,-Math.PI/2),a.position.set(-1,0,0),this.meshCursor=new Fr,this.meshCursor.add(i),this.meshCursor.add(r),this.meshCursor.add(s),this.meshCursor.add(a),this.meshCursor.scale.set(.1,.1,.1),this.threeScene.add(this.meshCursor),this.meshCursor.visible=!1}}destroyMeshCursor(){this.meshCursor&&(Lm(this.meshCursor),this.threeScene.remove(this.meshCursor),this.meshCursor=null)}setMeshCursorVisibility(e){this.meshCursor.visible=e}getMeschCursorVisibility(){return this.meshCursor.visible}setMeshCursorPosition(e){this.meshCursor.position.copy(e)}positionAndOrientMeshCursor(e,t){this.meshCursor.position.copy(e),this.meshCursor.up.copy(t.up),this.meshCursor.lookAt(t.position)}setupFocusMarker(){if(!this.focusMarker){const e=new PC(.5,32,32),t=Dy.buildFocusMarkerMaterial();t.depthTest=!1,t.depthWrite=!1,t.transparent=!0,this.focusMarker=new hr(e,t)}}destroyFocusMarker(){this.focusMarker&&(Lm(this.focusMarker),this.focusMarker=null)}setFocusMarkerVisibility(e){this.focusMarker.visible=e}setFocusMarkerOpacity(e){this.focusMarker.material.uniforms.opacity.value=e,this.focusMarker.material.uniformsNeedUpdate=!0}getFocusMarkerOpacity(){return this.focusMarker.material.uniforms.opacity.value}setupControlPlane(){if(!this.controlPlane){const e=new ig(1,1);e.rotateX(-Math.PI/2);const t=new ep({color:16777215});t.transparent=!0,t.opacity=.6,t.depthTest=!1,t.depthWrite=!1,t.side=yo;const i=new hr(e,t),r=new ze(0,1,0);r.normalize();const s=new ze(0,0,0),a=.5,o=.01,l=56576,c=new YZe(r,s,a,o,l,.1,.03);this.controlPlane=new Fr,this.controlPlane.add(i),this.controlPlane.add(c)}}destroyControlPlane(){this.controlPlane&&(Lm(this.controlPlane),this.controlPlane=null)}setControlPlaneVisibility(e){this.controlPlane.visible=e}addDebugMeshes(){this.debugRoot=this.createDebugMeshes(),this.secondaryDebugRoot=this.createSecondaryDebugMeshes(),this.threeScene.add(this.debugRoot),this.threeScene.add(this.secondaryDebugRoot)}destroyDebugMeshes(){for(let e of[this.debugRoot,this.secondaryDebugRoot])e&&(Lm(e),this.threeScene.remove(e));this.debugRoot=null,this.secondaryDebugRoot=null}createDebugMeshes(e){const t=new PC(1,32,32),i=new Fr,r=(s,a)=>{let o=new hr(t,Dy.buildDebugMaterial(s));o.renderOrder=e,i.add(o),o.position.fromArray(a)};return r(16711680,[-50,0,0]),r(16711680,[50,0,0]),r(65280,[0,0,-50]),r(65280,[0,0,50]),r(16755200,[5,0,5]),i}createSecondaryDebugMeshes(e){const t=new $g(3,3,3),i=new Fr;let r=12303291;const s=o=>{let l=new hr(t,Dy.buildDebugMaterial(r));l.renderOrder=e,i.add(l),l.position.fromArray(o)};let a=10;return s([-a,0,-a]),s([-a,0,a]),s([a,0,-a]),s([a,0,a]),i}static buildDebugMaterial(e){const t=`
            #include <common>
            varying float ndcDepth;

            void main() {
                gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position.xyz, 1.0);
                ndcDepth = gl_Position.z / gl_Position.w;
                gl_Position.x = gl_Position.x / gl_Position.w;
                gl_Position.y = gl_Position.y / gl_Position.w;
                gl_Position.z = 0.0;
                gl_Position.w = 1.0;
    
            }
        `,i=`
            #include <common>
            uniform vec3 color;
            varying float ndcDepth;
            void main() {
                gl_FragDepth = (ndcDepth + 1.0) / 2.0;
                gl_FragColor = vec4(color.rgb, 0.0);
            }
        `,r={color:{type:"v3",value:new Si(e)}},s=new Ga({uniforms:r,vertexShader:t,fragmentShader:i,transparent:!1,depthTest:!0,depthWrite:!0,side:ec});return s.extensions.fragDepth=!0,s}static buildFocusMarkerMaterial(e){const t=`
            #include <common>

            uniform vec2 viewport;
            uniform vec3 realFocusPosition;

            varying vec4 ndcPosition;
            varying vec4 ndcCenter;
            varying vec4 ndcFocusPosition;

            void main() {
                float radius = 0.01;

                vec4 viewPosition = modelViewMatrix * vec4(position.xyz, 1.0);
                vec4 viewCenter = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);

                vec4 viewFocusPosition = modelViewMatrix * vec4(realFocusPosition, 1.0);

                ndcPosition = projectionMatrix * viewPosition;
                ndcPosition = ndcPosition * vec4(1.0 / ndcPosition.w);
                ndcCenter = projectionMatrix * viewCenter;
                ndcCenter = ndcCenter * vec4(1.0 / ndcCenter.w);

                ndcFocusPosition = projectionMatrix * viewFocusPosition;
                ndcFocusPosition = ndcFocusPosition * vec4(1.0 / ndcFocusPosition.w);

                gl_Position = projectionMatrix * viewPosition;

            }
        `,i=`
            #include <common>
            uniform vec3 color;
            uniform vec2 viewport;
            uniform float opacity;

            varying vec4 ndcPosition;
            varying vec4 ndcCenter;
            varying vec4 ndcFocusPosition;

            void main() {
                vec2 screenPosition = vec2(ndcPosition) * viewport;
                vec2 screenCenter = vec2(ndcCenter) * viewport;

                vec2 screenVec = screenPosition - screenCenter;

                float projectedRadius = length(screenVec);

                float lineWidth = 0.0005 * viewport.y;
                float aaRange = 0.0025 * viewport.y;
                float radius = 0.06 * viewport.y;
                float radDiff = abs(projectedRadius - radius) - lineWidth;
                float alpha = 1.0 - clamp(radDiff / 5.0, 0.0, 1.0); 

                gl_FragColor = vec4(color.rgb, alpha * opacity);
            }
        `,r={color:{type:"v3",value:new Si(e)},realFocusPosition:{type:"v3",value:new ze},viewport:{type:"v2",value:new on},opacity:{value:0}};return new Ga({uniforms:r,vertexShader:t,fragmentShader:i,transparent:!0,depthTest:!1,depthWrite:!1,side:ec})}dispose(){this.destroyMeshCursor(),this.destroyFocusMarker(),this.destroyDebugMeshes(),this.destroyControlPlane(),this.destroyRenderTargetCopyObjects(),this.destroySplatRendertarget()}}const jZe=new ze(1,0,0),QZe=new ze(0,1,0),ZZe=new ze(0,0,1);class E2{constructor(e=new ze,t=new ze){kt(this,"intersectBox",function(){const e=new ze,t=[],i=[],r=[];return function(s,a){if(i[0]=this.origin.x,i[1]=this.origin.y,i[2]=this.origin.z,r[0]=this.direction.x,r[1]=this.direction.y,r[2]=this.direction.z,this.boxContainsPoint(s,this.origin,1e-4))return a&&(a.origin.copy(this.origin),a.normal.set(0,0,0),a.distance=-1),!0;for(let o=0;o<3;o++){if(r[o]==0)continue;const l=o==0?jZe:o==1?QZe:ZZe,c=r[o]<0?s.max:s.min;let u=-Math.sign(r[o]);t[0]=o==0?c.x:o==1?c.y:c.z;let d=t[0]-i[o];if(d*u<0){const f=(o+1)%3,h=(o+2)%3;if(t[2]=r[f]/r[o]*d+i[f],t[1]=r[h]/r[o]*d+i[h],e.set(t[o],t[h],t[f]),this.boxContainsPoint(s,e,1e-4))return a&&(a.origin.copy(e),a.normal.copy(l).multiplyScalar(u),a.distance=e.sub(this.origin).length()),!0}}return!1}}());kt(this,"intersectSphere",function(){const e=new ze;return function(t,i,r){e.copy(t).sub(this.origin);const s=e.dot(this.direction),a=s*s,l=e.dot(e)-a,c=i*i;if(l>c)return!1;const u=Math.sqrt(c-l),d=s-u,f=s+u;if(f<0)return!1;let h=d<0?f:d;return r&&(r.origin.copy(this.origin).addScaledVector(this.direction,h),r.normal.copy(r.origin).sub(t).normalize(),r.distance=h),!0}}());this.origin=new ze,this.direction=new ze,this.setParameters(e,t)}setParameters(e,t){this.origin.copy(e),this.direction.copy(t).normalize()}boxContainsPoint(e,t,i){return!(t.x<e.min.x-i||t.x>e.max.x+i||t.y<e.min.y-i||t.y>e.max.y+i||t.z<e.min.z-i||t.z>e.max.z+i)}}class QO{constructor(){this.origin=new ze,this.normal=new ze,this.distance=0,this.splatIndex=0}set(e,t,i,r){this.origin.copy(e),this.normal.copy(t),this.distance=i,this.splatIndex=r}clone(){const e=new QO;return e.origin.copy(this.origin),e.normal.copy(this.normal),e.distance=this.distance,e.splatIndex=this.splatIndex,e}}const Bc={ThreeD:0,TwoD:1};class JZe{constructor(e,t,i=!1){kt(this,"setFromCameraAndScreenPosition",function(){const e=new on;return function(t,i,r){if(e.x=i.x/r.x*2-1,e.y=(r.y-i.y)/r.y*2-1,t.isPerspectiveCamera)this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t;else if(t.isOrthographicCamera)this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t;else throw new Error("Raycaster::setFromCameraAndScreenPosition() -> Unsupported camera type")}}());kt(this,"intersectSplatMesh",function(){const e=new In,t=new In,i=new In,r=new E2,s=new ze;return function(a,o=[]){const l=a.getSplatTree();if(l){for(let c=0;c<l.subTrees.length;c++){const u=l.subTrees[c];t.copy(a.matrixWorld),a.dynamicMode&&(a.getSceneTransform(c,i),t.multiply(i)),e.copy(t).invert(),r.origin.copy(this.ray.origin).applyMatrix4(e),r.direction.copy(this.ray.origin).add(this.ray.direction),r.direction.applyMatrix4(e).sub(r.origin).normalize();const d=[];u.rootNode&&this.castRayAtSplatTreeNode(r,l,u.rootNode,d),d.forEach(f=>{f.origin.applyMatrix4(t),f.normal.applyMatrix4(t).normalize(),f.distance=s.copy(f.origin).sub(this.ray.origin).length()}),o.push(...d)}return o.sort((c,u)=>c.distance>u.distance?1:-1),o}}}());kt(this,"castRayAtSplatTreeNode",function(){const e=new Xi,t=new ze,i=new ze,r=new Ji,s=new QO,a=1e-7,o=new ze(0,0,0),l=new In,c=new In,u=new In,d=new In,f=new In,h=new E2;return function(p,m,v,g=[]){if(p.intersectBox(v.boundingBox)){if(v.data&&v.data.indexes&&v.data.indexes.length>0)for(let _=0;_<v.data.indexes.length;_++){const y=v.data.indexes[_],S=m.splatMesh.getSceneIndexForSplat(y);if(m.splatMesh.getScene(S).visible&&(m.splatMesh.getSplatColor(y,e),m.splatMesh.getSplatCenter(y,t),m.splatMesh.getSplatScaleAndRotation(y,i,r),!(i.x<=a||i.y<=a||m.splatMesh.splatRenderMode===Bc.ThreeD&&i.z<=a)))if(this.raycastAgainstTrueSplatEllipsoid){c.makeScale(i.x,i.y,i.z),u.makeRotationFromQuaternion(r);const x=Math.log10(e.w)*2;if(l.makeScale(x,x,x),f.copy(l).multiply(u).multiply(c),d.copy(f).invert(),h.origin.copy(p.origin).sub(t).applyMatrix4(d),h.direction.copy(p.origin).add(p.direction).sub(t),h.direction.applyMatrix4(d).sub(h.origin).normalize(),h.intersectSphere(o,1,s)){const T=s.clone();T.splatIndex=y,T.origin.applyMatrix4(f).add(t),g.push(T)}}else{let x=i.x+i.y,T=2;if(m.splatMesh.splatRenderMode===Bc.ThreeD&&(x+=i.z,T=3),x=x/T,p.intersectSphere(t,x,s)){const C=s.clone();C.splatIndex=y,g.push(C)}}}if(v.children&&v.children.length>0)for(let _ of v.children)this.castRayAtSplatTreeNode(p,m,_,g);return g}}}());this.ray=new E2(e,t),this.raycastAgainstTrueSplatEllipsoid=i}}class mv{static buildVertexShaderBase(e=!1,t=!1,i=0,r=""){let s=`
        precision highp float;
        #include <common>

        attribute uint splatIndex;
        uniform highp usampler2D centersColorsTexture;
        uniform highp sampler2D sphericalHarmonicsTexture;
        uniform highp sampler2D sphericalHarmonicsTextureR;
        uniform highp sampler2D sphericalHarmonicsTextureG;
        uniform highp sampler2D sphericalHarmonicsTextureB;

        uniform highp usampler2D sceneIndexesTexture;
        uniform vec2 sceneIndexesTextureSize;
        uniform int sceneCount;
    `;return t&&(s+=`
            uniform float sceneOpacity[${ii.MaxScenes}];
            uniform int sceneVisibility[${ii.MaxScenes}];
        `),e&&(s+=`
            uniform highp mat4 transforms[${ii.MaxScenes}];
        `),s+=`
        ${r}
        uniform vec2 focal;
        uniform float orthoZoom;
        uniform int orthographicMode;
        uniform int pointCloudModeEnabled;
        uniform float inverseFocalAdjustment;
        uniform vec2 viewport;
        uniform vec2 basisViewport;
        uniform vec2 centersColorsTextureSize;
        uniform int sphericalHarmonicsDegree;
        uniform vec2 sphericalHarmonicsTextureSize;
        uniform int sphericalHarmonics8BitMode;
        uniform int sphericalHarmonicsMultiTextureMode;
        uniform float visibleRegionRadius;
        uniform float visibleRegionFadeStartRadius;
        uniform float firstRenderTime;
        uniform float currentTime;
        uniform int fadeInComplete;
        uniform vec3 sceneCenter;
        uniform float splatScale;
        uniform float sphericalHarmonics8BitCompressionRangeMin[${ii.MaxScenes}];
        uniform float sphericalHarmonics8BitCompressionRangeMax[${ii.MaxScenes}];

        varying vec4 vColor;
        varying vec2 vUv;
        varying vec2 vPosition;

        mat3 quaternionToRotationMatrix(float x, float y, float z, float w) {
            float s = 1.0 / sqrt(w * w + x * x + y * y + z * z);
        
            return mat3(
                1. - 2. * (y * y + z * z),
                2. * (x * y + w * z),
                2. * (x * z - w * y),
                2. * (x * y - w * z),
                1. - 2. * (x * x + z * z),
                2. * (y * z + w * x),
                2. * (x * z + w * y),
                2. * (y * z - w * x),
                1. - 2. * (x * x + y * y)
            );
        }

        const float sqrt8 = sqrt(8.0);
        const float minAlpha = 1.0 / 255.0;

        const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
        const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
        const uvec4 shift4 = uvec4(0, 8, 16, 24);
        vec4 uintToRGBAVec (uint u) {
           uvec4 urgba = mask4 & u;
           urgba = urgba >> shift4;
           vec4 rgba = vec4(urgba) * encodeNorm4;
           return rgba;
        }

        vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getDataUVF(in uint sIndex, in float stride, in uint offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(float(sIndex) * stride) + offset) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        const float SH_C1 = 0.4886025119029199f;
        const float[5] SH_C2 = float[](1.0925484, -1.0925484, 0.3153916, -1.0925484, 0.5462742);

        void main () {

            uint oddOffset = splatIndex & uint(0x00000001);
            uint doubleOddOffset = oddOffset * uint(2);
            bool isEven = oddOffset == uint(0);
            uint nearestEvenIndex = splatIndex - oddOffset;
            float fOddOffset = float(oddOffset);

            uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
            vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));

            uint sceneIndex = uint(0);
            if (sceneCount > 1) {
                sceneIndex = texture(sceneIndexesTexture, getDataUV(1, 0, sceneIndexesTextureSize)).r;
            }
            `,t&&(s+=`
                float splatOpacityFromScene = sceneOpacity[sceneIndex];
                int sceneVisible = sceneVisibility[sceneIndex];
                if (splatOpacityFromScene <= 0.01 || sceneVisible == 0) {
                    gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                    return;
                }
            `),e?s+=`
                mat4 transform = transforms[sceneIndex];
                mat4 transformModelViewMatrix = viewMatrix * transform;
            `:s+="mat4 transformModelViewMatrix = modelViewMatrix;",s+=`
            float sh8BitCompressionRangeMinForScene = sphericalHarmonics8BitCompressionRangeMin[sceneIndex];
            float sh8BitCompressionRangeMaxForScene = sphericalHarmonics8BitCompressionRangeMax[sceneIndex];
            float sh8BitCompressionRangeForScene = sh8BitCompressionRangeMaxForScene - sh8BitCompressionRangeMinForScene;
            float sh8BitCompressionHalfRangeForScene = sh8BitCompressionRangeForScene / 2.0;
            vec3 vec8BitSHShift = vec3(sh8BitCompressionRangeMinForScene);

            vec4 viewCenter = transformModelViewMatrix * vec4(splatCenter, 1.0);

            vec4 clipCenter = projectionMatrix * viewCenter;

            float clip = 1.2 * clipCenter.w;
            if (clipCenter.z < -clip || clipCenter.x < -clip || clipCenter.x > clip || clipCenter.y < -clip || clipCenter.y > clip) {
                gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                return;
            }

            vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

            vPosition = position.xy;
            vColor = uintToRGBAVec(sampledCenterColor.r);
        `,i>=1&&(s+=`   
            if (sphericalHarmonicsDegree >= 1) {
            `,e?s+=`
                    vec3 worldViewDir = normalize(splatCenter - vec3(inverse(transform) * vec4(cameraPosition, 1.0)));
                `:s+=`
                    vec3 worldViewDir = normalize(splatCenter - cameraPosition);
                `,s+=`
                vec3 sh1;
                vec3 sh2;
                vec3 sh3;
            `,i>=2&&(s+=`
                    vec3 sh4;
                    vec3 sh5;
                    vec3 sh6;
                    vec3 sh7;
                    vec3 sh8;
                `),i===1?s+=`
                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        vec2 shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset, sphericalHarmonicsTextureSize);
                        vec4 sampledSH0123 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(1), sphericalHarmonicsTextureSize);
                        vec4 sampledSH4567 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(2), sphericalHarmonicsTextureSize);
                        vec4 sampledSH891011 = texture(sphericalHarmonicsTexture, shUV);
                        sh1 = vec3(sampledSH0123.rgb) * (1.0 - fOddOffset) + vec3(sampledSH0123.ba, sampledSH4567.r) * fOddOffset;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg) * (1.0 - fOddOffset) + vec3(sampledSH4567.gba) * fOddOffset;
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r) * (1.0 - fOddOffset) + vec3(sampledSH891011.rgb) * fOddOffset;
                    } else {
                        vec2 sampledSH01R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        sh1 = vec3(sampledSH01R.rg, sampledSH23R.r);
                        sh2 = vec3(sampledSH01G.rg, sampledSH23G.r);
                        sh3 = vec3(sampledSH01B.rg, sampledSH23B.r);
                    }
                `:i===2&&(s+=`
                    vec4 sampledSH0123;
                    vec4 sampledSH4567;
                    vec4 sampledSH891011;

                    vec4 sampledSH0123R;
                    vec4 sampledSH0123G;
                    vec4 sampledSH0123B;

                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        sampledSH0123 = texture(sphericalHarmonicsTexture, getDataUV(6, 0, sphericalHarmonicsTextureSize));
                        sampledSH4567 = texture(sphericalHarmonicsTexture, getDataUV(6, 1, sphericalHarmonicsTextureSize));
                        sampledSH891011 = texture(sphericalHarmonicsTexture, getDataUV(6, 2, sphericalHarmonicsTextureSize));
                        sh1 = sampledSH0123.rgb;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg);
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r);
                    } else {
                        sampledSH0123R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sh1 = vec3(sampledSH0123R.rgb);
                        sh2 = vec3(sampledSH0123G.rgb);
                        sh3 = vec3(sampledSH0123B.rgb);
                    }
                `),s+=`
                    if (sphericalHarmonics8BitMode == 1) {
                        sh1 = sh1 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh2 = sh2 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh3 = sh3 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                    }
                    float x = worldViewDir.x;
                    float y = worldViewDir.y;
                    float z = worldViewDir.z;
                    vColor.rgb += SH_C1 * (-sh1 * y + sh2 * z - sh3 * x);
            `,i>=2&&(s+=`
                    if (sphericalHarmonicsDegree >= 2) {
                        float xx = x * x;
                        float yy = y * y;
                        float zz = z * z;
                        float xy = x * y;
                        float yz = y * z;
                        float xz = x * z;
                `,i===2&&(s+=`
                        if (sphericalHarmonicsMultiTextureMode == 0) {
                            vec4 sampledSH12131415 = texture(sphericalHarmonicsTexture, getDataUV(6, 3, sphericalHarmonicsTextureSize));
                            vec4 sampledSH16171819 = texture(sphericalHarmonicsTexture, getDataUV(6, 4, sphericalHarmonicsTextureSize));
                            vec4 sampledSH20212223 = texture(sphericalHarmonicsTexture, getDataUV(6, 5, sphericalHarmonicsTextureSize));
                            sh4 = sampledSH891011.gba;
                            sh5 = sampledSH12131415.rgb;
                            sh6 = vec3(sampledSH12131415.a, sampledSH16171819.rg);
                            sh7 = vec3(sampledSH16171819.ba, sampledSH20212223.r);
                            sh8 = sampledSH20212223.gba;
                        } else {
                            vec4 sampledSH4567R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            sh4 = vec3(sampledSH0123R.a, sampledSH4567R.rg);
                            sh5 = vec3(sampledSH4567R.ba, sampledSH0123G.a);
                            sh6 = vec3(sampledSH4567G.rgb);
                            sh7 = vec3(sampledSH4567G.a, sampledSH0123B.a, sampledSH4567B.r);
                            sh8 = vec3(sampledSH4567B.gba);
                        }
                    `),s+=`
                        if (sphericalHarmonics8BitMode == 1) {
                            sh4 = sh4 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh5 = sh5 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh6 = sh6 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh7 = sh7 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh8 = sh8 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        }

                        vColor.rgb +=
                            (SH_C2[0] * xy) * sh4 +
                            (SH_C2[1] * yz) * sh5 +
                            (SH_C2[2] * (2.0 * zz - xx - yy)) * sh6 +
                            (SH_C2[3] * xz) * sh7 +
                            (SH_C2[4] * (xx - yy)) * sh8;
                    }
                `),s+=`

                vColor.rgb = clamp(vColor.rgb, vec3(0.), vec3(1.));

            }

            `),s}static getVertexShaderFadeIn(){return`
            if (fadeInComplete == 0) {
                float opacityAdjust = 1.0;
                float centerDist = length(splatCenter - sceneCenter);
                float renderTime = max(currentTime - firstRenderTime, 0.0);

                float fadeDistance = 0.75;
                float distanceLoadFadeInFactor = step(visibleRegionFadeStartRadius, centerDist);
                distanceLoadFadeInFactor = (1.0 - distanceLoadFadeInFactor) +
                                        (1.0 - clamp((centerDist - visibleRegionFadeStartRadius) / fadeDistance, 0.0, 1.0)) *
                                        distanceLoadFadeInFactor;
                opacityAdjust *= distanceLoadFadeInFactor;
                vColor.a *= opacityAdjust;
            }
        `}static getUniforms(e=!1,t=!1,i=0,r=1,s=!1){const a={sceneCenter:{type:"v3",value:new ze},fadeInComplete:{type:"i",value:0},orthographicMode:{type:"i",value:0},visibleRegionFadeStartRadius:{type:"f",value:0},visibleRegionRadius:{type:"f",value:0},currentTime:{type:"f",value:0},firstRenderTime:{type:"f",value:0},centersColorsTexture:{type:"t",value:null},sphericalHarmonicsTexture:{type:"t",value:null},sphericalHarmonicsTextureR:{type:"t",value:null},sphericalHarmonicsTextureG:{type:"t",value:null},sphericalHarmonicsTextureB:{type:"t",value:null},sphericalHarmonics8BitCompressionRangeMin:{type:"f",value:[]},sphericalHarmonics8BitCompressionRangeMax:{type:"f",value:[]},focal:{type:"v2",value:new on},orthoZoom:{type:"f",value:1},inverseFocalAdjustment:{type:"f",value:1},viewport:{type:"v2",value:new on},basisViewport:{type:"v2",value:new on},debugColor:{type:"v3",value:new Si},centersColorsTextureSize:{type:"v2",value:new on(1024,1024)},sphericalHarmonicsDegree:{type:"i",value:i},sphericalHarmonicsTextureSize:{type:"v2",value:new on(1024,1024)},sphericalHarmonics8BitMode:{type:"i",value:0},sphericalHarmonicsMultiTextureMode:{type:"i",value:0},splatScale:{type:"f",value:r},pointCloudModeEnabled:{type:"i",value:s?1:0},sceneIndexesTexture:{type:"t",value:null},sceneIndexesTextureSize:{type:"v2",value:new on(1024,1024)},sceneCount:{type:"i",value:1}};for(let o=0;o<ii.MaxScenes;o++)a.sphericalHarmonics8BitCompressionRangeMin.value.push(-ii.SphericalHarmonics8BitCompressionRange/2),a.sphericalHarmonics8BitCompressionRangeMax.value.push(ii.SphericalHarmonics8BitCompressionRange/2);if(t){const o=[];for(let c=0;c<ii.MaxScenes;c++)o.push(1);a.sceneOpacity={type:"f",value:o};const l=[];for(let c=0;c<ii.MaxScenes;c++)l.push(1);a.sceneVisibility={type:"i",value:l}}if(e){const o=[];for(let l=0;l<ii.MaxScenes;l++)o.push(new In);a.transforms={type:"mat4",value:o}}return a}}class LC{static build(e=!1,t=!1,i=!1,r=2048,s=1,a=!1,o=0,l=.3){const c=`
            uniform vec2 covariancesTextureSize;
            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D covariancesTextureHalfFloat;
            uniform int covariancesAreHalfFloat;

            void fromCovarianceHalfFloatV4(uvec4 val, out vec4 first, out vec4 second) {
                vec2 r = unpackHalf2x16(val.r);
                vec2 g = unpackHalf2x16(val.g);
                vec2 b = unpackHalf2x16(val.b);

                first = vec4(r.x, r.y, g.x, g.y);
                second = vec4(b.x, b.y, 0.0, 0.0);
            }
        `;let u=mv.buildVertexShaderBase(e,t,o,c);u+=LC.buildVertexShaderProjection(i,t,r,l);const d=LC.buildFragmentShader(),f=mv.getUniforms(e,t,o,s,a);return f.covariancesTextureSize={type:"v2",value:new on(1024,1024)},f.covariancesTexture={type:"t",value:null},f.covariancesTextureHalfFloat={type:"t",value:null},f.covariancesAreHalfFloat={type:"i",value:0},new Ga({uniforms:f,vertexShader:u,fragmentShader:d,transparent:!0,alphaTest:1,blending:Cd,depthTest:!0,depthWrite:!1,side:yo})}static buildVertexShaderProjection(e,t,i,r){let s=`

            vec4 sampledCovarianceA;
            vec4 sampledCovarianceB;
            vec3 cov3D_M11_M12_M13;
            vec3 cov3D_M22_M23_M33;
            if (covariancesAreHalfFloat == 0) {
                sampledCovarianceA = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset,
                                                                            covariancesTextureSize));
                sampledCovarianceB = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset + uint(1),
                                                                            covariancesTextureSize));

                cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rgb) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceA.ba, sampledCovarianceB.r) * fOddOffset;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceB.gba) * fOddOffset;
            } else {
                uvec4 sampledCovarianceU = texture(covariancesTextureHalfFloat, getDataUV(1, 0, covariancesTextureSize));
                fromCovarianceHalfFloatV4(sampledCovarianceU, sampledCovarianceA, sampledCovarianceB);
                cov3D_M11_M12_M13 = sampledCovarianceA.rgb;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg);
            }
        
            // Construct the 3D covariance matrix
            mat3 Vrk = mat3(
                cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
            );

            mat3 J;
            if (orthographicMode == 1) {
                // Since the projection is linear, we don't need an approximation
                J = transpose(mat3(orthoZoom, 0.0, 0.0,
                                0.0, orthoZoom, 0.0,
                                0.0, 0.0, 0.0));
            } else {
                // Construct the Jacobian of the affine approximation of the projection matrix. It will be used to transform the
                // 3D covariance matrix instead of using the actual projection matrix because that transformation would
                // require a non-linear component (perspective division) which would yield a non-gaussian result.
                float s = 1.0 / (viewCenter.z * viewCenter.z);
                J = mat3(
                    focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
                    0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
                    0., 0., 0.
                );
            }

            // Concatenate the projection approximation with the model-view transformation
            mat3 W = transpose(mat3(transformModelViewMatrix));
            mat3 T = W * J;

            // Transform the 3D covariance matrix (Vrk) to compute the 2D covariance matrix
            mat3 cov2Dm = transpose(T) * Vrk * T;
            `;return e?s+=`
                float detOrig = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                cov2Dm[0][0] += ${r};
                cov2Dm[1][1] += ${r};
                float detBlur = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                vColor.a *= sqrt(max(detOrig / detBlur, 0.0));
                if (vColor.a < minAlpha) return;
            `:s+=`
                cov2Dm[0][0] += ${r};
                cov2Dm[1][1] += ${r};
            `,s+=`

            // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
            // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
            // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
            // need cov2Dm[1][0] because it is a symetric matrix.
            vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

            // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
            // so that we can determine the 2D basis for the splat. This is done using the method described
            // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
            // After calculating the eigen-values and eigen-vectors, we calculate the basis for rendering the splat
            // by normalizing the eigen-vectors and then multiplying them by (sqrt(8) * sqrt(eigen-value)), which is
            // equal to scaling them by sqrt(8) standard deviations.
            //
            // This is a different approach than in the original work at INRIA. In that work they compute the
            // max extents of the projected splat in screen space to form a screen-space aligned bounding rectangle
            // which forms the geometry that is actually rasterized. The dimensions of that bounding box are 3.0
            // times the square root of the maximum eigen-value, or 3 standard deviations. They then use the inverse
            // 2D covariance matrix (called 'conic') in the CUDA rendering thread to determine fragment opacity by
            // calculating the full gaussian: exp(-0.5 * (X - mean) * conic * (X - mean)) * splat opacity
            float a = cov2Dv.x;
            float d = cov2Dv.z;
            float b = cov2Dv.y;
            float D = a * d - b * b;
            float trace = a + d;
            float traceOver2 = 0.5 * trace;
            float term2 = sqrt(max(0.1f, traceOver2 * traceOver2 - D));
            float eigenValue1 = traceOver2 + term2;
            float eigenValue2 = traceOver2 - term2;

            if (pointCloudModeEnabled == 1) {
                eigenValue1 = eigenValue2 = 0.2;
            }

            if (eigenValue2 <= 0.0) return;

            vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
            // since the eigen vectors are orthogonal, we derive the second one from the first
            vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);

            // We use sqrt(8) standard deviations instead of 3 to eliminate more of the splat with a very low opacity.
            vec2 basisVector1 = eigenVector1 * splatScale * min(sqrt8 * sqrt(eigenValue1), ${parseInt(i)}.0);
            vec2 basisVector2 = eigenVector2 * splatScale * min(sqrt8 * sqrt(eigenValue2), ${parseInt(i)}.0);
            `,t&&(s+=`
                vColor.a *= splatOpacityFromScene;
            `),s+=`
            vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) *
                             basisViewport * 2.0 * inverseFocalAdjustment;

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            // Scale the position data we send to the fragment shader
            vPosition *= sqrt8;
        `,s+=mv.getVertexShaderFadeIn(),s+="}",s}static buildFragmentShader(){let e=`
            precision highp float;
            #include <common>
 
            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
        `;return e+=`
            void main () {
                // Compute the positional squared distance from the center of the splat to the current fragment.
                float A = dot(vPosition, vPosition);
                // Since the positional data in vPosition has been scaled by sqrt(8), the squared result will be
                // scaled by a factor of 8. If the squared result is larger than 8, it means it is outside the ellipse
                // defined by the rectangle formed by vPosition. It also means it's farther
                // away than sqrt(8) standard deviations from the mean.
                if (A > 8.0) discard;
                vec3 color = vColor.rgb;

                // Since the rendered splat is scaled by sqrt(8), the inverse covariance matrix that is part of
                // the gaussian formula becomes the identity matrix. We're then left with (X - mean) * (X - mean),
                // and since 'mean' is zero, we have X * X, which is the same as A:
                float opacity = exp(-0.5 * A) * vColor.a;

                gl_FragColor = vec4(color.rgb, opacity);
            }
        `,e}}class kC{static build(e=!1,t=!1,i=1,r=!1,s=0){const a=`
            uniform vec2 scaleRotationsTextureSize;
            uniform highp sampler2D scaleRotationsTexture;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;
        `;let o=mv.buildVertexShaderBase(e,t,s,a);o+=kC.buildVertexShaderProjection();const l=kC.buildFragmentShader(),c=mv.getUniforms(e,t,s,i,r);return c.scaleRotationsTexture={type:"t",value:null},c.scaleRotationsTextureSize={type:"v2",value:new on(1024,1024)},new Ga({uniforms:c,vertexShader:o,fragmentShader:l,transparent:!0,alphaTest:1,blending:Cd,depthTest:!0,depthWrite:!1,side:yo})}static buildVertexShaderProjection(){let e=`

            vec4 scaleRotationA = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset, scaleRotationsTextureSize));
            vec4 scaleRotationB = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset + uint(1), scaleRotationsTextureSize));

            vec3 scaleRotation123 = vec3(scaleRotationA.rgb) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationA.ba, scaleRotationB.r) * fOddOffset;
            vec3 scaleRotation456 = vec3(scaleRotationA.a, scaleRotationB.rg) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationB.gba) * fOddOffset;

            float missingW = sqrt(1.0 - scaleRotation456.x * scaleRotation456.x - scaleRotation456.y *
                                    scaleRotation456.y - scaleRotation456.z * scaleRotation456.z);
            mat3 R = quaternionToRotationMatrix(scaleRotation456.r, scaleRotation456.g, scaleRotation456.b, missingW);
            mat3 S = mat3(scaleRotation123.r, 0.0, 0.0,
                            0.0, scaleRotation123.g, 0.0,
                            0.0, 0.0, scaleRotation123.b);
            
            mat3 L = R * S;

            mat3x4 splat2World = mat3x4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

            mat4 world2ndc = transpose(projectionMatrix * transformModelViewMatrix);

            mat3x4 ndc2pix = mat3x4(vec4(viewport.x / 2.0, 0.0, 0.0, (viewport.x - 1.0) / 2.0),
                                    vec4(0.0, viewport.y / 2.0, 0.0, (viewport.y - 1.0) / 2.0),
                                    vec4(0.0, 0.0, 0.0, 1.0));

            mat3 T = transpose(splat2World) * world2ndc * ndc2pix;
            vec3 normal = vec3(viewMatrix * vec4(L[0][2], L[1][2], L[2][2], 0.0));
        `;return e+=`

                mat4 splat2World4 = mat4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(L[2], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

                mat4 Tt = transpose(transpose(splat2World4) * world2ndc);

                vec4 tempPoint1 = Tt * vec4(1.0, 0.0, 0.0, 1.0);
                tempPoint1 /= tempPoint1.w;

                vec4 tempPoint2 = Tt * vec4(0.0, 1.0, 0.0, 1.0);
                tempPoint2 /= tempPoint2.w;

                vec4 center = Tt * vec4(0.0, 0.0, 0.0, 1.0);
                center /= center.w;

                vec2 basisVector1 = tempPoint1.xy - center.xy;
                vec2 basisVector2 = tempPoint2.xy - center.xy;

                vec2 basisVector1Screen = basisVector1 * 0.5 * viewport;
                vec2 basisVector2Screen = basisVector2 * 0.5 * viewport;

                const float minPix = 1.;
                if (length(basisVector1Screen) < minPix || length(basisVector2Screen) < minPix) {
                    
            vec3 T0 = vec3(T[0][0], T[0][1], T[0][2]);
            vec3 T1 = vec3(T[1][0], T[1][1], T[1][2]);
            vec3 T3 = vec3(T[2][0], T[2][1], T[2][2]);

            vec3 tempPoint = vec3(1.0, 1.0, -1.0);
            float distance = (T3.x * T3.x * tempPoint.x) + (T3.y * T3.y * tempPoint.y) + (T3.z * T3.z * tempPoint.z);
            vec3 f = (1.0 / distance) * tempPoint;
            if (abs(distance) < 0.00001) return;

            float pointImageX = (T0.x * T3.x * f.x) + (T0.y * T3.y * f.y) + (T0.z * T3.z * f.z);
            float pointImageY = (T1.x * T3.x * f.x) + (T1.y * T3.y * f.y) + (T1.z * T3.z * f.z);
            vec2 pointImage = vec2(pointImageX, pointImageY);

            float tempX = (T0.x * T0.x * f.x) + (T0.y * T0.y * f.y) + (T0.z * T0.z * f.z);
            float tempY = (T1.x * T1.x * f.x) + (T1.y * T1.y * f.y) + (T1.z * T1.z * f.z);
            vec2 temp = vec2(tempX, tempY);

            vec2 halfExtend = pointImage * pointImage - temp;
            vec2 extent = sqrt(max(vec2(0.0001), halfExtend));
            float radius = max(extent.x, extent.y);

            vec2 ndcOffset = ((position.xy * radius * 3.0) * basisViewport * 2.0);

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            vT = T;
            vQuadCenter = pointImage;
            vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
        
                } else {
                    vec2 ndcOffset = vec2(position.x * basisVector1 + position.y * basisVector2) * 3.0 * inverseFocalAdjustment;
                    vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
                    gl_Position = quadPos;

                    vT = T;
                    vQuadCenter = center.xy;
                    vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
                }
            `,e+=mv.getVertexShaderFadeIn(),e+="}",e}static buildFragmentShader(){return`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;

            void main () {

                const float FilterInvSquare = 2.0;
                const float near_n = 0.2;
                const float T = 1.0;

                vec2 xy = vQuadCenter;
                vec3 Tu = vT[0];
                vec3 Tv = vT[1];
                vec3 Tw = vT[2];
                vec3 k = vFragCoord.x * Tw - Tu;
                vec3 l = vFragCoord.y * Tw - Tv;
                vec3 p = cross(k, l);
                if (p.z == 0.0) discard;
                vec2 s = vec2(p.x / p.z, p.y / p.z);
                float rho3d = (s.x * s.x + s.y * s.y); 
                vec2 d = vec2(xy.x - vFragCoord.x, xy.y - vFragCoord.y);
                float rho2d = FilterInvSquare * (d.x * d.x + d.y * d.y); 

                // compute intersection and depth
                float rho = min(rho3d, rho2d);
                float depth = (rho3d <= rho2d) ? (s.x * Tw.x + s.y * Tw.y) + Tw.z : Tw.z; 
                if (depth < near_n) discard;
                //  vec4 nor_o = collected_normal_opacity[j];
                //  float normal[3] = {nor_o.x, nor_o.y, nor_o.z};
                float opa = vColor.a;

                float power = -0.5f * rho;
                if (power > 0.0f) discard;

                // Eq. (2) from 3D Gaussian splatting paper.
                // Obtain alpha by multiplying with Gaussian opacity
                // and its exponential falloff from mean.
                // Avoid numerical instabilities (see paper appendix). 
                float alpha = min(0.99f, opa * exp(power));
                if (alpha < 1.0f / 255.0f) discard;
                float test_T = T * (1.0 - alpha);
                if (test_T < 0.0001)discard;

                float w = alpha * T;
                gl_FragColor = vec4(vColor.rgb, w);
            }
        `}}class eJe{static build(e){const t=new zo;t.setIndex([0,1,2,0,2,3]);const i=new Float32Array(4*3),r=new Io(i,3);t.setAttribute("position",r),r.setXYZ(0,-1,-1,0),r.setXYZ(1,-1,1,0),r.setXYZ(2,1,1,0),r.setXYZ(3,1,-1,0),r.needsUpdate=!0;const s=new Sqe().copy(t),a=new Uint32Array(e),o=new vqe(a,1,!1);return o.setUsage(xKe),s.setAttribute("splatIndex",o),s.instanceCount=0,s}}class tJe extends Fr{constructor(e,t=new ze,i=new Ji,r=new ze(1,1,1),s=1,a=1,o=!0){super(),this.splatBuffer=e,this.position.copy(t),this.quaternion.copy(i),this.scale.copy(r),this.transform=new In,this.minimumAlpha=s,this.opacity=a,this.visible=o}copyTransformData(e){this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.transform.copy(e.transform)}updateTransform(e){e?(this.matrixWorldAutoUpdate&&this.updateWorldMatrix(!0,!1),this.transform.copy(this.matrixWorld)):(this.matrixAutoUpdate&&this.updateMatrix(),this.transform.copy(this.matrix))}}const NC=class NC{constructor(e,t,i,r){this.min=new ze().copy(e),this.max=new ze().copy(t),this.boundingBox=new Ul(this.min,this.max),this.center=new ze().copy(this.max).sub(this.min).multiplyScalar(.5).add(this.min),this.depth=i,this.children=[],this.data=null,this.id=r||NC.idGen++}};kt(NC,"idGen",0);let TD=NC;class Ly{constructor(e,t){this.maxDepth=e,this.maxCentersPerNode=t,this.sceneDimensions=new ze,this.sceneMin=new ze,this.sceneMax=new ze,this.rootNode=null,this.nodesWithIndexes=[],this.splatMesh=null}static convertWorkerSubTreeNode(e){const t=new ze().fromArray(e.min),i=new ze().fromArray(e.max),r=new TD(t,i,e.depth,e.id);if(e.data.indexes){r.data={indexes:[]};for(let s of e.data.indexes)r.data.indexes.push(s)}if(e.children)for(let s of e.children)r.children.push(Ly.convertWorkerSubTreeNode(s));return r}static convertWorkerSubTree(e,t){const i=new Ly(e.maxDepth,e.maxCentersPerNode);i.sceneMin=new ze().fromArray(e.sceneMin),i.sceneMax=new ze().fromArray(e.sceneMax),i.splatMesh=t,i.rootNode=Ly.convertWorkerSubTreeNode(e.rootNode);const r=(s,a)=>{s.children.length===0&&a(s);for(let o of s.children)r(o,a)};return i.nodesWithIndexes=[],r(i.rootNode,s=>{s.data&&s.data.indexes&&s.data.indexes.length>0&&i.nodesWithIndexes.push(s)}),i}}function nJe(n){let e=0;class t{constructor(l,c){this.min=[l[0],l[1],l[2]],this.max=[c[0],c[1],c[2]]}containsPoint(l){return l[0]>=this.min[0]&&l[0]<=this.max[0]&&l[1]>=this.min[1]&&l[1]<=this.max[1]&&l[2]>=this.min[2]&&l[2]<=this.max[2]}}class i{constructor(l,c){this.maxDepth=l,this.maxCentersPerNode=c,this.sceneDimensions=[],this.sceneMin=[],this.sceneMax=[],this.rootNode=null,this.addedIndexes={},this.nodesWithIndexes=[],this.splatMesh=null,this.disposed=!1}}class r{constructor(l,c,u,d){this.min=[l[0],l[1],l[2]],this.max=[c[0],c[1],c[2]],this.center=[(c[0]-l[0])*.5+l[0],(c[1]-l[1])*.5+l[1],(c[2]-l[2])*.5+l[2]],this.depth=u,this.children=[],this.data=null,this.id=d||e++}}processSplatTreeNode=function(o,l,c,u){const d=l.data.indexes.length;if(d<o.maxCentersPerNode||l.depth>o.maxDepth){const _=[];for(let y=0;y<l.data.indexes.length;y++)o.addedIndexes[l.data.indexes[y]]||(_.push(l.data.indexes[y]),o.addedIndexes[l.data.indexes[y]]=!0);l.data.indexes=_,l.data.indexes.sort((y,S)=>y>S?1:-1),o.nodesWithIndexes.push(l);return}const f=[l.max[0]-l.min[0],l.max[1]-l.min[1],l.max[2]-l.min[2]],h=[f[0]*.5,f[1]*.5,f[2]*.5],p=[l.min[0]+h[0],l.min[1]+h[1],l.min[2]+h[2]],m=[new t([p[0]-h[0],p[1],p[2]-h[2]],[p[0],p[1]+h[1],p[2]]),new t([p[0],p[1],p[2]-h[2]],[p[0]+h[0],p[1]+h[1],p[2]]),new t([p[0],p[1],p[2]],[p[0]+h[0],p[1]+h[1],p[2]+h[2]]),new t([p[0]-h[0],p[1],p[2]],[p[0],p[1]+h[1],p[2]+h[2]]),new t([p[0]-h[0],p[1]-h[1],p[2]-h[2]],[p[0],p[1],p[2]]),new t([p[0],p[1]-h[1],p[2]-h[2]],[p[0]+h[0],p[1],p[2]]),new t([p[0],p[1]-h[1],p[2]],[p[0]+h[0],p[1],p[2]+h[2]]),new t([p[0]-h[0],p[1]-h[1],p[2]],[p[0],p[1],p[2]+h[2]])],v=[];for(let _=0;_<m.length;_++)v[_]=[];const g=[0,0,0];for(let _=0;_<d;_++){const y=l.data.indexes[_],S=c[y];g[0]=u[S],g[1]=u[S+1],g[2]=u[S+2];for(let w=0;w<m.length;w++)m[w].containsPoint(g)&&v[w].push(y)}for(let _=0;_<m.length;_++){const y=new r(m[_].min,m[_].max,l.depth+1);y.data={indexes:v[_]},l.children.push(y)}l.data={};for(let _ of l.children)processSplatTreeNode(o,_,c,u)};const s=(o,l,c)=>{const u=[0,0,0],d=[0,0,0],f=[],h=Math.floor(o.length/4);for(let m=0;m<h;m++){const v=m*4,g=o[v],_=o[v+1],y=o[v+2],S=Math.round(o[v+3]);(m===0||g<u[0])&&(u[0]=g),(m===0||g>d[0])&&(d[0]=g),(m===0||_<u[1])&&(u[1]=_),(m===0||_>d[1])&&(d[1]=_),(m===0||y<u[2])&&(u[2]=y),(m===0||y>d[2])&&(d[2]=y),f.push(S)}const p=new i(l,c);return p.sceneMin=u,p.sceneMax=d,p.rootNode=new r(p.sceneMin,p.sceneMax,0),p.rootNode.data={indexes:f},p};function a(o,l,c){const u=[];for(let f of o){const h=Math.floor(f.length/4);for(let p=0;p<h;p++){const m=p*4,v=Math.round(f[m+3]);u[v]=m}}const d=[];for(let f of o){const h=s(f,l,c);d.push(h),processSplatTreeNode(h,h.rootNode,u,f)}n.postMessage({subTrees:d})}n.onmessage=o=>{o.data.process&&a(o.data.process.centers,o.data.process.maxDepth,o.data.process.maxCentersPerNode)}}function iJe(n,e,t,i,r){n.postMessage({process:{centers:e,maxDepth:i,maxCentersPerNode:r}},t)}function rJe(){return new Worker(URL.createObjectURL(new Blob(["(",nJe.toString(),")(self)"],{type:"application/javascript"})))}class sJe{constructor(e,t){kt(this,"processSplatMesh",function(e,t=()=>!0,i,r){this.splatTreeWorker||(this.splatTreeWorker=rJe()),this.splatMesh=e,this.subTrees=[];const s=new ze,a=(o,l)=>{const c=new Float32Array(l*4);let u=0;for(let d=0;d<l;d++){const f=d+o;if(t(f)){e.getSplatCenter(f,s);const h=u*4;c[h]=s.x,c[h+1]=s.y,c[h+2]=s.z,c[h+3]=f,u++}}return c};return new Promise(o=>{const l=()=>this.disposed?(this.diposeSplatTreeWorker(),o(),!0):!1;i&&i(!1),ll(()=>{if(l())return;const c=[];if(e.dynamicMode){let u=0;for(let d=0;d<e.scenes.length;d++){const h=e.getScene(d).splatBuffer.getSplatCount(),p=a(u,h);c.push(p),u+=h}}else{const u=a(0,e.getSplatCount());c.push(u)}this.splatTreeWorker.onmessage=u=>{l()||u.data.subTrees&&(r&&r(!1),ll(()=>{if(!l()){for(let d of u.data.subTrees){const f=Ly.convertWorkerSubTree(d,e);this.subTrees.push(f)}this.diposeSplatTreeWorker(),r&&r(!0),ll(()=>{o()})}}))},ll(()=>{if(l())return;i&&i(!0);const u=c.map(d=>d.buffer);iJe(this.splatTreeWorker,c,u,this.maxDepth,this.maxCentersPerNode)})})})});this.maxDepth=e,this.maxCentersPerNode=t,this.subTrees=[],this.splatMesh=null}dispose(){this.diposeSplatTreeWorker(),this.disposed=!0}diposeSplatTreeWorker(){this.splatTreeWorker&&this.splatTreeWorker.terminate(),this.splatTreeWorker=null}countLeaves(){let e=0;return this.visitLeaves(()=>{e++}),e}visitLeaves(e){const t=(i,r)=>{i.children.length===0&&r(i);for(let s of i.children)t(s,r)};for(let i of this.subTrees)t(i.rootNode,e)}}function aJe(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function oJe(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const T=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(T){if(T==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";T="mediump"}return T==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const c=a||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),m=n.getParameter(n.MAX_VERTEX_ATTRIBS),v=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),_=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),y=f>0,S=a||e.has("OES_texture_float"),w=y&&S,x=a?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:v,maxVaryings:g,maxFragmentUniforms:_,vertexTextures:y,floatFragmentTextures:S,floatVertexTextures:w,maxSamples:x}}const ky={Default:0,Gradual:1,Instant:2},vv={None:0,Error:1,Warning:2,Info:3,Debug:4},v6=new zo,lJe=new ep,t1=6,cJe=4,uJe=4,dJe=4,fJe=6,hJe=8,I2=4,R2=4,g6=1,pJe=.012,mJe=.003,y6=1,_6=16777216;class es extends hr{constructor(t=Bc.ThreeD,i=!1,r=!1,s=!1,a=1,o=!0,l=!1,c=!1,u=1024,d=vv.None,f=0,h=1,p=.3){super(v6,lJe);kt(this,"buildSplatTree",function(t=[],i,r){return new Promise(s=>{this.disposeSplatTree(),this.baseSplatTree=new sJe(8,1e3);const a=performance.now(),o=new Xi;this.baseSplatTree.processSplatMesh(this,l=>{this.getSplatColor(l,o);const c=this.getSceneIndexForSplat(l),u=t[c]||1;return o.w>=u},i,r).then(()=>{const l=performance.now()-a;if(this.logLevel>=vv.Info&&console.log("SplatTree build: "+l+" ms"),this.disposed)s();else{this.splatTree=this.baseSplatTree,this.baseSplatTree=null;let c=0,u=0,d=0;this.splatTree.visitLeaves(f=>{const h=f.data.indexes.length;h>0&&(u+=h,d++,c++)}),this.logLevel>=vv.Info&&(console.log(`SplatTree leaves: ${this.splatTree.countLeaves()}`),console.log(`SplatTree leaves with splats:${c}`),u=u/d,console.log(`Avg splat count per node: ${u}`),console.log(`Total splat count: ${this.getSplatCount()}`)),s()}})})});kt(this,"updateUniforms",function(){const t=new on;return function(i,r,s,a,o,l){if(this.getSplatCount()>0){if(t.set(i.x*this.devicePixelRatio,i.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(t),this.material.uniforms.basisViewport.value.set(1/t.x,1/t.y),this.material.uniforms.focal.value.set(r,s),this.material.uniforms.orthographicMode.value=a?1:0,this.material.uniforms.orthoZoom.value=o,this.material.uniforms.inverseFocalAdjustment.value=l,this.dynamicMode)for(let u=0;u<this.scenes.length;u++)this.material.uniforms.transforms.value[u].copy(this.getScene(u).transform);if(this.enableOptionalEffects)for(let u=0;u<this.scenes.length;u++)this.material.uniforms.sceneOpacity.value[u]=os(this.getScene(u).opacity,0,1),this.material.uniforms.sceneVisibility.value[u]=this.getScene(u).visible?1:0,this.material.uniformsNeedUpdate=!0;this.material.uniformsNeedUpdate=!0}}}());kt(this,"setupDistancesComputationTransformFeedback",function(){let t;return function(){const i=this.getMaxSplatCount();if(!this.renderer)return;const r=this.lastRenderer!==this.renderer,s=t!==i;if(!r&&!s)return;r?this.disposeDistancesComputationGPUResources():s&&this.disposeDistancesComputationGPUBufferResources();const a=this.renderer.getContext(),o=(h,p,m)=>{const v=h.createShader(p);if(!v)return console.error("Fatal error: gl could not create a shader object."),null;if(h.shaderSource(v,m),h.compileShader(v),!h.getShaderParameter(v,h.COMPILE_STATUS)){let _="unknown";p===h.VERTEX_SHADER?_="vertex shader":p===h.FRAGMENT_SHADER&&(_="fragement shader");const y=h.getShaderInfoLog(v);return console.error("Failed to compile "+_+" with these errors:"+y),h.deleteShader(v),null}return v};let l;this.integerBasedDistancesComputation?(l=`#version 300 es
                in ivec4 center;
                flat out int distance;`,this.dynamicMode?l+=`
                        in uint sceneIndex;
                        uniform ivec4 transforms[${ii.MaxScenes}];
                        void main(void) {
                            ivec4 transform = transforms[sceneIndex];
                            distance = center.x * transform.x + center.y * transform.y + center.z * transform.z + transform.w * center.w;
                        }
                    `:l+=`
                        uniform ivec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `):(l=`#version 300 es
                in vec4 center;
                flat out float distance;`,this.dynamicMode?l+=`
                        in uint sceneIndex;
                        uniform mat4 transforms[${ii.MaxScenes}];
                        void main(void) {
                            vec4 transformedCenter = transforms[sceneIndex] * vec4(center.xyz, 1.0);
                            distance = transformedCenter.z;
                        }
                    `:l+=`
                        uniform vec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `);const c=`#version 300 es
                precision lowp float;
                out vec4 fragColor;
                void main(){}
            `,u=a.getParameter(a.VERTEX_ARRAY_BINDING),d=a.getParameter(a.CURRENT_PROGRAM),f=d?a.getProgramParameter(d,a.DELETE_STATUS):!1;if(r&&(this.distancesTransformFeedback.vao=a.createVertexArray()),a.bindVertexArray(this.distancesTransformFeedback.vao),r){const h=a.createProgram(),p=o(a,a.VERTEX_SHADER,l),m=o(a,a.FRAGMENT_SHADER,c);if(!p||!m)throw new Error("Could not compile shaders for distances computation on GPU.");if(a.attachShader(h,p),a.attachShader(h,m),a.transformFeedbackVaryings(h,["distance"],a.SEPARATE_ATTRIBS),a.linkProgram(h),!a.getProgramParameter(h,a.LINK_STATUS)){const g=a.getProgramInfoLog(h);throw console.error("Fatal error: Failed to link program: "+g),a.deleteProgram(h),a.deleteShader(m),a.deleteShader(p),new Error("Could not link shaders for distances computation on GPU.")}this.distancesTransformFeedback.program=h,this.distancesTransformFeedback.vertexShader=p,this.distancesTransformFeedback.vertexShader=m}if(a.useProgram(this.distancesTransformFeedback.program),this.distancesTransformFeedback.centersLoc=a.getAttribLocation(this.distancesTransformFeedback.program,"center"),this.dynamicMode){this.distancesTransformFeedback.sceneIndexesLoc=a.getAttribLocation(this.distancesTransformFeedback.program,"sceneIndex");for(let h=0;h<this.scenes.length;h++)this.distancesTransformFeedback.transformsLocs[h]=a.getUniformLocation(this.distancesTransformFeedback.program,`transforms[${h}]`)}else this.distancesTransformFeedback.modelViewProjLoc=a.getUniformLocation(this.distancesTransformFeedback.program,"modelViewProj");(r||s)&&(this.distancesTransformFeedback.centersBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),a.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc),this.integerBasedDistancesComputation?a.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc,4,a.INT,0,0):a.vertexAttribPointer(this.distancesTransformFeedback.centersLoc,4,a.FLOAT,!1,0,0),this.dynamicMode&&(this.distancesTransformFeedback.sceneIndexesBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),a.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc),a.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc,1,a.UNSIGNED_INT,0,0))),(r||s)&&(this.distancesTransformFeedback.outDistancesBuffer=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.outDistancesBuffer),a.bufferData(a.ARRAY_BUFFER,i*4,a.STATIC_READ),r&&(this.distancesTransformFeedback.id=a.createTransformFeedback()),a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,this.distancesTransformFeedback.id),a.bindBufferBase(a.TRANSFORM_FEEDBACK_BUFFER,0,this.distancesTransformFeedback.outDistancesBuffer),d&&f!==!0&&a.useProgram(d),u&&a.bindVertexArray(u),this.lastRenderer=this.renderer,t=i}}());kt(this,"fillTransformsArray",function(){const t=[];return function(i){t.length!==i.length&&(t.length=i.length);for(let r=0;r<this.scenes.length;r++){const a=this.getScene(r).transform.elements;for(let o=0;o<16;o++)t[r*16+o]=a[o]}i.set(t)}}());kt(this,"computeDistancesOnGPU",function(){const t=new In;return function(i,r){if(!this.renderer)return;const s=this.renderer.getContext(),a=s.getParameter(s.VERTEX_ARRAY_BINDING),o=s.getParameter(s.CURRENT_PROGRAM),l=o?s.getProgramParameter(o,s.DELETE_STATUS):!1;if(s.bindVertexArray(this.distancesTransformFeedback.vao),s.useProgram(this.distancesTransformFeedback.program),s.enable(s.RASTERIZER_DISCARD),this.dynamicMode)for(let d=0;d<this.scenes.length;d++)if(t.copy(this.getScene(d).transform),t.premultiply(i),this.integerBasedDistancesComputation){const f=es.getIntegerMatrixArray(t),h=[f[2],f[6],f[10],f[14]];s.uniform4i(this.distancesTransformFeedback.transformsLocs[d],h[0],h[1],h[2],h[3])}else s.uniformMatrix4fv(this.distancesTransformFeedback.transformsLocs[d],!1,t.elements);else if(this.integerBasedDistancesComputation){const d=es.getIntegerMatrixArray(i),f=[d[2],d[6],d[10]];s.uniform3i(this.distancesTransformFeedback.modelViewProjLoc,f[0],f[1],f[2])}else{const d=[i.elements[2],i.elements[6],i.elements[10]];s.uniform3f(this.distancesTransformFeedback.modelViewProjLoc,d[0],d[1],d[2])}s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),s.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc),this.integerBasedDistancesComputation?s.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc,4,s.INT,0,0):s.vertexAttribPointer(this.distancesTransformFeedback.centersLoc,4,s.FLOAT,!1,0,0),this.dynamicMode&&(s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),s.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc),s.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc,1,s.UNSIGNED_INT,0,0)),s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,this.distancesTransformFeedback.id),s.bindBufferBase(s.TRANSFORM_FEEDBACK_BUFFER,0,this.distancesTransformFeedback.outDistancesBuffer),s.beginTransformFeedback(s.POINTS),s.drawArrays(s.POINTS,0,this.getSplatCount()),s.endTransformFeedback(),s.bindBufferBase(s.TRANSFORM_FEEDBACK_BUFFER,0,null),s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,null),s.disable(s.RASTERIZER_DISCARD);const c=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);s.flush();const u=new Promise(d=>{const f=()=>{if(this.disposed)d();else switch(s.clientWaitSync(c,0,0)){case s.TIMEOUT_EXPIRED:return this.computeDistancesOnGPUSyncTimeout=setTimeout(f),this.computeDistancesOnGPUSyncTimeout;case s.WAIT_FAILED:throw new Error("should never get here");default:this.computeDistancesOnGPUSyncTimeout=null,s.deleteSync(c);const v=s.getParameter(s.VERTEX_ARRAY_BINDING);s.bindVertexArray(this.distancesTransformFeedback.vao),s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.outDistancesBuffer),s.getBufferSubData(s.ARRAY_BUFFER,0,r),s.bindBuffer(s.ARRAY_BUFFER,null),v&&s.bindVertexArray(v),d()}};this.computeDistancesOnGPUSyncTimeout=setTimeout(f)});return o&&l!==!0&&s.useProgram(o),a&&s.bindVertexArray(a),u}}());kt(this,"getSplatCenter",function(){const t={};return function(i,r,s){this.getLocalSplatParameters(i,t,s),t.splatBuffer.getSplatCenter(t.localIndex,r,t.sceneTransform)}}());kt(this,"getSplatScaleAndRotation",function(){const t={},i=new ze;return function(r,s,a,o){this.getLocalSplatParameters(r,t,o),i.x=void 0,i.y=void 0,i.z=void 0,this.splatRenderMode===Bc.TwoD&&(i.z=0),t.splatBuffer.getSplatScaleAndRotation(t.localIndex,s,a,t.sceneTransform,i)}}());kt(this,"getSplatColor",function(){const t={};return function(i,r){this.getLocalSplatParameters(i,t),t.splatBuffer.getSplatColor(t.localIndex,r)}}());this.renderer=void 0,this.splatRenderMode=t,this.dynamicMode=i,this.enableOptionalEffects=r,this.halfPrecisionCovariancesOnGPU=s,this.devicePixelRatio=a,this.enableDistancesComputationOnGPU=o,this.integerBasedDistancesComputation=l,this.antialiased=c,this.kernel2DSize=p,this.maxScreenSpaceSplatSize=u,this.logLevel=d,this.sphericalHarmonicsDegree=f,this.minSphericalHarmonicsDegree=0,this.sceneFadeInRateMultiplier=h,this.scenes=[],this.splatTree=null,this.baseSplatTree=null,this.splatDataTextures={},this.distancesTransformFeedback={id:null,vertexShader:null,fragmentShader:null,program:null,centersBuffer:null,sceneIndexesBuffer:null,outDistancesBuffer:null,centersLoc:-1,modelViewProjLoc:-1,sceneIndexesLoc:-1,transformsLocs:[]},this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSceneIndexMap=[],this.lastBuildSplatCount=0,this.lastBuildScenes=[],this.lastBuildMaxSplatCount=0,this.lastBuildSceneCount=0,this.firstRenderTime=-1,this.finalBuild=!1,this.webGLUtils=null,this.boundingBox=new Ul,this.calculatedSceneCenter=new ze,this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.visibleRegionChanging=!1,this.splatScale=1,this.pointCloudModeEnabled=!1,this.disposed=!1,this.lastRenderer=null,this.visible=!1}static buildScenes(t,i,r){const s=[];s.length=i.length;for(let a=0;a<i.length;a++){const o=i[a],l=r[a]||{};let c=l.position||[0,0,0],u=l.rotation||[0,0,0,1],d=l.scale||[1,1,1];const f=new ze().fromArray(c),h=new Ji().fromArray(u),p=new ze().fromArray(d),m=es.createScene(o,f,h,p,l.splatAlphaRemovalThreshold||1,l.opacity,l.visible);t.add(m),s[a]=m}return s}static createScene(t,i,r,s,a,o=1,l=!0){return new tJe(t,i,r,s,a,o,l)}static buildSplatIndexMaps(t){const i=[],r=[];let s=0;for(let a=0;a<t.length;a++){const l=t[a].getMaxSplatCount();for(let c=0;c<l;c++)i[s]=c,r[s]=a,s++}return{localSplatIndexMap:i,sceneIndexMap:r}}build(t,i,r=!0,s=!1,a,o,l=!0){this.sceneOptions=i,this.finalBuild=s;const c=es.getTotalMaxSplatCountForSplatBuffers(t),u=es.buildScenes(this,t,i);if(r)for(let v=0;v<this.scenes.length&&v<u.length;v++){const g=u[v],_=this.getScene(v);g.copyTransformData(_)}this.scenes=u;let d=3;for(let v of t){const g=v.getMinSphericalHarmonicsDegree();g<d&&(d=g)}this.minSphericalHarmonicsDegree=Math.min(d,this.sphericalHarmonicsDegree);let f=!1;if(t.length!==this.lastBuildScenes.length)f=!0;else for(let v=0;v<t.length;v++)if(t[v]!==this.lastBuildScenes[v].splatBuffer){f=!0;break}let h=!0;if((this.scenes.length!==1||this.lastBuildSceneCount!==this.scenes.length||this.lastBuildMaxSplatCount!==c||f)&&(h=!1),!h){this.boundingBox=new Ul,l||(this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.firstRenderTime=-1),this.lastBuildScenes=[],this.lastBuildSplatCount=0,this.lastBuildMaxSplatCount=0,this.disposeMeshData(),this.geometry=eJe.build(c),this.splatRenderMode===Bc.ThreeD?this.material=LC.build(this.dynamicMode,this.enableOptionalEffects,this.antialiased,this.maxScreenSpaceSplatSize,this.splatScale,this.pointCloudModeEnabled,this.minSphericalHarmonicsDegree,this.kernel2DSize):this.material=kC.build(this.dynamicMode,this.enableOptionalEffects,this.splatScale,this.pointCloudModeEnabled,this.minSphericalHarmonicsDegree);const v=es.buildSplatIndexMaps(t);this.globalSplatIndexToLocalSplatIndexMap=v.localSplatIndexMap,this.globalSplatIndexToSceneIndexMap=v.sceneIndexMap}const p=this.getSplatCount(!0);this.enableDistancesComputationOnGPU&&this.setupDistancesComputationTransformFeedback();const m=this.refreshGPUDataFromSplatBuffers(h);for(let v=0;v<this.scenes.length;v++)this.lastBuildScenes[v]=this.scenes[v];return this.lastBuildSplatCount=p,this.lastBuildMaxSplatCount=this.getMaxSplatCount(),this.lastBuildSceneCount=this.scenes.length,s&&this.scenes.length>0&&this.buildSplatTree(i.map(v=>v.splatAlphaRemovalThreshold||1),a,o).then(()=>{this.onSplatTreeReadyCallback&&this.onSplatTreeReadyCallback(this.splatTree),this.onSplatTreeReadyCallback=null}),this.visible=this.scenes.length>0,m}freeIntermediateSplatData(){const t=i=>{delete i.source.data,delete i.image,i.onUpdate=null};delete this.splatDataTextures.baseData.covariances,delete this.splatDataTextures.baseData.centers,delete this.splatDataTextures.baseData.colors,delete this.splatDataTextures.baseData.sphericalHarmonics,delete this.splatDataTextures.centerColors.data,delete this.splatDataTextures.covariances.data,this.splatDataTextures.sphericalHarmonics&&delete this.splatDataTextures.sphericalHarmonics.data,this.splatDataTextures.sceneIndexes&&delete this.splatDataTextures.sceneIndexes.data,this.splatDataTextures.centerColors.texture.needsUpdate=!0,this.splatDataTextures.centerColors.texture.onUpdate=()=>{t(this.splatDataTextures.centerColors.texture)},this.splatDataTextures.covariances.texture.needsUpdate=!0,this.splatDataTextures.covariances.texture.onUpdate=()=>{t(this.splatDataTextures.covariances.texture)},this.splatDataTextures.sphericalHarmonics&&(this.splatDataTextures.sphericalHarmonics.texture?(this.splatDataTextures.sphericalHarmonics.texture.needsUpdate=!0,this.splatDataTextures.sphericalHarmonics.texture.onUpdate=()=>{t(this.splatDataTextures.sphericalHarmonics.texture)}):this.splatDataTextures.sphericalHarmonics.textures.forEach(i=>{i.needsUpdate=!0,i.onUpdate=()=>{t(i)}})),this.splatDataTextures.sceneIndexes&&(this.splatDataTextures.sceneIndexes.texture.needsUpdate=!0,this.splatDataTextures.sceneIndexes.texture.onUpdate=()=>{t(this.splatDataTextures.sceneIndexes.texture)})}dispose(){this.disposeMeshData(),this.disposeTextures(),this.disposeSplatTree(),this.enableDistancesComputationOnGPU&&(this.computeDistancesOnGPUSyncTimeout&&(clearTimeout(this.computeDistancesOnGPUSyncTimeout),this.computeDistancesOnGPUSyncTimeout=null),this.disposeDistancesComputationGPUResources()),this.scenes=[],this.distancesTransformFeedback={id:null,vertexShader:null,fragmentShader:null,program:null,centersBuffer:null,sceneIndexesBuffer:null,outDistancesBuffer:null,centersLoc:-1,modelViewProjLoc:-1,sceneIndexesLoc:-1,transformsLocs:[]},this.renderer=null,this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSceneIndexMap=[],this.lastBuildSplatCount=0,this.lastBuildScenes=[],this.lastBuildMaxSplatCount=0,this.lastBuildSceneCount=0,this.firstRenderTime=-1,this.finalBuild=!1,this.webGLUtils=null,this.boundingBox=new Ul,this.calculatedSceneCenter=new ze,this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.visibleRegionChanging=!1,this.splatScale=1,this.pointCloudModeEnabled=!1,this.disposed=!0,this.lastRenderer=null,this.visible=!1}disposeMeshData(){this.geometry&&this.geometry!==v6&&(this.geometry.dispose(),this.geometry=null),this.material&&(this.material.dispose(),this.material=null)}disposeTextures(){for(let t in this.splatDataTextures)if(this.splatDataTextures.hasOwnProperty(t)){const i=this.splatDataTextures[t];i.texture&&(i.texture.dispose(),i.texture=null)}this.splatDataTextures=null}disposeSplatTree(){this.splatTree&&(this.splatTree.dispose(),this.splatTree=null),this.baseSplatTree&&(this.baseSplatTree.dispose(),this.baseSplatTree=null)}getSplatTree(){return this.splatTree}onSplatTreeReady(t){this.onSplatTreeReadyCallback=t}getDataForDistancesComputation(t,i){const r=this.integerBasedDistancesComputation?this.getIntegerCenters(t,i,!0):this.getFloatCenters(t,i,!0),s=this.getSceneIndexes(t,i);return{centers:r,sceneIndexes:s}}refreshGPUDataFromSplatBuffers(t){const i=this.getSplatCount(!0);this.refreshDataTexturesFromSplatBuffers(t);const r=t?this.lastBuildSplatCount:0,{centers:s,sceneIndexes:a}=this.getDataForDistancesComputation(r,i-1);return this.enableDistancesComputationOnGPU&&this.refreshGPUBuffersForDistancesComputation(s,a,t),{from:r,to:i-1,count:i-r,centers:s,sceneIndexes:a}}refreshGPUBuffersForDistancesComputation(t,i,r=!1){const s=r?this.lastBuildSplatCount:0;this.updateGPUCentersBufferForDistancesComputation(r,t,s),this.updateGPUTransformIndexesBufferForDistancesComputation(r,i,s)}refreshDataTexturesFromSplatBuffers(t){const i=this.getSplatCount(!0),r=this.lastBuildSplatCount,s=i-1;t?this.updateBaseDataFromSplatBuffers(r,s):(this.setupDataTextures(),this.updateBaseDataFromSplatBuffers()),this.updateDataTexturesFromBaseData(r,s),this.updateVisibleRegion(t)}setupDataTextures(){const t=this.getMaxSplatCount(),i=this.getSplatCount(!0);this.disposeTextures();const r=(C,M)=>{const A=new on(4096,1024);for(;A.x*A.y*C<t*M;)A.y*=2;return A},s=C=>C>=1?fJe:uJe,a=C=>{const M=s(C),A=r(M,6);return{elementsPerTexelStored:M,texSize:A}};let o=this.getTargetCovarianceCompressionLevel();const l=0,c=this.getTargetSphericalHarmonicsCompressionLevel();let u,d,f;if(this.splatRenderMode===Bc.ThreeD){const C=a(o);C.texSize.x*C.texSize.y>_6&&o===0&&(o=1),u=new Float32Array(t*t1)}else d=new Float32Array(t*3),f=new Float32Array(t*4);const h=new Float32Array(t*3),p=new Uint8Array(t*4);let m=Float32Array;c===1?m=Uint16Array:c===2&&(m=Uint8Array);const v=pv(this.minSphericalHarmonicsDegree),g=this.minSphericalHarmonicsDegree?new m(t*v):void 0,_=r(R2,4),y=new Uint32Array(_.x*_.y*R2);es.updateCenterColorsPaddedData(0,i-1,h,p,y);const S=new Ku(y,_.x,_.y,fv,xo);if(S.internalFormat="RGBA32UI",S.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=S,this.material.uniforms.centersColorsTextureSize.value.copy(_),this.material.uniformsNeedUpdate=!0,this.splatDataTextures={baseData:{covariances:u,scales:d,rotations:f,centers:h,colors:p,sphericalHarmonics:g},centerColors:{data:y,texture:S,size:_}},this.splatRenderMode===Bc.ThreeD){const C=a(o),M=C.elementsPerTexelStored,A=C.texSize;let E=o>=1?Uint32Array:Float32Array;const I=o>=1?hJe:dJe,P=new E(A.x*A.y*I);o===0?P.set(u):es.updatePaddedCompressedCovariancesTextureData(u,P,0,0,u.length);let D;if(o>=1)D=new Ku(P,A.x,A.y,fv,xo),D.internalFormat="RGBA32UI",this.material.uniforms.covariancesTextureHalfFloat.value=D;else{D=new Ku(P,A.x,A.y,Ys,ol),this.material.uniforms.covariancesTexture.value=D;const L=new Ku(new Uint32Array(32),2,2,fv,xo);L.internalFormat="RGBA32UI",this.material.uniforms.covariancesTextureHalfFloat.value=L,L.needsUpdate=!0}D.needsUpdate=!0,this.material.uniforms.covariancesAreHalfFloat.value=o>=1?1:0,this.material.uniforms.covariancesTextureSize.value.copy(A),this.splatDataTextures.covariances={data:P,texture:D,size:A,compressionLevel:o,elementsPerTexelStored:M,elementsPerTexelAllocated:I}}else{const M=r(I2,6);let A=Float32Array,E=ol;const I=new A(M.x*M.y*I2);es.updateScaleRotationsPaddedData(0,i-1,d,f,I);const P=new Ku(I,M.x,M.y,Ys,E);P.needsUpdate=!0,this.material.uniforms.scaleRotationsTexture.value=P,this.material.uniforms.scaleRotationsTextureSize.value.copy(M),this.splatDataTextures.scaleRotations={data:I,texture:P,size:M,compressionLevel:l}}if(g){const C=c===2?tc:Hg;let M=v;M%2!==0&&M++;const A=this.minSphericalHarmonicsDegree===2?4:2,E=A===4?Ys:EO;let I=r(A,M);if(I.x*I.y<=_6){const P=I.x*I.y*A,D=new m(P);for(let R=0;R<i;R++){const B=v*R,k=M*R;for(let O=0;O<v;O++)D[k+O]=g[B+O]}const L=new Ku(D,I.x,I.y,E,C);L.needsUpdate=!0,this.material.uniforms.sphericalHarmonicsTexture.value=L,this.splatDataTextures.sphericalHarmonics={componentCount:v,paddedComponentCount:M,data:D,textureCount:1,texture:L,size:I,compressionLevel:c,elementsPerTexel:A}}else{const P=v/3;M=P,M%2!==0&&M++,I=r(A,M);const D=I.x*I.y*A,L=[this.material.uniforms.sphericalHarmonicsTextureR,this.material.uniforms.sphericalHarmonicsTextureG,this.material.uniforms.sphericalHarmonicsTextureB],R=[],B=[];for(let k=0;k<3;k++){const O=new m(D);R.push(O);for(let G=0;G<i;G++){const q=v*G,W=M*G;if(P>=3){for(let Y=0;Y<3;Y++)O[W+Y]=g[q+k*3+Y];if(P>=8)for(let Y=0;Y<5;Y++)O[W+3+Y]=g[q+9+k*5+Y]}}const U=new Ku(O,I.x,I.y,E,C);B.push(U),U.needsUpdate=!0,L[k].value=U}this.material.uniforms.sphericalHarmonicsMultiTextureMode.value=1,this.splatDataTextures.sphericalHarmonics={componentCount:v,componentCountPerChannel:P,paddedComponentCount:M,data:R,textureCount:3,textures:B,size:I,compressionLevel:c,elementsPerTexel:A}}this.material.uniforms.sphericalHarmonicsTextureSize.value.copy(I),this.material.uniforms.sphericalHarmonics8BitMode.value=c===2?1:0;for(let P=0;P<this.scenes.length;P++){const D=this.scenes[P].splatBuffer;this.material.uniforms.sphericalHarmonics8BitCompressionRangeMin.value[P]=D.minSphericalHarmonicsCoeff,this.material.uniforms.sphericalHarmonics8BitCompressionRangeMax.value[P]=D.maxSphericalHarmonicsCoeff}this.material.uniformsNeedUpdate=!0}const w=r(g6,4),x=new Uint32Array(w.x*w.y*g6);for(let C=0;C<i;C++)x[C]=this.globalSplatIndexToSceneIndexMap[C];const T=new Ku(x,w.x,w.y,QM,xo);T.internalFormat="R32UI",T.needsUpdate=!0,this.material.uniforms.sceneIndexesTexture.value=T,this.material.uniforms.sceneIndexesTextureSize.value.copy(w),this.material.uniformsNeedUpdate=!0,this.splatDataTextures.sceneIndexes={data:x,texture:T,size:w},this.material.uniforms.sceneCount.value=this.scenes.length}updateBaseDataFromSplatBuffers(t,i){const r=this.splatDataTextures.covariances,s=r?r.compressionLevel:void 0,a=this.splatDataTextures.scaleRotations,o=a?a.compressionLevel:void 0,l=this.splatDataTextures.sphericalHarmonics,c=l?l.compressionLevel:0;this.fillSplatDataArrays(this.splatDataTextures.baseData.covariances,this.splatDataTextures.baseData.scales,this.splatDataTextures.baseData.rotations,this.splatDataTextures.baseData.centers,this.splatDataTextures.baseData.colors,this.splatDataTextures.baseData.sphericalHarmonics,void 0,s,o,c,t,i,t)}updateDataTexturesFromBaseData(t,i){const r=this.splatDataTextures.covariances,s=r?r.compressionLevel:void 0,a=this.splatDataTextures.scaleRotations,o=a?a.compressionLevel:void 0,l=this.splatDataTextures.sphericalHarmonics,c=l?l.compressionLevel:0,u=this.splatDataTextures.centerColors,d=u.data,f=u.texture;es.updateCenterColorsPaddedData(t,i,this.splatDataTextures.baseData.centers,this.splatDataTextures.baseData.colors,d);const h=this.renderer?this.renderer.properties.get(f):null;if(!h||!h.__webglTexture?f.needsUpdate=!0:this.updateDataTexture(d,u.texture,u.size,h,R2,cJe,4,t,i),r){const y=r.texture,S=t*t1,w=i*t1;if(s===0)for(let T=S;T<=w;T++){const C=this.splatDataTextures.baseData.covariances[T];r.data[T]=C}else es.updatePaddedCompressedCovariancesTextureData(this.splatDataTextures.baseData.covariances,r.data,t*r.elementsPerTexelAllocated,S,w);const x=this.renderer?this.renderer.properties.get(y):null;!x||!x.__webglTexture?y.needsUpdate=!0:s===0?this.updateDataTexture(r.data,r.texture,r.size,x,r.elementsPerTexelStored,t1,4,t,i):this.updateDataTexture(r.data,r.texture,r.size,x,r.elementsPerTexelAllocated,r.elementsPerTexelAllocated,2,t,i)}if(a){const y=a.data,S=a.texture,w=6,x=o===0?4:2;es.updateScaleRotationsPaddedData(t,i,this.splatDataTextures.baseData.scales,this.splatDataTextures.baseData.rotations,y);const T=this.renderer?this.renderer.properties.get(S):null;!T||!T.__webglTexture?S.needsUpdate=!0:this.updateDataTexture(y,a.texture,a.size,T,I2,w,x,t,i)}const p=this.splatDataTextures.baseData.sphericalHarmonics;if(p){let y=4;c===1?y=2:c===2&&(y=1);const S=(T,C,M,A,E)=>{const I=this.renderer?this.renderer.properties.get(T):null;!I||!I.__webglTexture?T.needsUpdate=!0:this.updateDataTexture(A,T,C,I,M,E,y,t,i)},w=l.componentCount,x=l.paddedComponentCount;if(l.textureCount===1){const T=l.data;for(let C=t;C<=i;C++){const M=w*C,A=x*C;for(let E=0;E<w;E++)T[A+E]=p[M+E]}S(l.texture,l.size,l.elementsPerTexel,T,x)}else{const T=l.componentCountPerChannel;for(let C=0;C<3;C++){const M=l.data[C];for(let A=t;A<=i;A++){const E=w*A,I=x*A;if(T>=3){for(let P=0;P<3;P++)M[I+P]=p[E+C*3+P];if(T>=8)for(let P=0;P<5;P++)M[I+3+P]=p[E+9+C*5+P]}}S(l.textures[C],l.size,l.elementsPerTexel,M,x)}}}const m=this.splatDataTextures.sceneIndexes,v=m.data;for(let y=this.lastBuildSplatCount;y<=i;y++)v[y]=this.globalSplatIndexToSceneIndexMap[y];const g=m.texture,_=this.renderer?this.renderer.properties.get(g):null;!_||!_.__webglTexture?g.needsUpdate=!0:this.updateDataTexture(v,m.texture,m.size,_,1,1,1,this.lastBuildSplatCount,i)}getTargetCovarianceCompressionLevel(){return this.halfPrecisionCovariancesOnGPU?1:0}getTargetSphericalHarmonicsCompressionLevel(){return Math.max(1,this.getMaximumSplatBufferCompressionLevel())}getMaximumSplatBufferCompressionLevel(){let t;for(let i=0;i<this.scenes.length;i++){const s=this.getScene(i).splatBuffer;(i===0||s.compressionLevel>t)&&(t=s.compressionLevel)}return t}getMinimumSplatBufferCompressionLevel(){let t;for(let i=0;i<this.scenes.length;i++){const s=this.getScene(i).splatBuffer;(i===0||s.compressionLevel<t)&&(t=s.compressionLevel)}return t}static computeTextureUpdateRegion(t,i,r,s,a){const o=a/s,l=t*o,c=Math.floor(l/r),u=c*r*s,d=i*o,f=Math.floor(d/r),h=f*r*s+r*s;return{dataStart:u,dataEnd:h,startRow:c,endRow:f}}updateDataTexture(t,i,r,s,a,o,l,c,u){const d=this.renderer.getContext(),f=es.computeTextureUpdateRegion(c,u,r.x,a,o),h=f.dataEnd-f.dataStart,p=new t.constructor(t.buffer,f.dataStart*l,h),m=f.endRow-f.startRow+1,v=this.webGLUtils.convert(i.type),g=this.webGLUtils.convert(i.format,i.colorSpace),_=d.getParameter(d.TEXTURE_BINDING_2D);d.bindTexture(d.TEXTURE_2D,s.__webglTexture),d.texSubImage2D(d.TEXTURE_2D,0,0,f.startRow,r.x,m,g,v,p),d.bindTexture(d.TEXTURE_2D,_)}static updatePaddedCompressedCovariancesTextureData(t,i,r,s,a){let o=new DataView(i.buffer),l=r,c=0;for(let u=s;u<=a;u+=2)o.setUint16(l*2,t[u],!0),o.setUint16(l*2+2,t[u+1],!0),l+=2,c++,c>=3&&(l+=2,c=0)}static updateCenterColorsPaddedData(t,i,r,s,a){for(let o=t;o<=i;o++){const l=o*4,c=o*3,u=o*4;a[u]=sZe(s,l),a[u+1]=w2(r[c]),a[u+2]=w2(r[c+1]),a[u+3]=w2(r[c+2])}}static updateScaleRotationsPaddedData(t,i,r,s,a){for(let l=t;l<=i;l++){const c=l*3,u=l*4,d=l*6;a[d]=r[c],a[d+1]=r[c+1],a[d+2]=r[c+2],a[d+3]=s[u],a[d+4]=s[u+1],a[d+5]=s[u+2]}}updateVisibleRegion(t){const i=this.getSplatCount(!0),r=new ze;if(!t){const a=new ze;this.scenes.forEach(o=>{a.add(o.splatBuffer.sceneCenter)}),a.multiplyScalar(1/this.scenes.length),this.calculatedSceneCenter.copy(a),this.material.uniforms.sceneCenter.value.copy(this.calculatedSceneCenter),this.material.uniformsNeedUpdate=!0}const s=t?this.lastBuildSplatCount:0;for(let a=s;a<i;a++){this.getSplatCenter(a,r,!0);const o=r.sub(this.calculatedSceneCenter).length();o>this.maxSplatDistanceFromSceneCenter&&(this.maxSplatDistanceFromSceneCenter=o)}this.maxSplatDistanceFromSceneCenter-this.visibleRegionBufferRadius>y6&&(this.visibleRegionBufferRadius=this.maxSplatDistanceFromSceneCenter,this.visibleRegionRadius=Math.max(this.visibleRegionBufferRadius-y6,0)),this.finalBuild&&(this.visibleRegionRadius=this.visibleRegionBufferRadius=this.maxSplatDistanceFromSceneCenter),this.updateVisibleRegionFadeDistance()}updateVisibleRegionFadeDistance(t=ky.Default){const i=pJe*this.sceneFadeInRateMultiplier,r=mJe*this.sceneFadeInRateMultiplier,s=this.finalBuild?i:r,a=t===ky.Default?s:r;this.visibleRegionFadeStartRadius=(this.visibleRegionRadius-this.visibleRegionFadeStartRadius)*a+this.visibleRegionFadeStartRadius;const l=(this.visibleRegionBufferRadius>0?this.visibleRegionFadeStartRadius/this.visibleRegionBufferRadius:0)>.99,c=l||t===ky.Instant?1:0;this.material.uniforms.visibleRegionFadeStartRadius.value=this.visibleRegionFadeStartRadius,this.material.uniforms.visibleRegionRadius.value=this.visibleRegionRadius,this.material.uniforms.firstRenderTime.value=this.firstRenderTime,this.material.uniforms.currentTime.value=performance.now(),this.material.uniforms.fadeInComplete.value=c,this.material.uniformsNeedUpdate=!0,this.visibleRegionChanging=!l}updateRenderIndexes(t,i){const r=this.geometry;r.attributes.splatIndex.set(t),r.attributes.splatIndex.needsUpdate=!0,i>0&&this.firstRenderTime===-1&&(this.firstRenderTime=performance.now()),r.instanceCount=i,r.setDrawRange(0,i)}updateTransforms(){for(let t=0;t<this.scenes.length;t++)this.getScene(t).updateTransform(this.dynamicMode)}setSplatScale(t=1){this.splatScale=t,this.material.uniforms.splatScale.value=t,this.material.uniformsNeedUpdate=!0}getSplatScale(){return this.splatScale}setPointCloudModeEnabled(t){this.pointCloudModeEnabled=t,this.material.uniforms.pointCloudModeEnabled.value=t?1:0,this.material.uniformsNeedUpdate=!0}getPointCloudModeEnabled(){return this.pointCloudModeEnabled}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(t=!1){return t?es.getTotalSplatCountForScenes(this.scenes):this.lastBuildSplatCount}static getTotalSplatCountForScenes(t){let i=0;for(let r of t)r&&r.splatBuffer&&(i+=r.splatBuffer.getSplatCount());return i}static getTotalSplatCountForSplatBuffers(t){let i=0;for(let r of t)i+=r.getSplatCount();return i}getMaxSplatCount(){return es.getTotalMaxSplatCountForScenes(this.scenes)}static getTotalMaxSplatCountForScenes(t){let i=0;for(let r of t)r&&r.splatBuffer&&(i+=r.splatBuffer.getMaxSplatCount());return i}static getTotalMaxSplatCountForSplatBuffers(t){let i=0;for(let r of t)i+=r.getMaxSplatCount();return i}disposeDistancesComputationGPUResources(){if(!this.renderer)return;const t=this.renderer.getContext();this.distancesTransformFeedback.vao&&(t.deleteVertexArray(this.distancesTransformFeedback.vao),this.distancesTransformFeedback.vao=null),this.distancesTransformFeedback.program&&(t.deleteProgram(this.distancesTransformFeedback.program),t.deleteShader(this.distancesTransformFeedback.vertexShader),t.deleteShader(this.distancesTransformFeedback.fragmentShader),this.distancesTransformFeedback.program=null,this.distancesTransformFeedback.vertexShader=null,this.distancesTransformFeedback.fragmentShader=null),this.disposeDistancesComputationGPUBufferResources(),this.distancesTransformFeedback.id&&(t.deleteTransformFeedback(this.distancesTransformFeedback.id),this.distancesTransformFeedback.id=null)}disposeDistancesComputationGPUBufferResources(){if(!this.renderer)return;const t=this.renderer.getContext();this.distancesTransformFeedback.centersBuffer&&(this.distancesTransformFeedback.centersBuffer=null,t.deleteBuffer(this.distancesTransformFeedback.centersBuffer)),this.distancesTransformFeedback.outDistancesBuffer&&(t.deleteBuffer(this.distancesTransformFeedback.outDistancesBuffer),this.distancesTransformFeedback.outDistancesBuffer=null)}setRenderer(t){if(t!==this.renderer){this.renderer=t;const i=this.renderer.getContext(),r=new aJe(i),s=new oJe(i,r,{});if(r.init(s),this.webGLUtils=new TZ(i,r),this.enableDistancesComputationOnGPU&&this.getSplatCount()>0){this.setupDistancesComputationTransformFeedback();const{centers:a,sceneIndexes:o}=this.getDataForDistancesComputation(0,this.getSplatCount()-1);this.refreshGPUBuffersForDistancesComputation(a,o)}}}updateGPUCentersBufferForDistancesComputation(t,i,r){if(!this.renderer)return;const s=this.renderer.getContext(),a=s.getParameter(s.VERTEX_ARRAY_BINDING);s.bindVertexArray(this.distancesTransformFeedback.vao);const o=this.integerBasedDistancesComputation?Uint32Array:Float32Array,l=16,c=r*l;if(s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),t)s.bufferSubData(s.ARRAY_BUFFER,c,i);else{const u=new o(this.getMaxSplatCount()*l);u.set(i),s.bufferData(s.ARRAY_BUFFER,u,s.STATIC_DRAW)}s.bindBuffer(s.ARRAY_BUFFER,null),a&&s.bindVertexArray(a)}updateGPUTransformIndexesBufferForDistancesComputation(t,i,r){if(!this.renderer||!this.dynamicMode)return;const s=this.renderer.getContext(),a=s.getParameter(s.VERTEX_ARRAY_BINDING);s.bindVertexArray(this.distancesTransformFeedback.vao);const o=r*4;if(s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),t)s.bufferSubData(s.ARRAY_BUFFER,o,i);else{const l=new Uint32Array(this.getMaxSplatCount()*4);l.set(i),s.bufferData(s.ARRAY_BUFFER,l,s.STATIC_DRAW)}s.bindBuffer(s.ARRAY_BUFFER,null),a&&s.bindVertexArray(a)}getSceneIndexes(t,i){let r;const s=i-t+1;r=new Uint32Array(s);for(let a=t;a<=i;a++)r[a]=this.globalSplatIndexToSceneIndexMap[a];return r}getLocalSplatParameters(t,i,r){r==null&&(r=!this.dynamicMode),i.splatBuffer=this.getSplatBufferForSplat(t),i.localIndex=this.getSplatLocalIndex(t),i.sceneTransform=r?this.getSceneTransformForSplat(t):null}fillSplatDataArrays(t,i,r,s,a,o,l,c=0,u=0,d=1,f,h,p=0,m){const v=new ze;v.x=void 0,v.y=void 0,this.splatRenderMode===Bc.ThreeD?v.z=void 0:v.z=1;const g=new In;let _=0,y=this.scenes.length-1;m!=null&&m>=0&&m<=this.scenes.length&&(_=m,y=m);for(let S=_;S<=y;S++){l==null&&(l=!this.dynamicMode);const w=this.getScene(S),x=w.splatBuffer;let T;if(l&&(this.getSceneTransform(S,g),T=g),t&&x.fillSplatCovarianceArray(t,T,f,h,p,c),i||r){if(!i||!r)throw new Error('SplatMesh::fillSplatDataArrays() -> "scales" and "rotations" must both be valid.');x.fillSplatScaleRotationArray(i,r,T,f,h,p,u,v)}s&&x.fillSplatCenterArray(s,T,f,h,p),a&&x.fillSplatColorArray(a,w.minimumAlpha,f,h,p),o&&x.fillSphericalHarmonicsArray(o,this.minSphericalHarmonicsDegree,T,f,h,p,d),p+=x.getSplatCount()}}getIntegerCenters(t,i,r=!1){const s=i-t+1,a=new Float32Array(s*3);this.fillSplatDataArrays(null,null,null,a,null,null,void 0,void 0,void 0,void 0,t);let o,l=r?4:3;o=new Int32Array(s*l);for(let c=0;c<s;c++){for(let u=0;u<3;u++)o[c*l+u]=Math.round(a[c*3+u]*1e3);r&&(o[c*l+3]=1e3)}return o}getFloatCenters(t,i,r=!1){const s=i-t+1,a=new Float32Array(s*3);if(this.fillSplatDataArrays(null,null,null,a,null,null,void 0,void 0,void 0,void 0,t),!r)return a;let o=new Float32Array(s*4);for(let l=0;l<s;l++){for(let c=0;c<3;c++)o[l*4+c]=a[l*3+c];o[l*4+3]=1}return o}getSceneTransform(t,i){const r=this.getScene(t);r.updateTransform(this.dynamicMode),i.copy(r.transform)}getScene(t){if(t<0||t>=this.scenes.length)throw new Error("SplatMesh::getScene() -> Invalid scene index.");return this.scenes[t]}getSceneCount(){return this.scenes.length}getSplatBufferForSplat(t){return this.getScene(this.globalSplatIndexToSceneIndexMap[t]).splatBuffer}getSceneIndexForSplat(t){return this.globalSplatIndexToSceneIndexMap[t]}getSceneTransformForSplat(t){return this.getScene(this.globalSplatIndexToSceneIndexMap[t]).transform}getSplatLocalIndex(t){return this.globalSplatIndexToLocalSplatIndexMap[t]}static getIntegerMatrixArray(t){const i=t.elements,r=[];for(let s=0;s<16;s++)r[s]=Math.round(i[s]*1e3);return r}computeBoundingBox(t=!1,i){let r=this.getSplatCount();if(i!=null){if(i<0||i>=this.scenes.length)throw new Error("SplatMesh::computeBoundingBox() -> Invalid scene index.");r=this.scenes[i].splatBuffer.getSplatCount()}const s=new Float32Array(r*3);this.fillSplatDataArrays(null,null,null,s,null,null,t,void 0,void 0,void 0,void 0,i);const a=new ze,o=new ze;for(let l=0;l<r;l++){const c=l*3,u=s[c],d=s[c+1],f=s[c+2];(l===0||u<a.x)&&(a.x=u),(l===0||d<a.y)&&(a.y=d),(l===0||f<a.z)&&(a.z=f),(l===0||u>o.x)&&(o.x=u),(l===0||d>o.y)&&(o.y=d),(l===0||f>o.z)&&(o.z=f)}return new Ul(a,o)}}var vJe="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEbA2AAAGAQf39/f39/f39/f39/f39/fwBgAAF/AhIBA2VudgZtZW1vcnkCAwCAgAQDBAMAAQIHVAQRX193YXNtX2NhbGxfY3RvcnMAABhfX3dhc21fYXBwbHlfZGF0YV9yZWxvY3MAAAtzb3J0SW5kZXhlcwABE2Vtc2NyaXB0ZW5fdGxzX2luaXQAAgqWEAMDAAELihAEAXwDewN/A30gCyAKayEMAkACQCAOBEAgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQMgDCEBA0AgAyABQQJ0IgVqIAIgACAFaigCAEECdGooAgAiBTYCACAFIAogBSAKSBshCiAFIA0gBSANShshDSABQQFqIgEgC0cNAAsMAwsgDwRAIAsgDE0NAkF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiFWooAgAiFkECdGooAgAiFEcEQAJ/IAX9CQI4IAggFEEGdGoiDv0JAgwgDioCHP0gASAOKgIs/SACIA4qAjz9IAP95gEgBf0JAiggDv0JAgggDioCGP0gASAOKgIo/SACIA4qAjj9IAP95gEgBf0JAgggDv0JAgAgDioCEP0gASAOKgIg/SACIA4qAjD9IAP95gEgBf0JAhggDv0JAgQgDioCFP0gASAOKgIk/SACIA4qAjT9IAP95gH95AH95AH95AEiEf1f/QwAAAAAAECPQAAAAAAAQI9AIhL98gEiE/0hASIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDgJ/IBP9IQAiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgL/REgDv0cAQJ/IBEgEf0NCAkKCwwNDg8AAAAAAAAAAP1fIBL98gEiEf0hACIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAv9HAICfyAR/SEBIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4C/0cAyESIBQhDwsgAyAVaiABIBZBBHRq/QAAACAS/bUBIhH9GwAgEf0bAWogEf0bAmogEf0bA2oiDjYCACAOIAogCiAOShshCiAOIA0gDSAOSBshDSACQQFqIgIgC0cNAAsMAwsCfyAFKgIIu/0UIAUqAhi7/SIB/QwAAAAAAECPQAAAAAAAQI9A/fIBIhH9IQEiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIQ4CfyAR/SEAIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyECAn8gBSoCKLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEFQfj///8HIQpBiICAgHghDSALIAxNDQIgAv0RIA79HAEgBf0cAiESIAwhBQNAIAMgBUECdCICaiABIAAgAmooAgBBBHRq/QAAACAS/bUBIhH9GwAgEf0bAWogEf0bAmoiAjYCACACIAogAiAKSBshCiACIA0gAiANShshDSAFQQFqIgUgC0cNAAsMAgsgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQIgDCEBA0AgAyABQQJ0IgVqAn8gAiAAIAVqKAIAQQJ0aioCALtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAFBAWoiASALRw0ACwwCCyAPRQRAIAsgDE0NASAFKgIoIRcgBSoCGCEYIAUqAgghGUH4////ByEKQYiAgIB4IQ0gDCEFA0ACfyAXIAEgACAFQQJ0IgdqKAIAQQR0aiICKgIIlCAZIAIqAgCUIBggAioCBJSSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOIAMgB2ogDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgCyAMTQ0AQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIUaigCAEECdCIVaigCACIORwRAIAX9CQI4IAggDkEGdGoiD/0JAgwgDyoCHP0gASAPKgIs/SACIA8qAjz9IAP95gEgBf0JAiggD/0JAgggDyoCGP0gASAPKgIo/SACIA8qAjj9IAP95gEgBf0JAgggD/0JAgAgDyoCEP0gASAPKgIg/SACIA8qAjD9IAP95gEgBf0JAhggD/0JAgQgDyoCFP0gASAPKgIk/SACIA8qAjT9IAP95gH95AH95AH95AEhESAOIQ8LIAMgFGoCfyAR/R8DIAEgFUECdCIOQQxyaioCAJQgEf0fAiABIA5BCHJqKgIAlCAR/R8AIAEgDmoqAgCUIBH9HwEgASAOQQRyaioCAJSSkpK7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAsiDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSACQQFqIgIgC0cNAAsMAQtBiICAgHghDUH4////ByEKCyALIAxLBEAgCUEBa7MgDbIgCrKTlSEXIAwhDQNAAn8gFyADIA1BAnRqIgEoAgAgCmuylCIYi0MAAABPXQRAIBioDAELQYCAgIB4CyEOIAEgDjYCACAEIA5BAnRqIgEgASgCAEEBajYCACANQQFqIg0gC0cNAAsLIAlBAk8EQCAEKAIAIQ1BASEKA0AgBCAKQQJ0aiIBIAEoAgAgDWoiDTYCACAKQQFqIgogCUcNAAsLIAxBAEoEQCAMIQoDQCAGIApBAWsiAUECdCICaiAAIAJqKAIANgIAIApBAUshAiABIQogAg0ACwsgCyAMSgRAIAshCgNAIAYgCyAEIAMgCkEBayIKQQJ0IgFqKAIAQQJ0aiICKAIAIgVrQQJ0aiAAIAFqKAIANgIAIAIgBUEBazYCACAKIAxKDQALCwsEAEEACw==",b6="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEXAmAAAGAQf39/f39/f39/f39/f39/fwACEgEDZW52Bm1lbW9yeQIDAICABAMDAgABBz4DEV9fd2FzbV9jYWxsX2N0b3JzAAAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAALc29ydEluZGV4ZXMAAQqiDwICAAucDwMBfAd9Bn8gCyAKayEMAkACQCAOBEAgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQMgDCEFA0AgAyAFQQJ0IgFqIAIgACABaigCAEECdGooAgAiATYCACABIAogASAKSBshCiABIA0gASANShshDSAFQQFqIgUgC0cNAAsMAwsgDwRAIAsgDE0NAkF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiGmooAgBBAnQiG2ooAgAiDkcEQAJ/IAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRgCfyARIA8qAiyUIBIgDyoCKJQgEyAPKgIglCAUIA8qAiSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRkCfyARIA8qAhyUIBIgDyoCGJQgEyAPKgIQlCAUIA8qAhSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRwCfyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIR0gDiEPCyADIBpqIAEgG0ECdGoiDigCBCAcbCAOKAIAIB1saiAOKAIIIBlsaiAOKAIMIBhsaiIONgIAIA4gCiAKIA5KGyEKIA4gDSANIA5IGyENIAJBAWoiAiALRw0ACwwDCwJ/IAUqAii7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshAgJ/IAUqAhi7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshByALIAxNAn8gBSoCCLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEPQfj///8HIQpBiICAgHghDQ0CIAwhBQNAIAMgBUECdCIIaiABIAAgCGooAgBBBHRqIggoAgQgB2wgCCgCACAPbGogCCgCCCACbGoiCDYCACAIIAogCCAKSBshCiAIIA0gCCANShshDSAFQQFqIgUgC0cNAAsMAgsgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQIgDCEFA0AgAyAFQQJ0IgFqAn8gAiAAIAFqKAIAQQJ0aioCALtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAVBAWoiBSALRw0ACwwCCyAPRQRAIAsgDE0NASAFKgIoIREgBSoCGCESIAUqAgghE0H4////ByEKQYiAgIB4IQ0gDCEFA0ACfyARIAEgACAFQQJ0IgdqKAIAQQR0aiICKgIIlCATIAIqAgCUIBIgAioCBJSSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOIAMgB2ogDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgCyAMTQ0AQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIYaigCAEECdCIZaigCACIORwRAIAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSIRUgESAPKgIslCASIA8qAiiUIBMgDyoCIJQgFCAPKgIklJKSkiEWIBEgDyoCHJQgEiAPKgIYlCATIA8qAhCUIBQgDyoCFJSSkpIhFyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSIREgDiEPCyADIBhqAn8gFSABIBlBAnRqIg4qAgyUIBYgDioCCJQgESAOKgIAlCAXIA4qAgSUkpKSu0QAAAAAAACwQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIg42AgAgCiAOIAogDkgbIQogDSAOIA0gDkobIQ0gAkEBaiICIAtHDQALDAELQYiAgIB4IQ1B+P///wchCgsgCyAMSwRAIAlBAWuzIA2yIAqyk5UhESAMIQ0DQAJ/IBEgAyANQQJ0aiIBKAIAIAprspQiEotDAAAAT10EQCASqAwBC0GAgICAeAshDiABIA42AgAgBCAOQQJ0aiIBIAEoAgBBAWo2AgAgDUEBaiINIAtHDQALCyAJQQJPBEAgBCgCACENQQEhCgNAIAQgCkECdGoiASABKAIAIA1qIg02AgAgCkEBaiIKIAlHDQALCyAMQQBKBEAgDCEKA0AgBiAKQQFrIgFBAnQiAmogACACaigCADYCACAKQQFLIAEhCg0ACwsgCyAMSgRAIAshCgNAIAYgCyAEIAMgCkEBayIKQQJ0IgFqKAIAQQJ0aiICKAIAIgVrQQJ0aiAAIAFqKAIANgIAIAIgBUEBazYCACAKIAxKDQALCws=",gJe="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEXAmAAAGAQf39/f39/f39/f39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMDAgABBz4DEV9fd2FzbV9jYWxsX2N0b3JzAAAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAALc29ydEluZGV4ZXMAAQrrDwICAAvlDwQBfAN7B30DfyALIAprIQwCQAJAIA4EQCANBEBB+P///wchCkGIgICAeCENIAsgDE0NAyAMIQUDQCADIAVBAnQiAWogAiAAIAFqKAIAQQJ0aigCACIBNgIAIAEgCiABIApIGyEKIAEgDSABIA1KGyENIAVBAWoiBSALRw0ACwwDCyAPBEAgCyAMTQ0CQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIcaigCACIdQQJ0aigCACIbRwRAAn8gBf0JAjggCCAbQQZ0aiIO/QkCDCAOKgIc/SABIA4qAiz9IAIgDioCPP0gA/3mASAF/QkCKCAO/QkCCCAOKgIY/SABIA4qAij9IAIgDioCOP0gA/3mASAF/QkCCCAO/QkCACAOKgIQ/SABIA4qAiD9IAIgDioCMP0gA/3mASAF/QkCGCAO/QkCBCAOKgIU/SABIA4qAiT9IAIgDioCNP0gA/3mAf3kAf3kAf3kASIR/V/9DAAAAAAAQI9AAAAAAABAj0AiEv3yASIT/SEBIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOAn8gE/0hACIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAv9ESAO/RwBAn8gESAR/Q0ICQoLDA0ODwABAgMAAQID/V8gEv3yASIR/SEAIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4C/0cAgJ/IBH9IQEiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgL/RwDIRIgGyEPCyADIBxqIAEgHUEEdGr9AAAAIBL9tQEiEf0bACAR/RsBaiAR/RsCaiAR/RsDaiIONgIAIA4gCiAKIA5KGyEKIA4gDSANIA5IGyENIAJBAWoiAiALRw0ACwwDCwJ/IAUqAgi7/RQgBSoCGLv9IgH9DAAAAAAAQI9AAAAAAABAj0D98gEiEf0hASIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDgJ/IBH9IQAiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLAn8gBSoCKLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEFQfj///8HIQpBiICAgHghDSALIAxNDQL9ESAO/RwBIAX9HAIhEiAMIQUDQCADIAVBAnQiAmogASAAIAJqKAIAQQR0av0AAAAgEv21ASIR/RsAIBH9GwFqIBH9GwJqIgI2AgAgAiAKIAIgCkgbIQogAiANIAIgDUobIQ0gBUEBaiIFIAtHDQALDAILIA0EQEH4////ByEKQYiAgIB4IQ0gCyAMTQ0CIAwhBQNAIAMgBUECdCIBagJ/IAIgACABaigCAEECdGoqAgC7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAsiDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgD0UEQCALIAxNDQEgBSoCKCEUIAUqAhghFSAFKgIIIRZB+P///wchCkGIgICAeCENIAwhBQNAAn8gFCABIAAgBUECdCIHaigCAEEEdGoiAioCCJQgFiACKgIAlCAVIAIqAgSUkpK7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDiADIAdqIA42AgAgCiAOIAogDkgbIQogDSAOIA0gDkobIQ0gBUEBaiIFIAtHDQALDAILIAsgDE0NAEF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiG2ooAgBBAnQiHGooAgAiDkcEQCAFKgI4IhQgCCAOQQZ0aiIPKgI8lCAFKgIoIhUgDyoCOJQgBSoCCCIWIA8qAjCUIAUqAhgiFyAPKgI0lJKSkiEYIBQgDyoCLJQgFSAPKgIolCAWIA8qAiCUIBcgDyoCJJSSkpIhGSAUIA8qAhyUIBUgDyoCGJQgFiAPKgIQlCAXIA8qAhSUkpKSIRogFCAPKgIMlCAVIA8qAgiUIBYgDyoCAJQgFyAPKgIElJKSkiEUIA4hDwsgAyAbagJ/IBggASAcQQJ0aiIOKgIMlCAZIA4qAgiUIBQgDioCAJQgGiAOKgIElJKSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAJBAWoiAiALRw0ACwwBC0GIgICAeCENQfj///8HIQoLIAsgDEsEQCAJQQFrsyANsiAKspOVIRQgDCENA0ACfyAUIAMgDUECdGoiASgCACAKa7KUIhWLQwAAAE9dBEAgFagMAQtBgICAgHgLIQ4gASAONgIAIAQgDkECdGoiASABKAIAQQFqNgIAIA1BAWoiDSALRw0ACwsgCUECTwRAIAQoAgAhDUEBIQoDQCAEIApBAnRqIgEgASgCACANaiINNgIAIApBAWoiCiAJRw0ACwsgDEEASgRAIAwhCgNAIAYgCkEBayIBQQJ0IgJqIAAgAmooAgA2AgAgCkEBSyABIQoNAAsLIAsgDEoEQCALIQoDQCAGIAsgBCADIApBAWsiCkECdCIBaigCAEECdGoiAigCACIFa0ECdGogACABaigCADYCACACIAVBAWs2AgAgCiAMSg0ACwsL",yJe="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEXAmAAAGAQf39/f39/f39/f39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMDAgABBz4DEV9fd2FzbV9jYWxsX2N0b3JzAAAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAALc29ydEluZGV4ZXMAAQqiDwICAAucDwMBfAd9Bn8gCyAKayEMAkACQCAOBEAgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQMgDCEFA0AgAyAFQQJ0IgFqIAIgACABaigCAEECdGooAgAiATYCACABIAogASAKSBshCiABIA0gASANShshDSAFQQFqIgUgC0cNAAsMAwsgDwRAIAsgDE0NAkF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiGmooAgBBAnQiG2ooAgAiDkcEQAJ/IAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRgCfyARIA8qAiyUIBIgDyoCKJQgEyAPKgIglCAUIA8qAiSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRkCfyARIA8qAhyUIBIgDyoCGJQgEyAPKgIQlCAUIA8qAhSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRwCfyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIR0gDiEPCyADIBpqIAEgG0ECdGoiDigCBCAcbCAOKAIAIB1saiAOKAIIIBlsaiAOKAIMIBhsaiIONgIAIA4gCiAKIA5KGyEKIA4gDSANIA5IGyENIAJBAWoiAiALRw0ACwwDCwJ/IAUqAii7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshAgJ/IAUqAhi7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshByALIAxNAn8gBSoCCLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEPQfj///8HIQpBiICAgHghDQ0CIAwhBQNAIAMgBUECdCIIaiABIAAgCGooAgBBBHRqIggoAgQgB2wgCCgCACAPbGogCCgCCCACbGoiCDYCACAIIAogCCAKSBshCiAIIA0gCCANShshDSAFQQFqIgUgC0cNAAsMAgsgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQIgDCEFA0AgAyAFQQJ0IgFqAn8gAiAAIAFqKAIAQQJ0aioCALtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAVBAWoiBSALRw0ACwwCCyAPRQRAIAsgDE0NASAFKgIoIREgBSoCGCESIAUqAgghE0H4////ByEKQYiAgIB4IQ0gDCEFA0ACfyARIAEgACAFQQJ0IgdqKAIAQQR0aiICKgIIlCATIAIqAgCUIBIgAioCBJSSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOIAMgB2ogDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgCyAMTQ0AQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIYaigCAEECdCIZaigCACIORwRAIAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSIRUgESAPKgIslCASIA8qAiiUIBMgDyoCIJQgFCAPKgIklJKSkiEWIBEgDyoCHJQgEiAPKgIYlCATIA8qAhCUIBQgDyoCFJSSkpIhFyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSIREgDiEPCyADIBhqAn8gFSABIBlBAnRqIg4qAgyUIBYgDioCCJQgESAOKgIAlCAXIA4qAgSUkpKSu0QAAAAAAACwQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIg42AgAgCiAOIAogDkgbIQogDSAOIA0gDkobIQ0gAkEBaiICIAtHDQALDAELQYiAgIB4IQ1B+P///wchCgsgCyAMSwRAIAlBAWuzIA2yIAqyk5UhESAMIQ0DQAJ/IBEgAyANQQJ0aiIBKAIAIAprspQiEotDAAAAT10EQCASqAwBC0GAgICAeAshDiABIA42AgAgBCAOQQJ0aiIBIAEoAgBBAWo2AgAgDUEBaiINIAtHDQALCyAJQQJPBEAgBCgCACENQQEhCgNAIAQgCkECdGoiASABKAIAIA1qIg02AgAgCkEBaiIKIAlHDQALCyAMQQBKBEAgDCEKA0AgBiAKQQFrIgFBAnQiAmogACACaigCADYCACAKQQFLIAEhCg0ACwsgCyAMSgRAIAshCgNAIAYgCyAEIAMgCkEBayIKQQJ0IgFqKAIAQQJ0aiICKAIAIgVrQQJ0aiAAIAFqKAIANgIAIAIgBUEBazYCACAKIAxKDQALCws=";function _Je(n){let e,t,i,r,s,a,o,l,c,u,d,f,h,p,m,v,g,_,y,S;function w(x,T,C,M,A,E,I){const P=performance.now();if(!i&&(new Uint32Array(t,o,A.byteLength/S.BytesPerInt).set(A),new Float32Array(t,u,I.byteLength/S.BytesPerFloat).set(I),M)){let k;r?k=new Int32Array(t,d,E.byteLength/S.BytesPerInt):k=new Float32Array(t,d,E.byteLength/S.BytesPerFloat),k.set(E)}v||(v=new Uint32Array(_)),new Float32Array(t,m,16).set(C),new Uint32Array(t,h,_).set(v),e.exports.sortIndexes(o,p,d,f,h,m,l,c,u,_,x,T,a,M,r,s);const D={sortDone:!0,splatSortCount:x,splatRenderCount:T,sortTime:0};if(!i){const R=new Uint32Array(t,l,T);(!g||g.length<T)&&(g=new Uint32Array(T)),g.set(R),D.sortedIndexes=g}const L=performance.now();D.sortTime=L-P,n.postMessage(D)}n.onmessage=x=>{if(x.data.centers)centers=x.data.centers,sceneIndexes=x.data.sceneIndexes,r?new Int32Array(t,p+x.data.range.from*S.BytesPerInt*4,x.data.range.count*4).set(new Int32Array(centers)):new Float32Array(t,p+x.data.range.from*S.BytesPerFloat*4,x.data.range.count*4).set(new Float32Array(centers)),s&&new Uint32Array(t,c+x.data.range.from*4,x.data.range.count).set(new Uint32Array(sceneIndexes)),y=x.data.range.from+x.data.range.count;else if(x.data.sort){const T=Math.min(x.data.sort.splatRenderCount||0,y),C=Math.min(x.data.sort.splatSortCount||0,y),M=x.data.sort.usePrecomputedDistances;let A,E,I;i||(A=x.data.sort.indexesToSort,I=x.data.sort.transforms,M&&(E=x.data.sort.precomputedDistances)),w(C,T,x.data.sort.modelViewProj,M,A,E,I)}else if(x.data.init){S=x.data.init.Constants,a=x.data.init.splatCount,i=x.data.init.useSharedMemory,r=x.data.init.integerBasedSort,s=x.data.init.dynamicMode,_=x.data.init.distanceMapRange,y=0;const T=r?S.BytesPerInt*4:S.BytesPerFloat*4,C=new Uint8Array(x.data.init.sorterWasmBytes),M=16*S.BytesPerFloat,A=a*S.BytesPerInt,E=a*T,I=M,P=r?a*S.BytesPerInt:a*S.BytesPerFloat,D=a*S.BytesPerInt,L=a*S.BytesPerInt,R=r?_*S.BytesPerInt*2:_*S.BytesPerFloat*2,B=s?a*S.BytesPerInt:0,k=s?S.MaxScenes*M:0,O=S.MemoryPageSize*32,U=A+E+I+P+D+R+L+B+k+O,G=Math.floor(U/S.MemoryPageSize)+1,q={module:{},env:{memory:new WebAssembly.Memory({initial:G,maximum:G,shared:!0})}};WebAssembly.compile(C).then(W=>WebAssembly.instantiate(W,q)).then(W=>{e=W,o=0,p=o+A,m=p+E,d=m+I,f=d+P,h=f+D,l=h+R,c=l+L,u=c+B,t=q.env.memory.buffer,i?n.postMessage({sortSetupPhase1Complete:!0,indexesToSortBuffer:t,indexesToSortOffset:o,sortedIndexesBuffer:t,sortedIndexesOffset:l,precomputedDistancesBuffer:t,precomputedDistancesOffset:d,transformsBuffer:t,transformsOffset:u}):n.postMessage({sortSetupPhase1Complete:!0})})}}}function bJe(n,e,t,i,r,s=ii.DefaultSplatSortDistanceMapPrecision){const a=new Worker(URL.createObjectURL(new Blob(["(",_Je.toString(),")(self)"],{type:"application/javascript"})));let o=vJe;const l=FO()?AZ():null;!t&&!e?(o=b6,l&&l.major<=16&&l.minor<4&&(o=yJe)):t?e||l&&l.major<=16&&l.minor<4&&(o=gJe):o=b6;const c=atob(o),u=new Uint8Array(c.length);for(let d=0;d<c.length;d++)u[d]=c.charCodeAt(d);return a.postMessage({init:{sorterWasmBytes:u.buffer,splatCount:n,useSharedMemory:e,integerBasedSort:i,dynamicMode:r,distanceMapRange:1<<s,Constants:{BytesPerFloat:ii.BytesPerFloat,BytesPerInt:ii.BytesPerInt,MemoryPageSize:ii.MemoryPageSize,MaxScenes:ii.MaxScenes}}}),a}const bm={None:0,VR:1,AR:2};class rg{static createButton(e,t={}){const i=document.createElement("button");function r(){let c=null;async function u(h){h.addEventListener("end",d),await e.xr.setSession(h),i.textContent="EXIT VR",c=h}function d(){c.removeEventListener("end",d),i.textContent="ENTER VR",c=null}i.style.display="",i.style.cursor="pointer",i.style.left="calc(50% - 50px)",i.style.width="100px",i.textContent="ENTER VR";const f={...t,optionalFeatures:["local-floor","bounded-floor","layers",...t.optionalFeatures||[]]};i.onmouseenter=function(){i.style.opacity="1.0"},i.onmouseleave=function(){i.style.opacity="0.5"},i.onclick=function(){c===null?navigator.xr.requestSession("immersive-vr",f).then(u):(c.end(),navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-vr",f).then(u).catch(h=>{console.warn(h)}))},navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-vr",f).then(u).catch(h=>{console.warn(h)})}function s(){i.style.display="",i.style.cursor="auto",i.style.left="calc(50% - 75px)",i.style.width="150px",i.onmouseenter=null,i.onmouseleave=null,i.onclick=null}function a(){s(),i.textContent="VR NOT SUPPORTED"}function o(c){s(),console.warn("Exception when trying to call xr.isSessionSupported",c),i.textContent="VR NOT ALLOWED"}function l(c){c.style.position="absolute",c.style.bottom="20px",c.style.padding="12px 6px",c.style.border="1px solid #fff",c.style.borderRadius="4px",c.style.background="rgba(0,0,0,0.1)",c.style.color="#fff",c.style.font="normal 13px sans-serif",c.style.textAlign="center",c.style.opacity="0.5",c.style.outline="none",c.style.zIndex="999"}if("xr"in navigator)return i.id="VRButton",i.style.display="none",l(i),navigator.xr.isSessionSupported("immersive-vr").then(function(c){c?r():a(),c&&rg.xrSessionIsGranted&&i.click()}).catch(o),i;{const c=document.createElement("a");return window.isSecureContext===!1?(c.href=document.location.href.replace(/^http:/,"https:"),c.innerHTML="WEBXR NEEDS HTTPS"):(c.href="https://immersiveweb.dev/",c.innerHTML="WEBXR NOT AVAILABLE"),c.style.left="calc(50% - 90px)",c.style.width="180px",c.style.textDecoration="none",l(c),c}}static registerSessionGrantedListener(){if(typeof navigator<"u"&&"xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{rg.xrSessionIsGranted=!0})}}}rg.xrSessionIsGranted=!1;rg.registerSessionGrantedListener();class SJe{static createButton(e,t={}){const i=document.createElement("button");function r(){if(t.domOverlay===void 0){const f=document.createElement("div");f.style.display="none",document.body.appendChild(f);const h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttribute("width",38),h.setAttribute("height",38),h.style.position="absolute",h.style.right="20px",h.style.top="20px",h.addEventListener("click",function(){c.end()}),f.appendChild(h);const p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d","M 12,12 L 28,28 M 28,12 12,28"),p.setAttribute("stroke","#fff"),p.setAttribute("stroke-width",2),h.appendChild(p),t.optionalFeatures===void 0&&(t.optionalFeatures=[]),t.optionalFeatures.push("dom-overlay"),t.domOverlay={root:f}}let c=null;async function u(f){f.addEventListener("end",d),e.xr.setReferenceSpaceType("local"),await e.xr.setSession(f),i.textContent="STOP AR",t.domOverlay.root.style.display="",c=f}function d(){c.removeEventListener("end",d),i.textContent="START AR",t.domOverlay.root.style.display="none",c=null}i.style.display="",i.style.cursor="pointer",i.style.left="calc(50% - 50px)",i.style.width="100px",i.textContent="START AR",i.onmouseenter=function(){i.style.opacity="1.0"},i.onmouseleave=function(){i.style.opacity="0.5"},i.onclick=function(){c===null?navigator.xr.requestSession("immersive-ar",t).then(u):(c.end(),navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-ar",t).then(u).catch(f=>{console.warn(f)}))},navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-ar",t).then(u).catch(f=>{console.warn(f)})}function s(){i.style.display="",i.style.cursor="auto",i.style.left="calc(50% - 75px)",i.style.width="150px",i.onmouseenter=null,i.onmouseleave=null,i.onclick=null}function a(){s(),i.textContent="AR NOT SUPPORTED"}function o(c){s(),console.warn("Exception when trying to call xr.isSessionSupported",c),i.textContent="AR NOT ALLOWED"}function l(c){c.style.position="absolute",c.style.bottom="20px",c.style.padding="12px 6px",c.style.border="1px solid #fff",c.style.borderRadius="4px",c.style.background="rgba(0,0,0,0.1)",c.style.color="#fff",c.style.font="normal 13px sans-serif",c.style.textAlign="center",c.style.opacity="0.5",c.style.outline="none",c.style.zIndex="999"}if("xr"in navigator)return i.id="ARButton",i.style.display="none",l(i),navigator.xr.isSessionSupported("immersive-ar").then(function(c){c?r():a()}).catch(o),i;{const c=document.createElement("a");return window.isSecureContext===!1?(c.href=document.location.href.replace(/^http:/,"https:"),c.innerHTML="WEBXR NEEDS HTTPS"):(c.href="https://immersiveweb.dev/",c.innerHTML="WEBXR NOT AVAILABLE"),c.style.left="calc(50% - 90px)",c.style.width="180px",c.style.textDecoration="none",l(c),c}}}const P2={Always:0,OnChange:1,Never:2},wJe=50,xJe=.75,CJe=15e5,MJe=10,TJe=2.5,AJe=60,nd=class nd{constructor(e={}){kt(this,"onKeyDown",function(){const e=new ze,t=new In,i=new In;return function(r){switch(e.set(0,0,-1),e.transformDirection(this.camera.matrixWorld),t.makeRotationAxis(e,Math.PI/128),i.makeRotationAxis(e,-Math.PI/128),r.code){case"KeyG":this.focalAdjustment+=.02,this.forceRenderNextFrame();break;case"KeyF":this.focalAdjustment-=.02,this.forceRenderNextFrame();break;case"ArrowLeft":this.camera.up.transformDirection(t);break;case"ArrowRight":this.camera.up.transformDirection(i);break;case"KeyC":this.showMeshCursor=!this.showMeshCursor;break;case"KeyU":this.showControlPlane=!this.showControlPlane;break;case"KeyI":this.showInfo=!this.showInfo,this.showInfo?this.infoPanel.show():this.infoPanel.hide();break;case"KeyO":this.usingExternalCamera||this.setOrthographicMode(!this.camera.isOrthographicCamera);break;case"KeyP":this.usingExternalCamera||this.splatMesh.setPointCloudModeEnabled(!this.splatMesh.getPointCloudModeEnabled());break;case"Equal":this.usingExternalCamera||this.splatMesh.setSplatScale(this.splatMesh.getSplatScale()+.05);break;case"Minus":this.usingExternalCamera||this.splatMesh.setSplatScale(Math.max(this.splatMesh.getSplatScale()-.05,0));break}}}());kt(this,"onMouseUp",function(){const e=new on;return function(t){e.copy(this.mousePosition).sub(this.mouseDownPosition),gm()-this.mouseDownTime<.5&&e.length()<2&&this.onMouseClick(t)}}());kt(this,"checkForFocalPointChange",function(){const e=new on,t=new ze,i=[];return function(){if(!this.transitioningCameraTarget&&(this.getRenderDimensions(e),i.length=0,this.raycaster.setFromCameraAndScreenPosition(this.camera,this.mousePosition,e),this.raycaster.intersectSplatMesh(this.splatMesh,i),i.length>0)){const s=i[0].origin;t.copy(s).sub(this.camera.position),t.length()>xJe&&(this.previousCameraTarget.copy(this.controls.target),this.nextCameraTarget.copy(s),this.transitioningCameraTarget=!0,this.transitioningCameraTargetStartTime=gm())}}}());kt(this,"updateSplatMesh",function(){const e=new on;return function(){if(!this.splatMesh)return;if(this.splatMesh.getSplatCount()>0){this.splatMesh.updateVisibleRegionFadeDistance(this.sceneRevealMode),this.splatMesh.updateTransforms(),this.getRenderDimensions(e);const i=this.camera.projectionMatrix.elements[0]*.5*this.devicePixelRatio*e.x,r=this.camera.projectionMatrix.elements[5]*.5*this.devicePixelRatio*e.y,s=this.camera.isOrthographicCamera?1/this.devicePixelRatio:1,a=this.focalAdjustment*s,o=1/a;this.adjustForWebXRStereo(e),this.splatMesh.updateUniforms(e,i*a,r*a,this.camera.isOrthographicCamera,this.camera.zoom||1,o)}}}());kt(this,"addSplatBuffers",function(){return function(e,t=[],i=!0,r=!0,s=!0,a=!1,o=!1,l=!0){if(this.isDisposingOrDisposed())return Promise.resolve();let c=null;const u=()=>{c!==null&&(this.loadingSpinner.removeTask(c),c=null)};return this.splatRenderReady=!1,new Promise(d=>{r&&(c=this.loadingSpinner.addTask("Processing splats...")),ll(()=>{if(this.isDisposingOrDisposed())d();else{const f=this.addSplatBuffersToMesh(e,t,i,s,a,l),h=this.splatMesh.getMaxSplatCount();this.sortWorker&&this.sortWorker.maxSplatCount!==h&&this.disposeSortWorker(),this.gpuAcceleratedSort||this.preSortMessages.push({centers:f.centers.buffer,sceneIndexes:f.sceneIndexes.buffer,range:{from:f.from,to:f.to,count:f.count}}),(!this.sortWorker&&h>0?this.setupSortWorker(this.splatMesh):Promise.resolve()).then(()=>{this.isDisposingOrDisposed()||this.runSplatSort(!0,!0).then(m=>{!this.sortWorker||!m?(this.splatRenderReady=!0,u(),d()):(o?this.splatRenderReady=!0:this.runAfterNextSort.push(()=>{this.splatRenderReady=!0}),this.runAfterNextSort.push(()=>{u(),d()}))})})}},!0)})}}());kt(this,"addSplatBuffersToMesh",function(){let e;return function(t,i,r=!0,s=!1,a=!1,o=!0){if(this.isDisposingOrDisposed())return;let l=[],c=[];a||(l=this.splatMesh.scenes.map(h=>h.splatBuffer)||[],c=this.splatMesh.sceneOptions?this.splatMesh.sceneOptions.map(h=>h):[]),l.push(...t),c.push(...i),this.renderer&&this.splatMesh.setRenderer(this.renderer);const u=h=>{if(this.isDisposingOrDisposed())return;const p=this.splatMesh.getSplatCount();s&&p>=CJe&&!h&&!e&&(this.loadingSpinner.setMinimized(!0,!0),e=this.loadingSpinner.addTask("Optimizing data structures..."))},d=h=>{this.isDisposingOrDisposed()||h&&e&&(this.loadingSpinner.removeTask(e),e=null)},f=this.splatMesh.build(l,c,!0,r,u,d,o);return r&&this.freeIntermediateSplatData&&this.splatMesh.freeIntermediateSplatData(),f}}());kt(this,"shouldRender",function(){let e=0;const t=new ze,i=new Ji,r=1e-4;return function(){if(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())return!1;let s=!1,a=!1;if(this.camera){const o=this.camera.position,l=this.camera.quaternion;a=Math.abs(o.x-t.x)>r||Math.abs(o.y-t.y)>r||Math.abs(o.z-t.z)>r||Math.abs(l.x-i.x)>r||Math.abs(l.y-i.y)>r||Math.abs(l.z-i.z)>r||Math.abs(l.w-i.w)>r}return s=this.renderMode!==P2.Never&&(e===0||this.splatMesh.visibleRegionChanging||a||this.renderMode===P2.Always||this.dynamicMode===!0||this.renderNextFrame),this.camera&&(t.copy(this.camera.position),i.copy(this.camera.quaternion)),e++,s}}());kt(this,"render",function(){return function(){if(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())return;const e=i=>{for(let r of i.children)if(r.visible)return!0;return!1},t=this.renderer.autoClear;e(this.threeScene)&&(this.renderer.render(this.threeScene,this.camera),this.renderer.autoClear=!1),this.renderer.render(this.splatMesh,this.camera),this.renderer.autoClear=!1,this.sceneHelper.getFocusMarkerOpacity()>0&&this.renderer.render(this.sceneHelper.focusMarker,this.camera),this.showControlPlane&&this.renderer.render(this.sceneHelper.controlPlane,this.camera),this.renderer.autoClear=t}}());kt(this,"updateFPS",function(){let e=gm(),t=0;return function(){if(this.consecutiveRenderFrames>AJe){const i=gm();i-e>=1?(this.currentFPS=t,t=0,e=i):t++}else this.currentFPS=null}}());kt(this,"updateForRendererSizeChanges",function(){const e=new on,t=new on;let i;return function(){this.usingExternalCamera||(this.renderer.getSize(t),(i===void 0||i!==this.camera.isOrthographicCamera||t.x!==e.x||t.y!==e.y)&&(this.camera.isOrthographicCamera?(this.camera.left=-t.x/2,this.camera.right=t.x/2,this.camera.top=t.y/2,this.camera.bottom=-t.y/2):this.camera.aspect=t.x/t.y,this.camera.updateProjectionMatrix(),e.copy(t),i=this.camera.isOrthographicCamera))}}());kt(this,"timingSensitiveUpdates",function(){let e;return function(){const t=gm();e||(e=t);const i=t-e;this.updateCameraTransition(t),this.updateFocusMarker(i),e=t}}());kt(this,"updateCameraTransition",function(){let e=new ze,t=new ze,i=new ze;return function(r){if(this.transitioningCameraTarget){t.copy(this.previousCameraTarget).sub(this.camera.position).normalize(),i.copy(this.nextCameraTarget).sub(this.camera.position).normalize();const s=Math.acos(t.dot(i)),o=(s/(Math.PI/3)*.65+.3)/s*(r-this.transitioningCameraTargetStartTime);e.copy(this.previousCameraTarget).lerp(this.nextCameraTarget,o),this.camera.lookAt(e),this.controls.target.copy(e),o>=1&&(this.transitioningCameraTarget=!1)}}}());kt(this,"updateFocusMarker",function(){const e=new on;let t=!1;return function(i){if(this.getRenderDimensions(e),this.transitioningCameraTarget){this.sceneHelper.setFocusMarkerVisibility(!0);const r=Math.max(this.sceneHelper.getFocusMarkerOpacity(),0);let s=Math.min(r+MJe*i,1);this.sceneHelper.setFocusMarkerOpacity(s),this.sceneHelper.updateFocusMarker(this.nextCameraTarget,this.camera,e),t=!0,this.forceRenderNextFrame()}else{let r;if(t?r=1:r=Math.min(this.sceneHelper.getFocusMarkerOpacity(),1),r>0){this.sceneHelper.updateFocusMarker(this.nextCameraTarget,this.camera,e);let s=Math.max(r-TJe*i,0);this.sceneHelper.setFocusMarkerOpacity(s),s===0&&this.sceneHelper.setFocusMarkerVisibility(!1)}r>0&&this.forceRenderNextFrame(),t=!1}}}());kt(this,"updateMeshCursor",function(){const e=[],t=new on;return function(){this.showMeshCursor?(this.forceRenderNextFrame(),this.getRenderDimensions(t),e.length=0,this.raycaster.setFromCameraAndScreenPosition(this.camera,this.mousePosition,t),this.raycaster.intersectSplatMesh(this.splatMesh,e),e.length>0?(this.sceneHelper.setMeshCursorVisibility(!0),this.sceneHelper.positionAndOrientMeshCursor(e[0].origin,this.camera)):this.sceneHelper.setMeshCursorVisibility(!1)):(this.sceneHelper.getMeschCursorVisibility()&&this.forceRenderNextFrame(),this.sceneHelper.setMeshCursorVisibility(!1))}}());kt(this,"updateInfoPanel",function(){const e=new on;return function(){if(!this.showInfo)return;const t=this.splatMesh.getSplatCount();this.getRenderDimensions(e);const i=this.controls?this.controls.target:null,r=this.showMeshCursor?this.sceneHelper.meshCursor.position:null,s=t>0?this.splatRenderCount/t*100:0;this.infoPanel.update(e,this.camera.position,i,this.camera.up,this.camera.isOrthographicCamera,r,this.currentFPS||"N/A",t,this.splatRenderCount,s,this.lastSortTime,this.focalAdjustment,this.splatMesh.getSplatScale(),this.splatMesh.getPointCloudModeEnabled())}}());kt(this,"runSplatSort",function(){const e=new In,t=[],i=new ze(0,0,-1),r=new ze(0,0,-1),s=new ze,a=new ze,o=[],l=[{angleThreshold:.55,sortFractions:[.125,.33333,.75]},{angleThreshold:.65,sortFractions:[.33333,.66667]},{angleThreshold:.8,sortFractions:[.5]}];return function(c=!1,u=!1){if(!this.initialized)return Promise.resolve(!1);if(this.sortRunning)return Promise.resolve(!0);if(this.splatMesh.getSplatCount()<=0)return this.splatRenderCount=0,Promise.resolve(!1);let d=0,f=0,h=!1,p=!1;if(r.set(0,0,-1).applyQuaternion(this.camera.quaternion),d=r.dot(i),f=a.copy(this.camera.position).sub(s).length(),!c&&!this.splatMesh.dynamicMode&&o.length===0&&(d<=.99&&(h=!0),f>=1&&(p=!0),!h&&!p))return Promise.resolve(!1);this.sortRunning=!0;let{splatRenderCount:m,shouldSortAll:v}=this.gatherSceneNodesForSort();v=v||u,this.splatRenderCount=m,e.copy(this.camera.matrixWorld).invert();const g=this.perspectiveCamera||this.camera;e.premultiply(g.projectionMatrix),this.splatMesh.dynamicMode||e.multiply(this.splatMesh.matrixWorld);let _=Promise.resolve(!0);return this.gpuAcceleratedSort&&(o.length<=1||o.length%2===0)&&(_=this.splatMesh.computeDistancesOnGPU(e,this.sortWorkerPrecomputedDistances)),_.then(()=>{if(o.length===0)if(this.splatMesh.dynamicMode||v)o.push(this.splatRenderCount);else{for(let w of l)if(d<w.angleThreshold){for(let x of w.sortFractions)o.push(Math.floor(this.splatRenderCount*x));break}o.push(this.splatRenderCount)}let y=Math.min(o.shift(),this.splatRenderCount);this.splatSortCount=y,t[0]=this.camera.position.x,t[1]=this.camera.position.y,t[2]=this.camera.position.z;const S={modelViewProj:e.elements,cameraPosition:t,splatRenderCount:this.splatRenderCount,splatSortCount:y,usePrecomputedDistances:this.gpuAcceleratedSort};return this.splatMesh.dynamicMode&&this.splatMesh.fillTransformsArray(this.sortWorkerTransforms),this.sharedMemoryForWorkers||(S.indexesToSort=this.sortWorkerIndexesToSort,S.transforms=this.sortWorkerTransforms,this.gpuAcceleratedSort&&(S.precomputedDistances=this.sortWorkerPrecomputedDistances)),this.sortPromise=new Promise(w=>{this.sortPromiseResolver=w}),this.preSortMessages.length>0&&(this.preSortMessages.forEach(w=>{this.sortWorker.postMessage(w)}),this.preSortMessages=[]),this.sortWorker.postMessage({sort:S}),o.length===0&&(s.copy(this.camera.position),i.copy(r)),!0}),_}}());kt(this,"gatherSceneNodesForSort",function(){const e=[];let t=null;const i=new ze,r=new ze,s=new ze,a=new In,o=new In,l=new In,c=new ze,u=new ze(0,0,-1),d=new ze,f=h=>d.copy(h.max).sub(h.min).length();return function(h=!1){this.getRenderDimensions(c);const p=c.y/2/Math.tan(this.camera.fov/2*lZ.DEG2RAD),m=Math.atan(c.x/2/p),v=Math.atan(c.y/2/p),g=Math.cos(m),_=Math.cos(v),y=this.splatMesh.getSplatTree();if(y){o.copy(this.camera.matrixWorld).invert(),this.splatMesh.dynamicMode||o.multiply(this.splatMesh.matrixWorld);let S=0,w=0;for(let T=0;T<y.subTrees.length;T++){const C=y.subTrees[T];a.copy(o),this.splatMesh.dynamicMode&&(this.splatMesh.getSceneTransform(T,l),a.multiply(l));const M=C.nodesWithIndexes.length;for(let A=0;A<M;A++){const E=C.nodesWithIndexes[A];if(!E.data||!E.data.indexes||E.data.indexes.length===0)continue;s.copy(E.center).applyMatrix4(a);const I=s.length();s.normalize(),i.copy(s).setX(0).normalize(),r.copy(s).setY(0).normalize();const P=u.dot(r),D=u.dot(i),L=f(E),R=D<_-.6,B=P<g-.6;!h&&(B||R)&&I>L||(w+=E.data.indexes.length,e[S]=E,E.data.distanceToNode=I,S++)}}e.length=S,e.sort((T,C)=>T.data.distanceToNode<C.data.distanceToNode?-1:1);let x=w*ii.BytesPerInt;for(let T=0;T<S;T++){const C=e[T],M=C.data.indexes.length,A=M*ii.BytesPerInt;new Uint32Array(this.sortWorkerIndexesToSort.buffer,x-A,M).set(C.data.indexes),x-=A}return{splatRenderCount:w,shouldSortAll:!1}}else{const S=this.splatMesh.getSplatCount();if(!t||t.length!==S){t=new Uint32Array(S);for(let w=0;w<S;w++)t[w]=w}return this.sortWorkerIndexesToSort.set(t),{splatRenderCount:S,shouldSortAll:!0}}}}());if(e.cameraUp||(e.cameraUp=[0,1,0]),this.cameraUp=new ze().fromArray(e.cameraUp),e.initialCameraPosition||(e.initialCameraPosition=[0,10,15]),this.initialCameraPosition=new ze().fromArray(e.initialCameraPosition),e.initialCameraLookAt||(e.initialCameraLookAt=[0,0,0]),this.initialCameraLookAt=new ze().fromArray(e.initialCameraLookAt),this.dropInMode=e.dropInMode||!1,(e.selfDrivenMode===void 0||e.selfDrivenMode===null)&&(e.selfDrivenMode=!0),this.selfDrivenMode=e.selfDrivenMode&&!this.dropInMode,this.selfDrivenUpdateFunc=this.selfDrivenUpdate.bind(this),e.useBuiltInControls===void 0&&(e.useBuiltInControls=!0),this.useBuiltInControls=e.useBuiltInControls,this.rootElement=e.rootElement,this.ignoreDevicePixelRatio=e.ignoreDevicePixelRatio||!1,this.devicePixelRatio=this.ignoreDevicePixelRatio?1:window.devicePixelRatio||1,this.halfPrecisionCovariancesOnGPU=e.halfPrecisionCovariancesOnGPU||!1,this.threeScene=e.threeScene,this.renderer=e.renderer,this.camera=e.camera,this.gpuAcceleratedSort=e.gpuAcceleratedSort||!1,(e.integerBasedSort===void 0||e.integerBasedSort===null)&&(e.integerBasedSort=!0),this.integerBasedSort=e.integerBasedSort,(e.sharedMemoryForWorkers===void 0||e.sharedMemoryForWorkers===null)&&(e.sharedMemoryForWorkers=!0),this.sharedMemoryForWorkers=e.sharedMemoryForWorkers,this.dynamicScene=!!e.dynamicScene,this.antialiased=e.antialiased||!1,this.kernel2DSize=e.kernel2DSize===void 0?.3:e.kernel2DSize,this.webXRMode=e.webXRMode||bm.None,this.webXRMode!==bm.None&&(this.gpuAcceleratedSort=!1),this.webXRActive=!1,this.webXRSessionInit=e.webXRSessionInit||{},this.renderMode=e.renderMode||P2.Always,this.sceneRevealMode=e.sceneRevealMode||ky.Default,this.focalAdjustment=e.focalAdjustment||1,this.maxScreenSpaceSplatSize=e.maxScreenSpaceSplatSize||1024,this.logLevel=e.logLevel||vv.None,this.sphericalHarmonicsDegree=e.sphericalHarmonicsDegree||0,this.enableOptionalEffects=e.enableOptionalEffects||!1,(e.enableSIMDInSort===void 0||e.enableSIMDInSort===null)&&(e.enableSIMDInSort=!0),this.enableSIMDInSort=e.enableSIMDInSort,(e.inMemoryCompressionLevel===void 0||e.inMemoryCompressionLevel===null)&&(e.inMemoryCompressionLevel=0),this.inMemoryCompressionLevel=e.inMemoryCompressionLevel,(e.optimizeSplatData===void 0||e.optimizeSplatData===null)&&(e.optimizeSplatData=!0),this.optimizeSplatData=e.optimizeSplatData,(e.freeIntermediateSplatData===void 0||e.freeIntermediateSplatData===null)&&(e.freeIntermediateSplatData=!1),this.freeIntermediateSplatData=e.freeIntermediateSplatData,FO()){const i=AZ();i.major<17&&(this.enableSIMDInSort=!1),i.major<16&&(this.sharedMemoryForWorkers=!1)}(e.splatRenderMode===void 0||e.splatRenderMode===null)&&(e.splatRenderMode=Bc.ThreeD),this.splatRenderMode=e.splatRenderMode,this.sceneFadeInRateMultiplier=e.sceneFadeInRateMultiplier||1,this.splatSortDistanceMapPrecision=e.splatSortDistanceMapPrecision||ii.DefaultSplatSortDistanceMapPrecision;const t=this.integerBasedSort?20:24;this.splatSortDistanceMapPrecision=os(this.splatSortDistanceMapPrecision,10,t),this.onSplatMeshChangedCallback=null,this.createSplatMesh(),this.controls=null,this.perspectiveControls=null,this.orthographicControls=null,this.orthographicCamera=null,this.perspectiveCamera=null,this.showMeshCursor=!1,this.showControlPlane=!1,this.showInfo=!1,this.sceneHelper=null,this.sortWorker=null,this.sortRunning=!1,this.splatRenderCount=0,this.splatSortCount=0,this.lastSplatSortCount=0,this.sortWorkerIndexesToSort=null,this.sortWorkerSortedIndexes=null,this.sortWorkerPrecomputedDistances=null,this.sortWorkerTransforms=null,this.preSortMessages=[],this.runAfterNextSort=[],this.selfDrivenModeRunning=!1,this.splatRenderReady=!1,this.raycaster=new JZe,this.infoPanel=null,this.startInOrthographicMode=!1,this.currentFPS=0,this.lastSortTime=0,this.consecutiveRenderFrames=0,this.previousCameraTarget=new ze,this.nextCameraTarget=new ze,this.mousePosition=new on,this.mouseDownPosition=new on,this.mouseDownTime=null,this.resizeObserver=null,this.mouseMoveListener=null,this.mouseDownListener=null,this.mouseUpListener=null,this.keyDownListener=null,this.sortPromise=null,this.sortPromiseResolver=null,this.splatSceneDownloadPromises={},this.splatSceneDownloadAndBuildPromise=null,this.splatSceneRemovalPromise=null,this.loadingSpinner=new MD(null,this.rootElement||document.body),this.loadingSpinner.hide(),this.loadingProgressBar=new qZe(this.rootElement||document.body),this.loadingProgressBar.hide(),this.infoPanel=new XZe(this.rootElement||document.body),this.infoPanel.hide(),this.usingExternalCamera=!!(this.dropInMode||this.camera),this.usingExternalRenderer=!!(this.dropInMode||this.renderer),this.initialized=!1,this.disposing=!1,this.disposed=!1,this.disposePromise=null,this.dropInMode||this.init()}createSplatMesh(){this.splatMesh=new es(this.splatRenderMode,this.dynamicScene,this.enableOptionalEffects,this.halfPrecisionCovariancesOnGPU,this.devicePixelRatio,this.gpuAcceleratedSort,this.integerBasedSort,this.antialiased,this.maxScreenSpaceSplatSize,this.logLevel,this.sphericalHarmonicsDegree,this.sceneFadeInRateMultiplier,this.kernel2DSize),this.splatMesh.frustumCulled=!1,this.onSplatMeshChangedCallback&&this.onSplatMeshChangedCallback()}init(){this.initialized||(this.rootElement||(this.usingExternalRenderer?this.rootElement=this.renderer.domElement||document.body:(this.rootElement=document.createElement("div"),this.rootElement.style.width="100%",this.rootElement.style.height="100%",this.rootElement.style.position="absolute",document.body.appendChild(this.rootElement))),this.setupCamera(),this.setupRenderer(),this.setupWebXR(this.webXRSessionInit),this.setupControls(),this.setupEventHandlers(),this.threeScene=this.threeScene||new mqe,this.sceneHelper=new Dy(this.threeScene),this.sceneHelper.setupMeshCursor(),this.sceneHelper.setupFocusMarker(),this.sceneHelper.setupControlPlane(),this.loadingProgressBar.setContainer(this.rootElement),this.loadingSpinner.setContainer(this.rootElement),this.infoPanel.setContainer(this.rootElement),this.initialized=!0)}setupCamera(){if(!this.usingExternalCamera){const e=new on;this.getRenderDimensions(e),this.perspectiveCamera=new go(wJe,e.x/e.y,.1,1e3),this.orthographicCamera=new kO(e.x/-2,e.x/2,e.y/2,e.y/-2,.1,1e3),this.camera=this.startInOrthographicMode?this.orthographicCamera:this.perspectiveCamera,this.camera.position.copy(this.initialCameraPosition),this.camera.up.copy(this.cameraUp).normalize(),this.camera.lookAt(this.initialCameraLookAt)}}setupRenderer(){if(!this.usingExternalRenderer){const e=new on;this.getRenderDimensions(e),this.renderer=new rZe({antialias:!1,precision:"highp"}),this.renderer.setPixelRatio(this.devicePixelRatio),this.renderer.autoClear=!0,this.renderer.setClearColor(new Si(0),0),this.renderer.setSize(e.x,e.y),this.resizeObserver=new ResizeObserver(()=>{this.getRenderDimensions(e),this.renderer.setSize(e.x,e.y),this.forceRenderNextFrame()}),this.resizeObserver.observe(this.rootElement),this.rootElement.appendChild(this.renderer.domElement)}}setupWebXR(e){this.webXRMode&&(this.webXRMode===bm.VR?this.rootElement.appendChild(rg.createButton(this.renderer,e)):this.webXRMode===bm.AR&&this.rootElement.appendChild(SJe.createButton(this.renderer,e)),this.renderer.xr.addEventListener("sessionstart",t=>{this.webXRActive=!0}),this.renderer.xr.addEventListener("sessionend",t=>{this.webXRActive=!1}),this.renderer.xr.enabled=!0,this.camera.position.copy(this.initialCameraPosition),this.camera.up.copy(this.cameraUp).normalize(),this.camera.lookAt(this.initialCameraLookAt))}setupControls(){if(this.useBuiltInControls&&this.webXRMode===bm.None){this.usingExternalCamera?this.camera.isOrthographicCamera?this.orthographicControls=new e1(this.camera,this.renderer.domElement):this.perspectiveControls=new e1(this.camera,this.renderer.domElement):(this.perspectiveControls=new e1(this.perspectiveCamera,this.renderer.domElement),this.orthographicControls=new e1(this.orthographicCamera,this.renderer.domElement));for(let e of[this.orthographicControls,this.perspectiveControls])e&&(e.listenToKeyEvents(window),e.rotateSpeed=.5,e.maxPolarAngle=Math.PI*.75,e.minPolarAngle=.1,e.enableDamping=!0,e.dampingFactor=.05,e.target.copy(this.initialCameraLookAt),e.update());this.controls=this.camera.isOrthographicCamera?this.orthographicControls:this.perspectiveControls,this.controls.update()}}setupEventHandlers(){this.useBuiltInControls&&this.webXRMode===bm.None&&(this.mouseMoveListener=this.onMouseMove.bind(this),this.renderer.domElement.addEventListener("pointermove",this.mouseMoveListener,!1),this.mouseDownListener=this.onMouseDown.bind(this),this.renderer.domElement.addEventListener("pointerdown",this.mouseDownListener,!1),this.mouseUpListener=this.onMouseUp.bind(this),this.renderer.domElement.addEventListener("pointerup",this.mouseUpListener,!1),this.keyDownListener=this.onKeyDown.bind(this),window.addEventListener("keydown",this.keyDownListener,!1))}removeEventHandlers(){this.useBuiltInControls&&(this.renderer.domElement.removeEventListener("pointermove",this.mouseMoveListener),this.mouseMoveListener=null,this.renderer.domElement.removeEventListener("pointerdown",this.mouseDownListener),this.mouseDownListener=null,this.renderer.domElement.removeEventListener("pointerup",this.mouseUpListener),this.mouseUpListener=null,window.removeEventListener("keydown",this.keyDownListener),this.keyDownListener=null)}setRenderMode(e){this.renderMode=e}setActiveSphericalHarmonicsDegrees(e){this.splatMesh.material.uniforms.sphericalHarmonicsDegree.value=e,this.splatMesh.material.uniformsNeedUpdate=!0}onSplatMeshChanged(e){this.onSplatMeshChangedCallback=e}onMouseMove(e){this.mousePosition.set(e.offsetX,e.offsetY)}onMouseDown(){this.mouseDownPosition.copy(this.mousePosition),this.mouseDownTime=gm()}onMouseClick(e){this.mousePosition.set(e.offsetX,e.offsetY),this.checkForFocalPointChange()}getRenderDimensions(e){this.rootElement?(e.x=this.rootElement.offsetWidth,e.y=this.rootElement.offsetHeight):this.renderer.getSize(e)}setOrthographicMode(e){if(e===this.camera.isOrthographicCamera)return;const t=this.camera,i=e?this.orthographicCamera:this.perspectiveCamera;if(i.position.copy(t.position),i.up.copy(t.up),i.rotation.copy(t.rotation),i.quaternion.copy(t.quaternion),i.matrix.copy(t.matrix),this.camera=i,this.controls){const r=o=>{o.saveState(),o.reset()},s=this.controls,a=e?this.orthographicControls:this.perspectiveControls;r(a),r(s),a.target.copy(s.target),e?nd.setCameraZoomFromPosition(i,t,s):nd.setCameraPositionFromZoom(i,t,a),this.controls=a,this.camera.lookAt(this.controls.target)}}adjustForWebXRStereo(e){if(this.camera&&this.webXRActive){const i=this.renderer.xr.getCamera().projectionMatrix.elements[0],r=this.camera.projectionMatrix.elements[0];e.x*=r/i}}isLoadingOrUnloading(){return Object.keys(this.splatSceneDownloadPromises).length>0||this.splatSceneDownloadAndBuildPromise!==null||this.splatSceneRemovalPromise!==null}isDisposingOrDisposed(){return this.disposing||this.disposed}addSplatSceneDownloadPromise(e){this.splatSceneDownloadPromises[e.id]=e}removeSplatSceneDownloadPromise(e){delete this.splatSceneDownloadPromises[e.id]}setSplatSceneDownloadAndBuildPromise(e){this.splatSceneDownloadAndBuildPromise=e}clearSplatSceneDownloadAndBuildPromise(){this.splatSceneDownloadAndBuildPromise=null}addSplatScene(e,t={}){if(this.isLoadingOrUnloading())throw new Error("Cannot add splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot add splat scene after dispose() is called.");t.progressiveLoad&&this.splatMesh.scenes&&this.splatMesh.scenes.length>0&&(console.log('addSplatScene(): "progressiveLoad" option ignore because there are multiple splat scenes'),t.progressiveLoad=!1);const i=t.format!==void 0&&t.format!==null?t.format:d6(e),r=nd.isProgressivelyLoadable(i)&&t.progressiveLoad,s=t.showLoadingUI!==void 0&&t.showLoadingUI!==null?t.showLoadingUI:!0;let a=null;s&&(this.loadingSpinner.removeAllTasks(),a=this.loadingSpinner.addTask("Downloading..."));const o=()=>{this.loadingProgressBar.hide(),this.loadingSpinner.removeAllTasks()},l=(m,v,g)=>{if(s)if(g===Pr.Downloading)if(m==100)this.loadingSpinner.setMessageForTask(a,"Download complete!");else if(r)this.loadingSpinner.setMessageForTask(a,"Downloading splats...");else{const _=v?`: ${v}`:"...";this.loadingSpinner.setMessageForTask(a,`Downloading${_}`)}else g===Pr.Processing&&this.loadingSpinner.setMessageForTask(a,"Processing splats...")};let c=!1,u=0;const d=(m,v)=>{s&&((m&&r||v&&!r)&&(this.loadingSpinner.removeTask(a),!v&&!c&&this.loadingProgressBar.show()),r&&(v?(c=!0,this.loadingProgressBar.hide()):this.loadingProgressBar.setProgress(u)))},f=(m,v,g)=>{u=m,l(m,v,g),t.onProgress&&t.onProgress(m,v,g)},h=(m,v,g)=>{!r&&t.onProgress&&t.onProgress(0,"0%",Pr.Processing);const _={rotation:t.rotation||t.orientation,position:t.position,scale:t.scale,splatAlphaRemovalThreshold:t.splatAlphaRemovalThreshold};return this.addSplatBuffers([m],[_],g,v&&s,s,r,r).then(()=>{!r&&t.onProgress&&t.onProgress(100,"100%",Pr.Processing),d(v,g)})};return(r?this.downloadAndBuildSingleSplatSceneProgressiveLoad.bind(this):this.downloadAndBuildSingleSplatSceneStandardLoad.bind(this))(e,i,t.splatAlphaRemovalThreshold,h.bind(this),f,o.bind(this),t.headers)}downloadAndBuildSingleSplatSceneStandardLoad(e,t,i,r,s,a,o){const l=this.downloadSplatSceneToSplatBuffer(e,i,s,!1,void 0,t,o),c=x2(l.abortHandler);return l.then(u=>(this.removeSplatSceneDownloadPromise(l),r(u,!0,!0).then(()=>{c.resolve(),this.clearSplatSceneDownloadAndBuildPromise()}))).catch(u=>{a&&a(),this.clearSplatSceneDownloadAndBuildPromise(),this.removeSplatSceneDownloadPromise(l);const d=u instanceof ex?u:new Error(`Viewer::addSplatScene -> Could not load file ${e}`);c.reject(d)}),this.addSplatSceneDownloadPromise(l),this.setSplatSceneDownloadAndBuildPromise(c.promise),c.promise}downloadAndBuildSingleSplatSceneProgressiveLoad(e,t,i,r,s,a,o){let l=0,c=!1;const u=[],d=()=>{if(u.length>0&&!c&&!this.isDisposingOrDisposed()){c=!0;const v=u.shift();r(v.splatBuffer,v.firstBuild,v.finalBuild).then(()=>{c=!1,v.firstBuild?p.resolve():v.finalBuild&&(m.resolve(),this.clearSplatSceneDownloadAndBuildPromise()),u.length>0&&ll(()=>d())})}},f=(v,g)=>{this.isDisposingOrDisposed()||(g||u.length===0||v.getSplatCount()>u[0].splatBuffer.getSplatCount())&&(u.push({splatBuffer:v,firstBuild:l===0,finalBuild:g}),l++,d())},h=this.downloadSplatSceneToSplatBuffer(e,i,s,!0,f,t,o),p=x2(h.abortHandler),m=x2();return this.addSplatSceneDownloadPromise(h),this.setSplatSceneDownloadAndBuildPromise(m.promise),h.then(()=>{this.removeSplatSceneDownloadPromise(h)}).catch(v=>{this.clearSplatSceneDownloadAndBuildPromise(),this.removeSplatSceneDownloadPromise(h);const g=v instanceof ex?v:new Error("Viewer::addSplatScene -> Could not load one or more scenes");p.reject(g),a&&a(g)}),p.promise}addSplatScenes(e,t=!0,i=void 0){if(this.isLoadingOrUnloading())throw new Error("Cannot add splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot add splat scene after dispose() is called.");const r=e.length,s=[];let a;t&&(this.loadingSpinner.removeAllTasks(),a=this.loadingSpinner.addTask("Downloading..."));const o=(d,f,h,p)=>{s[d]=f;let m=0;for(let v=0;v<r;v++)m+=s[v]||0;m=m/r,h=`${m.toFixed(2)}%`,t&&p===Pr.Downloading&&this.loadingSpinner.setMessageForTask(a,m==100?"Download complete!":`Downloading: ${h}`),i&&i(m,h,p)},l=[],c=[];for(let d=0;d<e.length;d++){const f=e[d],h=f.format!==void 0&&f.format!==null?f.format:d6(f.path),p=this.downloadSplatSceneToSplatBuffer(f.path,f.splatAlphaRemovalThreshold,o.bind(this,d),!1,void 0,h,f.headers);l.push(p),c.push(p.promise)}const u=new J_((d,f)=>{Promise.all(c).then(h=>{t&&this.loadingSpinner.removeTask(a),i&&i(0,"0%",Pr.Processing),this.addSplatBuffers(h,e,!0,t,t,!1,!1).then(()=>{i&&i(100,"100%",Pr.Processing),this.clearSplatSceneDownloadAndBuildPromise(),d()})}).catch(h=>{t&&this.loadingSpinner.removeTask(a),this.clearSplatSceneDownloadAndBuildPromise();const p=h instanceof ex?h:new Error("Viewer::addSplatScenes -> Could not load one or more splat scenes.");f(p)}).finally(()=>{this.removeSplatSceneDownloadPromise(u)})},d=>{for(let f of l)f.abort(d)});return this.addSplatSceneDownloadPromise(u),this.setSplatSceneDownloadAndBuildPromise(u),u}downloadSplatSceneToSplatBuffer(e,t=1,i=void 0,r=!1,s=void 0,a,o){const l=r?!1:this.optimizeSplatData;try{if(a===Nc.Splat)return jO.loadFromURL(e,i,r,s,t,this.inMemoryCompressionLevel,l,o);if(a===Nc.KSplat)return CD.loadFromURL(e,i,r,s,o);if(a===Nc.Ply)return YO.loadFromURL(e,i,r,s,t,this.inMemoryCompressionLevel,l,this.sphericalHarmonicsDegree,o)}catch(c){throw c instanceof XO?new Error("File type or server does not support progressive loading."):c}throw new Error(`Viewer::downloadSplatSceneToSplatBuffer -> File format not supported: ${e}`)}static isProgressivelyLoadable(e){return e===Nc.Splat||e===Nc.KSplat||e===Nc.Ply}setupSortWorker(e){if(!this.isDisposingOrDisposed())return new Promise(t=>{const i=this.integerBasedSort?Int32Array:Float32Array,r=e.getSplatCount(),s=e.getMaxSplatCount();this.sortWorker=bJe(s,this.sharedMemoryForWorkers,this.enableSIMDInSort,this.integerBasedSort,this.splatMesh.dynamicMode,this.splatSortDistanceMapPrecision),this.sortWorker.onmessage=a=>{if(a.data.sortDone){if(this.sortRunning=!1,this.sharedMemoryForWorkers)this.splatMesh.updateRenderIndexes(this.sortWorkerSortedIndexes,a.data.splatRenderCount);else{const o=new Uint32Array(a.data.sortedIndexes.buffer,0,a.data.splatRenderCount);this.splatMesh.updateRenderIndexes(o,a.data.splatRenderCount)}this.lastSplatSortCount=this.splatSortCount,this.lastSortTime=a.data.sortTime,this.sortPromiseResolver(),this.sortPromiseResolver=null,this.forceRenderNextFrame(),this.runAfterNextSort.length>0&&(this.runAfterNextSort.forEach(o=>{o()}),this.runAfterNextSort.length=0)}else if(a.data.sortCanceled)this.sortRunning=!1;else if(a.data.sortSetupPhase1Complete){this.logLevel>=vv.Info&&console.log("Sorting web worker WASM setup complete."),this.sharedMemoryForWorkers?(this.sortWorkerSortedIndexes=new Uint32Array(a.data.sortedIndexesBuffer,a.data.sortedIndexesOffset,s),this.sortWorkerIndexesToSort=new Uint32Array(a.data.indexesToSortBuffer,a.data.indexesToSortOffset,s),this.sortWorkerPrecomputedDistances=new i(a.data.precomputedDistancesBuffer,a.data.precomputedDistancesOffset,s),this.sortWorkerTransforms=new Float32Array(a.data.transformsBuffer,a.data.transformsOffset,ii.MaxScenes*16)):(this.sortWorkerIndexesToSort=new Uint32Array(s),this.sortWorkerPrecomputedDistances=new i(s),this.sortWorkerTransforms=new Float32Array(ii.MaxScenes*16));for(let o=0;o<r;o++)this.sortWorkerIndexesToSort[o]=o;if(this.sortWorker.maxSplatCount=s,this.logLevel>=vv.Info){console.log("Sorting web worker ready.");const o=this.splatMesh.getSplatDataTextures(),l=o.covariances.size,c=o.centerColors.size;console.log("Covariances texture size: "+l.x+" x "+l.y),console.log("Centers/colors texture size: "+c.x+" x "+c.y)}t()}}})}disposeSortWorker(){this.sortWorker&&this.sortWorker.terminate(),this.sortWorker=null,this.sortPromise=null,this.sortPromiseResolver&&(this.sortPromiseResolver(),this.sortPromiseResolver=null),this.preSortMessages=[],this.sortRunning=!1}removeSplatScene(e,t=!0){return this.removeSplatScenes([e],t)}removeSplatScenes(e,t=!0){if(this.isLoadingOrUnloading())throw new Error("Cannot remove splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot remove splat scene after dispose() is called.");let i;return this.splatSceneRemovalPromise=new Promise((r,s)=>{let a;t&&(this.loadingSpinner.removeAllTasks(),this.loadingSpinner.show(),a=this.loadingSpinner.addTask("Removing splat scene..."));const o=()=>{t&&(this.loadingSpinner.hide(),this.loadingSpinner.removeTask(a))},l=u=>{o(),this.splatSceneRemovalPromise=null,u?s(u):r()},c=()=>this.isDisposingOrDisposed()?(l(),!0):!1;i=this.sortPromise||Promise.resolve(),i.then(()=>{if(c())return;const u=[],d=[],f=[];for(let h=0;h<this.splatMesh.scenes.length;h++){let p=!1;for(let m of e)if(m===h){p=!0;break}if(!p){const m=this.splatMesh.scenes[h];u.push(m.splatBuffer),d.push(this.splatMesh.sceneOptions[h]),f.push({position:m.position.clone(),quaternion:m.quaternion.clone(),scale:m.scale.clone()})}}this.disposeSortWorker(),this.splatMesh.dispose(),this.sceneRevealMode=ky.Instant,this.createSplatMesh(),this.addSplatBuffers(u,d,!0,!1,!0).then(()=>{c()||(o(),this.splatMesh.scenes.forEach((h,p)=>{h.position.copy(f[p].position),h.quaternion.copy(f[p].quaternion),h.scale.copy(f[p].scale)}),this.splatMesh.updateTransforms(),this.splatRenderReady=!1,this.runSplatSort(!0).then(()=>{if(c()){this.splatRenderReady=!0;return}i=this.sortPromise||Promise.resolve(),i.then(()=>{this.splatRenderReady=!0,l()})}))}).catch(h=>{l(h)})})}),this.splatSceneRemovalPromise}start(){if(this.selfDrivenMode)this.webXRMode?this.renderer.setAnimationLoop(this.selfDrivenUpdateFunc):this.requestFrameId=requestAnimationFrame(this.selfDrivenUpdateFunc),this.selfDrivenModeRunning=!0;else throw new Error("Cannot start viewer unless it is in self driven mode.")}stop(){this.selfDrivenMode&&this.selfDrivenModeRunning&&(this.webXRMode?this.renderer.setAnimationLoop(null):cancelAnimationFrame(this.requestFrameId),this.selfDrivenModeRunning=!1)}async dispose(){if(this.isDisposingOrDisposed())return this.disposePromise;let e=[],t=[];for(let i in this.splatSceneDownloadPromises)if(this.splatSceneDownloadPromises.hasOwnProperty(i)){const r=this.splatSceneDownloadPromises[i];t.push(r),e.push(r.promise)}return this.sortPromise&&e.push(this.sortPromise),this.disposing=!0,this.disposePromise=Promise.all(e).finally(()=>{this.stop(),this.orthographicControls&&(this.orthographicControls.dispose(),this.orthographicControls=null),this.perspectiveControls&&(this.perspectiveControls.dispose(),this.perspectiveControls=null),this.controls=null,this.splatMesh&&(this.splatMesh.dispose(),this.splatMesh=null),this.sceneHelper&&(this.sceneHelper.dispose(),this.sceneHelper=null),this.resizeObserver&&(this.resizeObserver.unobserve(this.rootElement),this.resizeObserver=null),this.disposeSortWorker(),this.removeEventHandlers(),this.loadingSpinner.removeAllTasks(),this.loadingSpinner.setContainer(null),this.loadingProgressBar.hide(),this.loadingProgressBar.setContainer(null),this.infoPanel.setContainer(null),this.camera=null,this.threeScene=null,this.splatRenderReady=!1,this.initialized=!1,this.renderer&&(this.usingExternalRenderer||(this.rootElement.removeChild(this.renderer.domElement),this.renderer.dispose()),this.renderer=null),this.usingExternalRenderer||document.body.removeChild(this.rootElement),this.sortWorkerSortedIndexes=null,this.sortWorkerIndexesToSort=null,this.sortWorkerPrecomputedDistances=null,this.sortWorkerTransforms=null,this.disposed=!0,this.disposing=!1,this.disposePromise=null}),t.forEach(i=>{i.abort("Scene disposed")}),this.disposePromise}selfDrivenUpdate(){this.selfDrivenMode&&!this.webXRMode&&(this.requestFrameId=requestAnimationFrame(this.selfDrivenUpdateFunc)),this.update(),this.shouldRender()?(this.render(),this.consecutiveRenderFrames++):this.consecutiveRenderFrames=0,this.renderNextFrame=!1}forceRenderNextFrame(){this.renderNextFrame=!0}update(e,t){this.dropInMode&&this.updateForDropInMode(e,t),!(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())&&(this.controls&&(this.controls.update(),this.camera.isOrthographicCamera&&!this.usingExternalCamera&&nd.setCameraPositionFromZoom(this.camera,this.camera,this.controls)),this.runSplatSort(),this.updateForRendererSizeChanges(),this.updateSplatMesh(),this.updateMeshCursor(),this.updateFPS(),this.timingSensitiveUpdates(),this.updateInfoPanel(),this.updateControlPlane())}updateForDropInMode(e,t){this.renderer=e,this.splatMesh&&this.splatMesh.setRenderer(this.renderer),this.camera=t,this.controls&&(this.controls.object=t),this.init()}updateControlPlane(){this.showControlPlane?(this.sceneHelper.setControlPlaneVisibility(!0),this.sceneHelper.positionAndOrientControlPlane(this.controls.target,this.camera.up)):this.sceneHelper.setControlPlaneVisibility(!1)}getSplatMesh(){return this.splatMesh}getSplatScene(e){return this.splatMesh.getScene(e)}getSceneCount(){return this.splatMesh.getSceneCount()}isMobile(){return navigator.userAgent.includes("Mobi")}};kt(nd,"setCameraPositionFromZoom",function(){const e=new ze;return function(t,i,r){const s=1/(i.zoom*.001);e.copy(r.target).sub(t.position).normalize().multiplyScalar(s).negate(),t.position.copy(r.target).add(e)}}()),kt(nd,"setCameraZoomFromPosition",function(){const e=new ze;return function(t,i,r){const s=e.copy(r.target).sub(i.position).length();t.zoom=1/(s*.001)}}());let S6=nd;const EJe={components:{Title:GIe,Abstract:KIe,Carousel:SPe,Table:NUe,Comment:sHe,Latex:pHe,SeletionForComparison:eHe}};function IJe(n,e,t,i,r,s){const a=yt("Title"),o=yt("Carousel"),l=yt("Abstract"),c=yt("Latex"),u=yt("SeletionForComparison"),d=yt("Comment");return F(),ie(bt,null,[oe(a),oe(o),oe(l),oe(c),oe(u),oe(d)],64)}const RJe=sc(EJe,[["render",IJe]]),OZ=n=>(VD("data-v-555f4273"),n=n(),$D(),n),PJe={class:"bg"},DJe={class:"footer"},LJe=["href"],kJe=OZ(()=>le("br",null,null,-1)),OJe=["href"],NJe=["href"],BJe=["href"],FJe=OZ(()=>le("br",null,null,-1)),zJe=["href"],UJe=ve({__name:"Footer",setup(n){const e={Nerfies:"https://github.com/nerfies/nerfies.github.io",Vue:"https://cn.vuejs.org/",Vite:"https://cn.vitejs.dev/",ElementPlus:"https://element-plus.org/zh-CN/",template:"https://github.com/JunyaoHu/academic-project-page-template-vue"};return(t,i)=>{const r=yt("el-row"),s=yt("el-watermark");return F(),ie("div",PJe,[oe(s,{content:["JunyaoHu","Academic Project","Page Template"],gap:["60","0"],"z-index":0},{default:ge(()=>[oe(r,{justify:"center"},{default:ge(()=>[le("p",DJe,[Xt(" This template is inspired by "),le("a",{href:e.Nerfies},"Nerfies",8,LJe),Xt(","),kJe,Xt(" powered by "),le("a",{href:e.Vue},"Vue",8,OJe),Xt(", "),le("a",{href:e.Vite},"Vite",8,NJe),Xt(", and "),le("a",{href:e.ElementPlus},"Element Plus",8,BJe),Xt("."),FJe,Xt(" You can fork / star/ PR from "),le("a",{href:e.template},"here",8,zJe),Xt(". ")])]),_:1})]),_:1})])}}}),HJe=sc(UJe,[["__scopeId","data-v-555f4273"]]),VJe={components:{Header:DIe,Main:RJe,Footer:HJe}};function $Je(n,e,t,i,r,s){const a=yt("Header"),o=yt("el-header"),l=yt("Main"),c=yt("el-main"),u=yt("Footer"),d=yt("el-footer"),f=yt("el-container"),h=yt("el-backtop");return F(),ie("div",null,[oe(f,null,{default:ge(()=>[oe(o,null,{default:ge(()=>[oe(a)]),_:1}),oe(c,null,{default:ge(()=>[oe(l)]),_:1}),oe(d,null,{default:ge(()=>[oe(u)]),_:1})]),_:1}),oe(h,{right:40,bottom:80})])}const GJe=sc(VJe,[["render",$Je]]),NZ=I8(GJe);NZ.use(IIe);NZ.mount("#app")});export default WJe();
